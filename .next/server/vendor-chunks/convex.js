"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/convex";
exports.ids = ["vendor-chunks/convex"];
exports.modules = {

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/http_client.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/http_client.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexHttpClient: () => (/* binding */ ConvexHttpClient),\n/* harmony export */   STATUS_CODE_BAD_REQUEST: () => (/* binding */ STATUS_CODE_BAD_REQUEST),\n/* harmony export */   STATUS_CODE_OK: () => (/* binding */ STATUS_CODE_OK),\n/* harmony export */   STATUS_CODE_UDF_FAILED: () => (/* binding */ STATUS_CODE_UDF_FAILED),\n/* harmony export */   setFetch: () => (/* binding */ setFetch)\n/* harmony export */ });\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nconst STATUS_CODE_OK = 200;\nconst STATUS_CODE_BAD_REQUEST = 400;\nconst STATUS_CODE_UDF_FAILED = 560;\nlet specifiedFetch = void 0;\nfunction setFetch(f) {\n    specifiedFetch = f;\n}\nclass ConvexHttpClient {\n    /**\n   * Create a new {@link ConvexHttpClient}.\n   *\n   * @param address - The url of your Convex deployment, often provided\n   * by an environment variable. E.g. `https://small-mouse-123.convex.cloud`.\n   * @param options - An object of options.\n   * - `skipConvexDeploymentUrlCheck` - Skip validating that the Convex deployment URL looks like\n   * `https://happy-animal-123.convex.cloud` or localhost. This can be useful if running a self-hosted\n   * Convex backend that uses a different URL.\n   * - `logger` - A logger or a boolean. If not provided, logs to the console.\n   * You can construct your own logger to customize logging to log elsewhere\n   * or not log at all, or use `false` as a shorthand for a no-op logger.\n   * A logger is an object with 4 methods: log(), warn(), error(), and logVerbose().\n   * These methods can receive multiple arguments of any types, like console.log().\n   * - `auth` - A JWT containing identity claims accessible in Convex functions.\n   * This identity may expire so it may be necessary to call `setAuth()` later,\n   * but for short-lived clients it's convenient to specify this value here.\n   */ constructor(address, options){\n        __publicField(this, \"address\");\n        __publicField(this, \"auth\");\n        __publicField(this, \"adminAuth\");\n        __publicField(this, \"encodedTsPromise\");\n        __publicField(this, \"debug\");\n        __publicField(this, \"fetchOptions\");\n        __publicField(this, \"logger\");\n        __publicField(this, \"mutationQueue\", []);\n        __publicField(this, \"isProcessingQueue\", false);\n        if (typeof options === \"boolean\") {\n            throw new Error(\"skipConvexDeploymentUrlCheck as the second argument is no longer supported. Please pass an options object, `{ skipConvexDeploymentUrlCheck: true }`.\");\n        }\n        const opts = options ?? {};\n        if (opts.skipConvexDeploymentUrlCheck !== true) {\n            (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.validateDeploymentUrl)(address);\n        }\n        this.logger = options?.logger === false ? (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.instantiateNoopLogger)({\n            verbose: false\n        }) : options?.logger !== true && options?.logger ? options.logger : (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.instantiateDefaultLogger)({\n            verbose: false\n        });\n        this.address = address;\n        this.debug = true;\n        this.auth = void 0;\n        this.adminAuth = void 0;\n        if (options?.auth) {\n            this.setAuth(options.auth);\n        }\n    }\n    /**\n   * Obtain the {@link ConvexHttpClient}'s URL to its backend.\n   * @deprecated Use url, which returns the url without /api at the end.\n   *\n   * @returns The URL to the Convex backend, including the client's API version.\n   */ backendUrl() {\n        return `${this.address}/api`;\n    }\n    /**\n   * Return the address for this client, useful for creating a new client.\n   *\n   * Not guaranteed to match the address with which this client was constructed:\n   * it may be canonicalized.\n   */ get url() {\n        return this.address;\n    }\n    /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   *\n   * Should be called whenever the token changes (i.e. due to expiration and refresh).\n   *\n   * @param value - JWT-encoded OpenID Connect identity token.\n   */ setAuth(value) {\n        this.clearAuth();\n        this.auth = value;\n    }\n    /**\n   * Set admin auth token to allow calling internal queries, mutations, and actions\n   * and acting as an identity.\n   *\n   * @internal\n   */ setAdminAuth(token, actingAsIdentity) {\n        this.clearAuth();\n        if (actingAsIdentity !== void 0) {\n            const bytes = new TextEncoder().encode(JSON.stringify(actingAsIdentity));\n            const actingAsIdentityEncoded = btoa(String.fromCodePoint(...bytes));\n            this.adminAuth = `${token}:${actingAsIdentityEncoded}`;\n        } else {\n            this.adminAuth = token;\n        }\n    }\n    /**\n   * Clear the current authentication token if set.\n   */ clearAuth() {\n        this.auth = void 0;\n        this.adminAuth = void 0;\n    }\n    /**\n   * Sets whether the result log lines should be printed on the console or not.\n   *\n   * @internal\n   */ setDebug(debug) {\n        this.debug = debug;\n    }\n    /**\n   * Used to customize the fetch behavior in some runtimes.\n   *\n   * @internal\n   */ setFetchOptions(fetchOptions) {\n        this.fetchOptions = fetchOptions;\n    }\n    /**\n   * This API is experimental: it may change or disappear.\n   *\n   * Execute a Convex query function at the same timestamp as every other\n   * consistent query execution run by this HTTP client.\n   *\n   * This doesn't make sense for long-lived ConvexHttpClients as Convex\n   * backends can read a limited amount into the past: beyond 30 seconds\n   * in the past may not be available.\n   *\n   * Create a new client to use a consistent time.\n   *\n   * @param name - The name of the query.\n   * @param args - The arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the query's result.\n   *\n   * @deprecated This API is experimental: it may change or disappear.\n   */ async consistentQuery(query, ...args) {\n        const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n        const timestampPromise = this.getTimestamp();\n        return await this.queryInner(query, queryArgs, {\n            timestampPromise\n        });\n    }\n    async getTimestamp() {\n        if (this.encodedTsPromise) {\n            return this.encodedTsPromise;\n        }\n        return this.encodedTsPromise = this.getTimestampInner();\n    }\n    async getTimestampInner() {\n        const localFetch = specifiedFetch || fetch;\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n        };\n        const response = await localFetch(`${this.address}/api/query_ts`, {\n            ...this.fetchOptions,\n            method: \"POST\",\n            headers\n        });\n        if (!response.ok) {\n            throw new Error(await response.text());\n        }\n        const { ts } = await response.json();\n        return ts;\n    }\n    /**\n   * Execute a Convex query function.\n   *\n   * @param name - The name of the query.\n   * @param args - The arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the query's result.\n   */ async query(query, ...args) {\n        const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n        return await this.queryInner(query, queryArgs, {});\n    }\n    async queryInner(query, queryArgs, options) {\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(query);\n        const args = [\n            (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(queryArgs)\n        ];\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n        };\n        if (this.adminAuth) {\n            headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n        } else if (this.auth) {\n            headers[\"Authorization\"] = `Bearer ${this.auth}`;\n        }\n        const localFetch = specifiedFetch || fetch;\n        const timestamp = options.timestampPromise ? await options.timestampPromise : void 0;\n        const body = JSON.stringify({\n            path: name,\n            format: \"convex_encoded_json\",\n            args,\n            ...timestamp ? {\n                ts: timestamp\n            } : {}\n        });\n        const endpoint = timestamp ? `${this.address}/api/query_at_ts` : `${this.address}/api/query`;\n        const response = await localFetch(endpoint, {\n            ...this.fetchOptions,\n            body,\n            method: \"POST\",\n            headers\n        });\n        if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n            throw new Error(await response.text());\n        }\n        const respJSON = await response.json();\n        if (this.debug) {\n            for (const line of respJSON.logLines ?? []){\n                (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"query\", name, line);\n            }\n        }\n        switch(respJSON.status){\n            case \"success\":\n                return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n            case \"error\":\n                if (respJSON.errorData !== void 0) {\n                    throw forwardErrorData(respJSON.errorData, new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage));\n                }\n                throw new Error(respJSON.errorMessage);\n            default:\n                throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n        }\n    }\n    async mutationInner(mutation, mutationArgs) {\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(mutation);\n        const body = JSON.stringify({\n            path: name,\n            format: \"convex_encoded_json\",\n            args: [\n                (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(mutationArgs)\n            ]\n        });\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n        };\n        if (this.adminAuth) {\n            headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n        } else if (this.auth) {\n            headers[\"Authorization\"] = `Bearer ${this.auth}`;\n        }\n        const localFetch = specifiedFetch || fetch;\n        const response = await localFetch(`${this.address}/api/mutation`, {\n            ...this.fetchOptions,\n            body,\n            method: \"POST\",\n            headers\n        });\n        if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n            throw new Error(await response.text());\n        }\n        const respJSON = await response.json();\n        if (this.debug) {\n            for (const line of respJSON.logLines ?? []){\n                (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"mutation\", name, line);\n            }\n        }\n        switch(respJSON.status){\n            case \"success\":\n                return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n            case \"error\":\n                if (respJSON.errorData !== void 0) {\n                    throw forwardErrorData(respJSON.errorData, new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage));\n                }\n                throw new Error(respJSON.errorMessage);\n            default:\n                throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n        }\n    }\n    async processMutationQueue() {\n        if (this.isProcessingQueue) {\n            return;\n        }\n        this.isProcessingQueue = true;\n        while(this.mutationQueue.length > 0){\n            const { mutation, args, resolve, reject } = this.mutationQueue.shift();\n            try {\n                const result = await this.mutationInner(mutation, args);\n                resolve(result);\n            } catch (error) {\n                reject(error);\n            }\n        }\n        this.isProcessingQueue = false;\n    }\n    enqueueMutation(mutation, args) {\n        return new Promise((resolve, reject)=>{\n            this.mutationQueue.push({\n                mutation,\n                args,\n                resolve,\n                reject\n            });\n            void this.processMutationQueue();\n        });\n    }\n    /**\n   * Execute a Convex mutation function. Mutations are queued by default.\n   *\n   * @param name - The name of the mutation.\n   * @param args - The arguments object for the mutation. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - An optional object containing\n   * @returns A promise of the mutation's result.\n   */ async mutation(mutation, ...args) {\n        const [fnArgs, options] = args;\n        const mutationArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(fnArgs);\n        const queued = !options?.skipQueue;\n        if (queued) {\n            return await this.enqueueMutation(mutation, mutationArgs);\n        } else {\n            return await this.mutationInner(mutation, mutationArgs);\n        }\n    }\n    /**\n   * Execute a Convex action function. Actions are not queued.\n   *\n   * @param name - The name of the action.\n   * @param args - The arguments object for the action. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the action's result.\n   */ async action(action, ...args) {\n        const actionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(action);\n        const body = JSON.stringify({\n            path: name,\n            format: \"convex_encoded_json\",\n            args: [\n                (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(actionArgs)\n            ]\n        });\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n        };\n        if (this.adminAuth) {\n            headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n        } else if (this.auth) {\n            headers[\"Authorization\"] = `Bearer ${this.auth}`;\n        }\n        const localFetch = specifiedFetch || fetch;\n        const response = await localFetch(`${this.address}/api/action`, {\n            ...this.fetchOptions,\n            body,\n            method: \"POST\",\n            headers\n        });\n        if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n            throw new Error(await response.text());\n        }\n        const respJSON = await response.json();\n        if (this.debug) {\n            for (const line of respJSON.logLines ?? []){\n                (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"action\", name, line);\n            }\n        }\n        switch(respJSON.status){\n            case \"success\":\n                return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n            case \"error\":\n                if (respJSON.errorData !== void 0) {\n                    throw forwardErrorData(respJSON.errorData, new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage));\n                }\n                throw new Error(respJSON.errorMessage);\n            default:\n                throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n        }\n    }\n    /**\n   * Execute a Convex function of an unknown type. These function calls are not queued.\n   *\n   * @param name - The name of the function.\n   * @param args - The arguments object for the function. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the function's result.\n   *\n   * @internal\n   */ async function(anyFunction, componentPath, ...args) {\n        const functionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n        const name = typeof anyFunction === \"string\" ? anyFunction : (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(anyFunction);\n        const body = JSON.stringify({\n            componentPath,\n            path: name,\n            format: \"convex_encoded_json\",\n            args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.convexToJson)(functionArgs)\n        });\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_2__.version}`\n        };\n        if (this.adminAuth) {\n            headers[\"Authorization\"] = `Convex ${this.adminAuth}`;\n        } else if (this.auth) {\n            headers[\"Authorization\"] = `Bearer ${this.auth}`;\n        }\n        const localFetch = specifiedFetch || fetch;\n        const response = await localFetch(`${this.address}/api/function`, {\n            ...this.fetchOptions,\n            body,\n            method: \"POST\",\n            headers\n        });\n        if (!response.ok && response.status !== STATUS_CODE_UDF_FAILED) {\n            throw new Error(await response.text());\n        }\n        const respJSON = await response.json();\n        if (this.debug) {\n            for (const line of respJSON.logLines ?? []){\n                (0,_logging_js__WEBPACK_IMPORTED_MODULE_4__.logForFunction)(this.logger, \"info\", \"any\", name, line);\n            }\n        }\n        switch(respJSON.status){\n            case \"success\":\n                return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(respJSON.value);\n            case \"error\":\n                if (respJSON.errorData !== void 0) {\n                    throw forwardErrorData(respJSON.errorData, new _values_index_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError(respJSON.errorMessage));\n                }\n                throw new Error(respJSON.errorMessage);\n            default:\n                throw new Error(`Invalid response: ${JSON.stringify(respJSON)}`);\n        }\n    }\n}\nfunction forwardErrorData(errorData, error) {\n    error.data = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(errorData);\n    return error;\n} //# sourceMappingURL=http_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvaHR0cF9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtPO0FBQzBDO0FBQ3pCO0FBTWpCO0FBTUE7QUFPQSxNQUFNLGlCQUFpQjtBQUN2QixNQUFNLDBCQUEwQjtBQUloQyxNQUFNLHlCQUF5QjtBQUd0QyxJQUFJLGlCQUFzRDtBQUNuRCxTQUFTLFNBQVMsR0FBNEI7SUFDbkQsaUJBQWlCO0FBQ25CO0FBdUJPLE1BQU0saUJBQWlCO0lBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBQUEsR0FrQzVCLFlBQ0UsU0FDQSxRQUtBO1FBeENGLG9CQUFpQjtRQUNqQixvQkFBUTtRQUNSLG9CQUFRO1FBQ1Isb0JBQVE7UUFDUixvQkFBUTtRQUNSLG9CQUFRO1FBQ1Isb0JBQVE7UUFDUixvQkFBUSxpQkFLSCxDQUFDO1FBQ04sb0JBQVEscUJBQTZCO1FBNEJuQyxJQUFJLE9BQU8sWUFBWSxXQUFXO1lBQ2hDLE1BQU0sSUFBSSxNQUNSO1FBRUo7UUFDQSxNQUFNLE9BQU8sV0FBVyxDQUFDO1FBQ3pCLElBQUksS0FBSyxpQ0FBaUMsTUFBTTtZQUM5Qyx1RUFBcUIsQ0FBQyxPQUFPO1FBQy9CO1FBQ0EsS0FBSyxTQUNILFNBQVMsV0FBVyxRQUNoQixrRUFBcUIsQ0FBQztZQUFFLFNBQVM7UUFBTSxDQUFDLElBQ3hDLFNBQVMsV0FBVyxRQUFRLFNBQVMsU0FDbkMsUUFBUSxTQUNSLHFFQUF3QixDQUFDO1lBQUUsU0FBUztRQUFNLENBQUM7UUFDbkQsS0FBSyxVQUFVO1FBQ2YsS0FBSyxRQUFRO1FBQ2IsS0FBSyxPQUFPO1FBQ1osS0FBSyxZQUFZO1FBQ2pCLElBQUksU0FBUyxNQUFNO1lBQ2pCLEtBQUssUUFBUSxRQUFRLElBQUk7UUFDM0I7SUFDRjtJQUFBOzs7OztHQUFBLEdBUUEsYUFBcUI7UUFDbkIsT0FBTyxHQUFHLEtBQUssT0FBTztJQUN4QjtJQUFBOzs7OztH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a0JBQWtCO1FBQ3JDLE1BQU0sV0FBVyxNQUFNLFdBQVcsR0FBRyxLQUFLLE9BQU8saUJBQWlCO1lBQ2hFLEdBQUcsS0FBSztZQUNSO1lBQ0EsUUFBUTtZQUNSO1FBQ0YsQ0FBQztRQUNELElBQUksQ0FBQyxTQUFTLE1BQU0sU0FBUyxXQUFXLHdCQUF3QjtZQUM5RCxNQUFNLElBQUksTUFBTSxNQUFNLFNBQVMsS0FBSyxDQUFDO1FBQ3ZDO1FBQ0EsTUFBTSxXQUFXLE1BQU0sU0FBUyxLQUFLO1FBQ3JDLElBQUksS0FBSyxPQUFPO1lBQ2QsV0FBVyxRQUFRLFNBQVMsWUFBWSxDQUFDLEVBQUc7Z0JBQzFDLDJEQUFjLENBQUMsS0FBSyxRQUFRLFFBQVEsT0FBTyxNQUFNLElBQUk7WUFDdkQ7UUFDRjtRQUNBLE9BQVEsU0FBUyxRQUFRO1lBQ3ZCLEtBQUs7Z0JBQ0gsT0FBTyw4REFBWSxDQUFDLFNBQVMsS0FBSztZQUNwQyxLQUFLO2dCQUNILElBQUksU0FBUyxjQUFjLFFBQVc7b0JBQ3BDLE1BQU0saUJBQ0osU0FBUyxXQUNULElBQUkseURBQVcsQ0FBQyxTQUFTLFlBQVk7Z0JBRXpDO2dCQUNBLE1BQU0sSUFBSSxNQUFNLFNBQVMsWUFBWTtZQUN2QztnQkFDRSxNQUFNLElBQUksTUFBTSxxQkFBcUIsS0FBSyxVQUFVLFFBQVEsQ0FBQyxFQUFFO1FBQ25FO0lBQ0Y7QUFDRjtBQUVBLFNBQVMsaUJBQWlCLFdBQXNCLE9BQTRCO0lBQ3pFLE1BQTJCLE9BQU8sOERBQVksQ0FBQyxTQUFTO0lBQ3pELE9BQU87QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9icm93c2VyL2h0dHBfY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEZ1bmN0aW9uUmVmZXJlbmNlLFxuICBGdW5jdGlvblJldHVyblR5cGUsXG4gIE9wdGlvbmFsUmVzdEFyZ3MsXG4gIGdldEZ1bmN0aW9uTmFtZSxcbn0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IHBhcnNlQXJncywgdmFsaWRhdGVEZXBsb3ltZW50VXJsIH0gZnJvbSBcIi4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgQ29udmV4RXJyb3IsXG4gIEpTT05WYWx1ZSxcbiAgY29udmV4VG9Kc29uLFxuICBqc29uVG9Db252ZXgsXG59IGZyb20gXCIuLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcixcbiAgaW5zdGFudGlhdGVOb29wTG9nZ2VyLFxuICBsb2dGb3JGdW5jdGlvbixcbiAgTG9nZ2VyLFxufSBmcm9tIFwiLi9sb2dnaW5nLmpzXCI7XG5pbXBvcnQge1xuICBBcmdzQW5kT3B0aW9ucyxcbiAgRnVuY3Rpb25BcmdzLFxuICBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzLFxufSBmcm9tIFwiLi4vc2VydmVyL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBjb25zdCBTVEFUVVNfQ09ERV9PSyA9IDIwMDtcbmV4cG9ydCBjb25zdCBTVEFUVVNfQ09ERV9CQURfUkVRVUVTVCA9IDQwMDtcbi8vIFNwZWNpYWwgY3VzdG9tIDV4eCBIVFRQIHN0YXR1cyBjb2RlIHRvIG1lYW4gdGhhdCB0aGUgVURGIHJldHVybmVkIGFuIGVycm9yLlxuLy9cbi8vIE11c3QgbWF0Y2ggdGhlIGNvbnN0YW50IG9mIHRoZSBzYW1lIG5hbWUgaW4gdGhlIGJhY2tlbmQuXG5leHBvcnQgY29uc3QgU1RBVFVTX0NPREVfVURGX0ZBSUxFRCA9IDU2MDtcblxuLy8gQWxsb3cgZmV0Y2ggdG8gYmUgc2hpbW1lZCBpbiBmb3IgTm9kZS5qcyA8IDE4XG5sZXQgc3BlY2lmaWVkRmV0Y2g6IHR5cGVvZiBnbG9iYWxUaGlzLmZldGNoIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZldGNoKGY6IHR5cGVvZiBnbG9iYWxUaGlzLmZldGNoKSB7XG4gIHNwZWNpZmllZEZldGNoID0gZjtcbn1cblxuZXhwb3J0IHR5cGUgSHR0cE11dGF0aW9uT3B0aW9ucyA9IHtcbiAgLyoqXG4gICAqIFNraXAgdGhlIGRlZmF1bHQgcXVldWUgb2YgbXV0YXRpb25zIGFuZCBydW4gdGhpcyBpbW1lZGlhdGVseS5cbiAgICpcbiAgICogVGhpcyBhbGxvd3MgdGhlIHNhbWUgSHR0cENvbnZleENsaWVudCB0byBiZSB1c2VkIHRvIHJlcXVlc3QgbXVsdGlwbGVcbiAgICogbXV0YXRpb25zIGluIHBhcmFsbGVsLCBzb21ldGhpbmcgbm90IHBvc3NpYmxlIHdpdGggV2ViU29ja2V0LWJhc2VkIGNsaWVudHMuXG4gICAqL1xuICBza2lwUXVldWU6IGJvb2xlYW47XG59O1xuXG4vKipcbiAqIEEgQ29udmV4IGNsaWVudCB0aGF0IHJ1bnMgcXVlcmllcyBhbmQgbXV0YXRpb25zIG92ZXIgSFRUUC5cbiAqXG4gKiBUaGlzIGNsaWVudCBpcyBzdGF0ZWZ1bCAoaXQgaGFzIHVzZXIgY3JlZGVudGlhbHMgYW5kIHF1ZXVlcyBtdXRhdGlvbnMpXG4gKiBzbyB0YWtlIGNhcmUgdG8gYXZvaWQgc2hhcmluZyBpdCBiZXR3ZWVuIHJlcXVlc3RzIGluIGEgc2VydmVyLlxuICpcbiAqIFRoaXMgaXMgYXBwcm9wcmlhdGUgZm9yIHNlcnZlci1zaWRlIGNvZGUgKGxpa2UgTmV0bGlmeSBMYW1iZGFzKSBvciBub24tcmVhY3RpdmVcbiAqIHdlYmFwcHMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ29udmV4SHR0cENsaWVudCB7XG4gIHByaXZhdGUgcmVhZG9ubHkgYWRkcmVzczogc3RyaW5nO1xuICBwcml2YXRlIGF1dGg6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBhZG1pbkF1dGg6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBlbmNvZGVkVHNQcm9taXNlPzogUHJvbWlzZTxzdHJpbmc+O1xuICBwcml2YXRlIGRlYnVnOiBib29sZWFuO1xuICBwcml2YXRlIGZldGNoT3B0aW9ucz86IEZldGNoT3B0aW9ucztcbiAgcHJpdmF0ZSBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSBtdXRhdGlvblF1ZXVlOiBBcnJheTx7XG4gICAgbXV0YXRpb246IEZ1bmN0aW9uUmVmZXJlbmNlPFwibXV0YXRpb25cIj47XG4gICAgYXJnczogRnVuY3Rpb25BcmdzPGFueT47XG4gICAgcmVzb2x2ZTogKHZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gICAgcmVqZWN0OiAoZXJyb3I6IGFueSkgPT4gdm9pZDtcbiAgfT4gPSBbXTtcbiAgcHJpdmF0ZSBpc1Byb2Nlc3NpbmdRdWV1ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcge0BsaW5rIENvbnZleEh0dHBDbGllbnR9LlxuICAgKlxuICAgKiBAcGFyYW0gYWRkcmVzcyAtIFRoZSB1cmwgb2YgeW91ciBDb252ZXggZGVwbG95bWVudCwgb2Z0ZW4gcHJvdmlkZWRcbiAgICogYnkgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuIEUuZy4gYGh0dHBzOi8vc21hbGwtbW91c2UtMTIzLmNvbnZleC5jbG91ZGAuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb2JqZWN0IG9mIG9wdGlvbnMuXG4gICAqIC0gYHNraXBDb252ZXhEZXBsb3ltZW50VXJsQ2hlY2tgIC0gU2tpcCB2YWxpZGF0aW5nIHRoYXQgdGhlIENvbnZleCBkZXBsb3ltZW50IFVSTCBsb29rcyBsaWtlXG4gICAqIGBodHRwczovL2hhcHB5LWFuaW1hbC0xMjMuY29udmV4LmNsb3VkYCBvciBsb2NhbGhvc3QuIFRoaXMgY2FuIGJlIHVzZWZ1bCBpZiBydW5uaW5nIGEgc2VsZi1ob3N0ZWRcbiAgICogQ29udmV4IGJhY2tlbmQgdGhhdCB1c2VzIGEgZGlmZmVyZW50IFVSTC5cbiAgICogLSBgbG9nZ2VyYCAtIEEgbG9nZ2VyIG9yIGEgYm9vbGVhbi4gSWYgbm90IHByb3ZpZGVkLCBsb2dzIHRvIHRoZSBjb25zb2xlLlxuICAgKiBZb3UgY2FuIGNvbnN0cnVjdCB5b3VyIG93biBsb2dnZXIgdG8gY3VzdG9taXplIGxvZ2dpbmcgdG8gbG9nIGVsc2V3aGVyZVxuICAgKiBvciBub3QgbG9nIGF0IGFsbCwgb3IgdXNlIGBmYWxzZWAgYXMgYSBzaG9ydGhhbmQgZm9yIGEgbm8tb3AgbG9nZ2VyLlxuICAgKiBBIGxvZ2dlciBpcyBhbiBvYmplY3Qgd2l0aCA0IG1ldGhvZHM6IGxvZygpLCB3YXJuKCksIGVycm9yKCksIGFuZCBsb2dWZXJib3NlKCkuXG4gICAqIFRoZXNlIG1ldGhvZHMgY2FuIHJlY2VpdmUgbXVsdGlwbGUgYXJndW1lbnRzIG9mIGFueSB0eXBlcywgbGlrZSBjb25zb2xlLmxvZygpLlxuICAgKiAtIGBhdXRoYCAtIEEgSldUIGNvbnRhaW5pbmcgaWRlbnRpdHkgY2xhaW1zIGFjY2Vzc2libGUgaW4gQ29udmV4IGZ1bmN0aW9ucy5cbiAgICogVGhpcyBpZGVudGl0eSBtYXkgZXhwaXJlIHNvIGl0IG1heSBiZSBuZWNlc3NhcnkgdG8gY2FsbCBgc2V0QXV0aCgpYCBsYXRlcixcbiAgICogYnV0IGZvciBzaG9ydC1saXZlZCBjbGllbnRzIGl0J3MgY29udmVuaWVudCB0byBzcGVjaWZ5IHRoaXMgdmFsdWUgaGVyZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFkZHJlc3M6IHN0cmluZyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjaz86IGJvb2xlYW47XG4gICAgICBsb2dnZXI/OiBMb2dnZXIgfCBib29sZWFuO1xuICAgICAgYXV0aD86IHN0cmluZztcbiAgICB9LFxuICApIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwic2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjayBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFBsZWFzZSBwYXNzIGFuIG9wdGlvbnMgb2JqZWN0LCBgeyBza2lwQ29udmV4RGVwbG95bWVudFVybENoZWNrOiB0cnVlIH1gLlwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPz8ge307XG4gICAgaWYgKG9wdHMuc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjayAhPT0gdHJ1ZSkge1xuICAgICAgdmFsaWRhdGVEZXBsb3ltZW50VXJsKGFkZHJlc3MpO1xuICAgIH1cbiAgICB0aGlzLmxvZ2dlciA9XG4gICAgICBvcHRpb25zPy5sb2dnZXIgPT09IGZhbHNlXG4gICAgICAgID8gaW5zdGFudGlhdGVOb29wTG9nZ2VyKHsgdmVyYm9zZTogZmFsc2UgfSlcbiAgICAgICAgOiBvcHRpb25zPy5sb2dnZXIgIT09IHRydWUgJiYgb3B0aW9ucz8ubG9nZ2VyXG4gICAgICAgICAgPyBvcHRpb25zLmxvZ2dlclxuICAgICAgICAgIDogaW5zdGFudGlhdGVEZWZhdWx0TG9nZ2VyKHsgdmVyYm9zZTogZmFsc2UgfSk7XG4gICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICB0aGlzLmRlYnVnID0gdHJ1ZTtcbiAgICB0aGlzLmF1dGggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5hZG1pbkF1dGggPSB1bmRlZmluZWQ7XG4gICAgaWYgKG9wdGlvbnM/LmF1dGgpIHtcbiAgICAgIHRoaXMuc2V0QXV0aChvcHRpb25zLmF1dGgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPYnRhaW4gdGhlIHtAbGluayBDb252ZXhIdHRwQ2xpZW50fSdzIFVSTCB0byBpdHMgYmFja2VuZC5cbiAgICogQGRlcHJlY2F0ZWQgVXNlIHVybCwgd2hpY2ggcmV0dXJucyB0aGUgdXJsIHdpdGhvdXQgL2FwaSBhdCB0aGUgZW5kLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgVVJMIHRvIHRoZSBDb252ZXggYmFja2VuZCwgaW5jbHVkaW5nIHRoZSBjbGllbnQncyBBUEkgdmVyc2lvbi5cbiAgICovXG4gIGJhY2tlbmRVcmwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5hZGRyZXNzfS9hcGlgO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYWRkcmVzcyBmb3IgdGhpcyBjbGllbnQsIHVzZWZ1bCBmb3IgY3JlYXRpbmcgYSBuZXcgY2xpZW50LlxuICAgKlxuICAgKiBOb3QgZ3VhcmFudGVlZCB0byBtYXRjaCB0aGUgYWRkcmVzcyB3aXRoIHdoaWNoIHRoaXMgY2xpZW50IHdhcyBjb25zdHJ1Y3RlZDpcbiAgICogaXQgbWF5IGJlIGNhbm9uaWNhbGl6ZWQuXG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLmFkZHJlc3M7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiB0byBiZSB1c2VkIGZvciBzdWJzZXF1ZW50IHF1ZXJpZXMgYW5kIG11dGF0aW9ucy5cbiAgICpcbiAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB0aGUgdG9rZW4gY2hhbmdlcyAoaS5lLiBkdWUgdG8gZXhwaXJhdGlvbiBhbmQgcmVmcmVzaCkuXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSAtIEpXVC1lbmNvZGVkIE9wZW5JRCBDb25uZWN0IGlkZW50aXR5IHRva2VuLlxuICAgKi9cbiAgc2V0QXV0aCh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5jbGVhckF1dGgoKTtcbiAgICB0aGlzLmF1dGggPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYWRtaW4gYXV0aCB0b2tlbiB0byBhbGxvdyBjYWxsaW5nIGludGVybmFsIHF1ZXJpZXMsIG11dGF0aW9ucywgYW5kIGFjdGlvbnNcbiAgICogYW5kIGFjdGluZyBhcyBhbiBpZGVudGl0eS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRBZG1pbkF1dGgodG9rZW46IHN0cmluZywgYWN0aW5nQXNJZGVudGl0eT86IFVzZXJJZGVudGl0eUF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLmNsZWFyQXV0aCgpO1xuICAgIGlmIChhY3RpbmdBc0lkZW50aXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEVuY29kZSB0aGUgaWRlbnRpdHkgdG8gYSBiYXNlNjQgc3RyaW5nXG4gICAgICBjb25zdCBieXRlcyA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShKU09OLnN0cmluZ2lmeShhY3RpbmdBc0lkZW50aXR5KSk7XG4gICAgICBjb25zdCBhY3RpbmdBc0lkZW50aXR5RW5jb2RlZCA9IGJ0b2EoU3RyaW5nLmZyb21Db2RlUG9pbnQoLi4uYnl0ZXMpKTtcbiAgICAgIHRoaXMuYWRtaW5BdXRoID0gYCR7dG9rZW59OiR7YWN0aW5nQXNJZGVudGl0eUVuY29kZWR9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZG1pbkF1dGggPSB0b2tlbjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgdGhlIGN1cnJlbnQgYXV0aGVudGljYXRpb24gdG9rZW4gaWYgc2V0LlxuICAgKi9cbiAgY2xlYXJBdXRoKCkge1xuICAgIHRoaXMuYXV0aCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmFkbWluQXV0aCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgdGhlIHJlc3VsdCBsb2cgbGluZXMgc2hvdWxkIGJlIHByaW50ZWQgb24gdGhlIGNvbnNvbGUgb3Igbm90LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHNldERlYnVnKGRlYnVnOiBib29sZWFuKSB7XG4gICAgdGhpcy5kZWJ1ZyA9IGRlYnVnO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gY3VzdG9taXplIHRoZSBmZXRjaCBiZWhhdmlvciBpbiBzb21lIHJ1bnRpbWVzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHNldEZldGNoT3B0aW9ucyhmZXRjaE9wdGlvbnM6IEZldGNoT3B0aW9ucykge1xuICAgIHRoaXMuZmV0Y2hPcHRpb25zID0gZmV0Y2hPcHRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgQVBJIGlzIGV4cGVyaW1lbnRhbDogaXQgbWF5IGNoYW5nZSBvciBkaXNhcHBlYXIuXG4gICAqXG4gICAqIEV4ZWN1dGUgYSBDb252ZXggcXVlcnkgZnVuY3Rpb24gYXQgdGhlIHNhbWUgdGltZXN0YW1wIGFzIGV2ZXJ5IG90aGVyXG4gICAqIGNvbnNpc3RlbnQgcXVlcnkgZXhlY3V0aW9uIHJ1biBieSB0aGlzIEhUVFAgY2xpZW50LlxuICAgKlxuICAgKiBUaGlzIGRvZXNuJ3QgbWFrZSBzZW5zZSBmb3IgbG9uZy1saXZlZCBDb252ZXhIdHRwQ2xpZW50cyBhcyBDb252ZXhcbiAgICogYmFja2VuZHMgY2FuIHJlYWQgYSBsaW1pdGVkIGFtb3VudCBpbnRvIHRoZSBwYXN0OiBiZXlvbmQgMzAgc2Vjb25kc1xuICAgKiBpbiB0aGUgcGFzdCBtYXkgbm90IGJlIGF2YWlsYWJsZS5cbiAgICpcbiAgICogQ3JlYXRlIGEgbmV3IGNsaWVudCB0byB1c2UgYSBjb25zaXN0ZW50IHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgcXVlcnkuIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcXVlcnkncyByZXN1bHQuXG4gICAqXG4gICAqIEBkZXByZWNhdGVkIFRoaXMgQVBJIGlzIGV4cGVyaW1lbnRhbDogaXQgbWF5IGNoYW5nZSBvciBkaXNhcHBlYXIuXG4gICAqL1xuICBhc3luYyBjb25zaXN0ZW50UXVlcnk8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxRdWVyeT5cbiAgKTogUHJvbWlzZTxGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+PiB7XG4gICAgY29uc3QgcXVlcnlBcmdzID0gcGFyc2VBcmdzKGFyZ3NbMF0pO1xuXG4gICAgY29uc3QgdGltZXN0YW1wUHJvbWlzZSA9IHRoaXMuZ2V0VGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucXVlcnlJbm5lcihxdWVyeSwgcXVlcnlBcmdzLCB7IHRpbWVzdGFtcFByb21pc2UgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFRpbWVzdGFtcCgpIHtcbiAgICBpZiAodGhpcy5lbmNvZGVkVHNQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmNvZGVkVHNQcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gKHRoaXMuZW5jb2RlZFRzUHJvbWlzZSA9IHRoaXMuZ2V0VGltZXN0YW1wSW5uZXIoKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldFRpbWVzdGFtcElubmVyKCkge1xuICAgIGNvbnN0IGxvY2FsRmV0Y2ggPSBzcGVjaWZpZWRGZXRjaCB8fCBmZXRjaDtcblxuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQ29udmV4LUNsaWVudFwiOiBgbnBtLSR7dmVyc2lvbn1gLFxuICAgIH07XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2NhbEZldGNoKGAke3RoaXMuYWRkcmVzc30vYXBpL3F1ZXJ5X3RzYCwge1xuICAgICAgLi4udGhpcy5mZXRjaE9wdGlvbnMsXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgeyB0cyB9ID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkgYXMgeyB0czogc3RyaW5nIH07XG4gICAgcmV0dXJuIHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBDb252ZXggcXVlcnkgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgcXVlcnkuIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcXVlcnkncyByZXN1bHQuXG4gICAqL1xuICBhc3luYyBxdWVyeTxRdWVyeSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj4+KFxuICAgIHF1ZXJ5OiBRdWVyeSxcbiAgICAuLi5hcmdzOiBPcHRpb25hbFJlc3RBcmdzPFF1ZXJ5PlxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxRdWVyeT4+IHtcbiAgICBjb25zdCBxdWVyeUFyZ3MgPSBwYXJzZUFyZ3MoYXJnc1swXSk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucXVlcnlJbm5lcihxdWVyeSwgcXVlcnlBcmdzLCB7fSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHF1ZXJ5SW5uZXI8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgcXVlcnlBcmdzOiBGdW5jdGlvbkFyZ3M8UXVlcnk+LFxuICAgIG9wdGlvbnM6IHsgdGltZXN0YW1wUHJvbWlzZT86IFByb21pc2U8c3RyaW5nPiB9LFxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxRdWVyeT4+IHtcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KTtcbiAgICBjb25zdCBhcmdzID0gW2NvbnZleFRvSnNvbihxdWVyeUFyZ3MpXTtcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnZleC1DbGllbnRcIjogYG5wbS0ke3ZlcnNpb259YCxcbiAgICB9O1xuICAgIGlmICh0aGlzLmFkbWluQXV0aCkge1xuICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQ29udmV4ICR7dGhpcy5hZG1pbkF1dGh9YDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXV0aCkge1xuICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQmVhcmVyICR7dGhpcy5hdXRofWA7XG4gICAgfVxuICAgIGNvbnN0IGxvY2FsRmV0Y2ggPSBzcGVjaWZpZWRGZXRjaCB8fCBmZXRjaDtcblxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG9wdGlvbnMudGltZXN0YW1wUHJvbWlzZVxuICAgICAgPyBhd2FpdCBvcHRpb25zLnRpbWVzdGFtcFByb21pc2VcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHBhdGg6IG5hbWUsXG4gICAgICBmb3JtYXQ6IFwiY29udmV4X2VuY29kZWRfanNvblwiLFxuICAgICAgYXJncyxcbiAgICAgIC4uLih0aW1lc3RhbXAgPyB7IHRzOiB0aW1lc3RhbXAgfSA6IHt9KSxcbiAgICB9KTtcbiAgICBjb25zdCBlbmRwb2ludCA9IHRpbWVzdGFtcFxuICAgICAgPyBgJHt0aGlzLmFkZHJlc3N9L2FwaS9xdWVyeV9hdF90c2BcbiAgICAgIDogYCR7dGhpcy5hZGRyZXNzfS9hcGkvcXVlcnlgO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2NhbEZldGNoKGVuZHBvaW50LCB7XG4gICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgIGJvZHksXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rICYmIHJlc3BvbnNlLnN0YXR1cyAhPT0gU1RBVFVTX0NPREVfVURGX0ZBSUxFRCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BKU09OID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXNwSlNPTi5sb2dMaW5lcyA/PyBbXSkge1xuICAgICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIFwicXVlcnlcIiwgbmFtZSwgbGluZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHN3aXRjaCAocmVzcEpTT04uc3RhdHVzKSB7XG4gICAgICBjYXNlIFwic3VjY2Vzc1wiOlxuICAgICAgICByZXR1cm4ganNvblRvQ29udmV4KHJlc3BKU09OLnZhbHVlKTtcbiAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICBpZiAocmVzcEpTT04uZXJyb3JEYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB0aHJvdyBmb3J3YXJkRXJyb3JEYXRhKFxuICAgICAgICAgICAgcmVzcEpTT04uZXJyb3JEYXRhLFxuICAgICAgICAgICAgbmV3IENvbnZleEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSksXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcEpTT04uZXJyb3JNZXNzYWdlKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXNwb25zZTogJHtKU09OLnN0cmluZ2lmeShyZXNwSlNPTil9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtdXRhdGlvbklubmVyPE11dGF0aW9uIGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJtdXRhdGlvblwiPj4oXG4gICAgbXV0YXRpb246IE11dGF0aW9uLFxuICAgIG11dGF0aW9uQXJnczogRnVuY3Rpb25BcmdzPE11dGF0aW9uPixcbiAgKTogUHJvbWlzZTxGdW5jdGlvblJldHVyblR5cGU8TXV0YXRpb24+PiB7XG4gICAgY29uc3QgbmFtZSA9IGdldEZ1bmN0aW9uTmFtZShtdXRhdGlvbik7XG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHBhdGg6IG5hbWUsXG4gICAgICBmb3JtYXQ6IFwiY29udmV4X2VuY29kZWRfanNvblwiLFxuICAgICAgYXJnczogW2NvbnZleFRvSnNvbihtdXRhdGlvbkFyZ3MpXSxcbiAgICB9KTtcbiAgICBjb25zdCBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICBcIkNvbnZleC1DbGllbnRcIjogYG5wbS0ke3ZlcnNpb259YCxcbiAgICB9O1xuICAgIGlmICh0aGlzLmFkbWluQXV0aCkge1xuICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQ29udmV4ICR7dGhpcy5hZG1pbkF1dGh9YDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYXV0aCkge1xuICAgICAgaGVhZGVyc1tcIkF1dGhvcml6YXRpb25cIl0gPSBgQmVhcmVyICR7dGhpcy5hdXRofWA7XG4gICAgfVxuICAgIGNvbnN0IGxvY2FsRmV0Y2ggPSBzcGVjaWZpZWRGZXRjaCB8fCBmZXRjaDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGxvY2FsRmV0Y2goYCR7dGhpcy5hZGRyZXNzfS9hcGkvbXV0YXRpb25gLCB7XG4gICAgICAuLi50aGlzLmZldGNoT3B0aW9ucyxcbiAgICAgIGJvZHksXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rICYmIHJlc3BvbnNlLnN0YXR1cyAhPT0gU1RBVFVTX0NPREVfVURGX0ZBSUxFRCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlc3BvbnNlLnRleHQoKSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3BKU09OID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVzcEpTT04ubG9nTGluZXMgPz8gW10pIHtcbiAgICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiaW5mb1wiLCBcIm11dGF0aW9uXCIsIG5hbWUsIGxpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKHJlc3BKU09OLnN0YXR1cykge1xuICAgICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXNwSlNPTi52YWx1ZSk7XG4gICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgaWYgKHJlc3BKU09OLmVycm9yRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgZm9yd2FyZEVycm9yRGF0YShcbiAgICAgICAgICAgIHJlc3BKU09OLmVycm9yRGF0YSxcbiAgICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihyZXNwSlNPTi5lcnJvck1lc3NhZ2UpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkocmVzcEpTT04pfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc011dGF0aW9uUXVldWUoKSB7XG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gdHJ1ZTtcbiAgICB3aGlsZSAodGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHsgbXV0YXRpb24sIGFyZ3MsIHJlc29sdmUsIHJlamVjdCB9ID0gdGhpcy5tdXRhdGlvblF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tdXRhdGlvbklubmVyKG11dGF0aW9uLCBhcmdzKTtcbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBlbnF1ZXVlTXV0YXRpb248TXV0YXRpb24gZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCI+PihcbiAgICBtdXRhdGlvbjogTXV0YXRpb24sXG4gICAgYXJnczogRnVuY3Rpb25BcmdzPE11dGF0aW9uPixcbiAgKTogUHJvbWlzZTxGdW5jdGlvblJldHVyblR5cGU8TXV0YXRpb24+PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5wdXNoKHsgbXV0YXRpb24sIGFyZ3MsIHJlc29sdmUsIHJlamVjdCB9KTtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzTXV0YXRpb25RdWV1ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYSBDb252ZXggbXV0YXRpb24gZnVuY3Rpb24uIE11dGF0aW9ucyBhcmUgcXVldWVkIGJ5IGRlZmF1bHQuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIG11dGF0aW9uLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgbXV0YXRpb24uIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9uYWwgb2JqZWN0IGNvbnRhaW5pbmdcbiAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBtdXRhdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIGFzeW5jIG11dGF0aW9uPE11dGF0aW9uIGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJtdXRhdGlvblwiPj4oXG4gICAgbXV0YXRpb246IE11dGF0aW9uLFxuICAgIC4uLmFyZ3M6IEFyZ3NBbmRPcHRpb25zPE11dGF0aW9uLCBIdHRwTXV0YXRpb25PcHRpb25zPlxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxNdXRhdGlvbj4+IHtcbiAgICBjb25zdCBbZm5BcmdzLCBvcHRpb25zXSA9IGFyZ3M7XG4gICAgY29uc3QgbXV0YXRpb25BcmdzID0gcGFyc2VBcmdzKGZuQXJncyk7XG4gICAgY29uc3QgcXVldWVkID0gIW9wdGlvbnM/LnNraXBRdWV1ZTtcblxuICAgIGlmIChxdWV1ZWQpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmVucXVldWVNdXRhdGlvbihtdXRhdGlvbiwgbXV0YXRpb25BcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubXV0YXRpb25Jbm5lcihtdXRhdGlvbiwgbXV0YXRpb25BcmdzKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhIENvbnZleCBhY3Rpb24gZnVuY3Rpb24uIEFjdGlvbnMgYXJlIG5vdCBxdWV1ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGFjdGlvbi5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIGFjdGlvbi4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgKiB0aGUgYXJndW1lbnRzIHdpbGwgYmUgYHt9YC5cbiAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBhY3Rpb24ncyByZXN1bHQuXG4gICAqL1xuICBhc3luYyBhY3Rpb248QWN0aW9uIGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJhY3Rpb25cIj4+KFxuICAgIGFjdGlvbjogQWN0aW9uLFxuICAgIC4uLmFyZ3M6IE9wdGlvbmFsUmVzdEFyZ3M8QWN0aW9uPlxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxBY3Rpb24+PiB7XG4gICAgY29uc3QgYWN0aW9uQXJncyA9IHBhcnNlQXJncyhhcmdzWzBdKTtcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKGFjdGlvbik7XG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHBhdGg6IG5hbWUsXG4gICAgICBmb3JtYXQ6IFwiY29udmV4X2VuY29kZWRfanNvblwiLFxuICAgICAgYXJnczogW2NvbnZleFRvSnNvbihhY3Rpb25BcmdzKV0sXG4gICAgfSk7XG4gICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgXCJDb252ZXgtQ2xpZW50XCI6IGBucG0tJHt2ZXJzaW9ufWAsXG4gICAgfTtcbiAgICBpZiAodGhpcy5hZG1pbkF1dGgpIHtcbiAgICAgIGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYENvbnZleCAke3RoaXMuYWRtaW5BdXRofWA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dGgpIHtcbiAgICAgIGhlYWRlcnNbXCJBdXRob3JpemF0aW9uXCJdID0gYEJlYXJlciAke3RoaXMuYXV0aH1gO1xuICAgIH1cbiAgICBjb25zdCBsb2NhbEZldGNoID0gc3BlY2lmaWVkRmV0Y2ggfHwgZmV0Y2g7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2NhbEZldGNoKGAke3RoaXMuYWRkcmVzc30vYXBpL2FjdGlvbmAsIHtcbiAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgYm9keSxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2sgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSBTVEFUVVNfQ09ERV9VREZfRkFJTEVEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcEpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXNwSlNPTi5sb2dMaW5lcyA/PyBbXSkge1xuICAgICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIFwiYWN0aW9uXCIsIG5hbWUsIGxpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKHJlc3BKU09OLnN0YXR1cykge1xuICAgICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXNwSlNPTi52YWx1ZSk7XG4gICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgaWYgKHJlc3BKU09OLmVycm9yRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgZm9yd2FyZEVycm9yRGF0YShcbiAgICAgICAgICAgIHJlc3BKU09OLmVycm9yRGF0YSxcbiAgICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihyZXNwSlNPTi5lcnJvck1lc3NhZ2UpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkocmVzcEpTT04pfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgQ29udmV4IGZ1bmN0aW9uIG9mIGFuIHVua25vd24gdHlwZS4gVGhlc2UgZnVuY3Rpb24gY2FsbHMgYXJlIG5vdCBxdWV1ZWQuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgZnVuY3Rpb24uIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgZnVuY3Rpb24ncyByZXN1bHQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYXN5bmMgZnVuY3Rpb248XG4gICAgQW55RnVuY3Rpb24gZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCIgfCBcIm11dGF0aW9uXCIgfCBcImFjdGlvblwiPixcbiAgPihcbiAgICBhbnlGdW5jdGlvbjogQW55RnVuY3Rpb24gfCBzdHJpbmcsXG4gICAgY29tcG9uZW50UGF0aD86IHN0cmluZyxcbiAgICAuLi5hcmdzOiBPcHRpb25hbFJlc3RBcmdzPEFueUZ1bmN0aW9uPlxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxBbnlGdW5jdGlvbj4+IHtcbiAgICBjb25zdCBmdW5jdGlvbkFyZ3MgPSBwYXJzZUFyZ3MoYXJnc1swXSk7XG4gICAgY29uc3QgbmFtZSA9XG4gICAgICB0eXBlb2YgYW55RnVuY3Rpb24gPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBhbnlGdW5jdGlvblxuICAgICAgICA6IGdldEZ1bmN0aW9uTmFtZShhbnlGdW5jdGlvbik7XG4gICAgY29uc3QgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGNvbXBvbmVudFBhdGg6IGNvbXBvbmVudFBhdGgsXG4gICAgICBwYXRoOiBuYW1lLFxuICAgICAgZm9ybWF0OiBcImNvbnZleF9lbmNvZGVkX2pzb25cIixcbiAgICAgIGFyZ3M6IGNvbnZleFRvSnNvbihmdW5jdGlvbkFyZ3MpLFxuICAgIH0pO1xuICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQ29udmV4LUNsaWVudFwiOiBgbnBtLSR7dmVyc2lvbn1gLFxuICAgIH07XG4gICAgaWYgKHRoaXMuYWRtaW5BdXRoKSB7XG4gICAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBDb252ZXggJHt0aGlzLmFkbWluQXV0aH1gO1xuICAgIH0gZWxzZSBpZiAodGhpcy5hdXRoKSB7XG4gICAgICBoZWFkZXJzW1wiQXV0aG9yaXphdGlvblwiXSA9IGBCZWFyZXIgJHt0aGlzLmF1dGh9YDtcbiAgICB9XG4gICAgY29uc3QgbG9jYWxGZXRjaCA9IHNwZWNpZmllZEZldGNoIHx8IGZldGNoO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgbG9jYWxGZXRjaChgJHt0aGlzLmFkZHJlc3N9L2FwaS9mdW5jdGlvbmAsIHtcbiAgICAgIC4uLnRoaXMuZmV0Y2hPcHRpb25zLFxuICAgICAgYm9keSxcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgIH0pO1xuICAgIGlmICghcmVzcG9uc2Uub2sgJiYgcmVzcG9uc2Uuc3RhdHVzICE9PSBTVEFUVVNfQ09ERV9VREZfRkFJTEVEKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYXdhaXQgcmVzcG9uc2UudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgcmVzcEpTT04gPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXNwSlNPTi5sb2dMaW5lcyA/PyBbXSkge1xuICAgICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIFwiYW55XCIsIG5hbWUsIGxpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKHJlc3BKU09OLnN0YXR1cykge1xuICAgICAgY2FzZSBcInN1Y2Nlc3NcIjpcbiAgICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXNwSlNPTi52YWx1ZSk7XG4gICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgaWYgKHJlc3BKU09OLmVycm9yRGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhyb3cgZm9yd2FyZEVycm9yRGF0YShcbiAgICAgICAgICAgIHJlc3BKU09OLmVycm9yRGF0YSxcbiAgICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihyZXNwSlNPTi5lcnJvck1lc3NhZ2UpLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BKU09OLmVycm9yTWVzc2FnZSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVzcG9uc2U6ICR7SlNPTi5zdHJpbmdpZnkocmVzcEpTT04pfWApO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmb3J3YXJkRXJyb3JEYXRhKGVycm9yRGF0YTogSlNPTlZhbHVlLCBlcnJvcjogQ29udmV4RXJyb3I8c3RyaW5nPikge1xuICAoZXJyb3IgYXMgQ29udmV4RXJyb3I8YW55PikuZGF0YSA9IGpzb25Ub0NvbnZleChlcnJvckRhdGEpO1xuICByZXR1cm4gZXJyb3I7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbnR5cGUgRmV0Y2hPcHRpb25zID0geyBjYWNoZTogXCJmb3JjZS1jYWNoZVwiIHwgXCJuby1zdG9yZVwiIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/http_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/index-node.js":
/*!************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/index-node.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseConvexClient: () => (/* reexport safe */ _sync_client_js__WEBPACK_IMPORTED_MODULE_0__.BaseConvexClient),\n/* harmony export */   ConvexClient: () => (/* reexport safe */ _simple_client_node_js__WEBPACK_IMPORTED_MODULE_1__.ConvexClient),\n/* harmony export */   ConvexHttpClient: () => (/* reexport safe */ _http_client_js__WEBPACK_IMPORTED_MODULE_2__.ConvexHttpClient)\n/* harmony export */ });\n/* harmony import */ var _sync_client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sync/client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js\");\n/* harmony import */ var _simple_client_node_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple_client-node.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/simple_client-node.js\");\n/* harmony import */ var _http_client_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./http_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/http_client.js\");\n\n\n\n //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvaW5kZXgtbm9kZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBa0JpQztBQVVKO0FBUUkiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvYnJvd3Nlci9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRvb2xzIGZvciBhY2Nlc3NpbmcgQ29udmV4IGluIHRoZSBicm93c2VyLlxuICpcbiAqICoqSWYgeW91IGFyZSB1c2luZyBSZWFjdCwgdXNlIHRoZSB7QGxpbmsgcmVhY3R9IG1vZHVsZSBpbnN0ZWFkLioqXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiBDcmVhdGUgYSB7QGxpbmsgQ29udmV4SHR0cENsaWVudH0gdG8gY29ubmVjdCB0byB0aGUgQ29udmV4IENsb3VkLlxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IENvbnZleEh0dHBDbGllbnQgfSBmcm9tIFwiY29udmV4L2Jyb3dzZXJcIjtcbiAqIC8vIHR5cGljYWxseSBsb2FkZWQgZnJvbSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZVxuICogY29uc3QgYWRkcmVzcyA9IFwiaHR0cHM6Ly9zbWFsbC1tb3VzZS0xMjMuY29udmV4LmNsb3VkXCI7XG4gKiBjb25zdCBjb252ZXggPSBuZXcgQ29udmV4SHR0cENsaWVudChhZGRyZXNzKTtcbiAqIGBgYFxuICpcbiAqIEBtb2R1bGVcbiAqL1xuZXhwb3J0IHsgQmFzZUNvbnZleENsaWVudCB9IGZyb20gXCIuL3N5bmMvY2xpZW50LmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIEJhc2VDb252ZXhDbGllbnRPcHRpb25zLFxuICBNdXRhdGlvbk9wdGlvbnMsXG4gIFN1YnNjcmliZU9wdGlvbnMsXG4gIENvbm5lY3Rpb25TdGF0ZSxcbiAgQXV0aFRva2VuRmV0Y2hlcixcbn0gZnJvbSBcIi4vc3luYy9jbGllbnQuanNcIjtcbmV4cG9ydCB0eXBlIHsgUGFnaW5hdGlvblN0YXR1cyB9IGZyb20gXCIuL3N5bmMvcGFnaW5hdGlvbi5qc1wiO1xuZXhwb3J0IHR5cGUgeyBDb252ZXhDbGllbnRPcHRpb25zIH0gZnJvbSBcIi4vc2ltcGxlX2NsaWVudC5qc1wiO1xuZXhwb3J0IHsgQ29udmV4Q2xpZW50IH0gZnJvbSBcIi4vc2ltcGxlX2NsaWVudC5qc1wiO1xuZXhwb3J0IHR5cGUge1xuICBPcHRpbWlzdGljVXBkYXRlLFxuICBPcHRpbWlzdGljTG9jYWxTdG9yZSxcbn0gZnJvbSBcIi4vc3luYy9vcHRpbWlzdGljX3VwZGF0ZXMuanNcIjtcbmV4cG9ydCB0eXBlIHsgUXVlcnlUb2tlbiB9IGZyb20gXCIuL3N5bmMvdWRmX3BhdGhfdXRpbHMuanNcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIHsgUGFnaW5hdGVkUXVlcnlUb2tlbiB9IGZyb20gXCIuL3N5bmMvdWRmX3BhdGhfdXRpbHMuanNcIjtcbmV4cG9ydCB7IENvbnZleEh0dHBDbGllbnQgfSBmcm9tIFwiLi9odHRwX2NsaWVudC5qc1wiO1xuZXhwb3J0IHR5cGUgeyBIdHRwTXV0YXRpb25PcHRpb25zIH0gZnJvbSBcIi4vaHR0cF9jbGllbnQuanNcIjtcbmV4cG9ydCB0eXBlIHsgUXVlcnlKb3VybmFsIH0gZnJvbSBcIi4vc3luYy9wcm90b2NvbC5qc1wiO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHR5cGUgeyBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzIH0gZnJvbSBcIi4vc3luYy9wcm90b2NvbC5qc1wiO1xuZXhwb3J0IHR5cGUgeyBGdW5jdGlvblJlc3VsdCB9IGZyb20gXCIuL3N5bmMvZnVuY3Rpb25fcmVzdWx0LmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/index-node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/index.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseConvexClient: () => (/* reexport safe */ _sync_client_js__WEBPACK_IMPORTED_MODULE_0__.BaseConvexClient),\n/* harmony export */   ConvexClient: () => (/* reexport safe */ _simple_client_js__WEBPACK_IMPORTED_MODULE_1__.ConvexClient),\n/* harmony export */   ConvexHttpClient: () => (/* reexport safe */ _http_client_js__WEBPACK_IMPORTED_MODULE_2__.ConvexHttpClient)\n/* harmony export */ });\n/* harmony import */ var _sync_client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sync/client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js\");\n/* harmony import */ var _simple_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./simple_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js\");\n/* harmony import */ var _http_client_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./http_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/http_client.js\");\n\n\n\n //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQWtCaUM7QUFVSjtBQVFJIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL2Jyb3dzZXIvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUb29scyBmb3IgYWNjZXNzaW5nIENvbnZleCBpbiB0aGUgYnJvd3Nlci5cbiAqXG4gKiAqKklmIHlvdSBhcmUgdXNpbmcgUmVhY3QsIHVzZSB0aGUge0BsaW5rIHJlYWN0fSBtb2R1bGUgaW5zdGVhZC4qKlxuICpcbiAqICMjIFVzYWdlXG4gKlxuICogQ3JlYXRlIGEge0BsaW5rIENvbnZleEh0dHBDbGllbnR9IHRvIGNvbm5lY3QgdG8gdGhlIENvbnZleCBDbG91ZC5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBDb252ZXhIdHRwQ2xpZW50IH0gZnJvbSBcImNvbnZleC9icm93c2VyXCI7XG4gKiAvLyB0eXBpY2FsbHkgbG9hZGVkIGZyb20gYW4gZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqIGNvbnN0IGFkZHJlc3MgPSBcImh0dHBzOi8vc21hbGwtbW91c2UtMTIzLmNvbnZleC5jbG91ZFwiO1xuICogY29uc3QgY29udmV4ID0gbmV3IENvbnZleEh0dHBDbGllbnQoYWRkcmVzcyk7XG4gKiBgYGBcbiAqXG4gKiBAbW9kdWxlXG4gKi9cbmV4cG9ydCB7IEJhc2VDb252ZXhDbGllbnQgfSBmcm9tIFwiLi9zeW5jL2NsaWVudC5qc1wiO1xuZXhwb3J0IHR5cGUge1xuICBCYXNlQ29udmV4Q2xpZW50T3B0aW9ucyxcbiAgTXV0YXRpb25PcHRpb25zLFxuICBTdWJzY3JpYmVPcHRpb25zLFxuICBDb25uZWN0aW9uU3RhdGUsXG4gIEF1dGhUb2tlbkZldGNoZXIsXG59IGZyb20gXCIuL3N5bmMvY2xpZW50LmpzXCI7XG5leHBvcnQgdHlwZSB7IFBhZ2luYXRpb25TdGF0dXMgfSBmcm9tIFwiLi9zeW5jL3BhZ2luYXRpb24uanNcIjtcbmV4cG9ydCB0eXBlIHsgQ29udmV4Q2xpZW50T3B0aW9ucyB9IGZyb20gXCIuL3NpbXBsZV9jbGllbnQuanNcIjtcbmV4cG9ydCB7IENvbnZleENsaWVudCB9IGZyb20gXCIuL3NpbXBsZV9jbGllbnQuanNcIjtcbmV4cG9ydCB0eXBlIHtcbiAgT3B0aW1pc3RpY1VwZGF0ZSxcbiAgT3B0aW1pc3RpY0xvY2FsU3RvcmUsXG59IGZyb20gXCIuL3N5bmMvb3B0aW1pc3RpY191cGRhdGVzLmpzXCI7XG5leHBvcnQgdHlwZSB7IFF1ZXJ5VG9rZW4gfSBmcm9tIFwiLi9zeW5jL3VkZl9wYXRoX3V0aWxzLmpzXCI7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdHlwZSB7IFBhZ2luYXRlZFF1ZXJ5VG9rZW4gfSBmcm9tIFwiLi9zeW5jL3VkZl9wYXRoX3V0aWxzLmpzXCI7XG5leHBvcnQgeyBDb252ZXhIdHRwQ2xpZW50IH0gZnJvbSBcIi4vaHR0cF9jbGllbnQuanNcIjtcbmV4cG9ydCB0eXBlIHsgSHR0cE11dGF0aW9uT3B0aW9ucyB9IGZyb20gXCIuL2h0dHBfY2xpZW50LmpzXCI7XG5leHBvcnQgdHlwZSB7IFF1ZXJ5Sm91cm5hbCB9IGZyb20gXCIuL3N5bmMvcHJvdG9jb2wuanNcIjtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB0eXBlIHsgVXNlcklkZW50aXR5QXR0cmlidXRlcyB9IGZyb20gXCIuL3N5bmMvcHJvdG9jb2wuanNcIjtcbmV4cG9ydCB0eXBlIHsgRnVuY3Rpb25SZXN1bHQgfSBmcm9tIFwiLi9zeW5jL2Z1bmN0aW9uX3Jlc3VsdC5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/logging.js":
/*!*********************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/logging.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DefaultLogger: () => (/* binding */ DefaultLogger),\n/* harmony export */   createHybridErrorStacktrace: () => (/* binding */ createHybridErrorStacktrace),\n/* harmony export */   forwardData: () => (/* binding */ forwardData),\n/* harmony export */   instantiateDefaultLogger: () => (/* binding */ instantiateDefaultLogger),\n/* harmony export */   instantiateNoopLogger: () => (/* binding */ instantiateNoopLogger),\n/* harmony export */   logFatalError: () => (/* binding */ logFatalError),\n/* harmony export */   logForFunction: () => (/* binding */ logForFunction)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nconst INFO_COLOR = \"color:rgb(0, 145, 255)\";\nfunction prefix_for_source(source) {\n    switch(source){\n        case \"query\":\n            return \"Q\";\n        case \"mutation\":\n            return \"M\";\n        case \"action\":\n            return \"A\";\n        case \"any\":\n            return \"?\";\n    }\n}\nclass DefaultLogger {\n    constructor(options){\n        __publicField(this, \"_onLogLineFuncs\");\n        __publicField(this, \"_verbose\");\n        this._onLogLineFuncs = {};\n        this._verbose = options.verbose;\n    }\n    addLogLineListener(func) {\n        let id = Math.random().toString(36).substring(2, 15);\n        for(let i = 0; i < 10; i++){\n            if (this._onLogLineFuncs[id] === void 0) {\n                break;\n            }\n            id = Math.random().toString(36).substring(2, 15);\n        }\n        this._onLogLineFuncs[id] = func;\n        return ()=>{\n            delete this._onLogLineFuncs[id];\n        };\n    }\n    logVerbose(...args) {\n        if (this._verbose) {\n            for (const func of Object.values(this._onLogLineFuncs)){\n                func(\"debug\", `${/* @__PURE__ */ new Date().toISOString()}`, ...args);\n            }\n        }\n    }\n    log(...args) {\n        for (const func of Object.values(this._onLogLineFuncs)){\n            func(\"info\", ...args);\n        }\n    }\n    warn(...args) {\n        for (const func of Object.values(this._onLogLineFuncs)){\n            func(\"warn\", ...args);\n        }\n    }\n    error(...args) {\n        for (const func of Object.values(this._onLogLineFuncs)){\n            func(\"error\", ...args);\n        }\n    }\n}\nfunction instantiateDefaultLogger(options) {\n    const logger = new DefaultLogger(options);\n    logger.addLogLineListener((level, ...args)=>{\n        switch(level){\n            case \"debug\":\n                console.debug(...args);\n                break;\n            case \"info\":\n                console.log(...args);\n                break;\n            case \"warn\":\n                console.warn(...args);\n                break;\n            case \"error\":\n                console.error(...args);\n                break;\n            default:\n                {\n                    level;\n                    console.log(...args);\n                }\n        }\n    });\n    return logger;\n}\nfunction instantiateNoopLogger(options) {\n    return new DefaultLogger(options);\n}\nfunction logForFunction(logger, type, source, udfPath, message) {\n    const prefix = prefix_for_source(source);\n    if (typeof message === \"object\") {\n        message = `ConvexError ${JSON.stringify(message.errorData, null, 2)}`;\n    }\n    if (type === \"info\") {\n        const match = message.match(/^\\[.*?\\] /);\n        if (match === null) {\n            logger.error(`[CONVEX ${prefix}(${udfPath})] Could not parse console.log`);\n            return;\n        }\n        const level = message.slice(1, match[0].length - 2);\n        const args = message.slice(match[0].length);\n        logger.log(`%c[CONVEX ${prefix}(${udfPath})] [${level}]`, INFO_COLOR, args);\n    } else {\n        logger.error(`[CONVEX ${prefix}(${udfPath})] ${message}`);\n    }\n}\nfunction logFatalError(logger, message) {\n    const errorMessage = `[CONVEX FATAL ERROR] ${message}`;\n    logger.error(errorMessage);\n    return new Error(errorMessage);\n}\nfunction createHybridErrorStacktrace(source, udfPath, result) {\n    const prefix = prefix_for_source(source);\n    return `[CONVEX ${prefix}(${udfPath})] ${result.errorMessage}\n  Called by client`;\n}\nfunction forwardData(result, error) {\n    error.data = result.errorData;\n    return error;\n} //# sourceMappingURL=logging.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvbG9nZ2luZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsTUFBTSxhQUFhO0FBSW5CLFNBQVMsa0JBQWtCLFFBQWlCO0lBQzFDLE9BQVEsUUFBUTtRQUNkLEtBQUs7WUFDSCxPQUFPO1FBQ1QsS0FBSztZQUNILE9BQU87UUFDVCxLQUFLO1lBQ0gsT0FBTztRQUNULEtBQUs7WUFDSCxPQUFPO0lBQ1g7QUFDRjtBQWdCTyxNQUFNLGNBQWdDO0lBTzNDLFlBQVksUUFBK0I7UUFOM0Msb0JBQVE7UUFJUixvQkFBUTtRQUdOLEtBQUssa0JBQWtCLENBQUM7UUFDeEIsS0FBSyxXQUFXLFFBQVE7SUFDMUI7SUFFQSxtQkFDRSxNQUNZO1FBQ1osSUFBSSxLQUFLLEtBQUssT0FBTyxFQUFFLFNBQVMsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO1FBQ25ELFFBQVMsSUFBSSxHQUFHLElBQUksSUFBSSxJQUFLO1lBQzNCLElBQUksS0FBSyxnQkFBZ0IsRUFBRSxNQUFNLFFBQVc7Z0JBQzFDO1lBQ0Y7WUFDQSxLQUFLLEtBQUssT0FBTyxFQUFFLFNBQVMsRUFBRSxFQUFFLFVBQVUsR0FBRyxFQUFFO1FBQ2pEO1FBQ0EsS0FBSyxnQkFBZ0IsRUFBRSxJQUFJO1FBQzNCLE9BQU87WUFDTCxPQUFPLEtBQUssZ0JBQWdCLEVBQUU7UUFDaEM7SUFDRjtJQUVBLGNBQWMsTUFBYTtRQUN6QixJQUFJLEtBQUssVUFBVTtZQUNqQixXQUFXLFFBQVEsT0FBTyxPQUFPLEtBQUssZUFBZSxFQUFHO2dCQUN0RCxLQUFLLFNBQVMsZ0JBQUcsT0FBSSxLQUFLLEVBQUUsWUFBWSxDQUFDLElBQUksR0FBRyxJQUFJO1lBQ3REO1FBQ0Y7SUFDRjtJQUVBLE9BQU8sTUFBYTtRQUNsQixXQUFXLFFBQVEsT0FBTyxPQUFPLEtBQUssZUFBZSxFQUFHO1lBQ3RELEtBQUssUUFBUSxHQUFHLElBQUk7UUFDdEI7SUFDRjtJQUVBLFFBQVEsTUFBYTtRQUNuQixXQUFXLFFBQVEsT0FBTyxPQUFPLEtBQUssZUFBZSxFQUFHO1lBQ3RELEtBQUssUUFBUSxHQUFHLElBQUk7UUFDdEI7SUFDRjtJQUVBLFNBQVMsTUFBYTtRQUNwQixXQUFXLFFBQVEsT0FBTyxPQUFPLEtBQUssZUFBZSxFQUFHO1lBQ3RELEtBQUssU0FBUyxHQUFHLElBQUk7UUFDdkI7SUFDRjtBQUNGO0FBRU8sU0FBUyx5QkFBeUIsU0FFOUI7SUFDVCxNQUFNLFNBQVMsSUFBSSxjQUFjLE9BQU87SUFDeEMsT0FBTyxtQkFBbUIsQ0FBQyxVQUFVO1FBQ25DLE9BQVEsT0FBTztZQUNiLEtBQUs7Z0JBQ0gsUUFBUSxNQUFNLEdBQUcsSUFBSTtnQkFDckI7WUFDRixLQUFLO2dCQUNILFFBQVEsSUFBSSxHQUFHLElBQUk7Z0JBQ25CO1lBQ0YsS0FBSztnQkFDSCxRQUFRLEtBQUssR0FBRyxJQUFJO2dCQUNwQjtZQUNGLEtBQUs7Z0JBQ0gsUUFBUSxNQUFNLEdBQUcsSUFBSTtnQkFDckI7WUFDRjtnQkFBUztvQkFDUDtvQkFDQSxRQUFRLElBQUksR0FBRyxJQUFJO2dCQUNyQjtRQUNGO0lBQ0YsQ0FBQztJQUNELE9BQU87QUFDVDtBQUVPLFNBQVMsc0JBQXNCLFNBQXVDO0lBQzNFLE9BQU8sSUFBSSxjQUFjLE9BQU87QUFDbEM7QUFFTyxTQUFTLGVBQ2QsUUFDQSxNQUNBLFFBQ0EsU0FDQSxTQUNBO0lBQ0EsTUFBTSxTQUFTLGtCQUFrQixNQUFNO0lBRXZDLElBQUksT0FBTyxZQUFZLFVBQVU7UUFDL0IsVUFBVSxlQUFlLEtBQUssVUFBVSxRQUFRLFdBQVcsTUFBTSxDQUFDLENBQUM7SUFDckU7SUFDQSxJQUFJLFNBQVMsUUFBUTtRQUNuQixNQUFNLFFBQVEsUUFBUSxNQUFNLFdBQVc7UUFDdkMsSUFBSSxVQUFVLE1BQU07WUFDbEIsT0FBTyxNQUNMLFdBQVcsTUFBTSxJQUFJLE9BQU87WUFFOUI7UUFDRjtRQUNBLE1BQU0sUUFBUSxRQUFRLE1BQU0sR0FBRyxNQUFNLENBQUMsRUFBRSxTQUFTLENBQUM7UUFDbEQsTUFBTSxPQUFPLFFBQVEsTUFBTSxNQUFNLENBQUMsRUFBRSxNQUFNO1FBRTFDLE9BQU8sSUFBSSxhQUFhLE1BQU0sSUFBSSxPQUFPLE9BQU8sS0FBSyxLQUFLLFlBQVksSUFBSTtJQUM1RSxPQUFPO1FBQ0wsT0FBTyxNQUFNLFdBQVcsTUFBTSxJQUFJLE9BQU8sTUFBTSxPQUFPLEVBQUU7SUFDMUQ7QUFDRjtBQUVPLFNBQVMsY0FBYyxRQUFnQixTQUF3QjtJQUNwRSxNQUFNLGVBQWUsd0JBQXdCLE9BQU87SUFDcEQsT0FBTyxNQUFNLFlBQVk7SUFDekIsT0FBTyxJQUFJLE1BQU0sWUFBWTtBQUMvQjtBQUVPLFNBQVMsNEJBQ2QsUUFDQSxTQUNBLFFBQ1E7SUFDUixNQUFNLFNBQVMsa0JBQWtCLE1BQU07SUFDdkMsT0FBTyxXQUFXLE1BQU0sSUFBSSxPQUFPLE1BQU0sT0FBTyxZQUFZO2tCQUFBO0FBQzlEO0FBRU8sU0FBUyxZQUNkLFFBQ0EsT0FDQTtJQUNDLE1BQTJCLE9BQU8sT0FBTztJQUMxQyxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvYnJvd3Nlci9sb2dnaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUgKi8gLy8gVGhpcyBpcyB0aGUgb25lIGZpbGUgd2hlcmUgd2UgY2FuIGBjb25zb2xlLmxvZ2AgZm9yIHRoZSBkZWZhdWx0IGxvZ2dlciBpbXBsZW1lbnRhdGlvbi5cbmltcG9ydCB7IENvbnZleEVycm9yLCBWYWx1ZSB9IGZyb20gXCIuLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uRmFpbHVyZSB9IGZyb20gXCIuL3N5bmMvZnVuY3Rpb25fcmVzdWx0LmpzXCI7XG5cbi8vIFRoaXMgaXMgYmx1ZSAjOSBmcm9tIGh0dHBzOi8vd3d3LnJhZGl4LXVpLmNvbS9kb2NzL2NvbG9ycy9wYWxldHRlLWNvbXBvc2l0aW9uL3RoZS1zY2FsZXNcbi8vIEl0IG11c3QgbG9vayBnb29kIGluIGJvdGggbGlnaHQgYW5kIGRhcmsgbW9kZS5cbmNvbnN0IElORk9fQ09MT1IgPSBcImNvbG9yOnJnYigwLCAxNDUsIDI1NSlcIjtcblxuZXhwb3J0IHR5cGUgVWRmVHlwZSA9IFwicXVlcnlcIiB8IFwibXV0YXRpb25cIiB8IFwiYWN0aW9uXCIgfCBcImFueVwiO1xuXG5mdW5jdGlvbiBwcmVmaXhfZm9yX3NvdXJjZShzb3VyY2U6IFVkZlR5cGUpIHtcbiAgc3dpdGNoIChzb3VyY2UpIHtcbiAgICBjYXNlIFwicXVlcnlcIjpcbiAgICAgIHJldHVybiBcIlFcIjtcbiAgICBjYXNlIFwibXV0YXRpb25cIjpcbiAgICAgIHJldHVybiBcIk1cIjtcbiAgICBjYXNlIFwiYWN0aW9uXCI6XG4gICAgICByZXR1cm4gXCJBXCI7XG4gICAgY2FzZSBcImFueVwiOlxuICAgICAgcmV0dXJuIFwiP1wiO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIExvZ0xldmVsID0gXCJkZWJ1Z1wiIHwgXCJpbmZvXCIgfCBcIndhcm5cIiB8IFwiZXJyb3JcIjtcblxuLyoqXG4gKiBBIGxvZ2dlciB0aGF0IGNhbiBiZSB1c2VkIHRvIGxvZyBtZXNzYWdlcy4gQnkgZGVmYXVsdCwgdGhpcyBpcyBhIHdyYXBwZXJcbiAqIGFyb3VuZCBgY29uc29sZWAsIGJ1dCBjYW4gYmUgY29uZmlndXJlZCB0byBub3QgbG9nIGF0IGFsbCBvciB0byBsb2cgc29tZXdoZXJlXG4gKiBlbHNlLlxuICovXG5leHBvcnQgdHlwZSBMb2dnZXIgPSB7XG4gIGxvZ1ZlcmJvc2UoLi4uYXJnczogYW55W10pOiB2b2lkO1xuICBsb2coLi4uYXJnczogYW55W10pOiB2b2lkO1xuICB3YXJuKC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgZXJyb3IoLi4uYXJnczogYW55W10pOiB2b2lkO1xufTtcblxuZXhwb3J0IGNsYXNzIERlZmF1bHRMb2dnZXIgaW1wbGVtZW50cyBMb2dnZXIge1xuICBwcml2YXRlIF9vbkxvZ0xpbmVGdW5jczogUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICAobGV2ZWw6IExvZ0xldmVsLCAuLi5hcmdzOiBhbnlbXSkgPT4gdm9pZFxuICA+O1xuICBwcml2YXRlIF92ZXJib3NlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IHsgdmVyYm9zZTogYm9vbGVhbiB9KSB7XG4gICAgdGhpcy5fb25Mb2dMaW5lRnVuY3MgPSB7fTtcbiAgICB0aGlzLl92ZXJib3NlID0gb3B0aW9ucy52ZXJib3NlO1xuICB9XG5cbiAgYWRkTG9nTGluZUxpc3RlbmVyKFxuICAgIGZ1bmM6IChsZXZlbDogTG9nTGV2ZWwsIC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkLFxuICApOiAoKSA9PiB2b2lkIHtcbiAgICBsZXQgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX29uTG9nTGluZUZ1bmNzW2lkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xuICAgIH1cbiAgICB0aGlzLl9vbkxvZ0xpbmVGdW5jc1tpZF0gPSBmdW5jO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkZWxldGUgdGhpcy5fb25Mb2dMaW5lRnVuY3NbaWRdO1xuICAgIH07XG4gIH1cblxuICBsb2dWZXJib3NlKC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgaWYgKHRoaXMuX3ZlcmJvc2UpIHtcbiAgICAgIGZvciAoY29uc3QgZnVuYyBvZiBPYmplY3QudmFsdWVzKHRoaXMuX29uTG9nTGluZUZ1bmNzKSkge1xuICAgICAgICBmdW5jKFwiZGVidWdcIiwgYCR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfWAsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGxvZyguLi5hcmdzOiBhbnlbXSkge1xuICAgIGZvciAoY29uc3QgZnVuYyBvZiBPYmplY3QudmFsdWVzKHRoaXMuX29uTG9nTGluZUZ1bmNzKSkge1xuICAgICAgZnVuYyhcImluZm9cIiwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgd2FybiguLi5hcmdzOiBhbnlbXSkge1xuICAgIGZvciAoY29uc3QgZnVuYyBvZiBPYmplY3QudmFsdWVzKHRoaXMuX29uTG9nTGluZUZ1bmNzKSkge1xuICAgICAgZnVuYyhcIndhcm5cIiwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IoLi4uYXJnczogYW55W10pIHtcbiAgICBmb3IgKGNvbnN0IGZ1bmMgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLl9vbkxvZ0xpbmVGdW5jcykpIHtcbiAgICAgIGZ1bmMoXCJlcnJvclwiLCAuLi5hcmdzKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcihvcHRpb25zOiB7XG4gIHZlcmJvc2U6IGJvb2xlYW47XG59KTogTG9nZ2VyIHtcbiAgY29uc3QgbG9nZ2VyID0gbmV3IERlZmF1bHRMb2dnZXIob3B0aW9ucyk7XG4gIGxvZ2dlci5hZGRMb2dMaW5lTGlzdGVuZXIoKGxldmVsLCAuLi5hcmdzKSA9PiB7XG4gICAgc3dpdGNoIChsZXZlbCkge1xuICAgICAgY2FzZSBcImRlYnVnXCI6XG4gICAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImluZm9cIjpcbiAgICAgICAgY29uc29sZS5sb2coLi4uYXJncyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIndhcm5cIjpcbiAgICAgICAgY29uc29sZS53YXJuKC4uLmFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICBjb25zb2xlLmVycm9yKC4uLmFyZ3MpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgbGV2ZWwgc2F0aXNmaWVzIG5ldmVyO1xuICAgICAgICBjb25zb2xlLmxvZyguLi5hcmdzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbG9nZ2VyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFudGlhdGVOb29wTG9nZ2VyKG9wdGlvbnM6IHsgdmVyYm9zZTogYm9vbGVhbiB9KTogTG9nZ2VyIHtcbiAgcmV0dXJuIG5ldyBEZWZhdWx0TG9nZ2VyKG9wdGlvbnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nRm9yRnVuY3Rpb24oXG4gIGxvZ2dlcjogTG9nZ2VyLFxuICB0eXBlOiBcImluZm9cIiB8IFwiZXJyb3JcIixcbiAgc291cmNlOiBVZGZUeXBlLFxuICB1ZGZQYXRoOiBzdHJpbmcsXG4gIG1lc3NhZ2U6IHN0cmluZyB8IHsgZXJyb3JEYXRhOiBWYWx1ZSB9LFxuKSB7XG4gIGNvbnN0IHByZWZpeCA9IHByZWZpeF9mb3Jfc291cmNlKHNvdXJjZSk7XG5cbiAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcIm9iamVjdFwiKSB7XG4gICAgbWVzc2FnZSA9IGBDb252ZXhFcnJvciAke0pTT04uc3RyaW5naWZ5KG1lc3NhZ2UuZXJyb3JEYXRhLCBudWxsLCAyKX1gO1xuICB9XG4gIGlmICh0eXBlID09PSBcImluZm9cIikge1xuICAgIGNvbnN0IG1hdGNoID0gbWVzc2FnZS5tYXRjaCgvXlxcWy4qP1xcXSAvKTtcbiAgICBpZiAobWF0Y2ggPT09IG51bGwpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgYFtDT05WRVggJHtwcmVmaXh9KCR7dWRmUGF0aH0pXSBDb3VsZCBub3QgcGFyc2UgY29uc29sZS5sb2dgLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGV2ZWwgPSBtZXNzYWdlLnNsaWNlKDEsIG1hdGNoWzBdLmxlbmd0aCAtIDIpO1xuICAgIGNvbnN0IGFyZ3MgPSBtZXNzYWdlLnNsaWNlKG1hdGNoWzBdLmxlbmd0aCk7XG5cbiAgICBsb2dnZXIubG9nKGAlY1tDT05WRVggJHtwcmVmaXh9KCR7dWRmUGF0aH0pXSBbJHtsZXZlbH1dYCwgSU5GT19DT0xPUiwgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgbG9nZ2VyLmVycm9yKGBbQ09OVkVYICR7cHJlZml4fSgke3VkZlBhdGh9KV0gJHttZXNzYWdlfWApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dGYXRhbEVycm9yKGxvZ2dlcjogTG9nZ2VyLCBtZXNzYWdlOiBzdHJpbmcpOiBFcnJvciB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBbQ09OVkVYIEZBVEFMIEVSUk9SXSAke21lc3NhZ2V9YDtcbiAgbG9nZ2VyLmVycm9yKGVycm9yTWVzc2FnZSk7XG4gIHJldHVybiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZShcbiAgc291cmNlOiBVZGZUeXBlLFxuICB1ZGZQYXRoOiBzdHJpbmcsXG4gIHJlc3VsdDogRnVuY3Rpb25GYWlsdXJlLFxuKTogc3RyaW5nIHtcbiAgY29uc3QgcHJlZml4ID0gcHJlZml4X2Zvcl9zb3VyY2Uoc291cmNlKTtcbiAgcmV0dXJuIGBbQ09OVkVYICR7cHJlZml4fSgke3VkZlBhdGh9KV0gJHtyZXN1bHQuZXJyb3JNZXNzYWdlfVxcbiAgQ2FsbGVkIGJ5IGNsaWVudGA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3J3YXJkRGF0YShcbiAgcmVzdWx0OiBGdW5jdGlvbkZhaWx1cmUsXG4gIGVycm9yOiBDb252ZXhFcnJvcjxzdHJpbmc+LFxuKSB7XG4gIChlcnJvciBhcyBDb252ZXhFcnJvcjxhbnk+KS5kYXRhID0gcmVzdWx0LmVycm9yRGF0YTtcbiAgcmV0dXJuIGVycm9yO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/logging.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/simple_client-node.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/simple_client-node.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexClient: () => (/* reexport safe */ _simple_client_js__WEBPACK_IMPORTED_MODULE_2__.ConvexClient)\n/* harmony export */ });\n/* harmony import */ var module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! module */ \"module\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var _simple_client_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./simple_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js\");\n\n\nconst require = (0,module__WEBPACK_IMPORTED_MODULE_0__.createRequire)((0,path__WEBPACK_IMPORTED_MODULE_1__.resolve)('.'));\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __require = /* @__PURE__ */ ((x)=>typeof require !== \"undefined\" ? require : typeof Proxy !== \"undefined\" ? new Proxy(x, {\n        get: (a, b)=>(typeof require !== \"undefined\" ? require : a)[b]\n    }) : x)(function(x) {\n    if (typeof require !== \"undefined\") return require.apply(this, arguments);\n    throw Error('Dynamic require of \"' + x + '\" is not supported');\n});\nvar __commonJS = (cb, mod)=>function __require2() {\n        return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = {\n            exports: {}\n        }).exports, mod), mod.exports;\n    };\nvar __copyProps = (to, from, except, desc)=>{\n    if (from && typeof from === \"object\" || typeof from === \"function\") {\n        for (let key of __getOwnPropNames(from))if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n            get: ()=>from[key],\n            enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n        });\n    }\n    return to;\n};\nvar __toESM = (mod, isNodeMode, target)=>(target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(// If the importer is in node compatibility mode or this is not an ESM\n    // file that has been converted to a CommonJS file using a Babel-\n    // compatible transform (i.e. \"__esModule\" has not been set), then set\n    // \"default\" to the CommonJS \"module.exports\" for node compatibility.\n    isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n        value: mod,\n        enumerable: true\n    }) : target, mod));\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/stream.js\nvar require_stream = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/stream.js\" (exports, module) {\n        \"use strict\";\n        var { Duplex } = __require(\"stream\");\n        function emitClose(stream) {\n            stream.emit(\"close\");\n        }\n        function duplexOnEnd() {\n            if (!this.destroyed && this._writableState.finished) {\n                this.destroy();\n            }\n        }\n        function duplexOnError(err) {\n            this.removeListener(\"error\", duplexOnError);\n            this.destroy();\n            if (this.listenerCount(\"error\") === 0) {\n                this.emit(\"error\", err);\n            }\n        }\n        function createWebSocketStream2(ws, options) {\n            let terminateOnDestroy = true;\n            const duplex = new Duplex({\n                ...options,\n                autoDestroy: false,\n                emitClose: false,\n                objectMode: false,\n                writableObjectMode: false\n            });\n            ws.on(\"message\", function message(msg, isBinary) {\n                const data = !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n                if (!duplex.push(data)) ws.pause();\n            });\n            ws.once(\"error\", function error(err) {\n                if (duplex.destroyed) return;\n                terminateOnDestroy = false;\n                duplex.destroy(err);\n            });\n            ws.once(\"close\", function close() {\n                if (duplex.destroyed) return;\n                duplex.push(null);\n            });\n            duplex._destroy = function(err, callback) {\n                if (ws.readyState === ws.CLOSED) {\n                    callback(err);\n                    process.nextTick(emitClose, duplex);\n                    return;\n                }\n                let called = false;\n                ws.once(\"error\", function error(err2) {\n                    called = true;\n                    callback(err2);\n                });\n                ws.once(\"close\", function close() {\n                    if (!called) callback(err);\n                    process.nextTick(emitClose, duplex);\n                });\n                if (terminateOnDestroy) ws.terminate();\n            };\n            duplex._final = function(callback) {\n                if (ws.readyState === ws.CONNECTING) {\n                    ws.once(\"open\", function open() {\n                        duplex._final(callback);\n                    });\n                    return;\n                }\n                if (ws._socket === null) return;\n                if (ws._socket._writableState.finished) {\n                    callback();\n                    if (duplex._readableState.endEmitted) duplex.destroy();\n                } else {\n                    ws._socket.once(\"finish\", function finish() {\n                        callback();\n                    });\n                    ws.close();\n                }\n            };\n            duplex._read = function() {\n                if (ws.isPaused) ws.resume();\n            };\n            duplex._write = function(chunk, encoding, callback) {\n                if (ws.readyState === ws.CONNECTING) {\n                    ws.once(\"open\", function open() {\n                        duplex._write(chunk, encoding, callback);\n                    });\n                    return;\n                }\n                ws.send(chunk, callback);\n            };\n            duplex.on(\"end\", duplexOnEnd);\n            duplex.on(\"error\", duplexOnError);\n            return duplex;\n        }\n        module.exports = createWebSocketStream2;\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/constants.js\nvar require_constants = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/constants.js\" (exports, module) {\n        \"use strict\";\n        var BINARY_TYPES = [\n            \"nodebuffer\",\n            \"arraybuffer\",\n            \"fragments\"\n        ];\n        var hasBlob = typeof Blob !== \"undefined\";\n        if (hasBlob) BINARY_TYPES.push(\"blob\");\n        module.exports = {\n            BINARY_TYPES,\n            EMPTY_BUFFER: Buffer.alloc(0),\n            GUID: \"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\",\n            hasBlob,\n            kForOnEventAttribute: Symbol(\"kIsForOnEventAttribute\"),\n            kListener: Symbol(\"kListener\"),\n            kStatusCode: Symbol(\"status-code\"),\n            kWebSocket: Symbol(\"websocket\"),\n            NOOP: ()=>{}\n        };\n    }\n});\n// ../common/temp/node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/node-gyp-build.js\nvar require_node_gyp_build = __commonJS({\n    \"../common/temp/node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/node-gyp-build.js\" (exports, module) {\n        var fs = __require(\"fs\");\n        var path = __require(\"path\");\n        var os = __require(\"os\");\n        var runtimeRequire =  true ? require : 0;\n        var vars = process.config && process.config.variables || {};\n        var prebuildsOnly = !!process.env.PREBUILDS_ONLY;\n        var abi = process.versions.modules;\n        var runtime = isElectron() ? \"electron\" : isNwjs() ? \"node-webkit\" : \"node\";\n        var arch = process.env.npm_config_arch || os.arch();\n        var platform = process.env.npm_config_platform || os.platform();\n        var libc = process.env.LIBC || (isAlpine(platform) ? \"musl\" : \"glibc\");\n        var armv = process.env.ARM_VERSION || (arch === \"arm64\" ? \"8\" : vars.arm_version) || \"\";\n        var uv = (process.versions.uv || \"\").split(\".\")[0];\n        module.exports = load;\n        function load(dir) {\n            return runtimeRequire(load.resolve(dir));\n        }\n        load.resolve = load.path = function(dir) {\n            dir = path.resolve(dir || \".\");\n            try {\n                var name = runtimeRequire(path.join(dir, \"package.json\")).name.toUpperCase().replace(/-/g, \"_\");\n                if (process.env[name + \"_PREBUILD\"]) dir = process.env[name + \"_PREBUILD\"];\n            } catch (err) {}\n            if (!prebuildsOnly) {\n                var release = getFirst(path.join(dir, \"build/Release\"), matchBuild);\n                if (release) return release;\n                var debug = getFirst(path.join(dir, \"build/Debug\"), matchBuild);\n                if (debug) return debug;\n            }\n            var prebuild = resolve(dir);\n            if (prebuild) return prebuild;\n            var nearby = resolve(path.dirname(process.execPath));\n            if (nearby) return nearby;\n            var target = [\n                \"platform=\" + platform,\n                \"arch=\" + arch,\n                \"runtime=\" + runtime,\n                \"abi=\" + abi,\n                \"uv=\" + uv,\n                armv ? \"armv=\" + armv : \"\",\n                \"libc=\" + libc,\n                \"node=\" + process.versions.node,\n                process.versions.electron ? \"electron=\" + process.versions.electron : \"\",\n                 true ? \"webpack=true\" : 0\n            ].filter(Boolean).join(\" \");\n            throw new Error(\"No native build was found for \" + target + \"\\n    loaded from: \" + dir + \"\\n\");\n            function resolve(dir2) {\n                var tuples = readdirSync(path.join(dir2, \"prebuilds\")).map(parseTuple);\n                var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0];\n                if (!tuple) return;\n                var prebuilds = path.join(dir2, \"prebuilds\", tuple.name);\n                var parsed = readdirSync(prebuilds).map(parseTags);\n                var candidates = parsed.filter(matchTags(runtime, abi));\n                var winner = candidates.sort(compareTags(runtime))[0];\n                if (winner) return path.join(prebuilds, winner.file);\n            }\n        };\n        function readdirSync(dir) {\n            try {\n                return fs.readdirSync(dir);\n            } catch (err) {\n                return [];\n            }\n        }\n        function getFirst(dir, filter) {\n            var files = readdirSync(dir).filter(filter);\n            return files[0] && path.join(dir, files[0]);\n        }\n        function matchBuild(name) {\n            return /\\.node$/.test(name);\n        }\n        function parseTuple(name) {\n            var arr = name.split(\"-\");\n            if (arr.length !== 2) return;\n            var platform2 = arr[0];\n            var architectures = arr[1].split(\"+\");\n            if (!platform2) return;\n            if (!architectures.length) return;\n            if (!architectures.every(Boolean)) return;\n            return {\n                name,\n                platform: platform2,\n                architectures\n            };\n        }\n        function matchTuple(platform2, arch2) {\n            return function(tuple) {\n                if (tuple == null) return false;\n                if (tuple.platform !== platform2) return false;\n                return tuple.architectures.includes(arch2);\n            };\n        }\n        function compareTuples(a, b) {\n            return a.architectures.length - b.architectures.length;\n        }\n        function parseTags(file) {\n            var arr = file.split(\".\");\n            var extension = arr.pop();\n            var tags = {\n                file,\n                specificity: 0\n            };\n            if (extension !== \"node\") return;\n            for(var i = 0; i < arr.length; i++){\n                var tag = arr[i];\n                if (tag === \"node\" || tag === \"electron\" || tag === \"node-webkit\") {\n                    tags.runtime = tag;\n                } else if (tag === \"napi\") {\n                    tags.napi = true;\n                } else if (tag.slice(0, 3) === \"abi\") {\n                    tags.abi = tag.slice(3);\n                } else if (tag.slice(0, 2) === \"uv\") {\n                    tags.uv = tag.slice(2);\n                } else if (tag.slice(0, 4) === \"armv\") {\n                    tags.armv = tag.slice(4);\n                } else if (tag === \"glibc\" || tag === \"musl\") {\n                    tags.libc = tag;\n                } else {\n                    continue;\n                }\n                tags.specificity++;\n            }\n            return tags;\n        }\n        function matchTags(runtime2, abi2) {\n            return function(tags) {\n                if (tags == null) return false;\n                if (tags.runtime && tags.runtime !== runtime2 && !runtimeAgnostic(tags)) return false;\n                if (tags.abi && tags.abi !== abi2 && !tags.napi) return false;\n                if (tags.uv && tags.uv !== uv) return false;\n                if (tags.armv && tags.armv !== armv) return false;\n                if (tags.libc && tags.libc !== libc) return false;\n                return true;\n            };\n        }\n        function runtimeAgnostic(tags) {\n            return tags.runtime === \"node\" && tags.napi;\n        }\n        function compareTags(runtime2) {\n            return function(a, b) {\n                if (a.runtime !== b.runtime) {\n                    return a.runtime === runtime2 ? -1 : 1;\n                } else if (a.abi !== b.abi) {\n                    return a.abi ? -1 : 1;\n                } else if (a.specificity !== b.specificity) {\n                    return a.specificity > b.specificity ? -1 : 1;\n                } else {\n                    return 0;\n                }\n            };\n        }\n        function isNwjs() {\n            return !!(process.versions && process.versions.nw);\n        }\n        function isElectron() {\n            if (process.versions && process.versions.electron) return true;\n            if (process.env.ELECTRON_RUN_AS_NODE) return true;\n            return  false && 0;\n        }\n        function isAlpine(platform2) {\n            return platform2 === \"linux\" && fs.existsSync(\"/etc/alpine-release\");\n        }\n        load.parseTags = parseTags;\n        load.matchTags = matchTags;\n        load.compareTags = compareTags;\n        load.parseTuple = parseTuple;\n        load.matchTuple = matchTuple;\n        load.compareTuples = compareTuples;\n    }\n});\n// ../common/temp/node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/index.js\nvar require_node_gyp_build2 = __commonJS({\n    \"../common/temp/node_modules/.pnpm/node-gyp-build@4.8.4/node_modules/node-gyp-build/index.js\" (exports, module) {\n        var runtimeRequire =  true ? require : 0;\n        if (typeof runtimeRequire.addon === \"function\") {\n            module.exports = runtimeRequire.addon.bind(runtimeRequire);\n        } else {\n            module.exports = require_node_gyp_build();\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/fallback.js\nvar require_fallback = __commonJS({\n    \"../common/temp/node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/fallback.js\" (exports, module) {\n        \"use strict\";\n        var mask = (source, mask2, output, offset, length)=>{\n            for(var i = 0; i < length; i++){\n                output[offset + i] = source[i] ^ mask2[i & 3];\n            }\n        };\n        var unmask = (buffer, mask2)=>{\n            const length = buffer.length;\n            for(var i = 0; i < length; i++){\n                buffer[i] ^= mask2[i & 3];\n            }\n        };\n        module.exports = {\n            mask,\n            unmask\n        };\n    }\n});\n// ../common/temp/node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/index.js\nvar require_bufferutil = __commonJS({\n    \"../common/temp/node_modules/.pnpm/bufferutil@4.0.9/node_modules/bufferutil/index.js\" (exports, module) {\n        \"use strict\";\n        try {\n            module.exports = require_node_gyp_build2()(__dirname);\n        } catch (e) {\n            module.exports = require_fallback();\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/buffer-util.js\nvar require_buffer_util = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/buffer-util.js\" (exports, module) {\n        \"use strict\";\n        var { EMPTY_BUFFER } = require_constants();\n        var FastBuffer = Buffer[Symbol.species];\n        function concat(list, totalLength) {\n            if (list.length === 0) return EMPTY_BUFFER;\n            if (list.length === 1) return list[0];\n            const target = Buffer.allocUnsafe(totalLength);\n            let offset = 0;\n            for(let i = 0; i < list.length; i++){\n                const buf = list[i];\n                target.set(buf, offset);\n                offset += buf.length;\n            }\n            if (offset < totalLength) {\n                return new FastBuffer(target.buffer, target.byteOffset, offset);\n            }\n            return target;\n        }\n        function _mask(source, mask, output, offset, length) {\n            for(let i = 0; i < length; i++){\n                output[offset + i] = source[i] ^ mask[i & 3];\n            }\n        }\n        function _unmask(buffer, mask) {\n            for(let i = 0; i < buffer.length; i++){\n                buffer[i] ^= mask[i & 3];\n            }\n        }\n        function toArrayBuffer(buf) {\n            if (buf.length === buf.buffer.byteLength) {\n                return buf.buffer;\n            }\n            return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n        }\n        function toBuffer(data) {\n            toBuffer.readOnly = true;\n            if (Buffer.isBuffer(data)) return data;\n            let buf;\n            if (data instanceof ArrayBuffer) {\n                buf = new FastBuffer(data);\n            } else if (ArrayBuffer.isView(data)) {\n                buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n            } else {\n                buf = Buffer.from(data);\n                toBuffer.readOnly = false;\n            }\n            return buf;\n        }\n        module.exports = {\n            concat,\n            mask: _mask,\n            toArrayBuffer,\n            toBuffer,\n            unmask: _unmask\n        };\n        if (!process.env.WS_NO_BUFFER_UTIL) {\n            try {\n                const bufferUtil = require_bufferutil();\n                module.exports.mask = function(source, mask, output, offset, length) {\n                    if (length < 48) _mask(source, mask, output, offset, length);\n                    else bufferUtil.mask(source, mask, output, offset, length);\n                };\n                module.exports.unmask = function(buffer, mask) {\n                    if (buffer.length < 32) _unmask(buffer, mask);\n                    else bufferUtil.unmask(buffer, mask);\n                };\n            } catch (e) {}\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/limiter.js\nvar require_limiter = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/limiter.js\" (exports, module) {\n        \"use strict\";\n        var kDone = Symbol(\"kDone\");\n        var kRun = Symbol(\"kRun\");\n        var Limiter = class {\n            /**\n       * Creates a new `Limiter`.\n       *\n       * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n       *     to run concurrently\n       */ constructor(concurrency){\n                this[kDone] = ()=>{\n                    this.pending--;\n                    this[kRun]();\n                };\n                this.concurrency = concurrency || Infinity;\n                this.jobs = [];\n                this.pending = 0;\n            }\n            /**\n       * Adds a job to the queue.\n       *\n       * @param {Function} job The job to run\n       * @public\n       */ add(job) {\n                this.jobs.push(job);\n                this[kRun]();\n            }\n            /**\n       * Removes a job from the queue and runs it if possible.\n       *\n       * @private\n       */ [kRun]() {\n                if (this.pending === this.concurrency) return;\n                if (this.jobs.length) {\n                    const job = this.jobs.shift();\n                    this.pending++;\n                    job(this[kDone]);\n                }\n            }\n        };\n        module.exports = Limiter;\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/permessage-deflate.js\nvar require_permessage_deflate = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/permessage-deflate.js\" (exports, module) {\n        \"use strict\";\n        var zlib = __require(\"zlib\");\n        var bufferUtil = require_buffer_util();\n        var Limiter = require_limiter();\n        var { kStatusCode } = require_constants();\n        var FastBuffer = Buffer[Symbol.species];\n        var TRAILER = Buffer.from([\n            0,\n            0,\n            255,\n            255\n        ]);\n        var kPerMessageDeflate = Symbol(\"permessage-deflate\");\n        var kTotalLength = Symbol(\"total-length\");\n        var kCallback = Symbol(\"callback\");\n        var kBuffers = Symbol(\"buffers\");\n        var kError = Symbol(\"error\");\n        var zlibLimiter;\n        var PerMessageDeflate = class {\n            /**\n       * Creates a PerMessageDeflate instance.\n       *\n       * @param {Object} [options] Configuration options\n       * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n       *     for, or request, a custom client window size\n       * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n       *     acknowledge disabling of client context takeover\n       * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n       *     calls to zlib\n       * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n       *     use of a custom server window size\n       * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n       *     disabling of server context takeover\n       * @param {Number} [options.threshold=1024] Size (in bytes) below which\n       *     messages should not be compressed if context takeover is disabled\n       * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n       *     deflate\n       * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n       *     inflate\n       * @param {Boolean} [isServer=false] Create the instance in either server or\n       *     client mode\n       * @param {Number} [maxPayload=0] The maximum allowed message length\n       */ constructor(options, isServer, maxPayload){\n                this._maxPayload = maxPayload | 0;\n                this._options = options || {};\n                this._threshold = this._options.threshold !== void 0 ? this._options.threshold : 1024;\n                this._isServer = !!isServer;\n                this._deflate = null;\n                this._inflate = null;\n                this.params = null;\n                if (!zlibLimiter) {\n                    const concurrency = this._options.concurrencyLimit !== void 0 ? this._options.concurrencyLimit : 10;\n                    zlibLimiter = new Limiter(concurrency);\n                }\n            }\n            /**\n       * @type {String}\n       */ static get extensionName() {\n                return \"permessage-deflate\";\n            }\n            /**\n       * Create an extension negotiation offer.\n       *\n       * @return {Object} Extension parameters\n       * @public\n       */ offer() {\n                const params = {};\n                if (this._options.serverNoContextTakeover) {\n                    params.server_no_context_takeover = true;\n                }\n                if (this._options.clientNoContextTakeover) {\n                    params.client_no_context_takeover = true;\n                }\n                if (this._options.serverMaxWindowBits) {\n                    params.server_max_window_bits = this._options.serverMaxWindowBits;\n                }\n                if (this._options.clientMaxWindowBits) {\n                    params.client_max_window_bits = this._options.clientMaxWindowBits;\n                } else if (this._options.clientMaxWindowBits == null) {\n                    params.client_max_window_bits = true;\n                }\n                return params;\n            }\n            /**\n       * Accept an extension negotiation offer/response.\n       *\n       * @param {Array} configurations The extension negotiation offers/reponse\n       * @return {Object} Accepted configuration\n       * @public\n       */ accept(configurations) {\n                configurations = this.normalizeParams(configurations);\n                this.params = this._isServer ? this.acceptAsServer(configurations) : this.acceptAsClient(configurations);\n                return this.params;\n            }\n            /**\n       * Releases all resources used by the extension.\n       *\n       * @public\n       */ cleanup() {\n                if (this._inflate) {\n                    this._inflate.close();\n                    this._inflate = null;\n                }\n                if (this._deflate) {\n                    const callback = this._deflate[kCallback];\n                    this._deflate.close();\n                    this._deflate = null;\n                    if (callback) {\n                        callback(new Error(\"The deflate stream was closed while data was being processed\"));\n                    }\n                }\n            }\n            /**\n       *  Accept an extension negotiation offer.\n       *\n       * @param {Array} offers The extension negotiation offers\n       * @return {Object} Accepted configuration\n       * @private\n       */ acceptAsServer(offers) {\n                const opts = this._options;\n                const accepted = offers.find((params)=>{\n                    if (opts.serverNoContextTakeover === false && params.server_no_context_takeover || params.server_max_window_bits && (opts.serverMaxWindowBits === false || typeof opts.serverMaxWindowBits === \"number\" && opts.serverMaxWindowBits > params.server_max_window_bits) || typeof opts.clientMaxWindowBits === \"number\" && !params.client_max_window_bits) {\n                        return false;\n                    }\n                    return true;\n                });\n                if (!accepted) {\n                    throw new Error(\"None of the extension offers can be accepted\");\n                }\n                if (opts.serverNoContextTakeover) {\n                    accepted.server_no_context_takeover = true;\n                }\n                if (opts.clientNoContextTakeover) {\n                    accepted.client_no_context_takeover = true;\n                }\n                if (typeof opts.serverMaxWindowBits === \"number\") {\n                    accepted.server_max_window_bits = opts.serverMaxWindowBits;\n                }\n                if (typeof opts.clientMaxWindowBits === \"number\") {\n                    accepted.client_max_window_bits = opts.clientMaxWindowBits;\n                } else if (accepted.client_max_window_bits === true || opts.clientMaxWindowBits === false) {\n                    delete accepted.client_max_window_bits;\n                }\n                return accepted;\n            }\n            /**\n       * Accept the extension negotiation response.\n       *\n       * @param {Array} response The extension negotiation response\n       * @return {Object} Accepted configuration\n       * @private\n       */ acceptAsClient(response) {\n                const params = response[0];\n                if (this._options.clientNoContextTakeover === false && params.client_no_context_takeover) {\n                    throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n                }\n                if (!params.client_max_window_bits) {\n                    if (typeof this._options.clientMaxWindowBits === \"number\") {\n                        params.client_max_window_bits = this._options.clientMaxWindowBits;\n                    }\n                } else if (this._options.clientMaxWindowBits === false || typeof this._options.clientMaxWindowBits === \"number\" && params.client_max_window_bits > this._options.clientMaxWindowBits) {\n                    throw new Error('Unexpected or invalid parameter \"client_max_window_bits\"');\n                }\n                return params;\n            }\n            /**\n       * Normalize parameters.\n       *\n       * @param {Array} configurations The extension negotiation offers/reponse\n       * @return {Array} The offers/response with normalized parameters\n       * @private\n       */ normalizeParams(configurations) {\n                configurations.forEach((params)=>{\n                    Object.keys(params).forEach((key)=>{\n                        let value = params[key];\n                        if (value.length > 1) {\n                            throw new Error(`Parameter \"${key}\" must have only a single value`);\n                        }\n                        value = value[0];\n                        if (key === \"client_max_window_bits\") {\n                            if (value !== true) {\n                                const num = +value;\n                                if (!Number.isInteger(num) || num < 8 || num > 15) {\n                                    throw new TypeError(`Invalid value for parameter \"${key}\": ${value}`);\n                                }\n                                value = num;\n                            } else if (!this._isServer) {\n                                throw new TypeError(`Invalid value for parameter \"${key}\": ${value}`);\n                            }\n                        } else if (key === \"server_max_window_bits\") {\n                            const num = +value;\n                            if (!Number.isInteger(num) || num < 8 || num > 15) {\n                                throw new TypeError(`Invalid value for parameter \"${key}\": ${value}`);\n                            }\n                            value = num;\n                        } else if (key === \"client_no_context_takeover\" || key === \"server_no_context_takeover\") {\n                            if (value !== true) {\n                                throw new TypeError(`Invalid value for parameter \"${key}\": ${value}`);\n                            }\n                        } else {\n                            throw new Error(`Unknown parameter \"${key}\"`);\n                        }\n                        params[key] = value;\n                    });\n                });\n                return configurations;\n            }\n            /**\n       * Decompress data. Concurrency limited.\n       *\n       * @param {Buffer} data Compressed data\n       * @param {Boolean} fin Specifies whether or not this is the last fragment\n       * @param {Function} callback Callback\n       * @public\n       */ decompress(data, fin, callback) {\n                zlibLimiter.add((done)=>{\n                    this._decompress(data, fin, (err, result)=>{\n                        done();\n                        callback(err, result);\n                    });\n                });\n            }\n            /**\n       * Compress data. Concurrency limited.\n       *\n       * @param {(Buffer|String)} data Data to compress\n       * @param {Boolean} fin Specifies whether or not this is the last fragment\n       * @param {Function} callback Callback\n       * @public\n       */ compress(data, fin, callback) {\n                zlibLimiter.add((done)=>{\n                    this._compress(data, fin, (err, result)=>{\n                        done();\n                        callback(err, result);\n                    });\n                });\n            }\n            /**\n       * Decompress data.\n       *\n       * @param {Buffer} data Compressed data\n       * @param {Boolean} fin Specifies whether or not this is the last fragment\n       * @param {Function} callback Callback\n       * @private\n       */ _decompress(data, fin, callback) {\n                const endpoint = this._isServer ? \"client\" : \"server\";\n                if (!this._inflate) {\n                    const key = `${endpoint}_max_window_bits`;\n                    const windowBits = typeof this.params[key] !== \"number\" ? zlib.Z_DEFAULT_WINDOWBITS : this.params[key];\n                    this._inflate = zlib.createInflateRaw({\n                        ...this._options.zlibInflateOptions,\n                        windowBits\n                    });\n                    this._inflate[kPerMessageDeflate] = this;\n                    this._inflate[kTotalLength] = 0;\n                    this._inflate[kBuffers] = [];\n                    this._inflate.on(\"error\", inflateOnError);\n                    this._inflate.on(\"data\", inflateOnData);\n                }\n                this._inflate[kCallback] = callback;\n                this._inflate.write(data);\n                if (fin) this._inflate.write(TRAILER);\n                this._inflate.flush(()=>{\n                    const err = this._inflate[kError];\n                    if (err) {\n                        this._inflate.close();\n                        this._inflate = null;\n                        callback(err);\n                        return;\n                    }\n                    const data2 = bufferUtil.concat(this._inflate[kBuffers], this._inflate[kTotalLength]);\n                    if (this._inflate._readableState.endEmitted) {\n                        this._inflate.close();\n                        this._inflate = null;\n                    } else {\n                        this._inflate[kTotalLength] = 0;\n                        this._inflate[kBuffers] = [];\n                        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n                            this._inflate.reset();\n                        }\n                    }\n                    callback(null, data2);\n                });\n            }\n            /**\n       * Compress data.\n       *\n       * @param {(Buffer|String)} data Data to compress\n       * @param {Boolean} fin Specifies whether or not this is the last fragment\n       * @param {Function} callback Callback\n       * @private\n       */ _compress(data, fin, callback) {\n                const endpoint = this._isServer ? \"server\" : \"client\";\n                if (!this._deflate) {\n                    const key = `${endpoint}_max_window_bits`;\n                    const windowBits = typeof this.params[key] !== \"number\" ? zlib.Z_DEFAULT_WINDOWBITS : this.params[key];\n                    this._deflate = zlib.createDeflateRaw({\n                        ...this._options.zlibDeflateOptions,\n                        windowBits\n                    });\n                    this._deflate[kTotalLength] = 0;\n                    this._deflate[kBuffers] = [];\n                    this._deflate.on(\"data\", deflateOnData);\n                }\n                this._deflate[kCallback] = callback;\n                this._deflate.write(data);\n                this._deflate.flush(zlib.Z_SYNC_FLUSH, ()=>{\n                    if (!this._deflate) {\n                        return;\n                    }\n                    let data2 = bufferUtil.concat(this._deflate[kBuffers], this._deflate[kTotalLength]);\n                    if (fin) {\n                        data2 = new FastBuffer(data2.buffer, data2.byteOffset, data2.length - 4);\n                    }\n                    this._deflate[kCallback] = null;\n                    this._deflate[kTotalLength] = 0;\n                    this._deflate[kBuffers] = [];\n                    if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n                        this._deflate.reset();\n                    }\n                    callback(null, data2);\n                });\n            }\n        };\n        module.exports = PerMessageDeflate;\n        function deflateOnData(chunk) {\n            this[kBuffers].push(chunk);\n            this[kTotalLength] += chunk.length;\n        }\n        function inflateOnData(chunk) {\n            this[kTotalLength] += chunk.length;\n            if (this[kPerMessageDeflate]._maxPayload < 1 || this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload) {\n                this[kBuffers].push(chunk);\n                return;\n            }\n            this[kError] = new RangeError(\"Max payload size exceeded\");\n            this[kError].code = \"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH\";\n            this[kError][kStatusCode] = 1009;\n            this.removeListener(\"data\", inflateOnData);\n            this.reset();\n        }\n        function inflateOnError(err) {\n            this[kPerMessageDeflate]._inflate = null;\n            err[kStatusCode] = 1007;\n            this[kCallback](err);\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/validation.js\nvar require_validation = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/validation.js\" (exports, module) {\n        \"use strict\";\n        var { isUtf8 } = __require(\"buffer\");\n        var { hasBlob } = require_constants();\n        var tokenChars = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            // 0 - 15\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            // 16 - 31\n            0,\n            1,\n            0,\n            1,\n            1,\n            1,\n            1,\n            1,\n            0,\n            0,\n            1,\n            1,\n            0,\n            1,\n            1,\n            0,\n            // 32 - 47\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            // 48 - 63\n            0,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            // 64 - 79\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            0,\n            0,\n            0,\n            1,\n            1,\n            // 80 - 95\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            // 96 - 111\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            1,\n            0,\n            1,\n            0,\n            1,\n            0\n        ];\n        function isValidStatusCode(code) {\n            return code >= 1e3 && code <= 1014 && code !== 1004 && code !== 1005 && code !== 1006 || code >= 3e3 && code <= 4999;\n        }\n        function _isValidUTF8(buf) {\n            const len = buf.length;\n            let i = 0;\n            while(i < len){\n                if ((buf[i] & 128) === 0) {\n                    i++;\n                } else if ((buf[i] & 224) === 192) {\n                    if (i + 1 === len || (buf[i + 1] & 192) !== 128 || (buf[i] & 254) === 192) {\n                        return false;\n                    }\n                    i += 2;\n                } else if ((buf[i] & 240) === 224) {\n                    if (i + 2 >= len || (buf[i + 1] & 192) !== 128 || (buf[i + 2] & 192) !== 128 || buf[i] === 224 && (buf[i + 1] & 224) === 128 || // Overlong\n                    buf[i] === 237 && (buf[i + 1] & 224) === 160) {\n                        return false;\n                    }\n                    i += 3;\n                } else if ((buf[i] & 248) === 240) {\n                    if (i + 3 >= len || (buf[i + 1] & 192) !== 128 || (buf[i + 2] & 192) !== 128 || (buf[i + 3] & 192) !== 128 || buf[i] === 240 && (buf[i + 1] & 240) === 128 || // Overlong\n                    buf[i] === 244 && buf[i + 1] > 143 || buf[i] > 244) {\n                        return false;\n                    }\n                    i += 4;\n                } else {\n                    return false;\n                }\n            }\n            return true;\n        }\n        function isBlob(value) {\n            return hasBlob && typeof value === \"object\" && typeof value.arrayBuffer === \"function\" && typeof value.type === \"string\" && typeof value.stream === \"function\" && (value[Symbol.toStringTag] === \"Blob\" || value[Symbol.toStringTag] === \"File\");\n        }\n        module.exports = {\n            isBlob,\n            isValidStatusCode,\n            isValidUTF8: _isValidUTF8,\n            tokenChars\n        };\n        if (isUtf8) {\n            module.exports.isValidUTF8 = function(buf) {\n                return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n            };\n        } else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n            try {\n                const isValidUTF8 = __require(\"utf-8-validate\");\n                module.exports.isValidUTF8 = function(buf) {\n                    return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n                };\n            } catch (e) {}\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/receiver.js\nvar require_receiver = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/receiver.js\" (exports, module) {\n        \"use strict\";\n        var { Writable } = __require(\"stream\");\n        var PerMessageDeflate = require_permessage_deflate();\n        var { BINARY_TYPES, EMPTY_BUFFER, kStatusCode, kWebSocket } = require_constants();\n        var { concat, toArrayBuffer, unmask } = require_buffer_util();\n        var { isValidStatusCode, isValidUTF8 } = require_validation();\n        var FastBuffer = Buffer[Symbol.species];\n        var GET_INFO = 0;\n        var GET_PAYLOAD_LENGTH_16 = 1;\n        var GET_PAYLOAD_LENGTH_64 = 2;\n        var GET_MASK = 3;\n        var GET_DATA = 4;\n        var INFLATING = 5;\n        var DEFER_EVENT = 6;\n        var Receiver2 = class extends Writable {\n            /**\n       * Creates a Receiver instance.\n       *\n       * @param {Object} [options] Options object\n       * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n       *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n       *     multiple times in the same tick\n       * @param {String} [options.binaryType=nodebuffer] The type for binary data\n       * @param {Object} [options.extensions] An object containing the negotiated\n       *     extensions\n       * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n       *     client or server mode\n       * @param {Number} [options.maxPayload=0] The maximum allowed message length\n       * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n       *     not to skip UTF-8 validation for text and close messages\n       */ constructor(options = {}){\n                super();\n                this._allowSynchronousEvents = options.allowSynchronousEvents !== void 0 ? options.allowSynchronousEvents : true;\n                this._binaryType = options.binaryType || BINARY_TYPES[0];\n                this._extensions = options.extensions || {};\n                this._isServer = !!options.isServer;\n                this._maxPayload = options.maxPayload | 0;\n                this._skipUTF8Validation = !!options.skipUTF8Validation;\n                this[kWebSocket] = void 0;\n                this._bufferedBytes = 0;\n                this._buffers = [];\n                this._compressed = false;\n                this._payloadLength = 0;\n                this._mask = void 0;\n                this._fragmented = 0;\n                this._masked = false;\n                this._fin = false;\n                this._opcode = 0;\n                this._totalPayloadLength = 0;\n                this._messageLength = 0;\n                this._fragments = [];\n                this._errored = false;\n                this._loop = false;\n                this._state = GET_INFO;\n            }\n            /**\n       * Implements `Writable.prototype._write()`.\n       *\n       * @param {Buffer} chunk The chunk of data to write\n       * @param {String} encoding The character encoding of `chunk`\n       * @param {Function} cb Callback\n       * @private\n       */ _write(chunk, encoding, cb) {\n                if (this._opcode === 8 && this._state == GET_INFO) return cb();\n                this._bufferedBytes += chunk.length;\n                this._buffers.push(chunk);\n                this.startLoop(cb);\n            }\n            /**\n       * Consumes `n` bytes from the buffered data.\n       *\n       * @param {Number} n The number of bytes to consume\n       * @return {Buffer} The consumed bytes\n       * @private\n       */ consume(n) {\n                this._bufferedBytes -= n;\n                if (n === this._buffers[0].length) return this._buffers.shift();\n                if (n < this._buffers[0].length) {\n                    const buf = this._buffers[0];\n                    this._buffers[0] = new FastBuffer(buf.buffer, buf.byteOffset + n, buf.length - n);\n                    return new FastBuffer(buf.buffer, buf.byteOffset, n);\n                }\n                const dst = Buffer.allocUnsafe(n);\n                do {\n                    const buf = this._buffers[0];\n                    const offset = dst.length - n;\n                    if (n >= buf.length) {\n                        dst.set(this._buffers.shift(), offset);\n                    } else {\n                        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n                        this._buffers[0] = new FastBuffer(buf.buffer, buf.byteOffset + n, buf.length - n);\n                    }\n                    n -= buf.length;\n                }while (n > 0);\n                return dst;\n            }\n            /**\n       * Starts the parsing loop.\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ startLoop(cb) {\n                this._loop = true;\n                do {\n                    switch(this._state){\n                        case GET_INFO:\n                            this.getInfo(cb);\n                            break;\n                        case GET_PAYLOAD_LENGTH_16:\n                            this.getPayloadLength16(cb);\n                            break;\n                        case GET_PAYLOAD_LENGTH_64:\n                            this.getPayloadLength64(cb);\n                            break;\n                        case GET_MASK:\n                            this.getMask();\n                            break;\n                        case GET_DATA:\n                            this.getData(cb);\n                            break;\n                        case INFLATING:\n                        case DEFER_EVENT:\n                            this._loop = false;\n                            return;\n                    }\n                }while (this._loop);\n                if (!this._errored) cb();\n            }\n            /**\n       * Reads the first two bytes of a frame.\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ getInfo(cb) {\n                if (this._bufferedBytes < 2) {\n                    this._loop = false;\n                    return;\n                }\n                const buf = this.consume(2);\n                if ((buf[0] & 48) !== 0) {\n                    const error = this.createError(RangeError, \"RSV2 and RSV3 must be clear\", true, 1002, \"WS_ERR_UNEXPECTED_RSV_2_3\");\n                    cb(error);\n                    return;\n                }\n                const compressed = (buf[0] & 64) === 64;\n                if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n                    const error = this.createError(RangeError, \"RSV1 must be clear\", true, 1002, \"WS_ERR_UNEXPECTED_RSV_1\");\n                    cb(error);\n                    return;\n                }\n                this._fin = (buf[0] & 128) === 128;\n                this._opcode = buf[0] & 15;\n                this._payloadLength = buf[1] & 127;\n                if (this._opcode === 0) {\n                    if (compressed) {\n                        const error = this.createError(RangeError, \"RSV1 must be clear\", true, 1002, \"WS_ERR_UNEXPECTED_RSV_1\");\n                        cb(error);\n                        return;\n                    }\n                    if (!this._fragmented) {\n                        const error = this.createError(RangeError, \"invalid opcode 0\", true, 1002, \"WS_ERR_INVALID_OPCODE\");\n                        cb(error);\n                        return;\n                    }\n                    this._opcode = this._fragmented;\n                } else if (this._opcode === 1 || this._opcode === 2) {\n                    if (this._fragmented) {\n                        const error = this.createError(RangeError, `invalid opcode ${this._opcode}`, true, 1002, \"WS_ERR_INVALID_OPCODE\");\n                        cb(error);\n                        return;\n                    }\n                    this._compressed = compressed;\n                } else if (this._opcode > 7 && this._opcode < 11) {\n                    if (!this._fin) {\n                        const error = this.createError(RangeError, \"FIN must be set\", true, 1002, \"WS_ERR_EXPECTED_FIN\");\n                        cb(error);\n                        return;\n                    }\n                    if (compressed) {\n                        const error = this.createError(RangeError, \"RSV1 must be clear\", true, 1002, \"WS_ERR_UNEXPECTED_RSV_1\");\n                        cb(error);\n                        return;\n                    }\n                    if (this._payloadLength > 125 || this._opcode === 8 && this._payloadLength === 1) {\n                        const error = this.createError(RangeError, `invalid payload length ${this._payloadLength}`, true, 1002, \"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH\");\n                        cb(error);\n                        return;\n                    }\n                } else {\n                    const error = this.createError(RangeError, `invalid opcode ${this._opcode}`, true, 1002, \"WS_ERR_INVALID_OPCODE\");\n                    cb(error);\n                    return;\n                }\n                if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n                this._masked = (buf[1] & 128) === 128;\n                if (this._isServer) {\n                    if (!this._masked) {\n                        const error = this.createError(RangeError, \"MASK must be set\", true, 1002, \"WS_ERR_EXPECTED_MASK\");\n                        cb(error);\n                        return;\n                    }\n                } else if (this._masked) {\n                    const error = this.createError(RangeError, \"MASK must be clear\", true, 1002, \"WS_ERR_UNEXPECTED_MASK\");\n                    cb(error);\n                    return;\n                }\n                if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n                else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n                else this.haveLength(cb);\n            }\n            /**\n       * Gets extended payload length (7+16).\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ getPayloadLength16(cb) {\n                if (this._bufferedBytes < 2) {\n                    this._loop = false;\n                    return;\n                }\n                this._payloadLength = this.consume(2).readUInt16BE(0);\n                this.haveLength(cb);\n            }\n            /**\n       * Gets extended payload length (7+64).\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ getPayloadLength64(cb) {\n                if (this._bufferedBytes < 8) {\n                    this._loop = false;\n                    return;\n                }\n                const buf = this.consume(8);\n                const num = buf.readUInt32BE(0);\n                if (num > Math.pow(2, 53 - 32) - 1) {\n                    const error = this.createError(RangeError, \"Unsupported WebSocket frame: payload length > 2^53 - 1\", false, 1009, \"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH\");\n                    cb(error);\n                    return;\n                }\n                this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n                this.haveLength(cb);\n            }\n            /**\n       * Payload length has been read.\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ haveLength(cb) {\n                if (this._payloadLength && this._opcode < 8) {\n                    this._totalPayloadLength += this._payloadLength;\n                    if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n                        const error = this.createError(RangeError, \"Max payload size exceeded\", false, 1009, \"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH\");\n                        cb(error);\n                        return;\n                    }\n                }\n                if (this._masked) this._state = GET_MASK;\n                else this._state = GET_DATA;\n            }\n            /**\n       * Reads mask bytes.\n       *\n       * @private\n       */ getMask() {\n                if (this._bufferedBytes < 4) {\n                    this._loop = false;\n                    return;\n                }\n                this._mask = this.consume(4);\n                this._state = GET_DATA;\n            }\n            /**\n       * Reads data bytes.\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ getData(cb) {\n                let data = EMPTY_BUFFER;\n                if (this._payloadLength) {\n                    if (this._bufferedBytes < this._payloadLength) {\n                        this._loop = false;\n                        return;\n                    }\n                    data = this.consume(this._payloadLength);\n                    if (this._masked && (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0) {\n                        unmask(data, this._mask);\n                    }\n                }\n                if (this._opcode > 7) {\n                    this.controlMessage(data, cb);\n                    return;\n                }\n                if (this._compressed) {\n                    this._state = INFLATING;\n                    this.decompress(data, cb);\n                    return;\n                }\n                if (data.length) {\n                    this._messageLength = this._totalPayloadLength;\n                    this._fragments.push(data);\n                }\n                this.dataMessage(cb);\n            }\n            /**\n       * Decompresses data.\n       *\n       * @param {Buffer} data Compressed data\n       * @param {Function} cb Callback\n       * @private\n       */ decompress(data, cb) {\n                const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n                perMessageDeflate.decompress(data, this._fin, (err, buf)=>{\n                    if (err) return cb(err);\n                    if (buf.length) {\n                        this._messageLength += buf.length;\n                        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n                            const error = this.createError(RangeError, \"Max payload size exceeded\", false, 1009, \"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH\");\n                            cb(error);\n                            return;\n                        }\n                        this._fragments.push(buf);\n                    }\n                    this.dataMessage(cb);\n                    if (this._state === GET_INFO) this.startLoop(cb);\n                });\n            }\n            /**\n       * Handles a data message.\n       *\n       * @param {Function} cb Callback\n       * @private\n       */ dataMessage(cb) {\n                if (!this._fin) {\n                    this._state = GET_INFO;\n                    return;\n                }\n                const messageLength = this._messageLength;\n                const fragments = this._fragments;\n                this._totalPayloadLength = 0;\n                this._messageLength = 0;\n                this._fragmented = 0;\n                this._fragments = [];\n                if (this._opcode === 2) {\n                    let data;\n                    if (this._binaryType === \"nodebuffer\") {\n                        data = concat(fragments, messageLength);\n                    } else if (this._binaryType === \"arraybuffer\") {\n                        data = toArrayBuffer(concat(fragments, messageLength));\n                    } else if (this._binaryType === \"blob\") {\n                        data = new Blob(fragments);\n                    } else {\n                        data = fragments;\n                    }\n                    if (this._allowSynchronousEvents) {\n                        this.emit(\"message\", data, true);\n                        this._state = GET_INFO;\n                    } else {\n                        this._state = DEFER_EVENT;\n                        setImmediate(()=>{\n                            this.emit(\"message\", data, true);\n                            this._state = GET_INFO;\n                            this.startLoop(cb);\n                        });\n                    }\n                } else {\n                    const buf = concat(fragments, messageLength);\n                    if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n                        const error = this.createError(Error, \"invalid UTF-8 sequence\", true, 1007, \"WS_ERR_INVALID_UTF8\");\n                        cb(error);\n                        return;\n                    }\n                    if (this._state === INFLATING || this._allowSynchronousEvents) {\n                        this.emit(\"message\", buf, false);\n                        this._state = GET_INFO;\n                    } else {\n                        this._state = DEFER_EVENT;\n                        setImmediate(()=>{\n                            this.emit(\"message\", buf, false);\n                            this._state = GET_INFO;\n                            this.startLoop(cb);\n                        });\n                    }\n                }\n            }\n            /**\n       * Handles a control message.\n       *\n       * @param {Buffer} data Data to handle\n       * @return {(Error|RangeError|undefined)} A possible error\n       * @private\n       */ controlMessage(data, cb) {\n                if (this._opcode === 8) {\n                    if (data.length === 0) {\n                        this._loop = false;\n                        this.emit(\"conclude\", 1005, EMPTY_BUFFER);\n                        this.end();\n                    } else {\n                        const code = data.readUInt16BE(0);\n                        if (!isValidStatusCode(code)) {\n                            const error = this.createError(RangeError, `invalid status code ${code}`, true, 1002, \"WS_ERR_INVALID_CLOSE_CODE\");\n                            cb(error);\n                            return;\n                        }\n                        const buf = new FastBuffer(data.buffer, data.byteOffset + 2, data.length - 2);\n                        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n                            const error = this.createError(Error, \"invalid UTF-8 sequence\", true, 1007, \"WS_ERR_INVALID_UTF8\");\n                            cb(error);\n                            return;\n                        }\n                        this._loop = false;\n                        this.emit(\"conclude\", code, buf);\n                        this.end();\n                    }\n                    this._state = GET_INFO;\n                    return;\n                }\n                if (this._allowSynchronousEvents) {\n                    this.emit(this._opcode === 9 ? \"ping\" : \"pong\", data);\n                    this._state = GET_INFO;\n                } else {\n                    this._state = DEFER_EVENT;\n                    setImmediate(()=>{\n                        this.emit(this._opcode === 9 ? \"ping\" : \"pong\", data);\n                        this._state = GET_INFO;\n                        this.startLoop(cb);\n                    });\n                }\n            }\n            /**\n       * Builds an error object.\n       *\n       * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n       * @param {String} message The error message\n       * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n       *     `message`\n       * @param {Number} statusCode The status code\n       * @param {String} errorCode The exposed error code\n       * @return {(Error|RangeError)} The error\n       * @private\n       */ createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n                this._loop = false;\n                this._errored = true;\n                const err = new ErrorCtor(prefix ? `Invalid WebSocket frame: ${message}` : message);\n                Error.captureStackTrace(err, this.createError);\n                err.code = errorCode;\n                err[kStatusCode] = statusCode;\n                return err;\n            }\n        };\n        module.exports = Receiver2;\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/sender.js\nvar require_sender = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/sender.js\" (exports, module) {\n        \"use strict\";\n        var { Duplex } = __require(\"stream\");\n        var { randomFillSync } = __require(\"crypto\");\n        var PerMessageDeflate = require_permessage_deflate();\n        var { EMPTY_BUFFER, kWebSocket, NOOP } = require_constants();\n        var { isBlob, isValidStatusCode } = require_validation();\n        var { mask: applyMask, toBuffer } = require_buffer_util();\n        var kByteLength = Symbol(\"kByteLength\");\n        var maskBuffer = Buffer.alloc(4);\n        var RANDOM_POOL_SIZE = 8 * 1024;\n        var randomPool;\n        var randomPoolPointer = RANDOM_POOL_SIZE;\n        var DEFAULT = 0;\n        var DEFLATING = 1;\n        var GET_BLOB_DATA = 2;\n        var Sender2 = class _Sender {\n            /**\n       * Creates a Sender instance.\n       *\n       * @param {Duplex} socket The connection socket\n       * @param {Object} [extensions] An object containing the negotiated extensions\n       * @param {Function} [generateMask] The function used to generate the masking\n       *     key\n       */ constructor(socket, extensions, generateMask){\n                this._extensions = extensions || {};\n                if (generateMask) {\n                    this._generateMask = generateMask;\n                    this._maskBuffer = Buffer.alloc(4);\n                }\n                this._socket = socket;\n                this._firstFragment = true;\n                this._compress = false;\n                this._bufferedBytes = 0;\n                this._queue = [];\n                this._state = DEFAULT;\n                this.onerror = NOOP;\n                this[kWebSocket] = void 0;\n            }\n            /**\n       * Frames a piece of data according to the HyBi WebSocket protocol.\n       *\n       * @param {(Buffer|String)} data The data to frame\n       * @param {Object} options Options object\n       * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n       *     FIN bit\n       * @param {Function} [options.generateMask] The function used to generate the\n       *     masking key\n       * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n       *     `data`\n       * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n       *     key\n       * @param {Number} options.opcode The opcode\n       * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n       *     modified\n       * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n       *     RSV1 bit\n       * @return {(Buffer|String)[]} The framed data\n       * @public\n       */ static frame(data, options) {\n                let mask;\n                let merge = false;\n                let offset = 2;\n                let skipMasking = false;\n                if (options.mask) {\n                    mask = options.maskBuffer || maskBuffer;\n                    if (options.generateMask) {\n                        options.generateMask(mask);\n                    } else {\n                        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n                            if (randomPool === void 0) {\n                                randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n                            }\n                            randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n                            randomPoolPointer = 0;\n                        }\n                        mask[0] = randomPool[randomPoolPointer++];\n                        mask[1] = randomPool[randomPoolPointer++];\n                        mask[2] = randomPool[randomPoolPointer++];\n                        mask[3] = randomPool[randomPoolPointer++];\n                    }\n                    skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n                    offset = 6;\n                }\n                let dataLength;\n                if (typeof data === \"string\") {\n                    if ((!options.mask || skipMasking) && options[kByteLength] !== void 0) {\n                        dataLength = options[kByteLength];\n                    } else {\n                        data = Buffer.from(data);\n                        dataLength = data.length;\n                    }\n                } else {\n                    dataLength = data.length;\n                    merge = options.mask && options.readOnly && !skipMasking;\n                }\n                let payloadLength = dataLength;\n                if (dataLength >= 65536) {\n                    offset += 8;\n                    payloadLength = 127;\n                } else if (dataLength > 125) {\n                    offset += 2;\n                    payloadLength = 126;\n                }\n                const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n                target[0] = options.fin ? options.opcode | 128 : options.opcode;\n                if (options.rsv1) target[0] |= 64;\n                target[1] = payloadLength;\n                if (payloadLength === 126) {\n                    target.writeUInt16BE(dataLength, 2);\n                } else if (payloadLength === 127) {\n                    target[2] = target[3] = 0;\n                    target.writeUIntBE(dataLength, 4, 6);\n                }\n                if (!options.mask) return [\n                    target,\n                    data\n                ];\n                target[1] |= 128;\n                target[offset - 4] = mask[0];\n                target[offset - 3] = mask[1];\n                target[offset - 2] = mask[2];\n                target[offset - 1] = mask[3];\n                if (skipMasking) return [\n                    target,\n                    data\n                ];\n                if (merge) {\n                    applyMask(data, mask, target, offset, dataLength);\n                    return [\n                        target\n                    ];\n                }\n                applyMask(data, mask, data, 0, dataLength);\n                return [\n                    target,\n                    data\n                ];\n            }\n            /**\n       * Sends a close message to the other peer.\n       *\n       * @param {Number} [code] The status code component of the body\n       * @param {(String|Buffer)} [data] The message component of the body\n       * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n       * @param {Function} [cb] Callback\n       * @public\n       */ close(code, data, mask, cb) {\n                let buf;\n                if (code === void 0) {\n                    buf = EMPTY_BUFFER;\n                } else if (typeof code !== \"number\" || !isValidStatusCode(code)) {\n                    throw new TypeError(\"First argument must be a valid error code number\");\n                } else if (data === void 0 || !data.length) {\n                    buf = Buffer.allocUnsafe(2);\n                    buf.writeUInt16BE(code, 0);\n                } else {\n                    const length = Buffer.byteLength(data);\n                    if (length > 123) {\n                        throw new RangeError(\"The message must not be greater than 123 bytes\");\n                    }\n                    buf = Buffer.allocUnsafe(2 + length);\n                    buf.writeUInt16BE(code, 0);\n                    if (typeof data === \"string\") {\n                        buf.write(data, 2);\n                    } else {\n                        buf.set(data, 2);\n                    }\n                }\n                const options = {\n                    [kByteLength]: buf.length,\n                    fin: true,\n                    generateMask: this._generateMask,\n                    mask,\n                    maskBuffer: this._maskBuffer,\n                    opcode: 8,\n                    readOnly: false,\n                    rsv1: false\n                };\n                if (this._state !== DEFAULT) {\n                    this.enqueue([\n                        this.dispatch,\n                        buf,\n                        false,\n                        options,\n                        cb\n                    ]);\n                } else {\n                    this.sendFrame(_Sender.frame(buf, options), cb);\n                }\n            }\n            /**\n       * Sends a ping message to the other peer.\n       *\n       * @param {*} data The message to send\n       * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n       * @param {Function} [cb] Callback\n       * @public\n       */ ping(data, mask, cb) {\n                let byteLength;\n                let readOnly;\n                if (typeof data === \"string\") {\n                    byteLength = Buffer.byteLength(data);\n                    readOnly = false;\n                } else if (isBlob(data)) {\n                    byteLength = data.size;\n                    readOnly = false;\n                } else {\n                    data = toBuffer(data);\n                    byteLength = data.length;\n                    readOnly = toBuffer.readOnly;\n                }\n                if (byteLength > 125) {\n                    throw new RangeError(\"The data size must not be greater than 125 bytes\");\n                }\n                const options = {\n                    [kByteLength]: byteLength,\n                    fin: true,\n                    generateMask: this._generateMask,\n                    mask,\n                    maskBuffer: this._maskBuffer,\n                    opcode: 9,\n                    readOnly,\n                    rsv1: false\n                };\n                if (isBlob(data)) {\n                    if (this._state !== DEFAULT) {\n                        this.enqueue([\n                            this.getBlobData,\n                            data,\n                            false,\n                            options,\n                            cb\n                        ]);\n                    } else {\n                        this.getBlobData(data, false, options, cb);\n                    }\n                } else if (this._state !== DEFAULT) {\n                    this.enqueue([\n                        this.dispatch,\n                        data,\n                        false,\n                        options,\n                        cb\n                    ]);\n                } else {\n                    this.sendFrame(_Sender.frame(data, options), cb);\n                }\n            }\n            /**\n       * Sends a pong message to the other peer.\n       *\n       * @param {*} data The message to send\n       * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n       * @param {Function} [cb] Callback\n       * @public\n       */ pong(data, mask, cb) {\n                let byteLength;\n                let readOnly;\n                if (typeof data === \"string\") {\n                    byteLength = Buffer.byteLength(data);\n                    readOnly = false;\n                } else if (isBlob(data)) {\n                    byteLength = data.size;\n                    readOnly = false;\n                } else {\n                    data = toBuffer(data);\n                    byteLength = data.length;\n                    readOnly = toBuffer.readOnly;\n                }\n                if (byteLength > 125) {\n                    throw new RangeError(\"The data size must not be greater than 125 bytes\");\n                }\n                const options = {\n                    [kByteLength]: byteLength,\n                    fin: true,\n                    generateMask: this._generateMask,\n                    mask,\n                    maskBuffer: this._maskBuffer,\n                    opcode: 10,\n                    readOnly,\n                    rsv1: false\n                };\n                if (isBlob(data)) {\n                    if (this._state !== DEFAULT) {\n                        this.enqueue([\n                            this.getBlobData,\n                            data,\n                            false,\n                            options,\n                            cb\n                        ]);\n                    } else {\n                        this.getBlobData(data, false, options, cb);\n                    }\n                } else if (this._state !== DEFAULT) {\n                    this.enqueue([\n                        this.dispatch,\n                        data,\n                        false,\n                        options,\n                        cb\n                    ]);\n                } else {\n                    this.sendFrame(_Sender.frame(data, options), cb);\n                }\n            }\n            /**\n       * Sends a data message to the other peer.\n       *\n       * @param {*} data The message to send\n       * @param {Object} options Options object\n       * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n       *     or text\n       * @param {Boolean} [options.compress=false] Specifies whether or not to\n       *     compress `data`\n       * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n       *     last one\n       * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n       *     `data`\n       * @param {Function} [cb] Callback\n       * @public\n       */ send(data, options, cb) {\n                const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n                let opcode = options.binary ? 2 : 1;\n                let rsv1 = options.compress;\n                let byteLength;\n                let readOnly;\n                if (typeof data === \"string\") {\n                    byteLength = Buffer.byteLength(data);\n                    readOnly = false;\n                } else if (isBlob(data)) {\n                    byteLength = data.size;\n                    readOnly = false;\n                } else {\n                    data = toBuffer(data);\n                    byteLength = data.length;\n                    readOnly = toBuffer.readOnly;\n                }\n                if (this._firstFragment) {\n                    this._firstFragment = false;\n                    if (rsv1 && perMessageDeflate && perMessageDeflate.params[perMessageDeflate._isServer ? \"server_no_context_takeover\" : \"client_no_context_takeover\"]) {\n                        rsv1 = byteLength >= perMessageDeflate._threshold;\n                    }\n                    this._compress = rsv1;\n                } else {\n                    rsv1 = false;\n                    opcode = 0;\n                }\n                if (options.fin) this._firstFragment = true;\n                const opts = {\n                    [kByteLength]: byteLength,\n                    fin: options.fin,\n                    generateMask: this._generateMask,\n                    mask: options.mask,\n                    maskBuffer: this._maskBuffer,\n                    opcode,\n                    readOnly,\n                    rsv1\n                };\n                if (isBlob(data)) {\n                    if (this._state !== DEFAULT) {\n                        this.enqueue([\n                            this.getBlobData,\n                            data,\n                            this._compress,\n                            opts,\n                            cb\n                        ]);\n                    } else {\n                        this.getBlobData(data, this._compress, opts, cb);\n                    }\n                } else if (this._state !== DEFAULT) {\n                    this.enqueue([\n                        this.dispatch,\n                        data,\n                        this._compress,\n                        opts,\n                        cb\n                    ]);\n                } else {\n                    this.dispatch(data, this._compress, opts, cb);\n                }\n            }\n            /**\n       * Gets the contents of a blob as binary data.\n       *\n       * @param {Blob} blob The blob\n       * @param {Boolean} [compress=false] Specifies whether or not to compress\n       *     the data\n       * @param {Object} options Options object\n       * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n       *     FIN bit\n       * @param {Function} [options.generateMask] The function used to generate the\n       *     masking key\n       * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n       *     `data`\n       * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n       *     key\n       * @param {Number} options.opcode The opcode\n       * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n       *     modified\n       * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n       *     RSV1 bit\n       * @param {Function} [cb] Callback\n       * @private\n       */ getBlobData(blob, compress, options, cb) {\n                this._bufferedBytes += options[kByteLength];\n                this._state = GET_BLOB_DATA;\n                blob.arrayBuffer().then((arrayBuffer)=>{\n                    if (this._socket.destroyed) {\n                        const err = new Error(\"The socket was closed while the blob was being read\");\n                        process.nextTick(callCallbacks, this, err, cb);\n                        return;\n                    }\n                    this._bufferedBytes -= options[kByteLength];\n                    const data = toBuffer(arrayBuffer);\n                    if (!compress) {\n                        this._state = DEFAULT;\n                        this.sendFrame(_Sender.frame(data, options), cb);\n                        this.dequeue();\n                    } else {\n                        this.dispatch(data, compress, options, cb);\n                    }\n                }).catch((err)=>{\n                    process.nextTick(onError, this, err, cb);\n                });\n            }\n            /**\n       * Dispatches a message.\n       *\n       * @param {(Buffer|String)} data The message to send\n       * @param {Boolean} [compress=false] Specifies whether or not to compress\n       *     `data`\n       * @param {Object} options Options object\n       * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n       *     FIN bit\n       * @param {Function} [options.generateMask] The function used to generate the\n       *     masking key\n       * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n       *     `data`\n       * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n       *     key\n       * @param {Number} options.opcode The opcode\n       * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n       *     modified\n       * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n       *     RSV1 bit\n       * @param {Function} [cb] Callback\n       * @private\n       */ dispatch(data, compress, options, cb) {\n                if (!compress) {\n                    this.sendFrame(_Sender.frame(data, options), cb);\n                    return;\n                }\n                const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n                this._bufferedBytes += options[kByteLength];\n                this._state = DEFLATING;\n                perMessageDeflate.compress(data, options.fin, (_, buf)=>{\n                    if (this._socket.destroyed) {\n                        const err = new Error(\"The socket was closed while data was being compressed\");\n                        callCallbacks(this, err, cb);\n                        return;\n                    }\n                    this._bufferedBytes -= options[kByteLength];\n                    this._state = DEFAULT;\n                    options.readOnly = false;\n                    this.sendFrame(_Sender.frame(buf, options), cb);\n                    this.dequeue();\n                });\n            }\n            /**\n       * Executes queued send operations.\n       *\n       * @private\n       */ dequeue() {\n                while(this._state === DEFAULT && this._queue.length){\n                    const params = this._queue.shift();\n                    this._bufferedBytes -= params[3][kByteLength];\n                    Reflect.apply(params[0], this, params.slice(1));\n                }\n            }\n            /**\n       * Enqueues a send operation.\n       *\n       * @param {Array} params Send operation parameters.\n       * @private\n       */ enqueue(params) {\n                this._bufferedBytes += params[3][kByteLength];\n                this._queue.push(params);\n            }\n            /**\n       * Sends a frame.\n       *\n       * @param {Buffer[]} list The frame to send\n       * @param {Function} [cb] Callback\n       * @private\n       */ sendFrame(list, cb) {\n                if (list.length === 2) {\n                    this._socket.cork();\n                    this._socket.write(list[0]);\n                    this._socket.write(list[1], cb);\n                    this._socket.uncork();\n                } else {\n                    this._socket.write(list[0], cb);\n                }\n            }\n        };\n        module.exports = Sender2;\n        function callCallbacks(sender, err, cb) {\n            if (typeof cb === \"function\") cb(err);\n            for(let i = 0; i < sender._queue.length; i++){\n                const params = sender._queue[i];\n                const callback = params[params.length - 1];\n                if (typeof callback === \"function\") callback(err);\n            }\n        }\n        function onError(sender, err, cb) {\n            callCallbacks(sender, err, cb);\n            sender.onerror(err);\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/event-target.js\nvar require_event_target = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/event-target.js\" (exports, module) {\n        \"use strict\";\n        var { kForOnEventAttribute, kListener } = require_constants();\n        var kCode = Symbol(\"kCode\");\n        var kData = Symbol(\"kData\");\n        var kError = Symbol(\"kError\");\n        var kMessage = Symbol(\"kMessage\");\n        var kReason = Symbol(\"kReason\");\n        var kTarget = Symbol(\"kTarget\");\n        var kType = Symbol(\"kType\");\n        var kWasClean = Symbol(\"kWasClean\");\n        var Event = class {\n            /**\n       * Create a new `Event`.\n       *\n       * @param {String} type The name of the event\n       * @throws {TypeError} If the `type` argument is not specified\n       */ constructor(type){\n                this[kTarget] = null;\n                this[kType] = type;\n            }\n            /**\n       * @type {*}\n       */ get target() {\n                return this[kTarget];\n            }\n            /**\n       * @type {String}\n       */ get type() {\n                return this[kType];\n            }\n        };\n        Object.defineProperty(Event.prototype, \"target\", {\n            enumerable: true\n        });\n        Object.defineProperty(Event.prototype, \"type\", {\n            enumerable: true\n        });\n        var CloseEvent = class extends Event {\n            /**\n       * Create a new `CloseEvent`.\n       *\n       * @param {String} type The name of the event\n       * @param {Object} [options] A dictionary object that allows for setting\n       *     attributes via object members of the same name\n       * @param {Number} [options.code=0] The status code explaining why the\n       *     connection was closed\n       * @param {String} [options.reason=''] A human-readable string explaining why\n       *     the connection was closed\n       * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n       *     connection was cleanly closed\n       */ constructor(type, options = {}){\n                super(type);\n                this[kCode] = options.code === void 0 ? 0 : options.code;\n                this[kReason] = options.reason === void 0 ? \"\" : options.reason;\n                this[kWasClean] = options.wasClean === void 0 ? false : options.wasClean;\n            }\n            /**\n       * @type {Number}\n       */ get code() {\n                return this[kCode];\n            }\n            /**\n       * @type {String}\n       */ get reason() {\n                return this[kReason];\n            }\n            /**\n       * @type {Boolean}\n       */ get wasClean() {\n                return this[kWasClean];\n            }\n        };\n        Object.defineProperty(CloseEvent.prototype, \"code\", {\n            enumerable: true\n        });\n        Object.defineProperty(CloseEvent.prototype, \"reason\", {\n            enumerable: true\n        });\n        Object.defineProperty(CloseEvent.prototype, \"wasClean\", {\n            enumerable: true\n        });\n        var ErrorEvent = class extends Event {\n            /**\n       * Create a new `ErrorEvent`.\n       *\n       * @param {String} type The name of the event\n       * @param {Object} [options] A dictionary object that allows for setting\n       *     attributes via object members of the same name\n       * @param {*} [options.error=null] The error that generated this event\n       * @param {String} [options.message=''] The error message\n       */ constructor(type, options = {}){\n                super(type);\n                this[kError] = options.error === void 0 ? null : options.error;\n                this[kMessage] = options.message === void 0 ? \"\" : options.message;\n            }\n            /**\n       * @type {*}\n       */ get error() {\n                return this[kError];\n            }\n            /**\n       * @type {String}\n       */ get message() {\n                return this[kMessage];\n            }\n        };\n        Object.defineProperty(ErrorEvent.prototype, \"error\", {\n            enumerable: true\n        });\n        Object.defineProperty(ErrorEvent.prototype, \"message\", {\n            enumerable: true\n        });\n        var MessageEvent = class extends Event {\n            /**\n       * Create a new `MessageEvent`.\n       *\n       * @param {String} type The name of the event\n       * @param {Object} [options] A dictionary object that allows for setting\n       *     attributes via object members of the same name\n       * @param {*} [options.data=null] The message content\n       */ constructor(type, options = {}){\n                super(type);\n                this[kData] = options.data === void 0 ? null : options.data;\n            }\n            /**\n       * @type {*}\n       */ get data() {\n                return this[kData];\n            }\n        };\n        Object.defineProperty(MessageEvent.prototype, \"data\", {\n            enumerable: true\n        });\n        var EventTarget = {\n            /**\n       * Register an event listener.\n       *\n       * @param {String} type A string representing the event type to listen for\n       * @param {(Function|Object)} handler The listener to add\n       * @param {Object} [options] An options object specifies characteristics about\n       *     the event listener\n       * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n       *     listener should be invoked at most once after being added. If `true`,\n       *     the listener would be automatically removed when invoked.\n       * @public\n       */ addEventListener (type, handler, options = {}) {\n                for (const listener of this.listeners(type)){\n                    if (!options[kForOnEventAttribute] && listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n                        return;\n                    }\n                }\n                let wrapper;\n                if (type === \"message\") {\n                    wrapper = function onMessage(data, isBinary) {\n                        const event = new MessageEvent(\"message\", {\n                            data: isBinary ? data : data.toString()\n                        });\n                        event[kTarget] = this;\n                        callListener(handler, this, event);\n                    };\n                } else if (type === \"close\") {\n                    wrapper = function onClose(code, message) {\n                        const event = new CloseEvent(\"close\", {\n                            code,\n                            reason: message.toString(),\n                            wasClean: this._closeFrameReceived && this._closeFrameSent\n                        });\n                        event[kTarget] = this;\n                        callListener(handler, this, event);\n                    };\n                } else if (type === \"error\") {\n                    wrapper = function onError(error) {\n                        const event = new ErrorEvent(\"error\", {\n                            error,\n                            message: error.message\n                        });\n                        event[kTarget] = this;\n                        callListener(handler, this, event);\n                    };\n                } else if (type === \"open\") {\n                    wrapper = function onOpen() {\n                        const event = new Event(\"open\");\n                        event[kTarget] = this;\n                        callListener(handler, this, event);\n                    };\n                } else {\n                    return;\n                }\n                wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n                wrapper[kListener] = handler;\n                if (options.once) {\n                    this.once(type, wrapper);\n                } else {\n                    this.on(type, wrapper);\n                }\n            },\n            /**\n       * Remove an event listener.\n       *\n       * @param {String} type A string representing the event type to remove\n       * @param {(Function|Object)} handler The listener to remove\n       * @public\n       */ removeEventListener (type, handler) {\n                for (const listener of this.listeners(type)){\n                    if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n                        this.removeListener(type, listener);\n                        break;\n                    }\n                }\n            }\n        };\n        module.exports = {\n            CloseEvent,\n            ErrorEvent,\n            Event,\n            EventTarget,\n            MessageEvent\n        };\n        function callListener(listener, thisArg, event) {\n            if (typeof listener === \"object\" && listener.handleEvent) {\n                listener.handleEvent.call(listener, event);\n            } else {\n                listener.call(thisArg, event);\n            }\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/extension.js\nvar require_extension = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/extension.js\" (exports, module) {\n        \"use strict\";\n        var { tokenChars } = require_validation();\n        function push(dest, name, elem) {\n            if (dest[name] === void 0) dest[name] = [\n                elem\n            ];\n            else dest[name].push(elem);\n        }\n        function parse(header) {\n            const offers = /* @__PURE__ */ Object.create(null);\n            let params = /* @__PURE__ */ Object.create(null);\n            let mustUnescape = false;\n            let isEscaping = false;\n            let inQuotes = false;\n            let extensionName;\n            let paramName;\n            let start = -1;\n            let code = -1;\n            let end = -1;\n            let i = 0;\n            for(; i < header.length; i++){\n                code = header.charCodeAt(i);\n                if (extensionName === void 0) {\n                    if (end === -1 && tokenChars[code] === 1) {\n                        if (start === -1) start = i;\n                    } else if (i !== 0 && (code === 32 || code === 9)) {\n                        if (end === -1 && start !== -1) end = i;\n                    } else if (code === 59 || code === 44) {\n                        if (start === -1) {\n                            throw new SyntaxError(`Unexpected character at index ${i}`);\n                        }\n                        if (end === -1) end = i;\n                        const name = header.slice(start, end);\n                        if (code === 44) {\n                            push(offers, name, params);\n                            params = /* @__PURE__ */ Object.create(null);\n                        } else {\n                            extensionName = name;\n                        }\n                        start = end = -1;\n                    } else {\n                        throw new SyntaxError(`Unexpected character at index ${i}`);\n                    }\n                } else if (paramName === void 0) {\n                    if (end === -1 && tokenChars[code] === 1) {\n                        if (start === -1) start = i;\n                    } else if (code === 32 || code === 9) {\n                        if (end === -1 && start !== -1) end = i;\n                    } else if (code === 59 || code === 44) {\n                        if (start === -1) {\n                            throw new SyntaxError(`Unexpected character at index ${i}`);\n                        }\n                        if (end === -1) end = i;\n                        push(params, header.slice(start, end), true);\n                        if (code === 44) {\n                            push(offers, extensionName, params);\n                            params = /* @__PURE__ */ Object.create(null);\n                            extensionName = void 0;\n                        }\n                        start = end = -1;\n                    } else if (code === 61 && start !== -1 && end === -1) {\n                        paramName = header.slice(start, i);\n                        start = end = -1;\n                    } else {\n                        throw new SyntaxError(`Unexpected character at index ${i}`);\n                    }\n                } else {\n                    if (isEscaping) {\n                        if (tokenChars[code] !== 1) {\n                            throw new SyntaxError(`Unexpected character at index ${i}`);\n                        }\n                        if (start === -1) start = i;\n                        else if (!mustUnescape) mustUnescape = true;\n                        isEscaping = false;\n                    } else if (inQuotes) {\n                        if (tokenChars[code] === 1) {\n                            if (start === -1) start = i;\n                        } else if (code === 34 && start !== -1) {\n                            inQuotes = false;\n                            end = i;\n                        } else if (code === 92) {\n                            isEscaping = true;\n                        } else {\n                            throw new SyntaxError(`Unexpected character at index ${i}`);\n                        }\n                    } else if (code === 34 && header.charCodeAt(i - 1) === 61) {\n                        inQuotes = true;\n                    } else if (end === -1 && tokenChars[code] === 1) {\n                        if (start === -1) start = i;\n                    } else if (start !== -1 && (code === 32 || code === 9)) {\n                        if (end === -1) end = i;\n                    } else if (code === 59 || code === 44) {\n                        if (start === -1) {\n                            throw new SyntaxError(`Unexpected character at index ${i}`);\n                        }\n                        if (end === -1) end = i;\n                        let value = header.slice(start, end);\n                        if (mustUnescape) {\n                            value = value.replace(/\\\\/g, \"\");\n                            mustUnescape = false;\n                        }\n                        push(params, paramName, value);\n                        if (code === 44) {\n                            push(offers, extensionName, params);\n                            params = /* @__PURE__ */ Object.create(null);\n                            extensionName = void 0;\n                        }\n                        paramName = void 0;\n                        start = end = -1;\n                    } else {\n                        throw new SyntaxError(`Unexpected character at index ${i}`);\n                    }\n                }\n            }\n            if (start === -1 || inQuotes || code === 32 || code === 9) {\n                throw new SyntaxError(\"Unexpected end of input\");\n            }\n            if (end === -1) end = i;\n            const token = header.slice(start, end);\n            if (extensionName === void 0) {\n                push(offers, token, params);\n            } else {\n                if (paramName === void 0) {\n                    push(params, token, true);\n                } else if (mustUnescape) {\n                    push(params, paramName, token.replace(/\\\\/g, \"\"));\n                } else {\n                    push(params, paramName, token);\n                }\n                push(offers, extensionName, params);\n            }\n            return offers;\n        }\n        function format(extensions) {\n            return Object.keys(extensions).map((extension)=>{\n                let configurations = extensions[extension];\n                if (!Array.isArray(configurations)) configurations = [\n                    configurations\n                ];\n                return configurations.map((params)=>{\n                    return [\n                        extension\n                    ].concat(Object.keys(params).map((k)=>{\n                        let values = params[k];\n                        if (!Array.isArray(values)) values = [\n                            values\n                        ];\n                        return values.map((v)=>v === true ? k : `${k}=${v}`).join(\"; \");\n                    })).join(\"; \");\n                }).join(\", \");\n            }).join(\", \");\n        }\n        module.exports = {\n            format,\n            parse\n        };\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/websocket.js\nvar require_websocket = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/websocket.js\" (exports, module) {\n        \"use strict\";\n        var EventEmitter = __require(\"events\");\n        var https = __require(\"https\");\n        var http = __require(\"http\");\n        var net = __require(\"net\");\n        var tls = __require(\"tls\");\n        var { randomBytes, createHash } = __require(\"crypto\");\n        var { Duplex, Readable } = __require(\"stream\");\n        var { URL } = __require(\"url\");\n        var PerMessageDeflate = require_permessage_deflate();\n        var Receiver2 = require_receiver();\n        var Sender2 = require_sender();\n        var { isBlob } = require_validation();\n        var { BINARY_TYPES, EMPTY_BUFFER, GUID, kForOnEventAttribute, kListener, kStatusCode, kWebSocket, NOOP } = require_constants();\n        var { EventTarget: { addEventListener, removeEventListener } } = require_event_target();\n        var { format, parse } = require_extension();\n        var { toBuffer } = require_buffer_util();\n        var closeTimeout = 30 * 1e3;\n        var kAborted = Symbol(\"kAborted\");\n        var protocolVersions = [\n            8,\n            13\n        ];\n        var readyStates = [\n            \"CONNECTING\",\n            \"OPEN\",\n            \"CLOSING\",\n            \"CLOSED\"\n        ];\n        var subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n        var WebSocket2 = class _WebSocket extends EventEmitter {\n            /**\n       * Create a new `WebSocket`.\n       *\n       * @param {(String|URL)} address The URL to which to connect\n       * @param {(String|String[])} [protocols] The subprotocols\n       * @param {Object} [options] Connection options\n       */ constructor(address, protocols, options){\n                super();\n                this._binaryType = BINARY_TYPES[0];\n                this._closeCode = 1006;\n                this._closeFrameReceived = false;\n                this._closeFrameSent = false;\n                this._closeMessage = EMPTY_BUFFER;\n                this._closeTimer = null;\n                this._errorEmitted = false;\n                this._extensions = {};\n                this._paused = false;\n                this._protocol = \"\";\n                this._readyState = _WebSocket.CONNECTING;\n                this._receiver = null;\n                this._sender = null;\n                this._socket = null;\n                if (address !== null) {\n                    this._bufferedAmount = 0;\n                    this._isServer = false;\n                    this._redirects = 0;\n                    if (protocols === void 0) {\n                        protocols = [];\n                    } else if (!Array.isArray(protocols)) {\n                        if (typeof protocols === \"object\" && protocols !== null) {\n                            options = protocols;\n                            protocols = [];\n                        } else {\n                            protocols = [\n                                protocols\n                            ];\n                        }\n                    }\n                    initAsClient(this, address, protocols, options);\n                } else {\n                    this._autoPong = options.autoPong;\n                    this._isServer = true;\n                }\n            }\n            /**\n       * For historical reasons, the custom \"nodebuffer\" type is used by the default\n       * instead of \"blob\".\n       *\n       * @type {String}\n       */ get binaryType() {\n                return this._binaryType;\n            }\n            set binaryType(type) {\n                if (!BINARY_TYPES.includes(type)) return;\n                this._binaryType = type;\n                if (this._receiver) this._receiver._binaryType = type;\n            }\n            /**\n       * @type {Number}\n       */ get bufferedAmount() {\n                if (!this._socket) return this._bufferedAmount;\n                return this._socket._writableState.length + this._sender._bufferedBytes;\n            }\n            /**\n       * @type {String}\n       */ get extensions() {\n                return Object.keys(this._extensions).join();\n            }\n            /**\n       * @type {Boolean}\n       */ get isPaused() {\n                return this._paused;\n            }\n            /**\n       * @type {Function}\n       */ /* istanbul ignore next */ get onclose() {\n                return null;\n            }\n            /**\n       * @type {Function}\n       */ /* istanbul ignore next */ get onerror() {\n                return null;\n            }\n            /**\n       * @type {Function}\n       */ /* istanbul ignore next */ get onopen() {\n                return null;\n            }\n            /**\n       * @type {Function}\n       */ /* istanbul ignore next */ get onmessage() {\n                return null;\n            }\n            /**\n       * @type {String}\n       */ get protocol() {\n                return this._protocol;\n            }\n            /**\n       * @type {Number}\n       */ get readyState() {\n                return this._readyState;\n            }\n            /**\n       * @type {String}\n       */ get url() {\n                return this._url;\n            }\n            /**\n       * Set up the socket and the internal resources.\n       *\n       * @param {Duplex} socket The network socket between the server and client\n       * @param {Buffer} head The first packet of the upgraded stream\n       * @param {Object} options Options object\n       * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n       *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n       *     multiple times in the same tick\n       * @param {Function} [options.generateMask] The function used to generate the\n       *     masking key\n       * @param {Number} [options.maxPayload=0] The maximum allowed message size\n       * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n       *     not to skip UTF-8 validation for text and close messages\n       * @private\n       */ setSocket(socket, head, options) {\n                const receiver = new Receiver2({\n                    allowSynchronousEvents: options.allowSynchronousEvents,\n                    binaryType: this.binaryType,\n                    extensions: this._extensions,\n                    isServer: this._isServer,\n                    maxPayload: options.maxPayload,\n                    skipUTF8Validation: options.skipUTF8Validation\n                });\n                const sender = new Sender2(socket, this._extensions, options.generateMask);\n                this._receiver = receiver;\n                this._sender = sender;\n                this._socket = socket;\n                receiver[kWebSocket] = this;\n                sender[kWebSocket] = this;\n                socket[kWebSocket] = this;\n                receiver.on(\"conclude\", receiverOnConclude);\n                receiver.on(\"drain\", receiverOnDrain);\n                receiver.on(\"error\", receiverOnError);\n                receiver.on(\"message\", receiverOnMessage);\n                receiver.on(\"ping\", receiverOnPing);\n                receiver.on(\"pong\", receiverOnPong);\n                sender.onerror = senderOnError;\n                if (socket.setTimeout) socket.setTimeout(0);\n                if (socket.setNoDelay) socket.setNoDelay();\n                if (head.length > 0) socket.unshift(head);\n                socket.on(\"close\", socketOnClose);\n                socket.on(\"data\", socketOnData);\n                socket.on(\"end\", socketOnEnd);\n                socket.on(\"error\", socketOnError);\n                this._readyState = _WebSocket.OPEN;\n                this.emit(\"open\");\n            }\n            /**\n       * Emit the `'close'` event.\n       *\n       * @private\n       */ emitClose() {\n                if (!this._socket) {\n                    this._readyState = _WebSocket.CLOSED;\n                    this.emit(\"close\", this._closeCode, this._closeMessage);\n                    return;\n                }\n                if (this._extensions[PerMessageDeflate.extensionName]) {\n                    this._extensions[PerMessageDeflate.extensionName].cleanup();\n                }\n                this._receiver.removeAllListeners();\n                this._readyState = _WebSocket.CLOSED;\n                this.emit(\"close\", this._closeCode, this._closeMessage);\n            }\n            /**\n       * Start a closing handshake.\n       *\n       *          +----------+   +-----------+   +----------+\n       *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n       *    |     +----------+   +-----------+   +----------+     |\n       *          +----------+   +-----------+         |\n       * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n       *          +----------+   +-----------+   |\n       *    |           |                        |   +---+        |\n       *                +------------------------+-->|fin| - - - -\n       *    |         +---+                      |   +---+\n       *     - - - - -|fin|<---------------------+\n       *              +---+\n       *\n       * @param {Number} [code] Status code explaining why the connection is closing\n       * @param {(String|Buffer)} [data] The reason why the connection is\n       *     closing\n       * @public\n       */ close(code, data) {\n                if (this.readyState === _WebSocket.CLOSED) return;\n                if (this.readyState === _WebSocket.CONNECTING) {\n                    const msg = \"WebSocket was closed before the connection was established\";\n                    abortHandshake(this, this._req, msg);\n                    return;\n                }\n                if (this.readyState === _WebSocket.CLOSING) {\n                    if (this._closeFrameSent && (this._closeFrameReceived || this._receiver._writableState.errorEmitted)) {\n                        this._socket.end();\n                    }\n                    return;\n                }\n                this._readyState = _WebSocket.CLOSING;\n                this._sender.close(code, data, !this._isServer, (err)=>{\n                    if (err) return;\n                    this._closeFrameSent = true;\n                    if (this._closeFrameReceived || this._receiver._writableState.errorEmitted) {\n                        this._socket.end();\n                    }\n                });\n                setCloseTimer(this);\n            }\n            /**\n       * Pause the socket.\n       *\n       * @public\n       */ pause() {\n                if (this.readyState === _WebSocket.CONNECTING || this.readyState === _WebSocket.CLOSED) {\n                    return;\n                }\n                this._paused = true;\n                this._socket.pause();\n            }\n            /**\n       * Send a ping.\n       *\n       * @param {*} [data] The data to send\n       * @param {Boolean} [mask] Indicates whether or not to mask `data`\n       * @param {Function} [cb] Callback which is executed when the ping is sent\n       * @public\n       */ ping(data, mask, cb) {\n                if (this.readyState === _WebSocket.CONNECTING) {\n                    throw new Error(\"WebSocket is not open: readyState 0 (CONNECTING)\");\n                }\n                if (typeof data === \"function\") {\n                    cb = data;\n                    data = mask = void 0;\n                } else if (typeof mask === \"function\") {\n                    cb = mask;\n                    mask = void 0;\n                }\n                if (typeof data === \"number\") data = data.toString();\n                if (this.readyState !== _WebSocket.OPEN) {\n                    sendAfterClose(this, data, cb);\n                    return;\n                }\n                if (mask === void 0) mask = !this._isServer;\n                this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n            }\n            /**\n       * Send a pong.\n       *\n       * @param {*} [data] The data to send\n       * @param {Boolean} [mask] Indicates whether or not to mask `data`\n       * @param {Function} [cb] Callback which is executed when the pong is sent\n       * @public\n       */ pong(data, mask, cb) {\n                if (this.readyState === _WebSocket.CONNECTING) {\n                    throw new Error(\"WebSocket is not open: readyState 0 (CONNECTING)\");\n                }\n                if (typeof data === \"function\") {\n                    cb = data;\n                    data = mask = void 0;\n                } else if (typeof mask === \"function\") {\n                    cb = mask;\n                    mask = void 0;\n                }\n                if (typeof data === \"number\") data = data.toString();\n                if (this.readyState !== _WebSocket.OPEN) {\n                    sendAfterClose(this, data, cb);\n                    return;\n                }\n                if (mask === void 0) mask = !this._isServer;\n                this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n            }\n            /**\n       * Resume the socket.\n       *\n       * @public\n       */ resume() {\n                if (this.readyState === _WebSocket.CONNECTING || this.readyState === _WebSocket.CLOSED) {\n                    return;\n                }\n                this._paused = false;\n                if (!this._receiver._writableState.needDrain) this._socket.resume();\n            }\n            /**\n       * Send a data message.\n       *\n       * @param {*} data The message to send\n       * @param {Object} [options] Options object\n       * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n       *     text\n       * @param {Boolean} [options.compress] Specifies whether or not to compress\n       *     `data`\n       * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n       *     last one\n       * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n       * @param {Function} [cb] Callback which is executed when data is written out\n       * @public\n       */ send(data, options, cb) {\n                if (this.readyState === _WebSocket.CONNECTING) {\n                    throw new Error(\"WebSocket is not open: readyState 0 (CONNECTING)\");\n                }\n                if (typeof options === \"function\") {\n                    cb = options;\n                    options = {};\n                }\n                if (typeof data === \"number\") data = data.toString();\n                if (this.readyState !== _WebSocket.OPEN) {\n                    sendAfterClose(this, data, cb);\n                    return;\n                }\n                const opts = {\n                    binary: typeof data !== \"string\",\n                    mask: !this._isServer,\n                    compress: true,\n                    fin: true,\n                    ...options\n                };\n                if (!this._extensions[PerMessageDeflate.extensionName]) {\n                    opts.compress = false;\n                }\n                this._sender.send(data || EMPTY_BUFFER, opts, cb);\n            }\n            /**\n       * Forcibly close the connection.\n       *\n       * @public\n       */ terminate() {\n                if (this.readyState === _WebSocket.CLOSED) return;\n                if (this.readyState === _WebSocket.CONNECTING) {\n                    const msg = \"WebSocket was closed before the connection was established\";\n                    abortHandshake(this, this._req, msg);\n                    return;\n                }\n                if (this._socket) {\n                    this._readyState = _WebSocket.CLOSING;\n                    this._socket.destroy();\n                }\n            }\n        };\n        Object.defineProperty(WebSocket2, \"CONNECTING\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"CONNECTING\")\n        });\n        Object.defineProperty(WebSocket2.prototype, \"CONNECTING\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"CONNECTING\")\n        });\n        Object.defineProperty(WebSocket2, \"OPEN\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"OPEN\")\n        });\n        Object.defineProperty(WebSocket2.prototype, \"OPEN\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"OPEN\")\n        });\n        Object.defineProperty(WebSocket2, \"CLOSING\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"CLOSING\")\n        });\n        Object.defineProperty(WebSocket2.prototype, \"CLOSING\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"CLOSING\")\n        });\n        Object.defineProperty(WebSocket2, \"CLOSED\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"CLOSED\")\n        });\n        Object.defineProperty(WebSocket2.prototype, \"CLOSED\", {\n            enumerable: true,\n            value: readyStates.indexOf(\"CLOSED\")\n        });\n        [\n            \"binaryType\",\n            \"bufferedAmount\",\n            \"extensions\",\n            \"isPaused\",\n            \"protocol\",\n            \"readyState\",\n            \"url\"\n        ].forEach((property)=>{\n            Object.defineProperty(WebSocket2.prototype, property, {\n                enumerable: true\n            });\n        });\n        [\n            \"open\",\n            \"error\",\n            \"close\",\n            \"message\"\n        ].forEach((method)=>{\n            Object.defineProperty(WebSocket2.prototype, `on${method}`, {\n                enumerable: true,\n                get () {\n                    for (const listener of this.listeners(method)){\n                        if (listener[kForOnEventAttribute]) return listener[kListener];\n                    }\n                    return null;\n                },\n                set (handler) {\n                    for (const listener of this.listeners(method)){\n                        if (listener[kForOnEventAttribute]) {\n                            this.removeListener(method, listener);\n                            break;\n                        }\n                    }\n                    if (typeof handler !== \"function\") return;\n                    this.addEventListener(method, handler, {\n                        [kForOnEventAttribute]: true\n                    });\n                }\n            });\n        });\n        WebSocket2.prototype.addEventListener = addEventListener;\n        WebSocket2.prototype.removeEventListener = removeEventListener;\n        module.exports = WebSocket2;\n        function initAsClient(websocket, address, protocols, options) {\n            const opts = {\n                allowSynchronousEvents: true,\n                autoPong: true,\n                protocolVersion: protocolVersions[1],\n                maxPayload: 100 * 1024 * 1024,\n                skipUTF8Validation: false,\n                perMessageDeflate: true,\n                followRedirects: false,\n                maxRedirects: 10,\n                ...options,\n                socketPath: void 0,\n                hostname: void 0,\n                protocol: void 0,\n                timeout: void 0,\n                method: \"GET\",\n                host: void 0,\n                path: void 0,\n                port: void 0\n            };\n            websocket._autoPong = opts.autoPong;\n            if (!protocolVersions.includes(opts.protocolVersion)) {\n                throw new RangeError(`Unsupported protocol version: ${opts.protocolVersion} (supported versions: ${protocolVersions.join(\", \")})`);\n            }\n            let parsedUrl;\n            if (address instanceof URL) {\n                parsedUrl = address;\n            } else {\n                try {\n                    parsedUrl = new URL(address);\n                } catch (e) {\n                    throw new SyntaxError(`Invalid URL: ${address}`);\n                }\n            }\n            if (parsedUrl.protocol === \"http:\") {\n                parsedUrl.protocol = \"ws:\";\n            } else if (parsedUrl.protocol === \"https:\") {\n                parsedUrl.protocol = \"wss:\";\n            }\n            websocket._url = parsedUrl.href;\n            const isSecure = parsedUrl.protocol === \"wss:\";\n            const isIpcUrl = parsedUrl.protocol === \"ws+unix:\";\n            let invalidUrlMessage;\n            if (parsedUrl.protocol !== \"ws:\" && !isSecure && !isIpcUrl) {\n                invalidUrlMessage = `The URL's protocol must be one of \"ws:\", \"wss:\", \"http:\", \"https\", or \"ws+unix:\"`;\n            } else if (isIpcUrl && !parsedUrl.pathname) {\n                invalidUrlMessage = \"The URL's pathname is empty\";\n            } else if (parsedUrl.hash) {\n                invalidUrlMessage = \"The URL contains a fragment identifier\";\n            }\n            if (invalidUrlMessage) {\n                const err = new SyntaxError(invalidUrlMessage);\n                if (websocket._redirects === 0) {\n                    throw err;\n                } else {\n                    emitErrorAndClose(websocket, err);\n                    return;\n                }\n            }\n            const defaultPort = isSecure ? 443 : 80;\n            const key = randomBytes(16).toString(\"base64\");\n            const request = isSecure ? https.request : http.request;\n            const protocolSet = /* @__PURE__ */ new Set();\n            let perMessageDeflate;\n            opts.createConnection = opts.createConnection || (isSecure ? tlsConnect : netConnect);\n            opts.defaultPort = opts.defaultPort || defaultPort;\n            opts.port = parsedUrl.port || defaultPort;\n            opts.host = parsedUrl.hostname.startsWith(\"[\") ? parsedUrl.hostname.slice(1, -1) : parsedUrl.hostname;\n            opts.headers = {\n                ...opts.headers,\n                \"Sec-WebSocket-Version\": opts.protocolVersion,\n                \"Sec-WebSocket-Key\": key,\n                Connection: \"Upgrade\",\n                Upgrade: \"websocket\"\n            };\n            opts.path = parsedUrl.pathname + parsedUrl.search;\n            opts.timeout = opts.handshakeTimeout;\n            if (opts.perMessageDeflate) {\n                perMessageDeflate = new PerMessageDeflate(opts.perMessageDeflate !== true ? opts.perMessageDeflate : {}, false, opts.maxPayload);\n                opts.headers[\"Sec-WebSocket-Extensions\"] = format({\n                    [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n                });\n            }\n            if (protocols.length) {\n                for (const protocol of protocols){\n                    if (typeof protocol !== \"string\" || !subprotocolRegex.test(protocol) || protocolSet.has(protocol)) {\n                        throw new SyntaxError(\"An invalid or duplicated subprotocol was specified\");\n                    }\n                    protocolSet.add(protocol);\n                }\n                opts.headers[\"Sec-WebSocket-Protocol\"] = protocols.join(\",\");\n            }\n            if (opts.origin) {\n                if (opts.protocolVersion < 13) {\n                    opts.headers[\"Sec-WebSocket-Origin\"] = opts.origin;\n                } else {\n                    opts.headers.Origin = opts.origin;\n                }\n            }\n            if (parsedUrl.username || parsedUrl.password) {\n                opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n            }\n            if (isIpcUrl) {\n                const parts = opts.path.split(\":\");\n                opts.socketPath = parts[0];\n                opts.path = parts[1];\n            }\n            let req;\n            if (opts.followRedirects) {\n                if (websocket._redirects === 0) {\n                    websocket._originalIpc = isIpcUrl;\n                    websocket._originalSecure = isSecure;\n                    websocket._originalHostOrSocketPath = isIpcUrl ? opts.socketPath : parsedUrl.host;\n                    const headers = options && options.headers;\n                    options = {\n                        ...options,\n                        headers: {}\n                    };\n                    if (headers) {\n                        for (const [key2, value] of Object.entries(headers)){\n                            options.headers[key2.toLowerCase()] = value;\n                        }\n                    }\n                } else if (websocket.listenerCount(\"redirect\") === 0) {\n                    const isSameHost = isIpcUrl ? websocket._originalIpc ? opts.socketPath === websocket._originalHostOrSocketPath : false : websocket._originalIpc ? false : parsedUrl.host === websocket._originalHostOrSocketPath;\n                    if (!isSameHost || websocket._originalSecure && !isSecure) {\n                        delete opts.headers.authorization;\n                        delete opts.headers.cookie;\n                        if (!isSameHost) delete opts.headers.host;\n                        opts.auth = void 0;\n                    }\n                }\n                if (opts.auth && !options.headers.authorization) {\n                    options.headers.authorization = \"Basic \" + Buffer.from(opts.auth).toString(\"base64\");\n                }\n                req = websocket._req = request(opts);\n                if (websocket._redirects) {\n                    websocket.emit(\"redirect\", websocket.url, req);\n                }\n            } else {\n                req = websocket._req = request(opts);\n            }\n            if (opts.timeout) {\n                req.on(\"timeout\", ()=>{\n                    abortHandshake(websocket, req, \"Opening handshake has timed out\");\n                });\n            }\n            req.on(\"error\", (err)=>{\n                if (req === null || req[kAborted]) return;\n                req = websocket._req = null;\n                emitErrorAndClose(websocket, err);\n            });\n            req.on(\"response\", (res)=>{\n                const location = res.headers.location;\n                const statusCode = res.statusCode;\n                if (location && opts.followRedirects && statusCode >= 300 && statusCode < 400) {\n                    if (++websocket._redirects > opts.maxRedirects) {\n                        abortHandshake(websocket, req, \"Maximum redirects exceeded\");\n                        return;\n                    }\n                    req.abort();\n                    let addr;\n                    try {\n                        addr = new URL(location, address);\n                    } catch (e) {\n                        const err = new SyntaxError(`Invalid URL: ${location}`);\n                        emitErrorAndClose(websocket, err);\n                        return;\n                    }\n                    initAsClient(websocket, addr, protocols, options);\n                } else if (!websocket.emit(\"unexpected-response\", req, res)) {\n                    abortHandshake(websocket, req, `Unexpected server response: ${res.statusCode}`);\n                }\n            });\n            req.on(\"upgrade\", (res, socket, head)=>{\n                websocket.emit(\"upgrade\", res);\n                if (websocket.readyState !== WebSocket2.CONNECTING) return;\n                req = websocket._req = null;\n                const upgrade = res.headers.upgrade;\n                if (upgrade === void 0 || upgrade.toLowerCase() !== \"websocket\") {\n                    abortHandshake(websocket, socket, \"Invalid Upgrade header\");\n                    return;\n                }\n                const digest = createHash(\"sha1\").update(key + GUID).digest(\"base64\");\n                if (res.headers[\"sec-websocket-accept\"] !== digest) {\n                    abortHandshake(websocket, socket, \"Invalid Sec-WebSocket-Accept header\");\n                    return;\n                }\n                const serverProt = res.headers[\"sec-websocket-protocol\"];\n                let protError;\n                if (serverProt !== void 0) {\n                    if (!protocolSet.size) {\n                        protError = \"Server sent a subprotocol but none was requested\";\n                    } else if (!protocolSet.has(serverProt)) {\n                        protError = \"Server sent an invalid subprotocol\";\n                    }\n                } else if (protocolSet.size) {\n                    protError = \"Server sent no subprotocol\";\n                }\n                if (protError) {\n                    abortHandshake(websocket, socket, protError);\n                    return;\n                }\n                if (serverProt) websocket._protocol = serverProt;\n                const secWebSocketExtensions = res.headers[\"sec-websocket-extensions\"];\n                if (secWebSocketExtensions !== void 0) {\n                    if (!perMessageDeflate) {\n                        const message = \"Server sent a Sec-WebSocket-Extensions header but no extension was requested\";\n                        abortHandshake(websocket, socket, message);\n                        return;\n                    }\n                    let extensions;\n                    try {\n                        extensions = parse(secWebSocketExtensions);\n                    } catch (err) {\n                        const message = \"Invalid Sec-WebSocket-Extensions header\";\n                        abortHandshake(websocket, socket, message);\n                        return;\n                    }\n                    const extensionNames = Object.keys(extensions);\n                    if (extensionNames.length !== 1 || extensionNames[0] !== PerMessageDeflate.extensionName) {\n                        const message = \"Server indicated an extension that was not requested\";\n                        abortHandshake(websocket, socket, message);\n                        return;\n                    }\n                    try {\n                        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n                    } catch (err) {\n                        const message = \"Invalid Sec-WebSocket-Extensions header\";\n                        abortHandshake(websocket, socket, message);\n                        return;\n                    }\n                    websocket._extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n                }\n                websocket.setSocket(socket, head, {\n                    allowSynchronousEvents: opts.allowSynchronousEvents,\n                    generateMask: opts.generateMask,\n                    maxPayload: opts.maxPayload,\n                    skipUTF8Validation: opts.skipUTF8Validation\n                });\n            });\n            if (opts.finishRequest) {\n                opts.finishRequest(req, websocket);\n            } else {\n                req.end();\n            }\n        }\n        function emitErrorAndClose(websocket, err) {\n            websocket._readyState = WebSocket2.CLOSING;\n            websocket._errorEmitted = true;\n            websocket.emit(\"error\", err);\n            websocket.emitClose();\n        }\n        function netConnect(options) {\n            options.path = options.socketPath;\n            return net.connect(options);\n        }\n        function tlsConnect(options) {\n            options.path = void 0;\n            if (!options.servername && options.servername !== \"\") {\n                options.servername = net.isIP(options.host) ? \"\" : options.host;\n            }\n            return tls.connect(options);\n        }\n        function abortHandshake(websocket, stream, message) {\n            websocket._readyState = WebSocket2.CLOSING;\n            const err = new Error(message);\n            Error.captureStackTrace(err, abortHandshake);\n            if (stream.setHeader) {\n                stream[kAborted] = true;\n                stream.abort();\n                if (stream.socket && !stream.socket.destroyed) {\n                    stream.socket.destroy();\n                }\n                process.nextTick(emitErrorAndClose, websocket, err);\n            } else {\n                stream.destroy(err);\n                stream.once(\"error\", websocket.emit.bind(websocket, \"error\"));\n                stream.once(\"close\", websocket.emitClose.bind(websocket));\n            }\n        }\n        function sendAfterClose(websocket, data, cb) {\n            if (data) {\n                const length = isBlob(data) ? data.size : toBuffer(data).length;\n                if (websocket._socket) websocket._sender._bufferedBytes += length;\n                else websocket._bufferedAmount += length;\n            }\n            if (cb) {\n                const err = new Error(`WebSocket is not open: readyState ${websocket.readyState} (${readyStates[websocket.readyState]})`);\n                process.nextTick(cb, err);\n            }\n        }\n        function receiverOnConclude(code, reason) {\n            const websocket = this[kWebSocket];\n            websocket._closeFrameReceived = true;\n            websocket._closeMessage = reason;\n            websocket._closeCode = code;\n            if (websocket._socket[kWebSocket] === void 0) return;\n            websocket._socket.removeListener(\"data\", socketOnData);\n            process.nextTick(resume, websocket._socket);\n            if (code === 1005) websocket.close();\n            else websocket.close(code, reason);\n        }\n        function receiverOnDrain() {\n            const websocket = this[kWebSocket];\n            if (!websocket.isPaused) websocket._socket.resume();\n        }\n        function receiverOnError(err) {\n            const websocket = this[kWebSocket];\n            if (websocket._socket[kWebSocket] !== void 0) {\n                websocket._socket.removeListener(\"data\", socketOnData);\n                process.nextTick(resume, websocket._socket);\n                websocket.close(err[kStatusCode]);\n            }\n            if (!websocket._errorEmitted) {\n                websocket._errorEmitted = true;\n                websocket.emit(\"error\", err);\n            }\n        }\n        function receiverOnFinish() {\n            this[kWebSocket].emitClose();\n        }\n        function receiverOnMessage(data, isBinary) {\n            this[kWebSocket].emit(\"message\", data, isBinary);\n        }\n        function receiverOnPing(data) {\n            const websocket = this[kWebSocket];\n            if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n            websocket.emit(\"ping\", data);\n        }\n        function receiverOnPong(data) {\n            this[kWebSocket].emit(\"pong\", data);\n        }\n        function resume(stream) {\n            stream.resume();\n        }\n        function senderOnError(err) {\n            const websocket = this[kWebSocket];\n            if (websocket.readyState === WebSocket2.CLOSED) return;\n            if (websocket.readyState === WebSocket2.OPEN) {\n                websocket._readyState = WebSocket2.CLOSING;\n                setCloseTimer(websocket);\n            }\n            this._socket.end();\n            if (!websocket._errorEmitted) {\n                websocket._errorEmitted = true;\n                websocket.emit(\"error\", err);\n            }\n        }\n        function setCloseTimer(websocket) {\n            websocket._closeTimer = setTimeout(websocket._socket.destroy.bind(websocket._socket), closeTimeout);\n        }\n        function socketOnClose() {\n            const websocket = this[kWebSocket];\n            this.removeListener(\"close\", socketOnClose);\n            this.removeListener(\"data\", socketOnData);\n            this.removeListener(\"end\", socketOnEnd);\n            websocket._readyState = WebSocket2.CLOSING;\n            let chunk;\n            if (!this._readableState.endEmitted && !websocket._closeFrameReceived && !websocket._receiver._writableState.errorEmitted && (chunk = websocket._socket.read()) !== null) {\n                websocket._receiver.write(chunk);\n            }\n            websocket._receiver.end();\n            this[kWebSocket] = void 0;\n            clearTimeout(websocket._closeTimer);\n            if (websocket._receiver._writableState.finished || websocket._receiver._writableState.errorEmitted) {\n                websocket.emitClose();\n            } else {\n                websocket._receiver.on(\"error\", receiverOnFinish);\n                websocket._receiver.on(\"finish\", receiverOnFinish);\n            }\n        }\n        function socketOnData(chunk) {\n            if (!this[kWebSocket]._receiver.write(chunk)) {\n                this.pause();\n            }\n        }\n        function socketOnEnd() {\n            const websocket = this[kWebSocket];\n            websocket._readyState = WebSocket2.CLOSING;\n            websocket._receiver.end();\n            this.end();\n        }\n        function socketOnError() {\n            const websocket = this[kWebSocket];\n            this.removeListener(\"error\", socketOnError);\n            this.on(\"error\", NOOP);\n            if (websocket) {\n                websocket._readyState = WebSocket2.CLOSING;\n                this.destroy();\n            }\n        }\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/subprotocol.js\nvar require_subprotocol = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/subprotocol.js\" (exports, module) {\n        \"use strict\";\n        var { tokenChars } = require_validation();\n        function parse(header) {\n            const protocols = /* @__PURE__ */ new Set();\n            let start = -1;\n            let end = -1;\n            let i = 0;\n            for(i; i < header.length; i++){\n                const code = header.charCodeAt(i);\n                if (end === -1 && tokenChars[code] === 1) {\n                    if (start === -1) start = i;\n                } else if (i !== 0 && (code === 32 || code === 9)) {\n                    if (end === -1 && start !== -1) end = i;\n                } else if (code === 44) {\n                    if (start === -1) {\n                        throw new SyntaxError(`Unexpected character at index ${i}`);\n                    }\n                    if (end === -1) end = i;\n                    const protocol2 = header.slice(start, end);\n                    if (protocols.has(protocol2)) {\n                        throw new SyntaxError(`The \"${protocol2}\" subprotocol is duplicated`);\n                    }\n                    protocols.add(protocol2);\n                    start = end = -1;\n                } else {\n                    throw new SyntaxError(`Unexpected character at index ${i}`);\n                }\n            }\n            if (start === -1 || end !== -1) {\n                throw new SyntaxError(\"Unexpected end of input\");\n            }\n            const protocol = header.slice(start, i);\n            if (protocols.has(protocol)) {\n                throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n            }\n            protocols.add(protocol);\n            return protocols;\n        }\n        module.exports = {\n            parse\n        };\n    }\n});\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/websocket-server.js\nvar require_websocket_server = __commonJS({\n    \"../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/lib/websocket-server.js\" (exports, module) {\n        \"use strict\";\n        var EventEmitter = __require(\"events\");\n        var http = __require(\"http\");\n        var { Duplex } = __require(\"stream\");\n        var { createHash } = __require(\"crypto\");\n        var extension = require_extension();\n        var PerMessageDeflate = require_permessage_deflate();\n        var subprotocol = require_subprotocol();\n        var WebSocket2 = require_websocket();\n        var { GUID, kWebSocket } = require_constants();\n        var keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n        var RUNNING = 0;\n        var CLOSING = 1;\n        var CLOSED = 2;\n        var WebSocketServer2 = class extends EventEmitter {\n            /**\n       * Create a `WebSocketServer` instance.\n       *\n       * @param {Object} options Configuration options\n       * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n       *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n       *     multiple times in the same tick\n       * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n       *     automatically send a pong in response to a ping\n       * @param {Number} [options.backlog=511] The maximum length of the queue of\n       *     pending connections\n       * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n       *     track clients\n       * @param {Function} [options.handleProtocols] A hook to handle protocols\n       * @param {String} [options.host] The hostname where to bind the server\n       * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n       *     size\n       * @param {Boolean} [options.noServer=false] Enable no server mode\n       * @param {String} [options.path] Accept only connections matching this path\n       * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n       *     permessage-deflate\n       * @param {Number} [options.port] The port where to bind the server\n       * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n       *     server to use\n       * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n       *     not to skip UTF-8 validation for text and close messages\n       * @param {Function} [options.verifyClient] A hook to reject connections\n       * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n       *     class to use. It must be the `WebSocket` class or class that extends it\n       * @param {Function} [callback] A listener for the `listening` event\n       */ constructor(options, callback){\n                super();\n                options = {\n                    allowSynchronousEvents: true,\n                    autoPong: true,\n                    maxPayload: 100 * 1024 * 1024,\n                    skipUTF8Validation: false,\n                    perMessageDeflate: false,\n                    handleProtocols: null,\n                    clientTracking: true,\n                    verifyClient: null,\n                    noServer: false,\n                    backlog: null,\n                    // use default (511 as implemented in net.js)\n                    server: null,\n                    host: null,\n                    path: null,\n                    port: null,\n                    WebSocket: WebSocket2,\n                    ...options\n                };\n                if (options.port == null && !options.server && !options.noServer || options.port != null && (options.server || options.noServer) || options.server && options.noServer) {\n                    throw new TypeError('One and only one of the \"port\", \"server\", or \"noServer\" options must be specified');\n                }\n                if (options.port != null) {\n                    this._server = http.createServer((req, res)=>{\n                        const body = http.STATUS_CODES[426];\n                        res.writeHead(426, {\n                            \"Content-Length\": body.length,\n                            \"Content-Type\": \"text/plain\"\n                        });\n                        res.end(body);\n                    });\n                    this._server.listen(options.port, options.host, options.backlog, callback);\n                } else if (options.server) {\n                    this._server = options.server;\n                }\n                if (this._server) {\n                    const emitConnection = this.emit.bind(this, \"connection\");\n                    this._removeListeners = addListeners(this._server, {\n                        listening: this.emit.bind(this, \"listening\"),\n                        error: this.emit.bind(this, \"error\"),\n                        upgrade: (req, socket, head)=>{\n                            this.handleUpgrade(req, socket, head, emitConnection);\n                        }\n                    });\n                }\n                if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n                if (options.clientTracking) {\n                    this.clients = /* @__PURE__ */ new Set();\n                    this._shouldEmitClose = false;\n                }\n                this.options = options;\n                this._state = RUNNING;\n            }\n            /**\n       * Returns the bound address, the address family name, and port of the server\n       * as reported by the operating system if listening on an IP socket.\n       * If the server is listening on a pipe or UNIX domain socket, the name is\n       * returned as a string.\n       *\n       * @return {(Object|String|null)} The address of the server\n       * @public\n       */ address() {\n                if (this.options.noServer) {\n                    throw new Error('The server is operating in \"noServer\" mode');\n                }\n                if (!this._server) return null;\n                return this._server.address();\n            }\n            /**\n       * Stop the server from accepting new connections and emit the `'close'` event\n       * when all existing connections are closed.\n       *\n       * @param {Function} [cb] A one-time listener for the `'close'` event\n       * @public\n       */ close(cb) {\n                if (this._state === CLOSED) {\n                    if (cb) {\n                        this.once(\"close\", ()=>{\n                            cb(new Error(\"The server is not running\"));\n                        });\n                    }\n                    process.nextTick(emitClose, this);\n                    return;\n                }\n                if (cb) this.once(\"close\", cb);\n                if (this._state === CLOSING) return;\n                this._state = CLOSING;\n                if (this.options.noServer || this.options.server) {\n                    if (this._server) {\n                        this._removeListeners();\n                        this._removeListeners = this._server = null;\n                    }\n                    if (this.clients) {\n                        if (!this.clients.size) {\n                            process.nextTick(emitClose, this);\n                        } else {\n                            this._shouldEmitClose = true;\n                        }\n                    } else {\n                        process.nextTick(emitClose, this);\n                    }\n                } else {\n                    const server = this._server;\n                    this._removeListeners();\n                    this._removeListeners = this._server = null;\n                    server.close(()=>{\n                        emitClose(this);\n                    });\n                }\n            }\n            /**\n       * See if a given request should be handled by this server instance.\n       *\n       * @param {http.IncomingMessage} req Request object to inspect\n       * @return {Boolean} `true` if the request is valid, else `false`\n       * @public\n       */ shouldHandle(req) {\n                if (this.options.path) {\n                    const index = req.url.indexOf(\"?\");\n                    const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n                    if (pathname !== this.options.path) return false;\n                }\n                return true;\n            }\n            /**\n       * Handle a HTTP Upgrade request.\n       *\n       * @param {http.IncomingMessage} req The request object\n       * @param {Duplex} socket The network socket between the server and client\n       * @param {Buffer} head The first packet of the upgraded stream\n       * @param {Function} cb Callback\n       * @public\n       */ handleUpgrade(req, socket, head, cb) {\n                socket.on(\"error\", socketOnError);\n                const key = req.headers[\"sec-websocket-key\"];\n                const upgrade = req.headers.upgrade;\n                const version = +req.headers[\"sec-websocket-version\"];\n                if (req.method !== \"GET\") {\n                    const message = \"Invalid HTTP method\";\n                    abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n                    return;\n                }\n                if (upgrade === void 0 || upgrade.toLowerCase() !== \"websocket\") {\n                    const message = \"Invalid Upgrade header\";\n                    abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n                    return;\n                }\n                if (key === void 0 || !keyRegex.test(key)) {\n                    const message = \"Missing or invalid Sec-WebSocket-Key header\";\n                    abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n                    return;\n                }\n                if (version !== 8 && version !== 13) {\n                    const message = \"Missing or invalid Sec-WebSocket-Version header\";\n                    abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n                    return;\n                }\n                if (!this.shouldHandle(req)) {\n                    abortHandshake(socket, 400);\n                    return;\n                }\n                const secWebSocketProtocol = req.headers[\"sec-websocket-protocol\"];\n                let protocols = /* @__PURE__ */ new Set();\n                if (secWebSocketProtocol !== void 0) {\n                    try {\n                        protocols = subprotocol.parse(secWebSocketProtocol);\n                    } catch (err) {\n                        const message = \"Invalid Sec-WebSocket-Protocol header\";\n                        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n                        return;\n                    }\n                }\n                const secWebSocketExtensions = req.headers[\"sec-websocket-extensions\"];\n                const extensions = {};\n                if (this.options.perMessageDeflate && secWebSocketExtensions !== void 0) {\n                    const perMessageDeflate = new PerMessageDeflate(this.options.perMessageDeflate, true, this.options.maxPayload);\n                    try {\n                        const offers = extension.parse(secWebSocketExtensions);\n                        if (offers[PerMessageDeflate.extensionName]) {\n                            perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n                            extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n                        }\n                    } catch (err) {\n                        const message = \"Invalid or unacceptable Sec-WebSocket-Extensions header\";\n                        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n                        return;\n                    }\n                }\n                if (this.options.verifyClient) {\n                    const info = {\n                        origin: req.headers[`${version === 8 ? \"sec-websocket-origin\" : \"origin\"}`],\n                        secure: !!(req.socket.authorized || req.socket.encrypted),\n                        req\n                    };\n                    if (this.options.verifyClient.length === 2) {\n                        this.options.verifyClient(info, (verified, code, message, headers)=>{\n                            if (!verified) {\n                                return abortHandshake(socket, code || 401, message, headers);\n                            }\n                            this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n                        });\n                        return;\n                    }\n                    if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n                }\n                this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n            }\n            /**\n       * Upgrade the connection to WebSocket.\n       *\n       * @param {Object} extensions The accepted extensions\n       * @param {String} key The value of the `Sec-WebSocket-Key` header\n       * @param {Set} protocols The subprotocols\n       * @param {http.IncomingMessage} req The request object\n       * @param {Duplex} socket The network socket between the server and client\n       * @param {Buffer} head The first packet of the upgraded stream\n       * @param {Function} cb Callback\n       * @throws {Error} If called more than once with the same socket\n       * @private\n       */ completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n                if (!socket.readable || !socket.writable) return socket.destroy();\n                if (socket[kWebSocket]) {\n                    throw new Error(\"server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration\");\n                }\n                if (this._state > RUNNING) return abortHandshake(socket, 503);\n                const digest = createHash(\"sha1\").update(key + GUID).digest(\"base64\");\n                const headers = [\n                    \"HTTP/1.1 101 Switching Protocols\",\n                    \"Upgrade: websocket\",\n                    \"Connection: Upgrade\",\n                    `Sec-WebSocket-Accept: ${digest}`\n                ];\n                const ws = new this.options.WebSocket(null, void 0, this.options);\n                if (protocols.size) {\n                    const protocol = this.options.handleProtocols ? this.options.handleProtocols(protocols, req) : protocols.values().next().value;\n                    if (protocol) {\n                        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n                        ws._protocol = protocol;\n                    }\n                }\n                if (extensions[PerMessageDeflate.extensionName]) {\n                    const params = extensions[PerMessageDeflate.extensionName].params;\n                    const value = extension.format({\n                        [PerMessageDeflate.extensionName]: [\n                            params\n                        ]\n                    });\n                    headers.push(`Sec-WebSocket-Extensions: ${value}`);\n                    ws._extensions = extensions;\n                }\n                this.emit(\"headers\", headers, req);\n                socket.write(headers.concat(\"\\r\\n\").join(\"\\r\\n\"));\n                socket.removeListener(\"error\", socketOnError);\n                ws.setSocket(socket, head, {\n                    allowSynchronousEvents: this.options.allowSynchronousEvents,\n                    maxPayload: this.options.maxPayload,\n                    skipUTF8Validation: this.options.skipUTF8Validation\n                });\n                if (this.clients) {\n                    this.clients.add(ws);\n                    ws.on(\"close\", ()=>{\n                        this.clients.delete(ws);\n                        if (this._shouldEmitClose && !this.clients.size) {\n                            process.nextTick(emitClose, this);\n                        }\n                    });\n                }\n                cb(ws, req);\n            }\n        };\n        module.exports = WebSocketServer2;\n        function addListeners(server, map) {\n            for (const event of Object.keys(map))server.on(event, map[event]);\n            return function removeListeners() {\n                for (const event of Object.keys(map)){\n                    server.removeListener(event, map[event]);\n                }\n            };\n        }\n        function emitClose(server) {\n            server._state = CLOSED;\n            server.emit(\"close\");\n        }\n        function socketOnError() {\n            this.destroy();\n        }\n        function abortHandshake(socket, code, message, headers) {\n            message = message || http.STATUS_CODES[code];\n            headers = {\n                Connection: \"close\",\n                \"Content-Type\": \"text/html\",\n                \"Content-Length\": Buffer.byteLength(message),\n                ...headers\n            };\n            socket.once(\"finish\", socket.destroy);\n            socket.end(`HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\n` + Object.keys(headers).map((h)=>`${h}: ${headers[h]}`).join(\"\\r\\n\") + \"\\r\\n\\r\\n\" + message);\n        }\n        function abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n            if (server.listenerCount(\"wsClientError\")) {\n                const err = new Error(message);\n                Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n                server.emit(\"wsClientError\", err, socket, req);\n            } else {\n                abortHandshake(socket, code, message);\n            }\n        }\n    }\n});\n// src/browser/simple_client-node.ts\n\n// ../common/temp/node_modules/.pnpm/ws@8.18.0_bufferutil@4.0.9/node_modules/ws/wrapper.mjs\nvar import_stream = __toESM(require_stream(), 1);\nvar import_receiver = __toESM(require_receiver(), 1);\nvar import_sender = __toESM(require_sender(), 1);\nvar import_websocket = __toESM(require_websocket(), 1);\nvar import_websocket_server = __toESM(require_websocket_server(), 1);\nvar wrapper_default = import_websocket.default;\n// src/browser/simple_client-node.ts\nvar nodeWebSocket = wrapper_default;\n(0,_simple_client_js__WEBPACK_IMPORTED_MODULE_2__.setDefaultWebSocketConstructor)(nodeWebSocket);\n //# sourceMappingURL=simple_client-node.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc2ltcGxlX2NsaWVudC1ub2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0lBQUE7UUFBQTtRQUVBLElBQU0sRUFBRSxPQUFPLElBQUksVUFBUSxRQUFRO1FBUW5DLFNBQVMsVUFBVSxRQUFRO1lBQ3pCLE9BQU8sS0FBSyxPQUFPO1FBQ3JCO1FBT0EsU0FBUyxjQUFjO1lBQ3JCLElBQUksQ0FBQyxLQUFLLGFBQWEsS0FBSyxlQUFlLFVBQVU7Z0JBQ25ELEtBQUssUUFBUTtZQUNmO1FBQ0Y7UUFRQSxTQUFTLGNBQWMsS0FBSztZQUMxQixLQUFLLGVBQWUsU0FBUyxhQUFhO1lBQzFDLEtBQUssUUFBUTtZQUNiLElBQUksS0FBSyxjQUFjLE9BQU8sTUFBTSxHQUFHO2dCQUVyQyxLQUFLLEtBQUssU0FBUyxHQUFHO1lBQ3hCO1FBQ0Y7UUFVQSxTQUFTQSx1QkFBc0IsSUFBSSxTQUFTO1lBQzFDLElBQUkscUJBQXFCO1lBRXpCLE1BQU0sU0FBUyxJQUFJLE9BQU87Z0JBQ3hCLEdBQUc7Z0JBQ0gsYUFBYTtnQkFDYixXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osb0JBQW9CO1lBQ3RCLENBQUM7WUFFRCxHQUFHLEdBQUcsV0FBVyxTQUFTLFFBQVEsS0FBSyxVQUFVO2dCQUMvQyxNQUFNLE9BQ0osQ0FBQyxZQUFZLE9BQU8sZUFBZSxhQUFhLElBQUksU0FBUyxJQUFJO2dCQUVuRSxJQUFJLENBQUMsT0FBTyxLQUFLLElBQUksRUFBRyxJQUFHLE1BQU07WUFDbkMsQ0FBQztZQUVELEdBQUcsS0FBSyxTQUFTLFNBQVMsTUFBTSxLQUFLO2dCQUNuQyxJQUFJLE9BQU8sVUFBVztnQkFXdEIscUJBQXFCO2dCQUNyQixPQUFPLFFBQVEsR0FBRztZQUNwQixDQUFDO1lBRUQsR0FBRyxLQUFLLFNBQVMsU0FBUyxRQUFRO2dCQUNoQyxJ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QUFBQTs7QURDZixJQUFNLGdCQUFnQjtBQUV0QixpRkFBOEIsQ0FBQyxhQUFhIiwic291cmNlcyI6WyIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvc3RyZWFtLmpzIiwiL2NvbW1vbi90ZW1wL25vZGVfbW9kdWxlcy8ucG5wbS93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOS9ub2RlX21vZHVsZXMvd3MvbGliL2NvbnN0YW50cy5qcyIsIi9jb21tb24vdGVtcC9ub2RlX21vZHVsZXMvLnBucG0vbm9kZS1neXAtYnVpbGRANC44LjQvbm9kZV9tb2R1bGVzL25vZGUtZ3lwLWJ1aWxkL25vZGUtZ3lwLWJ1aWxkLmpzIiwiL2NvbW1vbi90ZW1wL25vZGVfbW9kdWxlcy8ucG5wbS9ub2RlLWd5cC1idWlsZEA0LjguNC9ub2RlX21vZHVsZXMvbm9kZS1neXAtYnVpbGQvaW5kZXguanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL2J1ZmZlcnV0aWxANC4wLjkvbm9kZV9tb2R1bGVzL2J1ZmZlcnV0aWwvZmFsbGJhY2suanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL2J1ZmZlcnV0aWxANC4wLjkvbm9kZV9tb2R1bGVzL2J1ZmZlcnV0aWwvaW5kZXguanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvYnVmZmVyLXV0aWwuanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvbGltaXRlci5qcyIsIi9jb21tb24vdGVtcC9ub2RlX21vZHVsZXMvLnBucG0vd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjkvbm9kZV9tb2R1bGVzL3dzL2xpYi9wZXJtZXNzYWdlLWRlZmxhdGUuanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvdmFsaWRhdGlvbi5qcyIsIi9jb21tb24vdGVtcC9ub2RlX21vZHVsZXMvLnBucG0vd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjkvbm9kZV9tb2R1bGVzL3dzL2xpYi9yZWNlaXZlci5qcyIsIi9jb21tb24vdGVtcC9ub2RlX21vZHVsZXMvLnBucG0vd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjkvbm9kZV9tb2R1bGVzL3dzL2xpYi9zZW5kZXIuanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvZXZlbnQtdGFyZ2V0LmpzIiwiL2NvbW1vbi90ZW1wL25vZGVfbW9kdWxlcy8ucG5wbS93c0A4LjE4LjBfYnVmZmVydXRpbEA0LjAuOS9ub2RlX21vZHVsZXMvd3MvbGliL2V4dGVuc2lvbi5qcyIsIi9jb21tb24vdGVtcC9ub2RlX21vZHVsZXMvLnBucG0vd3NAOC4xOC4wX2J1ZmZlcnV0aWxANC4wLjkvbm9kZV9tb2R1bGVzL3dzL2xpYi93ZWJzb2NrZXQuanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvc3VicHJvdG9jb2wuanMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy9saWIvd2Vic29ja2V0LXNlcnZlci5qcyIsIi9Vc2Vycy9zcmMvYnJvd3Nlci9zaW1wbGVfY2xpZW50LW5vZGUudHMiLCIvY29tbW9uL3RlbXAvbm9kZV9tb2R1bGVzLy5wbnBtL3dzQDguMTguMF9idWZmZXJ1dGlsQDQuMC45L25vZGVfbW9kdWxlcy93cy93cmFwcGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgRHVwbGV4IH0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxuLyoqXG4gKiBFbWl0cyB0aGUgYCdjbG9zZSdgIGV2ZW50IG9uIGEgc3RyZWFtLlxuICpcbiAqIEBwYXJhbSB7RHVwbGV4fSBzdHJlYW0gVGhlIHN0cmVhbS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVtaXRDbG9zZShzdHJlYW0pIHtcbiAgc3RyZWFtLmVtaXQoJ2Nsb3NlJyk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgJ2VuZCdgIGV2ZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGR1cGxleE9uRW5kKCkge1xuICBpZiAoIXRoaXMuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQpIHtcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYCdlcnJvcidgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZXJyb3JcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGR1cGxleE9uRXJyb3IoZXJyKSB7XG4gIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgZHVwbGV4T25FcnJvcik7XG4gIHRoaXMuZGVzdHJveSgpO1xuICBpZiAodGhpcy5saXN0ZW5lckNvdW50KCdlcnJvcicpID09PSAwKSB7XG4gICAgLy8gRG8gbm90IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvci5cbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGEgYFdlYlNvY2tldGAgaW4gYSBkdXBsZXggc3RyZWFtLlxuICpcbiAqIEBwYXJhbSB7V2ViU29ja2V0fSB3cyBUaGUgYFdlYlNvY2tldGAgdG8gd3JhcFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBmb3IgdGhlIGBEdXBsZXhgIGNvbnN0cnVjdG9yXG4gKiBAcmV0dXJuIHtEdXBsZXh9IFRoZSBkdXBsZXggc3RyZWFtXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYlNvY2tldFN0cmVhbSh3cywgb3B0aW9ucykge1xuICBsZXQgdGVybWluYXRlT25EZXN0cm95ID0gdHJ1ZTtcblxuICBjb25zdCBkdXBsZXggPSBuZXcgRHVwbGV4KHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGF1dG9EZXN0cm95OiBmYWxzZSxcbiAgICBlbWl0Q2xvc2U6IGZhbHNlLFxuICAgIG9iamVjdE1vZGU6IGZhbHNlLFxuICAgIHdyaXRhYmxlT2JqZWN0TW9kZTogZmFsc2VcbiAgfSk7XG5cbiAgd3Mub24oJ21lc3NhZ2UnLCBmdW5jdGlvbiBtZXNzYWdlKG1zZywgaXNCaW5hcnkpIHtcbiAgICBjb25zdCBkYXRhID1cbiAgICAgICFpc0JpbmFyeSAmJiBkdXBsZXguX3JlYWRhYmxlU3RhdGUub2JqZWN0TW9kZSA/IG1zZy50b1N0cmluZygpIDogbXNnO1xuXG4gICAgaWYgKCFkdXBsZXgucHVzaChkYXRhKSkgd3MucGF1c2UoKTtcbiAgfSk7XG5cbiAgd3Mub25jZSgnZXJyb3InLCBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICBpZiAoZHVwbGV4LmRlc3Ryb3llZCkgcmV0dXJuO1xuXG4gICAgLy8gUHJldmVudCBgd3MudGVybWluYXRlKClgIGZyb20gYmVpbmcgY2FsbGVkIGJ5IGBkdXBsZXguX2Rlc3Ryb3koKWAuXG4gICAgLy9cbiAgICAvLyAtIElmIHRoZSBgJ2Vycm9yJ2AgZXZlbnQgaXMgZW1pdHRlZCBiZWZvcmUgdGhlIGAnb3BlbidgIGV2ZW50LCB0aGVuXG4gICAgLy8gICBgd3MudGVybWluYXRlKClgIGlzIGEgbm9vcCBhcyBubyBzb2NrZXQgaXMgYXNzaWduZWQuXG4gICAgLy8gLSBPdGhlcndpc2UsIHRoZSBlcnJvciBpcyByZS1lbWl0dGVkIGJ5IHRoZSBsaXN0ZW5lciBvZiB0aGUgYCdlcnJvcidgXG4gICAgLy8gICBldmVudCBvZiB0aGUgYFJlY2VpdmVyYCBvYmplY3QuIFRoZSBsaXN0ZW5lciBhbHJlYWR5IGNsb3NlcyB0aGVcbiAgICAvLyAgIGNvbm5lY3Rpb24gYnkgY2FsbGluZyBgd3MuY2xvc2UoKWAuIFRoaXMgYWxsb3dzIGEgY2xvc2UgZnJhbWUgdG8gYmVcbiAgICAvLyAgIHNlbnQgdG8gdGhlIG90aGVyIHBlZXIuIElmIGB3cy50ZXJtaW5hdGUoKWAgaXMgY2FsbGVkIHJpZ2h0IGFmdGVyIHRoaXMsXG4gICAgLy8gICB0aGVuIHRoZSBjbG9zZSBmcmFtZSBtaWdodCBub3QgYmUgc2VudC5cbiAgICB0ZXJtaW5hdGVPbkRlc3Ryb3kgPSBmYWxzZTtcbiAgICBkdXBsZXguZGVzdHJveShlcnIpO1xuICB9KTtcblxuICB3cy5vbmNlKCdjbG9zZScsIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgIGlmIChkdXBsZXguZGVzdHJveWVkKSByZXR1cm47XG5cbiAgICBkdXBsZXgucHVzaChudWxsKTtcbiAgfSk7XG5cbiAgZHVwbGV4Ll9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2FsbGJhY2spIHtcbiAgICBpZiAod3MucmVhZHlTdGF0ZSA9PT0gd3MuQ0xPU0VEKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2UsIGR1cGxleCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNhbGxlZCA9IGZhbHNlO1xuXG4gICAgd3Mub25jZSgnZXJyb3InLCBmdW5jdGlvbiBlcnJvcihlcnIpIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuXG4gICAgd3Mub25jZSgnY2xvc2UnLCBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgIGlmICghY2FsbGVkKSBjYWxsYmFjayhlcnIpO1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2UsIGR1cGxleCk7XG4gICAgfSk7XG5cbiAgICBpZiAodGVybWluYXRlT25EZXN0cm95KSB3cy50ZXJtaW5hdGUoKTtcbiAgfTtcblxuICBkdXBsZXguX2ZpbmFsID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgaWYgKHdzLnJlYWR5U3RhdGUgPT09IHdzLkNPTk5FQ1RJTkcpIHtcbiAgICAgIHdzLm9uY2UoJ29wZW4nLCBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBkdXBsZXguX2ZpbmFsKGNhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgYF9zb2NrZXRgIHByb3BlcnR5IGlzIGBudWxsYCBpdCBtZWFucyB0aGF0IGB3c2AgaXMgYVxuICAgIC8vIGNsaWVudCB3ZWJzb2NrZXQgYW5kIHRoZSBoYW5kc2hha2UgZmFpbGVkLiBJbiBmYWN0LCB3aGVuIHRoaXMgaGFwcGVucywgYVxuICAgIC8vIHNvY2tldCBpcyBuZXZlciBhc3NpZ25lZCB0byB0aGUgd2Vic29ja2V0LiBXYWl0IGZvciB0aGUgYCdlcnJvcidgIGV2ZW50XG4gICAgLy8gdGhhdCB3aWxsIGJlIGVtaXR0ZWQgYnkgdGhlIHdlYnNvY2tldC5cbiAgICBpZiAod3MuX3NvY2tldCA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgaWYgKHdzLl9zb2NrZXQuX3dyaXRhYmxlU3RhdGUuZmluaXNoZWQpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICBpZiAoZHVwbGV4Ll9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQpIGR1cGxleC5kZXN0cm95KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdzLl9zb2NrZXQub25jZSgnZmluaXNoJywgZnVuY3Rpb24gZmluaXNoKCkge1xuICAgICAgICAvLyBgZHVwbGV4YCBpcyBub3QgZGVzdHJveWVkIGhlcmUgYmVjYXVzZSB0aGUgYCdlbmQnYCBldmVudCB3aWxsIGJlXG4gICAgICAgIC8vIGVtaXR0ZWQgb24gYGR1cGxleGAgYWZ0ZXIgdGhpcyBgJ2ZpbmlzaCdgIGV2ZW50LiBUaGUgRU9GIHNpZ25hbGluZ1xuICAgICAgICAvLyBgbnVsbGAgY2h1bmsgaXMsIGluIGZhY3QsIHB1c2hlZCB3aGVuIHRoZSB3ZWJzb2NrZXQgZW1pdHMgYCdjbG9zZSdgLlxuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgICB3cy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBkdXBsZXguX3JlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHdzLmlzUGF1c2VkKSB3cy5yZXN1bWUoKTtcbiAgfTtcblxuICBkdXBsZXguX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgICBpZiAod3MucmVhZHlTdGF0ZSA9PT0gd3MuQ09OTkVDVElORykge1xuICAgICAgd3Mub25jZSgnb3BlbicsIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGR1cGxleC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3cy5zZW5kKGNodW5rLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgZHVwbGV4Lm9uKCdlbmQnLCBkdXBsZXhPbkVuZCk7XG4gIGR1cGxleC5vbignZXJyb3InLCBkdXBsZXhPbkVycm9yKTtcbiAgcmV0dXJuIGR1cGxleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVXZWJTb2NrZXRTdHJlYW07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IEJJTkFSWV9UWVBFUyA9IFsnbm9kZWJ1ZmZlcicsICdhcnJheWJ1ZmZlcicsICdmcmFnbWVudHMnXTtcbmNvbnN0IGhhc0Jsb2IgPSB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCc7XG5cbmlmIChoYXNCbG9iKSBCSU5BUllfVFlQRVMucHVzaCgnYmxvYicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQklOQVJZX1RZUEVTLFxuICBFTVBUWV9CVUZGRVI6IEJ1ZmZlci5hbGxvYygwKSxcbiAgR1VJRDogJzI1OEVBRkE1LUU5MTQtNDdEQS05NUNBLUM1QUIwREM4NUIxMScsXG4gIGhhc0Jsb2IsXG4gIGtGb3JPbkV2ZW50QXR0cmlidXRlOiBTeW1ib2woJ2tJc0Zvck9uRXZlbnRBdHRyaWJ1dGUnKSxcbiAga0xpc3RlbmVyOiBTeW1ib2woJ2tMaXN0ZW5lcicpLFxuICBrU3RhdHVzQ29kZTogU3ltYm9sKCdzdGF0dXMtY29kZScpLFxuICBrV2ViU29ja2V0OiBTeW1ib2woJ3dlYnNvY2tldCcpLFxuICBOT09QOiAoKSA9PiB7fVxufTtcbiIsInZhciBmcyA9IHJlcXVpcmUoJ2ZzJylcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpXG52YXIgb3MgPSByZXF1aXJlKCdvcycpXG5cbi8vIFdvcmthcm91bmQgdG8gZml4IHdlYnBhY2sncyBidWlsZCB3YXJuaW5nczogJ3RoZSByZXF1ZXN0IG9mIGEgZGVwZW5kZW5jeSBpcyBhbiBleHByZXNzaW9uJ1xudmFyIHJ1bnRpbWVSZXF1aXJlID0gdHlwZW9mIF9fd2VicGFja19yZXF1aXJlX18gPT09ICdmdW5jdGlvbicgPyBfX25vbl93ZWJwYWNrX3JlcXVpcmVfXyA6IHJlcXVpcmUgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG52YXIgdmFycyA9IChwcm9jZXNzLmNvbmZpZyAmJiBwcm9jZXNzLmNvbmZpZy52YXJpYWJsZXMpIHx8IHt9XG52YXIgcHJlYnVpbGRzT25seSA9ICEhcHJvY2Vzcy5lbnYuUFJFQlVJTERTX09OTFlcbnZhciBhYmkgPSBwcm9jZXNzLnZlcnNpb25zLm1vZHVsZXMgLy8gVE9ETzogc3VwcG9ydCBvbGQgbm9kZSB3aGVyZSB0aGlzIGlzIHVuZGVmXG52YXIgcnVudGltZSA9IGlzRWxlY3Ryb24oKSA/ICdlbGVjdHJvbicgOiAoaXNOd2pzKCkgPyAnbm9kZS13ZWJraXQnIDogJ25vZGUnKVxuXG52YXIgYXJjaCA9IHByb2Nlc3MuZW52Lm5wbV9jb25maWdfYXJjaCB8fCBvcy5hcmNoKClcbnZhciBwbGF0Zm9ybSA9IHByb2Nlc3MuZW52Lm5wbV9jb25maWdfcGxhdGZvcm0gfHwgb3MucGxhdGZvcm0oKVxudmFyIGxpYmMgPSBwcm9jZXNzLmVudi5MSUJDIHx8IChpc0FscGluZShwbGF0Zm9ybSkgPyAnbXVzbCcgOiAnZ2xpYmMnKVxudmFyIGFybXYgPSBwcm9jZXNzLmVudi5BUk1fVkVSU0lPTiB8fCAoYXJjaCA9PT0gJ2FybTY0JyA/ICc4JyA6IHZhcnMuYXJtX3ZlcnNpb24pIHx8ICcnXG52YXIgdXYgPSAocHJvY2Vzcy52ZXJzaW9ucy51diB8fCAnJykuc3BsaXQoJy4nKVswXVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxvYWRcblxuZnVuY3Rpb24gbG9hZCAoZGlyKSB7XG4gIHJldHVybiBydW50aW1lUmVxdWlyZShsb2FkLnJlc29sdmUoZGlyKSlcbn1cblxubG9hZC5yZXNvbHZlID0gbG9hZC5wYXRoID0gZnVuY3Rpb24gKGRpcikge1xuICBkaXIgPSBwYXRoLnJlc29sdmUoZGlyIHx8ICcuJylcblxuICB0cnkge1xuICAgIHZhciBuYW1lID0gcnVudGltZVJlcXVpcmUocGF0aC5qb2luKGRpciwgJ3BhY2thZ2UuanNvbicpKS5uYW1lLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvLS9nLCAnXycpXG4gICAgaWYgKHByb2Nlc3MuZW52W25hbWUgKyAnX1BSRUJVSUxEJ10pIGRpciA9IHByb2Nlc3MuZW52W25hbWUgKyAnX1BSRUJVSUxEJ11cbiAgfSBjYXRjaCAoZXJyKSB7fVxuXG4gIGlmICghcHJlYnVpbGRzT25seSkge1xuICAgIHZhciByZWxlYXNlID0gZ2V0Rmlyc3QocGF0aC5qb2luKGRpciwgJ2J1aWxkL1JlbGVhc2UnKSwgbWF0Y2hCdWlsZClcbiAgICBpZiAocmVsZWFzZSkgcmV0dXJuIHJlbGVhc2VcblxuICAgIHZhciBkZWJ1ZyA9IGdldEZpcnN0KHBhdGguam9pbihkaXIsICdidWlsZC9EZWJ1ZycpLCBtYXRjaEJ1aWxkKVxuICAgIGlmIChkZWJ1ZykgcmV0dXJuIGRlYnVnXG4gIH1cblxuICB2YXIgcHJlYnVpbGQgPSByZXNvbHZlKGRpcilcbiAgaWYgKHByZWJ1aWxkKSByZXR1cm4gcHJlYnVpbGRcblxuICB2YXIgbmVhcmJ5ID0gcmVzb2x2ZShwYXRoLmRpcm5hbWUocHJvY2Vzcy5leGVjUGF0aCkpXG4gIGlmIChuZWFyYnkpIHJldHVybiBuZWFyYnlcblxuICB2YXIgdGFyZ2V0ID0gW1xuICAgICdwbGF0Zm9ybT0nICsgcGxhdGZvcm0sXG4gICAgJ2FyY2g9JyArIGFyY2gsXG4gICAgJ3J1bnRpbWU9JyArIHJ1bnRpbWUsXG4gICAgJ2FiaT0nICsgYWJpLFxuICAgICd1dj0nICsgdXYsXG4gICAgYXJtdiA/ICdhcm12PScgKyBhcm12IDogJycsXG4gICAgJ2xpYmM9JyArIGxpYmMsXG4gICAgJ25vZGU9JyArIHByb2Nlc3MudmVyc2lvbnMubm9kZSxcbiAgICBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uID8gJ2VsZWN0cm9uPScgKyBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uIDogJycsXG4gICAgdHlwZW9mIF9fd2VicGFja19yZXF1aXJlX18gPT09ICdmdW5jdGlvbicgPyAnd2VicGFjaz10cnVlJyA6ICcnIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgXS5maWx0ZXIoQm9vbGVhbikuam9pbignICcpXG5cbiAgdGhyb3cgbmV3IEVycm9yKCdObyBuYXRpdmUgYnVpbGQgd2FzIGZvdW5kIGZvciAnICsgdGFyZ2V0ICsgJ1xcbiAgICBsb2FkZWQgZnJvbTogJyArIGRpciArICdcXG4nKVxuXG4gIGZ1bmN0aW9uIHJlc29sdmUgKGRpcikge1xuICAgIC8vIEZpbmQgbWF0Y2hpbmcgXCJwcmVidWlsZHMvPHBsYXRmb3JtPi08YXJjaD5cIiBkaXJlY3RvcnlcbiAgICB2YXIgdHVwbGVzID0gcmVhZGRpclN5bmMocGF0aC5qb2luKGRpciwgJ3ByZWJ1aWxkcycpKS5tYXAocGFyc2VUdXBsZSlcbiAgICB2YXIgdHVwbGUgPSB0dXBsZXMuZmlsdGVyKG1hdGNoVHVwbGUocGxhdGZvcm0sIGFyY2gpKS5zb3J0KGNvbXBhcmVUdXBsZXMpWzBdXG4gICAgaWYgKCF0dXBsZSkgcmV0dXJuXG5cbiAgICAvLyBGaW5kIG1vc3Qgc3BlY2lmaWMgZmxhdm9yIGZpcnN0XG4gICAgdmFyIHByZWJ1aWxkcyA9IHBhdGguam9pbihkaXIsICdwcmVidWlsZHMnLCB0dXBsZS5uYW1lKVxuICAgIHZhciBwYXJzZWQgPSByZWFkZGlyU3luYyhwcmVidWlsZHMpLm1hcChwYXJzZVRhZ3MpXG4gICAgdmFyIGNhbmRpZGF0ZXMgPSBwYXJzZWQuZmlsdGVyKG1hdGNoVGFncyhydW50aW1lLCBhYmkpKVxuICAgIHZhciB3aW5uZXIgPSBjYW5kaWRhdGVzLnNvcnQoY29tcGFyZVRhZ3MocnVudGltZSkpWzBdXG4gICAgaWYgKHdpbm5lcikgcmV0dXJuIHBhdGguam9pbihwcmVidWlsZHMsIHdpbm5lci5maWxlKVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRkaXJTeW5jIChkaXIpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZnMucmVhZGRpclN5bmMoZGlyKVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRGaXJzdCAoZGlyLCBmaWx0ZXIpIHtcbiAgdmFyIGZpbGVzID0gcmVhZGRpclN5bmMoZGlyKS5maWx0ZXIoZmlsdGVyKVxuICByZXR1cm4gZmlsZXNbMF0gJiYgcGF0aC5qb2luKGRpciwgZmlsZXNbMF0pXG59XG5cbmZ1bmN0aW9uIG1hdGNoQnVpbGQgKG5hbWUpIHtcbiAgcmV0dXJuIC9cXC5ub2RlJC8udGVzdChuYW1lKVxufVxuXG5mdW5jdGlvbiBwYXJzZVR1cGxlIChuYW1lKSB7XG4gIC8vIEV4YW1wbGU6IGRhcndpbi14NjQrYXJtNjRcbiAgdmFyIGFyciA9IG5hbWUuc3BsaXQoJy0nKVxuICBpZiAoYXJyLmxlbmd0aCAhPT0gMikgcmV0dXJuXG5cbiAgdmFyIHBsYXRmb3JtID0gYXJyWzBdXG4gIHZhciBhcmNoaXRlY3R1cmVzID0gYXJyWzFdLnNwbGl0KCcrJylcblxuICBpZiAoIXBsYXRmb3JtKSByZXR1cm5cbiAgaWYgKCFhcmNoaXRlY3R1cmVzLmxlbmd0aCkgcmV0dXJuXG4gIGlmICghYXJjaGl0ZWN0dXJlcy5ldmVyeShCb29sZWFuKSkgcmV0dXJuXG5cbiAgcmV0dXJuIHsgbmFtZSwgcGxhdGZvcm0sIGFyY2hpdGVjdHVyZXMgfVxufVxuXG5mdW5jdGlvbiBtYXRjaFR1cGxlIChwbGF0Zm9ybSwgYXJjaCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHR1cGxlKSB7XG4gICAgaWYgKHR1cGxlID09IG51bGwpIHJldHVybiBmYWxzZVxuICAgIGlmICh0dXBsZS5wbGF0Zm9ybSAhPT0gcGxhdGZvcm0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0dXBsZS5hcmNoaXRlY3R1cmVzLmluY2x1ZGVzKGFyY2gpXG4gIH1cbn1cblxuZnVuY3Rpb24gY29tcGFyZVR1cGxlcyAoYSwgYikge1xuICAvLyBQcmVmZXIgc2luZ2xlLWFyY2ggcHJlYnVpbGRzIG92ZXIgbXVsdGktYXJjaFxuICByZXR1cm4gYS5hcmNoaXRlY3R1cmVzLmxlbmd0aCAtIGIuYXJjaGl0ZWN0dXJlcy5sZW5ndGhcbn1cblxuZnVuY3Rpb24gcGFyc2VUYWdzIChmaWxlKSB7XG4gIHZhciBhcnIgPSBmaWxlLnNwbGl0KCcuJylcbiAgdmFyIGV4dGVuc2lvbiA9IGFyci5wb3AoKVxuICB2YXIgdGFncyA9IHsgZmlsZTogZmlsZSwgc3BlY2lmaWNpdHk6IDAgfVxuXG4gIGlmIChleHRlbnNpb24gIT09ICdub2RlJykgcmV0dXJuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdGFnID0gYXJyW2ldXG5cbiAgICBpZiAodGFnID09PSAnbm9kZScgfHwgdGFnID09PSAnZWxlY3Ryb24nIHx8IHRhZyA9PT0gJ25vZGUtd2Via2l0Jykge1xuICAgICAgdGFncy5ydW50aW1lID0gdGFnXG4gICAgfSBlbHNlIGlmICh0YWcgPT09ICduYXBpJykge1xuICAgICAgdGFncy5uYXBpID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDMpID09PSAnYWJpJykge1xuICAgICAgdGFncy5hYmkgPSB0YWcuc2xpY2UoMylcbiAgICB9IGVsc2UgaWYgKHRhZy5zbGljZSgwLCAyKSA9PT0gJ3V2Jykge1xuICAgICAgdGFncy51diA9IHRhZy5zbGljZSgyKVxuICAgIH0gZWxzZSBpZiAodGFnLnNsaWNlKDAsIDQpID09PSAnYXJtdicpIHtcbiAgICAgIHRhZ3MuYXJtdiA9IHRhZy5zbGljZSg0KVxuICAgIH0gZWxzZSBpZiAodGFnID09PSAnZ2xpYmMnIHx8IHRhZyA9PT0gJ211c2wnKSB7XG4gICAgICB0YWdzLmxpYmMgPSB0YWdcbiAgICB9IGVsc2Uge1xuICAgICAgY29udGludWVcbiAgICB9XG5cbiAgICB0YWdzLnNwZWNpZmljaXR5KytcbiAgfVxuXG4gIHJldHVybiB0YWdzXG59XG5cbmZ1bmN0aW9uIG1hdGNoVGFncyAocnVudGltZSwgYWJpKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodGFncykge1xuICAgIGlmICh0YWdzID09IG51bGwpIHJldHVybiBmYWxzZVxuICAgIGlmICh0YWdzLnJ1bnRpbWUgJiYgdGFncy5ydW50aW1lICE9PSBydW50aW1lICYmICFydW50aW1lQWdub3N0aWModGFncykpIHJldHVybiBmYWxzZVxuICAgIGlmICh0YWdzLmFiaSAmJiB0YWdzLmFiaSAhPT0gYWJpICYmICF0YWdzLm5hcGkpIHJldHVybiBmYWxzZVxuICAgIGlmICh0YWdzLnV2ICYmIHRhZ3MudXYgIT09IHV2KSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGFncy5hcm12ICYmIHRhZ3MuYXJtdiAhPT0gYXJtdikgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRhZ3MubGliYyAmJiB0YWdzLmxpYmMgIT09IGxpYmMpIHJldHVybiBmYWxzZVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxufVxuXG5mdW5jdGlvbiBydW50aW1lQWdub3N0aWMgKHRhZ3MpIHtcbiAgcmV0dXJuIHRhZ3MucnVudGltZSA9PT0gJ25vZGUnICYmIHRhZ3MubmFwaVxufVxuXG5mdW5jdGlvbiBjb21wYXJlVGFncyAocnVudGltZSkge1xuICAvLyBQcmVjZWRlbmNlOiBub24tYWdub3N0aWMgcnVudGltZSwgYWJpIG92ZXIgbmFwaSwgdGhlbiBieSBzcGVjaWZpY2l0eS5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgaWYgKGEucnVudGltZSAhPT0gYi5ydW50aW1lKSB7XG4gICAgICByZXR1cm4gYS5ydW50aW1lID09PSBydW50aW1lID8gLTEgOiAxXG4gICAgfSBlbHNlIGlmIChhLmFiaSAhPT0gYi5hYmkpIHtcbiAgICAgIHJldHVybiBhLmFiaSA/IC0xIDogMVxuICAgIH0gZWxzZSBpZiAoYS5zcGVjaWZpY2l0eSAhPT0gYi5zcGVjaWZpY2l0eSkge1xuICAgICAgcmV0dXJuIGEuc3BlY2lmaWNpdHkgPiBiLnNwZWNpZmljaXR5ID8gLTEgOiAxXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzTndqcyAoKSB7XG4gIHJldHVybiAhIShwcm9jZXNzLnZlcnNpb25zICYmIHByb2Nlc3MudmVyc2lvbnMubncpXG59XG5cbmZ1bmN0aW9uIGlzRWxlY3Ryb24gKCkge1xuICBpZiAocHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uKSByZXR1cm4gdHJ1ZVxuICBpZiAocHJvY2Vzcy5lbnYuRUxFQ1RST05fUlVOX0FTX05PREUpIHJldHVybiB0cnVlXG4gIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiB3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInXG59XG5cbmZ1bmN0aW9uIGlzQWxwaW5lIChwbGF0Zm9ybSkge1xuICByZXR1cm4gcGxhdGZvcm0gPT09ICdsaW51eCcgJiYgZnMuZXhpc3RzU3luYygnL2V0Yy9hbHBpbmUtcmVsZWFzZScpXG59XG5cbi8vIEV4cG9zZWQgZm9yIHVuaXQgdGVzdHNcbi8vIFRPRE86IG1vdmUgdG8gbGliXG5sb2FkLnBhcnNlVGFncyA9IHBhcnNlVGFnc1xubG9hZC5tYXRjaFRhZ3MgPSBtYXRjaFRhZ3NcbmxvYWQuY29tcGFyZVRhZ3MgPSBjb21wYXJlVGFnc1xubG9hZC5wYXJzZVR1cGxlID0gcGFyc2VUdXBsZVxubG9hZC5tYXRjaFR1cGxlID0gbWF0Y2hUdXBsZVxubG9hZC5jb21wYXJlVHVwbGVzID0gY29tcGFyZVR1cGxlc1xuIiwiY29uc3QgcnVudGltZVJlcXVpcmUgPSB0eXBlb2YgX193ZWJwYWNrX3JlcXVpcmVfXyA9PT0gJ2Z1bmN0aW9uJyA/IF9fbm9uX3dlYnBhY2tfcmVxdWlyZV9fIDogcmVxdWlyZSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5pZiAodHlwZW9mIHJ1bnRpbWVSZXF1aXJlLmFkZG9uID09PSAnZnVuY3Rpb24nKSB7IC8vIGlmIHRoZSBwbGF0Zm9ybSBzdXBwb3J0cyBuYXRpdmUgcmVzb2x2aW5nIHByZWZlciB0aGF0XG4gIG1vZHVsZS5leHBvcnRzID0gcnVudGltZVJlcXVpcmUuYWRkb24uYmluZChydW50aW1lUmVxdWlyZSlcbn0gZWxzZSB7IC8vIGVsc2UgdXNlIHRoZSBydW50aW1lIHZlcnNpb24gaGVyZVxuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbm9kZS1neXAtYnVpbGQuanMnKVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBzb3VyY2UgVGhlIGJ1ZmZlciB0byBtYXNrXG4gKiBAcGFyYW0ge0J1ZmZlcn0gbWFzayBUaGUgbWFzayB0byB1c2VcbiAqIEBwYXJhbSB7QnVmZmVyfSBvdXRwdXQgVGhlIGJ1ZmZlciB3aGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IFRoZSBvZmZzZXQgYXQgd2hpY2ggdG8gc3RhcnQgd3JpdGluZ1xuICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIG1hc2suXG4gKiBAcHVibGljXG4gKi9cbmNvbnN0IG1hc2sgPSAoc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKSA9PiB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRbb2Zmc2V0ICsgaV0gPSBzb3VyY2VbaV0gXiBtYXNrW2kgJiAzXTtcbiAgfVxufTtcblxuLyoqXG4gKiBVbm1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgVGhlIGJ1ZmZlciB0byB1bm1hc2tcbiAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZVxuICogQHB1YmxpY1xuICovXG5jb25zdCB1bm1hc2sgPSAoYnVmZmVyLCBtYXNrKSA9PiB7XG4gIC8vIFJlcXVpcmVkIHVudGlsIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9pc3N1ZXMvOTAwNiBpcyByZXNvbHZlZC5cbiAgY29uc3QgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGJ1ZmZlcltpXSBePSBtYXNrW2kgJiAzXTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IG1hc2ssIHVubWFzayB9O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG50cnkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ25vZGUtZ3lwLWJ1aWxkJykoX19kaXJuYW1lKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2ZhbGxiYWNrJyk7XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHsgRU1QVFlfQlVGRkVSIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5jb25zdCBGYXN0QnVmZmVyID0gQnVmZmVyW1N5bWJvbC5zcGVjaWVzXTtcblxuLyoqXG4gKiBNZXJnZXMgYW4gYXJyYXkgb2YgYnVmZmVycyBpbnRvIGEgbmV3IGJ1ZmZlci5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcltdfSBsaXN0IFRoZSBhcnJheSBvZiBidWZmZXJzIHRvIGNvbmNhdFxuICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsTGVuZ3RoIFRoZSB0b3RhbCBsZW5ndGggb2YgYnVmZmVycyBpbiB0aGUgbGlzdFxuICogQHJldHVybiB7QnVmZmVyfSBUaGUgcmVzdWx0aW5nIGJ1ZmZlclxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBjb25jYXQobGlzdCwgdG90YWxMZW5ndGgpIHtcbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSByZXR1cm4gRU1QVFlfQlVGRkVSO1xuICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHJldHVybiBsaXN0WzBdO1xuXG4gIGNvbnN0IHRhcmdldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZSh0b3RhbExlbmd0aCk7XG4gIGxldCBvZmZzZXQgPSAwO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJ1ZiA9IGxpc3RbaV07XG4gICAgdGFyZ2V0LnNldChidWYsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IGJ1Zi5sZW5ndGg7XG4gIH1cblxuICBpZiAob2Zmc2V0IDwgdG90YWxMZW5ndGgpIHtcbiAgICByZXR1cm4gbmV3IEZhc3RCdWZmZXIodGFyZ2V0LmJ1ZmZlciwgdGFyZ2V0LmJ5dGVPZmZzZXQsIG9mZnNldCk7XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIE1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBzb3VyY2UgVGhlIGJ1ZmZlciB0byBtYXNrXG4gKiBAcGFyYW0ge0J1ZmZlcn0gbWFzayBUaGUgbWFzayB0byB1c2VcbiAqIEBwYXJhbSB7QnVmZmVyfSBvdXRwdXQgVGhlIGJ1ZmZlciB3aGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0XG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IFRoZSBvZmZzZXQgYXQgd2hpY2ggdG8gc3RhcnQgd3JpdGluZ1xuICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgbnVtYmVyIG9mIGJ5dGVzIHRvIG1hc2suXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIF9tYXNrKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0W29mZnNldCArIGldID0gc291cmNlW2ldIF4gbWFza1tpICYgM107XG4gIH1cbn1cblxuLyoqXG4gKiBVbm1hc2tzIGEgYnVmZmVyIHVzaW5nIHRoZSBnaXZlbiBtYXNrLlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBidWZmZXIgVGhlIGJ1ZmZlciB0byB1bm1hc2tcbiAqIEBwYXJhbSB7QnVmZmVyfSBtYXNrIFRoZSBtYXNrIHRvIHVzZVxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBfdW5tYXNrKGJ1ZmZlciwgbWFzaykge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgIGJ1ZmZlcltpXSBePSBtYXNrW2kgJiAzXTtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYnVmZmVyIHRvIGFuIGBBcnJheUJ1ZmZlcmAuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGJ1ZiBUaGUgYnVmZmVyIHRvIGNvbnZlcnRcbiAqIEByZXR1cm4ge0FycmF5QnVmZmVyfSBDb252ZXJ0ZWQgYnVmZmVyXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIoYnVmKSB7XG4gIGlmIChidWYubGVuZ3RoID09PSBidWYuYnVmZmVyLmJ5dGVMZW5ndGgpIHtcbiAgICByZXR1cm4gYnVmLmJ1ZmZlcjtcbiAgfVxuXG4gIHJldHVybiBidWYuYnVmZmVyLnNsaWNlKGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZU9mZnNldCArIGJ1Zi5sZW5ndGgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGBkYXRhYCB0byBhIGBCdWZmZXJgLlxuICpcbiAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgZGF0YSB0byBjb252ZXJ0XG4gKiBAcmV0dXJuIHtCdWZmZXJ9IFRoZSBidWZmZXJcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn1cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gdG9CdWZmZXIoZGF0YSkge1xuICB0b0J1ZmZlci5yZWFkT25seSA9IHRydWU7XG5cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihkYXRhKSkgcmV0dXJuIGRhdGE7XG5cbiAgbGV0IGJ1ZjtcblxuICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgYnVmID0gbmV3IEZhc3RCdWZmZXIoZGF0YSk7XG4gIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKSB7XG4gICAgYnVmID0gbmV3IEZhc3RCdWZmZXIoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICBidWYgPSBCdWZmZXIuZnJvbShkYXRhKTtcbiAgICB0b0J1ZmZlci5yZWFkT25seSA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGJ1Zjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbmNhdCxcbiAgbWFzazogX21hc2ssXG4gIHRvQXJyYXlCdWZmZXIsXG4gIHRvQnVmZmVyLFxuICB1bm1hc2s6IF91bm1hc2tcbn07XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xuaWYgKCFwcm9jZXNzLmVudi5XU19OT19CVUZGRVJfVVRJTCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJ1ZmZlclV0aWwgPSByZXF1aXJlKCdidWZmZXJ1dGlsJyk7XG5cbiAgICBtb2R1bGUuZXhwb3J0cy5tYXNrID0gZnVuY3Rpb24gKHNvdXJjZSwgbWFzaywgb3V0cHV0LCBvZmZzZXQsIGxlbmd0aCkge1xuICAgICAgaWYgKGxlbmd0aCA8IDQ4KSBfbWFzayhzb3VyY2UsIG1hc2ssIG91dHB1dCwgb2Zmc2V0LCBsZW5ndGgpO1xuICAgICAgZWxzZSBidWZmZXJVdGlsLm1hc2soc291cmNlLCBtYXNrLCBvdXRwdXQsIG9mZnNldCwgbGVuZ3RoKTtcbiAgICB9O1xuXG4gICAgbW9kdWxlLmV4cG9ydHMudW5tYXNrID0gZnVuY3Rpb24gKGJ1ZmZlciwgbWFzaykge1xuICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPCAzMikgX3VubWFzayhidWZmZXIsIG1hc2spO1xuICAgICAgZWxzZSBidWZmZXJVdGlsLnVubWFzayhidWZmZXIsIG1hc2spO1xuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBDb250aW51ZSByZWdhcmRsZXNzIG9mIHRoZSBlcnJvci5cbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBrRG9uZSA9IFN5bWJvbCgna0RvbmUnKTtcbmNvbnN0IGtSdW4gPSBTeW1ib2woJ2tSdW4nKTtcblxuLyoqXG4gKiBBIHZlcnkgc2ltcGxlIGpvYiBxdWV1ZSB3aXRoIGFkanVzdGFibGUgY29uY3VycmVuY3kuIEFkYXB0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL1NUUk1ML2FzeW5jLWxpbWl0ZXJcbiAqL1xuY2xhc3MgTGltaXRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGBMaW1pdGVyYC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtjb25jdXJyZW5jeT1JbmZpbml0eV0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGpvYnMgYWxsb3dlZFxuICAgKiAgICAgdG8gcnVuIGNvbmN1cnJlbnRseVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uY3VycmVuY3kpIHtcbiAgICB0aGlzW2tEb25lXSA9ICgpID0+IHtcbiAgICAgIHRoaXMucGVuZGluZy0tO1xuICAgICAgdGhpc1trUnVuXSgpO1xuICAgIH07XG4gICAgdGhpcy5jb25jdXJyZW5jeSA9IGNvbmN1cnJlbmN5IHx8IEluZmluaXR5O1xuICAgIHRoaXMuam9icyA9IFtdO1xuICAgIHRoaXMucGVuZGluZyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGpvYiB0byB0aGUgcXVldWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYiBUaGUgam9iIHRvIHJ1blxuICAgKiBAcHVibGljXG4gICAqL1xuICBhZGQoam9iKSB7XG4gICAgdGhpcy5qb2JzLnB1c2goam9iKTtcbiAgICB0aGlzW2tSdW5dKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGpvYiBmcm9tIHRoZSBxdWV1ZSBhbmQgcnVucyBpdCBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIFtrUnVuXSgpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nID09PSB0aGlzLmNvbmN1cnJlbmN5KSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5qb2JzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgam9iID0gdGhpcy5qb2JzLnNoaWZ0KCk7XG5cbiAgICAgIHRoaXMucGVuZGluZysrO1xuICAgICAgam9iKHRoaXNba0RvbmVdKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMaW1pdGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB6bGliID0gcmVxdWlyZSgnemxpYicpO1xuXG5jb25zdCBidWZmZXJVdGlsID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuY29uc3QgTGltaXRlciA9IHJlcXVpcmUoJy4vbGltaXRlcicpO1xuY29uc3QgeyBrU3RhdHVzQ29kZSB9ID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuY29uc3QgRmFzdEJ1ZmZlciA9IEJ1ZmZlcltTeW1ib2wuc3BlY2llc107XG5jb25zdCBUUkFJTEVSID0gQnVmZmVyLmZyb20oWzB4MDAsIDB4MDAsIDB4ZmYsIDB4ZmZdKTtcbmNvbnN0IGtQZXJNZXNzYWdlRGVmbGF0ZSA9IFN5bWJvbCgncGVybWVzc2FnZS1kZWZsYXRlJyk7XG5jb25zdCBrVG90YWxMZW5ndGggPSBTeW1ib2woJ3RvdGFsLWxlbmd0aCcpO1xuY29uc3Qga0NhbGxiYWNrID0gU3ltYm9sKCdjYWxsYmFjaycpO1xuY29uc3Qga0J1ZmZlcnMgPSBTeW1ib2woJ2J1ZmZlcnMnKTtcbmNvbnN0IGtFcnJvciA9IFN5bWJvbCgnZXJyb3InKTtcblxuLy9cbi8vIFdlIGxpbWl0IHpsaWIgY29uY3VycmVuY3ksIHdoaWNoIHByZXZlbnRzIHNldmVyZSBtZW1vcnkgZnJhZ21lbnRhdGlvblxuLy8gYXMgZG9jdW1lbnRlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzL25vZGUvaXNzdWVzLzg4NzEjaXNzdWVjb21tZW50LTI1MDkxNTkxM1xuLy8gYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJzb2NrZXRzL3dzL2lzc3Vlcy8xMjAyXG4vL1xuLy8gSW50ZW50aW9uYWxseSBnbG9iYWw7IGl0J3MgdGhlIGdsb2JhbCB0aHJlYWQgcG9vbCB0aGF0J3MgYW4gaXNzdWUuXG4vL1xubGV0IHpsaWJMaW1pdGVyO1xuXG4vKipcbiAqIHBlcm1lc3NhZ2UtZGVmbGF0ZSBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuY2xhc3MgUGVyTWVzc2FnZURlZmxhdGUge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIFBlck1lc3NhZ2VEZWZsYXRlIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIENvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IFtvcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHNdIEFkdmVydGlzZSBzdXBwb3J0XG4gICAqICAgICBmb3IsIG9yIHJlcXVlc3QsIGEgY3VzdG9tIGNsaWVudCB3aW5kb3cgc2l6ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNsaWVudE5vQ29udGV4dFRha2VvdmVyPWZhbHNlXSBBZHZlcnRpc2UvXG4gICAqICAgICBhY2tub3dsZWRnZSBkaXNhYmxpbmcgb2YgY2xpZW50IGNvbnRleHQgdGFrZW92ZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvbmN1cnJlbmN5TGltaXQ9MTBdIFRoZSBudW1iZXIgb2YgY29uY3VycmVudFxuICAgKiAgICAgY2FsbHMgdG8gemxpYlxuICAgKiBAcGFyYW0geyhCb29sZWFufE51bWJlcil9IFtvcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHNdIFJlcXVlc3QvY29uZmlybSB0aGVcbiAgICogICAgIHVzZSBvZiBhIGN1c3RvbSBzZXJ2ZXIgd2luZG93IHNpemVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcj1mYWxzZV0gUmVxdWVzdC9hY2NlcHRcbiAgICogICAgIGRpc2FibGluZyBvZiBzZXJ2ZXIgY29udGV4dCB0YWtlb3ZlclxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMudGhyZXNob2xkPTEwMjRdIFNpemUgKGluIGJ5dGVzKSBiZWxvdyB3aGljaFxuICAgKiAgICAgbWVzc2FnZXMgc2hvdWxkIG5vdCBiZSBjb21wcmVzc2VkIGlmIGNvbnRleHQgdGFrZW92ZXIgaXMgZGlzYWJsZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9uc10gT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb25cbiAgICogICAgIGRlZmxhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9uc10gT3B0aW9ucyB0byBwYXNzIHRvIHpsaWIgb25cbiAgICogICAgIGluZmxhdGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbaXNTZXJ2ZXI9ZmFsc2VdIENyZWF0ZSB0aGUgaW5zdGFuY2UgaW4gZWl0aGVyIHNlcnZlciBvclxuICAgKiAgICAgY2xpZW50IG1vZGVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFttYXhQYXlsb2FkPTBdIFRoZSBtYXhpbXVtIGFsbG93ZWQgbWVzc2FnZSBsZW5ndGhcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGlzU2VydmVyLCBtYXhQYXlsb2FkKSB7XG4gICAgdGhpcy5fbWF4UGF5bG9hZCA9IG1heFBheWxvYWQgfCAwO1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX3RocmVzaG9sZCA9XG4gICAgICB0aGlzLl9vcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gdGhpcy5fb3B0aW9ucy50aHJlc2hvbGQgOiAxMDI0O1xuICAgIHRoaXMuX2lzU2VydmVyID0gISFpc1NlcnZlcjtcbiAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDtcbiAgICB0aGlzLl9pbmZsYXRlID0gbnVsbDtcblxuICAgIHRoaXMucGFyYW1zID0gbnVsbDtcblxuICAgIGlmICghemxpYkxpbWl0ZXIpIHtcbiAgICAgIGNvbnN0IGNvbmN1cnJlbmN5ID1cbiAgICAgICAgdGhpcy5fb3B0aW9ucy5jb25jdXJyZW5jeUxpbWl0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHRoaXMuX29wdGlvbnMuY29uY3VycmVuY3lMaW1pdFxuICAgICAgICAgIDogMTA7XG4gICAgICB6bGliTGltaXRlciA9IG5ldyBMaW1pdGVyKGNvbmN1cnJlbmN5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgZXh0ZW5zaW9uTmFtZSgpIHtcbiAgICByZXR1cm4gJ3Blcm1lc3NhZ2UtZGVmbGF0ZSc7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHJldHVybiB7T2JqZWN0fSBFeHRlbnNpb24gcGFyYW1ldGVyc1xuICAgKiBAcHVibGljXG4gICAqL1xuICBvZmZlcigpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7fTtcblxuICAgIGlmICh0aGlzLl9vcHRpb25zLnNlcnZlck5vQ29udGV4dFRha2VvdmVyKSB7XG4gICAgICBwYXJhbXMuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnROb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgcGFyYW1zLmNsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX29wdGlvbnMuc2VydmVyTWF4V2luZG93Qml0cykge1xuICAgICAgcGFyYW1zLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSB0aGlzLl9vcHRpb25zLnNlcnZlck1heFdpbmRvd0JpdHM7XG4gICAgfVxuICAgIGlmICh0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzID09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdCBhbiBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXIvcmVzcG9uc2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGNvbmZpZ3VyYXRpb25zIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzL3JlcG9uc2VcbiAgICogQHJldHVybiB7T2JqZWN0fSBBY2NlcHRlZCBjb25maWd1cmF0aW9uXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFjY2VwdChjb25maWd1cmF0aW9ucykge1xuICAgIGNvbmZpZ3VyYXRpb25zID0gdGhpcy5ub3JtYWxpemVQYXJhbXMoY29uZmlndXJhdGlvbnMpO1xuXG4gICAgdGhpcy5wYXJhbXMgPSB0aGlzLl9pc1NlcnZlclxuICAgICAgPyB0aGlzLmFjY2VwdEFzU2VydmVyKGNvbmZpZ3VyYXRpb25zKVxuICAgICAgOiB0aGlzLmFjY2VwdEFzQ2xpZW50KGNvbmZpZ3VyYXRpb25zKTtcblxuICAgIHJldHVybiB0aGlzLnBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyBhbGwgcmVzb3VyY2VzIHVzZWQgYnkgdGhlIGV4dGVuc2lvbi5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xlYW51cCgpIHtcbiAgICBpZiAodGhpcy5faW5mbGF0ZSkge1xuICAgICAgdGhpcy5faW5mbGF0ZS5jbG9zZSgpO1xuICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RlZmxhdGUpIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5fZGVmbGF0ZVtrQ2FsbGJhY2tdO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlLmNsb3NlKCk7XG4gICAgICB0aGlzLl9kZWZsYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKFxuICAgICAgICAgIG5ldyBFcnJvcihcbiAgICAgICAgICAgICdUaGUgZGVmbGF0ZSBzdHJlYW0gd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBwcm9jZXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiAgQWNjZXB0IGFuIGV4dGVuc2lvbiBuZWdvdGlhdGlvbiBvZmZlci5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gb2ZmZXJzIFRoZSBleHRlbnNpb24gbmVnb3RpYXRpb24gb2ZmZXJzXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNTZXJ2ZXIob2ZmZXJzKSB7XG4gICAgY29uc3Qgb3B0cyA9IHRoaXMuX29wdGlvbnM7XG4gICAgY29uc3QgYWNjZXB0ZWQgPSBvZmZlcnMuZmluZCgocGFyYW1zKSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIChvcHRzLnNlcnZlck5vQ29udGV4dFRha2VvdmVyID09PSBmYWxzZSAmJlxuICAgICAgICAgIHBhcmFtcy5zZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlcikgfHxcbiAgICAgICAgKHBhcmFtcy5zZXJ2ZXJfbWF4X3dpbmRvd19iaXRzICYmXG4gICAgICAgICAgKG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgICh0eXBlb2Ygb3B0cy5zZXJ2ZXJNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJyAmJlxuICAgICAgICAgICAgICBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHMgPiBwYXJhbXMuc2VydmVyX21heF93aW5kb3dfYml0cykpKSB8fFxuICAgICAgICAodHlwZW9mIG9wdHMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgICAhcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm9uZSBvZiB0aGUgZXh0ZW5zaW9uIG9mZmVycyBjYW4gYmUgYWNjZXB0ZWQnKTtcbiAgICB9XG5cbiAgICBpZiAob3B0cy5zZXJ2ZXJOb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgYWNjZXB0ZWQuc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAob3B0cy5jbGllbnROb0NvbnRleHRUYWtlb3Zlcikge1xuICAgICAgYWNjZXB0ZWQuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXIgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdHMuc2VydmVyTWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicpIHtcbiAgICAgIGFjY2VwdGVkLnNlcnZlcl9tYXhfd2luZG93X2JpdHMgPSBvcHRzLnNlcnZlck1heFdpbmRvd0JpdHM7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb3B0cy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSAnbnVtYmVyJykge1xuICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9IG9wdHMuY2xpZW50TWF4V2luZG93Qml0cztcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgYWNjZXB0ZWQuY2xpZW50X21heF93aW5kb3dfYml0cyA9PT0gdHJ1ZSB8fFxuICAgICAgb3B0cy5jbGllbnRNYXhXaW5kb3dCaXRzID09PSBmYWxzZVxuICAgICkge1xuICAgICAgZGVsZXRlIGFjY2VwdGVkLmNsaWVudF9tYXhfd2luZG93X2JpdHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjY2VwdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdCB0aGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIHJlc3BvbnNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSByZXNwb25zZSBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIHJlc3BvbnNlXG4gICAqIEByZXR1cm4ge09iamVjdH0gQWNjZXB0ZWQgY29uZmlndXJhdGlvblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYWNjZXB0QXNDbGllbnQocmVzcG9uc2UpIHtcbiAgICBjb25zdCBwYXJhbXMgPSByZXNwb25zZVswXTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuX29wdGlvbnMuY2xpZW50Tm9Db250ZXh0VGFrZW92ZXIgPT09IGZhbHNlICYmXG4gICAgICBwYXJhbXMuY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXJcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBwYXJhbWV0ZXIgXCJjbGllbnRfbm9fY29udGV4dF90YWtlb3ZlclwiJyk7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJhbXMuY2xpZW50X21heF93aW5kb3dfYml0cykge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHBhcmFtcy5jbGllbnRfbWF4X3dpbmRvd19iaXRzID0gdGhpcy5fb3B0aW9ucy5jbGllbnRNYXhXaW5kb3dCaXRzO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMgPT09IGZhbHNlIHx8XG4gICAgICAodHlwZW9mIHRoaXMuX29wdGlvbnMuY2xpZW50TWF4V2luZG93Qml0cyA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgcGFyYW1zLmNsaWVudF9tYXhfd2luZG93X2JpdHMgPiB0aGlzLl9vcHRpb25zLmNsaWVudE1heFdpbmRvd0JpdHMpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbmV4cGVjdGVkIG9yIGludmFsaWQgcGFyYW1ldGVyIFwiY2xpZW50X21heF93aW5kb3dfYml0c1wiJ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5fSBjb25maWd1cmF0aW9ucyBUaGUgZXh0ZW5zaW9uIG5lZ290aWF0aW9uIG9mZmVycy9yZXBvbnNlXG4gICAqIEByZXR1cm4ge0FycmF5fSBUaGUgb2ZmZXJzL3Jlc3BvbnNlIHdpdGggbm9ybWFsaXplZCBwYXJhbWV0ZXJzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBub3JtYWxpemVQYXJhbXMoY29uZmlndXJhdGlvbnMpIHtcbiAgICBjb25maWd1cmF0aW9ucy5mb3JFYWNoKChwYXJhbXMpID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXJhbWV0ZXIgXCIke2tleX1cIiBtdXN0IGhhdmUgb25seSBhIHNpbmdsZSB2YWx1ZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSB2YWx1ZVswXTtcblxuICAgICAgICBpZiAoa2V5ID09PSAnY2xpZW50X21heF93aW5kb3dfYml0cycpIHtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihudW0pIHx8IG51bSA8IDggfHwgbnVtID4gMTUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICAgIGBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgXCIke2tleX1cIjogJHt2YWx1ZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdzZXJ2ZXJfbWF4X3dpbmRvd19iaXRzJykge1xuICAgICAgICAgIGNvbnN0IG51bSA9ICt2YWx1ZTtcbiAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobnVtKSB8fCBudW0gPCA4IHx8IG51bSA+IDE1KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgICBgSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyIFwiJHtrZXl9XCI6ICR7dmFsdWV9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBudW07XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAga2V5ID09PSAnY2xpZW50X25vX2NvbnRleHRfdGFrZW92ZXInIHx8XG4gICAgICAgICAga2V5ID09PSAnc2VydmVyX25vX2NvbnRleHRfdGFrZW92ZXInXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgYEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciBcIiR7a2V5fVwiOiAke3ZhbHVlfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJhbWV0ZXIgXCIke2tleX1cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmZpZ3VyYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29tcHJlc3MgZGF0YS4gQ29uY3VycmVuY3kgbGltaXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgQ29tcHJlc3NlZCBkYXRhXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGRlY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLmFkZCgoZG9uZSkgPT4ge1xuICAgICAgdGhpcy5fZGVjb21wcmVzcyhkYXRhLCBmaW4sIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgICBkb25lKCk7XG4gICAgICAgIGNhbGxiYWNrKGVyciwgcmVzdWx0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXByZXNzIGRhdGEuIENvbmN1cnJlbmN5IGxpbWl0ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7KEJ1ZmZlcnxTdHJpbmcpfSBkYXRhIERhdGEgdG8gY29tcHJlc3NcbiAgICogQHBhcmFtIHtCb29sZWFufSBmaW4gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRoaXMgaXMgdGhlIGxhc3QgZnJhZ21lbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIHpsaWJMaW1pdGVyLmFkZCgoZG9uZSkgPT4ge1xuICAgICAgdGhpcy5fY29tcHJlc3MoZGF0YSwgZmluLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgICBjYWxsYmFjayhlcnIsIHJlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvbXByZXNzIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIENvbXByZXNzZWQgZGF0YVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGZpbiBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdGhpcyBpcyB0aGUgbGFzdCBmcmFnbWVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2RlY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnY2xpZW50JyA6ICdzZXJ2ZXInO1xuXG4gICAgaWYgKCF0aGlzLl9pbmZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPVxuICAgICAgICB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgICA6IHRoaXMucGFyYW1zW2tleV07XG5cbiAgICAgIHRoaXMuX2luZmxhdGUgPSB6bGliLmNyZWF0ZUluZmxhdGVSYXcoe1xuICAgICAgICAuLi50aGlzLl9vcHRpb25zLnpsaWJJbmZsYXRlT3B0aW9ucyxcbiAgICAgICAgd2luZG93Qml0c1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9pbmZsYXRlW2tQZXJNZXNzYWdlRGVmbGF0ZV0gPSB0aGlzO1xuICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdID0gMDtcbiAgICAgIHRoaXMuX2luZmxhdGVba0J1ZmZlcnNdID0gW107XG4gICAgICB0aGlzLl9pbmZsYXRlLm9uKCdlcnJvcicsIGluZmxhdGVPbkVycm9yKTtcbiAgICAgIHRoaXMuX2luZmxhdGUub24oJ2RhdGEnLCBpbmZsYXRlT25EYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pbmZsYXRlW2tDYWxsYmFja10gPSBjYWxsYmFjaztcblxuICAgIHRoaXMuX2luZmxhdGUud3JpdGUoZGF0YSk7XG4gICAgaWYgKGZpbikgdGhpcy5faW5mbGF0ZS53cml0ZShUUkFJTEVSKTtcblxuICAgIHRoaXMuX2luZmxhdGUuZmx1c2goKCkgPT4ge1xuICAgICAgY29uc3QgZXJyID0gdGhpcy5faW5mbGF0ZVtrRXJyb3JdO1xuXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YSA9IGJ1ZmZlclV0aWwuY29uY2F0KFxuICAgICAgICB0aGlzLl9pbmZsYXRlW2tCdWZmZXJzXSxcbiAgICAgICAgdGhpcy5faW5mbGF0ZVtrVG90YWxMZW5ndGhdXG4gICAgICApO1xuXG4gICAgICBpZiAodGhpcy5faW5mbGF0ZS5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgICAgIHRoaXMuX2luZmxhdGUuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5faW5mbGF0ZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9pbmZsYXRlW2tUb3RhbExlbmd0aF0gPSAwO1xuICAgICAgICB0aGlzLl9pbmZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICAgIGlmIChmaW4gJiYgdGhpcy5wYXJhbXNbYCR7ZW5kcG9pbnR9X25vX2NvbnRleHRfdGFrZW92ZXJgXSkge1xuICAgICAgICAgIHRoaXMuX2luZmxhdGUucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wcmVzcyBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0geyhCdWZmZXJ8U3RyaW5nKX0gZGF0YSBEYXRhIHRvIGNvbXByZXNzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZmluIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGlzIHRoZSBsYXN0IGZyYWdtZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY29tcHJlc3MoZGF0YSwgZmluLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gdGhpcy5faXNTZXJ2ZXIgPyAnc2VydmVyJyA6ICdjbGllbnQnO1xuXG4gICAgaWYgKCF0aGlzLl9kZWZsYXRlKSB7XG4gICAgICBjb25zdCBrZXkgPSBgJHtlbmRwb2ludH1fbWF4X3dpbmRvd19iaXRzYDtcbiAgICAgIGNvbnN0IHdpbmRvd0JpdHMgPVxuICAgICAgICB0eXBlb2YgdGhpcy5wYXJhbXNba2V5XSAhPT0gJ251bWJlcidcbiAgICAgICAgICA/IHpsaWIuWl9ERUZBVUxUX1dJTkRPV0JJVFNcbiAgICAgICAgICA6IHRoaXMucGFyYW1zW2tleV07XG5cbiAgICAgIHRoaXMuX2RlZmxhdGUgPSB6bGliLmNyZWF0ZURlZmxhdGVSYXcoe1xuICAgICAgICAuLi50aGlzLl9vcHRpb25zLnpsaWJEZWZsYXRlT3B0aW9ucyxcbiAgICAgICAgd2luZG93Qml0c1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXSA9IDA7XG4gICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICB0aGlzLl9kZWZsYXRlLm9uKCdkYXRhJywgZGVmbGF0ZU9uRGF0YSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGVmbGF0ZVtrQ2FsbGJhY2tdID0gY2FsbGJhY2s7XG5cbiAgICB0aGlzLl9kZWZsYXRlLndyaXRlKGRhdGEpO1xuICAgIHRoaXMuX2RlZmxhdGUuZmx1c2goemxpYi5aX1NZTkNfRkxVU0gsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fZGVmbGF0ZSkge1xuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgZGVmbGF0ZSBzdHJlYW0gd2FzIGNsb3NlZCB3aGlsZSBkYXRhIHdhcyBiZWluZyBwcm9jZXNzZWQuXG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IGRhdGEgPSBidWZmZXJVdGlsLmNvbmNhdChcbiAgICAgICAgdGhpcy5fZGVmbGF0ZVtrQnVmZmVyc10sXG4gICAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXVxuICAgICAgKTtcblxuICAgICAgaWYgKGZpbikge1xuICAgICAgICBkYXRhID0gbmV3IEZhc3RCdWZmZXIoZGF0YS5idWZmZXIsIGRhdGEuYnl0ZU9mZnNldCwgZGF0YS5sZW5ndGggLSA0KTtcbiAgICAgIH1cblxuICAgICAgLy9cbiAgICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBjYWxsYmFjayB3aWxsIG5vdCBiZSBjYWxsZWQgYWdhaW4gaW5cbiAgICAgIC8vIGBQZXJNZXNzYWdlRGVmbGF0ZSNjbGVhbnVwKClgLlxuICAgICAgLy9cbiAgICAgIHRoaXMuX2RlZmxhdGVba0NhbGxiYWNrXSA9IG51bGw7XG5cbiAgICAgIHRoaXMuX2RlZmxhdGVba1RvdGFsTGVuZ3RoXSA9IDA7XG4gICAgICB0aGlzLl9kZWZsYXRlW2tCdWZmZXJzXSA9IFtdO1xuXG4gICAgICBpZiAoZmluICYmIHRoaXMucGFyYW1zW2Ake2VuZHBvaW50fV9ub19jb250ZXh0X3Rha2VvdmVyYF0pIHtcbiAgICAgICAgdGhpcy5fZGVmbGF0ZS5yZXNldCgpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBlck1lc3NhZ2VEZWZsYXRlO1xuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYHpsaWIuRGVmbGF0ZVJhd2Agc3RyZWFtIGAnZGF0YSdgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBBIGNodW5rIG9mIGRhdGFcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVPbkRhdGEoY2h1bmspIHtcbiAgdGhpc1trQnVmZmVyc10ucHVzaChjaHVuayk7XG4gIHRoaXNba1RvdGFsTGVuZ3RoXSArPSBjaHVuay5sZW5ndGg7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdkYXRhJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIEEgY2h1bmsgb2YgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRGF0YShjaHVuaykge1xuICB0aGlzW2tUb3RhbExlbmd0aF0gKz0gY2h1bmsubGVuZ3RoO1xuXG4gIGlmIChcbiAgICB0aGlzW2tQZXJNZXNzYWdlRGVmbGF0ZV0uX21heFBheWxvYWQgPCAxIHx8XG4gICAgdGhpc1trVG90YWxMZW5ndGhdIDw9IHRoaXNba1Blck1lc3NhZ2VEZWZsYXRlXS5fbWF4UGF5bG9hZFxuICApIHtcbiAgICB0aGlzW2tCdWZmZXJzXS5wdXNoKGNodW5rKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0aGlzW2tFcnJvcl0gPSBuZXcgUmFuZ2VFcnJvcignTWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcpO1xuICB0aGlzW2tFcnJvcl0uY29kZSA9ICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnO1xuICB0aGlzW2tFcnJvcl1ba1N0YXR1c0NvZGVdID0gMTAwOTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIGluZmxhdGVPbkRhdGEpO1xuICB0aGlzLnJlc2V0KCk7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgemxpYi5JbmZsYXRlUmF3YCBzdHJlYW0gYCdlcnJvcidgIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZW1pdHRlZCBlcnJvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZU9uRXJyb3IoZXJyKSB7XG4gIC8vXG4gIC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCBgWmxpYiNjbG9zZSgpYCBhcyB0aGUgaGFuZGxlIGlzIGF1dG9tYXRpY2FsbHlcbiAgLy8gY2xvc2VkIHdoZW4gYW4gZXJyb3IgaXMgZW1pdHRlZC5cbiAgLy9cbiAgdGhpc1trUGVyTWVzc2FnZURlZmxhdGVdLl9pbmZsYXRlID0gbnVsbDtcbiAgZXJyW2tTdGF0dXNDb2RlXSA9IDEwMDc7XG4gIHRoaXNba0NhbGxiYWNrXShlcnIpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IGlzVXRmOCB9ID0gcmVxdWlyZSgnYnVmZmVyJyk7XG5cbmNvbnN0IHsgaGFzQmxvYiB9ID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuLy9cbi8vIEFsbG93ZWQgdG9rZW4gY2hhcmFjdGVyczpcbi8vXG4vLyAnIScsICcjJywgJyQnLCAnJScsICcmJywgJycnLCAnKicsICcrJywgJy0nLFxuLy8gJy4nLCAwLTksIEEtWiwgJ14nLCAnXycsICdgJywgYS16LCAnfCcsICd+J1xuLy9cbi8vIHRva2VuQ2hhcnNbMzJdID09PSAwIC8vICcgJ1xuLy8gdG9rZW5DaGFyc1szM10gPT09IDEgLy8gJyEnXG4vLyB0b2tlbkNoYXJzWzM0XSA9PT0gMCAvLyAnXCInXG4vLyAuLi5cbi8vXG4vLyBwcmV0dGllci1pZ25vcmVcbmNvbnN0IHRva2VuQ2hhcnMgPSBbXG4gIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIC8vIDAgLSAxNVxuICAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAvLyAxNiAtIDMxXG4gIDAsIDEsIDAsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDEsIDEsIDAsIDEsIDEsIDAsIC8vIDMyIC0gNDdcbiAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMCwgMCwgMCwgMCwgMCwgLy8gNDggLSA2M1xuICAwLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAvLyA2NCAtIDc5XG4gIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDEsIDAsIDAsIDAsIDEsIDEsIC8vIDgwIC0gOTVcbiAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgLy8gOTYgLSAxMTFcbiAgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMSwgMCwgMSwgMCwgMSwgMCAvLyAxMTIgLSAxMjdcbl07XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhdHVzIGNvZGUgaXMgYWxsb3dlZCBpbiBhIGNsb3NlIGZyYW1lLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlIFRoZSBzdGF0dXMgY29kZVxuICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBzdGF0dXMgY29kZSBpcyB2YWxpZCwgZWxzZSBgZmFsc2VgXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRTdGF0dXNDb2RlKGNvZGUpIHtcbiAgcmV0dXJuIChcbiAgICAoY29kZSA+PSAxMDAwICYmXG4gICAgICBjb2RlIDw9IDEwMTQgJiZcbiAgICAgIGNvZGUgIT09IDEwMDQgJiZcbiAgICAgIGNvZGUgIT09IDEwMDUgJiZcbiAgICAgIGNvZGUgIT09IDEwMDYpIHx8XG4gICAgKGNvZGUgPj0gMzAwMCAmJiBjb2RlIDw9IDQ5OTkpXG4gICk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZ2l2ZW4gYnVmZmVyIGNvbnRhaW5zIG9ubHkgY29ycmVjdCBVVEYtOC5cbiAqIFBvcnRlZCBmcm9tIGh0dHBzOi8vd3d3LmNsLmNhbS5hYy51ay8lN0VtZ2syNS91Y3MvdXRmOF9jaGVjay5jIGJ5XG4gKiBNYXJrdXMgS3Vobi5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gYnVmIFRoZSBidWZmZXIgdG8gY2hlY2tcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBgYnVmYCBjb250YWlucyBvbmx5IGNvcnJlY3QgVVRGLTgsIGVsc2UgYGZhbHNlYFxuICogQHB1YmxpY1xuICovXG5mdW5jdGlvbiBfaXNWYWxpZFVURjgoYnVmKSB7XG4gIGNvbnN0IGxlbiA9IGJ1Zi5sZW5ndGg7XG4gIGxldCBpID0gMDtcblxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIGlmICgoYnVmW2ldICYgMHg4MCkgPT09IDApIHtcbiAgICAgIC8vIDB4eHh4eHh4XG4gICAgICBpKys7XG4gICAgfSBlbHNlIGlmICgoYnVmW2ldICYgMHhlMCkgPT09IDB4YzApIHtcbiAgICAgIC8vIDExMHh4eHh4IDEweHh4eHh4XG4gICAgICBpZiAoXG4gICAgICAgIGkgKyAxID09PSBsZW4gfHxcbiAgICAgICAgKGJ1ZltpICsgMV0gJiAweGMwKSAhPT0gMHg4MCB8fFxuICAgICAgICAoYnVmW2ldICYgMHhmZSkgPT09IDB4YzAgLy8gT3ZlcmxvbmdcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGkgKz0gMjtcbiAgICB9IGVsc2UgaWYgKChidWZbaV0gJiAweGYwKSA9PT0gMHhlMCkge1xuICAgICAgLy8gMTExMHh4eHggMTB4eHh4eHggMTB4eHh4eHhcbiAgICAgIGlmIChcbiAgICAgICAgaSArIDIgPj0gbGVuIHx8XG4gICAgICAgIChidWZbaSArIDFdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpICsgMl0gJiAweGMwKSAhPT0gMHg4MCB8fFxuICAgICAgICAoYnVmW2ldID09PSAweGUwICYmIChidWZbaSArIDFdICYgMHhlMCkgPT09IDB4ODApIHx8IC8vIE92ZXJsb25nXG4gICAgICAgIChidWZbaV0gPT09IDB4ZWQgJiYgKGJ1ZltpICsgMV0gJiAweGUwKSA9PT0gMHhhMCkgLy8gU3Vycm9nYXRlIChVK0Q4MDAgLSBVK0RGRkYpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpICs9IDM7XG4gICAgfSBlbHNlIGlmICgoYnVmW2ldICYgMHhmOCkgPT09IDB4ZjApIHtcbiAgICAgIC8vIDExMTEweHh4IDEweHh4eHh4IDEweHh4eHh4IDEweHh4eHh4XG4gICAgICBpZiAoXG4gICAgICAgIGkgKyAzID49IGxlbiB8fFxuICAgICAgICAoYnVmW2kgKyAxXSAmIDB4YzApICE9PSAweDgwIHx8XG4gICAgICAgIChidWZbaSArIDJdICYgMHhjMCkgIT09IDB4ODAgfHxcbiAgICAgICAgKGJ1ZltpICsgM10gJiAweGMwKSAhPT0gMHg4MCB8fFxuICAgICAgICAoYnVmW2ldID09PSAweGYwICYmIChidWZbaSArIDFdICYgMHhmMCkgPT09IDB4ODApIHx8IC8vIE92ZXJsb25nXG4gICAgICAgIChidWZbaV0gPT09IDB4ZjQgJiYgYnVmW2kgKyAxXSA+IDB4OGYpIHx8XG4gICAgICAgIGJ1ZltpXSA+IDB4ZjQgLy8gPiBVKzEwRkZGRlxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaSArPSA0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgdmFsdWUgaXMgYSBgQmxvYmAuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYmUgdGVzdGVkXG4gKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGBCbG9iYCwgZWxzZSBgZmFsc2VgXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsdWUpIHtcbiAgcmV0dXJuIChcbiAgICBoYXNCbG9iICYmXG4gICAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiB2YWx1ZS5zdHJlYW0gPT09ICdmdW5jdGlvbicgJiZcbiAgICAodmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ0Jsb2InIHx8XG4gICAgICB2YWx1ZVtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnRmlsZScpXG4gICk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0Jsb2IsXG4gIGlzVmFsaWRTdGF0dXNDb2RlLFxuICBpc1ZhbGlkVVRGODogX2lzVmFsaWRVVEY4LFxuICB0b2tlbkNoYXJzXG59O1xuXG5pZiAoaXNVdGY4KSB7XG4gIG1vZHVsZS5leHBvcnRzLmlzVmFsaWRVVEY4ID0gZnVuY3Rpb24gKGJ1Zikge1xuICAgIHJldHVybiBidWYubGVuZ3RoIDwgMjQgPyBfaXNWYWxpZFVURjgoYnVmKSA6IGlzVXRmOChidWYpO1xuICB9O1xufSAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAgKi8gZWxzZSBpZiAoIXByb2Nlc3MuZW52LldTX05PX1VURl84X1ZBTElEQVRFKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaXNWYWxpZFVURjggPSByZXF1aXJlKCd1dGYtOC12YWxpZGF0ZScpO1xuXG4gICAgbW9kdWxlLmV4cG9ydHMuaXNWYWxpZFVURjggPSBmdW5jdGlvbiAoYnVmKSB7XG4gICAgICByZXR1cm4gYnVmLmxlbmd0aCA8IDMyID8gX2lzVmFsaWRVVEY4KGJ1ZikgOiBpc1ZhbGlkVVRGOChidWYpO1xuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBDb250aW51ZSByZWdhcmRsZXNzIG9mIHRoZSBlcnJvci5cbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IFdyaXRhYmxlIH0gPSByZXF1aXJlKCdzdHJlYW0nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3Qge1xuICBCSU5BUllfVFlQRVMsXG4gIEVNUFRZX0JVRkZFUixcbiAga1N0YXR1c0NvZGUsXG4gIGtXZWJTb2NrZXRcbn0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuY29uc3QgeyBjb25jYXQsIHRvQXJyYXlCdWZmZXIsIHVubWFzayB9ID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuY29uc3QgeyBpc1ZhbGlkU3RhdHVzQ29kZSwgaXNWYWxpZFVURjggfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG5jb25zdCBGYXN0QnVmZmVyID0gQnVmZmVyW1N5bWJvbC5zcGVjaWVzXTtcblxuY29uc3QgR0VUX0lORk8gPSAwO1xuY29uc3QgR0VUX1BBWUxPQURfTEVOR1RIXzE2ID0gMTtcbmNvbnN0IEdFVF9QQVlMT0FEX0xFTkdUSF82NCA9IDI7XG5jb25zdCBHRVRfTUFTSyA9IDM7XG5jb25zdCBHRVRfREFUQSA9IDQ7XG5jb25zdCBJTkZMQVRJTkcgPSA1O1xuY29uc3QgREVGRVJfRVZFTlQgPSA2O1xuXG4vKipcbiAqIEh5QmkgUmVjZWl2ZXIgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQGV4dGVuZHMgV3JpdGFibGVcbiAqL1xuY2xhc3MgUmVjZWl2ZXIgZXh0ZW5kcyBXcml0YWJsZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgUmVjZWl2ZXIgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxvd1N5bmNocm9ub3VzRXZlbnRzPXRydWVdIFNwZWNpZmllcyB3aGV0aGVyXG4gICAqICAgICBhbnkgb2YgdGhlIGAnbWVzc2FnZSdgLCBgJ3BpbmcnYCwgYW5kIGAncG9uZydgIGV2ZW50cyBjYW4gYmUgZW1pdHRlZFxuICAgKiAgICAgbXVsdGlwbGUgdGltZXMgaW4gdGhlIHNhbWUgdGlja1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYmluYXJ5VHlwZT1ub2RlYnVmZmVyXSBUaGUgdHlwZSBmb3IgYmluYXJ5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmV4dGVuc2lvbnNdIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBuZWdvdGlhdGVkXG4gICAqICAgICBleHRlbnNpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNTZXJ2ZXI9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIHRvIG9wZXJhdGUgaW5cbiAgICogICAgIGNsaWVudCBvciBzZXJ2ZXIgbW9kZVxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4UGF5bG9hZD0wXSBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2UgbGVuZ3RoXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICAgKiAgICAgbm90IHRvIHNraXAgVVRGLTggdmFsaWRhdGlvbiBmb3IgdGV4dCBhbmQgY2xvc2UgbWVzc2FnZXNcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9hbGxvd1N5bmNocm9ub3VzRXZlbnRzID1cbiAgICAgIG9wdGlvbnMuYWxsb3dTeW5jaHJvbm91c0V2ZW50cyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5hbGxvd1N5bmNocm9ub3VzRXZlbnRzXG4gICAgICAgIDogdHJ1ZTtcbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gb3B0aW9ucy5iaW5hcnlUeXBlIHx8IEJJTkFSWV9UWVBFU1swXTtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gb3B0aW9ucy5leHRlbnNpb25zIHx8IHt9O1xuICAgIHRoaXMuX2lzU2VydmVyID0gISFvcHRpb25zLmlzU2VydmVyO1xuICAgIHRoaXMuX21heFBheWxvYWQgPSBvcHRpb25zLm1heFBheWxvYWQgfCAwO1xuICAgIHRoaXMuX3NraXBVVEY4VmFsaWRhdGlvbiA9ICEhb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb247XG4gICAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPSAwO1xuICAgIHRoaXMuX2J1ZmZlcnMgPSBbXTtcblxuICAgIHRoaXMuX2NvbXByZXNzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9tYXNrID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgIHRoaXMuX21hc2tlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2ZpbiA9IGZhbHNlO1xuICAgIHRoaXMuX29wY29kZSA9IDA7XG5cbiAgICB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSAwO1xuICAgIHRoaXMuX2ZyYWdtZW50cyA9IFtdO1xuXG4gICAgdGhpcy5fZXJyb3JlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudHMgYFdyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUoKWAuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBjaHVuayBUaGUgY2h1bmsgb2YgZGF0YSB0byB3cml0ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW5jb2RpbmcgVGhlIGNoYXJhY3RlciBlbmNvZGluZyBvZiBgY2h1bmtgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICAgIGlmICh0aGlzLl9vcGNvZGUgPT09IDB4MDggJiYgdGhpcy5fc3RhdGUgPT0gR0VUX0lORk8pIHJldHVybiBjYigpO1xuXG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyArPSBjaHVuay5sZW5ndGg7XG4gICAgdGhpcy5fYnVmZmVycy5wdXNoKGNodW5rKTtcbiAgICB0aGlzLnN0YXJ0TG9vcChjYik7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3VtZXMgYG5gIGJ5dGVzIGZyb20gdGhlIGJ1ZmZlcmVkIGRhdGEuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgYnl0ZXMgdG8gY29uc3VtZVxuICAgKiBAcmV0dXJuIHtCdWZmZXJ9IFRoZSBjb25zdW1lZCBieXRlc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3VtZShuKSB7XG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyAtPSBuO1xuXG4gICAgaWYgKG4gPT09IHRoaXMuX2J1ZmZlcnNbMF0ubGVuZ3RoKSByZXR1cm4gdGhpcy5fYnVmZmVycy5zaGlmdCgpO1xuXG4gICAgaWYgKG4gPCB0aGlzLl9idWZmZXJzWzBdLmxlbmd0aCkge1xuICAgICAgY29uc3QgYnVmID0gdGhpcy5fYnVmZmVyc1swXTtcbiAgICAgIHRoaXMuX2J1ZmZlcnNbMF0gPSBuZXcgRmFzdEJ1ZmZlcihcbiAgICAgICAgYnVmLmJ1ZmZlcixcbiAgICAgICAgYnVmLmJ5dGVPZmZzZXQgKyBuLFxuICAgICAgICBidWYubGVuZ3RoIC0gblxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIG5ldyBGYXN0QnVmZmVyKGJ1Zi5idWZmZXIsIGJ1Zi5ieXRlT2Zmc2V0LCBuKTtcbiAgICB9XG5cbiAgICBjb25zdCBkc3QgPSBCdWZmZXIuYWxsb2NVbnNhZmUobik7XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBidWYgPSB0aGlzLl9idWZmZXJzWzBdO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gZHN0Lmxlbmd0aCAtIG47XG5cbiAgICAgIGlmIChuID49IGJ1Zi5sZW5ndGgpIHtcbiAgICAgICAgZHN0LnNldCh0aGlzLl9idWZmZXJzLnNoaWZ0KCksIG9mZnNldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkc3Quc2V0KG5ldyBVaW50OEFycmF5KGJ1Zi5idWZmZXIsIGJ1Zi5ieXRlT2Zmc2V0LCBuKSwgb2Zmc2V0KTtcbiAgICAgICAgdGhpcy5fYnVmZmVyc1swXSA9IG5ldyBGYXN0QnVmZmVyKFxuICAgICAgICAgIGJ1Zi5idWZmZXIsXG4gICAgICAgICAgYnVmLmJ5dGVPZmZzZXQgKyBuLFxuICAgICAgICAgIGJ1Zi5sZW5ndGggLSBuXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG4gLT0gYnVmLmxlbmd0aDtcbiAgICB9IHdoaWxlIChuID4gMCk7XG5cbiAgICByZXR1cm4gZHN0O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgcGFyc2luZyBsb29wLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRMb29wKGNiKSB7XG4gICAgdGhpcy5fbG9vcCA9IHRydWU7XG5cbiAgICBkbyB7XG4gICAgICBzd2l0Y2ggKHRoaXMuX3N0YXRlKSB7XG4gICAgICAgIGNhc2UgR0VUX0lORk86XG4gICAgICAgICAgdGhpcy5nZXRJbmZvKGNiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBHRVRfUEFZTE9BRF9MRU5HVEhfMTY6XG4gICAgICAgICAgdGhpcy5nZXRQYXlsb2FkTGVuZ3RoMTYoY2IpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEdFVF9QQVlMT0FEX0xFTkdUSF82NDpcbiAgICAgICAgICB0aGlzLmdldFBheWxvYWRMZW5ndGg2NChjYik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR0VUX01BU0s6XG4gICAgICAgICAgdGhpcy5nZXRNYXNrKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgR0VUX0RBVEE6XG4gICAgICAgICAgdGhpcy5nZXREYXRhKGNiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBJTkZMQVRJTkc6XG4gICAgICAgIGNhc2UgREVGRVJfRVZFTlQ6XG4gICAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IHdoaWxlICh0aGlzLl9sb29wKTtcblxuICAgIGlmICghdGhpcy5fZXJyb3JlZCkgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgZmlyc3QgdHdvIGJ5dGVzIG9mIGEgZnJhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRJbmZvKGNiKSB7XG4gICAgaWYgKHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPCAyKSB7XG4gICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYnVmID0gdGhpcy5jb25zdW1lKDIpO1xuXG4gICAgaWYgKChidWZbMF0gJiAweDMwKSAhPT0gMHgwMCkge1xuICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAnUlNWMiBhbmQgUlNWMyBtdXN0IGJlIGNsZWFyJyxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgMTAwMixcbiAgICAgICAgJ1dTX0VSUl9VTkVYUEVDVEVEX1JTVl8yXzMnXG4gICAgICApO1xuXG4gICAgICBjYihlcnJvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY29tcHJlc3NlZCA9IChidWZbMF0gJiAweDQwKSA9PT0gMHg0MDtcblxuICAgIGlmIChjb21wcmVzc2VkICYmICF0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoXG4gICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICdSU1YxIG11c3QgYmUgY2xlYXInLFxuICAgICAgICB0cnVlLFxuICAgICAgICAxMDAyLFxuICAgICAgICAnV1NfRVJSX1VORVhQRUNURURfUlNWXzEnXG4gICAgICApO1xuXG4gICAgICBjYihlcnJvcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZmluID0gKGJ1ZlswXSAmIDB4ODApID09PSAweDgwO1xuICAgIHRoaXMuX29wY29kZSA9IGJ1ZlswXSAmIDB4MGY7XG4gICAgdGhpcy5fcGF5bG9hZExlbmd0aCA9IGJ1ZlsxXSAmIDB4N2Y7XG5cbiAgICBpZiAodGhpcy5fb3Bjb2RlID09PSAweDAwKSB7XG4gICAgICBpZiAoY29tcHJlc3NlZCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnUlNWMSBtdXN0IGJlIGNsZWFyJyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9VTkVYUEVDVEVEX1JTVl8xJ1xuICAgICAgICApO1xuXG4gICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuX2ZyYWdtZW50ZWQpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICAgJ2ludmFsaWQgb3Bjb2RlIDAnLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfT1BDT0RFJ1xuICAgICAgICApO1xuXG4gICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9vcGNvZGUgPSB0aGlzLl9mcmFnbWVudGVkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3Bjb2RlID09PSAweDAxIHx8IHRoaXMuX29wY29kZSA9PT0gMHgwMikge1xuICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50ZWQpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICAgYGludmFsaWQgb3Bjb2RlICR7dGhpcy5fb3Bjb2RlfWAsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDAyLFxuICAgICAgICAgICdXU19FUlJfSU5WQUxJRF9PUENPREUnXG4gICAgICAgICk7XG5cbiAgICAgICAgY2IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2NvbXByZXNzZWQgPSBjb21wcmVzc2VkO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fb3Bjb2RlID4gMHgwNyAmJiB0aGlzLl9vcGNvZGUgPCAweDBiKSB7XG4gICAgICBpZiAoIXRoaXMuX2Zpbikge1xuICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnRklOIG11c3QgYmUgc2V0JyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9FWFBFQ1RFRF9GSU4nXG4gICAgICAgICk7XG5cbiAgICAgICAgY2IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChjb21wcmVzc2VkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdSU1YxIG11c3QgYmUgY2xlYXInLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX1VORVhQRUNURURfUlNWXzEnXG4gICAgICAgICk7XG5cbiAgICAgICAgY2IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fcGF5bG9hZExlbmd0aCA+IDB4N2QgfHxcbiAgICAgICAgKHRoaXMuX29wY29kZSA9PT0gMHgwOCAmJiB0aGlzLl9wYXlsb2FkTGVuZ3RoID09PSAxKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgIGBpbnZhbGlkIHBheWxvYWQgbGVuZ3RoICR7dGhpcy5fcGF5bG9hZExlbmd0aH1gLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgMTAwMixcbiAgICAgICAgICAnV1NfRVJSX0lOVkFMSURfQ09OVFJPTF9QQVlMT0FEX0xFTkdUSCdcbiAgICAgICAgKTtcblxuICAgICAgICBjYihlcnJvcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICBgaW52YWxpZCBvcGNvZGUgJHt0aGlzLl9vcGNvZGV9YCxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgMTAwMixcbiAgICAgICAgJ1dTX0VSUl9JTlZBTElEX09QQ09ERSdcbiAgICAgICk7XG5cbiAgICAgIGNiKGVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX2ZpbiAmJiAhdGhpcy5fZnJhZ21lbnRlZCkgdGhpcy5fZnJhZ21lbnRlZCA9IHRoaXMuX29wY29kZTtcbiAgICB0aGlzLl9tYXNrZWQgPSAoYnVmWzFdICYgMHg4MCkgPT09IDB4ODA7XG5cbiAgICBpZiAodGhpcy5faXNTZXJ2ZXIpIHtcbiAgICAgIGlmICghdGhpcy5fbWFza2VkKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihcbiAgICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAgICdNQVNLIG11c3QgYmUgc2V0JyxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIDEwMDIsXG4gICAgICAgICAgJ1dTX0VSUl9FWFBFQ1RFRF9NQVNLJ1xuICAgICAgICApO1xuXG4gICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fbWFza2VkKSB7XG4gICAgICBjb25zdCBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoXG4gICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICdNQVNLIG11c3QgYmUgY2xlYXInLFxuICAgICAgICB0cnVlLFxuICAgICAgICAxMDAyLFxuICAgICAgICAnV1NfRVJSX1VORVhQRUNURURfTUFTSydcbiAgICAgICk7XG5cbiAgICAgIGNiKGVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGF5bG9hZExlbmd0aCA9PT0gMTI2KSB0aGlzLl9zdGF0ZSA9IEdFVF9QQVlMT0FEX0xFTkdUSF8xNjtcbiAgICBlbHNlIGlmICh0aGlzLl9wYXlsb2FkTGVuZ3RoID09PSAxMjcpIHRoaXMuX3N0YXRlID0gR0VUX1BBWUxPQURfTEVOR1RIXzY0O1xuICAgIGVsc2UgdGhpcy5oYXZlTGVuZ3RoKGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGV4dGVuZGVkIHBheWxvYWQgbGVuZ3RoICg3KzE2KS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2IgQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBheWxvYWRMZW5ndGgxNihjYikge1xuICAgIGlmICh0aGlzLl9idWZmZXJlZEJ5dGVzIDwgMikge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3BheWxvYWRMZW5ndGggPSB0aGlzLmNvbnN1bWUoMikucmVhZFVJbnQxNkJFKDApO1xuICAgIHRoaXMuaGF2ZUxlbmd0aChjYik7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBleHRlbmRlZCBwYXlsb2FkIGxlbmd0aCAoNys2NCkuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRQYXlsb2FkTGVuZ3RoNjQoY2IpIHtcbiAgICBpZiAodGhpcy5fYnVmZmVyZWRCeXRlcyA8IDgpIHtcbiAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBidWYgPSB0aGlzLmNvbnN1bWUoOCk7XG4gICAgY29uc3QgbnVtID0gYnVmLnJlYWRVSW50MzJCRSgwKTtcblxuICAgIC8vXG4gICAgLy8gVGhlIG1heGltdW0gc2FmZSBpbnRlZ2VyIGluIEphdmFTY3JpcHQgaXMgMl41MyAtIDEuIEFuIGVycm9yIGlzIHJldHVybmVkXG4gICAgLy8gaWYgcGF5bG9hZCBsZW5ndGggaXMgZ3JlYXRlciB0aGFuIHRoaXMgbnVtYmVyLlxuICAgIC8vXG4gICAgaWYgKG51bSA+IE1hdGgucG93KDIsIDUzIC0gMzIpIC0gMSkge1xuICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICBSYW5nZUVycm9yLFxuICAgICAgICAnVW5zdXBwb3J0ZWQgV2ViU29ja2V0IGZyYW1lOiBwYXlsb2FkIGxlbmd0aCA+IDJeNTMgLSAxJyxcbiAgICAgICAgZmFsc2UsXG4gICAgICAgIDEwMDksXG4gICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfREFUQV9QQVlMT0FEX0xFTkdUSCdcbiAgICAgICk7XG5cbiAgICAgIGNiKGVycm9yKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXlsb2FkTGVuZ3RoID0gbnVtICogTWF0aC5wb3coMiwgMzIpICsgYnVmLnJlYWRVSW50MzJCRSg0KTtcbiAgICB0aGlzLmhhdmVMZW5ndGgoY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBheWxvYWQgbGVuZ3RoIGhhcyBiZWVuIHJlYWQuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXZlTGVuZ3RoKGNiKSB7XG4gICAgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGggJiYgdGhpcy5fb3Bjb2RlIDwgMHgwOCkge1xuICAgICAgdGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoICs9IHRoaXMuX3BheWxvYWRMZW5ndGg7XG4gICAgICBpZiAodGhpcy5fdG90YWxQYXlsb2FkTGVuZ3RoID4gdGhpcy5fbWF4UGF5bG9hZCAmJiB0aGlzLl9tYXhQYXlsb2FkID4gMCkge1xuICAgICAgICBjb25zdCBlcnJvciA9IHRoaXMuY3JlYXRlRXJyb3IoXG4gICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAnTWF4IHBheWxvYWQgc2l6ZSBleGNlZWRlZCcsXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgMTAwOSxcbiAgICAgICAgICAnV1NfRVJSX1VOU1VQUE9SVEVEX01FU1NBR0VfTEVOR1RIJ1xuICAgICAgICApO1xuXG4gICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9tYXNrZWQpIHRoaXMuX3N0YXRlID0gR0VUX01BU0s7XG4gICAgZWxzZSB0aGlzLl9zdGF0ZSA9IEdFVF9EQVRBO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlYWRzIG1hc2sgYnl0ZXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRNYXNrKCkge1xuICAgIGlmICh0aGlzLl9idWZmZXJlZEJ5dGVzIDwgNCkge1xuICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX21hc2sgPSB0aGlzLmNvbnN1bWUoNCk7XG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfREFUQTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyBkYXRhIGJ5dGVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0RGF0YShjYikge1xuICAgIGxldCBkYXRhID0gRU1QVFlfQlVGRkVSO1xuXG4gICAgaWYgKHRoaXMuX3BheWxvYWRMZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9idWZmZXJlZEJ5dGVzIDwgdGhpcy5fcGF5bG9hZExlbmd0aCkge1xuICAgICAgICB0aGlzLl9sb29wID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZGF0YSA9IHRoaXMuY29uc3VtZSh0aGlzLl9wYXlsb2FkTGVuZ3RoKTtcblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLl9tYXNrZWQgJiZcbiAgICAgICAgKHRoaXMuX21hc2tbMF0gfCB0aGlzLl9tYXNrWzFdIHwgdGhpcy5fbWFza1syXSB8IHRoaXMuX21hc2tbM10pICE9PSAwXG4gICAgICApIHtcbiAgICAgICAgdW5tYXNrKGRhdGEsIHRoaXMuX21hc2spO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9vcGNvZGUgPiAweDA3KSB7XG4gICAgICB0aGlzLmNvbnRyb2xNZXNzYWdlKGRhdGEsIGNiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fY29tcHJlc3NlZCkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBJTkZMQVRJTkc7XG4gICAgICB0aGlzLmRlY29tcHJlc3MoZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xuICAgICAgLy9cbiAgICAgIC8vIFRoaXMgbWVzc2FnZSBpcyBub3QgY29tcHJlc3NlZCBzbyBpdHMgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIHBheWxvYWRcbiAgICAgIC8vIGxlbmd0aCBvZiBhbGwgZnJhZ21lbnRzLlxuICAgICAgLy9cbiAgICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGg7XG4gICAgICB0aGlzLl9mcmFnbWVudHMucHVzaChkYXRhKTtcbiAgICB9XG5cbiAgICB0aGlzLmRhdGFNZXNzYWdlKGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvbXByZXNzZXMgZGF0YS5cbiAgICpcbiAgICogQHBhcmFtIHtCdWZmZXJ9IGRhdGEgQ29tcHJlc3NlZCBkYXRhXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiIENhbGxiYWNrXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZWNvbXByZXNzKGRhdGEsIGNiKSB7XG4gICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdO1xuXG4gICAgcGVyTWVzc2FnZURlZmxhdGUuZGVjb21wcmVzcyhkYXRhLCB0aGlzLl9maW4sIChlcnIsIGJ1ZikgPT4ge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNiKGVycik7XG5cbiAgICAgIGlmIChidWYubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggKz0gYnVmLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuX21lc3NhZ2VMZW5ndGggPiB0aGlzLl9tYXhQYXlsb2FkICYmIHRoaXMuX21heFBheWxvYWQgPiAwKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICAgICAgUmFuZ2VFcnJvcixcbiAgICAgICAgICAgICdNYXggcGF5bG9hZCBzaXplIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgMTAwOSxcbiAgICAgICAgICAgICdXU19FUlJfVU5TVVBQT1JURURfTUVTU0FHRV9MRU5HVEgnXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mcmFnbWVudHMucHVzaChidWYpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmRhdGFNZXNzYWdlKGNiKTtcbiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gR0VUX0lORk8pIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGEgZGF0YSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGF0YU1lc3NhZ2UoY2IpIHtcbiAgICBpZiAoIXRoaXMuX2Zpbikge1xuICAgICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXNzYWdlTGVuZ3RoID0gdGhpcy5fbWVzc2FnZUxlbmd0aDtcbiAgICBjb25zdCBmcmFnbWVudHMgPSB0aGlzLl9mcmFnbWVudHM7XG5cbiAgICB0aGlzLl90b3RhbFBheWxvYWRMZW5ndGggPSAwO1xuICAgIHRoaXMuX21lc3NhZ2VMZW5ndGggPSAwO1xuICAgIHRoaXMuX2ZyYWdtZW50ZWQgPSAwO1xuICAgIHRoaXMuX2ZyYWdtZW50cyA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMikge1xuICAgICAgbGV0IGRhdGE7XG5cbiAgICAgIGlmICh0aGlzLl9iaW5hcnlUeXBlID09PSAnbm9kZWJ1ZmZlcicpIHtcbiAgICAgICAgZGF0YSA9IGNvbmNhdChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9iaW5hcnlUeXBlID09PSAnYXJyYXlidWZmZXInKSB7XG4gICAgICAgIGRhdGEgPSB0b0FycmF5QnVmZmVyKGNvbmNhdChmcmFnbWVudHMsIG1lc3NhZ2VMZW5ndGgpKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYmluYXJ5VHlwZSA9PT0gJ2Jsb2InKSB7XG4gICAgICAgIGRhdGEgPSBuZXcgQmxvYihmcmFnbWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGZyYWdtZW50cztcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX2FsbG93U3luY2hyb25vdXNFdmVudHMpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlJywgZGF0YSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gR0VUX0lORk87XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IERFRkVSX0VWRU5UO1xuICAgICAgICBzZXRJbW1lZGlhdGUoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIGRhdGEsIHRydWUpO1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gR0VUX0lORk87XG4gICAgICAgICAgdGhpcy5zdGFydExvb3AoY2IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnVmID0gY29uY2F0KGZyYWdtZW50cywgbWVzc2FnZUxlbmd0aCk7XG5cbiAgICAgIGlmICghdGhpcy5fc2tpcFVURjhWYWxpZGF0aW9uICYmICFpc1ZhbGlkVVRGOChidWYpKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihcbiAgICAgICAgICBFcnJvcixcbiAgICAgICAgICAnaW52YWxpZCBVVEYtOCBzZXF1ZW5jZScsXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAxMDA3LFxuICAgICAgICAgICdXU19FUlJfSU5WQUxJRF9VVEY4J1xuICAgICAgICApO1xuXG4gICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IElORkxBVElORyB8fCB0aGlzLl9hbGxvd1N5bmNocm9ub3VzRXZlbnRzKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnbWVzc2FnZScsIGJ1ZiwgZmFsc2UpO1xuICAgICAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBERUZFUl9FVkVOVDtcbiAgICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2UnLCBidWYsIGZhbHNlKTtcbiAgICAgICAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICAgICAgICAgIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYSBjb250cm9sIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBkYXRhIERhdGEgdG8gaGFuZGxlXG4gICAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yfHVuZGVmaW5lZCl9IEEgcG9zc2libGUgZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnRyb2xNZXNzYWdlKGRhdGEsIGNiKSB7XG4gICAgaWYgKHRoaXMuX29wY29kZSA9PT0gMHgwOCkge1xuICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25jbHVkZScsIDEwMDUsIEVNUFRZX0JVRkZFUik7XG4gICAgICAgIHRoaXMuZW5kKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBjb2RlID0gZGF0YS5yZWFkVUludDE2QkUoMCk7XG5cbiAgICAgICAgaWYgKCFpc1ZhbGlkU3RhdHVzQ29kZShjb2RlKSkge1xuICAgICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5jcmVhdGVFcnJvcihcbiAgICAgICAgICAgIFJhbmdlRXJyb3IsXG4gICAgICAgICAgICBgaW52YWxpZCBzdGF0dXMgY29kZSAke2NvZGV9YCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAxMDAyLFxuICAgICAgICAgICAgJ1dTX0VSUl9JTlZBTElEX0NMT1NFX0NPREUnXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGNiKGVycm9yKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidWYgPSBuZXcgRmFzdEJ1ZmZlcihcbiAgICAgICAgICBkYXRhLmJ1ZmZlcixcbiAgICAgICAgICBkYXRhLmJ5dGVPZmZzZXQgKyAyLFxuICAgICAgICAgIGRhdGEubGVuZ3RoIC0gMlxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghdGhpcy5fc2tpcFVURjhWYWxpZGF0aW9uICYmICFpc1ZhbGlkVVRGOChidWYpKSB7XG4gICAgICAgICAgY29uc3QgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yKFxuICAgICAgICAgICAgRXJyb3IsXG4gICAgICAgICAgICAnaW52YWxpZCBVVEYtOCBzZXF1ZW5jZScsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgMTAwNyxcbiAgICAgICAgICAgICdXU19FUlJfSU5WQUxJRF9VVEY4J1xuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjYihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVtaXQoJ2NvbmNsdWRlJywgY29kZSwgYnVmKTtcbiAgICAgICAgdGhpcy5lbmQoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fc3RhdGUgPSBHRVRfSU5GTztcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWxsb3dTeW5jaHJvbm91c0V2ZW50cykge1xuICAgICAgdGhpcy5lbWl0KHRoaXMuX29wY29kZSA9PT0gMHgwOSA/ICdwaW5nJyA6ICdwb25nJywgZGF0YSk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IEdFVF9JTkZPO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IERFRkVSX0VWRU5UO1xuICAgICAgc2V0SW1tZWRpYXRlKCgpID0+IHtcbiAgICAgICAgdGhpcy5lbWl0KHRoaXMuX29wY29kZSA9PT0gMHgwOSA/ICdwaW5nJyA6ICdwb25nJywgZGF0YSk7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gR0VUX0lORk87XG4gICAgICAgIHRoaXMuc3RhcnRMb29wKGNiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgYW4gZXJyb3Igb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpFcnJvcnxSYW5nZUVycm9yKX0gRXJyb3JDdG9yIFRoZSBlcnJvciBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHByZWZpeCBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gYWRkIGEgZGVmYXVsdCBwcmVmaXggdG9cbiAgICogICAgIGBtZXNzYWdlYFxuICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzQ29kZSBUaGUgc3RhdHVzIGNvZGVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVycm9yQ29kZSBUaGUgZXhwb3NlZCBlcnJvciBjb2RlXG4gICAqIEByZXR1cm4geyhFcnJvcnxSYW5nZUVycm9yKX0gVGhlIGVycm9yXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVFcnJvcihFcnJvckN0b3IsIG1lc3NhZ2UsIHByZWZpeCwgc3RhdHVzQ29kZSwgZXJyb3JDb2RlKSB7XG4gICAgdGhpcy5fbG9vcCA9IGZhbHNlO1xuICAgIHRoaXMuX2Vycm9yZWQgPSB0cnVlO1xuXG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yQ3RvcihcbiAgICAgIHByZWZpeCA/IGBJbnZhbGlkIFdlYlNvY2tldCBmcmFtZTogJHttZXNzYWdlfWAgOiBtZXNzYWdlXG4gICAgKTtcblxuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGVyciwgdGhpcy5jcmVhdGVFcnJvcik7XG4gICAgZXJyLmNvZGUgPSBlcnJvckNvZGU7XG4gICAgZXJyW2tTdGF0dXNDb2RlXSA9IHN0YXR1c0NvZGU7XG4gICAgcmV0dXJuIGVycjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlY2VpdmVyO1xuIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBbXCJlcnJvclwiLCB7IFwidmFyc0lnbm9yZVBhdHRlcm5cIjogXCJeRHVwbGV4XCIgfV0gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IER1cGxleCB9ID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5jb25zdCB7IHJhbmRvbUZpbGxTeW5jIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcblxuY29uc3QgUGVyTWVzc2FnZURlZmxhdGUgPSByZXF1aXJlKCcuL3Blcm1lc3NhZ2UtZGVmbGF0ZScpO1xuY29uc3QgeyBFTVBUWV9CVUZGRVIsIGtXZWJTb2NrZXQsIE5PT1AgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCB7IGlzQmxvYiwgaXNWYWxpZFN0YXR1c0NvZGUgfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuY29uc3QgeyBtYXNrOiBhcHBseU1hc2ssIHRvQnVmZmVyIH0gPSByZXF1aXJlKCcuL2J1ZmZlci11dGlsJyk7XG5cbmNvbnN0IGtCeXRlTGVuZ3RoID0gU3ltYm9sKCdrQnl0ZUxlbmd0aCcpO1xuY29uc3QgbWFza0J1ZmZlciA9IEJ1ZmZlci5hbGxvYyg0KTtcbmNvbnN0IFJBTkRPTV9QT09MX1NJWkUgPSA4ICogMTAyNDtcbmxldCByYW5kb21Qb29sO1xubGV0IHJhbmRvbVBvb2xQb2ludGVyID0gUkFORE9NX1BPT0xfU0laRTtcblxuY29uc3QgREVGQVVMVCA9IDA7XG5jb25zdCBERUZMQVRJTkcgPSAxO1xuY29uc3QgR0VUX0JMT0JfREFUQSA9IDI7XG5cbi8qKlxuICogSHlCaSBTZW5kZXIgaW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIFNlbmRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgU2VuZGVyIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0R1cGxleH0gc29ja2V0IFRoZSBjb25uZWN0aW9uIHNvY2tldFxuICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dGVuc2lvbnNdIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBuZWdvdGlhdGVkIGV4dGVuc2lvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2dlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIG1hc2tpbmdcbiAgICogICAgIGtleVxuICAgKi9cbiAgY29uc3RydWN0b3Ioc29ja2V0LCBleHRlbnNpb25zLCBnZW5lcmF0ZU1hc2spIHtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gZXh0ZW5zaW9ucyB8fCB7fTtcblxuICAgIGlmIChnZW5lcmF0ZU1hc2spIHtcbiAgICAgIHRoaXMuX2dlbmVyYXRlTWFzayA9IGdlbmVyYXRlTWFzaztcbiAgICAgIHRoaXMuX21hc2tCdWZmZXIgPSBCdWZmZXIuYWxsb2MoNCk7XG4gICAgfVxuXG4gICAgdGhpcy5fc29ja2V0ID0gc29ja2V0O1xuXG4gICAgdGhpcy5fZmlyc3RGcmFnbWVudCA9IHRydWU7XG4gICAgdGhpcy5fY29tcHJlc3MgPSBmYWxzZTtcblxuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgPSAwO1xuICAgIHRoaXMuX3F1ZXVlID0gW107XG4gICAgdGhpcy5fc3RhdGUgPSBERUZBVUxUO1xuICAgIHRoaXMub25lcnJvciA9IE5PT1A7XG4gICAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGcmFtZXMgYSBwaWVjZSBvZiBkYXRhIGFjY29yZGluZyB0byB0aGUgSHlCaSBXZWJTb2NrZXQgcHJvdG9jb2wuXG4gICAqXG4gICAqIEBwYXJhbSB7KEJ1ZmZlcnxTdHJpbmcpfSBkYXRhIFRoZSBkYXRhIHRvIGZyYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgb2JqZWN0XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZmluPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZVxuICAgKiAgICAgRklOIGJpdFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZW5lcmF0ZU1hc2tdIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIHRoZVxuICAgKiAgICAgbWFza2luZyBrZXlcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5tYXNrPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFza1xuICAgKiAgICAgYGRhdGFgXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBbb3B0aW9ucy5tYXNrQnVmZmVyXSBUaGUgYnVmZmVyIHVzZWQgdG8gc3RvcmUgdGhlIG1hc2tpbmdcbiAgICogICAgIGtleVxuICAgKiBAcGFyYW0ge051bWJlcn0gb3B0aW9ucy5vcGNvZGUgVGhlIG9wY29kZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJlYWRPbmx5PWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBgZGF0YWAgY2FuIGJlXG4gICAqICAgICBtb2RpZmllZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnJzdjE9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBzZXQgdGhlXG4gICAqICAgICBSU1YxIGJpdFxuICAgKiBAcmV0dXJuIHsoQnVmZmVyfFN0cmluZylbXX0gVGhlIGZyYW1lZCBkYXRhXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBmcmFtZShkYXRhLCBvcHRpb25zKSB7XG4gICAgbGV0IG1hc2s7XG4gICAgbGV0IG1lcmdlID0gZmFsc2U7XG4gICAgbGV0IG9mZnNldCA9IDI7XG4gICAgbGV0IHNraXBNYXNraW5nID0gZmFsc2U7XG5cbiAgICBpZiAob3B0aW9ucy5tYXNrKSB7XG4gICAgICBtYXNrID0gb3B0aW9ucy5tYXNrQnVmZmVyIHx8IG1hc2tCdWZmZXI7XG5cbiAgICAgIGlmIChvcHRpb25zLmdlbmVyYXRlTWFzaykge1xuICAgICAgICBvcHRpb25zLmdlbmVyYXRlTWFzayhtYXNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyYW5kb21Qb29sUG9pbnRlciA9PT0gUkFORE9NX1BPT0xfU0laRSkge1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICAqL1xuICAgICAgICAgIGlmIChyYW5kb21Qb29sID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGxhemlseSBpbml0aWFsaXplZCBiZWNhdXNlIHNlcnZlci1zZW50IGZyYW1lcyBtdXN0IG5vdFxuICAgICAgICAgICAgLy8gYmUgbWFza2VkIHNvIGl0IG1heSBuZXZlciBiZSB1c2VkLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHJhbmRvbVBvb2wgPSBCdWZmZXIuYWxsb2MoUkFORE9NX1BPT0xfU0laRSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmFuZG9tRmlsbFN5bmMocmFuZG9tUG9vbCwgMCwgUkFORE9NX1BPT0xfU0laRSk7XG4gICAgICAgICAgcmFuZG9tUG9vbFBvaW50ZXIgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgbWFza1swXSA9IHJhbmRvbVBvb2xbcmFuZG9tUG9vbFBvaW50ZXIrK107XG4gICAgICAgIG1hc2tbMV0gPSByYW5kb21Qb29sW3JhbmRvbVBvb2xQb2ludGVyKytdO1xuICAgICAgICBtYXNrWzJdID0gcmFuZG9tUG9vbFtyYW5kb21Qb29sUG9pbnRlcisrXTtcbiAgICAgICAgbWFza1szXSA9IHJhbmRvbVBvb2xbcmFuZG9tUG9vbFBvaW50ZXIrK107XG4gICAgICB9XG5cbiAgICAgIHNraXBNYXNraW5nID0gKG1hc2tbMF0gfCBtYXNrWzFdIHwgbWFza1syXSB8IG1hc2tbM10pID09PSAwO1xuICAgICAgb2Zmc2V0ID0gNjtcbiAgICB9XG5cbiAgICBsZXQgZGF0YUxlbmd0aDtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKCFvcHRpb25zLm1hc2sgfHwgc2tpcE1hc2tpbmcpICYmXG4gICAgICAgIG9wdGlvbnNba0J5dGVMZW5ndGhdICE9PSB1bmRlZmluZWRcbiAgICAgICkge1xuICAgICAgICBkYXRhTGVuZ3RoID0gb3B0aW9uc1trQnl0ZUxlbmd0aF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gQnVmZmVyLmZyb20oZGF0YSk7XG4gICAgICAgIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgbWVyZ2UgPSBvcHRpb25zLm1hc2sgJiYgb3B0aW9ucy5yZWFkT25seSAmJiAhc2tpcE1hc2tpbmc7XG4gICAgfVxuXG4gICAgbGV0IHBheWxvYWRMZW5ndGggPSBkYXRhTGVuZ3RoO1xuXG4gICAgaWYgKGRhdGFMZW5ndGggPj0gNjU1MzYpIHtcbiAgICAgIG9mZnNldCArPSA4O1xuICAgICAgcGF5bG9hZExlbmd0aCA9IDEyNztcbiAgICB9IGVsc2UgaWYgKGRhdGFMZW5ndGggPiAxMjUpIHtcbiAgICAgIG9mZnNldCArPSAyO1xuICAgICAgcGF5bG9hZExlbmd0aCA9IDEyNjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobWVyZ2UgPyBkYXRhTGVuZ3RoICsgb2Zmc2V0IDogb2Zmc2V0KTtcblxuICAgIHRhcmdldFswXSA9IG9wdGlvbnMuZmluID8gb3B0aW9ucy5vcGNvZGUgfCAweDgwIDogb3B0aW9ucy5vcGNvZGU7XG4gICAgaWYgKG9wdGlvbnMucnN2MSkgdGFyZ2V0WzBdIHw9IDB4NDA7XG5cbiAgICB0YXJnZXRbMV0gPSBwYXlsb2FkTGVuZ3RoO1xuXG4gICAgaWYgKHBheWxvYWRMZW5ndGggPT09IDEyNikge1xuICAgICAgdGFyZ2V0LndyaXRlVUludDE2QkUoZGF0YUxlbmd0aCwgMik7XG4gICAgfSBlbHNlIGlmIChwYXlsb2FkTGVuZ3RoID09PSAxMjcpIHtcbiAgICAgIHRhcmdldFsyXSA9IHRhcmdldFszXSA9IDA7XG4gICAgICB0YXJnZXQud3JpdGVVSW50QkUoZGF0YUxlbmd0aCwgNCwgNik7XG4gICAgfVxuXG4gICAgaWYgKCFvcHRpb25zLm1hc2spIHJldHVybiBbdGFyZ2V0LCBkYXRhXTtcblxuICAgIHRhcmdldFsxXSB8PSAweDgwO1xuICAgIHRhcmdldFtvZmZzZXQgLSA0XSA9IG1hc2tbMF07XG4gICAgdGFyZ2V0W29mZnNldCAtIDNdID0gbWFza1sxXTtcbiAgICB0YXJnZXRbb2Zmc2V0IC0gMl0gPSBtYXNrWzJdO1xuICAgIHRhcmdldFtvZmZzZXQgLSAxXSA9IG1hc2tbM107XG5cbiAgICBpZiAoc2tpcE1hc2tpbmcpIHJldHVybiBbdGFyZ2V0LCBkYXRhXTtcblxuICAgIGlmIChtZXJnZSkge1xuICAgICAgYXBwbHlNYXNrKGRhdGEsIG1hc2ssIHRhcmdldCwgb2Zmc2V0LCBkYXRhTGVuZ3RoKTtcbiAgICAgIHJldHVybiBbdGFyZ2V0XTtcbiAgICB9XG5cbiAgICBhcHBseU1hc2soZGF0YSwgbWFzaywgZGF0YSwgMCwgZGF0YUxlbmd0aCk7XG4gICAgcmV0dXJuIFt0YXJnZXQsIGRhdGFdO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgY2xvc2UgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtjb2RlXSBUaGUgc3RhdHVzIGNvZGUgY29tcG9uZW50IG9mIHRoZSBib2R5XG4gICAqIEBwYXJhbSB7KFN0cmluZ3xCdWZmZXIpfSBbZGF0YV0gVGhlIG1lc3NhZ2UgY29tcG9uZW50IG9mIHRoZSBib2R5XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW21hc2s9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIHRoZSBtZXNzYWdlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xvc2UoY29kZSwgZGF0YSwgbWFzaywgY2IpIHtcbiAgICBsZXQgYnVmO1xuXG4gICAgaWYgKGNvZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgYnVmID0gRU1QVFlfQlVGRkVSO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvZGUgIT09ICdudW1iZXInIHx8ICFpc1ZhbGlkU3RhdHVzQ29kZShjb2RlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHZhbGlkIGVycm9yIGNvZGUgbnVtYmVyJyk7XG4gICAgfSBlbHNlIGlmIChkYXRhID09PSB1bmRlZmluZWQgfHwgIWRhdGEubGVuZ3RoKSB7XG4gICAgICBidWYgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMik7XG4gICAgICBidWYud3JpdGVVSW50MTZCRShjb2RlLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgoZGF0YSk7XG5cbiAgICAgIGlmIChsZW5ndGggPiAxMjMpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSBtZXNzYWdlIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAxMjMgYnl0ZXMnKTtcbiAgICAgIH1cblxuICAgICAgYnVmID0gQnVmZmVyLmFsbG9jVW5zYWZlKDIgKyBsZW5ndGgpO1xuICAgICAgYnVmLndyaXRlVUludDE2QkUoY29kZSwgMCk7XG5cbiAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgYnVmLndyaXRlKGRhdGEsIDIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmLnNldChkYXRhLCAyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgW2tCeXRlTGVuZ3RoXTogYnVmLmxlbmd0aCxcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgbWFzayxcbiAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICBvcGNvZGU6IDB4MDgsXG4gICAgICByZWFkT25seTogZmFsc2UsXG4gICAgICByc3YxOiBmYWxzZVxuICAgIH07XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgIT09IERFRkFVTFQpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgYnVmLCBmYWxzZSwgb3B0aW9ucywgY2JdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGJ1Ziwgb3B0aW9ucyksIGNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgYSBwaW5nIG1lc3NhZ2UgdG8gdGhlIG90aGVyIHBlZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW21hc2s9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHBpbmcoZGF0YSwgbWFzaywgY2IpIHtcbiAgICBsZXQgYnl0ZUxlbmd0aDtcbiAgICBsZXQgcmVhZE9ubHk7XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICBieXRlTGVuZ3RoID0gQnVmZmVyLmJ5dGVMZW5ndGgoZGF0YSk7XG4gICAgICByZWFkT25seSA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoaXNCbG9iKGRhdGEpKSB7XG4gICAgICBieXRlTGVuZ3RoID0gZGF0YS5zaXplO1xuICAgICAgcmVhZE9ubHkgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IHRvQnVmZmVyKGRhdGEpO1xuICAgICAgYnl0ZUxlbmd0aCA9IGRhdGEubGVuZ3RoO1xuICAgICAgcmVhZE9ubHkgPSB0b0J1ZmZlci5yZWFkT25seTtcbiAgICB9XG5cbiAgICBpZiAoYnl0ZUxlbmd0aCA+IDEyNSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSBkYXRhIHNpemUgbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIDEyNSBieXRlcycpO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBba0J5dGVMZW5ndGhdOiBieXRlTGVuZ3RoLFxuICAgICAgZmluOiB0cnVlLFxuICAgICAgZ2VuZXJhdGVNYXNrOiB0aGlzLl9nZW5lcmF0ZU1hc2ssXG4gICAgICBtYXNrLFxuICAgICAgbWFza0J1ZmZlcjogdGhpcy5fbWFza0J1ZmZlcixcbiAgICAgIG9wY29kZTogMHgwOSxcbiAgICAgIHJlYWRPbmx5LFxuICAgICAgcnN2MTogZmFsc2VcbiAgICB9O1xuXG4gICAgaWYgKGlzQmxvYihkYXRhKSkge1xuICAgICAgaWYgKHRoaXMuX3N0YXRlICE9PSBERUZBVUxUKSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5nZXRCbG9iRGF0YSwgZGF0YSwgZmFsc2UsIG9wdGlvbnMsIGNiXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmdldEJsb2JEYXRhKGRhdGEsIGZhbHNlLCBvcHRpb25zLCBjYik7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLl9zdGF0ZSAhPT0gREVGQVVMVCkge1xuICAgICAgdGhpcy5lbnF1ZXVlKFt0aGlzLmRpc3BhdGNoLCBkYXRhLCBmYWxzZSwgb3B0aW9ucywgY2JdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIG9wdGlvbnMpLCBjYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgcG9uZyBtZXNzYWdlIHRvIHRoZSBvdGhlciBwZWVyLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGRhdGEgVGhlIG1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFttYXNrPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gbWFzayBgZGF0YWBcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFja1xuICAgKiBAcHVibGljXG4gICAqL1xuICBwb25nKGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgbGV0IGJ5dGVMZW5ndGg7XG4gICAgbGV0IHJlYWRPbmx5O1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgYnl0ZUxlbmd0aCA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpO1xuICAgICAgcmVhZE9ubHkgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGlzQmxvYihkYXRhKSkge1xuICAgICAgYnl0ZUxlbmd0aCA9IGRhdGEuc2l6ZTtcbiAgICAgIHJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB0b0J1ZmZlcihkYXRhKTtcbiAgICAgIGJ5dGVMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIHJlYWRPbmx5ID0gdG9CdWZmZXIucmVhZE9ubHk7XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVMZW5ndGggPiAxMjUpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgZGF0YSBzaXplIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAxMjUgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgW2tCeXRlTGVuZ3RoXTogYnl0ZUxlbmd0aCxcbiAgICAgIGZpbjogdHJ1ZSxcbiAgICAgIGdlbmVyYXRlTWFzazogdGhpcy5fZ2VuZXJhdGVNYXNrLFxuICAgICAgbWFzayxcbiAgICAgIG1hc2tCdWZmZXI6IHRoaXMuX21hc2tCdWZmZXIsXG4gICAgICBvcGNvZGU6IDB4MGEsXG4gICAgICByZWFkT25seSxcbiAgICAgIHJzdjE6IGZhbHNlXG4gICAgfTtcblxuICAgIGlmIChpc0Jsb2IoZGF0YSkpIHtcbiAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gREVGQVVMVCkge1xuICAgICAgICB0aGlzLmVucXVldWUoW3RoaXMuZ2V0QmxvYkRhdGEsIGRhdGEsIGZhbHNlLCBvcHRpb25zLCBjYl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5nZXRCbG9iRGF0YShkYXRhLCBmYWxzZSwgb3B0aW9ucywgY2IpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fc3RhdGUgIT09IERFRkFVTFQpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgZGF0YSwgZmFsc2UsIG9wdGlvbnMsIGNiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VuZEZyYW1lKFNlbmRlci5mcmFtZShkYXRhLCBvcHRpb25zKSwgY2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBhIGRhdGEgbWVzc2FnZSB0byB0aGUgb3RoZXIgcGVlci5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5iaW5hcnk9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBpcyBiaW5hcnlcbiAgICogICAgIG9yIHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jb21wcmVzcz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvXG4gICAqICAgICBjb21wcmVzcyBgZGF0YWBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5maW49ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIHRoZSBmcmFnbWVudCBpcyB0aGVcbiAgICogICAgIGxhc3Qgb25lXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2tcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNlbmQoZGF0YSwgb3B0aW9ucywgY2IpIHtcbiAgICBjb25zdCBwZXJNZXNzYWdlRGVmbGF0ZSA9IHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV07XG4gICAgbGV0IG9wY29kZSA9IG9wdGlvbnMuYmluYXJ5ID8gMiA6IDE7XG4gICAgbGV0IHJzdjEgPSBvcHRpb25zLmNvbXByZXNzO1xuXG4gICAgbGV0IGJ5dGVMZW5ndGg7XG4gICAgbGV0IHJlYWRPbmx5O1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgYnl0ZUxlbmd0aCA9IEJ1ZmZlci5ieXRlTGVuZ3RoKGRhdGEpO1xuICAgICAgcmVhZE9ubHkgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGlzQmxvYihkYXRhKSkge1xuICAgICAgYnl0ZUxlbmd0aCA9IGRhdGEuc2l6ZTtcbiAgICAgIHJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSB0b0J1ZmZlcihkYXRhKTtcbiAgICAgIGJ5dGVMZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgIHJlYWRPbmx5ID0gdG9CdWZmZXIucmVhZE9ubHk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2ZpcnN0RnJhZ21lbnQpIHtcbiAgICAgIHRoaXMuX2ZpcnN0RnJhZ21lbnQgPSBmYWxzZTtcbiAgICAgIGlmIChcbiAgICAgICAgcnN2MSAmJlxuICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZSAmJlxuICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZS5wYXJhbXNbXG4gICAgICAgICAgcGVyTWVzc2FnZURlZmxhdGUuX2lzU2VydmVyXG4gICAgICAgICAgICA/ICdzZXJ2ZXJfbm9fY29udGV4dF90YWtlb3ZlcidcbiAgICAgICAgICAgIDogJ2NsaWVudF9ub19jb250ZXh0X3Rha2VvdmVyJ1xuICAgICAgICBdXG4gICAgICApIHtcbiAgICAgICAgcnN2MSA9IGJ5dGVMZW5ndGggPj0gcGVyTWVzc2FnZURlZmxhdGUuX3RocmVzaG9sZDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NvbXByZXNzID0gcnN2MTtcbiAgICB9IGVsc2Uge1xuICAgICAgcnN2MSA9IGZhbHNlO1xuICAgICAgb3Bjb2RlID0gMDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5maW4pIHRoaXMuX2ZpcnN0RnJhZ21lbnQgPSB0cnVlO1xuXG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIFtrQnl0ZUxlbmd0aF06IGJ5dGVMZW5ndGgsXG4gICAgICBmaW46IG9wdGlvbnMuZmluLFxuICAgICAgZ2VuZXJhdGVNYXNrOiB0aGlzLl9nZW5lcmF0ZU1hc2ssXG4gICAgICBtYXNrOiBvcHRpb25zLm1hc2ssXG4gICAgICBtYXNrQnVmZmVyOiB0aGlzLl9tYXNrQnVmZmVyLFxuICAgICAgb3Bjb2RlLFxuICAgICAgcmVhZE9ubHksXG4gICAgICByc3YxXG4gICAgfTtcblxuICAgIGlmIChpc0Jsb2IoZGF0YSkpIHtcbiAgICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gREVGQVVMVCkge1xuICAgICAgICB0aGlzLmVucXVldWUoW3RoaXMuZ2V0QmxvYkRhdGEsIGRhdGEsIHRoaXMuX2NvbXByZXNzLCBvcHRzLCBjYl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5nZXRCbG9iRGF0YShkYXRhLCB0aGlzLl9jb21wcmVzcywgb3B0cywgY2IpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fc3RhdGUgIT09IERFRkFVTFQpIHtcbiAgICAgIHRoaXMuZW5xdWV1ZShbdGhpcy5kaXNwYXRjaCwgZGF0YSwgdGhpcy5fY29tcHJlc3MsIG9wdHMsIGNiXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2goZGF0YSwgdGhpcy5fY29tcHJlc3MsIG9wdHMsIGNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgY29udGVudHMgb2YgYSBibG9iIGFzIGJpbmFyeSBkYXRhLlxuICAgKlxuICAgKiBAcGFyYW0ge0Jsb2J9IGJsb2IgVGhlIGJsb2JcbiAgICogQHBhcmFtIHtCb29sZWFufSBbY29tcHJlc3M9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBjb21wcmVzc1xuICAgKiAgICAgdGhlIGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5maW49ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBzZXQgdGhlXG4gICAqICAgICBGSU4gYml0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlXG4gICAqICAgICBtYXNraW5nIGtleVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm1hc2s9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrXG4gICAqICAgICBgZGF0YWBcbiAgICogQHBhcmFtIHtCdWZmZXJ9IFtvcHRpb25zLm1hc2tCdWZmZXJdIFRoZSBidWZmZXIgdXNlZCB0byBzdG9yZSB0aGUgbWFza2luZ1xuICAgKiAgICAga2V5XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25zLm9wY29kZSBUaGUgb3Bjb2RlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMucmVhZE9ubHk9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIGBkYXRhYCBjYW4gYmVcbiAgICogICAgIG1vZGlmaWVkXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMucnN2MT1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCB0aGVcbiAgICogICAgIFJTVjEgYml0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2tcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEJsb2JEYXRhKGJsb2IsIGNvbXByZXNzLCBvcHRpb25zLCBjYikge1xuICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgKz0gb3B0aW9uc1trQnl0ZUxlbmd0aF07XG4gICAgdGhpcy5fc3RhdGUgPSBHRVRfQkxPQl9EQVRBO1xuXG4gICAgYmxvYlxuICAgICAgLmFycmF5QnVmZmVyKClcbiAgICAgIC50aGVuKChhcnJheUJ1ZmZlcikgPT4ge1xuICAgICAgICBpZiAodGhpcy5fc29ja2V0LmRlc3Ryb3llZCkge1xuICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdUaGUgc29ja2V0IHdhcyBjbG9zZWQgd2hpbGUgdGhlIGJsb2Igd2FzIGJlaW5nIHJlYWQnXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gYGNhbGxDYWxsYmFja3NgIGlzIGNhbGxlZCBpbiB0aGUgbmV4dCB0aWNrIHRvIGVuc3VyZSB0aGF0IGVycm9yc1xuICAgICAgICAgIC8vIHRoYXQgbWlnaHQgYmUgdGhyb3duIGluIHRoZSBjYWxsYmFja3MgYmVoYXZlIGxpa2UgZXJyb3JzIHRocm93blxuICAgICAgICAgIC8vIG91dHNpZGUgdGhlIHByb21pc2UgY2hhaW4uXG4gICAgICAgICAgLy9cbiAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGNhbGxDYWxsYmFja3MsIHRoaXMsIGVyciwgY2IpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gb3B0aW9uc1trQnl0ZUxlbmd0aF07XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0b0J1ZmZlcihhcnJheUJ1ZmZlcik7XG5cbiAgICAgICAgaWYgKCFjb21wcmVzcykge1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gREVGQVVMVDtcbiAgICAgICAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoZGF0YSwgb3B0aW9ucyksIGNiKTtcbiAgICAgICAgICB0aGlzLmRlcXVldWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoKGRhdGEsIGNvbXByZXNzLCBvcHRpb25zLCBjYik7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAvL1xuICAgICAgICAvLyBgb25FcnJvcmAgaXMgY2FsbGVkIGluIHRoZSBuZXh0IHRpY2sgZm9yIHRoZSBzYW1lIHJlYXNvbiB0aGF0XG4gICAgICAgIC8vIGBjYWxsQ2FsbGJhY2tzYCBhYm92ZSBpcy5cbiAgICAgICAgLy9cbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhvbkVycm9yLCB0aGlzLCBlcnIsIGNiKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBtZXNzYWdlLlxuICAgKlxuICAgKiBAcGFyYW0geyhCdWZmZXJ8U3RyaW5nKX0gZGF0YSBUaGUgbWVzc2FnZSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2NvbXByZXNzPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gY29tcHJlc3NcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZpbj1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIHNldCB0aGVcbiAgICogICAgIEZJTiBiaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuZ2VuZXJhdGVNYXNrXSBUaGUgZnVuY3Rpb24gdXNlZCB0byBnZW5lcmF0ZSB0aGVcbiAgICogICAgIG1hc2tpbmcga2V5XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWFzaz1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2tcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gW29wdGlvbnMubWFza0J1ZmZlcl0gVGhlIGJ1ZmZlciB1c2VkIHRvIHN0b3JlIHRoZSBtYXNraW5nXG4gICAqICAgICBrZXlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdGlvbnMub3Bjb2RlIFRoZSBvcGNvZGVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yZWFkT25seT1mYWxzZV0gU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGNhbiBiZVxuICAgKiAgICAgbW9kaWZpZWRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5yc3YxPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZVxuICAgKiAgICAgUlNWMSBiaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzcGF0Y2goZGF0YSwgY29tcHJlc3MsIG9wdGlvbnMsIGNiKSB7XG4gICAgaWYgKCFjb21wcmVzcykge1xuICAgICAgdGhpcy5zZW5kRnJhbWUoU2VuZGVyLmZyYW1lKGRhdGEsIG9wdGlvbnMpLCBjYik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGVyTWVzc2FnZURlZmxhdGUgPSB0aGlzLl9leHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdO1xuXG4gICAgdGhpcy5fYnVmZmVyZWRCeXRlcyArPSBvcHRpb25zW2tCeXRlTGVuZ3RoXTtcbiAgICB0aGlzLl9zdGF0ZSA9IERFRkxBVElORztcbiAgICBwZXJNZXNzYWdlRGVmbGF0ZS5jb21wcmVzcyhkYXRhLCBvcHRpb25zLmZpbiwgKF8sIGJ1ZikgPT4ge1xuICAgICAgaWYgKHRoaXMuX3NvY2tldC5kZXN0cm95ZWQpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKFxuICAgICAgICAgICdUaGUgc29ja2V0IHdhcyBjbG9zZWQgd2hpbGUgZGF0YSB3YXMgYmVpbmcgY29tcHJlc3NlZCdcbiAgICAgICAgKTtcblxuICAgICAgICBjYWxsQ2FsbGJhY2tzKHRoaXMsIGVyciwgY2IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2J1ZmZlcmVkQnl0ZXMgLT0gb3B0aW9uc1trQnl0ZUxlbmd0aF07XG4gICAgICB0aGlzLl9zdGF0ZSA9IERFRkFVTFQ7XG4gICAgICBvcHRpb25zLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmRGcmFtZShTZW5kZXIuZnJhbWUoYnVmLCBvcHRpb25zKSwgY2IpO1xuICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgcXVldWVkIHNlbmQgb3BlcmF0aW9ucy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlcXVldWUoKSB7XG4gICAgd2hpbGUgKHRoaXMuX3N0YXRlID09PSBERUZBVUxUICYmIHRoaXMuX3F1ZXVlLmxlbmd0aCkge1xuICAgICAgY29uc3QgcGFyYW1zID0gdGhpcy5fcXVldWUuc2hpZnQoKTtcblxuICAgICAgdGhpcy5fYnVmZmVyZWRCeXRlcyAtPSBwYXJhbXNbM11ba0J5dGVMZW5ndGhdO1xuICAgICAgUmVmbGVjdC5hcHBseShwYXJhbXNbMF0sIHRoaXMsIHBhcmFtcy5zbGljZSgxKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgc2VuZCBvcGVyYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHBhcmFtcyBTZW5kIG9wZXJhdGlvbiBwYXJhbWV0ZXJzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZW5xdWV1ZShwYXJhbXMpIHtcbiAgICB0aGlzLl9idWZmZXJlZEJ5dGVzICs9IHBhcmFtc1szXVtrQnl0ZUxlbmd0aF07XG4gICAgdGhpcy5fcXVldWUucHVzaChwYXJhbXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmRzIGEgZnJhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7QnVmZmVyW119IGxpc3QgVGhlIGZyYW1lIHRvIHNlbmRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFja1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2VuZEZyYW1lKGxpc3QsIGNiKSB7XG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzLl9zb2NrZXQuY29yaygpO1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKGxpc3RbMF0pO1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKGxpc3RbMV0sIGNiKTtcbiAgICAgIHRoaXMuX3NvY2tldC51bmNvcmsoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc29ja2V0LndyaXRlKGxpc3RbMF0sIGNiKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTZW5kZXI7XG5cbi8qKlxuICogQ2FsbHMgcXVldWVkIGNhbGxiYWNrcyB3aXRoIGFuIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7U2VuZGVyfSBzZW5kZXIgVGhlIGBTZW5kZXJgIGluc3RhbmNlXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnIgVGhlIGVycm9yIHRvIGNhbGwgdGhlIGNhbGxiYWNrcyB3aXRoXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIFRoZSBmaXJzdCBjYWxsYmFja1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2FsbENhbGxiYWNrcyhzZW5kZXIsIGVyciwgY2IpIHtcbiAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgY2IoZXJyKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbmRlci5fcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwYXJhbXMgPSBzZW5kZXIuX3F1ZXVlW2ldO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gcGFyYW1zW3BhcmFtcy5sZW5ndGggLSAxXTtcblxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIGNhbGxiYWNrKGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBIYW5kbGVzIGEgYFNlbmRlcmAgZXJyb3IuXG4gKlxuICogQHBhcmFtIHtTZW5kZXJ9IHNlbmRlciBUaGUgYFNlbmRlcmAgaW5zdGFuY2VcbiAqIEBwYXJhbSB7RXJyb3J9IGVyciBUaGUgZXJyb3JcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gVGhlIGZpcnN0IHBlbmRpbmcgY2FsbGJhY2tcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIG9uRXJyb3Ioc2VuZGVyLCBlcnIsIGNiKSB7XG4gIGNhbGxDYWxsYmFja3Moc2VuZGVyLCBlcnIsIGNiKTtcbiAgc2VuZGVyLm9uZXJyb3IoZXJyKTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgeyBrRm9yT25FdmVudEF0dHJpYnV0ZSwga0xpc3RlbmVyIH0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5jb25zdCBrQ29kZSA9IFN5bWJvbCgna0NvZGUnKTtcbmNvbnN0IGtEYXRhID0gU3ltYm9sKCdrRGF0YScpO1xuY29uc3Qga0Vycm9yID0gU3ltYm9sKCdrRXJyb3InKTtcbmNvbnN0IGtNZXNzYWdlID0gU3ltYm9sKCdrTWVzc2FnZScpO1xuY29uc3Qga1JlYXNvbiA9IFN5bWJvbCgna1JlYXNvbicpO1xuY29uc3Qga1RhcmdldCA9IFN5bWJvbCgna1RhcmdldCcpO1xuY29uc3Qga1R5cGUgPSBTeW1ib2woJ2tUeXBlJyk7XG5jb25zdCBrV2FzQ2xlYW4gPSBTeW1ib2woJ2tXYXNDbGVhbicpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBldmVudC5cbiAqL1xuY2xhc3MgRXZlbnQge1xuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGBFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAdGhyb3dzIHtUeXBlRXJyb3J9IElmIHRoZSBgdHlwZWAgYXJndW1lbnQgaXMgbm90IHNwZWNpZmllZFxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSkge1xuICAgIHRoaXNba1RhcmdldF0gPSBudWxsO1xuICAgIHRoaXNba1R5cGVdID0gdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Kn1cbiAgICovXG4gIGdldCB0YXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXNba1RhcmdldF07XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiB0aGlzW2tUeXBlXTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnQucHJvdG90eXBlLCAndGFyZ2V0JywgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LnByb3RvdHlwZSwgJ3R5cGUnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2UgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqL1xuY2xhc3MgQ2xvc2VFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgQ2xvc2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmNvZGU9MF0gVGhlIHN0YXR1cyBjb2RlIGV4cGxhaW5pbmcgd2h5IHRoZVxuICAgKiAgICAgY29ubmVjdGlvbiB3YXMgY2xvc2VkXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5yZWFzb249JyddIEEgaHVtYW4tcmVhZGFibGUgc3RyaW5nIGV4cGxhaW5pbmcgd2h5XG4gICAqICAgICB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMud2FzQ2xlYW49ZmFsc2VdIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0aGVcbiAgICogICAgIGNvbm5lY3Rpb24gd2FzIGNsZWFubHkgY2xvc2VkXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIHRoaXNba0NvZGVdID0gb3B0aW9ucy5jb2RlID09PSB1bmRlZmluZWQgPyAwIDogb3B0aW9ucy5jb2RlO1xuICAgIHRoaXNba1JlYXNvbl0gPSBvcHRpb25zLnJlYXNvbiA9PT0gdW5kZWZpbmVkID8gJycgOiBvcHRpb25zLnJlYXNvbjtcbiAgICB0aGlzW2tXYXNDbGVhbl0gPSBvcHRpb25zLndhc0NsZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IG9wdGlvbnMud2FzQ2xlYW47XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBjb2RlKCkge1xuICAgIHJldHVybiB0aGlzW2tDb2RlXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgKi9cbiAgZ2V0IHJlYXNvbigpIHtcbiAgICByZXR1cm4gdGhpc1trUmVhc29uXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG4gIGdldCB3YXNDbGVhbigpIHtcbiAgICByZXR1cm4gdGhpc1trV2FzQ2xlYW5dO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShDbG9zZUV2ZW50LnByb3RvdHlwZSwgJ2NvZGUnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xvc2VFdmVudC5wcm90b3R5cGUsICdyZWFzb24nLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQ2xvc2VFdmVudC5wcm90b3R5cGUsICd3YXNDbGVhbicsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYW4gZXJyb3IgZXZlbnQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRcbiAqL1xuY2xhc3MgRXJyb3JFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBgRXJyb3JFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5lcnJvcj1udWxsXSBUaGUgZXJyb3IgdGhhdCBnZW5lcmF0ZWQgdGhpcyBldmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMubWVzc2FnZT0nJ10gVGhlIGVycm9yIG1lc3NhZ2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpc1trRXJyb3JdID0gb3B0aW9ucy5lcnJvciA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IG9wdGlvbnMuZXJyb3I7XG4gICAgdGhpc1trTWVzc2FnZV0gPSBvcHRpb25zLm1lc3NhZ2UgPT09IHVuZGVmaW5lZCA/ICcnIDogb3B0aW9ucy5tZXNzYWdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHsqfVxuICAgKi9cbiAgZ2V0IGVycm9yKCkge1xuICAgIHJldHVybiB0aGlzW2tFcnJvcl07XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBtZXNzYWdlKCkge1xuICAgIHJldHVybiB0aGlzW2tNZXNzYWdlXTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXJyb3JFdmVudC5wcm90b3R5cGUsICdlcnJvcicsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFcnJvckV2ZW50LnByb3RvdHlwZSwgJ21lc3NhZ2UnLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgbWVzc2FnZSBldmVudC5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudFxuICovXG5jbGFzcyBNZXNzYWdlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYE1lc3NhZ2VFdmVudGAuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBuYW1lIG9mIHRoZSBldmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEEgZGljdGlvbmFyeSBvYmplY3QgdGhhdCBhbGxvd3MgZm9yIHNldHRpbmdcbiAgICogICAgIGF0dHJpYnV0ZXMgdmlhIG9iamVjdCBtZW1iZXJzIG9mIHRoZSBzYW1lIG5hbWVcbiAgICogQHBhcmFtIHsqfSBbb3B0aW9ucy5kYXRhPW51bGxdIFRoZSBtZXNzYWdlIGNvbnRlbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpc1trRGF0YV0gPSBvcHRpb25zLmRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBvcHRpb25zLmRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUgeyp9XG4gICAqL1xuICBnZXQgZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpc1trRGF0YV07XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc3NhZ2VFdmVudC5wcm90b3R5cGUsICdkYXRhJywgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4vKipcbiAqIFRoaXMgcHJvdmlkZXMgbWV0aG9kcyBmb3IgZW11bGF0aW5nIHRoZSBgRXZlbnRUYXJnZXRgIGludGVyZmFjZS4gSXQncyBub3RcbiAqIG1lYW50IHRvIGJlIHVzZWQgZGlyZWN0bHkuXG4gKlxuICogQG1peGluXG4gKi9cbmNvbnN0IEV2ZW50VGFyZ2V0ID0ge1xuICAvKipcbiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXZlbnQgdHlwZSB0byBsaXN0ZW4gZm9yXG4gICAqIEBwYXJhbSB7KEZ1bmN0aW9ufE9iamVjdCl9IGhhbmRsZXIgVGhlIGxpc3RlbmVyIHRvIGFkZFxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIEFuIG9wdGlvbnMgb2JqZWN0IHNwZWNpZmllcyBjaGFyYWN0ZXJpc3RpY3MgYWJvdXRcbiAgICogICAgIHRoZSBldmVudCBsaXN0ZW5lclxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm9uY2U9ZmFsc2VdIEEgYEJvb2xlYW5gIGluZGljYXRpbmcgdGhhdCB0aGVcbiAgICogICAgIGxpc3RlbmVyIHNob3VsZCBiZSBpbnZva2VkIGF0IG1vc3Qgb25jZSBhZnRlciBiZWluZyBhZGRlZC4gSWYgYHRydWVgLFxuICAgKiAgICAgdGhlIGxpc3RlbmVyIHdvdWxkIGJlIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCB3aGVuIGludm9rZWQuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlciwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycyh0eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICAhb3B0aW9uc1trRm9yT25FdmVudEF0dHJpYnV0ZV0gJiZcbiAgICAgICAgbGlzdGVuZXJba0xpc3RlbmVyXSA9PT0gaGFuZGxlciAmJlxuICAgICAgICAhbGlzdGVuZXJba0Zvck9uRXZlbnRBdHRyaWJ1dGVdXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB3cmFwcGVyO1xuXG4gICAgaWYgKHR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uIG9uTWVzc2FnZShkYXRhLCBpc0JpbmFyeSkge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBNZXNzYWdlRXZlbnQoJ21lc3NhZ2UnLCB7XG4gICAgICAgICAgZGF0YTogaXNCaW5hcnkgPyBkYXRhIDogZGF0YS50b1N0cmluZygpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50W2tUYXJnZXRdID0gdGhpcztcbiAgICAgICAgY2FsbExpc3RlbmVyKGhhbmRsZXIsIHRoaXMsIGV2ZW50KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnY2xvc2UnKSB7XG4gICAgICB3cmFwcGVyID0gZnVuY3Rpb24gb25DbG9zZShjb2RlLCBtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IENsb3NlRXZlbnQoJ2Nsb3NlJywge1xuICAgICAgICAgIGNvZGUsXG4gICAgICAgICAgcmVhc29uOiBtZXNzYWdlLnRvU3RyaW5nKCksXG4gICAgICAgICAgd2FzQ2xlYW46IHRoaXMuX2Nsb3NlRnJhbWVSZWNlaXZlZCAmJiB0aGlzLl9jbG9zZUZyYW1lU2VudFxuICAgICAgICB9KTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGNhbGxMaXN0ZW5lcihoYW5kbGVyLCB0aGlzLCBldmVudCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgRXJyb3JFdmVudCgnZXJyb3InLCB7XG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcblxuICAgICAgICBldmVudFtrVGFyZ2V0XSA9IHRoaXM7XG4gICAgICAgIGNhbGxMaXN0ZW5lcihoYW5kbGVyLCB0aGlzLCBldmVudCk7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29wZW4nKSB7XG4gICAgICB3cmFwcGVyID0gZnVuY3Rpb24gb25PcGVuKCkge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnb3BlbicpO1xuXG4gICAgICAgIGV2ZW50W2tUYXJnZXRdID0gdGhpcztcbiAgICAgICAgY2FsbExpc3RlbmVyKGhhbmRsZXIsIHRoaXMsIGV2ZW50KTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3cmFwcGVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSA9ICEhb3B0aW9uc1trRm9yT25FdmVudEF0dHJpYnV0ZV07XG4gICAgd3JhcHBlcltrTGlzdGVuZXJdID0gaGFuZGxlcjtcblxuICAgIGlmIChvcHRpb25zLm9uY2UpIHtcbiAgICAgIHRoaXMub25jZSh0eXBlLCB3cmFwcGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbih0eXBlLCB3cmFwcGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lci5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlIHRvIHJlbW92ZVxuICAgKiBAcGFyYW0geyhGdW5jdGlvbnxPYmplY3QpfSBoYW5kbGVyIFRoZSBsaXN0ZW5lciB0byByZW1vdmVcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKSB7XG4gICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycyh0eXBlKSkge1xuICAgICAgaWYgKGxpc3RlbmVyW2tMaXN0ZW5lcl0gPT09IGhhbmRsZXIgJiYgIWxpc3RlbmVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSkge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgQ2xvc2VFdmVudCxcbiAgRXJyb3JFdmVudCxcbiAgRXZlbnQsXG4gIEV2ZW50VGFyZ2V0LFxuICBNZXNzYWdlRXZlbnRcbn07XG5cbi8qKlxuICogQ2FsbCBhbiBldmVudCBsaXN0ZW5lclxuICpcbiAqIEBwYXJhbSB7KEZ1bmN0aW9ufE9iamVjdCl9IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciB0byBjYWxsXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIHZhbHVlIHRvIHVzZSBhcyBgdGhpc2BgIHdoZW4gY2FsbGluZyB0aGUgbGlzdGVuZXJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBwYXNzIHRvIHRoZSBsaXN0ZW5lclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2FsbExpc3RlbmVyKGxpc3RlbmVyLCB0aGlzQXJnLCBldmVudCkge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSAnb2JqZWN0JyAmJiBsaXN0ZW5lci5oYW5kbGVFdmVudCkge1xuICAgIGxpc3RlbmVyLmhhbmRsZUV2ZW50LmNhbGwobGlzdGVuZXIsIGV2ZW50KTtcbiAgfSBlbHNlIHtcbiAgICBsaXN0ZW5lci5jYWxsKHRoaXNBcmcsIGV2ZW50KTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IHRva2VuQ2hhcnMgfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG4vKipcbiAqIEFkZHMgYW4gb2ZmZXIgdG8gdGhlIG1hcCBvZiBleHRlbnNpb24gb2ZmZXJzIG9yIGEgcGFyYW1ldGVyIHRvIHRoZSBtYXAgb2ZcbiAqIHBhcmFtZXRlcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc3QgVGhlIG1hcCBvZiBleHRlbnNpb24gb2ZmZXJzIG9yIHBhcmFtZXRlcnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBleHRlbnNpb24gb3IgcGFyYW1ldGVyIG5hbWVcbiAqIEBwYXJhbSB7KE9iamVjdHxCb29sZWFufFN0cmluZyl9IGVsZW0gVGhlIGV4dGVuc2lvbiBwYXJhbWV0ZXJzIG9yIHRoZVxuICogICAgIHBhcmFtZXRlciB2YWx1ZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcHVzaChkZXN0LCBuYW1lLCBlbGVtKSB7XG4gIGlmIChkZXN0W25hbWVdID09PSB1bmRlZmluZWQpIGRlc3RbbmFtZV0gPSBbZWxlbV07XG4gIGVsc2UgZGVzdFtuYW1lXS5wdXNoKGVsZW0pO1xufVxuXG4vKipcbiAqIFBhcnNlcyB0aGUgYFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9uc2AgaGVhZGVyIGludG8gYW4gb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXIgVGhlIGZpZWxkIHZhbHVlIG9mIHRoZSBoZWFkZXJcbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHBhcnNlZCBvYmplY3RcbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gcGFyc2UoaGVhZGVyKSB7XG4gIGNvbnN0IG9mZmVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBsZXQgbXVzdFVuZXNjYXBlID0gZmFsc2U7XG4gIGxldCBpc0VzY2FwaW5nID0gZmFsc2U7XG4gIGxldCBpblF1b3RlcyA9IGZhbHNlO1xuICBsZXQgZXh0ZW5zaW9uTmFtZTtcbiAgbGV0IHBhcmFtTmFtZTtcbiAgbGV0IHN0YXJ0ID0gLTE7XG4gIGxldCBjb2RlID0gLTE7XG4gIGxldCBlbmQgPSAtMTtcbiAgbGV0IGkgPSAwO1xuXG4gIGZvciAoOyBpIDwgaGVhZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29kZSA9IGhlYWRlci5jaGFyQ29kZUF0KGkpO1xuXG4gICAgaWYgKGV4dGVuc2lvbk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgdG9rZW5DaGFyc1tjb2RlXSA9PT0gMSkge1xuICAgICAgICBpZiAoc3RhcnQgPT09IC0xKSBzdGFydCA9IGk7XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBpICE9PSAwICYmXG4gICAgICAgIChjb2RlID09PSAweDIwIC8qICcgJyAqLyB8fCBjb2RlID09PSAweDA5KSAvKiAnXFx0JyAqL1xuICAgICAgKSB7XG4gICAgICAgIGlmIChlbmQgPT09IC0xICYmIHN0YXJ0ICE9PSAtMSkgZW5kID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgzYiAvKiAnOycgKi8gfHwgY29kZSA9PT0gMHgyYyAvKiAnLCcgKi8pIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgIGlmIChjb2RlID09PSAweDJjKSB7XG4gICAgICAgICAgcHVzaChvZmZlcnMsIG5hbWUsIHBhcmFtcyk7XG4gICAgICAgICAgcGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBleHRlbnNpb25OYW1lID0gbmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gZW5kID0gLTE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcmFtTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyMCB8fCBjb2RlID09PSAweDA5KSB7XG4gICAgICAgIGlmIChlbmQgPT09IC0xICYmIHN0YXJ0ICE9PSAtMSkgZW5kID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgzYiB8fCBjb2RlID09PSAweDJjKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYFVuZXhwZWN0ZWQgY2hhcmFjdGVyIGF0IGluZGV4ICR7aX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuICAgICAgICBwdXNoKHBhcmFtcywgaGVhZGVyLnNsaWNlKHN0YXJ0LCBlbmQpLCB0cnVlKTtcbiAgICAgICAgaWYgKGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgICBwdXNoKG9mZmVycywgZXh0ZW5zaW9uTmFtZSwgcGFyYW1zKTtcbiAgICAgICAgICBwYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGV4dGVuc2lvbk5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCA9IGVuZCA9IC0xO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNkIC8qICc9JyAqLyAmJiBzdGFydCAhPT0gLTEgJiYgZW5kID09PSAtMSkge1xuICAgICAgICBwYXJhbU5hbWUgPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGkpO1xuICAgICAgICBzdGFydCA9IGVuZCA9IC0xO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vXG4gICAgICAvLyBUaGUgdmFsdWUgb2YgYSBxdW90ZWQtc3RyaW5nIGFmdGVyIHVuZXNjYXBpbmcgbXVzdCBjb25mb3JtIHRvIHRoZVxuICAgICAgLy8gdG9rZW4gQUJORiwgc28gb25seSB0b2tlbiBjaGFyYWN0ZXJzIGFyZSB2YWxpZC5cbiAgICAgIC8vIFJlZjogaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY0NTUjc2VjdGlvbi05LjFcbiAgICAgIC8vXG4gICAgICBpZiAoaXNFc2NhcGluZykge1xuICAgICAgICBpZiAodG9rZW5DaGFyc1tjb2RlXSAhPT0gMSkge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgICAgZWxzZSBpZiAoIW11c3RVbmVzY2FwZSkgbXVzdFVuZXNjYXBlID0gdHJ1ZTtcbiAgICAgICAgaXNFc2NhcGluZyA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlmIChpblF1b3Rlcykge1xuICAgICAgICBpZiAodG9rZW5DaGFyc1tjb2RlXSA9PT0gMSkge1xuICAgICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDIyIC8qICdcIicgKi8gJiYgc3RhcnQgIT09IC0xKSB7XG4gICAgICAgICAgaW5RdW90ZXMgPSBmYWxzZTtcbiAgICAgICAgICBlbmQgPSBpO1xuICAgICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4NWMgLyogJ1xcJyAqLykge1xuICAgICAgICAgIGlzRXNjYXBpbmcgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDB4MjIgJiYgaGVhZGVyLmNoYXJDb2RlQXQoaSAtIDEpID09PSAweDNkKSB7XG4gICAgICAgIGluUXVvdGVzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICAgIGlmIChzdGFydCA9PT0gLTEpIHN0YXJ0ID0gaTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhcnQgIT09IC0xICYmIChjb2RlID09PSAweDIwIHx8IGNvZGUgPT09IDB4MDkpKSB7XG4gICAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuICAgICAgfSBlbHNlIGlmIChjb2RlID09PSAweDNiIHx8IGNvZGUgPT09IDB4MmMpIHtcbiAgICAgICAgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gICAgICAgIGxldCB2YWx1ZSA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgaWYgKG11c3RVbmVzY2FwZSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxcXC9nLCAnJyk7XG4gICAgICAgICAgbXVzdFVuZXNjYXBlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcHVzaChwYXJhbXMsIHBhcmFtTmFtZSwgdmFsdWUpO1xuICAgICAgICBpZiAoY29kZSA9PT0gMHgyYykge1xuICAgICAgICAgIHB1c2gob2ZmZXJzLCBleHRlbnNpb25OYW1lLCBwYXJhbXMpO1xuICAgICAgICAgIHBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgZXh0ZW5zaW9uTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmFtTmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVW5leHBlY3RlZCBjaGFyYWN0ZXIgYXQgaW5kZXggJHtpfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdGFydCA9PT0gLTEgfHwgaW5RdW90ZXMgfHwgY29kZSA9PT0gMHgyMCB8fCBjb2RlID09PSAweDA5KSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dCcpO1xuICB9XG5cbiAgaWYgKGVuZCA9PT0gLTEpIGVuZCA9IGk7XG4gIGNvbnN0IHRva2VuID0gaGVhZGVyLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICBpZiAoZXh0ZW5zaW9uTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcHVzaChvZmZlcnMsIHRva2VuLCBwYXJhbXMpO1xuICB9IGVsc2Uge1xuICAgIGlmIChwYXJhbU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcHVzaChwYXJhbXMsIHRva2VuLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKG11c3RVbmVzY2FwZSkge1xuICAgICAgcHVzaChwYXJhbXMsIHBhcmFtTmFtZSwgdG9rZW4ucmVwbGFjZSgvXFxcXC9nLCAnJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwdXNoKHBhcmFtcywgcGFyYW1OYW1lLCB0b2tlbik7XG4gICAgfVxuICAgIHB1c2gob2ZmZXJzLCBleHRlbnNpb25OYW1lLCBwYXJhbXMpO1xuICB9XG5cbiAgcmV0dXJuIG9mZmVycztcbn1cblxuLyoqXG4gKiBCdWlsZHMgdGhlIGBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnNgIGhlYWRlciBmaWVsZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5zaW9ucyBUaGUgbWFwIG9mIGV4dGVuc2lvbnMgYW5kIHBhcmFtZXRlcnMgdG8gZm9ybWF0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZ2l2ZW4gb2JqZWN0XG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdChleHRlbnNpb25zKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhleHRlbnNpb25zKVxuICAgIC5tYXAoKGV4dGVuc2lvbikgPT4ge1xuICAgICAgbGV0IGNvbmZpZ3VyYXRpb25zID0gZXh0ZW5zaW9uc1tleHRlbnNpb25dO1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNvbmZpZ3VyYXRpb25zKSkgY29uZmlndXJhdGlvbnMgPSBbY29uZmlndXJhdGlvbnNdO1xuICAgICAgcmV0dXJuIGNvbmZpZ3VyYXRpb25zXG4gICAgICAgIC5tYXAoKHBhcmFtcykgPT4ge1xuICAgICAgICAgIHJldHVybiBbZXh0ZW5zaW9uXVxuICAgICAgICAgICAgLmNvbmNhdChcbiAgICAgICAgICAgICAgT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoKGspID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gcGFyYW1zW2tdO1xuICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXMpKSB2YWx1ZXMgPSBbdmFsdWVzXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzXG4gICAgICAgICAgICAgICAgICAubWFwKCh2KSA9PiAodiA9PT0gdHJ1ZSA/IGsgOiBgJHtrfT0ke3Z9YCkpXG4gICAgICAgICAgICAgICAgICAuam9pbignOyAnKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5qb2luKCc7ICcpO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbignLCAnKTtcbiAgICB9KVxuICAgIC5qb2luKCcsICcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZm9ybWF0LCBwYXJzZSB9O1xuIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBbXCJlcnJvclwiLCB7IFwidmFyc0lnbm9yZVBhdHRlcm5cIjogXCJeRHVwbGV4fFJlYWRhYmxlJFwiLCBcImNhdWdodEVycm9yc1wiOiBcIm5vbmVcIiB9XSAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuY29uc3QgaHR0cHMgPSByZXF1aXJlKCdodHRwcycpO1xuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbmNvbnN0IG5ldCA9IHJlcXVpcmUoJ25ldCcpO1xuY29uc3QgdGxzID0gcmVxdWlyZSgndGxzJyk7XG5jb25zdCB7IHJhbmRvbUJ5dGVzLCBjcmVhdGVIYXNoIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcbmNvbnN0IHsgRHVwbGV4LCBSZWFkYWJsZSB9ID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5jb25zdCB7IFVSTCB9ID0gcmVxdWlyZSgndXJsJyk7XG5cbmNvbnN0IFBlck1lc3NhZ2VEZWZsYXRlID0gcmVxdWlyZSgnLi9wZXJtZXNzYWdlLWRlZmxhdGUnKTtcbmNvbnN0IFJlY2VpdmVyID0gcmVxdWlyZSgnLi9yZWNlaXZlcicpO1xuY29uc3QgU2VuZGVyID0gcmVxdWlyZSgnLi9zZW5kZXInKTtcbmNvbnN0IHsgaXNCbG9iIH0gPSByZXF1aXJlKCcuL3ZhbGlkYXRpb24nKTtcblxuY29uc3Qge1xuICBCSU5BUllfVFlQRVMsXG4gIEVNUFRZX0JVRkZFUixcbiAgR1VJRCxcbiAga0Zvck9uRXZlbnRBdHRyaWJ1dGUsXG4gIGtMaXN0ZW5lcixcbiAga1N0YXR1c0NvZGUsXG4gIGtXZWJTb2NrZXQsXG4gIE5PT1Bcbn0gPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuY29uc3Qge1xuICBFdmVudFRhcmdldDogeyBhZGRFdmVudExpc3RlbmVyLCByZW1vdmVFdmVudExpc3RlbmVyIH1cbn0gPSByZXF1aXJlKCcuL2V2ZW50LXRhcmdldCcpO1xuY29uc3QgeyBmb3JtYXQsIHBhcnNlIH0gPSByZXF1aXJlKCcuL2V4dGVuc2lvbicpO1xuY29uc3QgeyB0b0J1ZmZlciB9ID0gcmVxdWlyZSgnLi9idWZmZXItdXRpbCcpO1xuXG5jb25zdCBjbG9zZVRpbWVvdXQgPSAzMCAqIDEwMDA7XG5jb25zdCBrQWJvcnRlZCA9IFN5bWJvbCgna0Fib3J0ZWQnKTtcbmNvbnN0IHByb3RvY29sVmVyc2lvbnMgPSBbOCwgMTNdO1xuY29uc3QgcmVhZHlTdGF0ZXMgPSBbJ0NPTk5FQ1RJTkcnLCAnT1BFTicsICdDTE9TSU5HJywgJ0NMT1NFRCddO1xuY29uc3Qgc3VicHJvdG9jb2xSZWdleCA9IC9eWyEjJCUmJyorXFwtLjAtOUEtWl5fYHxhLXp+XSskLztcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBXZWJTb2NrZXQuXG4gKlxuICogQGV4dGVuZHMgRXZlbnRFbWl0dGVyXG4gKi9cbmNsYXNzIFdlYlNvY2tldCBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgYFdlYlNvY2tldGAuXG4gICAqXG4gICAqIEBwYXJhbSB7KFN0cmluZ3xVUkwpfSBhZGRyZXNzIFRoZSBVUkwgdG8gd2hpY2ggdG8gY29ubmVjdFxuICAgKiBAcGFyYW0geyhTdHJpbmd8U3RyaW5nW10pfSBbcHJvdG9jb2xzXSBUaGUgc3VicHJvdG9jb2xzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQ29ubmVjdGlvbiBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhZGRyZXNzLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fYmluYXJ5VHlwZSA9IEJJTkFSWV9UWVBFU1swXTtcbiAgICB0aGlzLl9jbG9zZUNvZGUgPSAxMDA2O1xuICAgIHRoaXMuX2Nsb3NlRnJhbWVSZWNlaXZlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2Nsb3NlRnJhbWVTZW50ID0gZmFsc2U7XG4gICAgdGhpcy5fY2xvc2VNZXNzYWdlID0gRU1QVFlfQlVGRkVSO1xuICAgIHRoaXMuX2Nsb3NlVGltZXIgPSBudWxsO1xuICAgIHRoaXMuX2Vycm9yRW1pdHRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2V4dGVuc2lvbnMgPSB7fTtcbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wcm90b2NvbCA9ICcnO1xuICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ09OTkVDVElORztcbiAgICB0aGlzLl9yZWNlaXZlciA9IG51bGw7XG4gICAgdGhpcy5fc2VuZGVyID0gbnVsbDtcbiAgICB0aGlzLl9zb2NrZXQgPSBudWxsO1xuXG4gICAgaWYgKGFkZHJlc3MgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2J1ZmZlcmVkQW1vdW50ID0gMDtcbiAgICAgIHRoaXMuX2lzU2VydmVyID0gZmFsc2U7XG4gICAgICB0aGlzLl9yZWRpcmVjdHMgPSAwO1xuXG4gICAgICBpZiAocHJvdG9jb2xzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvdG9jb2xzID0gW107XG4gICAgICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHByb3RvY29scykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm90b2NvbHMgPT09ICdvYmplY3QnICYmIHByb3RvY29scyAhPT0gbnVsbCkge1xuICAgICAgICAgIG9wdGlvbnMgPSBwcm90b2NvbHM7XG4gICAgICAgICAgcHJvdG9jb2xzID0gW107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvdG9jb2xzID0gW3Byb3RvY29sc107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5pdEFzQ2xpZW50KHRoaXMsIGFkZHJlc3MsIHByb3RvY29scywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2F1dG9Qb25nID0gb3B0aW9ucy5hdXRvUG9uZztcbiAgICAgIHRoaXMuX2lzU2VydmVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yIGhpc3RvcmljYWwgcmVhc29ucywgdGhlIGN1c3RvbSBcIm5vZGVidWZmZXJcIiB0eXBlIGlzIHVzZWQgYnkgdGhlIGRlZmF1bHRcbiAgICogaW5zdGVhZCBvZiBcImJsb2JcIi5cbiAgICpcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBiaW5hcnlUeXBlKCkge1xuICAgIHJldHVybiB0aGlzLl9iaW5hcnlUeXBlO1xuICB9XG5cbiAgc2V0IGJpbmFyeVR5cGUodHlwZSkge1xuICAgIGlmICghQklOQVJZX1RZUEVTLmluY2x1ZGVzKHR5cGUpKSByZXR1cm47XG5cbiAgICB0aGlzLl9iaW5hcnlUeXBlID0gdHlwZTtcblxuICAgIC8vXG4gICAgLy8gQWxsb3cgdG8gY2hhbmdlIGBiaW5hcnlUeXBlYCBvbiB0aGUgZmx5LlxuICAgIC8vXG4gICAgaWYgKHRoaXMuX3JlY2VpdmVyKSB0aGlzLl9yZWNlaXZlci5fYmluYXJ5VHlwZSA9IHR5cGU7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCBidWZmZXJlZEFtb3VudCgpIHtcbiAgICBpZiAoIXRoaXMuX3NvY2tldCkgcmV0dXJuIHRoaXMuX2J1ZmZlcmVkQW1vdW50O1xuXG4gICAgcmV0dXJuIHRoaXMuX3NvY2tldC5fd3JpdGFibGVTdGF0ZS5sZW5ndGggKyB0aGlzLl9zZW5kZXIuX2J1ZmZlcmVkQnl0ZXM7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBleHRlbnNpb25zKCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9leHRlbnNpb25zKS5qb2luKCk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge0Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNQYXVzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdXNlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBnZXQgb25jbG9zZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBnZXQgb25lcnJvcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBnZXQgb25vcGVuKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGdldCBvbm1lc3NhZ2UoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge1N0cmluZ31cbiAgICovXG4gIGdldCBwcm90b2NvbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvdG9jb2w7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGUge051bWJlcn1cbiAgICovXG4gIGdldCByZWFkeVN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9yZWFkeVN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtTdHJpbmd9XG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLl91cmw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHVwIHRoZSBzb2NrZXQgYW5kIHRoZSBpbnRlcm5hbCByZXNvdXJjZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RHVwbGV4fSBzb2NrZXQgVGhlIG5ldHdvcmsgc29ja2V0IGJldHdlZW4gdGhlIHNlcnZlciBhbmQgY2xpZW50XG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoZWFkIFRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHVwZ3JhZGVkIHN0cmVhbVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93U3luY2hyb25vdXNFdmVudHM9ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyXG4gICAqICAgICBhbnkgb2YgdGhlIGAnbWVzc2FnZSdgLCBgJ3BpbmcnYCwgYW5kIGAncG9uZydgIGV2ZW50cyBjYW4gYmUgZW1pdHRlZFxuICAgKiAgICAgbXVsdGlwbGUgdGltZXMgaW4gdGhlIHNhbWUgdGlja1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy5nZW5lcmF0ZU1hc2tdIFRoZSBmdW5jdGlvbiB1c2VkIHRvIGdlbmVyYXRlIHRoZVxuICAgKiAgICAgbWFza2luZyBrZXlcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heFBheWxvYWQ9MF0gVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlIHNpemVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb249ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yXG4gICAqICAgICBub3QgdG8gc2tpcCBVVEYtOCB2YWxpZGF0aW9uIGZvciB0ZXh0IGFuZCBjbG9zZSBtZXNzYWdlc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0U29ja2V0KHNvY2tldCwgaGVhZCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJlY2VpdmVyID0gbmV3IFJlY2VpdmVyKHtcbiAgICAgIGFsbG93U3luY2hyb25vdXNFdmVudHM6IG9wdGlvbnMuYWxsb3dTeW5jaHJvbm91c0V2ZW50cyxcbiAgICAgIGJpbmFyeVR5cGU6IHRoaXMuYmluYXJ5VHlwZSxcbiAgICAgIGV4dGVuc2lvbnM6IHRoaXMuX2V4dGVuc2lvbnMsXG4gICAgICBpc1NlcnZlcjogdGhpcy5faXNTZXJ2ZXIsXG4gICAgICBtYXhQYXlsb2FkOiBvcHRpb25zLm1heFBheWxvYWQsXG4gICAgICBza2lwVVRGOFZhbGlkYXRpb246IG9wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZW5kZXIgPSBuZXcgU2VuZGVyKHNvY2tldCwgdGhpcy5fZXh0ZW5zaW9ucywgb3B0aW9ucy5nZW5lcmF0ZU1hc2spO1xuXG4gICAgdGhpcy5fcmVjZWl2ZXIgPSByZWNlaXZlcjtcbiAgICB0aGlzLl9zZW5kZXIgPSBzZW5kZXI7XG4gICAgdGhpcy5fc29ja2V0ID0gc29ja2V0O1xuXG4gICAgcmVjZWl2ZXJba1dlYlNvY2tldF0gPSB0aGlzO1xuICAgIHNlbmRlcltrV2ViU29ja2V0XSA9IHRoaXM7XG4gICAgc29ja2V0W2tXZWJTb2NrZXRdID0gdGhpcztcblxuICAgIHJlY2VpdmVyLm9uKCdjb25jbHVkZScsIHJlY2VpdmVyT25Db25jbHVkZSk7XG4gICAgcmVjZWl2ZXIub24oJ2RyYWluJywgcmVjZWl2ZXJPbkRyYWluKTtcbiAgICByZWNlaXZlci5vbignZXJyb3InLCByZWNlaXZlck9uRXJyb3IpO1xuICAgIHJlY2VpdmVyLm9uKCdtZXNzYWdlJywgcmVjZWl2ZXJPbk1lc3NhZ2UpO1xuICAgIHJlY2VpdmVyLm9uKCdwaW5nJywgcmVjZWl2ZXJPblBpbmcpO1xuICAgIHJlY2VpdmVyLm9uKCdwb25nJywgcmVjZWl2ZXJPblBvbmcpO1xuXG4gICAgc2VuZGVyLm9uZXJyb3IgPSBzZW5kZXJPbkVycm9yO1xuXG4gICAgLy9cbiAgICAvLyBUaGVzZSBtZXRob2RzIG1heSBub3QgYmUgYXZhaWxhYmxlIGlmIGBzb2NrZXRgIGlzIGp1c3QgYSBgRHVwbGV4YC5cbiAgICAvL1xuICAgIGlmIChzb2NrZXQuc2V0VGltZW91dCkgc29ja2V0LnNldFRpbWVvdXQoMCk7XG4gICAgaWYgKHNvY2tldC5zZXROb0RlbGF5KSBzb2NrZXQuc2V0Tm9EZWxheSgpO1xuXG4gICAgaWYgKGhlYWQubGVuZ3RoID4gMCkgc29ja2V0LnVuc2hpZnQoaGVhZCk7XG5cbiAgICBzb2NrZXQub24oJ2Nsb3NlJywgc29ja2V0T25DbG9zZSk7XG4gICAgc29ja2V0Lm9uKCdkYXRhJywgc29ja2V0T25EYXRhKTtcbiAgICBzb2NrZXQub24oJ2VuZCcsIHNvY2tldE9uRW5kKTtcbiAgICBzb2NrZXQub24oJ2Vycm9yJywgc29ja2V0T25FcnJvcik7XG5cbiAgICB0aGlzLl9yZWFkeVN0YXRlID0gV2ViU29ja2V0Lk9QRU47XG4gICAgdGhpcy5lbWl0KCdvcGVuJyk7XG4gIH1cblxuICAvKipcbiAgICogRW1pdCB0aGUgYCdjbG9zZSdgIGV2ZW50LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZW1pdENsb3NlKCkge1xuICAgIGlmICghdGhpcy5fc29ja2V0KSB7XG4gICAgICB0aGlzLl9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NFRDtcbiAgICAgIHRoaXMuZW1pdCgnY2xvc2UnLCB0aGlzLl9jbG9zZUNvZGUsIHRoaXMuX2Nsb3NlTWVzc2FnZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pIHtcbiAgICAgIHRoaXMuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0uY2xlYW51cCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlY2VpdmVyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIHRoaXMuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0VEO1xuICAgIHRoaXMuZW1pdCgnY2xvc2UnLCB0aGlzLl9jbG9zZUNvZGUsIHRoaXMuX2Nsb3NlTWVzc2FnZSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYSBjbG9zaW5nIGhhbmRzaGFrZS5cbiAgICpcbiAgICogICAgICAgICAgKy0tLS0tLS0tLS0rICAgKy0tLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tK1xuICAgKiAgICAgLSAtIC18d3MuY2xvc2UoKXwtLT58Y2xvc2UgZnJhbWV8LS0+fHdzLmNsb3NlKCl8LSAtIC1cbiAgICogICAgfCAgICAgKy0tLS0tLS0tLS0rICAgKy0tLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tKyAgICAgfFxuICAgKiAgICAgICAgICArLS0tLS0tLS0tLSsgICArLS0tLS0tLS0tLS0rICAgICAgICAgfFxuICAgKiBDTE9TSU5HICB8d3MuY2xvc2UoKXw8LS18Y2xvc2UgZnJhbWV8PC0tKy0tLS0tKyAgICAgICBDTE9TSU5HXG4gICAqICAgICAgICAgICstLS0tLS0tLS0tKyAgICstLS0tLS0tLS0tLSsgICB8XG4gICAqICAgIHwgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICB8ICAgKy0tLSsgICAgICAgIHxcbiAgICogICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSstLT58ZmlufCAtIC0gLSAtXG4gICAqICAgIHwgICAgICAgICArLS0tKyAgICAgICAgICAgICAgICAgICAgICB8ICAgKy0tLStcbiAgICogICAgIC0gLSAtIC0gLXxmaW58PC0tLS0tLS0tLS0tLS0tLS0tLS0tLStcbiAgICogICAgICAgICAgICAgICstLS0rXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbY29kZV0gU3RhdHVzIGNvZGUgZXhwbGFpbmluZyB3aHkgdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2luZ1xuICAgKiBAcGFyYW0geyhTdHJpbmd8QnVmZmVyKX0gW2RhdGFdIFRoZSByZWFzb24gd2h5IHRoZSBjb25uZWN0aW9uIGlzXG4gICAqICAgICBjbG9zaW5nXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIGNsb3NlKGNvZGUsIGRhdGEpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSByZXR1cm47XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIGNvbnN0IG1zZyA9ICdXZWJTb2NrZXQgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkJztcbiAgICAgIGFib3J0SGFuZHNoYWtlKHRoaXMsIHRoaXMuX3JlcSwgbXNnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0lORykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLl9jbG9zZUZyYW1lU2VudCAmJlxuICAgICAgICAodGhpcy5fY2xvc2VGcmFtZVJlY2VpdmVkIHx8IHRoaXMuX3JlY2VpdmVyLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZClcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9zb2NrZXQuZW5kKCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG4gICAgdGhpcy5fc2VuZGVyLmNsb3NlKGNvZGUsIGRhdGEsICF0aGlzLl9pc1NlcnZlciwgKGVycikgPT4ge1xuICAgICAgLy9cbiAgICAgIC8vIFRoaXMgZXJyb3IgaXMgaGFuZGxlZCBieSB0aGUgYCdlcnJvcidgIGxpc3RlbmVyIG9uIHRoZSBzb2NrZXQuIFdlIG9ubHlcbiAgICAgIC8vIHdhbnQgdG8ga25vdyBpZiB0aGUgY2xvc2UgZnJhbWUgaGFzIGJlZW4gc2VudCBoZXJlLlxuICAgICAgLy9cbiAgICAgIGlmIChlcnIpIHJldHVybjtcblxuICAgICAgdGhpcy5fY2xvc2VGcmFtZVNlbnQgPSB0cnVlO1xuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuX2Nsb3NlRnJhbWVSZWNlaXZlZCB8fFxuICAgICAgICB0aGlzLl9yZWNlaXZlci5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWRcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9zb2NrZXQuZW5kKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzZXRDbG9zZVRpbWVyKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhdXNlIHRoZSBzb2NrZXQuXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHBhdXNlKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcgfHxcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3BhdXNlZCA9IHRydWU7XG4gICAgdGhpcy5fc29ja2V0LnBhdXNlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhIHBpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gW2RhdGFdIFRoZSBkYXRhIHRvIHNlbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbbWFza10gSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRvIG1hc2sgYGRhdGFgXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl0gQ2FsbGJhY2sgd2hpY2ggaXMgZXhlY3V0ZWQgd2hlbiB0aGUgcGluZyBpcyBzZW50XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHBpbmcoZGF0YSwgbWFzaywgY2IpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ09OTkVDVElORykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJTb2NrZXQgaXMgbm90IG9wZW46IHJlYWR5U3RhdGUgMCAoQ09OTkVDVElORyknKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNiID0gZGF0YTtcbiAgICAgIGRhdGEgPSBtYXNrID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1hc2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNiID0gbWFzaztcbiAgICAgIG1hc2sgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykgZGF0YSA9IGRhdGEudG9TdHJpbmcoKTtcblxuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICBzZW5kQWZ0ZXJDbG9zZSh0aGlzLCBkYXRhLCBjYik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG1hc2sgPT09IHVuZGVmaW5lZCkgbWFzayA9ICF0aGlzLl9pc1NlcnZlcjtcbiAgICB0aGlzLl9zZW5kZXIucGluZyhkYXRhIHx8IEVNUFRZX0JVRkZFUiwgbWFzaywgY2IpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBwb25nLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IFtkYXRhXSBUaGUgZGF0YSB0byBzZW5kXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW21hc2tdIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrIHdoaWNoIGlzIGV4ZWN1dGVkIHdoZW4gdGhlIHBvbmcgaXMgc2VudFxuICAgKiBAcHVibGljXG4gICAqL1xuICBwb25nKGRhdGEsIG1hc2ssIGNiKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlIDAgKENPTk5FQ1RJTkcpJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IGRhdGE7XG4gICAgICBkYXRhID0gbWFzayA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYXNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IG1hc2s7XG4gICAgICBtYXNrID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicpIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCk7XG5cbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgc2VuZEFmdGVyQ2xvc2UodGhpcywgZGF0YSwgY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChtYXNrID09PSB1bmRlZmluZWQpIG1hc2sgPSAhdGhpcy5faXNTZXJ2ZXI7XG4gICAgdGhpcy5fc2VuZGVyLnBvbmcoZGF0YSB8fCBFTVBUWV9CVUZGRVIsIG1hc2ssIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN1bWUgdGhlIHNvY2tldC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVzdW1lKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcgfHxcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSB0aGlzLl9zb2NrZXQucmVzdW1lKCk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhIGRhdGEgbWVzc2FnZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBkYXRhIFRoZSBtZXNzYWdlIHRvIHNlbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zIG9iamVjdFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmJpbmFyeV0gU3BlY2lmaWVzIHdoZXRoZXIgYGRhdGFgIGlzIGJpbmFyeSBvclxuICAgKiAgICAgdGV4dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmNvbXByZXNzXSBTcGVjaWZpZXMgd2hldGhlciBvciBub3QgdG8gY29tcHJlc3NcbiAgICogICAgIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZpbj10cnVlXSBTcGVjaWZpZXMgd2hldGhlciB0aGUgZnJhZ21lbnQgaXMgdGhlXG4gICAqICAgICBsYXN0IG9uZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm1hc2tdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0byBtYXNrIGBkYXRhYFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIENhbGxiYWNrIHdoaWNoIGlzIGV4ZWN1dGVkIHdoZW4gZGF0YSBpcyB3cml0dGVuIG91dFxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZW5kKGRhdGEsIG9wdGlvbnMsIGNiKSB7XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlIDAgKENPTk5FQ1RJTkcpJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYiA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykgZGF0YSA9IGRhdGEudG9TdHJpbmcoKTtcblxuICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICBzZW5kQWZ0ZXJDbG9zZSh0aGlzLCBkYXRhLCBjYik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0cyA9IHtcbiAgICAgIGJpbmFyeTogdHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnLFxuICAgICAgbWFzazogIXRoaXMuX2lzU2VydmVyLFxuICAgICAgY29tcHJlc3M6IHRydWUsXG4gICAgICBmaW46IHRydWUsXG4gICAgICAuLi5vcHRpb25zXG4gICAgfTtcblxuICAgIGlmICghdGhpcy5fZXh0ZW5zaW9uc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkge1xuICAgICAgb3B0cy5jb21wcmVzcyA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuX3NlbmRlci5zZW5kKGRhdGEgfHwgRU1QVFlfQlVGRkVSLCBvcHRzLCBjYik7XG4gIH1cblxuICAvKipcbiAgICogRm9yY2libHkgY2xvc2UgdGhlIGNvbm5lY3Rpb24uXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHRlcm1pbmF0ZSgpIHtcbiAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuQ0xPU0VEKSByZXR1cm47XG4gICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNPTk5FQ1RJTkcpIHtcbiAgICAgIGNvbnN0IG1zZyA9ICdXZWJTb2NrZXQgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkJztcbiAgICAgIGFib3J0SGFuZHNoYWtlKHRoaXMsIHRoaXMuX3JlcSwgbXNnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc29ja2V0KSB7XG4gICAgICB0aGlzLl9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG4gICAgICB0aGlzLl9zb2NrZXQuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDT05ORUNUSU5HXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0XG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQsICdDT05ORUNUSU5HJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignQ09OTkVDVElORycpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gQ09OTkVDVElOR1xuICogQG1lbWJlcm9mIFdlYlNvY2tldC5wcm90b3R5cGVcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldC5wcm90b3R5cGUsICdDT05ORUNUSU5HJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICB2YWx1ZTogcmVhZHlTdGF0ZXMuaW5kZXhPZignQ09OTkVDVElORycpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gT1BFTlxuICogQG1lbWJlcm9mIFdlYlNvY2tldFxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LCAnT1BFTicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ09QRU4nKVxufSk7XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IE9QRU5cbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXQucHJvdG90eXBlXG4gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXZWJTb2NrZXQucHJvdG90eXBlLCAnT1BFTicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ09QRU4nKVxufSk7XG5cbi8qKlxuICogQGNvbnN0YW50IHtOdW1iZXJ9IENMT1NJTkdcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldCwgJ0NMT1NJTkcnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiByZWFkeVN0YXRlcy5pbmRleE9mKCdDTE9TSU5HJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDTE9TSU5HXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0LnByb3RvdHlwZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgJ0NMT1NJTkcnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIHZhbHVlOiByZWFkeVN0YXRlcy5pbmRleE9mKCdDTE9TSU5HJylcbn0pO1xuXG4vKipcbiAqIEBjb25zdGFudCB7TnVtYmVyfSBDTE9TRURcbiAqIEBtZW1iZXJvZiBXZWJTb2NrZXRcbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFdlYlNvY2tldCwgJ0NMT1NFRCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ0NMT1NFRCcpXG59KTtcblxuLyoqXG4gKiBAY29uc3RhbnQge051bWJlcn0gQ0xPU0VEXG4gKiBAbWVtYmVyb2YgV2ViU29ja2V0LnByb3RvdHlwZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgJ0NMT1NFRCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgdmFsdWU6IHJlYWR5U3RhdGVzLmluZGV4T2YoJ0NMT1NFRCcpXG59KTtcblxuW1xuICAnYmluYXJ5VHlwZScsXG4gICdidWZmZXJlZEFtb3VudCcsXG4gICdleHRlbnNpb25zJyxcbiAgJ2lzUGF1c2VkJyxcbiAgJ3Byb3RvY29sJyxcbiAgJ3JlYWR5U3RhdGUnLFxuICAndXJsJ1xuXS5mb3JFYWNoKChwcm9wZXJ0eSkgPT4ge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgcHJvcGVydHksIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn0pO1xuXG4vL1xuLy8gQWRkIHRoZSBgb25vcGVuYCwgYG9uZXJyb3JgLCBgb25jbG9zZWAsIGFuZCBgb25tZXNzYWdlYCBhdHRyaWJ1dGVzLlxuLy8gU2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2NvbW1zLmh0bWwjdGhlLXdlYnNvY2tldC1pbnRlcmZhY2Vcbi8vXG5bJ29wZW4nLCAnZXJyb3InLCAnY2xvc2UnLCAnbWVzc2FnZSddLmZvckVhY2goKG1ldGhvZCkgPT4ge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV2ViU29ja2V0LnByb3RvdHlwZSwgYG9uJHttZXRob2R9YCwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0KCkge1xuICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLmxpc3RlbmVycyhtZXRob2QpKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcltrRm9yT25FdmVudEF0dHJpYnV0ZV0pIHJldHVybiBsaXN0ZW5lcltrTGlzdGVuZXJdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIHNldChoYW5kbGVyKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKG1ldGhvZCkpIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyW2tGb3JPbkV2ZW50QXR0cmlidXRlXSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIobWV0aG9kLCBsaXN0ZW5lcik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSByZXR1cm47XG5cbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihtZXRob2QsIGhhbmRsZXIsIHtcbiAgICAgICAgW2tGb3JPbkV2ZW50QXR0cmlidXRlXTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5XZWJTb2NrZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBhZGRFdmVudExpc3RlbmVyO1xuV2ViU29ja2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gcmVtb3ZlRXZlbnRMaXN0ZW5lcjtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJTb2NrZXQ7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhIFdlYlNvY2tldCBjbGllbnQuXG4gKlxuICogQHBhcmFtIHtXZWJTb2NrZXR9IHdlYnNvY2tldCBUaGUgY2xpZW50IHRvIGluaXRpYWxpemVcbiAqIEBwYXJhbSB7KFN0cmluZ3xVUkwpfSBhZGRyZXNzIFRoZSBVUkwgdG8gd2hpY2ggdG8gY29ubmVjdFxuICogQHBhcmFtIHtBcnJheX0gcHJvdG9jb2xzIFRoZSBzdWJwcm90b2NvbHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gQ29ubmVjdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93U3luY2hyb25vdXNFdmVudHM9dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgYW55XG4gKiAgICAgb2YgdGhlIGAnbWVzc2FnZSdgLCBgJ3BpbmcnYCwgYW5kIGAncG9uZydgIGV2ZW50cyBjYW4gYmUgZW1pdHRlZCBtdWx0aXBsZVxuICogICAgIHRpbWVzIGluIHRoZSBzYW1lIHRpY2tcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYXV0b1Bvbmc9dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvXG4gKiAgICAgYXV0b21hdGljYWxseSBzZW5kIGEgcG9uZyBpbiByZXNwb25zZSB0byBhIHBpbmdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmZpbmlzaFJlcXVlc3RdIEEgZnVuY3Rpb24gd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAqICAgICBjdXN0b21pemUgdGhlIGhlYWRlcnMgb2YgZWFjaCBodHRwIHJlcXVlc3QgYmVmb3JlIGl0IGlzIHNlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZm9sbG93UmVkaXJlY3RzPWZhbHNlXSBXaGV0aGVyIG9yIG5vdCB0byBmb2xsb3dcbiAqICAgICByZWRpcmVjdHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmdlbmVyYXRlTWFza10gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gZ2VuZXJhdGUgdGhlXG4gKiAgICAgbWFza2luZyBrZXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5oYW5kc2hha2VUaW1lb3V0XSBUaW1lb3V0IGluIG1pbGxpc2Vjb25kcyBmb3IgdGhlXG4gKiAgICAgaGFuZHNoYWtlIHJlcXVlc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhQYXlsb2FkPTEwNDg1NzYwMF0gVGhlIG1heGltdW0gYWxsb3dlZCBtZXNzYWdlXG4gKiAgICAgc2l6ZVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heFJlZGlyZWN0cz0xMF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJlZGlyZWN0c1xuICogICAgIGFsbG93ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5vcmlnaW5dIFZhbHVlIG9mIHRoZSBgT3JpZ2luYCBvclxuICogICAgIGBTZWMtV2ViU29ja2V0LU9yaWdpbmAgaGVhZGVyXG4gKiBAcGFyYW0geyhCb29sZWFufE9iamVjdCl9IFtvcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlPXRydWVdIEVuYWJsZS9kaXNhYmxlXG4gKiAgICAgcGVybWVzc2FnZS1kZWZsYXRlXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMucHJvdG9jb2xWZXJzaW9uPTEzXSBWYWx1ZSBvZiB0aGVcbiAqICAgICBgU2VjLVdlYlNvY2tldC1WZXJzaW9uYCBoZWFkZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uPWZhbHNlXSBTcGVjaWZpZXMgd2hldGhlciBvclxuICogICAgIG5vdCB0byBza2lwIFVURi04IHZhbGlkYXRpb24gZm9yIHRleHQgYW5kIGNsb3NlIG1lc3NhZ2VzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpbml0QXNDbGllbnQod2Vic29ja2V0LCBhZGRyZXNzLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBhbGxvd1N5bmNocm9ub3VzRXZlbnRzOiB0cnVlLFxuICAgIGF1dG9Qb25nOiB0cnVlLFxuICAgIHByb3RvY29sVmVyc2lvbjogcHJvdG9jb2xWZXJzaW9uc1sxXSxcbiAgICBtYXhQYXlsb2FkOiAxMDAgKiAxMDI0ICogMTAyNCxcbiAgICBza2lwVVRGOFZhbGlkYXRpb246IGZhbHNlLFxuICAgIHBlck1lc3NhZ2VEZWZsYXRlOiB0cnVlLFxuICAgIGZvbGxvd1JlZGlyZWN0czogZmFsc2UsXG4gICAgbWF4UmVkaXJlY3RzOiAxMCxcbiAgICAuLi5vcHRpb25zLFxuICAgIHNvY2tldFBhdGg6IHVuZGVmaW5lZCxcbiAgICBob3N0bmFtZTogdW5kZWZpbmVkLFxuICAgIHByb3RvY29sOiB1bmRlZmluZWQsXG4gICAgdGltZW91dDogdW5kZWZpbmVkLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaG9zdDogdW5kZWZpbmVkLFxuICAgIHBhdGg6IHVuZGVmaW5lZCxcbiAgICBwb3J0OiB1bmRlZmluZWRcbiAgfTtcblxuICB3ZWJzb2NrZXQuX2F1dG9Qb25nID0gb3B0cy5hdXRvUG9uZztcblxuICBpZiAoIXByb3RvY29sVmVyc2lvbnMuaW5jbHVkZXMob3B0cy5wcm90b2NvbFZlcnNpb24pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXG4gICAgICBgVW5zdXBwb3J0ZWQgcHJvdG9jb2wgdmVyc2lvbjogJHtvcHRzLnByb3RvY29sVmVyc2lvbn0gYCArXG4gICAgICAgIGAoc3VwcG9ydGVkIHZlcnNpb25zOiAke3Byb3RvY29sVmVyc2lvbnMuam9pbignLCAnKX0pYFxuICAgICk7XG4gIH1cblxuICBsZXQgcGFyc2VkVXJsO1xuXG4gIGlmIChhZGRyZXNzIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgcGFyc2VkVXJsID0gYWRkcmVzcztcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgcGFyc2VkVXJsID0gbmV3IFVSTChhZGRyZXNzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoYEludmFsaWQgVVJMOiAke2FkZHJlc3N9YCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ2h0dHA6Jykge1xuICAgIHBhcnNlZFVybC5wcm90b2NvbCA9ICd3czonO1xuICB9IGVsc2UgaWYgKHBhcnNlZFVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOicpIHtcbiAgICBwYXJzZWRVcmwucHJvdG9jb2wgPSAnd3NzOic7XG4gIH1cblxuICB3ZWJzb2NrZXQuX3VybCA9IHBhcnNlZFVybC5ocmVmO1xuXG4gIGNvbnN0IGlzU2VjdXJlID0gcGFyc2VkVXJsLnByb3RvY29sID09PSAnd3NzOic7XG4gIGNvbnN0IGlzSXBjVXJsID0gcGFyc2VkVXJsLnByb3RvY29sID09PSAnd3MrdW5peDonO1xuICBsZXQgaW52YWxpZFVybE1lc3NhZ2U7XG5cbiAgaWYgKHBhcnNlZFVybC5wcm90b2NvbCAhPT0gJ3dzOicgJiYgIWlzU2VjdXJlICYmICFpc0lwY1VybCkge1xuICAgIGludmFsaWRVcmxNZXNzYWdlID1cbiAgICAgICdUaGUgVVJMXFwncyBwcm90b2NvbCBtdXN0IGJlIG9uZSBvZiBcIndzOlwiLCBcIndzczpcIiwgJyArXG4gICAgICAnXCJodHRwOlwiLCBcImh0dHBzXCIsIG9yIFwid3MrdW5peDpcIic7XG4gIH0gZWxzZSBpZiAoaXNJcGNVcmwgJiYgIXBhcnNlZFVybC5wYXRobmFtZSkge1xuICAgIGludmFsaWRVcmxNZXNzYWdlID0gXCJUaGUgVVJMJ3MgcGF0aG5hbWUgaXMgZW1wdHlcIjtcbiAgfSBlbHNlIGlmIChwYXJzZWRVcmwuaGFzaCkge1xuICAgIGludmFsaWRVcmxNZXNzYWdlID0gJ1RoZSBVUkwgY29udGFpbnMgYSBmcmFnbWVudCBpZGVudGlmaWVyJztcbiAgfVxuXG4gIGlmIChpbnZhbGlkVXJsTWVzc2FnZSkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBTeW50YXhFcnJvcihpbnZhbGlkVXJsTWVzc2FnZSk7XG5cbiAgICBpZiAod2Vic29ja2V0Ll9yZWRpcmVjdHMgPT09IDApIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGRlZmF1bHRQb3J0ID0gaXNTZWN1cmUgPyA0NDMgOiA4MDtcbiAgY29uc3Qga2V5ID0gcmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgY29uc3QgcmVxdWVzdCA9IGlzU2VjdXJlID8gaHR0cHMucmVxdWVzdCA6IGh0dHAucmVxdWVzdDtcbiAgY29uc3QgcHJvdG9jb2xTZXQgPSBuZXcgU2V0KCk7XG4gIGxldCBwZXJNZXNzYWdlRGVmbGF0ZTtcblxuICBvcHRzLmNyZWF0ZUNvbm5lY3Rpb24gPVxuICAgIG9wdHMuY3JlYXRlQ29ubmVjdGlvbiB8fCAoaXNTZWN1cmUgPyB0bHNDb25uZWN0IDogbmV0Q29ubmVjdCk7XG4gIG9wdHMuZGVmYXVsdFBvcnQgPSBvcHRzLmRlZmF1bHRQb3J0IHx8IGRlZmF1bHRQb3J0O1xuICBvcHRzLnBvcnQgPSBwYXJzZWRVcmwucG9ydCB8fCBkZWZhdWx0UG9ydDtcbiAgb3B0cy5ob3N0ID0gcGFyc2VkVXJsLmhvc3RuYW1lLnN0YXJ0c1dpdGgoJ1snKVxuICAgID8gcGFyc2VkVXJsLmhvc3RuYW1lLnNsaWNlKDEsIC0xKVxuICAgIDogcGFyc2VkVXJsLmhvc3RuYW1lO1xuICBvcHRzLmhlYWRlcnMgPSB7XG4gICAgLi4ub3B0cy5oZWFkZXJzLFxuICAgICdTZWMtV2ViU29ja2V0LVZlcnNpb24nOiBvcHRzLnByb3RvY29sVmVyc2lvbixcbiAgICAnU2VjLVdlYlNvY2tldC1LZXknOiBrZXksXG4gICAgQ29ubmVjdGlvbjogJ1VwZ3JhZGUnLFxuICAgIFVwZ3JhZGU6ICd3ZWJzb2NrZXQnXG4gIH07XG4gIG9wdHMucGF0aCA9IHBhcnNlZFVybC5wYXRobmFtZSArIHBhcnNlZFVybC5zZWFyY2g7XG4gIG9wdHMudGltZW91dCA9IG9wdHMuaGFuZHNoYWtlVGltZW91dDtcblxuICBpZiAob3B0cy5wZXJNZXNzYWdlRGVmbGF0ZSkge1xuICAgIHBlck1lc3NhZ2VEZWZsYXRlID0gbmV3IFBlck1lc3NhZ2VEZWZsYXRlKFxuICAgICAgb3B0cy5wZXJNZXNzYWdlRGVmbGF0ZSAhPT0gdHJ1ZSA/IG9wdHMucGVyTWVzc2FnZURlZmxhdGUgOiB7fSxcbiAgICAgIGZhbHNlLFxuICAgICAgb3B0cy5tYXhQYXlsb2FkXG4gICAgKTtcbiAgICBvcHRzLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyddID0gZm9ybWF0KHtcbiAgICAgIFtQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXTogcGVyTWVzc2FnZURlZmxhdGUub2ZmZXIoKVxuICAgIH0pO1xuICB9XG4gIGlmIChwcm90b2NvbHMubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCBwcm90b2NvbCBvZiBwcm90b2NvbHMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIHByb3RvY29sICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAhc3VicHJvdG9jb2xSZWdleC50ZXN0KHByb3RvY29sKSB8fFxuICAgICAgICBwcm90b2NvbFNldC5oYXMocHJvdG9jb2wpXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFxuICAgICAgICAgICdBbiBpbnZhbGlkIG9yIGR1cGxpY2F0ZWQgc3VicHJvdG9jb2wgd2FzIHNwZWNpZmllZCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcHJvdG9jb2xTZXQuYWRkKHByb3RvY29sKTtcbiAgICB9XG5cbiAgICBvcHRzLmhlYWRlcnNbJ1NlYy1XZWJTb2NrZXQtUHJvdG9jb2wnXSA9IHByb3RvY29scy5qb2luKCcsJyk7XG4gIH1cbiAgaWYgKG9wdHMub3JpZ2luKSB7XG4gICAgaWYgKG9wdHMucHJvdG9jb2xWZXJzaW9uIDwgMTMpIHtcbiAgICAgIG9wdHMuaGVhZGVyc1snU2VjLVdlYlNvY2tldC1PcmlnaW4nXSA9IG9wdHMub3JpZ2luO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRzLmhlYWRlcnMuT3JpZ2luID0gb3B0cy5vcmlnaW47XG4gICAgfVxuICB9XG4gIGlmIChwYXJzZWRVcmwudXNlcm5hbWUgfHwgcGFyc2VkVXJsLnBhc3N3b3JkKSB7XG4gICAgb3B0cy5hdXRoID0gYCR7cGFyc2VkVXJsLnVzZXJuYW1lfToke3BhcnNlZFVybC5wYXNzd29yZH1gO1xuICB9XG5cbiAgaWYgKGlzSXBjVXJsKSB7XG4gICAgY29uc3QgcGFydHMgPSBvcHRzLnBhdGguc3BsaXQoJzonKTtcblxuICAgIG9wdHMuc29ja2V0UGF0aCA9IHBhcnRzWzBdO1xuICAgIG9wdHMucGF0aCA9IHBhcnRzWzFdO1xuICB9XG5cbiAgbGV0IHJlcTtcblxuICBpZiAob3B0cy5mb2xsb3dSZWRpcmVjdHMpIHtcbiAgICBpZiAod2Vic29ja2V0Ll9yZWRpcmVjdHMgPT09IDApIHtcbiAgICAgIHdlYnNvY2tldC5fb3JpZ2luYWxJcGMgPSBpc0lwY1VybDtcbiAgICAgIHdlYnNvY2tldC5fb3JpZ2luYWxTZWN1cmUgPSBpc1NlY3VyZTtcbiAgICAgIHdlYnNvY2tldC5fb3JpZ2luYWxIb3N0T3JTb2NrZXRQYXRoID0gaXNJcGNVcmxcbiAgICAgICAgPyBvcHRzLnNvY2tldFBhdGhcbiAgICAgICAgOiBwYXJzZWRVcmwuaG9zdDtcblxuICAgICAgY29uc3QgaGVhZGVycyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5oZWFkZXJzO1xuXG4gICAgICAvL1xuICAgICAgLy8gU2hhbGxvdyBjb3B5IHRoZSB1c2VyIHByb3ZpZGVkIG9wdGlvbnMgc28gdGhhdCBoZWFkZXJzIGNhbiBiZSBjaGFuZ2VkXG4gICAgICAvLyB3aXRob3V0IG11dGF0aW5nIHRoZSBvcmlnaW5hbCBvYmplY3QuXG4gICAgICAvL1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgaGVhZGVyczoge30gfTtcblxuICAgICAgaWYgKGhlYWRlcnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaGVhZGVycykpIHtcbiAgICAgICAgICBvcHRpb25zLmhlYWRlcnNba2V5LnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHdlYnNvY2tldC5saXN0ZW5lckNvdW50KCdyZWRpcmVjdCcpID09PSAwKSB7XG4gICAgICBjb25zdCBpc1NhbWVIb3N0ID0gaXNJcGNVcmxcbiAgICAgICAgPyB3ZWJzb2NrZXQuX29yaWdpbmFsSXBjXG4gICAgICAgICAgPyBvcHRzLnNvY2tldFBhdGggPT09IHdlYnNvY2tldC5fb3JpZ2luYWxIb3N0T3JTb2NrZXRQYXRoXG4gICAgICAgICAgOiBmYWxzZVxuICAgICAgICA6IHdlYnNvY2tldC5fb3JpZ2luYWxJcGNcbiAgICAgICAgICA/IGZhbHNlXG4gICAgICAgICAgOiBwYXJzZWRVcmwuaG9zdCA9PT0gd2Vic29ja2V0Ll9vcmlnaW5hbEhvc3RPclNvY2tldFBhdGg7XG5cbiAgICAgIGlmICghaXNTYW1lSG9zdCB8fCAod2Vic29ja2V0Ll9vcmlnaW5hbFNlY3VyZSAmJiAhaXNTZWN1cmUpKSB7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIE1hdGNoIGN1cmwgNy43Ny4wIGJlaGF2aW9yIGFuZCBkcm9wIHRoZSBmb2xsb3dpbmcgaGVhZGVycy4gVGhlc2VcbiAgICAgICAgLy8gaGVhZGVycyBhcmUgYWxzbyBkcm9wcGVkIHdoZW4gZm9sbG93aW5nIGEgcmVkaXJlY3QgdG8gYSBzdWJkb21haW4uXG4gICAgICAgIC8vXG4gICAgICAgIGRlbGV0ZSBvcHRzLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICAgICAgZGVsZXRlIG9wdHMuaGVhZGVycy5jb29raWU7XG5cbiAgICAgICAgaWYgKCFpc1NhbWVIb3N0KSBkZWxldGUgb3B0cy5oZWFkZXJzLmhvc3Q7XG5cbiAgICAgICAgb3B0cy5hdXRoID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vXG4gICAgLy8gTWF0Y2ggY3VybCA3Ljc3LjAgYmVoYXZpb3IgYW5kIG1ha2UgdGhlIGZpcnN0IGBBdXRob3JpemF0aW9uYCBoZWFkZXIgd2luLlxuICAgIC8vIElmIHRoZSBgQXV0aG9yaXphdGlvbmAgaGVhZGVyIGlzIHNldCwgdGhlbiB0aGVyZSBpcyBub3RoaW5nIHRvIGRvIGFzIGl0XG4gICAgLy8gd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gICAgLy9cbiAgICBpZiAob3B0cy5hdXRoICYmICFvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbikge1xuICAgICAgb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb24gPVxuICAgICAgICAnQmFzaWMgJyArIEJ1ZmZlci5mcm9tKG9wdHMuYXV0aCkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cblxuICAgIHJlcSA9IHdlYnNvY2tldC5fcmVxID0gcmVxdWVzdChvcHRzKTtcblxuICAgIGlmICh3ZWJzb2NrZXQuX3JlZGlyZWN0cykge1xuICAgICAgLy9cbiAgICAgIC8vIFVubGlrZSB3aGF0IGlzIGRvbmUgZm9yIHRoZSBgJ3VwZ3JhZGUnYCBldmVudCwgbm8gZWFybHkgZXhpdCBpc1xuICAgICAgLy8gdHJpZ2dlcmVkIGhlcmUgaWYgdGhlIHVzZXIgY2FsbHMgYHdlYnNvY2tldC5jbG9zZSgpYCBvclxuICAgICAgLy8gYHdlYnNvY2tldC50ZXJtaW5hdGUoKWAgZnJvbSBhIGxpc3RlbmVyIG9mIHRoZSBgJ3JlZGlyZWN0J2AgZXZlbnQuIFRoaXNcbiAgICAgIC8vIGlzIGJlY2F1c2UgdGhlIHVzZXIgY2FuIGFsc28gY2FsbCBgcmVxdWVzdC5kZXN0cm95KClgIHdpdGggYW4gZXJyb3JcbiAgICAgIC8vIGJlZm9yZSBjYWxsaW5nIGB3ZWJzb2NrZXQuY2xvc2UoKWAgb3IgYHdlYnNvY2tldC50ZXJtaW5hdGUoKWAgYW5kIHRoaXNcbiAgICAgIC8vIHdvdWxkIHJlc3VsdCBpbiBhbiBlcnJvciBiZWluZyBlbWl0dGVkIG9uIHRoZSBgcmVxdWVzdGAgb2JqZWN0IHdpdGggbm9cbiAgICAgIC8vIGAnZXJyb3InYCBldmVudCBsaXN0ZW5lcnMgYXR0YWNoZWQuXG4gICAgICAvL1xuICAgICAgd2Vic29ja2V0LmVtaXQoJ3JlZGlyZWN0Jywgd2Vic29ja2V0LnVybCwgcmVxKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVxID0gd2Vic29ja2V0Ll9yZXEgPSByZXF1ZXN0KG9wdHMpO1xuICB9XG5cbiAgaWYgKG9wdHMudGltZW91dCkge1xuICAgIHJlcS5vbigndGltZW91dCcsICgpID0+IHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgcmVxLCAnT3BlbmluZyBoYW5kc2hha2UgaGFzIHRpbWVkIG91dCcpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVxLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICBpZiAocmVxID09PSBudWxsIHx8IHJlcVtrQWJvcnRlZF0pIHJldHVybjtcblxuICAgIHJlcSA9IHdlYnNvY2tldC5fcmVxID0gbnVsbDtcbiAgICBlbWl0RXJyb3JBbmRDbG9zZSh3ZWJzb2NrZXQsIGVycik7XG4gIH0pO1xuXG4gIHJlcS5vbigncmVzcG9uc2UnLCAocmVzKSA9PiB7XG4gICAgY29uc3QgbG9jYXRpb24gPSByZXMuaGVhZGVycy5sb2NhdGlvbjtcbiAgICBjb25zdCBzdGF0dXNDb2RlID0gcmVzLnN0YXR1c0NvZGU7XG5cbiAgICBpZiAoXG4gICAgICBsb2NhdGlvbiAmJlxuICAgICAgb3B0cy5mb2xsb3dSZWRpcmVjdHMgJiZcbiAgICAgIHN0YXR1c0NvZGUgPj0gMzAwICYmXG4gICAgICBzdGF0dXNDb2RlIDwgNDAwXG4gICAgKSB7XG4gICAgICBpZiAoKyt3ZWJzb2NrZXQuX3JlZGlyZWN0cyA+IG9wdHMubWF4UmVkaXJlY3RzKSB7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgcmVxLCAnTWF4aW11bSByZWRpcmVjdHMgZXhjZWVkZWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICByZXEuYWJvcnQoKTtcblxuICAgICAgbGV0IGFkZHI7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGFkZHIgPSBuZXcgVVJMKGxvY2F0aW9uLCBhZGRyZXNzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IFN5bnRheEVycm9yKGBJbnZhbGlkIFVSTDogJHtsb2NhdGlvbn1gKTtcbiAgICAgICAgZW1pdEVycm9yQW5kQ2xvc2Uod2Vic29ja2V0LCBlcnIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGluaXRBc0NsaWVudCh3ZWJzb2NrZXQsIGFkZHIsIHByb3RvY29scywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmICghd2Vic29ja2V0LmVtaXQoJ3VuZXhwZWN0ZWQtcmVzcG9uc2UnLCByZXEsIHJlcykpIHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKFxuICAgICAgICB3ZWJzb2NrZXQsXG4gICAgICAgIHJlcSxcbiAgICAgICAgYFVuZXhwZWN0ZWQgc2VydmVyIHJlc3BvbnNlOiAke3Jlcy5zdGF0dXNDb2RlfWBcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICByZXEub24oJ3VwZ3JhZGUnLCAocmVzLCBzb2NrZXQsIGhlYWQpID0+IHtcbiAgICB3ZWJzb2NrZXQuZW1pdCgndXBncmFkZScsIHJlcyk7XG5cbiAgICAvL1xuICAgIC8vIFRoZSB1c2VyIG1heSBoYXZlIGNsb3NlZCB0aGUgY29ubmVjdGlvbiBmcm9tIGEgbGlzdGVuZXIgb2YgdGhlXG4gICAgLy8gYCd1cGdyYWRlJ2AgZXZlbnQuXG4gICAgLy9cbiAgICBpZiAod2Vic29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5DT05ORUNUSU5HKSByZXR1cm47XG5cbiAgICByZXEgPSB3ZWJzb2NrZXQuX3JlcSA9IG51bGw7XG5cbiAgICBjb25zdCB1cGdyYWRlID0gcmVzLmhlYWRlcnMudXBncmFkZTtcblxuICAgIGlmICh1cGdyYWRlID09PSB1bmRlZmluZWQgfHwgdXBncmFkZS50b0xvd2VyQ2FzZSgpICE9PSAnd2Vic29ja2V0Jykge1xuICAgICAgYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzb2NrZXQsICdJbnZhbGlkIFVwZ3JhZGUgaGVhZGVyJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZGlnZXN0ID0gY3JlYXRlSGFzaCgnc2hhMScpXG4gICAgICAudXBkYXRlKGtleSArIEdVSUQpXG4gICAgICAuZGlnZXN0KCdiYXNlNjQnKTtcblxuICAgIGlmIChyZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1hY2NlcHQnXSAhPT0gZGlnZXN0KSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZSh3ZWJzb2NrZXQsIHNvY2tldCwgJ0ludmFsaWQgU2VjLVdlYlNvY2tldC1BY2NlcHQgaGVhZGVyJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2VydmVyUHJvdCA9IHJlcy5oZWFkZXJzWydzZWMtd2Vic29ja2V0LXByb3RvY29sJ107XG4gICAgbGV0IHByb3RFcnJvcjtcblxuICAgIGlmIChzZXJ2ZXJQcm90ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghcHJvdG9jb2xTZXQuc2l6ZSkge1xuICAgICAgICBwcm90RXJyb3IgPSAnU2VydmVyIHNlbnQgYSBzdWJwcm90b2NvbCBidXQgbm9uZSB3YXMgcmVxdWVzdGVkJztcbiAgICAgIH0gZWxzZSBpZiAoIXByb3RvY29sU2V0LmhhcyhzZXJ2ZXJQcm90KSkge1xuICAgICAgICBwcm90RXJyb3IgPSAnU2VydmVyIHNlbnQgYW4gaW52YWxpZCBzdWJwcm90b2NvbCc7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwcm90b2NvbFNldC5zaXplKSB7XG4gICAgICBwcm90RXJyb3IgPSAnU2VydmVyIHNlbnQgbm8gc3VicHJvdG9jb2wnO1xuICAgIH1cblxuICAgIGlmIChwcm90RXJyb3IpIHtcbiAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBwcm90RXJyb3IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzZXJ2ZXJQcm90KSB3ZWJzb2NrZXQuX3Byb3RvY29sID0gc2VydmVyUHJvdDtcblxuICAgIGNvbnN0IHNlY1dlYlNvY2tldEV4dGVuc2lvbnMgPSByZXMuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1leHRlbnNpb25zJ107XG5cbiAgICBpZiAoc2VjV2ViU29ja2V0RXh0ZW5zaW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXBlck1lc3NhZ2VEZWZsYXRlKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICdTZXJ2ZXIgc2VudCBhIFNlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyBoZWFkZXIgYnV0IG5vIGV4dGVuc2lvbiAnICtcbiAgICAgICAgICAnd2FzIHJlcXVlc3RlZCc7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgZXh0ZW5zaW9ucztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZXh0ZW5zaW9ucyA9IHBhcnNlKHNlY1dlYlNvY2tldEV4dGVuc2lvbnMpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnSW52YWxpZCBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMgaGVhZGVyJztcbiAgICAgICAgYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzb2NrZXQsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV4dGVuc2lvbk5hbWVzID0gT2JqZWN0LmtleXMoZXh0ZW5zaW9ucyk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgZXh0ZW5zaW9uTmFtZXMubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgIGV4dGVuc2lvbk5hbWVzWzBdICE9PSBQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICdTZXJ2ZXIgaW5kaWNhdGVkIGFuIGV4dGVuc2lvbiB0aGF0IHdhcyBub3QgcmVxdWVzdGVkJztcbiAgICAgICAgYWJvcnRIYW5kc2hha2Uod2Vic29ja2V0LCBzb2NrZXQsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlLmFjY2VwdChleHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0gJ0ludmFsaWQgU2VjLVdlYlNvY2tldC1FeHRlbnNpb25zIGhlYWRlcic7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc29ja2V0LCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB3ZWJzb2NrZXQuX2V4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0gPVxuICAgICAgICBwZXJNZXNzYWdlRGVmbGF0ZTtcbiAgICB9XG5cbiAgICB3ZWJzb2NrZXQuc2V0U29ja2V0KHNvY2tldCwgaGVhZCwge1xuICAgICAgYWxsb3dTeW5jaHJvbm91c0V2ZW50czogb3B0cy5hbGxvd1N5bmNocm9ub3VzRXZlbnRzLFxuICAgICAgZ2VuZXJhdGVNYXNrOiBvcHRzLmdlbmVyYXRlTWFzayxcbiAgICAgIG1heFBheWxvYWQ6IG9wdHMubWF4UGF5bG9hZCxcbiAgICAgIHNraXBVVEY4VmFsaWRhdGlvbjogb3B0cy5za2lwVVRGOFZhbGlkYXRpb25cbiAgICB9KTtcbiAgfSk7XG5cbiAgaWYgKG9wdHMuZmluaXNoUmVxdWVzdCkge1xuICAgIG9wdHMuZmluaXNoUmVxdWVzdChyZXEsIHdlYnNvY2tldCk7XG4gIH0gZWxzZSB7XG4gICAgcmVxLmVuZCgpO1xuICB9XG59XG5cbi8qKlxuICogRW1pdCB0aGUgYCdlcnJvcidgIGFuZCBgJ2Nsb3NlJ2AgZXZlbnRzLlxuICpcbiAqIEBwYXJhbSB7V2ViU29ja2V0fSB3ZWJzb2NrZXQgVGhlIFdlYlNvY2tldCBpbnN0YW5jZVxuICogQHBhcmFtIHtFcnJvcn0gVGhlIGVycm9yIHRvIGVtaXRcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVtaXRFcnJvckFuZENsb3NlKHdlYnNvY2tldCwgZXJyKSB7XG4gIHdlYnNvY2tldC5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuICAvL1xuICAvLyBUaGUgZm9sbG93aW5nIGFzc2lnbm1lbnQgaXMgcHJhY3RpY2FsbHkgdXNlbGVzcyBhbmQgaXMgZG9uZSBvbmx5IGZvclxuICAvLyBjb25zaXN0ZW5jeS5cbiAgLy9cbiAgd2Vic29ja2V0Ll9lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICB3ZWJzb2NrZXQuZW1pdCgnZXJyb3InLCBlcnIpO1xuICB3ZWJzb2NrZXQuZW1pdENsb3NlKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgYG5ldC5Tb2NrZXRgIGFuZCBpbml0aWF0ZSBhIGNvbm5lY3Rpb24uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQ29ubmVjdGlvbiBvcHRpb25zXG4gKiBAcmV0dXJuIHtuZXQuU29ja2V0fSBUaGUgbmV3bHkgY3JlYXRlZCBzb2NrZXQgdXNlZCB0byBzdGFydCB0aGUgY29ubmVjdGlvblxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbmV0Q29ubmVjdChvcHRpb25zKSB7XG4gIG9wdGlvbnMucGF0aCA9IG9wdGlvbnMuc29ja2V0UGF0aDtcbiAgcmV0dXJuIG5ldC5jb25uZWN0KG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGB0bHMuVExTU29ja2V0YCBhbmQgaW5pdGlhdGUgYSBjb25uZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIENvbm5lY3Rpb24gb3B0aW9uc1xuICogQHJldHVybiB7dGxzLlRMU1NvY2tldH0gVGhlIG5ld2x5IGNyZWF0ZWQgc29ja2V0IHVzZWQgdG8gc3RhcnQgdGhlIGNvbm5lY3Rpb25cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRsc0Nvbm5lY3Qob3B0aW9ucykge1xuICBvcHRpb25zLnBhdGggPSB1bmRlZmluZWQ7XG5cbiAgaWYgKCFvcHRpb25zLnNlcnZlcm5hbWUgJiYgb3B0aW9ucy5zZXJ2ZXJuYW1lICE9PSAnJykge1xuICAgIG9wdGlvbnMuc2VydmVybmFtZSA9IG5ldC5pc0lQKG9wdGlvbnMuaG9zdCkgPyAnJyA6IG9wdGlvbnMuaG9zdDtcbiAgfVxuXG4gIHJldHVybiB0bHMuY29ubmVjdChvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBBYm9ydCB0aGUgaGFuZHNoYWtlIGFuZCBlbWl0IGFuIGVycm9yLlxuICpcbiAqIEBwYXJhbSB7V2ViU29ja2V0fSB3ZWJzb2NrZXQgVGhlIFdlYlNvY2tldCBpbnN0YW5jZVxuICogQHBhcmFtIHsoaHR0cC5DbGllbnRSZXF1ZXN0fG5ldC5Tb2NrZXR8dGxzLlNvY2tldCl9IHN0cmVhbSBUaGUgcmVxdWVzdCB0b1xuICogICAgIGFib3J0IG9yIHRoZSBzb2NrZXQgdG8gZGVzdHJveVxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2VcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFib3J0SGFuZHNoYWtlKHdlYnNvY2tldCwgc3RyZWFtLCBtZXNzYWdlKSB7XG4gIHdlYnNvY2tldC5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuXG4gIGNvbnN0IGVyciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBhYm9ydEhhbmRzaGFrZSk7XG5cbiAgaWYgKHN0cmVhbS5zZXRIZWFkZXIpIHtcbiAgICBzdHJlYW1ba0Fib3J0ZWRdID0gdHJ1ZTtcbiAgICBzdHJlYW0uYWJvcnQoKTtcblxuICAgIGlmIChzdHJlYW0uc29ja2V0ICYmICFzdHJlYW0uc29ja2V0LmRlc3Ryb3llZCkge1xuICAgICAgLy9cbiAgICAgIC8vIE9uIE5vZGUuanMgPj0gMTQuMy4wIGByZXF1ZXN0LmFib3J0KClgIGRvZXMgbm90IGRlc3Ryb3kgdGhlIHNvY2tldCBpZlxuICAgICAgLy8gY2FsbGVkIGFmdGVyIHRoZSByZXF1ZXN0IGNvbXBsZXRlZC4gU2VlXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9pc3N1ZXMvMTg2OS5cbiAgICAgIC8vXG4gICAgICBzdHJlYW0uc29ja2V0LmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRFcnJvckFuZENsb3NlLCB3ZWJzb2NrZXQsIGVycik7XG4gIH0gZWxzZSB7XG4gICAgc3RyZWFtLmRlc3Ryb3koZXJyKTtcbiAgICBzdHJlYW0ub25jZSgnZXJyb3InLCB3ZWJzb2NrZXQuZW1pdC5iaW5kKHdlYnNvY2tldCwgJ2Vycm9yJykpO1xuICAgIHN0cmVhbS5vbmNlKCdjbG9zZScsIHdlYnNvY2tldC5lbWl0Q2xvc2UuYmluZCh3ZWJzb2NrZXQpKTtcbiAgfVxufVxuXG4vKipcbiAqIEhhbmRsZSBjYXNlcyB3aGVyZSB0aGUgYHBpbmcoKWAsIGBwb25nKClgLCBvciBgc2VuZCgpYCBtZXRob2RzIGFyZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGByZWFkeVN0YXRlYCBhdHRyaWJ1dGUgaXMgYENMT1NJTkdgIG9yIGBDTE9TRURgLlxuICpcbiAqIEBwYXJhbSB7V2ViU29ja2V0fSB3ZWJzb2NrZXQgVGhlIFdlYlNvY2tldCBpbnN0YW5jZVxuICogQHBhcmFtIHsqfSBbZGF0YV0gVGhlIGRhdGEgdG8gc2VuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXSBDYWxsYmFja1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2VuZEFmdGVyQ2xvc2Uod2Vic29ja2V0LCBkYXRhLCBjYikge1xuICBpZiAoZGF0YSkge1xuICAgIGNvbnN0IGxlbmd0aCA9IGlzQmxvYihkYXRhKSA/IGRhdGEuc2l6ZSA6IHRvQnVmZmVyKGRhdGEpLmxlbmd0aDtcblxuICAgIC8vXG4gICAgLy8gVGhlIGBfYnVmZmVyZWRBbW91bnRgIHByb3BlcnR5IGlzIHVzZWQgb25seSB3aGVuIHRoZSBwZWVyIGlzIGEgY2xpZW50IGFuZFxuICAgIC8vIHRoZSBvcGVuaW5nIGhhbmRzaGFrZSBmYWlscy4gVW5kZXIgdGhlc2UgY2lyY3Vtc3RhbmNlcywgaW4gZmFjdCwgdGhlXG4gICAgLy8gYHNldFNvY2tldCgpYCBtZXRob2QgaXMgbm90IGNhbGxlZCwgc28gdGhlIGBfc29ja2V0YCBhbmQgYF9zZW5kZXJgXG4gICAgLy8gcHJvcGVydGllcyBhcmUgc2V0IHRvIGBudWxsYC5cbiAgICAvL1xuICAgIGlmICh3ZWJzb2NrZXQuX3NvY2tldCkgd2Vic29ja2V0Ll9zZW5kZXIuX2J1ZmZlcmVkQnl0ZXMgKz0gbGVuZ3RoO1xuICAgIGVsc2Ugd2Vic29ja2V0Ll9idWZmZXJlZEFtb3VudCArPSBsZW5ndGg7XG4gIH1cblxuICBpZiAoY2IpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoXG4gICAgICBgV2ViU29ja2V0IGlzIG5vdCBvcGVuOiByZWFkeVN0YXRlICR7d2Vic29ja2V0LnJlYWR5U3RhdGV9IGAgK1xuICAgICAgICBgKCR7cmVhZHlTdGF0ZXNbd2Vic29ja2V0LnJlYWR5U3RhdGVdfSlgXG4gICAgKTtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGNiLCBlcnIpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAnY29uY2x1ZGUnYCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgc3RhdHVzIGNvZGVcbiAqIEBwYXJhbSB7QnVmZmVyfSByZWFzb24gVGhlIHJlYXNvbiBmb3IgY2xvc2luZ1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPbkNvbmNsdWRlKGNvZGUsIHJlYXNvbikge1xuICBjb25zdCB3ZWJzb2NrZXQgPSB0aGlzW2tXZWJTb2NrZXRdO1xuXG4gIHdlYnNvY2tldC5fY2xvc2VGcmFtZVJlY2VpdmVkID0gdHJ1ZTtcbiAgd2Vic29ja2V0Ll9jbG9zZU1lc3NhZ2UgPSByZWFzb247XG4gIHdlYnNvY2tldC5fY2xvc2VDb2RlID0gY29kZTtcblxuICBpZiAod2Vic29ja2V0Ll9zb2NrZXRba1dlYlNvY2tldF0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gIHdlYnNvY2tldC5fc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgc29ja2V0T25EYXRhKTtcbiAgcHJvY2Vzcy5uZXh0VGljayhyZXN1bWUsIHdlYnNvY2tldC5fc29ja2V0KTtcblxuICBpZiAoY29kZSA9PT0gMTAwNSkgd2Vic29ja2V0LmNsb3NlKCk7XG4gIGVsc2Ugd2Vic29ja2V0LmNsb3NlKGNvZGUsIHJlYXNvbik7XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBgUmVjZWl2ZXJgIGAnZHJhaW4nYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uRHJhaW4oKSB7XG4gIGNvbnN0IHdlYnNvY2tldCA9IHRoaXNba1dlYlNvY2tldF07XG5cbiAgaWYgKCF3ZWJzb2NrZXQuaXNQYXVzZWQpIHdlYnNvY2tldC5fc29ja2V0LnJlc3VtZSgpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYFJlY2VpdmVyYCBgJ2Vycm9yJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHsoUmFuZ2VFcnJvcnxFcnJvcil9IGVyciBUaGUgZW1pdHRlZCBlcnJvclxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPbkVycm9yKGVycikge1xuICBjb25zdCB3ZWJzb2NrZXQgPSB0aGlzW2tXZWJTb2NrZXRdO1xuXG4gIGlmICh3ZWJzb2NrZXQuX3NvY2tldFtrV2ViU29ja2V0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgd2Vic29ja2V0Ll9zb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBzb2NrZXRPbkRhdGEpO1xuXG4gICAgLy9cbiAgICAvLyBPbiBOb2RlLmpzIDwgMTQuMC4wIHRoZSBgJ2Vycm9yJ2AgZXZlbnQgaXMgZW1pdHRlZCBzeW5jaHJvbm91c2x5LiBTZWVcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vd2Vic29ja2V0cy93cy9pc3N1ZXMvMTk0MC5cbiAgICAvL1xuICAgIHByb2Nlc3MubmV4dFRpY2socmVzdW1lLCB3ZWJzb2NrZXQuX3NvY2tldCk7XG5cbiAgICB3ZWJzb2NrZXQuY2xvc2UoZXJyW2tTdGF0dXNDb2RlXSk7XG4gIH1cblxuICBpZiAoIXdlYnNvY2tldC5fZXJyb3JFbWl0dGVkKSB7XG4gICAgd2Vic29ja2V0Ll9lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgIHdlYnNvY2tldC5lbWl0KCdlcnJvcicsIGVycik7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIGBSZWNlaXZlcmAgYCdmaW5pc2gnYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNlaXZlck9uRmluaXNoKCkge1xuICB0aGlzW2tXZWJTb2NrZXRdLmVtaXRDbG9zZSgpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYFJlY2VpdmVyYCBgJ21lc3NhZ2UnYCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcnxBcnJheUJ1ZmZlcnxCdWZmZXJbXSl9IGRhdGEgVGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNCaW5hcnkgU3BlY2lmaWVzIHdoZXRoZXIgdGhlIG1lc3NhZ2UgaXMgYmluYXJ5IG9yIG5vdFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPbk1lc3NhZ2UoZGF0YSwgaXNCaW5hcnkpIHtcbiAgdGhpc1trV2ViU29ja2V0XS5lbWl0KCdtZXNzYWdlJywgZGF0YSwgaXNCaW5hcnkpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYFJlY2VpdmVyYCBgJ3BpbmcnYCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBUaGUgZGF0YSBpbmNsdWRlZCBpbiB0aGUgcGluZyBmcmFtZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPblBpbmcoZGF0YSkge1xuICBjb25zdCB3ZWJzb2NrZXQgPSB0aGlzW2tXZWJTb2NrZXRdO1xuXG4gIGlmICh3ZWJzb2NrZXQuX2F1dG9Qb25nKSB3ZWJzb2NrZXQucG9uZyhkYXRhLCAhdGhpcy5faXNTZXJ2ZXIsIE5PT1ApO1xuICB3ZWJzb2NrZXQuZW1pdCgncGluZycsIGRhdGEpO1xufVxuXG4vKipcbiAqIFRoZSBsaXN0ZW5lciBvZiB0aGUgYFJlY2VpdmVyYCBgJ3BvbmcnYCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0J1ZmZlcn0gZGF0YSBUaGUgZGF0YSBpbmNsdWRlZCBpbiB0aGUgcG9uZyBmcmFtZVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVjZWl2ZXJPblBvbmcoZGF0YSkge1xuICB0aGlzW2tXZWJTb2NrZXRdLmVtaXQoJ3BvbmcnLCBkYXRhKTtcbn1cblxuLyoqXG4gKiBSZXN1bWUgYSByZWFkYWJsZSBzdHJlYW1cbiAqXG4gKiBAcGFyYW0ge1JlYWRhYmxlfSBzdHJlYW0gVGhlIHJlYWRhYmxlIHN0cmVhbVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSkge1xuICBzdHJlYW0ucmVzdW1lKCk7XG59XG5cbi8qKlxuICogVGhlIGBTZW5kZXJgIGVycm9yIGV2ZW50IGhhbmRsZXIuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gVGhlIGVycm9yXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzZW5kZXJPbkVycm9yKGVycikge1xuICBjb25zdCB3ZWJzb2NrZXQgPSB0aGlzW2tXZWJTb2NrZXRdO1xuXG4gIGlmICh3ZWJzb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkgcmV0dXJuO1xuICBpZiAod2Vic29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgd2Vic29ja2V0Ll9yZWFkeVN0YXRlID0gV2ViU29ja2V0LkNMT1NJTkc7XG4gICAgc2V0Q2xvc2VUaW1lcih3ZWJzb2NrZXQpO1xuICB9XG5cbiAgLy9cbiAgLy8gYHNvY2tldC5lbmQoKWAgaXMgdXNlZCBpbnN0ZWFkIG9mIGBzb2NrZXQuZGVzdHJveSgpYCB0byBhbGxvdyB0aGUgb3RoZXJcbiAgLy8gcGVlciB0byBmaW5pc2ggc2VuZGluZyBxdWV1ZWQgZGF0YS4gVGhlcmUgaXMgbm8gbmVlZCB0byBzZXQgYSB0aW1lciBoZXJlXG4gIC8vIGJlY2F1c2UgYENMT1NJTkdgIG1lYW5zIHRoYXQgaXQgaXMgYWxyZWFkeSBzZXQgb3Igbm90IG5lZWRlZC5cbiAgLy9cbiAgdGhpcy5fc29ja2V0LmVuZCgpO1xuXG4gIGlmICghd2Vic29ja2V0Ll9lcnJvckVtaXR0ZWQpIHtcbiAgICB3ZWJzb2NrZXQuX2Vycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgd2Vic29ja2V0LmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgfVxufVxuXG4vKipcbiAqIFNldCBhIHRpbWVyIHRvIGRlc3Ryb3kgdGhlIHVuZGVybHlpbmcgcmF3IHNvY2tldCBvZiBhIFdlYlNvY2tldC5cbiAqXG4gKiBAcGFyYW0ge1dlYlNvY2tldH0gd2Vic29ja2V0IFRoZSBXZWJTb2NrZXQgaW5zdGFuY2VcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNldENsb3NlVGltZXIod2Vic29ja2V0KSB7XG4gIHdlYnNvY2tldC5fY2xvc2VUaW1lciA9IHNldFRpbWVvdXQoXG4gICAgd2Vic29ja2V0Ll9zb2NrZXQuZGVzdHJveS5iaW5kKHdlYnNvY2tldC5fc29ja2V0KSxcbiAgICBjbG9zZVRpbWVvdXRcbiAgKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIHNvY2tldCBgJ2Nsb3NlJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25DbG9zZSgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIHNvY2tldE9uQ2xvc2UpO1xuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgc29ja2V0T25EYXRhKTtcbiAgdGhpcy5yZW1vdmVMaXN0ZW5lcignZW5kJywgc29ja2V0T25FbmQpO1xuXG4gIHdlYnNvY2tldC5fcmVhZHlTdGF0ZSA9IFdlYlNvY2tldC5DTE9TSU5HO1xuXG4gIGxldCBjaHVuaztcblxuICAvL1xuICAvLyBUaGUgY2xvc2UgZnJhbWUgbWlnaHQgbm90IGhhdmUgYmVlbiByZWNlaXZlZCBvciB0aGUgYCdlbmQnYCBldmVudCBlbWl0dGVkLFxuICAvLyBmb3IgZXhhbXBsZSwgaWYgdGhlIHNvY2tldCB3YXMgZGVzdHJveWVkIGR1ZSB0byBhbiBlcnJvci4gRW5zdXJlIHRoYXQgdGhlXG4gIC8vIGByZWNlaXZlcmAgc3RyZWFtIGlzIGNsb3NlZCBhZnRlciB3cml0aW5nIGFueSByZW1haW5pbmcgYnVmZmVyZWQgZGF0YSB0b1xuICAvLyBpdC4gSWYgdGhlIHJlYWRhYmxlIHNpZGUgb2YgdGhlIHNvY2tldCBpcyBpbiBmbG93aW5nIG1vZGUgdGhlbiB0aGVyZSBpcyBub1xuICAvLyBidWZmZXJlZCBkYXRhIGFzIGV2ZXJ5dGhpbmcgaGFzIGJlZW4gYWxyZWFkeSB3cml0dGVuIGFuZCBgcmVhZGFibGUucmVhZCgpYFxuICAvLyB3aWxsIHJldHVybiBgbnVsbGAuIElmIGluc3RlYWQsIHRoZSBzb2NrZXQgaXMgcGF1c2VkLCBhbnkgcG9zc2libGUgYnVmZmVyZWRcbiAgLy8gZGF0YSB3aWxsIGJlIHJlYWQgYXMgYSBzaW5nbGUgY2h1bmsuXG4gIC8vXG4gIGlmIChcbiAgICAhdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkICYmXG4gICAgIXdlYnNvY2tldC5fY2xvc2VGcmFtZVJlY2VpdmVkICYmXG4gICAgIXdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkICYmXG4gICAgKGNodW5rID0gd2Vic29ja2V0Ll9zb2NrZXQucmVhZCgpKSAhPT0gbnVsbFxuICApIHtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLndyaXRlKGNodW5rKTtcbiAgfVxuXG4gIHdlYnNvY2tldC5fcmVjZWl2ZXIuZW5kKCk7XG5cbiAgdGhpc1trV2ViU29ja2V0XSA9IHVuZGVmaW5lZDtcblxuICBjbGVhclRpbWVvdXQod2Vic29ja2V0Ll9jbG9zZVRpbWVyKTtcblxuICBpZiAoXG4gICAgd2Vic29ja2V0Ll9yZWNlaXZlci5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCB8fFxuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkXG4gICkge1xuICAgIHdlYnNvY2tldC5lbWl0Q2xvc2UoKTtcbiAgfSBlbHNlIHtcbiAgICB3ZWJzb2NrZXQuX3JlY2VpdmVyLm9uKCdlcnJvcicsIHJlY2VpdmVyT25GaW5pc2gpO1xuICAgIHdlYnNvY2tldC5fcmVjZWl2ZXIub24oJ2ZpbmlzaCcsIHJlY2VpdmVyT25GaW5pc2gpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBzb2NrZXQgYCdkYXRhJ2AgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtCdWZmZXJ9IGNodW5rIEEgY2h1bmsgb2YgZGF0YVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25EYXRhKGNodW5rKSB7XG4gIGlmICghdGhpc1trV2ViU29ja2V0XS5fcmVjZWl2ZXIud3JpdGUoY2h1bmspKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGxpc3RlbmVyIG9mIHRoZSBzb2NrZXQgYCdlbmQnYCBldmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzb2NrZXRPbkVuZCgpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB3ZWJzb2NrZXQuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgd2Vic29ja2V0Ll9yZWNlaXZlci5lbmQoKTtcbiAgdGhpcy5lbmQoKTtcbn1cblxuLyoqXG4gKiBUaGUgbGlzdGVuZXIgb2YgdGhlIHNvY2tldCBgJ2Vycm9yJ2AgZXZlbnQuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc29ja2V0T25FcnJvcigpIHtcbiAgY29uc3Qgd2Vic29ja2V0ID0gdGhpc1trV2ViU29ja2V0XTtcblxuICB0aGlzLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIHNvY2tldE9uRXJyb3IpO1xuICB0aGlzLm9uKCdlcnJvcicsIE5PT1ApO1xuXG4gIGlmICh3ZWJzb2NrZXQpIHtcbiAgICB3ZWJzb2NrZXQuX3JlYWR5U3RhdGUgPSBXZWJTb2NrZXQuQ0xPU0lORztcbiAgICB0aGlzLmRlc3Ryb3koKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCB7IHRva2VuQ2hhcnMgfSA9IHJlcXVpcmUoJy4vdmFsaWRhdGlvbicpO1xuXG4vKipcbiAqIFBhcnNlcyB0aGUgYFNlYy1XZWJTb2NrZXQtUHJvdG9jb2xgIGhlYWRlciBpbnRvIGEgc2V0IG9mIHN1YnByb3RvY29sIG5hbWVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXIgVGhlIGZpZWxkIHZhbHVlIG9mIHRoZSBoZWFkZXJcbiAqIEByZXR1cm4ge1NldH0gVGhlIHN1YnByb3RvY29sIG5hbWVzXG4gKiBAcHVibGljXG4gKi9cbmZ1bmN0aW9uIHBhcnNlKGhlYWRlcikge1xuICBjb25zdCBwcm90b2NvbHMgPSBuZXcgU2V0KCk7XG4gIGxldCBzdGFydCA9IC0xO1xuICBsZXQgZW5kID0gLTE7XG4gIGxldCBpID0gMDtcblxuICBmb3IgKGk7IGkgPCBoZWFkZXIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjb2RlID0gaGVhZGVyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICBpZiAoZW5kID09PSAtMSAmJiB0b2tlbkNoYXJzW2NvZGVdID09PSAxKSB7XG4gICAgICBpZiAoc3RhcnQgPT09IC0xKSBzdGFydCA9IGk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGkgIT09IDAgJiZcbiAgICAgIChjb2RlID09PSAweDIwIC8qICcgJyAqLyB8fCBjb2RlID09PSAweDA5KSAvKiAnXFx0JyAqL1xuICAgICkge1xuICAgICAgaWYgKGVuZCA9PT0gLTEgJiYgc3RhcnQgIT09IC0xKSBlbmQgPSBpO1xuICAgIH0gZWxzZSBpZiAoY29kZSA9PT0gMHgyYyAvKiAnLCcgKi8pIHtcbiAgICAgIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbmQgPT09IC0xKSBlbmQgPSBpO1xuXG4gICAgICBjb25zdCBwcm90b2NvbCA9IGhlYWRlci5zbGljZShzdGFydCwgZW5kKTtcblxuICAgICAgaWYgKHByb3RvY29scy5oYXMocHJvdG9jb2wpKSB7XG4gICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlIFwiJHtwcm90b2NvbH1cIiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7XG4gICAgICB9XG5cbiAgICAgIHByb3RvY29scy5hZGQocHJvdG9jb2wpO1xuICAgICAgc3RhcnQgPSBlbmQgPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKGBVbmV4cGVjdGVkIGNoYXJhY3RlciBhdCBpbmRleCAke2l9YCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXJ0ID09PSAtMSB8fCBlbmQgIT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBpbnB1dCcpO1xuICB9XG5cbiAgY29uc3QgcHJvdG9jb2wgPSBoZWFkZXIuc2xpY2Uoc3RhcnQsIGkpO1xuXG4gIGlmIChwcm90b2NvbHMuaGFzKHByb3RvY29sKSkge1xuICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihgVGhlIFwiJHtwcm90b2NvbH1cIiBzdWJwcm90b2NvbCBpcyBkdXBsaWNhdGVkYCk7XG4gIH1cblxuICBwcm90b2NvbHMuYWRkKHByb3RvY29sKTtcbiAgcmV0dXJuIHByb3RvY29scztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IHBhcnNlIH07XG4iLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcIl5EdXBsZXgkXCIsIFwiY2F1Z2h0RXJyb3JzXCI6IFwibm9uZVwiIH1dICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5jb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpO1xuY29uc3QgeyBEdXBsZXggfSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuY29uc3QgeyBjcmVhdGVIYXNoIH0gPSByZXF1aXJlKCdjcnlwdG8nKTtcblxuY29uc3QgZXh0ZW5zaW9uID0gcmVxdWlyZSgnLi9leHRlbnNpb24nKTtcbmNvbnN0IFBlck1lc3NhZ2VEZWZsYXRlID0gcmVxdWlyZSgnLi9wZXJtZXNzYWdlLWRlZmxhdGUnKTtcbmNvbnN0IHN1YnByb3RvY29sID0gcmVxdWlyZSgnLi9zdWJwcm90b2NvbCcpO1xuY29uc3QgV2ViU29ja2V0ID0gcmVxdWlyZSgnLi93ZWJzb2NrZXQnKTtcbmNvbnN0IHsgR1VJRCwga1dlYlNvY2tldCB9ID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuY29uc3Qga2V5UmVnZXggPSAvXlsrLzAtOUEtWmEtel17MjJ9PT0kLztcblxuY29uc3QgUlVOTklORyA9IDA7XG5jb25zdCBDTE9TSU5HID0gMTtcbmNvbnN0IENMT1NFRCA9IDI7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgV2ViU29ja2V0IHNlcnZlci5cbiAqXG4gKiBAZXh0ZW5kcyBFdmVudEVtaXR0ZXJcbiAqL1xuY2xhc3MgV2ViU29ja2V0U2VydmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIGBXZWJTb2NrZXRTZXJ2ZXJgIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBDb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxvd1N5bmNocm9ub3VzRXZlbnRzPXRydWVdIFNwZWNpZmllcyB3aGV0aGVyXG4gICAqICAgICBhbnkgb2YgdGhlIGAnbWVzc2FnZSdgLCBgJ3BpbmcnYCwgYW5kIGAncG9uZydgIGV2ZW50cyBjYW4gYmUgZW1pdHRlZFxuICAgKiAgICAgbXVsdGlwbGUgdGltZXMgaW4gdGhlIHNhbWUgdGlja1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmF1dG9Qb25nPXRydWVdIFNwZWNpZmllcyB3aGV0aGVyIG9yIG5vdCB0b1xuICAgKiAgICAgYXV0b21hdGljYWxseSBzZW5kIGEgcG9uZyBpbiByZXNwb25zZSB0byBhIHBpbmdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmJhY2tsb2c9NTExXSBUaGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIHF1ZXVlIG9mXG4gICAqICAgICBwZW5kaW5nIGNvbm5lY3Rpb25zXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuY2xpZW50VHJhY2tpbmc9dHJ1ZV0gU3BlY2lmaWVzIHdoZXRoZXIgb3Igbm90IHRvXG4gICAqICAgICB0cmFjayBjbGllbnRzXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25zLmhhbmRsZVByb3RvY29sc10gQSBob29rIHRvIGhhbmRsZSBwcm90b2NvbHNcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmhvc3RdIFRoZSBob3N0bmFtZSB3aGVyZSB0byBiaW5kIHRoZSBzZXJ2ZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heFBheWxvYWQ9MTA0ODU3NjAwXSBUaGUgbWF4aW11bSBhbGxvd2VkIG1lc3NhZ2VcbiAgICogICAgIHNpemVcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5ub1NlcnZlcj1mYWxzZV0gRW5hYmxlIG5vIHNlcnZlciBtb2RlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5wYXRoXSBBY2NlcHQgb25seSBjb25uZWN0aW9ucyBtYXRjaGluZyB0aGlzIHBhdGhcbiAgICogQHBhcmFtIHsoQm9vbGVhbnxPYmplY3QpfSBbb3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZT1mYWxzZV0gRW5hYmxlL2Rpc2FibGVcbiAgICogICAgIHBlcm1lc3NhZ2UtZGVmbGF0ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMucG9ydF0gVGhlIHBvcnQgd2hlcmUgdG8gYmluZCB0aGUgc2VydmVyXG4gICAqIEBwYXJhbSB7KGh0dHAuU2VydmVyfGh0dHBzLlNlcnZlcil9IFtvcHRpb25zLnNlcnZlcl0gQSBwcmUtY3JlYXRlZCBIVFRQL1NcbiAgICogICAgIHNlcnZlciB0byB1c2VcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5za2lwVVRGOFZhbGlkYXRpb249ZmFsc2VdIFNwZWNpZmllcyB3aGV0aGVyIG9yXG4gICAqICAgICBub3QgdG8gc2tpcCBVVEYtOCB2YWxpZGF0aW9uIGZvciB0ZXh0IGFuZCBjbG9zZSBtZXNzYWdlc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy52ZXJpZnlDbGllbnRdIEEgaG9vayB0byByZWplY3QgY29ubmVjdGlvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbnMuV2ViU29ja2V0PVdlYlNvY2tldF0gU3BlY2lmaWVzIHRoZSBgV2ViU29ja2V0YFxuICAgKiAgICAgY2xhc3MgdG8gdXNlLiBJdCBtdXN0IGJlIHRoZSBgV2ViU29ja2V0YCBjbGFzcyBvciBjbGFzcyB0aGF0IGV4dGVuZHMgaXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NhbGxiYWNrXSBBIGxpc3RlbmVyIGZvciB0aGUgYGxpc3RlbmluZ2AgZXZlbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSB7XG4gICAgICBhbGxvd1N5bmNocm9ub3VzRXZlbnRzOiB0cnVlLFxuICAgICAgYXV0b1Bvbmc6IHRydWUsXG4gICAgICBtYXhQYXlsb2FkOiAxMDAgKiAxMDI0ICogMTAyNCxcbiAgICAgIHNraXBVVEY4VmFsaWRhdGlvbjogZmFsc2UsXG4gICAgICBwZXJNZXNzYWdlRGVmbGF0ZTogZmFsc2UsXG4gICAgICBoYW5kbGVQcm90b2NvbHM6IG51bGwsXG4gICAgICBjbGllbnRUcmFja2luZzogdHJ1ZSxcbiAgICAgIHZlcmlmeUNsaWVudDogbnVsbCxcbiAgICAgIG5vU2VydmVyOiBmYWxzZSxcbiAgICAgIGJhY2tsb2c6IG51bGwsIC8vIHVzZSBkZWZhdWx0ICg1MTEgYXMgaW1wbGVtZW50ZWQgaW4gbmV0LmpzKVxuICAgICAgc2VydmVyOiBudWxsLFxuICAgICAgaG9zdDogbnVsbCxcbiAgICAgIHBhdGg6IG51bGwsXG4gICAgICBwb3J0OiBudWxsLFxuICAgICAgV2ViU29ja2V0LFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG5cbiAgICBpZiAoXG4gICAgICAob3B0aW9ucy5wb3J0ID09IG51bGwgJiYgIW9wdGlvbnMuc2VydmVyICYmICFvcHRpb25zLm5vU2VydmVyKSB8fFxuICAgICAgKG9wdGlvbnMucG9ydCAhPSBudWxsICYmIChvcHRpb25zLnNlcnZlciB8fCBvcHRpb25zLm5vU2VydmVyKSkgfHxcbiAgICAgIChvcHRpb25zLnNlcnZlciAmJiBvcHRpb25zLm5vU2VydmVyKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgJ09uZSBhbmQgb25seSBvbmUgb2YgdGhlIFwicG9ydFwiLCBcInNlcnZlclwiLCBvciBcIm5vU2VydmVyXCIgb3B0aW9ucyAnICtcbiAgICAgICAgICAnbXVzdCBiZSBzcGVjaWZpZWQnXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnBvcnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBodHRwLlNUQVRVU19DT0RFU1s0MjZdO1xuXG4gICAgICAgIHJlcy53cml0ZUhlYWQoNDI2LCB7XG4gICAgICAgICAgJ0NvbnRlbnQtTGVuZ3RoJzogYm9keS5sZW5ndGgsXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzLmVuZChib2R5KTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fc2VydmVyLmxpc3RlbihcbiAgICAgICAgb3B0aW9ucy5wb3J0LFxuICAgICAgICBvcHRpb25zLmhvc3QsXG4gICAgICAgIG9wdGlvbnMuYmFja2xvZyxcbiAgICAgICAgY2FsbGJhY2tcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnNlcnZlcikge1xuICAgICAgdGhpcy5fc2VydmVyID0gb3B0aW9ucy5zZXJ2ZXI7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3NlcnZlcikge1xuICAgICAgY29uc3QgZW1pdENvbm5lY3Rpb24gPSB0aGlzLmVtaXQuYmluZCh0aGlzLCAnY29ubmVjdGlvbicpO1xuXG4gICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMgPSBhZGRMaXN0ZW5lcnModGhpcy5fc2VydmVyLCB7XG4gICAgICAgIGxpc3RlbmluZzogdGhpcy5lbWl0LmJpbmQodGhpcywgJ2xpc3RlbmluZycpLFxuICAgICAgICBlcnJvcjogdGhpcy5lbWl0LmJpbmQodGhpcywgJ2Vycm9yJyksXG4gICAgICAgIHVwZ3JhZGU6IChyZXEsIHNvY2tldCwgaGVhZCkgPT4ge1xuICAgICAgICAgIHRoaXMuaGFuZGxlVXBncmFkZShyZXEsIHNvY2tldCwgaGVhZCwgZW1pdENvbm5lY3Rpb24pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSA9PT0gdHJ1ZSkgb3B0aW9ucy5wZXJNZXNzYWdlRGVmbGF0ZSA9IHt9O1xuICAgIGlmIChvcHRpb25zLmNsaWVudFRyYWNraW5nKSB7XG4gICAgICB0aGlzLmNsaWVudHMgPSBuZXcgU2V0KCk7XG4gICAgICB0aGlzLl9zaG91bGRFbWl0Q2xvc2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuX3N0YXRlID0gUlVOTklORztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBib3VuZCBhZGRyZXNzLCB0aGUgYWRkcmVzcyBmYW1pbHkgbmFtZSwgYW5kIHBvcnQgb2YgdGhlIHNlcnZlclxuICAgKiBhcyByZXBvcnRlZCBieSB0aGUgb3BlcmF0aW5nIHN5c3RlbSBpZiBsaXN0ZW5pbmcgb24gYW4gSVAgc29ja2V0LlxuICAgKiBJZiB0aGUgc2VydmVyIGlzIGxpc3RlbmluZyBvbiBhIHBpcGUgb3IgVU5JWCBkb21haW4gc29ja2V0LCB0aGUgbmFtZSBpc1xuICAgKiByZXR1cm5lZCBhcyBhIHN0cmluZy5cbiAgICpcbiAgICogQHJldHVybiB7KE9iamVjdHxTdHJpbmd8bnVsbCl9IFRoZSBhZGRyZXNzIG9mIHRoZSBzZXJ2ZXJcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYWRkcmVzcygpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm5vU2VydmVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzZXJ2ZXIgaXMgb3BlcmF0aW5nIGluIFwibm9TZXJ2ZXJcIiBtb2RlJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9zZXJ2ZXIpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLl9zZXJ2ZXIuYWRkcmVzcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIHNlcnZlciBmcm9tIGFjY2VwdGluZyBuZXcgY29ubmVjdGlvbnMgYW5kIGVtaXQgdGhlIGAnY2xvc2UnYCBldmVudFxuICAgKiB3aGVuIGFsbCBleGlzdGluZyBjb25uZWN0aW9ucyBhcmUgY2xvc2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdIEEgb25lLXRpbWUgbGlzdGVuZXIgZm9yIHRoZSBgJ2Nsb3NlJ2AgZXZlbnRcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY2xvc2UoY2IpIHtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IENMT1NFRCkge1xuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIHRoaXMub25jZSgnY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgY2IobmV3IEVycm9yKCdUaGUgc2VydmVyIGlzIG5vdCBydW5uaW5nJykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2UsIHRoaXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjYikgdGhpcy5vbmNlKCdjbG9zZScsIGNiKTtcblxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gQ0xPU0lORykgcmV0dXJuO1xuICAgIHRoaXMuX3N0YXRlID0gQ0xPU0lORztcblxuICAgIGlmICh0aGlzLm9wdGlvbnMubm9TZXJ2ZXIgfHwgdGhpcy5vcHRpb25zLnNlcnZlcikge1xuICAgICAgaWYgKHRoaXMuX3NlcnZlcikge1xuICAgICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlTGlzdGVuZXJzID0gdGhpcy5fc2VydmVyID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuY2xpZW50cykge1xuICAgICAgICBpZiAoIXRoaXMuY2xpZW50cy5zaXplKSB7XG4gICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhlbWl0Q2xvc2UsIHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3Nob3VsZEVtaXRDbG9zZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2soZW1pdENsb3NlLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VydmVyID0gdGhpcy5fc2VydmVyO1xuXG4gICAgICB0aGlzLl9yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgIHRoaXMuX3JlbW92ZUxpc3RlbmVycyA9IHRoaXMuX3NlcnZlciA9IG51bGw7XG5cbiAgICAgIC8vXG4gICAgICAvLyBUaGUgSFRUUC9TIHNlcnZlciB3YXMgY3JlYXRlZCBpbnRlcm5hbGx5LiBDbG9zZSBpdCwgYW5kIHJlbHkgb24gaXRzXG4gICAgICAvLyBgJ2Nsb3NlJ2AgZXZlbnQuXG4gICAgICAvL1xuICAgICAgc2VydmVyLmNsb3NlKCgpID0+IHtcbiAgICAgICAgZW1pdENsb3NlKHRoaXMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNlZSBpZiBhIGdpdmVuIHJlcXVlc3Qgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhpcyBzZXJ2ZXIgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBSZXF1ZXN0IG9iamVjdCB0byBpbnNwZWN0XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcmVxdWVzdCBpcyB2YWxpZCwgZWxzZSBgZmFsc2VgXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNob3VsZEhhbmRsZShyZXEpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdGgpIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcmVxLnVybC5pbmRleE9mKCc/Jyk7XG4gICAgICBjb25zdCBwYXRobmFtZSA9IGluZGV4ICE9PSAtMSA/IHJlcS51cmwuc2xpY2UoMCwgaW5kZXgpIDogcmVxLnVybDtcblxuICAgICAgaWYgKHBhdGhuYW1lICE9PSB0aGlzLm9wdGlvbnMucGF0aCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBhIEhUVFAgVXBncmFkZSByZXF1ZXN0LlxuICAgKlxuICAgKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgVGhlIHJlcXVlc3Qgb2JqZWN0XG4gICAqIEBwYXJhbSB7RHVwbGV4fSBzb2NrZXQgVGhlIG5ldHdvcmsgc29ja2V0IGJldHdlZW4gdGhlIHNlcnZlciBhbmQgY2xpZW50XG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoZWFkIFRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHVwZ3JhZGVkIHN0cmVhbVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAcHVibGljXG4gICAqL1xuICBoYW5kbGVVcGdyYWRlKHJlcSwgc29ja2V0LCBoZWFkLCBjYikge1xuICAgIHNvY2tldC5vbignZXJyb3InLCBzb2NrZXRPbkVycm9yKTtcblxuICAgIGNvbnN0IGtleSA9IHJlcS5oZWFkZXJzWydzZWMtd2Vic29ja2V0LWtleSddO1xuICAgIGNvbnN0IHVwZ3JhZGUgPSByZXEuaGVhZGVycy51cGdyYWRlO1xuICAgIGNvbnN0IHZlcnNpb24gPSArcmVxLmhlYWRlcnNbJ3NlYy13ZWJzb2NrZXQtdmVyc2lvbiddO1xuXG4gICAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gJ0ludmFsaWQgSFRUUCBtZXRob2QnO1xuICAgICAgYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHRoaXMsIHJlcSwgc29ja2V0LCA0MDUsIG1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh1cGdyYWRlID09PSB1bmRlZmluZWQgfHwgdXBncmFkZS50b0xvd2VyQ2FzZSgpICE9PSAnd2Vic29ja2V0Jykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdJbnZhbGlkIFVwZ3JhZGUgaGVhZGVyJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQgfHwgIWtleVJlZ2V4LnRlc3Qoa2V5KSkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdNaXNzaW5nIG9yIGludmFsaWQgU2VjLVdlYlNvY2tldC1LZXkgaGVhZGVyJztcbiAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodmVyc2lvbiAhPT0gOCAmJiB2ZXJzaW9uICE9PSAxMykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICdNaXNzaW5nIG9yIGludmFsaWQgU2VjLVdlYlNvY2tldC1WZXJzaW9uIGhlYWRlcic7XG4gICAgICBhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IodGhpcywgcmVxLCBzb2NrZXQsIDQwMCwgbWVzc2FnZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNob3VsZEhhbmRsZShyZXEpKSB7XG4gICAgICBhYm9ydEhhbmRzaGFrZShzb2NrZXQsIDQwMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2VjV2ViU29ja2V0UHJvdG9jb2wgPSByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1wcm90b2NvbCddO1xuICAgIGxldCBwcm90b2NvbHMgPSBuZXcgU2V0KCk7XG5cbiAgICBpZiAoc2VjV2ViU29ja2V0UHJvdG9jb2wgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcHJvdG9jb2xzID0gc3VicHJvdG9jb2wucGFyc2Uoc2VjV2ViU29ja2V0UHJvdG9jb2wpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnSW52YWxpZCBTZWMtV2ViU29ja2V0LVByb3RvY29sIGhlYWRlcic7XG4gICAgICAgIGFib3J0SGFuZHNoYWtlT3JFbWl0d3NDbGllbnRFcnJvcih0aGlzLCByZXEsIHNvY2tldCwgNDAwLCBtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNlY1dlYlNvY2tldEV4dGVuc2lvbnMgPSByZXEuaGVhZGVyc1snc2VjLXdlYnNvY2tldC1leHRlbnNpb25zJ107XG4gICAgY29uc3QgZXh0ZW5zaW9ucyA9IHt9O1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5vcHRpb25zLnBlck1lc3NhZ2VEZWZsYXRlICYmXG4gICAgICBzZWNXZWJTb2NrZXRFeHRlbnNpb25zICE9PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIGNvbnN0IHBlck1lc3NhZ2VEZWZsYXRlID0gbmV3IFBlck1lc3NhZ2VEZWZsYXRlKFxuICAgICAgICB0aGlzLm9wdGlvbnMucGVyTWVzc2FnZURlZmxhdGUsXG4gICAgICAgIHRydWUsXG4gICAgICAgIHRoaXMub3B0aW9ucy5tYXhQYXlsb2FkXG4gICAgICApO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBvZmZlcnMgPSBleHRlbnNpb24ucGFyc2Uoc2VjV2ViU29ja2V0RXh0ZW5zaW9ucyk7XG5cbiAgICAgICAgaWYgKG9mZmVyc1tQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXSkge1xuICAgICAgICAgIHBlck1lc3NhZ2VEZWZsYXRlLmFjY2VwdChvZmZlcnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0pO1xuICAgICAgICAgIGV4dGVuc2lvbnNbUGVyTWVzc2FnZURlZmxhdGUuZXh0ZW5zaW9uTmFtZV0gPSBwZXJNZXNzYWdlRGVmbGF0ZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICdJbnZhbGlkIG9yIHVuYWNjZXB0YWJsZSBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnMgaGVhZGVyJztcbiAgICAgICAgYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHRoaXMsIHJlcSwgc29ja2V0LCA0MDAsIG1lc3NhZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBPcHRpb25hbGx5IGNhbGwgZXh0ZXJuYWwgY2xpZW50IHZlcmlmaWNhdGlvbiBoYW5kbGVyLlxuICAgIC8vXG4gICAgaWYgKHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQpIHtcbiAgICAgIGNvbnN0IGluZm8gPSB7XG4gICAgICAgIG9yaWdpbjpcbiAgICAgICAgICByZXEuaGVhZGVyc1tgJHt2ZXJzaW9uID09PSA4ID8gJ3NlYy13ZWJzb2NrZXQtb3JpZ2luJyA6ICdvcmlnaW4nfWBdLFxuICAgICAgICBzZWN1cmU6ICEhKHJlcS5zb2NrZXQuYXV0aG9yaXplZCB8fCByZXEuc29ja2V0LmVuY3J5cHRlZCksXG4gICAgICAgIHJlcVxuICAgICAgfTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy52ZXJpZnlDbGllbnQoaW5mbywgKHZlcmlmaWVkLCBjb2RlLCBtZXNzYWdlLCBoZWFkZXJzKSA9PiB7XG4gICAgICAgICAgaWYgKCF2ZXJpZmllZCkge1xuICAgICAgICAgICAgcmV0dXJuIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgY29kZSB8fCA0MDEsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuY29tcGxldGVVcGdyYWRlKFxuICAgICAgICAgICAgZXh0ZW5zaW9ucyxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHByb3RvY29scyxcbiAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgIHNvY2tldCxcbiAgICAgICAgICAgIGhlYWQsXG4gICAgICAgICAgICBjYlxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnZlcmlmeUNsaWVudChpbmZvKSkgcmV0dXJuIGFib3J0SGFuZHNoYWtlKHNvY2tldCwgNDAxKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbXBsZXRlVXBncmFkZShleHRlbnNpb25zLCBrZXksIHByb3RvY29scywgcmVxLCBzb2NrZXQsIGhlYWQsIGNiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGdyYWRlIHRoZSBjb25uZWN0aW9uIHRvIFdlYlNvY2tldC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuc2lvbnMgVGhlIGFjY2VwdGVkIGV4dGVuc2lvbnNcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgdmFsdWUgb2YgdGhlIGBTZWMtV2ViU29ja2V0LUtleWAgaGVhZGVyXG4gICAqIEBwYXJhbSB7U2V0fSBwcm90b2NvbHMgVGhlIHN1YnByb3RvY29sc1xuICAgKiBAcGFyYW0ge2h0dHAuSW5jb21pbmdNZXNzYWdlfSByZXEgVGhlIHJlcXVlc3Qgb2JqZWN0XG4gICAqIEBwYXJhbSB7RHVwbGV4fSBzb2NrZXQgVGhlIG5ldHdvcmsgc29ja2V0IGJldHdlZW4gdGhlIHNlcnZlciBhbmQgY2xpZW50XG4gICAqIEBwYXJhbSB7QnVmZmVyfSBoZWFkIFRoZSBmaXJzdCBwYWNrZXQgb2YgdGhlIHVwZ3JhZGVkIHN0cmVhbVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYiBDYWxsYmFja1xuICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgY2FsbGVkIG1vcmUgdGhhbiBvbmNlIHdpdGggdGhlIHNhbWUgc29ja2V0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb21wbGV0ZVVwZ3JhZGUoZXh0ZW5zaW9ucywga2V5LCBwcm90b2NvbHMsIHJlcSwgc29ja2V0LCBoZWFkLCBjYikge1xuICAgIC8vXG4gICAgLy8gRGVzdHJveSB0aGUgc29ja2V0IGlmIHRoZSBjbGllbnQgaGFzIGFscmVhZHkgc2VudCBhIEZJTiBwYWNrZXQuXG4gICAgLy9cbiAgICBpZiAoIXNvY2tldC5yZWFkYWJsZSB8fCAhc29ja2V0LndyaXRhYmxlKSByZXR1cm4gc29ja2V0LmRlc3Ryb3koKTtcblxuICAgIGlmIChzb2NrZXRba1dlYlNvY2tldF0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ3NlcnZlci5oYW5kbGVVcGdyYWRlKCkgd2FzIGNhbGxlZCBtb3JlIHRoYW4gb25jZSB3aXRoIHRoZSBzYW1lICcgK1xuICAgICAgICAgICdzb2NrZXQsIHBvc3NpYmx5IGR1ZSB0byBhIG1pc2NvbmZpZ3VyYXRpb24nXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdGF0ZSA+IFJVTk5JTkcpIHJldHVybiBhYm9ydEhhbmRzaGFrZShzb2NrZXQsIDUwMyk7XG5cbiAgICBjb25zdCBkaWdlc3QgPSBjcmVhdGVIYXNoKCdzaGExJylcbiAgICAgIC51cGRhdGUoa2V5ICsgR1VJRClcbiAgICAgIC5kaWdlc3QoJ2Jhc2U2NCcpO1xuXG4gICAgY29uc3QgaGVhZGVycyA9IFtcbiAgICAgICdIVFRQLzEuMSAxMDEgU3dpdGNoaW5nIFByb3RvY29scycsXG4gICAgICAnVXBncmFkZTogd2Vic29ja2V0JyxcbiAgICAgICdDb25uZWN0aW9uOiBVcGdyYWRlJyxcbiAgICAgIGBTZWMtV2ViU29ja2V0LUFjY2VwdDogJHtkaWdlc3R9YFxuICAgIF07XG5cbiAgICBjb25zdCB3cyA9IG5ldyB0aGlzLm9wdGlvbnMuV2ViU29ja2V0KG51bGwsIHVuZGVmaW5lZCwgdGhpcy5vcHRpb25zKTtcblxuICAgIGlmIChwcm90b2NvbHMuc2l6ZSkge1xuICAgICAgLy9cbiAgICAgIC8vIE9wdGlvbmFsbHkgY2FsbCBleHRlcm5hbCBwcm90b2NvbCBzZWxlY3Rpb24gaGFuZGxlci5cbiAgICAgIC8vXG4gICAgICBjb25zdCBwcm90b2NvbCA9IHRoaXMub3B0aW9ucy5oYW5kbGVQcm90b2NvbHNcbiAgICAgICAgPyB0aGlzLm9wdGlvbnMuaGFuZGxlUHJvdG9jb2xzKHByb3RvY29scywgcmVxKVxuICAgICAgICA6IHByb3RvY29scy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG5cbiAgICAgIGlmIChwcm90b2NvbCkge1xuICAgICAgICBoZWFkZXJzLnB1c2goYFNlYy1XZWJTb2NrZXQtUHJvdG9jb2w6ICR7cHJvdG9jb2x9YCk7XG4gICAgICAgIHdzLl9wcm90b2NvbCA9IHByb3RvY29sO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChleHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBleHRlbnNpb25zW1Blck1lc3NhZ2VEZWZsYXRlLmV4dGVuc2lvbk5hbWVdLnBhcmFtcztcbiAgICAgIGNvbnN0IHZhbHVlID0gZXh0ZW5zaW9uLmZvcm1hdCh7XG4gICAgICAgIFtQZXJNZXNzYWdlRGVmbGF0ZS5leHRlbnNpb25OYW1lXTogW3BhcmFtc11cbiAgICAgIH0pO1xuICAgICAgaGVhZGVycy5wdXNoKGBTZWMtV2ViU29ja2V0LUV4dGVuc2lvbnM6ICR7dmFsdWV9YCk7XG4gICAgICB3cy5fZXh0ZW5zaW9ucyA9IGV4dGVuc2lvbnM7XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBBbGxvdyBleHRlcm5hbCBtb2RpZmljYXRpb24vaW5zcGVjdGlvbiBvZiBoYW5kc2hha2UgaGVhZGVycy5cbiAgICAvL1xuICAgIHRoaXMuZW1pdCgnaGVhZGVycycsIGhlYWRlcnMsIHJlcSk7XG5cbiAgICBzb2NrZXQud3JpdGUoaGVhZGVycy5jb25jYXQoJ1xcclxcbicpLmpvaW4oJ1xcclxcbicpKTtcbiAgICBzb2NrZXQucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgc29ja2V0T25FcnJvcik7XG5cbiAgICB3cy5zZXRTb2NrZXQoc29ja2V0LCBoZWFkLCB7XG4gICAgICBhbGxvd1N5bmNocm9ub3VzRXZlbnRzOiB0aGlzLm9wdGlvbnMuYWxsb3dTeW5jaHJvbm91c0V2ZW50cyxcbiAgICAgIG1heFBheWxvYWQ6IHRoaXMub3B0aW9ucy5tYXhQYXlsb2FkLFxuICAgICAgc2tpcFVURjhWYWxpZGF0aW9uOiB0aGlzLm9wdGlvbnMuc2tpcFVURjhWYWxpZGF0aW9uXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5jbGllbnRzKSB7XG4gICAgICB0aGlzLmNsaWVudHMuYWRkKHdzKTtcbiAgICAgIHdzLm9uKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbGllbnRzLmRlbGV0ZSh3cyk7XG5cbiAgICAgICAgaWYgKHRoaXMuX3Nob3VsZEVtaXRDbG9zZSAmJiAhdGhpcy5jbGllbnRzLnNpemUpIHtcbiAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGVtaXRDbG9zZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNiKHdzLCByZXEpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0U2VydmVyO1xuXG4vKipcbiAqIEFkZCBldmVudCBsaXN0ZW5lcnMgb24gYW4gYEV2ZW50RW1pdHRlcmAgdXNpbmcgYSBtYXAgb2YgPGV2ZW50LCBsaXN0ZW5lcj5cbiAqIHBhaXJzLlxuICpcbiAqIEBwYXJhbSB7RXZlbnRFbWl0dGVyfSBzZXJ2ZXIgVGhlIGV2ZW50IGVtaXR0ZXJcbiAqIEBwYXJhbSB7T2JqZWN0LjxTdHJpbmcsIEZ1bmN0aW9uPn0gbWFwIFRoZSBsaXN0ZW5lcnMgdG8gYWRkXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVtb3ZlIHRoZSBhZGRlZCBsaXN0ZW5lcnMgd2hlblxuICogICAgIGNhbGxlZFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXJzKHNlcnZlciwgbWFwKSB7XG4gIGZvciAoY29uc3QgZXZlbnQgb2YgT2JqZWN0LmtleXMobWFwKSkgc2VydmVyLm9uKGV2ZW50LCBtYXBbZXZlbnRdKTtcblxuICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJzKCkge1xuICAgIGZvciAoY29uc3QgZXZlbnQgb2YgT2JqZWN0LmtleXMobWFwKSkge1xuICAgICAgc2VydmVyLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBtYXBbZXZlbnRdKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogRW1pdCBhIGAnY2xvc2UnYCBldmVudCBvbiBhbiBgRXZlbnRFbWl0dGVyYC5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gc2VydmVyIFRoZSBldmVudCBlbWl0dGVyXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbWl0Q2xvc2Uoc2VydmVyKSB7XG4gIHNlcnZlci5fc3RhdGUgPSBDTE9TRUQ7XG4gIHNlcnZlci5lbWl0KCdjbG9zZScpO1xufVxuXG4vKipcbiAqIEhhbmRsZSBzb2NrZXQgZXJyb3JzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNvY2tldE9uRXJyb3IoKSB7XG4gIHRoaXMuZGVzdHJveSgpO1xufVxuXG4vKipcbiAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHdoZW4gcHJlY29uZGl0aW9ucyBhcmUgbm90IGZ1bGZpbGxlZC5cbiAqXG4gKiBAcGFyYW0ge0R1cGxleH0gc29ja2V0IFRoZSBzb2NrZXQgb2YgdGhlIHVwZ3JhZGUgcmVxdWVzdFxuICogQHBhcmFtIHtOdW1iZXJ9IGNvZGUgVGhlIEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbbWVzc2FnZV0gVGhlIEhUVFAgcmVzcG9uc2UgYm9keVxuICogQHBhcmFtIHtPYmplY3R9IFtoZWFkZXJzXSBBZGRpdGlvbmFsIEhUVFAgcmVzcG9uc2UgaGVhZGVyc1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2Uoc29ja2V0LCBjb2RlLCBtZXNzYWdlLCBoZWFkZXJzKSB7XG4gIC8vXG4gIC8vIFRoZSBzb2NrZXQgaXMgd3JpdGFibGUgdW5sZXNzIHRoZSB1c2VyIGRlc3Ryb3llZCBvciBlbmRlZCBpdCBiZWZvcmUgY2FsbGluZ1xuICAvLyBgc2VydmVyLmhhbmRsZVVwZ3JhZGUoKWAgb3IgaW4gdGhlIGB2ZXJpZnlDbGllbnRgIGZ1bmN0aW9uLCB3aGljaCBpcyBhIHVzZXJcbiAgLy8gZXJyb3IuIEhhbmRsaW5nIHRoaXMgZG9lcyBub3QgbWFrZSBtdWNoIHNlbnNlIGFzIHRoZSB3b3JzdCB0aGF0IGNhbiBoYXBwZW5cbiAgLy8gaXMgdGhhdCBzb21lIG9mIHRoZSBkYXRhIHdyaXR0ZW4gYnkgdGhlIHVzZXIgbWlnaHQgYmUgZGlzY2FyZGVkIGR1ZSB0byB0aGVcbiAgLy8gY2FsbCB0byBgc29ja2V0LmVuZCgpYCBiZWxvdywgd2hpY2ggdHJpZ2dlcnMgYW4gYCdlcnJvcidgIGV2ZW50IHRoYXQgaW5cbiAgLy8gdHVybiBjYXVzZXMgdGhlIHNvY2tldCB0byBiZSBkZXN0cm95ZWQuXG4gIC8vXG4gIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IGh0dHAuU1RBVFVTX0NPREVTW2NvZGVdO1xuICBoZWFkZXJzID0ge1xuICAgIENvbm5lY3Rpb246ICdjbG9zZScsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2h0bWwnLFxuICAgICdDb250ZW50LUxlbmd0aCc6IEJ1ZmZlci5ieXRlTGVuZ3RoKG1lc3NhZ2UpLFxuICAgIC4uLmhlYWRlcnNcbiAgfTtcblxuICBzb2NrZXQub25jZSgnZmluaXNoJywgc29ja2V0LmRlc3Ryb3kpO1xuXG4gIHNvY2tldC5lbmQoXG4gICAgYEhUVFAvMS4xICR7Y29kZX0gJHtodHRwLlNUQVRVU19DT0RFU1tjb2RlXX1cXHJcXG5gICtcbiAgICAgIE9iamVjdC5rZXlzKGhlYWRlcnMpXG4gICAgICAgIC5tYXAoKGgpID0+IGAke2h9OiAke2hlYWRlcnNbaF19YClcbiAgICAgICAgLmpvaW4oJ1xcclxcbicpICtcbiAgICAgICdcXHJcXG5cXHJcXG4nICtcbiAgICAgIG1lc3NhZ2VcbiAgKTtcbn1cblxuLyoqXG4gKiBFbWl0IGEgYCd3c0NsaWVudEVycm9yJ2AgZXZlbnQgb24gYSBgV2ViU29ja2V0U2VydmVyYCBpZiB0aGVyZSBpcyBhdCBsZWFzdFxuICogb25lIGxpc3RlbmVyIGZvciBpdCwgb3RoZXJ3aXNlIGNhbGwgYGFib3J0SGFuZHNoYWtlKClgLlxuICpcbiAqIEBwYXJhbSB7V2ViU29ja2V0U2VydmVyfSBzZXJ2ZXIgVGhlIFdlYlNvY2tldCBzZXJ2ZXJcbiAqIEBwYXJhbSB7aHR0cC5JbmNvbWluZ01lc3NhZ2V9IHJlcSBUaGUgcmVxdWVzdCBvYmplY3RcbiAqIEBwYXJhbSB7RHVwbGV4fSBzb2NrZXQgVGhlIHNvY2tldCBvZiB0aGUgdXBncmFkZSByZXF1ZXN0XG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgSFRUUCByZXNwb25zZSBzdGF0dXMgY29kZVxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIEhUVFAgcmVzcG9uc2UgYm9keVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gYWJvcnRIYW5kc2hha2VPckVtaXR3c0NsaWVudEVycm9yKHNlcnZlciwgcmVxLCBzb2NrZXQsIGNvZGUsIG1lc3NhZ2UpIHtcbiAgaWYgKHNlcnZlci5saXN0ZW5lckNvdW50KCd3c0NsaWVudEVycm9yJykpIHtcbiAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoZXJyLCBhYm9ydEhhbmRzaGFrZU9yRW1pdHdzQ2xpZW50RXJyb3IpO1xuXG4gICAgc2VydmVyLmVtaXQoJ3dzQ2xpZW50RXJyb3InLCBlcnIsIHNvY2tldCwgcmVxKTtcbiAgfSBlbHNlIHtcbiAgICBhYm9ydEhhbmRzaGFrZShzb2NrZXQsIGNvZGUsIG1lc3NhZ2UpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBDb252ZXhDbGllbnQsXG4gIHNldERlZmF1bHRXZWJTb2NrZXRDb25zdHJ1Y3Rvcixcbn0gZnJvbSBcIi4vc2ltcGxlX2NsaWVudC5qc1wiO1xuXG4vLyBUaGlzIGZpbGUgaXMgY29tcGlsZWQgd2l0aCBgYnVuZGxlOiB0cnVlYCB3aXRoIGFuIGV4Y2VwdGlvbiBmb3Jcbi8vIGAuL3NpbXBsZV9jbGllbnQuanNgIHNvIHRoaXMgXCJ3c1wiIGltcG9ydCB3aWxsIGJlIGlubGluZWQuXG5pbXBvcnQgd3MgZnJvbSBcIndzXCI7XG5jb25zdCBub2RlV2ViU29ja2V0ID0gd3MgYXMgdW5rbm93biBhcyB0eXBlb2YgV2ViU29ja2V0O1xuXG5zZXREZWZhdWx0V2ViU29ja2V0Q29uc3RydWN0b3Iobm9kZVdlYlNvY2tldCk7XG5cbmV4cG9ydCB7IENvbnZleENsaWVudCB9O1xuIiwiaW1wb3J0IGNyZWF0ZVdlYlNvY2tldFN0cmVhbSBmcm9tICcuL2xpYi9zdHJlYW0uanMnO1xuaW1wb3J0IFJlY2VpdmVyIGZyb20gJy4vbGliL3JlY2VpdmVyLmpzJztcbmltcG9ydCBTZW5kZXIgZnJvbSAnLi9saWIvc2VuZGVyLmpzJztcbmltcG9ydCBXZWJTb2NrZXQgZnJvbSAnLi9saWIvd2Vic29ja2V0LmpzJztcbmltcG9ydCBXZWJTb2NrZXRTZXJ2ZXIgZnJvbSAnLi9saWIvd2Vic29ja2V0LXNlcnZlci5qcyc7XG5cbmV4cG9ydCB7IGNyZWF0ZVdlYlNvY2tldFN0cmVhbSwgUmVjZWl2ZXIsIFNlbmRlciwgV2ViU29ja2V0LCBXZWJTb2NrZXRTZXJ2ZXIgfTtcbmV4cG9ydCBkZWZhdWx0IFdlYlNvY2tldDtcbiJdLCJuYW1lcyI6WyJjcmVhdGVXZWJTb2NrZXRTdHJlYW0iLCJlcnIiLCJkaXIiLCJwbGF0Zm9ybSIsImFyY2giLCJydW50aW1lIiwiYWJpIiwicmVxdWlyZV9ub2RlX2d5cF9idWlsZCIsIm1hc2siLCJkYXRhIiwiUmVjZWl2ZXIiLCJTZW5kZXIiLCJXZWJTb2NrZXQiLCJrZXkiLCJwcm90b2NvbCIsIldlYlNvY2tldFNlcnZlciJdLCJpZ25vcmVMaXN0IjpbMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxOF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/simple_client-node.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/simple_client.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexClient: () => (/* binding */ ConvexClient),\n/* harmony export */   setDefaultWebSocketConstructor: () => (/* binding */ setDefaultWebSocketConstructor)\n/* harmony export */ });\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/index.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sync/paginated_query_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js\");\n/* harmony import */ var _sync_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sync/udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nlet defaultWebSocketConstructor;\nfunction setDefaultWebSocketConstructor(ws) {\n    defaultWebSocketConstructor = ws;\n}\nclass ConvexClient {\n    /**\n   * Construct a client and immediately initiate a WebSocket connection to the passed address.\n   *\n   * @public\n   */ constructor(address, options = {}){\n        __publicField(this, \"listeners\");\n        __publicField(this, \"_client\");\n        __publicField(this, \"_paginatedClient\");\n        // A synthetic server event to run callbacks the first time\n        __publicField(this, \"callNewListenersWithCurrentValuesTimer\");\n        __publicField(this, \"_closed\");\n        __publicField(this, \"_disabled\");\n        if (options.skipConvexDeploymentUrlCheck !== true) {\n            (0,_common_index_js__WEBPACK_IMPORTED_MODULE_0__.validateDeploymentUrl)(address);\n        }\n        const { disabled, ...baseOptions } = options;\n        this._closed = false;\n        this._disabled = !!disabled;\n        if (defaultWebSocketConstructor && !(\"webSocketConstructor\" in baseOptions) && typeof WebSocket === \"undefined\") {\n            baseOptions.webSocketConstructor = defaultWebSocketConstructor;\n        }\n        if ( true && !(\"unsavedChangesWarning\" in baseOptions)) {\n            baseOptions.unsavedChangesWarning = false;\n        }\n        if (!this.disabled) {\n            this._client = new _index_js__WEBPACK_IMPORTED_MODULE_1__.BaseConvexClient(address, ()=>{}, // NOP, let the paginated query client do it all\n            baseOptions);\n            this._paginatedClient = new _sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_3__.PaginatedQueryClient(this._client, (transition)=>this._transition(transition));\n        }\n        this.listeners = /* @__PURE__ */ new Set();\n    }\n    /**\n   * Once closed no registered callbacks will fire again.\n   */ get closed() {\n        return this._closed;\n    }\n    get client() {\n        if (this._client) return this._client;\n        throw new Error(\"ConvexClient is disabled\");\n    }\n    /**\n   * @internal\n   */ get paginatedClient() {\n        if (this._paginatedClient) return this._paginatedClient;\n        throw new Error(\"ConvexClient is disabled\");\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    /**\n   * Call a callback whenever a new result for a query is received. The callback\n   * will run soon after being registered if a result for the query is already\n   * in memory.\n   *\n   * The return value is an {@link Unsubscribe} object which is both a function\n   * an an object with properties. Both of the patterns below work with this object:\n   *\n   *```ts\n   * // call the return value as a function\n   * const unsubscribe = client.onUpdate(api.messages.list, {}, (messages) => {\n   *   console.log(messages);\n   * });\n   * unsubscribe();\n   *\n   * // unpack the return value into its properties\n   * const {\n   *   getCurrentValue,\n   *   unsubscribe,\n   * } = client.onUpdate(api.messages.list, {}, (messages) => {\n   *   console.log(messages);\n   * });\n   *```\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - The arguments to run the query with.\n   * @param callback - Function to call when the query result updates.\n   * @param onError - Function to call when the query result updates with an error.\n   * If not provided, errors will be thrown instead of calling the callback.\n   *\n   * @return an {@link Unsubscribe} function to stop calling the onUpdate function.\n   */ onUpdate(query, args, callback, onError) {\n        if (this.disabled) {\n            return this.createDisabledUnsubscribe();\n        }\n        const { queryToken, unsubscribe } = this.client.subscribe((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query), args);\n        const queryInfo = {\n            queryToken,\n            callback,\n            onError,\n            unsubscribe,\n            hasEverRun: false,\n            query,\n            args,\n            paginationOptions: void 0\n        };\n        this.listeners.add(queryInfo);\n        if (this.queryResultReady(queryToken) && this.callNewListenersWithCurrentValuesTimer === void 0) {\n            this.callNewListenersWithCurrentValuesTimer = setTimeout(()=>this.callNewListenersWithCurrentValues(), 0);\n        }\n        const unsubscribeProps = {\n            unsubscribe: ()=>{\n                if (this.closed) {\n                    return;\n                }\n                this.listeners.delete(queryInfo);\n                unsubscribe();\n            },\n            getCurrentValue: ()=>this.client.localQueryResultByToken(queryToken),\n            getQueryLogs: ()=>this.client.localQueryLogs(queryToken)\n        };\n        const ret = unsubscribeProps.unsubscribe;\n        Object.assign(ret, unsubscribeProps);\n        return ret;\n    }\n    /**\n   * Call a callback whenever a new result for a paginated query is received.\n   *\n   * This is an experimental preview: the final API may change.\n   * In particular, caching behavior, page splitting, and required paginated query options\n   * may change.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - The arguments to run the query with.\n   * @param options - Options for the paginated query including initialNumItems and id.\n   * @param callback - Function to call when the query result updates.\n   * @param onError - Function to call when the query result updates with an error.\n   *\n   * @return an {@link Unsubscribe} function to stop calling the callback.\n   */ onPaginatedUpdate_experimental(query, args, options, callback, onError) {\n        if (this.disabled) {\n            return this.createDisabledUnsubscribe();\n        }\n        const paginationOptions = {\n            initialNumItems: options.initialNumItems,\n            id: -1\n        };\n        const { paginatedQueryToken, unsubscribe } = this.paginatedClient.subscribe((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query), args, // Simple client doesn't use IDs, there's no expectation that these queries remain separate.\n        paginationOptions);\n        const queryInfo = {\n            queryToken: paginatedQueryToken,\n            callback,\n            onError,\n            unsubscribe,\n            hasEverRun: false,\n            query,\n            args,\n            paginationOptions\n        };\n        this.listeners.add(queryInfo);\n        if (!!this.paginatedClient.localQueryResultByToken(paginatedQueryToken) && this.callNewListenersWithCurrentValuesTimer === void 0) {\n            this.callNewListenersWithCurrentValuesTimer = setTimeout(()=>this.callNewListenersWithCurrentValues(), 0);\n        }\n        const unsubscribeProps = {\n            unsubscribe: ()=>{\n                if (this.closed) {\n                    return;\n                }\n                this.listeners.delete(queryInfo);\n                unsubscribe();\n            },\n            getCurrentValue: ()=>{\n                const result = this.paginatedClient.localQueryResult((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query), args, paginationOptions);\n                return result;\n            },\n            getQueryLogs: ()=>[]\n        };\n        const ret = unsubscribeProps.unsubscribe;\n        Object.assign(ret, unsubscribeProps);\n        return ret;\n    }\n    // Run all callbacks that have never been run before if they have a query\n    // result available now.\n    callNewListenersWithCurrentValues() {\n        this.callNewListenersWithCurrentValuesTimer = void 0;\n        this._transition({\n            queries: [],\n            paginatedQueries: []\n        }, true);\n    }\n    queryResultReady(queryToken) {\n        return this.client.hasLocalQueryResultByToken(queryToken);\n    }\n    createDisabledUnsubscribe() {\n        const disabledUnsubscribe = ()=>{};\n        const unsubscribeProps = {\n            unsubscribe: disabledUnsubscribe,\n            getCurrentValue: ()=>void 0,\n            getQueryLogs: ()=>void 0\n        };\n        Object.assign(disabledUnsubscribe, unsubscribeProps);\n        return disabledUnsubscribe;\n    }\n    async close() {\n        if (this.disabled) return;\n        this.listeners.clear();\n        this._closed = true;\n        if (this._paginatedClient) {\n            this._paginatedClient = void 0;\n        }\n        return this.client.close();\n    }\n    /**\n   * Get the current JWT auth token and decoded claims.\n   */ getAuth() {\n        if (this.disabled) return;\n        return this.client.getCurrentAuthClaims();\n    }\n    /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   * `fetchToken` will be called automatically again if a token expires.\n   * `fetchToken` should return `null` if the token cannot be retrieved, for example\n   * when the user's rights were permanently revoked.\n   * @param fetchToken - an async function returning the JWT (typically an OpenID Connect Identity Token)\n   * @param onChange - a callback that will be called when the authentication status changes\n   */ setAuth(fetchToken, onChange) {\n        if (this.disabled) return;\n        this.client.setAuth(fetchToken, onChange ?? (()=>{}));\n    }\n    /**\n   * @internal\n   */ setAdminAuth(token, identity) {\n        if (this.closed) {\n            throw new Error(\"ConvexClient has already been closed.\");\n        }\n        if (this.disabled) return;\n        this.client.setAdminAuth(token, identity);\n    }\n    /**\n   * @internal\n   */ _transition({ queries, paginatedQueries }, callNewListeners = false) {\n        const updatedQueries = [\n            ...queries.map((q)=>q.token),\n            ...paginatedQueries.map((q)=>q.token)\n        ];\n        for (const queryInfo of this.listeners){\n            const { callback, queryToken, onError, hasEverRun } = queryInfo;\n            const isPaginatedQuery = (0,_sync_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_4__.serializedQueryTokenIsPaginated)(queryToken);\n            const hasResultReady = isPaginatedQuery ? !!this.paginatedClient.localQueryResultByToken(queryToken) : this.client.hasLocalQueryResultByToken(queryToken);\n            if (updatedQueries.includes(queryToken) || callNewListeners && !hasEverRun && hasResultReady) {\n                queryInfo.hasEverRun = true;\n                let newValue;\n                try {\n                    if (isPaginatedQuery) {\n                        newValue = this.paginatedClient.localQueryResultByToken(queryToken);\n                    } else {\n                        newValue = this.client.localQueryResultByToken(queryToken);\n                    }\n                } catch (error) {\n                    if (!(error instanceof Error)) throw error;\n                    if (onError) {\n                        onError(error, \"Second argument to onUpdate onError is reserved for later use\");\n                    } else {\n                        void Promise.reject(error);\n                    }\n                    continue;\n                }\n                callback(newValue, \"Second argument to onUpdate callback is reserved for later use\");\n            }\n        }\n    }\n    /**\n   * Execute a mutation function.\n   *\n   * @param mutation - A {@link server.FunctionReference} for the public mutation\n   * to run.\n   * @param args - An arguments object for the mutation.\n   * @param options - A {@link MutationOptions} options object for the mutation.\n   * @returns A promise of the mutation's result.\n   */ async mutation(mutation, args, options) {\n        if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n        return await this.client.mutation((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(mutation), args, options);\n    }\n    /**\n   * Execute an action function.\n   *\n   * @param action - A {@link server.FunctionReference} for the public action\n   * to run.\n   * @param args - An arguments object for the action.\n   * @returns A promise of the action's result.\n   */ async action(action, args) {\n        if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n        return await this.client.action((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(action), args);\n    }\n    /**\n   * Fetch a query result once.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query\n   * to run.\n   * @param args - An arguments object for the query.\n   * @returns A promise of the query's result.\n   */ async query(query, args) {\n        if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n        const value = this.client.localQueryResult((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.getFunctionName)(query), args);\n        if (value !== void 0) return Promise.resolve(value);\n        return new Promise((resolve, reject)=>{\n            const { unsubscribe } = this.onUpdate(query, args, (value2)=>{\n                unsubscribe();\n                resolve(value2);\n            }, (e)=>{\n                unsubscribe();\n                reject(e);\n            });\n        });\n    }\n    /**\n   * Get the current {@link ConnectionState} between the client and the Convex\n   * backend.\n   *\n   * @returns The {@link ConnectionState} with the Convex backend.\n   */ connectionState() {\n        if (this.disabled) throw new Error(\"ConvexClient is disabled\");\n        return this.client.connectionState();\n    }\n    /**\n   * Subscribe to the {@link ConnectionState} between the client and the Convex\n   * backend, calling a callback each time it changes.\n   *\n   * Subscribed callbacks will be called when any part of ConnectionState changes.\n   * ConnectionState may grow in future versions (e.g. to provide a array of\n   * inflight requests) in which case callbacks would be called more frequently.\n   *\n   * @returns An unsubscribe function to stop listening.\n   */ subscribeToConnectionState(cb) {\n        if (this.disabled) return ()=>{};\n        return this.client.subscribeToConnectionState(cb);\n    }\n} //# sourceMappingURL=simple_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc2ltcGxlX2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNDO0FBUS9CO0FBT3lCO0FBTXpCO0FBRXlDO0FBS2hELElBQUk7QUFHRyxTQUFTLCtCQUErQixJQUFzQjtJQUNuRSw4QkFBOEI7QUFDaEM7QUFpRE8sTUFBTSxhQUFhO0lBQUE7Ozs7R0FBQSxHQW9DeEIsWUFBWSxTQUFpQixVQUErQixDQUFDLEVBQUc7UUFuQ2hFLG9CQUFRO1FBQ1Isb0JBQVE7UUFDUixvQkFBUTtRQUVSO1FBQUEsb0JBQVE7UUFHUixvQkFBUTtRQUNSLG9CQUFRO1FBNEJOLElBQUksUUFBUSxpQ0FBaUMsTUFBTTtZQUNqRCx1RUFBcUIsQ0FBQyxPQUFPO1FBQy9CO1FBQ0EsTUFBTSxFQUFFLFVBQVUsR0FBRyxZQUFZLElBQUk7UUFDckMsS0FBSyxVQUFVO1FBQ2YsS0FBSyxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUNFLCtCQUNBLEVBQUUsMEJBQTBCLGdCQUM1QixPQUFPLGNBQWMsYUFDckI7WUFDQSxZQUFZLHVCQUF1QjtRQUNyQztRQUNBLElBQ0UsS0FBNkIsSUFDN0IsRUFBRSwyQkFBMkIsY0FDN0I7WUFDQSxZQUFZLHdCQUF3QjtRQUN0QztRQUNBLElBQUksQ0FBQyxLQUFLLFVBQVU7WUFDbEIsS0FBSyxVQUFVLElBQUksdURBQWdCLENBQ2pDLFNBQ0EsS0FBTyxDQUFELEVBQUM7WUFDUDtZQUVGLEtBQUssbUJBQW1CLElBQUksaUZBQW9CLENBQzlDLEtBQUssU0FDTCxDQUFDLGFBQWUsS0FBSyxZQUFZLFVBQVU7UUFFL0M7UUFDQSxLQUFLLFlBQVksb0JBQUksSUFBSTtJQUMzQjtJQUFBOztHQUFBLEdBdkRBLElBQUksU0FBa0I7UUFDcEIsT0FBTyxLQUFLO0lBQ2Q7SUFDQSxJQUFJLFNBQTJCO1FBQzdCLElBQUksS0FBSyxRQUFTLFFBQU8sS0FBSztRQUM5QixN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LE1BQ0EsQ0FBQ0E7Z0JBQ0MsWUFBWTtnQkFDWixRQUFRQSxNQUFLO1lBQ2YsR0FDQSxDQUFDO2dCQUNDLFlBQVk7Z0JBQ1osT0FBTyxDQUFDO1lBQ1Y7UUFFSixDQUFDO0lBQ0g7SUFBQTs7Ozs7R0FBQSxHQVFBLGtCQUFtQztRQUNqQyxJQUFJLEtBQUssU0FBVSxPQUFNLElBQUksTUFBTSwwQkFBMEI7UUFDN0QsT0FBTyxLQUFLLE9BQU8sZ0JBQWdCO0lBQ3JDO0lBQUE7Ozs7Ozs7OztHQUFBLEdBWUEsMkJBQ0UsSUFDWTtRQUNaLElBQUksS0FBSyxTQUFVLFFBQU8sS0FBTyxDQUFEO1FBQ2hDLE9BQU8sS0FBSyxPQUFPLDJCQUEyQixFQUFFO0lBQ2xEO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvYnJvd3Nlci9zaW1wbGVfY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZhbGlkYXRlRGVwbG95bWVudFVybCB9IGZyb20gXCIuLi9jb21tb24vaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIEJhc2VDb252ZXhDbGllbnQsXG4gIEJhc2VDb252ZXhDbGllbnRPcHRpb25zLFxuICBNdXRhdGlvbk9wdGlvbnMsXG4gIFBhZ2luYXRlZFF1ZXJ5VG9rZW4sXG4gIFF1ZXJ5VG9rZW4sXG4gIFVzZXJJZGVudGl0eUF0dHJpYnV0ZXMsXG59IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBGdW5jdGlvbkFyZ3MsXG4gIEZ1bmN0aW9uUmVmZXJlbmNlLFxuICBGdW5jdGlvblJldHVyblR5cGUsXG4gIFBhZ2luYXRpb25SZXN1bHQsXG59IGZyb20gXCIuLi9zZXJ2ZXIvaW5kZXguanNcIjtcbmltcG9ydCB7IGdldEZ1bmN0aW9uTmFtZSB9IGZyb20gXCIuLi9zZXJ2ZXIvYXBpLmpzXCI7XG5pbXBvcnQgeyBBdXRoVG9rZW5GZXRjaGVyIH0gZnJvbSBcIi4vc3luYy9hdXRoZW50aWNhdGlvbl9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uU3RhdGUgfSBmcm9tIFwiLi9zeW5jL2NsaWVudC5qc1wiO1xuaW1wb3J0IHtcbiAgRXh0ZW5kZWRUcmFuc2l0aW9uLFxuICBQYWdpbmF0ZWRRdWVyeUNsaWVudCxcbn0gZnJvbSBcIi4vc3luYy9wYWdpbmF0ZWRfcXVlcnlfY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBQYWdpbmF0ZWRRdWVyeVJlc3VsdCB9IGZyb20gXCIuL3N5bmMvcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgc2VyaWFsaXplZFF1ZXJ5VG9rZW5Jc1BhZ2luYXRlZCB9IGZyb20gXCIuL3N5bmMvdWRmX3BhdGhfdXRpbHMuanNcIjtcblxuLy8gSW4gTm9kZS5qcyBidWlsZHMgdGhpcyBwb2ludHMgdG8gYSBidW5kbGVkIFdlYlNvY2tldCBpbXBsZW1lbnRhdGlvbi4gSWYgbm9cbi8vIFdlYlNvY2tldCBpbXBsZW1lbnRhdGlvbiBpcyBtYW51YWxseSBzcGVjaWZpZWQgb3IgZ2xvYmFsbHkgYXZhaWxhYmxlLFxuLy8gdGhpcyBvbmUgaXMgdXNlZC5cbmxldCBkZWZhdWx0V2ViU29ja2V0Q29uc3RydWN0b3I6IHR5cGVvZiBXZWJTb2NrZXQgfCB1bmRlZmluZWQ7XG5cbi8qKiBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRXZWJTb2NrZXRDb25zdHJ1Y3Rvcih3czogdHlwZW9mIFdlYlNvY2tldCkge1xuICBkZWZhdWx0V2ViU29ja2V0Q29uc3RydWN0b3IgPSB3cztcbn1cblxuZXhwb3J0IHR5cGUgQ29udmV4Q2xpZW50T3B0aW9ucyA9IEJhc2VDb252ZXhDbGllbnRPcHRpb25zICYge1xuICAvKipcbiAgICogYGRpc2FibGVkYCBtYWtlcyBvblVwZGF0ZSBjYWxsYmFjayByZWdpc3RyYXRpb24gYSBuby1vcCBhbmQgYWN0aW9ucyxcbiAgICogbXV0YXRpb25zIGFuZCBvbmUtc2hvdCBxdWVyaWVzIHRocm93LiBTZXR0aW5nIGRpc2FibGVkIHRvIHRydWUgbWF5IGJlXG4gICAqIHVzZWZ1bCBmb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nLCB3aGVyZSBzdWJzY3JpcHRpb25zIGRvbid0IG1ha2Ugc2Vuc2UuXG4gICAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByb21wdCB1c2VycyBpbiBicm93c2VycyBhYm91dCBxdWV1ZWQgb3IgaW4tZmxpZ2h0IG11dGF0aW9ucy5cbiAgICogVGhpcyBvbmx5IHdvcmtzIGluIGVudmlyb25tZW50cyB3aGVyZSBgd2luZG93Lm9uYmVmb3JldW5sb2FkYCBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIHRydWUgd2hlbiBgd2luZG93YCBpcyBkZWZpbmVkLCBvdGhlcndpc2UgZmFsc2UuXG4gICAqL1xuICB1bnNhdmVkQ2hhbmdlc1dhcm5pbmc/OiBib29sZWFuO1xufTtcblxuLyoqXG4gKiBTdG9wcyBjYWxsYmFja3MgZnJvbSBydW5uaW5nLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgVW5zdWJzY3JpYmU8VD4gPSB7XG4gIC8qKiBTdG9wIGNhbGxpbmcgY2FsbGJhY2sgd2hlbiBxdWVyeSByZXN1bHRzIGNoYW5nZXMuIElmIHRoaXMgaXMgdGhlIGxhc3QgbGlzdGVuZXIgb24gdGhpcyBxdWVyeSwgc3RvcCByZWNlaXZlZCB1cGRhdGVzLiAqL1xuICAoKTogdm9pZDtcbiAgLyoqIFN0b3AgY2FsbGluZyBjYWxsYmFjayB3aGVuIHF1ZXJ5IHJlc3VsdHMgY2hhbmdlcy4gSWYgdGhpcyBpcyB0aGUgbGFzdCBsaXN0ZW5lciBvbiB0aGlzIHF1ZXJ5LCBzdG9wIHJlY2VpdmVkIHVwZGF0ZXMuICovXG4gIHVuc3Vic2NyaWJlKCk6IHZvaWQ7XG4gIC8qKiBHZXQgdGhlIGxhc3Qga25vd24gdmFsdWUsIHBvc3NpYmx5IHdpdGggbG9jYWwgb3B0aW1pc3RpYyB1cGRhdGVzIGFwcGxpZWQuICovXG4gIGdldEN1cnJlbnRWYWx1ZSgpOiBUIHwgdW5kZWZpbmVkO1xuICAvKiogQGludGVybmFsICovXG4gIGdldFF1ZXJ5TG9ncygpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogU3Vic2NyaWJlcyB0byBDb252ZXggcXVlcnkgZnVuY3Rpb25zIGFuZCBleGVjdXRlcyBtdXRhdGlvbnMgYW5kIGFjdGlvbnMgb3ZlciBhIFdlYlNvY2tldC5cbiAqXG4gKiBPcHRpbWlzdGljIHVwZGF0ZXMgZm9yIG11dGF0aW9ucyBhcmUgbm90IHByb3ZpZGVkIGZvciB0aGlzIGNsaWVudC5cbiAqIFRoaXJkIHBhcnR5IGNsaWVudHMgbWF5IGNob29zZSB0byB3cmFwIHtAbGluayBicm93c2VyLkJhc2VDb252ZXhDbGllbnR9IGZvciBhZGRpdGlvbmFsIGNvbnRyb2wuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGNsaWVudCA9IG5ldyBDb252ZXhDbGllbnQoXCJodHRwczovL2hhcHB5LW90dGVyLTEyMy5jb252ZXguY2xvdWRcIik7XG4gKiBjb25zdCB1bnN1YnNjcmliZSA9IGNsaWVudC5vblVwZGF0ZShhcGkubWVzc2FnZXMubGlzdCwge30sIChtZXNzYWdlcykgPT4ge1xuICogICBjb25zb2xlLmxvZyhtZXNzYWdlc1swXS5ib2R5KTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ29udmV4Q2xpZW50IHtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IFNldDxRdWVyeUluZm8+O1xuICBwcml2YXRlIF9jbGllbnQ6IEJhc2VDb252ZXhDbGllbnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3BhZ2luYXRlZENsaWVudDogUGFnaW5hdGVkUXVlcnlDbGllbnQgfCB1bmRlZmluZWQ7XG4gIC8vIEEgc3ludGhldGljIHNlcnZlciBldmVudCB0byBydW4gY2FsbGJhY2tzIHRoZSBmaXJzdCB0aW1lXG4gIHByaXZhdGUgY2FsbE5ld0xpc3RlbmVyc1dpdGhDdXJyZW50VmFsdWVzVGltZXI6XG4gICAgfCBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PlxuICAgIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9jbG9zZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgX2Rpc2FibGVkOiBib29sZWFuO1xuICAvKipcbiAgICogT25jZSBjbG9zZWQgbm8gcmVnaXN0ZXJlZCBjYWxsYmFja3Mgd2lsbCBmaXJlIGFnYWluLlxuICAgKi9cbiAgZ2V0IGNsb3NlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fY2xvc2VkO1xuICB9XG4gIGdldCBjbGllbnQoKTogQmFzZUNvbnZleENsaWVudCB7XG4gICAgaWYgKHRoaXMuX2NsaWVudCkgcmV0dXJuIHRoaXMuX2NsaWVudDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXhDbGllbnQgaXMgZGlzYWJsZWRcIik7XG4gIH1cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0IHBhZ2luYXRlZENsaWVudCgpOiBQYWdpbmF0ZWRRdWVyeUNsaWVudCB7XG4gICAgaWYgKHRoaXMuX3BhZ2luYXRlZENsaWVudCkgcmV0dXJuIHRoaXMuX3BhZ2luYXRlZENsaWVudDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXhDbGllbnQgaXMgZGlzYWJsZWRcIik7XG4gIH1cbiAgZ2V0IGRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYSBjbGllbnQgYW5kIGltbWVkaWF0ZWx5IGluaXRpYXRlIGEgV2ViU29ja2V0IGNvbm5lY3Rpb24gdG8gdGhlIHBhc3NlZCBhZGRyZXNzLlxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhZGRyZXNzOiBzdHJpbmcsIG9wdGlvbnM6IENvbnZleENsaWVudE9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLnNraXBDb252ZXhEZXBsb3ltZW50VXJsQ2hlY2sgIT09IHRydWUpIHtcbiAgICAgIHZhbGlkYXRlRGVwbG95bWVudFVybChhZGRyZXNzKTtcbiAgICB9XG4gICAgY29uc3QgeyBkaXNhYmxlZCwgLi4uYmFzZU9wdGlvbnMgfSA9IG9wdGlvbnM7XG4gICAgdGhpcy5fY2xvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fZGlzYWJsZWQgPSAhIWRpc2FibGVkO1xuICAgIGlmIChcbiAgICAgIGRlZmF1bHRXZWJTb2NrZXRDb25zdHJ1Y3RvciAmJlxuICAgICAgIShcIndlYlNvY2tldENvbnN0cnVjdG9yXCIgaW4gYmFzZU9wdGlvbnMpICYmXG4gICAgICB0eXBlb2YgV2ViU29ja2V0ID09PSBcInVuZGVmaW5lZFwiXG4gICAgKSB7XG4gICAgICBiYXNlT3B0aW9ucy53ZWJTb2NrZXRDb25zdHJ1Y3RvciA9IGRlZmF1bHRXZWJTb2NrZXRDb25zdHJ1Y3RvcjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgIShcInVuc2F2ZWRDaGFuZ2VzV2FybmluZ1wiIGluIGJhc2VPcHRpb25zKVxuICAgICkge1xuICAgICAgYmFzZU9wdGlvbnMudW5zYXZlZENoYW5nZXNXYXJuaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5fY2xpZW50ID0gbmV3IEJhc2VDb252ZXhDbGllbnQoXG4gICAgICAgIGFkZHJlc3MsXG4gICAgICAgICgpID0+IHt9LCAvLyBOT1AsIGxldCB0aGUgcGFnaW5hdGVkIHF1ZXJ5IGNsaWVudCBkbyBpdCBhbGxcbiAgICAgICAgYmFzZU9wdGlvbnMsXG4gICAgICApO1xuICAgICAgdGhpcy5fcGFnaW5hdGVkQ2xpZW50ID0gbmV3IFBhZ2luYXRlZFF1ZXJ5Q2xpZW50KFxuICAgICAgICB0aGlzLl9jbGllbnQsXG4gICAgICAgICh0cmFuc2l0aW9uKSA9PiB0aGlzLl90cmFuc2l0aW9uKHRyYW5zaXRpb24pLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbCBhIGNhbGxiYWNrIHdoZW5ldmVyIGEgbmV3IHJlc3VsdCBmb3IgYSBxdWVyeSBpcyByZWNlaXZlZC4gVGhlIGNhbGxiYWNrXG4gICAqIHdpbGwgcnVuIHNvb24gYWZ0ZXIgYmVpbmcgcmVnaXN0ZXJlZCBpZiBhIHJlc3VsdCBmb3IgdGhlIHF1ZXJ5IGlzIGFscmVhZHlcbiAgICogaW4gbWVtb3J5LlxuICAgKlxuICAgKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIHtAbGluayBVbnN1YnNjcmliZX0gb2JqZWN0IHdoaWNoIGlzIGJvdGggYSBmdW5jdGlvblxuICAgKiBhbiBhbiBvYmplY3Qgd2l0aCBwcm9wZXJ0aWVzLiBCb3RoIG9mIHRoZSBwYXR0ZXJucyBiZWxvdyB3b3JrIHdpdGggdGhpcyBvYmplY3Q6XG4gICAqXG4gICAqYGBgdHNcbiAgICogLy8gY2FsbCB0aGUgcmV0dXJuIHZhbHVlIGFzIGEgZnVuY3Rpb25cbiAgICogY29uc3QgdW5zdWJzY3JpYmUgPSBjbGllbnQub25VcGRhdGUoYXBpLm1lc3NhZ2VzLmxpc3QsIHt9LCAobWVzc2FnZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhtZXNzYWdlcyk7XG4gICAqIH0pO1xuICAgKiB1bnN1YnNjcmliZSgpO1xuICAgKlxuICAgKiAvLyB1bnBhY2sgdGhlIHJldHVybiB2YWx1ZSBpbnRvIGl0cyBwcm9wZXJ0aWVzXG4gICAqIGNvbnN0IHtcbiAgICogICBnZXRDdXJyZW50VmFsdWUsXG4gICAqICAgdW5zdWJzY3JpYmUsXG4gICAqIH0gPSBjbGllbnQub25VcGRhdGUoYXBpLm1lc3NhZ2VzLmxpc3QsIHt9LCAobWVzc2FnZXMpID0+IHtcbiAgICogICBjb25zb2xlLmxvZyhtZXNzYWdlcyk7XG4gICAqIH0pO1xuICAgKmBgYFxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgLSBBIHtAbGluayBzZXJ2ZXIuRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgcHVibGljIHF1ZXJ5IHRvIHJ1bi5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHRvIHJ1biB0aGUgcXVlcnkgd2l0aC5cbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBxdWVyeSByZXN1bHQgdXBkYXRlcy5cbiAgICogQHBhcmFtIG9uRXJyb3IgLSBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIHF1ZXJ5IHJlc3VsdCB1cGRhdGVzIHdpdGggYW4gZXJyb3IuXG4gICAqIElmIG5vdCBwcm92aWRlZCwgZXJyb3JzIHdpbGwgYmUgdGhyb3duIGluc3RlYWQgb2YgY2FsbGluZyB0aGUgY2FsbGJhY2suXG4gICAqXG4gICAqIEByZXR1cm4gYW4ge0BsaW5rIFVuc3Vic2NyaWJlfSBmdW5jdGlvbiB0byBzdG9wIGNhbGxpbmcgdGhlIG9uVXBkYXRlIGZ1bmN0aW9uLlxuICAgKi9cbiAgb25VcGRhdGU8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgYXJnczogRnVuY3Rpb25BcmdzPFF1ZXJ5PixcbiAgICBjYWxsYmFjazogKHJlc3VsdDogRnVuY3Rpb25SZXR1cm5UeXBlPFF1ZXJ5PikgPT4gdW5rbm93bixcbiAgICBvbkVycm9yPzogKGU6IEVycm9yKSA9PiB1bmtub3duLFxuICApOiBVbnN1YnNjcmliZTxRdWVyeVtcIl9yZXR1cm5UeXBlXCJdPiB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURpc2FibGVkVW5zdWJzY3JpYmU8UXVlcnlbXCJfcmV0dXJuVHlwZVwiXT4oKTtcbiAgICB9XG5cbiAgICAvLyBCYXNlQ29udmV4Q2xpZW50IHRha2VzIGNhcmUgb2YgZGVkdXBsaWNhdGluZyBxdWVyaWVzIHN1YnNjcmlwdGlvbnMuLi5cbiAgICBjb25zdCB7IHF1ZXJ5VG9rZW4sIHVuc3Vic2NyaWJlIH0gPSB0aGlzLmNsaWVudC5zdWJzY3JpYmUoXG4gICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpLFxuICAgICAgYXJncyxcbiAgICApO1xuXG4gICAgLy8gLi4uYnV0IHdlIHN0aWxsIG5lZWQgdG8gYm9va2tlZXAgY2FsbGJhY2tzIHRvIGFjdHVhbGx5IGNhbGwgdGhlbS5cbiAgICBjb25zdCBxdWVyeUluZm86IFF1ZXJ5SW5mbyA9IHtcbiAgICAgIHF1ZXJ5VG9rZW4sXG4gICAgICBjYWxsYmFjayxcbiAgICAgIG9uRXJyb3IsXG4gICAgICB1bnN1YnNjcmliZSxcbiAgICAgIGhhc0V2ZXJSdW46IGZhbHNlLFxuICAgICAgcXVlcnksXG4gICAgICBhcmdzLFxuICAgICAgcGFnaW5hdGlvbk9wdGlvbnM6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgIHRoaXMubGlzdGVuZXJzLmFkZChxdWVyeUluZm8pO1xuXG4gICAgLy8gSWYgdGhlIGNhbGxiYWNrIGlzIHJlZ2lzdGVyZWQgZm9yIGEgcXVlcnkgd2l0aCBhIHJlc3VsdCBpbW1lZGlhdGVseSBhdmFpbGFibGVcbiAgICAvLyBzY2hlZHVsZSBhIGZha2UgdHJhbnNpdGlvbiB0byBjYWxsIHRoZSBjYWxsYmFjayBzb29uIGluc3RlYWQgb2Ygd2FpdGluZyBmb3JcbiAgICAvLyBhIG5ldyBzZXJ2ZXIgdXBkYXRlICh3aGljaCBjb3VsZCB0YWtlIHNlY29uZHMgb3IgZGF5cykuXG4gICAgaWYgKFxuICAgICAgdGhpcy5xdWVyeVJlc3VsdFJlYWR5KHF1ZXJ5VG9rZW4pICYmXG4gICAgICB0aGlzLmNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlc1RpbWVyID09PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIHRoaXMuY2FsbE5ld0xpc3RlbmVyc1dpdGhDdXJyZW50VmFsdWVzVGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB0aGlzLmNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlcygpLFxuICAgICAgICAwLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB1bnN1YnNjcmliZVByb3BzOiBSZW1vdmVDYWxsU2lnbmF0dXJlPFxuICAgICAgVW5zdWJzY3JpYmU8UXVlcnlbXCJfcmV0dXJuVHlwZVwiXT5cbiAgICA+ID0ge1xuICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgLy8gYWxsIHVuc3Vic2NyaWJlcyBhbHJlYWR5IHJhblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocXVlcnlJbmZvKTtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIH0sXG4gICAgICBnZXRDdXJyZW50VmFsdWU6ICgpID0+IHRoaXMuY2xpZW50LmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHF1ZXJ5VG9rZW4pLFxuICAgICAgZ2V0UXVlcnlMb2dzOiAoKSA9PiB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5TG9ncyhxdWVyeVRva2VuKSxcbiAgICB9O1xuICAgIGNvbnN0IHJldCA9IHVuc3Vic2NyaWJlUHJvcHMudW5zdWJzY3JpYmUgYXMgVW5zdWJzY3JpYmU8XG4gICAgICBRdWVyeVtcIl9yZXR1cm5UeXBlXCJdXG4gICAgPjtcbiAgICBPYmplY3QuYXNzaWduKHJldCwgdW5zdWJzY3JpYmVQcm9wcyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGEgY2FsbGJhY2sgd2hlbmV2ZXIgYSBuZXcgcmVzdWx0IGZvciBhIHBhZ2luYXRlZCBxdWVyeSBpcyByZWNlaXZlZC5cbiAgICpcbiAgICogVGhpcyBpcyBhbiBleHBlcmltZW50YWwgcHJldmlldzogdGhlIGZpbmFsIEFQSSBtYXkgY2hhbmdlLlxuICAgKiBJbiBwYXJ0aWN1bGFyLCBjYWNoaW5nIGJlaGF2aW9yLCBwYWdlIHNwbGl0dGluZywgYW5kIHJlcXVpcmVkIHBhZ2luYXRlZCBxdWVyeSBvcHRpb25zXG4gICAqIG1heSBjaGFuZ2UuXG4gICAqXG4gICAqIEBwYXJhbSBxdWVyeSAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgcXVlcnkgdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgdG8gcnVuIHRoZSBxdWVyeSB3aXRoLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBwYWdpbmF0ZWQgcXVlcnkgaW5jbHVkaW5nIGluaXRpYWxOdW1JdGVtcyBhbmQgaWQuXG4gICAqIEBwYXJhbSBjYWxsYmFjayAtIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgcXVlcnkgcmVzdWx0IHVwZGF0ZXMuXG4gICAqIEBwYXJhbSBvbkVycm9yIC0gRnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBxdWVyeSByZXN1bHQgdXBkYXRlcyB3aXRoIGFuIGVycm9yLlxuICAgKlxuICAgKiBAcmV0dXJuIGFuIHtAbGluayBVbnN1YnNjcmliZX0gZnVuY3Rpb24gdG8gc3RvcCBjYWxsaW5nIHRoZSBjYWxsYmFjay5cbiAgICovXG4gIG9uUGFnaW5hdGVkVXBkYXRlX2V4cGVyaW1lbnRhbDxRdWVyeSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj4+KFxuICAgIHF1ZXJ5OiBRdWVyeSxcbiAgICBhcmdzOiBGdW5jdGlvbkFyZ3M8UXVlcnk+LFxuICAgIG9wdGlvbnM6IHsgaW5pdGlhbE51bUl0ZW1zOiBudW1iZXIgfSxcbiAgICBjYWxsYmFjazogKHJlc3VsdDogUGFnaW5hdGlvblJlc3VsdDxGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+PikgPT4gdW5rbm93bixcbiAgICBvbkVycm9yPzogKGU6IEVycm9yKSA9PiB1bmtub3duLFxuICApOiBVbnN1YnNjcmliZTxQYWdpbmF0ZWRRdWVyeVJlc3VsdDxGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+W10+PiB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURpc2FibGVkVW5zdWJzY3JpYmU8XG4gICAgICAgIFBhZ2luYXRlZFF1ZXJ5UmVzdWx0PEZ1bmN0aW9uUmV0dXJuVHlwZTxRdWVyeT4+XG4gICAgICA+KCk7XG4gICAgfVxuXG4gICAgY29uc3QgcGFnaW5hdGlvbk9wdGlvbnMgPSB7XG4gICAgICBpbml0aWFsTnVtSXRlbXM6IG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgICAgaWQ6IC0xLFxuICAgIH07XG5cbiAgICBjb25zdCB7IHBhZ2luYXRlZFF1ZXJ5VG9rZW4sIHVuc3Vic2NyaWJlIH0gPSB0aGlzLnBhZ2luYXRlZENsaWVudC5zdWJzY3JpYmUoXG4gICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpLFxuICAgICAgYXJncyxcbiAgICAgIC8vIFNpbXBsZSBjbGllbnQgZG9lc24ndCB1c2UgSURzLCB0aGVyZSdzIG5vIGV4cGVjdGF0aW9uIHRoYXQgdGhlc2UgcXVlcmllcyByZW1haW4gc2VwYXJhdGUuXG4gICAgICBwYWdpbmF0aW9uT3B0aW9ucyxcbiAgICApO1xuXG4gICAgY29uc3QgcXVlcnlJbmZvOiBRdWVyeUluZm8gPSB7XG4gICAgICBxdWVyeVRva2VuOiBwYWdpbmF0ZWRRdWVyeVRva2VuLFxuICAgICAgY2FsbGJhY2ssXG4gICAgICBvbkVycm9yLFxuICAgICAgdW5zdWJzY3JpYmUsXG4gICAgICBoYXNFdmVyUnVuOiBmYWxzZSxcbiAgICAgIHF1ZXJ5LFxuICAgICAgYXJncyxcbiAgICAgIHBhZ2luYXRpb25PcHRpb25zLFxuICAgIH07XG4gICAgdGhpcy5saXN0ZW5lcnMuYWRkKHF1ZXJ5SW5mbyk7XG5cbiAgICAvLyBJZiB0aGUgY2FsbGJhY2sgaXMgcmVnaXN0ZXJlZCBmb3IgYSBxdWVyeSB3aXRoIGEgcmVzdWx0IGltbWVkaWF0ZWx5IGF2YWlsYWJsZVxuICAgIC8vIHNjaGVkdWxlIGEgZmFrZSB0cmFuc2l0aW9uIHRvIGNhbGwgdGhlIGNhbGxiYWNrIHNvb24gaW5zdGVhZCBvZiB3YWl0aW5nIGZvclxuICAgIC8vIGEgbmV3IHNlcnZlciB1cGRhdGUgKHdoaWNoIGNvdWxkIHRha2Ugc2Vjb25kcyBvciBkYXlzKS5cbiAgICBpZiAoXG4gICAgICAhIXRoaXMucGFnaW5hdGVkQ2xpZW50LmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHBhZ2luYXRlZFF1ZXJ5VG9rZW4pICYmXG4gICAgICB0aGlzLmNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlc1RpbWVyID09PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIHRoaXMuY2FsbE5ld0xpc3RlbmVyc1dpdGhDdXJyZW50VmFsdWVzVGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgICAoKSA9PiB0aGlzLmNhbGxOZXdMaXN0ZW5lcnNXaXRoQ3VycmVudFZhbHVlcygpLFxuICAgICAgICAwLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB1bnN1YnNjcmliZVByb3BzOiBSZW1vdmVDYWxsU2lnbmF0dXJlPFxuICAgICAgVW5zdWJzY3JpYmU8UGFnaW5hdGVkUXVlcnlSZXN1bHQ8RnVuY3Rpb25SZXR1cm5UeXBlPFF1ZXJ5PltdPj5cbiAgICA+ID0ge1xuICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgLy8gYWxsIHVuc3Vic2NyaWJlcyBhbHJlYWR5IHJhblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocXVlcnlJbmZvKTtcbiAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgIH0sXG4gICAgICBnZXRDdXJyZW50VmFsdWU6ICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wYWdpbmF0ZWRDbGllbnQubG9jYWxRdWVyeVJlc3VsdChcbiAgICAgICAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpLFxuICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgICAgIC8vIGNhc3QgdG8gYXBwbHkgdGhlIHNwZWNpZmljIGZ1bmN0aW9uIHR5cGVcbiAgICAgICAgcmV0dXJuIHJlc3VsdCBhc1xuICAgICAgICAgIHwgUGFnaW5hdGVkUXVlcnlSZXN1bHQ8RnVuY3Rpb25SZXR1cm5UeXBlPFF1ZXJ5Pj5cbiAgICAgICAgICB8IHVuZGVmaW5lZDtcbiAgICAgIH0sXG4gICAgICBnZXRRdWVyeUxvZ3M6ICgpID0+IFtdLCAvLyBQYWdpbmF0ZWQgcXVlcmllcyBkb24ndCBhZ2dyZWdhdGUgdGhlaXIgbG9nc1xuICAgIH07XG4gICAgY29uc3QgcmV0ID0gdW5zdWJzY3JpYmVQcm9wcy51bnN1YnNjcmliZSBhcyBVbnN1YnNjcmliZTxcbiAgICAgIFBhZ2luYXRlZFF1ZXJ5UmVzdWx0PEZ1bmN0aW9uUmV0dXJuVHlwZTxRdWVyeT4+XG4gICAgPjtcbiAgICBPYmplY3QuYXNzaWduKHJldCwgdW5zdWJzY3JpYmVQcm9wcyk7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8vIFJ1biBhbGwgY2FsbGJhY2tzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIHJ1biBiZWZvcmUgaWYgdGhleSBoYXZlIGEgcXVlcnlcbiAgLy8gcmVzdWx0IGF2YWlsYWJsZSBub3cuXG4gIHByaXZhdGUgY2FsbE5ld0xpc3RlbmVyc1dpdGhDdXJyZW50VmFsdWVzKCkge1xuICAgIHRoaXMuY2FsbE5ld0xpc3RlbmVyc1dpdGhDdXJyZW50VmFsdWVzVGltZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fdHJhbnNpdGlvbih7IHF1ZXJpZXM6IFtdLCBwYWdpbmF0ZWRRdWVyaWVzOiBbXSB9LCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgcXVlcnlSZXN1bHRSZWFkeShxdWVyeVRva2VuOiBRdWVyeVRva2VuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50Lmhhc0xvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHF1ZXJ5VG9rZW4pO1xuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEaXNhYmxlZFVuc3Vic2NyaWJlPFQ+KCk6IFVuc3Vic2NyaWJlPFQ+IHtcbiAgICBjb25zdCBkaXNhYmxlZFVuc3Vic2NyaWJlID0gKCgpID0+IHt9KSBhcyBVbnN1YnNjcmliZTxUPjtcbiAgICBjb25zdCB1bnN1YnNjcmliZVByb3BzOiBSZW1vdmVDYWxsU2lnbmF0dXJlPFVuc3Vic2NyaWJlPFQ+PiA9IHtcbiAgICAgIHVuc3Vic2NyaWJlOiBkaXNhYmxlZFVuc3Vic2NyaWJlLFxuICAgICAgZ2V0Q3VycmVudFZhbHVlOiAoKSA9PiB1bmRlZmluZWQsXG4gICAgICBnZXRRdWVyeUxvZ3M6ICgpID0+IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgIE9iamVjdC5hc3NpZ24oZGlzYWJsZWRVbnN1YnNjcmliZSwgdW5zdWJzY3JpYmVQcm9wcyk7XG4gICAgcmV0dXJuIGRpc2FibGVkVW5zdWJzY3JpYmU7XG4gIH1cblxuICBhc3luYyBjbG9zZSgpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkgcmV0dXJuO1xuICAgIC8vIHByZXZlbnQgcGVuZGluZyB1cGRhdGVzXG4gICAgdGhpcy5saXN0ZW5lcnMuY2xlYXIoKTtcbiAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICAgIGlmICh0aGlzLl9wYWdpbmF0ZWRDbGllbnQpIHtcbiAgICAgIHRoaXMuX3BhZ2luYXRlZENsaWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LmNsb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IEpXVCBhdXRoIHRva2VuIGFuZCBkZWNvZGVkIGNsYWltcy5cbiAgICovXG4gIGdldEF1dGgoKTogeyB0b2tlbjogc3RyaW5nOyBkZWNvZGVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IH0gfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm47XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LmdldEN1cnJlbnRBdXRoQ2xhaW1zKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiB0byBiZSB1c2VkIGZvciBzdWJzZXF1ZW50IHF1ZXJpZXMgYW5kIG11dGF0aW9ucy5cbiAgICogYGZldGNoVG9rZW5gIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYWdhaW4gaWYgYSB0b2tlbiBleHBpcmVzLlxuICAgKiBgZmV0Y2hUb2tlbmAgc2hvdWxkIHJldHVybiBgbnVsbGAgaWYgdGhlIHRva2VuIGNhbm5vdCBiZSByZXRyaWV2ZWQsIGZvciBleGFtcGxlXG4gICAqIHdoZW4gdGhlIHVzZXIncyByaWdodHMgd2VyZSBwZXJtYW5lbnRseSByZXZva2VkLlxuICAgKiBAcGFyYW0gZmV0Y2hUb2tlbiAtIGFuIGFzeW5jIGZ1bmN0aW9uIHJldHVybmluZyB0aGUgSldUICh0eXBpY2FsbHkgYW4gT3BlbklEIENvbm5lY3QgSWRlbnRpdHkgVG9rZW4pXG4gICAqIEBwYXJhbSBvbkNoYW5nZSAtIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBhdXRoZW50aWNhdGlvbiBzdGF0dXMgY2hhbmdlc1xuICAgKi9cbiAgc2V0QXV0aChcbiAgICBmZXRjaFRva2VuOiBBdXRoVG9rZW5GZXRjaGVyLFxuICAgIG9uQ2hhbmdlPzogKGlzQXV0aGVudGljYXRlZDogYm9vbGVhbikgPT4gdm9pZCxcbiAgKSB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICB0aGlzLmNsaWVudC5zZXRBdXRoKFxuICAgICAgZmV0Y2hUb2tlbixcbiAgICAgIG9uQ2hhbmdlID8/XG4gICAgICAgICgoKSA9PiB7XG4gICAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgc2V0QWRtaW5BdXRoKHRva2VuOiBzdHJpbmcsIGlkZW50aXR5PzogVXNlcklkZW50aXR5QXR0cmlidXRlcykge1xuICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udmV4Q2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjtcbiAgICB0aGlzLmNsaWVudC5zZXRBZG1pbkF1dGgodG9rZW4sIGlkZW50aXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF90cmFuc2l0aW9uKFxuICAgIHtcbiAgICAgIHF1ZXJpZXMsXG4gICAgICBwYWdpbmF0ZWRRdWVyaWVzLFxuICAgIH06IFBpY2s8RXh0ZW5kZWRUcmFuc2l0aW9uLCBcInF1ZXJpZXNcIiB8IFwicGFnaW5hdGVkUXVlcmllc1wiPixcbiAgICBjYWxsTmV3TGlzdGVuZXJzID0gZmFsc2UsXG4gICkge1xuICAgIGNvbnN0IHVwZGF0ZWRRdWVyaWVzID0gW1xuICAgICAgLi4ucXVlcmllcy5tYXAoKHEpID0+IHEudG9rZW4pLFxuICAgICAgLi4ucGFnaW5hdGVkUXVlcmllcy5tYXAoKHEpID0+IHEudG9rZW4pLFxuICAgIF07XG5cbiAgICAvLyBEZWR1cGluZyBzdWJzY3JpcHRpb25zIGhhcHBlbnMgaW4gdGhlIEJhc2VDb252ZXhDbGllbnQsIHNvIG5vdCBtdWNoIHRvIGRvIGhlcmUuXG5cbiAgICAvLyBDYWxsIGFsbCBjYWxsYmFja3MgaW4gdGhlIG9yZGVyIHRoZXkgd2VyZSByZWdpc3RlcmVkXG4gICAgZm9yIChjb25zdCBxdWVyeUluZm8gb2YgdGhpcy5saXN0ZW5lcnMpIHtcbiAgICAgIGNvbnN0IHsgY2FsbGJhY2ssIHF1ZXJ5VG9rZW4sIG9uRXJyb3IsIGhhc0V2ZXJSdW4gfSA9IHF1ZXJ5SW5mbztcbiAgICAgIGNvbnN0IGlzUGFnaW5hdGVkUXVlcnkgPSBzZXJpYWxpemVkUXVlcnlUb2tlbklzUGFnaW5hdGVkKHF1ZXJ5VG9rZW4pO1xuXG4gICAgICAvLyBXaGF0IGRvZXMgaXQgbWVhbiB0byBoYXZlIGEgcGFnaW5hdGVkIHF1ZXJ5IHJlc3VsdCByZWFkeT8gSSB0aGluayBpdCdzXG4gICAgICAvLyBhbHdheXMgZ29pbmcgdG8gZmlyZSBpbW1lZGlhdGVseS5cbiAgICAgIGNvbnN0IGhhc1Jlc3VsdFJlYWR5ID0gaXNQYWdpbmF0ZWRRdWVyeVxuICAgICAgICA/ICEhdGhpcy5wYWdpbmF0ZWRDbGllbnQubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4ocXVlcnlUb2tlbilcbiAgICAgICAgOiB0aGlzLmNsaWVudC5oYXNMb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuKTtcblxuICAgICAgaWYgKFxuICAgICAgICB1cGRhdGVkUXVlcmllcy5pbmNsdWRlcyhxdWVyeVRva2VuKSB8fFxuICAgICAgICAoY2FsbE5ld0xpc3RlbmVycyAmJiAhaGFzRXZlclJ1biAmJiBoYXNSZXN1bHRSZWFkeSlcbiAgICAgICkge1xuICAgICAgICBxdWVyeUluZm8uaGFzRXZlclJ1biA9IHRydWU7XG4gICAgICAgIGxldCBuZXdWYWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaXNQYWdpbmF0ZWRRdWVyeSkge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLnBhZ2luYXRlZENsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgaWYgKCEoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikpIHRocm93IGVycm9yO1xuICAgICAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgICAgICBvbkVycm9yKFxuICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgXCJTZWNvbmQgYXJndW1lbnQgdG8gb25VcGRhdGUgb25FcnJvciBpcyByZXNlcnZlZCBmb3IgbGF0ZXIgdXNlXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNYWtlIHNvbWUgbm9pc2Ugd2l0aG91dCB1bnN1YnNjcmliaW5nIG9yIGZhaWxpbmcgdG8gY2FsbCBvdGhlciBjYWxsYmFja3MuXG4gICAgICAgICAgICB2b2lkIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soXG4gICAgICAgICAgbmV3VmFsdWUsXG4gICAgICAgICAgXCJTZWNvbmQgYXJndW1lbnQgdG8gb25VcGRhdGUgY2FsbGJhY2sgaXMgcmVzZXJ2ZWQgZm9yIGxhdGVyIHVzZVwiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgbXV0YXRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBtdXRhdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgbXV0YXRpb25cbiAgICogdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBIHtAbGluayBNdXRhdGlvbk9wdGlvbnN9IG9wdGlvbnMgb2JqZWN0IGZvciB0aGUgbXV0YXRpb24uXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgbXV0YXRpb24ncyByZXN1bHQuXG4gICAqL1xuICBhc3luYyBtdXRhdGlvbjxNdXRhdGlvbiBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwibXV0YXRpb25cIj4+KFxuICAgIG11dGF0aW9uOiBNdXRhdGlvbixcbiAgICBhcmdzOiBGdW5jdGlvbkFyZ3M8TXV0YXRpb24+LFxuICAgIG9wdGlvbnM/OiBNdXRhdGlvbk9wdGlvbnMsXG4gICk6IFByb21pc2U8QXdhaXRlZDxGdW5jdGlvblJldHVyblR5cGU8TXV0YXRpb24+Pj4ge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXhDbGllbnQgaXMgZGlzYWJsZWRcIik7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50Lm11dGF0aW9uKGdldEZ1bmN0aW9uTmFtZShtdXRhdGlvbiksIGFyZ3MsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGUgYW4gYWN0aW9uIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gYWN0aW9uIC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBhY3Rpb25cbiAgICogdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBhY3Rpb24uXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgYWN0aW9uJ3MgcmVzdWx0LlxuICAgKi9cbiAgYXN5bmMgYWN0aW9uPEFjdGlvbiBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwiYWN0aW9uXCI+PihcbiAgICBhY3Rpb246IEFjdGlvbixcbiAgICBhcmdzOiBGdW5jdGlvbkFyZ3M8QWN0aW9uPixcbiAgKTogUHJvbWlzZTxBd2FpdGVkPEZ1bmN0aW9uUmV0dXJuVHlwZTxBY3Rpb24+Pj4ge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXhDbGllbnQgaXMgZGlzYWJsZWRcIik7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xpZW50LmFjdGlvbihnZXRGdW5jdGlvbk5hbWUoYWN0aW9uKSwgYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYSBxdWVyeSByZXN1bHQgb25jZS5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBxdWVyeVxuICAgKiB0byBydW4uXG4gICAqIEBwYXJhbSBhcmdzIC0gQW4gYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIHF1ZXJ5LlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIHF1ZXJ5J3MgcmVzdWx0LlxuICAgKi9cbiAgYXN5bmMgcXVlcnk8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgYXJnczogUXVlcnlbXCJfYXJnc1wiXSxcbiAgKTogUHJvbWlzZTxBd2FpdGVkPFF1ZXJ5W1wiX3JldHVyblR5cGVcIl0+PiB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQpIHRocm93IG5ldyBFcnJvcihcIkNvbnZleENsaWVudCBpcyBkaXNhYmxlZFwiKTtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuY2xpZW50LmxvY2FsUXVlcnlSZXN1bHQoZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KSwgYXJncykgYXNcbiAgICAgIHwgQXdhaXRlZDxRdWVyeVtcIl9yZXR1cm5UeXBlXCJdPlxuICAgICAgfCB1bmRlZmluZWQ7XG4gICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUgfSA9IHRoaXMub25VcGRhdGUoXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBhcmdzLFxuICAgICAgICAodmFsdWUpID0+IHtcbiAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICAoZTogRXJyb3IpID0+IHtcbiAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHtAbGluayBDb25uZWN0aW9uU3RhdGV9IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgdGhlIENvbnZleFxuICAgKiBiYWNrZW5kLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gd2l0aCB0aGUgQ29udmV4IGJhY2tlbmQuXG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKTogQ29ubmVjdGlvblN0YXRlIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkgdGhyb3cgbmV3IEVycm9yKFwiQ29udmV4Q2xpZW50IGlzIGRpc2FibGVkXCIpO1xuICAgIHJldHVybiB0aGlzLmNsaWVudC5jb25uZWN0aW9uU3RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gdGhlIHtAbGluayBDb25uZWN0aW9uU3RhdGV9IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgdGhlIENvbnZleFxuICAgKiBiYWNrZW5kLCBjYWxsaW5nIGEgY2FsbGJhY2sgZWFjaCB0aW1lIGl0IGNoYW5nZXMuXG4gICAqXG4gICAqIFN1YnNjcmliZWQgY2FsbGJhY2tzIHdpbGwgYmUgY2FsbGVkIHdoZW4gYW55IHBhcnQgb2YgQ29ubmVjdGlvblN0YXRlIGNoYW5nZXMuXG4gICAqIENvbm5lY3Rpb25TdGF0ZSBtYXkgZ3JvdyBpbiBmdXR1cmUgdmVyc2lvbnMgKGUuZy4gdG8gcHJvdmlkZSBhIGFycmF5IG9mXG4gICAqIGluZmxpZ2h0IHJlcXVlc3RzKSBpbiB3aGljaCBjYXNlIGNhbGxiYWNrcyB3b3VsZCBiZSBjYWxsZWQgbW9yZSBmcmVxdWVudGx5LlxuICAgKlxuICAgKiBAcmV0dXJucyBBbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0byBzdG9wIGxpc3RlbmluZy5cbiAgICovXG4gIHN1YnNjcmliZVRvQ29ubmVjdGlvblN0YXRlKFxuICAgIGNiOiAoY29ubmVjdGlvblN0YXRlOiBDb25uZWN0aW9uU3RhdGUpID0+IHZvaWQsXG4gICk6ICgpID0+IHZvaWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSByZXR1cm4gKCkgPT4ge307XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LnN1YnNjcmliZVRvQ29ubmVjdGlvblN0YXRlKGNiKTtcbiAgfVxufVxuXG4vLyBpbnRlcm5hbCBpbmZvcm1hdGlvbiB0cmFja2VkIGFib3V0IGVhY2ggcmVnaXN0ZXJlZCBjYWxsYmFja1xudHlwZSBRdWVyeUluZm8gPSB7XG4gIGNhbGxiYWNrOiAocmVzdWx0OiBhbnksIG1ldGE6IHVua25vd24pID0+IHVua25vd247XG4gIG9uRXJyb3I6ICgoZTogRXJyb3IsIG1ldGE6IHVua25vd24pID0+IHVua25vd24pIHwgdW5kZWZpbmVkO1xuICB1bnN1YnNjcmliZTogKCkgPT4gdm9pZDtcbiAgcXVlcnlUb2tlbjogUXVlcnlUb2tlbiB8IFBhZ2luYXRlZFF1ZXJ5VG9rZW47XG4gIGhhc0V2ZXJSdW46IGJvb2xlYW47XG4gIC8vIHF1ZXJ5LCBhcmdzIGFuZCBwYWdpbmF0aW9uT3B0aW9ucyBhcmUganVzdCBoZXJlIGZvciBkZWJ1Z2dpbmcsIHRoZSBxdWVyeVRva2VuIGlzIGF1dGhvcml0YXRpdmVcbiAgcXVlcnk6IEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj47XG4gIGFyZ3M6IGFueTtcbiAgcGFnaW5hdGlvbk9wdGlvbnM6IHsgaW5pdGlhbE51bUl0ZW1zOiBudW1iZXI7IGlkOiBudW1iZXIgfSB8IHVuZGVmaW5lZDtcbn07XG5cbi8vIGhlbHBzIHRvIGNvbnN0cnVjdCBvYmplY3RzIHdpdGggYSBjYWxsIHNpZ25hdHVyZVxudHlwZSBSZW1vdmVDYWxsU2lnbmF0dXJlPFQ+ID0gT21pdDxULCBuZXZlcj47XG4iXSwibmFtZXMiOlsidmFsdWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/simple_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/authentication_manager.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/authentication_manager.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationManager: () => (/* binding */ AuthenticationManager)\n/* harmony export */ });\n/* harmony import */ var _vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../vendor/jwt-decode/index.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst MAXIMUM_REFRESH_DELAY = 20 * 24 * 60 * 60 * 1e3;\nconst MAX_TOKEN_CONFIRMATION_ATTEMPTS = 2;\nclass AuthenticationManager {\n    constructor(syncState, callbacks, config){\n        __publicField(this, \"authState\", {\n            state: \"noAuth\"\n        });\n        // Used to detect races involving `setConfig` calls\n        // while a token is being fetched.\n        __publicField(this, \"configVersion\", 0);\n        // Shared by the BaseClient so that the auth manager can easily inspect it\n        __publicField(this, \"syncState\");\n        // Passed down by BaseClient, sends a message to the server\n        __publicField(this, \"authenticate\");\n        __publicField(this, \"stopSocket\");\n        __publicField(this, \"tryRestartSocket\");\n        __publicField(this, \"pauseSocket\");\n        __publicField(this, \"resumeSocket\");\n        // Passed down by BaseClient, sends a message to the server\n        __publicField(this, \"clearAuth\");\n        __publicField(this, \"logger\");\n        __publicField(this, \"refreshTokenLeewaySeconds\");\n        // Number of times we have attempted to confirm the latest token. We retry up\n        // to `MAX_TOKEN_CONFIRMATION_ATTEMPTS` times.\n        __publicField(this, \"tokenConfirmationAttempts\", 0);\n        this.syncState = syncState;\n        this.authenticate = callbacks.authenticate;\n        this.stopSocket = callbacks.stopSocket;\n        this.tryRestartSocket = callbacks.tryRestartSocket;\n        this.pauseSocket = callbacks.pauseSocket;\n        this.resumeSocket = callbacks.resumeSocket;\n        this.clearAuth = callbacks.clearAuth;\n        this.logger = config.logger;\n        this.refreshTokenLeewaySeconds = config.refreshTokenLeewaySeconds;\n    }\n    async setConfig(fetchToken, onChange) {\n        this.resetAuthState();\n        this._logVerbose(\"pausing WS for auth token fetch\");\n        this.pauseSocket();\n        const token = await this.fetchTokenAndGuardAgainstRace(fetchToken, {\n            forceRefreshToken: false\n        });\n        if (token.isFromOutdatedConfig) {\n            return;\n        }\n        if (token.value) {\n            this.setAuthState({\n                state: \"waitingForServerConfirmationOfCachedToken\",\n                config: {\n                    fetchToken,\n                    onAuthChange: onChange\n                },\n                hasRetried: false\n            });\n            this.authenticate(token.value);\n        } else {\n            this.setAuthState({\n                state: \"initialRefetch\",\n                config: {\n                    fetchToken,\n                    onAuthChange: onChange\n                }\n            });\n            await this.refetchToken();\n        }\n        this._logVerbose(\"resuming WS after auth token fetch\");\n        this.resumeSocket();\n    }\n    onTransition(serverMessage) {\n        if (!this.syncState.isCurrentOrNewerAuthVersion(serverMessage.endVersion.identity)) {\n            return;\n        }\n        if (serverMessage.endVersion.identity <= serverMessage.startVersion.identity) {\n            return;\n        }\n        if (this.authState.state === \"waitingForServerConfirmationOfCachedToken\") {\n            this._logVerbose(\"server confirmed auth token is valid\");\n            void this.refetchToken();\n            this.authState.config.onAuthChange(true);\n            return;\n        }\n        if (this.authState.state === \"waitingForServerConfirmationOfFreshToken\") {\n            this._logVerbose(\"server confirmed new auth token is valid\");\n            this.scheduleTokenRefetch(this.authState.token);\n            this.tokenConfirmationAttempts = 0;\n            if (!this.authState.hadAuth) {\n                this.authState.config.onAuthChange(true);\n            }\n        }\n    }\n    onAuthError(serverMessage) {\n        if (serverMessage.authUpdateAttempted === false && (this.authState.state === \"waitingForServerConfirmationOfFreshToken\" || this.authState.state === \"waitingForServerConfirmationOfCachedToken\")) {\n            this._logVerbose(\"ignoring non-auth token expired error\");\n            return;\n        }\n        const { baseVersion } = serverMessage;\n        if (!this.syncState.isCurrentOrNewerAuthVersion(baseVersion + 1)) {\n            this._logVerbose(\"ignoring auth error for previous auth attempt\");\n            return;\n        }\n        void this.tryToReauthenticate(serverMessage);\n        return;\n    }\n    // This is similar to `refetchToken` defined below, in fact we\n    // don't represent them as different states, but it is different\n    // in that we pause the WebSocket so that mutations\n    // don't retry with bad auth.\n    async tryToReauthenticate(serverMessage) {\n        this._logVerbose(`attempting to reauthenticate: ${serverMessage.error}`);\n        if (// No way to fetch another token, kaboom\n        this.authState.state === \"noAuth\" || // We failed on a fresh token. After a small number of retries, we give up\n        // and clear the auth state to avoid infinite retries.\n        this.authState.state === \"waitingForServerConfirmationOfFreshToken\" && this.tokenConfirmationAttempts >= MAX_TOKEN_CONFIRMATION_ATTEMPTS) {\n            this.logger.error(`Failed to authenticate: \"${serverMessage.error}\", check your server auth config`);\n            if (this.syncState.hasAuth()) {\n                this.syncState.clearAuth();\n            }\n            if (this.authState.state !== \"noAuth\") {\n                this.setAndReportAuthFailed(this.authState.config.onAuthChange);\n            }\n            return;\n        }\n        if (this.authState.state === \"waitingForServerConfirmationOfFreshToken\") {\n            this.tokenConfirmationAttempts++;\n            this._logVerbose(`retrying reauthentication, ${MAX_TOKEN_CONFIRMATION_ATTEMPTS - this.tokenConfirmationAttempts} attempts remaining`);\n        }\n        await this.stopSocket();\n        const token = await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken, {\n            forceRefreshToken: true\n        });\n        if (token.isFromOutdatedConfig) {\n            return;\n        }\n        if (token.value && this.syncState.isNewAuth(token.value)) {\n            this.authenticate(token.value);\n            this.setAuthState({\n                state: \"waitingForServerConfirmationOfFreshToken\",\n                config: this.authState.config,\n                token: token.value,\n                hadAuth: this.authState.state === \"notRefetching\" || this.authState.state === \"waitingForScheduledRefetch\"\n            });\n        } else {\n            this._logVerbose(\"reauthentication failed, could not fetch a new token\");\n            if (this.syncState.hasAuth()) {\n                this.syncState.clearAuth();\n            }\n            this.setAndReportAuthFailed(this.authState.config.onAuthChange);\n        }\n        this.tryRestartSocket();\n    }\n    // Force refetch the token and schedule another refetch\n    // before the token expires - an active client should never\n    // need to reauthenticate.\n    async refetchToken() {\n        if (this.authState.state === \"noAuth\") {\n            return;\n        }\n        this._logVerbose(\"refetching auth token\");\n        const token = await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken, {\n            forceRefreshToken: true\n        });\n        if (token.isFromOutdatedConfig) {\n            return;\n        }\n        if (token.value) {\n            if (this.syncState.isNewAuth(token.value)) {\n                this.setAuthState({\n                    state: \"waitingForServerConfirmationOfFreshToken\",\n                    hadAuth: this.syncState.hasAuth(),\n                    token: token.value,\n                    config: this.authState.config\n                });\n                this.authenticate(token.value);\n            } else {\n                this.setAuthState({\n                    state: \"notRefetching\",\n                    config: this.authState.config\n                });\n            }\n        } else {\n            this._logVerbose(\"refetching token failed\");\n            if (this.syncState.hasAuth()) {\n                this.clearAuth();\n            }\n            this.setAndReportAuthFailed(this.authState.config.onAuthChange);\n        }\n        this._logVerbose(\"restarting WS after auth token fetch (if currently stopped)\");\n        this.tryRestartSocket();\n    }\n    scheduleTokenRefetch(token) {\n        if (this.authState.state === \"noAuth\") {\n            return;\n        }\n        const decodedToken = this.decodeToken(token);\n        if (!decodedToken) {\n            this.logger.error(\"Auth token is not a valid JWT, cannot refetch the token\");\n            return;\n        }\n        const { iat, exp } = decodedToken;\n        if (!iat || !exp) {\n            this.logger.error(\"Auth token does not have required fields, cannot refetch the token\");\n            return;\n        }\n        const tokenValiditySeconds = exp - iat;\n        if (tokenValiditySeconds <= 2) {\n            this.logger.error(\"Auth token does not live long enough, cannot refetch the token\");\n            return;\n        }\n        let delay = Math.min(MAXIMUM_REFRESH_DELAY, (tokenValiditySeconds - this.refreshTokenLeewaySeconds) * 1e3);\n        if (delay <= 0) {\n            this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${tokenValiditySeconds}s`);\n            delay = 0;\n        }\n        const refetchTokenTimeoutId = setTimeout(()=>{\n            this._logVerbose(\"running scheduled token refetch\");\n            void this.refetchToken();\n        }, delay);\n        this.setAuthState({\n            state: \"waitingForScheduledRefetch\",\n            refetchTokenTimeoutId,\n            config: this.authState.config\n        });\n        this._logVerbose(`scheduled preemptive auth token refetching in ${delay}ms`);\n    }\n    // Protects against simultaneous calls to `setConfig`\n    // while we're fetching a token\n    async fetchTokenAndGuardAgainstRace(fetchToken, fetchArgs) {\n        const originalConfigVersion = ++this.configVersion;\n        this._logVerbose(`fetching token with config version ${originalConfigVersion}`);\n        const token = await fetchToken(fetchArgs);\n        if (this.configVersion !== originalConfigVersion) {\n            this._logVerbose(`stale config version, expected ${originalConfigVersion}, got ${this.configVersion}`);\n            return {\n                isFromOutdatedConfig: true\n            };\n        }\n        return {\n            isFromOutdatedConfig: false,\n            value: token\n        };\n    }\n    stop() {\n        this.resetAuthState();\n        this.configVersion++;\n        this._logVerbose(`config version bumped to ${this.configVersion}`);\n    }\n    setAndReportAuthFailed(onAuthChange) {\n        onAuthChange(false);\n        this.resetAuthState();\n    }\n    resetAuthState() {\n        this.setAuthState({\n            state: \"noAuth\"\n        });\n    }\n    setAuthState(newAuth) {\n        const authStateForLog = newAuth.state === \"waitingForServerConfirmationOfFreshToken\" ? {\n            hadAuth: newAuth.hadAuth,\n            state: newAuth.state,\n            token: `...${newAuth.token.slice(-7)}`\n        } : {\n            state: newAuth.state\n        };\n        this._logVerbose(`setting auth state to ${JSON.stringify(authStateForLog)}`);\n        switch(newAuth.state){\n            case \"waitingForScheduledRefetch\":\n            case \"notRefetching\":\n            case \"noAuth\":\n                this.tokenConfirmationAttempts = 0;\n                break;\n            case \"waitingForServerConfirmationOfFreshToken\":\n            case \"waitingForServerConfirmationOfCachedToken\":\n            case \"initialRefetch\":\n                break;\n            default:\n                {\n                    newAuth;\n                }\n        }\n        if (this.authState.state === \"waitingForScheduledRefetch\") {\n            clearTimeout(this.authState.refetchTokenTimeoutId);\n            this.syncState.markAuthCompletion();\n        }\n        this.authState = newAuth;\n    }\n    decodeToken(token) {\n        try {\n            return (0,_vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_0__.jwtDecode)(token);\n        } catch (e) {\n            this._logVerbose(`Error decoding token: ${e instanceof Error ? e.message : \"Unknown error\"}`);\n            return null;\n        }\n    }\n    _logVerbose(message) {\n        this.logger.logVerbose(`${message} [v${this.configVersion}]`);\n    }\n} //# sourceMappingURL=authentication_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9hdXRoZW50aWNhdGlvbl9tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBRzBCO0FBSTFCLE1BQU0sd0JBQXdCLEtBQUssS0FBSyxLQUFLLEtBQUs7QUFFbEQsTUFBTSxrQ0FBa0M7QUF3RWpDLE1BQU0sc0JBQXNCO0lBb0JqQyxZQUNFLFdBQ0EsV0FRQSxPQUlBO1FBakNGLG9CQUFRLGFBQXVCO1lBQUUsT0FBTztRQUFTO1FBR2pEO1FBQUE7UUFBQSxvQkFBUSxpQkFBZ0I7UUFFeEI7UUFBQSxvQkFBaUI7UUFFakI7UUFBQSxvQkFBaUI7UUFDakIsb0JBQWlCO1FBQ2pCLG9CQUFpQjtRQUNqQixvQkFBaUI7UUFDakIsb0JBQWlCO1FBRWpCO1FBQUEsb0JBQWlCO1FBQ2pCLG9CQUFpQjtRQUNqQixvQkFBaUI7UUFHakI7UUFBQTtRQUFBLG9CQUFRLDZCQUE0QjtRQWdCbEMsS0FBSyxZQUFZO1FBQ2pCLEtBQUssZUFBZSxVQUFVO1FBQzlCLEtBQUssYUFBYSxVQUFVO1FBQzVCLEtBQUssbUJBQW1CLFVBQVU7UUFDbEMsS0FBSyxjQUFjLFVBQVU7UUFDN0IsS0FBSyxlQUFlLFVBQVU7UUFDOUIsS0FBSyxZQUFZLFVBQVU7UUFDM0IsS0FBSyxTQUFTLE9BQU87UUFDckIsS0FBSyw0QkFBNEIsT0FBTztJQUMxQztJQUVBLE1BQU0sVUFDSixZQUNBLFVBQ0E7UUFDQSxLQUFLLGVBQWU7UUFDcEIsS0FBSyxZQUFZLGlDQUFpQztRQUNsRCxLQUFLLFlBQVk7UUFDakIsTUFBTSxRQUFRLE1BQU0sS0FBSyw4QkFBOEIsWUFBWTtZQUNqRSxtQkFBbUI7UUFDckIsQ0FBQztRQUNELElBQUksTUFBTSxzQkFBc0I7WUFDOUI7UUFDRjtRQUNBLElBQUksTUFBTSxPQUFPO1lBQ2YsS0FBSyxhQUFhO2dCQUNoQixPQUFPO2dCQUNQLFFBQVE7b0JBQUU7b0JBQVksY0FBYztn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WUFDakIsT0FBTyxRQUFRO1lBQ2YsT0FBTyxNQUFNLFFBQVEsTUFBTSxNQUFNLEVBQUUsQ0FBQztRQUN0QyxJQUNBO1lBQUUsT0FBTyxRQUFRO1FBQU07UUFDN0IsS0FBSyxZQUNILHlCQUF5QixLQUFLLFVBQVUsZUFBZSxDQUFDO1FBRTFELE9BQVEsUUFBUSxPQUFPO1lBQ3JCLEtBQUs7WUFDTCxLQUFLO1lBQ0wsS0FBSztnQkFDSCxLQUFLLDRCQUE0QjtnQkFDakM7WUFDRixLQUFLO1lBQ0wsS0FBSztZQUNMLEtBQUs7Z0JBQ0g7WUFDRjtnQkFBUztvQkFDUDtnQkFDRjtRQUNGO1FBQ0EsSUFBSSxLQUFLLFVBQVUsVUFBVSw4QkFBOEI7WUFDekQsYUFBYSxLQUFLLFVBQVUscUJBQXFCO1lBSWpELEtBQUssVUFBVSxtQkFBbUI7UUFDcEM7UUFDQSxLQUFLLFlBQVk7SUFDbkI7SUFFUSxZQUFZLE9BQWU7UUFDakMsSUFBSTtZQUNGLE9BQU8sc0VBQVMsQ0FBQyxLQUFLO1FBQ3hCLFNBQVMsR0FBRztZQUNWLEtBQUssWUFDSCx5QkFBeUIsYUFBYSxRQUFRLEVBQUUsVUFBVSxlQUFlO1lBRTNFLE9BQU87UUFDVDtJQUNGO0lBRVEsWUFBWSxTQUFpQjtRQUNuQyxLQUFLLE9BQU8sV0FBVyxHQUFHLE9BQU8sTUFBTSxLQUFLLGFBQWEsR0FBRztJQUM5RDtBQUNGIiwic291cmNlcyI6WyIvc3JjL2Jyb3dzZXIvc3luYy9hdXRoZW50aWNhdGlvbl9tYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9sb2dnaW5nLmpzXCI7XG5pbXBvcnQgeyBMb2NhbFN5bmNTdGF0ZSB9IGZyb20gXCIuL2xvY2FsX3N0YXRlLmpzXCI7XG5pbXBvcnQgeyBBdXRoRXJyb3IsIElkZW50aXR5VmVyc2lvbiwgVHJhbnNpdGlvbiB9IGZyb20gXCIuL3Byb3RvY29sLmpzXCI7XG5pbXBvcnQgeyBqd3REZWNvZGUgfSBmcm9tIFwiLi4vLi4vdmVuZG9yL2p3dC1kZWNvZGUvaW5kZXguanNcIjtcblxuLy8gc2V0VGltb3V0IHVzZXMgMzIgYml0IGludGVnZXIsIHNvIGl0IGNhbiBvbmx5XG4vLyBzY2hlZHVsZSBhYm91dCAyNCBkYXlzIGluIHRoZSBmdXR1cmUuXG5jb25zdCBNQVhJTVVNX1JFRlJFU0hfREVMQVkgPSAyMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDIwIGRheXNcblxuY29uc3QgTUFYX1RPS0VOX0NPTkZJUk1BVElPTl9BVFRFTVBUUyA9IDI7XG5cbi8qKlxuICogQW4gYXN5bmMgZnVuY3Rpb24gcmV0dXJuaW5nIGEgSldULiBEZXBlbmRpbmcgb24gdGhlIGF1dGggcHJvdmlkZXJzXG4gKiBjb25maWd1cmVkIGluIGNvbnZleC9hdXRoLmNvbmZpZy50cywgdGhpcyBtYXkgYmUgYSBKV1QtZW5jb2RlZCBPcGVuSURcbiAqIENvbm5lY3QgSWRlbnRpdHkgVG9rZW4gb3IgYSB0cmFkaXRpb25hbCBKV1QuXG4gKlxuICogYGZvcmNlUmVmcmVzaFRva2VuYCBpcyBgdHJ1ZWAgaWYgdGhlIHNlcnZlciByZWplY3RlZCBhIHByZXZpb3VzbHlcbiAqIHJldHVybmVkIHRva2VuIG9yIHRoZSB0b2tlbiBpcyBhbnRpY2lwYXRlZCB0byBleHBpcmluZyBzb29uXG4gKiBiYXNlZCBvbiBpdHMgYGV4cGAgdGltZS5cbiAqXG4gKiBTZWUge0BsaW5rIENvbnZleFJlYWN0Q2xpZW50LnNldEF1dGh9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgQXV0aFRva2VuRmV0Y2hlciA9IChhcmdzOiB7XG4gIGZvcmNlUmVmcmVzaFRva2VuOiBib29sZWFuO1xufSkgPT4gUHJvbWlzZTxzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkPjtcblxuLyoqXG4gKiBXaGF0IGlzIHByb3ZpZGVkIHRvIHRoZSBjbGllbnQuXG4gKi9cbnR5cGUgQXV0aENvbmZpZyA9IHtcbiAgZmV0Y2hUb2tlbjogQXV0aFRva2VuRmV0Y2hlcjtcbiAgb25BdXRoQ2hhbmdlOiAoaXNBdXRoZW50aWNhdGVkOiBib29sZWFuKSA9PiB2b2lkO1xufTtcblxuLyoqXG4gKiBJbiBnZW5lcmFsIHdlIHRha2UgMyBzdGVwczpcbiAqICAgMS4gRmV0Y2ggYSBwb3NzaWJseSBjYWNoZWQgdG9rZW5cbiAqICAgMi4gSW1tZWRpYXRlbHkgZmV0Y2ggYSBmcmVzaCB0b2tlbiB3aXRob3V0IHVzaW5nIGEgY2FjaGVcbiAqICAgMy4gUmVwZWF0IHN0ZXAgMiBiZWZvcmUgdGhlIGVuZCBvZiB0aGUgZnJlc2ggdG9rZW4ncyBsaWZldGltZVxuICpcbiAqIFdoZW4gd2UgZmV0Y2ggd2l0aG91dCB1c2luZyBhIGNhY2hlIHdlIGtub3cgd2hlbiB0aGUgdG9rZW5cbiAqIHdpbGwgZXhwaXJlLCBhbmQgY2FuIHNjaGVkdWxlIHJlZmV0Y2hpbmcgaXQuXG4gKlxuICogSWYgd2UgZ2V0IGFuIGVycm9yIGJlZm9yZSBhIHNjaGVkdWxlZCByZWZldGNoLCB3ZSBnbyBiYWNrXG4gKiB0byBzdGVwIDIuXG4gKi9cbnR5cGUgQXV0aFN0YXRlID1cbiAgfCB7IHN0YXRlOiBcIm5vQXV0aFwiIH1cbiAgfCB7XG4gICAgICBzdGF0ZTogXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZDYWNoZWRUb2tlblwiO1xuICAgICAgY29uZmlnOiBBdXRoQ29uZmlnO1xuICAgICAgaGFzUmV0cmllZDogYm9vbGVhbjtcbiAgICB9XG4gIHwge1xuICAgICAgc3RhdGU6IFwiaW5pdGlhbFJlZmV0Y2hcIjtcbiAgICAgIGNvbmZpZzogQXV0aENvbmZpZztcbiAgICB9XG4gIHwge1xuICAgICAgc3RhdGU6IFwid2FpdGluZ0ZvclNlcnZlckNvbmZpcm1hdGlvbk9mRnJlc2hUb2tlblwiO1xuICAgICAgY29uZmlnOiBBdXRoQ29uZmlnO1xuICAgICAgaGFkQXV0aDogYm9vbGVhbjtcbiAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfVxuICB8IHtcbiAgICAgIHN0YXRlOiBcIndhaXRpbmdGb3JTY2hlZHVsZWRSZWZldGNoXCI7XG4gICAgICBjb25maWc6IEF1dGhDb25maWc7XG4gICAgICByZWZldGNoVG9rZW5UaW1lb3V0SWQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuICAgIH1cbiAgLy8gU3BlY2lhbC93ZWlyZCBzdGF0ZSB3aGVuIHdlIGdvdCBhIHZhbGlkIHRva2VuXG4gIC8vIGJ1dCBjb3VsZCBub3QgZmV0Y2ggYSBuZXcgb25lLlxuICB8IHtcbiAgICAgIHN0YXRlOiBcIm5vdFJlZmV0Y2hpbmdcIjtcbiAgICAgIGNvbmZpZzogQXV0aENvbmZpZztcbiAgICB9O1xuXG4vKipcbiAqIEhhbmRsZXMgdGhlIHN0YXRlIHRyYW5zaXRpb25zIGZvciBhdXRoLiBUaGUgc2VydmVyIGlzIHRoZSBzb3VyY2VcbiAqIG9mIHRydXRoLlxuICovXG5leHBvcnQgY2xhc3MgQXV0aGVudGljYXRpb25NYW5hZ2VyIHtcbiAgcHJpdmF0ZSBhdXRoU3RhdGU6IEF1dGhTdGF0ZSA9IHsgc3RhdGU6IFwibm9BdXRoXCIgfTtcbiAgLy8gVXNlZCB0byBkZXRlY3QgcmFjZXMgaW52b2x2aW5nIGBzZXRDb25maWdgIGNhbGxzXG4gIC8vIHdoaWxlIGEgdG9rZW4gaXMgYmVpbmcgZmV0Y2hlZC5cbiAgcHJpdmF0ZSBjb25maWdWZXJzaW9uID0gMDtcbiAgLy8gU2hhcmVkIGJ5IHRoZSBCYXNlQ2xpZW50IHNvIHRoYXQgdGhlIGF1dGggbWFuYWdlciBjYW4gZWFzaWx5IGluc3BlY3QgaXRcbiAgcHJpdmF0ZSByZWFkb25seSBzeW5jU3RhdGU6IExvY2FsU3luY1N0YXRlO1xuICAvLyBQYXNzZWQgZG93biBieSBCYXNlQ2xpZW50LCBzZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHNlcnZlclxuICBwcml2YXRlIHJlYWRvbmx5IGF1dGhlbnRpY2F0ZTogKHRva2VuOiBzdHJpbmcpID0+IElkZW50aXR5VmVyc2lvbjtcbiAgcHJpdmF0ZSByZWFkb25seSBzdG9wU29ja2V0OiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBwcml2YXRlIHJlYWRvbmx5IHRyeVJlc3RhcnRTb2NrZXQ6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGF1c2VTb2NrZXQ6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVzdW1lU29ja2V0OiAoKSA9PiB2b2lkO1xuICAvLyBQYXNzZWQgZG93biBieSBCYXNlQ2xpZW50LCBzZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHNlcnZlclxuICBwcml2YXRlIHJlYWRvbmx5IGNsZWFyQXV0aDogKCkgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSByZWFkb25seSByZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzOiBudW1iZXI7XG4gIC8vIE51bWJlciBvZiB0aW1lcyB3ZSBoYXZlIGF0dGVtcHRlZCB0byBjb25maXJtIHRoZSBsYXRlc3QgdG9rZW4uIFdlIHJldHJ5IHVwXG4gIC8vIHRvIGBNQVhfVE9LRU5fQ09ORklSTUFUSU9OX0FUVEVNUFRTYCB0aW1lcy5cbiAgcHJpdmF0ZSB0b2tlbkNvbmZpcm1hdGlvbkF0dGVtcHRzID0gMDtcbiAgY29uc3RydWN0b3IoXG4gICAgc3luY1N0YXRlOiBMb2NhbFN5bmNTdGF0ZSxcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIGF1dGhlbnRpY2F0ZTogKHRva2VuOiBzdHJpbmcpID0+IElkZW50aXR5VmVyc2lvbjtcbiAgICAgIHN0b3BTb2NrZXQ6ICgpID0+IFByb21pc2U8dm9pZD47XG4gICAgICB0cnlSZXN0YXJ0U29ja2V0OiAoKSA9PiB2b2lkO1xuICAgICAgcGF1c2VTb2NrZXQ6ICgpID0+IHZvaWQ7XG4gICAgICByZXN1bWVTb2NrZXQ6ICgpID0+IHZvaWQ7XG4gICAgICBjbGVhckF1dGg6ICgpID0+IHZvaWQ7XG4gICAgfSxcbiAgICBjb25maWc6IHtcbiAgICAgIHJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHM6IG51bWJlcjtcbiAgICAgIGxvZ2dlcjogTG9nZ2VyO1xuICAgIH0sXG4gICkge1xuICAgIHRoaXMuc3luY1N0YXRlID0gc3luY1N0YXRlO1xuICAgIHRoaXMuYXV0aGVudGljYXRlID0gY2FsbGJhY2tzLmF1dGhlbnRpY2F0ZTtcbiAgICB0aGlzLnN0b3BTb2NrZXQgPSBjYWxsYmFja3Muc3RvcFNvY2tldDtcbiAgICB0aGlzLnRyeVJlc3RhcnRTb2NrZXQgPSBjYWxsYmFja3MudHJ5UmVzdGFydFNvY2tldDtcbiAgICB0aGlzLnBhdXNlU29ja2V0ID0gY2FsbGJhY2tzLnBhdXNlU29ja2V0O1xuICAgIHRoaXMucmVzdW1lU29ja2V0ID0gY2FsbGJhY2tzLnJlc3VtZVNvY2tldDtcbiAgICB0aGlzLmNsZWFyQXV0aCA9IGNhbGxiYWNrcy5jbGVhckF1dGg7XG4gICAgdGhpcy5sb2dnZXIgPSBjb25maWcubG9nZ2VyO1xuICAgIHRoaXMucmVmcmVzaFRva2VuTGVld2F5U2Vjb25kcyA9IGNvbmZpZy5yZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzO1xuICB9XG5cbiAgYXN5bmMgc2V0Q29uZmlnKFxuICAgIGZldGNoVG9rZW46IEF1dGhUb2tlbkZldGNoZXIsXG4gICAgb25DaGFuZ2U6IChpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW4pID0+IHZvaWQsXG4gICkge1xuICAgIHRoaXMucmVzZXRBdXRoU3RhdGUoKTtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFwicGF1c2luZyBXUyBmb3IgYXV0aCB0b2tlbiBmZXRjaFwiKTtcbiAgICB0aGlzLnBhdXNlU29ja2V0KCk7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmZldGNoVG9rZW5BbmRHdWFyZEFnYWluc3RSYWNlKGZldGNoVG9rZW4sIHtcbiAgICAgIGZvcmNlUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICB9KTtcbiAgICBpZiAodG9rZW4uaXNGcm9tT3V0ZGF0ZWRDb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRva2VuLnZhbHVlKSB7XG4gICAgICB0aGlzLnNldEF1dGhTdGF0ZSh7XG4gICAgICAgIHN0YXRlOiBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkNhY2hlZFRva2VuXCIsXG4gICAgICAgIGNvbmZpZzogeyBmZXRjaFRva2VuLCBvbkF1dGhDaGFuZ2U6IG9uQ2hhbmdlIH0sXG4gICAgICAgIGhhc1JldHJpZWQ6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0ZSh0b2tlbi52YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0QXV0aFN0YXRlKHtcbiAgICAgICAgc3RhdGU6IFwiaW5pdGlhbFJlZmV0Y2hcIixcbiAgICAgICAgY29uZmlnOiB7IGZldGNoVG9rZW4sIG9uQXV0aENoYW5nZTogb25DaGFuZ2UgfSxcbiAgICAgIH0pO1xuICAgICAgLy8gVHJ5IGFnYWluIHdpdGggYGZvcmNlUmVmcmVzaFRva2VuOiB0cnVlYFxuICAgICAgYXdhaXQgdGhpcy5yZWZldGNoVG9rZW4oKTtcbiAgICB9XG4gICAgdGhpcy5fbG9nVmVyYm9zZShcInJlc3VtaW5nIFdTIGFmdGVyIGF1dGggdG9rZW4gZmV0Y2hcIik7XG4gICAgdGhpcy5yZXN1bWVTb2NrZXQoKTtcbiAgfVxuXG4gIG9uVHJhbnNpdGlvbihzZXJ2ZXJNZXNzYWdlOiBUcmFuc2l0aW9uKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuc3luY1N0YXRlLmlzQ3VycmVudE9yTmV3ZXJBdXRoVmVyc2lvbihcbiAgICAgICAgc2VydmVyTWVzc2FnZS5lbmRWZXJzaW9uLmlkZW50aXR5LFxuICAgICAgKVxuICAgICkge1xuICAgICAgLy8gVGhpcyBpcyBhIHN0YWxlIHRyYW5zaXRpb24gLSBjbGllbnQgaGFzIG1vdmVkIG9uIHRvXG4gICAgICAvLyBhIG5ld2VyIGF1dGggdmVyc2lvbi5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgc2VydmVyTWVzc2FnZS5lbmRWZXJzaW9uLmlkZW50aXR5IDw9IHNlcnZlck1lc3NhZ2Uuc3RhcnRWZXJzaW9uLmlkZW50aXR5XG4gICAgKSB7XG4gICAgICAvLyBUaGlzIHRyYW5zaXRpb24gZGlkIG5vdCBjaGFuZ2UgYXV0aCAtIGl0IGlzIG5vdCBhIHJlc3BvbnNlIHRvIEF1dGhlbnRpY2F0ZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwid2FpdGluZ0ZvclNlcnZlckNvbmZpcm1hdGlvbk9mQ2FjaGVkVG9rZW5cIikge1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcInNlcnZlciBjb25maXJtZWQgYXV0aCB0b2tlbiBpcyB2YWxpZFwiKTtcbiAgICAgIHZvaWQgdGhpcy5yZWZldGNoVG9rZW4oKTtcbiAgICAgIHRoaXMuYXV0aFN0YXRlLmNvbmZpZy5vbkF1dGhDaGFuZ2UodHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIpIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJzZXJ2ZXIgY29uZmlybWVkIG5ldyBhdXRoIHRva2VuIGlzIHZhbGlkXCIpO1xuICAgICAgdGhpcy5zY2hlZHVsZVRva2VuUmVmZXRjaCh0aGlzLmF1dGhTdGF0ZS50b2tlbik7XG4gICAgICB0aGlzLnRva2VuQ29uZmlybWF0aW9uQXR0ZW1wdHMgPSAwO1xuICAgICAgaWYgKCF0aGlzLmF1dGhTdGF0ZS5oYWRBdXRoKSB7XG4gICAgICAgIHRoaXMuYXV0aFN0YXRlLmNvbmZpZy5vbkF1dGhDaGFuZ2UodHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgb25BdXRoRXJyb3Ioc2VydmVyTWVzc2FnZTogQXV0aEVycm9yKSB7XG4gICAgLy8gSWYgdGhlIEF1dGhFcnJvciBpcyBub3QgZHVlIHRvIHVwZGF0aW5nIHRoZSB0b2tlbiwgYW5kIHdlJ3JlIGN1cnJlbnRseVxuICAgIC8vIHdhaXRpbmcgb24gdGhlIHJlc3VsdCBvZiBhIHRva2VuIHVwZGF0ZSwgaWdub3JlLlxuICAgIGlmIChcbiAgICAgIHNlcnZlck1lc3NhZ2UuYXV0aFVwZGF0ZUF0dGVtcHRlZCA9PT0gZmFsc2UgJiZcbiAgICAgICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIgfHxcbiAgICAgICAgdGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwid2FpdGluZ0ZvclNlcnZlckNvbmZpcm1hdGlvbk9mQ2FjaGVkVG9rZW5cIilcbiAgICApIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJpZ25vcmluZyBub24tYXV0aCB0b2tlbiBleHBpcmVkIGVycm9yXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IGJhc2VWZXJzaW9uIH0gPSBzZXJ2ZXJNZXNzYWdlO1xuICAgIC8vIFZlcnNpb25lZCBBdXRoRXJyb3JzIGFyZSBpZ25vcmVkIGlmIHRoZSBjbGllbnQgYWR2YW5jZWQgdG9cbiAgICAvLyBhIG5ld2VyIGF1dGggaWRlbnRpdHlcbiAgICAvLyBFcnJvciBhcmUgcmVwb3J0aW5nIHRoZSBwcmV2aW91cyB2ZXJzaW9uLCBzaW5jZSB0aGUgc2VydmVyXG4gICAgLy8gZGlkbid0IGFkdmFuY2UsIGhlbmNlIGArIDFgLlxuICAgIGlmICghdGhpcy5zeW5jU3RhdGUuaXNDdXJyZW50T3JOZXdlckF1dGhWZXJzaW9uKGJhc2VWZXJzaW9uICsgMSkpIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJpZ25vcmluZyBhdXRoIGVycm9yIGZvciBwcmV2aW91cyBhdXRoIGF0dGVtcHRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZvaWQgdGhpcy50cnlUb1JlYXV0aGVudGljYXRlKHNlcnZlck1lc3NhZ2UpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgc2ltaWxhciB0byBgcmVmZXRjaFRva2VuYCBkZWZpbmVkIGJlbG93LCBpbiBmYWN0IHdlXG4gIC8vIGRvbid0IHJlcHJlc2VudCB0aGVtIGFzIGRpZmZlcmVudCBzdGF0ZXMsIGJ1dCBpdCBpcyBkaWZmZXJlbnRcbiAgLy8gaW4gdGhhdCB3ZSBwYXVzZSB0aGUgV2ViU29ja2V0IHNvIHRoYXQgbXV0YXRpb25zXG4gIC8vIGRvbid0IHJldHJ5IHdpdGggYmFkIGF1dGguXG4gIHByaXZhdGUgYXN5bmMgdHJ5VG9SZWF1dGhlbnRpY2F0ZShzZXJ2ZXJNZXNzYWdlOiBBdXRoRXJyb3IpIHtcbiAgICB0aGlzLl9sb2dWZXJib3NlKGBhdHRlbXB0aW5nIHRvIHJlYXV0aGVudGljYXRlOiAke3NlcnZlck1lc3NhZ2UuZXJyb3J9YCk7XG4gICAgaWYgKFxuICAgICAgLy8gTm8gd2F5IHRvIGZldGNoIGFub3RoZXIgdG9rZW4sIGthYm9vbVxuICAgICAgdGhpcy5hdXRoU3RhdGUuc3RhdGUgPT09IFwibm9BdXRoXCIgfHxcbiAgICAgIC8vIFdlIGZhaWxlZCBvbiBhIGZyZXNoIHRva2VuLiBBZnRlciBhIHNtYWxsIG51bWJlciBvZiByZXRyaWVzLCB3ZSBnaXZlIHVwXG4gICAgICAvLyBhbmQgY2xlYXIgdGhlIGF1dGggc3RhdGUgdG8gYXZvaWQgaW5maW5pdGUgcmV0cmllcy5cbiAgICAgICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIgJiZcbiAgICAgICAgdGhpcy50b2tlbkNvbmZpcm1hdGlvbkF0dGVtcHRzID49IE1BWF9UT0tFTl9DT05GSVJNQVRJT05fQVRURU1QVFMpXG4gICAgKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgYEZhaWxlZCB0byBhdXRoZW50aWNhdGU6IFwiJHtzZXJ2ZXJNZXNzYWdlLmVycm9yfVwiLCBjaGVjayB5b3VyIHNlcnZlciBhdXRoIGNvbmZpZ2AsXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuc3luY1N0YXRlLmhhc0F1dGgoKSkge1xuICAgICAgICB0aGlzLnN5bmNTdGF0ZS5jbGVhckF1dGgoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSAhPT0gXCJub0F1dGhcIikge1xuICAgICAgICB0aGlzLnNldEFuZFJlcG9ydEF1dGhGYWlsZWQodGhpcy5hdXRoU3RhdGUuY29uZmlnLm9uQXV0aENoYW5nZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIpIHtcbiAgICAgIHRoaXMudG9rZW5Db25maXJtYXRpb25BdHRlbXB0cysrO1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgICAgYHJldHJ5aW5nIHJlYXV0aGVudGljYXRpb24sICR7TUFYX1RPS0VOX0NPTkZJUk1BVElPTl9BVFRFTVBUUyAtIHRoaXMudG9rZW5Db25maXJtYXRpb25BdHRlbXB0c30gYXR0ZW1wdHMgcmVtYWluaW5nYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zdG9wU29ja2V0KCk7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmZldGNoVG9rZW5BbmRHdWFyZEFnYWluc3RSYWNlKFxuICAgICAgdGhpcy5hdXRoU3RhdGUuY29uZmlnLmZldGNoVG9rZW4sXG4gICAgICB7XG4gICAgICAgIGZvcmNlUmVmcmVzaFRva2VuOiB0cnVlLFxuICAgICAgfSxcbiAgICApO1xuICAgIGlmICh0b2tlbi5pc0Zyb21PdXRkYXRlZENvbmZpZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0b2tlbi52YWx1ZSAmJiB0aGlzLnN5bmNTdGF0ZS5pc05ld0F1dGgodG9rZW4udmFsdWUpKSB7XG4gICAgICB0aGlzLmF1dGhlbnRpY2F0ZSh0b2tlbi52YWx1ZSk7XG4gICAgICB0aGlzLnNldEF1dGhTdGF0ZSh7XG4gICAgICAgIHN0YXRlOiBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkZyZXNoVG9rZW5cIixcbiAgICAgICAgY29uZmlnOiB0aGlzLmF1dGhTdGF0ZS5jb25maWcsXG4gICAgICAgIHRva2VuOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgaGFkQXV0aDpcbiAgICAgICAgICB0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJub3RSZWZldGNoaW5nXCIgfHxcbiAgICAgICAgICB0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2NoZWR1bGVkUmVmZXRjaFwiLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJyZWF1dGhlbnRpY2F0aW9uIGZhaWxlZCwgY291bGQgbm90IGZldGNoIGEgbmV3IHRva2VuXCIpO1xuICAgICAgaWYgKHRoaXMuc3luY1N0YXRlLmhhc0F1dGgoKSkge1xuICAgICAgICB0aGlzLnN5bmNTdGF0ZS5jbGVhckF1dGgoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0QW5kUmVwb3J0QXV0aEZhaWxlZCh0aGlzLmF1dGhTdGF0ZS5jb25maWcub25BdXRoQ2hhbmdlKTtcbiAgICB9XG4gICAgdGhpcy50cnlSZXN0YXJ0U29ja2V0KCk7XG4gIH1cblxuICAvLyBGb3JjZSByZWZldGNoIHRoZSB0b2tlbiBhbmQgc2NoZWR1bGUgYW5vdGhlciByZWZldGNoXG4gIC8vIGJlZm9yZSB0aGUgdG9rZW4gZXhwaXJlcyAtIGFuIGFjdGl2ZSBjbGllbnQgc2hvdWxkIG5ldmVyXG4gIC8vIG5lZWQgdG8gcmVhdXRoZW50aWNhdGUuXG4gIHByaXZhdGUgYXN5bmMgcmVmZXRjaFRva2VuKCkge1xuICAgIGlmICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJub0F1dGhcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9sb2dWZXJib3NlKFwicmVmZXRjaGluZyBhdXRoIHRva2VuXCIpO1xuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5mZXRjaFRva2VuQW5kR3VhcmRBZ2FpbnN0UmFjZShcbiAgICAgIHRoaXMuYXV0aFN0YXRlLmNvbmZpZy5mZXRjaFRva2VuLFxuICAgICAge1xuICAgICAgICBmb3JjZVJlZnJlc2hUb2tlbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgKTtcbiAgICBpZiAodG9rZW4uaXNGcm9tT3V0ZGF0ZWRDb25maWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodG9rZW4udmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLnN5bmNTdGF0ZS5pc05ld0F1dGgodG9rZW4udmFsdWUpKSB7XG4gICAgICAgIHRoaXMuc2V0QXV0aFN0YXRlKHtcbiAgICAgICAgICBzdGF0ZTogXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCIsXG4gICAgICAgICAgaGFkQXV0aDogdGhpcy5zeW5jU3RhdGUuaGFzQXV0aCgpLFxuICAgICAgICAgIHRva2VuOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgICBjb25maWc6IHRoaXMuYXV0aFN0YXRlLmNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXV0aGVudGljYXRlKHRva2VuLnZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0QXV0aFN0YXRlKHtcbiAgICAgICAgICBzdGF0ZTogXCJub3RSZWZldGNoaW5nXCIsXG4gICAgICAgICAgY29uZmlnOiB0aGlzLmF1dGhTdGF0ZS5jb25maWcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwicmVmZXRjaGluZyB0b2tlbiBmYWlsZWRcIik7XG4gICAgICBpZiAodGhpcy5zeW5jU3RhdGUuaGFzQXV0aCgpKSB7XG4gICAgICAgIHRoaXMuY2xlYXJBdXRoKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnNldEFuZFJlcG9ydEF1dGhGYWlsZWQodGhpcy5hdXRoU3RhdGUuY29uZmlnLm9uQXV0aENoYW5nZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgaW4gY2FzZSB0aGlzIHJlZmV0Y2ggd2FzIHRyaWdnZXJlZCB2aWEgc2NoZWR1bGUgZHVyaW5nXG4gICAgLy8gYSByZWF1dGhlbnRpY2F0aW9uIGF0dGVtcHQuXG4gICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgIFwicmVzdGFydGluZyBXUyBhZnRlciBhdXRoIHRva2VuIGZldGNoIChpZiBjdXJyZW50bHkgc3RvcHBlZClcIixcbiAgICApO1xuICAgIHRoaXMudHJ5UmVzdGFydFNvY2tldCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVRva2VuUmVmZXRjaCh0b2tlbjogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuYXV0aFN0YXRlLnN0YXRlID09PSBcIm5vQXV0aFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRlY29kZWRUb2tlbiA9IHRoaXMuZGVjb2RlVG9rZW4odG9rZW4pO1xuICAgIGlmICghZGVjb2RlZFRva2VuKSB7XG4gICAgICAvLyBUaGlzIGlzIG5vIGxvbmdlciByZWFsbHkgcG9zc2libGUsIGJlY2F1c2VcbiAgICAgIC8vIHdlIHdhaXQgb24gc2VydmVyIHJlc3BvbnNlIGJlZm9yZSBzY2hlZHVsaW5nIHRva2VuIHJlZmV0Y2gsXG4gICAgICAvLyBhbmQgdGhlIHNlcnZlciBjdXJyZW50bHkgcmVxdWlyZXMgSldUIHRva2Vucy5cbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIkF1dGggdG9rZW4gaXMgbm90IGEgdmFsaWQgSldULCBjYW5ub3QgcmVmZXRjaCB0aGUgdG9rZW5cIixcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGlhdDogaXNzdWVkIGF0IHRpbWUsIFVUQyBzZWNvbmRzIHRpbWVzdGFtcCBhdCB3aGljaCB0aGUgSldUIHdhcyBpc3N1ZWRcbiAgICAvLyBleHA6IGV4cGlyYXRpb24gdGltZSwgVVRDIHNlY29uZHMgdGltZXN0YW1wIGF0IHdoaWNoIHRoZSBKV1Qgd2lsbCBleHBpcmVcbiAgICBjb25zdCB7IGlhdCwgZXhwIH0gPSBkZWNvZGVkVG9rZW4gYXMgeyBpYXQ/OiBudW1iZXI7IGV4cD86IG51bWJlciB9O1xuICAgIGlmICghaWF0IHx8ICFleHApIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIkF1dGggdG9rZW4gZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBmaWVsZHMsIGNhbm5vdCByZWZldGNoIHRoZSB0b2tlblwiLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gQmVjYXVzZSB0aGUgY2xpZW50IGFuZCBzZXJ2ZXIgY2xvY2tzIG1heSBiZSBvdXQgb2Ygc3luYyxcbiAgICAvLyB3ZSBvbmx5IGtub3cgdGhhdCB0aGUgdG9rZW4gd2lsbCBleHBpcmUgYWZ0ZXIgYGV4cCAtIGlhdGAsXG4gICAgLy8gYW5kIHNpbmNlIHdlIGp1c3QgZmV0Y2hlZCBhIGZyZXNoIG9uZSB3ZSBrbm93IHdoZW4gdGhhdFxuICAgIC8vIHdpbGwgaGFwcGVuLlxuICAgIGNvbnN0IHRva2VuVmFsaWRpdHlTZWNvbmRzID0gZXhwIC0gaWF0O1xuICAgIGlmICh0b2tlblZhbGlkaXR5U2Vjb25kcyA8PSAyKSB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihcbiAgICAgICAgXCJBdXRoIHRva2VuIGRvZXMgbm90IGxpdmUgbG9uZyBlbm91Z2gsIGNhbm5vdCByZWZldGNoIHRoZSB0b2tlblwiLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gQXR0ZW1wdCB0byByZWZyZXNoIHRoZSB0b2tlbiBgcmVmcmVzaFRva2VuTGVld2F5U2Vjb25kc2AgYmVmb3JlIGl0IGV4cGlyZXMsXG4gICAgLy8gb3IgaW1tZWRpYXRlbHkgaWYgdGhlIHRva2VuIGlzIGFscmVhZHkgZXhwaXJpbmcgc29vbi5cbiAgICBsZXQgZGVsYXkgPSBNYXRoLm1pbihcbiAgICAgIE1BWElNVU1fUkVGUkVTSF9ERUxBWSxcbiAgICAgICh0b2tlblZhbGlkaXR5U2Vjb25kcyAtIHRoaXMucmVmcmVzaFRva2VuTGVld2F5U2Vjb25kcykgKiAxMDAwLFxuICAgICk7XG4gICAgaWYgKGRlbGF5IDw9IDApIHtcbiAgICAgIC8vIFJlZmV0Y2ggaW1tZWRpYXRlbHksIGJ1dCB0aGlzIG1pZ2h0IGJlIGR1ZSB0byBjb25maWd1cmluZyBhIGByZWZyZXNoVG9rZW5MZWV3YXlTZWNvbmRzYFxuICAgICAgLy8gdGhhdCBpcyB0b28gbGFyZ2UgY29tcGFyZWQgdG8gdGhlIHRva2VuJ3MgYWN0dWFsIGxpZmV0aW1lLlxuICAgICAgdGhpcy5sb2dnZXIud2FybihcbiAgICAgICAgYFJlZmV0Y2hpbmcgYXV0aCB0b2tlbiBpbW1lZGlhdGVseSwgY29uZmlndXJlZCBsZWV3YXkgJHt0aGlzLnJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHN9cyBpcyBsYXJnZXIgdGhhbiB0aGUgdG9rZW4ncyBsaWZldGltZSAke3Rva2VuVmFsaWRpdHlTZWNvbmRzfXNgLFxuICAgICAgKTtcbiAgICAgIGRlbGF5ID0gMDtcbiAgICB9XG4gICAgY29uc3QgcmVmZXRjaFRva2VuVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFwicnVubmluZyBzY2hlZHVsZWQgdG9rZW4gcmVmZXRjaFwiKTtcbiAgICAgIHZvaWQgdGhpcy5yZWZldGNoVG9rZW4oKTtcbiAgICB9LCBkZWxheSk7XG4gICAgdGhpcy5zZXRBdXRoU3RhdGUoe1xuICAgICAgc3RhdGU6IFwid2FpdGluZ0ZvclNjaGVkdWxlZFJlZmV0Y2hcIixcbiAgICAgIHJlZmV0Y2hUb2tlblRpbWVvdXRJZCxcbiAgICAgIGNvbmZpZzogdGhpcy5hdXRoU3RhdGUuY29uZmlnLFxuICAgIH0pO1xuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICBgc2NoZWR1bGVkIHByZWVtcHRpdmUgYXV0aCB0b2tlbiByZWZldGNoaW5nIGluICR7ZGVsYXl9bXNgLFxuICAgICk7XG4gIH1cblxuICAvLyBQcm90ZWN0cyBhZ2FpbnN0IHNpbXVsdGFuZW91cyBjYWxscyB0byBgc2V0Q29uZmlnYFxuICAvLyB3aGlsZSB3ZSdyZSBmZXRjaGluZyBhIHRva2VuXG4gIHByaXZhdGUgYXN5bmMgZmV0Y2hUb2tlbkFuZEd1YXJkQWdhaW5zdFJhY2UoXG4gICAgZmV0Y2hUb2tlbjogQXV0aFRva2VuRmV0Y2hlcixcbiAgICBmZXRjaEFyZ3M6IHtcbiAgICAgIGZvcmNlUmVmcmVzaFRva2VuOiBib29sZWFuO1xuICAgIH0sXG4gICkge1xuICAgIGNvbnN0IG9yaWdpbmFsQ29uZmlnVmVyc2lvbiA9ICsrdGhpcy5jb25maWdWZXJzaW9uO1xuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXG4gICAgICBgZmV0Y2hpbmcgdG9rZW4gd2l0aCBjb25maWcgdmVyc2lvbiAke29yaWdpbmFsQ29uZmlnVmVyc2lvbn1gLFxuICAgICk7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBmZXRjaFRva2VuKGZldGNoQXJncyk7XG4gICAgaWYgKHRoaXMuY29uZmlnVmVyc2lvbiAhPT0gb3JpZ2luYWxDb25maWdWZXJzaW9uKSB7XG4gICAgICAvLyBUaGlzIGlzIGEgc3RhbGUgY29uZmlnXG4gICAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgICBgc3RhbGUgY29uZmlnIHZlcnNpb24sIGV4cGVjdGVkICR7b3JpZ2luYWxDb25maWdWZXJzaW9ufSwgZ290ICR7dGhpcy5jb25maWdWZXJzaW9ufWAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHsgaXNGcm9tT3V0ZGF0ZWRDb25maWc6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNGcm9tT3V0ZGF0ZWRDb25maWc6IGZhbHNlLCB2YWx1ZTogdG9rZW4gfTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgdGhpcy5yZXNldEF1dGhTdGF0ZSgpO1xuICAgIC8vIEJ1bXAgdGhpcyBpbiBjYXNlIHdlIGFyZSBtaWQtdG9rZW4tZmV0Y2ggd2hlbiB3ZSBnZXQgc3RvcHBlZFxuICAgIHRoaXMuY29uZmlnVmVyc2lvbisrO1xuICAgIHRoaXMuX2xvZ1ZlcmJvc2UoYGNvbmZpZyB2ZXJzaW9uIGJ1bXBlZCB0byAke3RoaXMuY29uZmlnVmVyc2lvbn1gKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0QW5kUmVwb3J0QXV0aEZhaWxlZChcbiAgICBvbkF1dGhDaGFuZ2U6IChhdXRoZW50aWNhdGVkOiBib29sZWFuKSA9PiB2b2lkLFxuICApIHtcbiAgICBvbkF1dGhDaGFuZ2UoZmFsc2UpO1xuICAgIHRoaXMucmVzZXRBdXRoU3RhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRBdXRoU3RhdGUoKSB7XG4gICAgdGhpcy5zZXRBdXRoU3RhdGUoeyBzdGF0ZTogXCJub0F1dGhcIiB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0QXV0aFN0YXRlKG5ld0F1dGg6IEF1dGhTdGF0ZSkge1xuICAgIGNvbnN0IGF1dGhTdGF0ZUZvckxvZyA9XG4gICAgICBuZXdBdXRoLnN0YXRlID09PSBcIndhaXRpbmdGb3JTZXJ2ZXJDb25maXJtYXRpb25PZkZyZXNoVG9rZW5cIlxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGhhZEF1dGg6IG5ld0F1dGguaGFkQXV0aCxcbiAgICAgICAgICAgIHN0YXRlOiBuZXdBdXRoLnN0YXRlLFxuICAgICAgICAgICAgdG9rZW46IGAuLi4ke25ld0F1dGgudG9rZW4uc2xpY2UoLTcpfWAsXG4gICAgICAgICAgfVxuICAgICAgICA6IHsgc3RhdGU6IG5ld0F1dGguc3RhdGUgfTtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgYHNldHRpbmcgYXV0aCBzdGF0ZSB0byAke0pTT04uc3RyaW5naWZ5KGF1dGhTdGF0ZUZvckxvZyl9YCxcbiAgICApO1xuICAgIHN3aXRjaCAobmV3QXV0aC5zdGF0ZSkge1xuICAgICAgY2FzZSBcIndhaXRpbmdGb3JTY2hlZHVsZWRSZWZldGNoXCI6XG4gICAgICBjYXNlIFwibm90UmVmZXRjaGluZ1wiOlxuICAgICAgY2FzZSBcIm5vQXV0aFwiOlxuICAgICAgICB0aGlzLnRva2VuQ29uZmlybWF0aW9uQXR0ZW1wdHMgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ3YWl0aW5nRm9yU2VydmVyQ29uZmlybWF0aW9uT2ZGcmVzaFRva2VuXCI6XG4gICAgICBjYXNlIFwid2FpdGluZ0ZvclNlcnZlckNvbmZpcm1hdGlvbk9mQ2FjaGVkVG9rZW5cIjpcbiAgICAgIGNhc2UgXCJpbml0aWFsUmVmZXRjaFwiOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgbmV3QXV0aCBzYXRpc2ZpZXMgbmV2ZXI7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmF1dGhTdGF0ZS5zdGF0ZSA9PT0gXCJ3YWl0aW5nRm9yU2NoZWR1bGVkUmVmZXRjaFwiKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5hdXRoU3RhdGUucmVmZXRjaFRva2VuVGltZW91dElkKTtcblxuICAgICAgLy8gVGhlIHdhaXRpbmdGb3JTY2hlZHVsZWRSZWZldGNoIHN0YXRlIGlzIHRoZSBtb3N0IHF1aWVzY2VkIGF1dGhlZCBzdGF0ZS5cbiAgICAgIC8vIExldCB0aGUgc3luY1N0YXRlIGtub3cgdGhhdCBhdXRoIGlzIGluIGEgZ29vZCBzdGF0ZSwgc28gaXQgY2FuIHJlc2V0IGZhaWx1cmUgYmFja29mZnNcbiAgICAgIHRoaXMuc3luY1N0YXRlLm1hcmtBdXRoQ29tcGxldGlvbigpO1xuICAgIH1cbiAgICB0aGlzLmF1dGhTdGF0ZSA9IG5ld0F1dGg7XG4gIH1cblxuICBwcml2YXRlIGRlY29kZVRva2VuKHRva2VuOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGp3dERlY29kZSh0b2tlbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgICAgYEVycm9yIGRlY29kaW5nIHRva2VuOiAke2UgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwifWAsXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbG9nVmVyYm9zZShtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmxvZ2dlci5sb2dWZXJib3NlKGAke21lc3NhZ2V9IFt2JHt0aGlzLmNvbmZpZ1ZlcnNpb259XWApO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/authentication_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/client.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseConvexClient: () => (/* binding */ BaseConvexClient)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n/* harmony import */ var _local_state_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./local_state.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/local_state.js\");\n/* harmony import */ var _request_manager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./request_manager.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/request_manager.js\");\n/* harmony import */ var _optimistic_updates_impl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./optimistic_updates_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js\");\n/* harmony import */ var _remote_query_set_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./remote_query_set.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/remote_query_set.js\");\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n/* harmony import */ var _web_socket_manager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./web_socket_manager.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js\");\n/* harmony import */ var _session_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./session.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/session.js\");\n/* harmony import */ var _authentication_manager_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./authentication_manager.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/authentication_manager.js\");\n/* harmony import */ var _metrics_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./metrics.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/metrics.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../vendor/jwt-decode/index.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass BaseConvexClient {\n    /**\n   * @param address - The url of your Convex deployment, often provided\n   * by an environment variable. E.g. `https://small-mouse-123.convex.cloud`.\n   * @param onTransition - A callback receiving an array of query tokens\n   * corresponding to query results that have changed -- additional handlers\n   * can be added via `addOnTransitionHandler`.\n   * @param options - See {@link BaseConvexClientOptions} for a full description.\n   */ constructor(address, onTransition, options){\n        __publicField(this, \"address\");\n        __publicField(this, \"state\");\n        __publicField(this, \"requestManager\");\n        __publicField(this, \"webSocketManager\");\n        __publicField(this, \"authenticationManager\");\n        __publicField(this, \"remoteQuerySet\");\n        __publicField(this, \"optimisticQueryResults\");\n        __publicField(this, \"_transitionHandlerCounter\", 0);\n        __publicField(this, \"_nextRequestId\");\n        __publicField(this, \"_onTransitionFns\", /* @__PURE__ */ new Map());\n        __publicField(this, \"_sessionId\");\n        __publicField(this, \"firstMessageReceived\", false);\n        __publicField(this, \"debug\");\n        __publicField(this, \"logger\");\n        __publicField(this, \"maxObservedTimestamp\");\n        __publicField(this, \"connectionStateSubscribers\", /* @__PURE__ */ new Map());\n        __publicField(this, \"nextConnectionStateSubscriberId\", 0);\n        __publicField(this, \"_lastPublishedConnectionState\");\n        /**\n     * Call this whenever the connection state may have changed in a way that could\n     * require publishing it. Schedules a possibly update.\n     */ __publicField(this, \"markConnectionStateDirty\", ()=>{\n            void Promise.resolve().then(()=>{\n                const curConnectionState = this.connectionState();\n                if (JSON.stringify(curConnectionState) !== JSON.stringify(this._lastPublishedConnectionState)) {\n                    this._lastPublishedConnectionState = curConnectionState;\n                    for (const cb of this.connectionStateSubscribers.values()){\n                        cb(curConnectionState);\n                    }\n                }\n            });\n        });\n        // Instance property so that `mark()` doesn't need to be called as a method.\n        __publicField(this, \"mark\", (name)=>{\n            if (this.debug) {\n                (0,_metrics_js__WEBPACK_IMPORTED_MODULE_11__.mark)(name, this.sessionId);\n            }\n        });\n        if (typeof address === \"object\") {\n            throw new Error(\"Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.\");\n        }\n        if (options?.skipConvexDeploymentUrlCheck !== true) {\n            (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.validateDeploymentUrl)(address);\n        }\n        options = {\n            ...options\n        };\n        const authRefreshTokenLeewaySeconds = options.authRefreshTokenLeewaySeconds ?? 2;\n        let webSocketConstructor = options.webSocketConstructor;\n        if (!webSocketConstructor && typeof WebSocket === \"undefined\") {\n            throw new Error(\"No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient\");\n        }\n        webSocketConstructor = webSocketConstructor || WebSocket;\n        this.debug = options.reportDebugInfoToConvex ?? false;\n        this.address = address;\n        this.logger = options.logger === false ? (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.instantiateNoopLogger)({\n            verbose: options.verbose ?? false\n        }) : options.logger !== true && options.logger ? options.logger : (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.instantiateDefaultLogger)({\n            verbose: options.verbose ?? false\n        });\n        const i = address.search(\"://\");\n        if (i === -1) {\n            throw new Error(\"Provided address was not an absolute URL.\");\n        }\n        const origin = address.substring(i + 3);\n        const protocol = address.substring(0, i);\n        let wsProtocol;\n        if (protocol === \"http\") {\n            wsProtocol = \"ws\";\n        } else if (protocol === \"https\") {\n            wsProtocol = \"wss\";\n        } else {\n            throw new Error(`Unknown parent protocol ${protocol}`);\n        }\n        const wsUri = `${wsProtocol}://${origin}/api/${_index_js__WEBPACK_IMPORTED_MODULE_0__.version}/sync`;\n        this.state = new _local_state_js__WEBPACK_IMPORTED_MODULE_3__.LocalSyncState();\n        this.remoteQuerySet = new _remote_query_set_js__WEBPACK_IMPORTED_MODULE_6__.RemoteQuerySet((queryId)=>this.state.queryPath(queryId), this.logger);\n        this.requestManager = new _request_manager_js__WEBPACK_IMPORTED_MODULE_4__.RequestManager(this.logger, this.markConnectionStateDirty);\n        const pauseSocket = ()=>{\n            this.webSocketManager.pause();\n            this.state.pause();\n        };\n        this.authenticationManager = new _authentication_manager_js__WEBPACK_IMPORTED_MODULE_10__.AuthenticationManager(this.state, {\n            authenticate: (token)=>{\n                const message = this.state.setAuth(token);\n                this.webSocketManager.sendMessage(message);\n                return message.baseVersion;\n            },\n            stopSocket: ()=>this.webSocketManager.stop(),\n            tryRestartSocket: ()=>this.webSocketManager.tryRestart(),\n            pauseSocket,\n            resumeSocket: ()=>this.webSocketManager.resume(),\n            clearAuth: ()=>{\n                this.clearAuth();\n            }\n        }, {\n            logger: this.logger,\n            refreshTokenLeewaySeconds: authRefreshTokenLeewaySeconds\n        });\n        this.optimisticQueryResults = new _optimistic_updates_impl_js__WEBPACK_IMPORTED_MODULE_5__.OptimisticQueryResults();\n        this.addOnTransitionHandler((transition)=>{\n            onTransition(transition.queries.map((q)=>q.token));\n        });\n        this._nextRequestId = 0;\n        this._sessionId = (0,_session_js__WEBPACK_IMPORTED_MODULE_9__.newSessionId)();\n        const { unsavedChangesWarning } = options;\n        if (true) {\n            if (unsavedChangesWarning === true) {\n                throw new Error(\"unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.\");\n            }\n        } else {}\n        this.webSocketManager = new _web_socket_manager_js__WEBPACK_IMPORTED_MODULE_8__.WebSocketManager(wsUri, {\n            onOpen: (reconnectMetadata)=>{\n                this.mark(\"convexWebSocketOpen\");\n                this.webSocketManager.sendMessage({\n                    ...reconnectMetadata,\n                    type: \"Connect\",\n                    sessionId: this._sessionId,\n                    maxObservedTimestamp: this.maxObservedTimestamp\n                });\n                const oldRemoteQueryResults = new Set(this.remoteQuerySet.remoteQueryResults().keys());\n                this.remoteQuerySet = new _remote_query_set_js__WEBPACK_IMPORTED_MODULE_6__.RemoteQuerySet((queryId)=>this.state.queryPath(queryId), this.logger);\n                const [querySetModification, authModification] = this.state.restart(oldRemoteQueryResults);\n                if (authModification) {\n                    this.webSocketManager.sendMessage(authModification);\n                }\n                this.webSocketManager.sendMessage(querySetModification);\n                for (const message of this.requestManager.restart()){\n                    this.webSocketManager.sendMessage(message);\n                }\n            },\n            onResume: ()=>{\n                const [querySetModification, authModification] = this.state.resume();\n                if (authModification) {\n                    this.webSocketManager.sendMessage(authModification);\n                }\n                if (querySetModification) {\n                    this.webSocketManager.sendMessage(querySetModification);\n                }\n                for (const message of this.requestManager.resume()){\n                    this.webSocketManager.sendMessage(message);\n                }\n            },\n            onMessage: (serverMessage)=>{\n                if (!this.firstMessageReceived) {\n                    this.firstMessageReceived = true;\n                    this.mark(\"convexFirstMessageReceived\");\n                    this.reportMarks();\n                }\n                switch(serverMessage.type){\n                    case \"Transition\":\n                        {\n                            this.observedTimestamp(serverMessage.endVersion.ts);\n                            this.authenticationManager.onTransition(serverMessage);\n                            this.remoteQuerySet.transition(serverMessage);\n                            this.state.transition(serverMessage);\n                            const completedRequests = this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());\n                            this.notifyOnQueryResultChanges(completedRequests);\n                            break;\n                        }\n                    case \"MutationResponse\":\n                        {\n                            if (serverMessage.success) {\n                                this.observedTimestamp(serverMessage.ts);\n                            }\n                            const completedMutationInfo = this.requestManager.onResponse(serverMessage);\n                            if (completedMutationInfo !== null) {\n                                this.notifyOnQueryResultChanges(/* @__PURE__ */ new Map([\n                                    [\n                                        completedMutationInfo.requestId,\n                                        completedMutationInfo.result\n                                    ]\n                                ]));\n                            }\n                            break;\n                        }\n                    case \"ActionResponse\":\n                        {\n                            this.requestManager.onResponse(serverMessage);\n                            break;\n                        }\n                    case \"AuthError\":\n                        {\n                            this.authenticationManager.onAuthError(serverMessage);\n                            break;\n                        }\n                    case \"FatalError\":\n                        {\n                            const error = (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.logFatalError)(this.logger, serverMessage.error);\n                            void this.webSocketManager.terminate();\n                            throw error;\n                        }\n                    default:\n                        {\n                            serverMessage;\n                        }\n                }\n                return {\n                    hasSyncedPastLastReconnect: this.hasSyncedPastLastReconnect()\n                };\n            },\n            onServerDisconnectError: options.onServerDisconnectError\n        }, webSocketConstructor, this.logger, this.markConnectionStateDirty, this.debug);\n        this.mark(\"convexClientConstructed\");\n        if (options.expectAuth) {\n            pauseSocket();\n        }\n    }\n    /**\n   * Return true if there is outstanding work from prior to the time of the most recent restart.\n   * This indicates that the client has not proven itself to have gotten past the issue that\n   * potentially led to the restart. Use this to influence when to reset backoff after a failure.\n   */ hasSyncedPastLastReconnect() {\n        const hasSyncedPastLastReconnect = this.requestManager.hasSyncedPastLastReconnect() || this.state.hasSyncedPastLastReconnect();\n        return hasSyncedPastLastReconnect;\n    }\n    observedTimestamp(observedTs) {\n        if (this.maxObservedTimestamp === void 0 || this.maxObservedTimestamp.lessThanOrEqual(observedTs)) {\n            this.maxObservedTimestamp = observedTs;\n        }\n    }\n    getMaxObservedTimestamp() {\n        return this.maxObservedTimestamp;\n    }\n    /**\n   * Compute the current query results based on the remoteQuerySet and the\n   * current optimistic updates and call `onTransition` for all the changed\n   * queries.\n   *\n   * @param completedMutations - A set of mutation IDs whose optimistic updates\n   * are no longer needed.\n   */ notifyOnQueryResultChanges(completedRequests) {\n        const remoteQueryResults = this.remoteQuerySet.remoteQueryResults();\n        const queryTokenToValue = /* @__PURE__ */ new Map();\n        for (const [queryId, result] of remoteQueryResults){\n            const queryToken = this.state.queryToken(queryId);\n            if (queryToken !== null) {\n                const query = {\n                    result,\n                    udfPath: this.state.queryPath(queryId),\n                    args: this.state.queryArgs(queryId)\n                };\n                queryTokenToValue.set(queryToken, query);\n            }\n        }\n        const changedQueryTokens = this.optimisticQueryResults.ingestQueryResultsFromServer(queryTokenToValue, new Set(completedRequests.keys()));\n        this.handleTransition({\n            queries: changedQueryTokens.map((token)=>{\n                const optimisticResult = this.optimisticQueryResults.rawQueryResult(token);\n                return {\n                    token,\n                    modification: {\n                        kind: \"Updated\",\n                        result: optimisticResult\n                    }\n                };\n            }),\n            reflectedMutations: Array.from(completedRequests).map(([requestId, result])=>({\n                    requestId,\n                    result\n                })),\n            timestamp: this.remoteQuerySet.timestamp()\n        });\n    }\n    handleTransition(transition) {\n        for (const fn of this._onTransitionFns.values()){\n            fn(transition);\n        }\n    }\n    /**\n   * Add a handler that will be called on a transition.\n   *\n   * Any external side effects (e.g. setting React state) should be handled here.\n   *\n   * @param fn\n   *\n   * @returns\n   */ addOnTransitionHandler(fn) {\n        const id = this._transitionHandlerCounter++;\n        this._onTransitionFns.set(id, fn);\n        return ()=>this._onTransitionFns.delete(id);\n    }\n    /**\n   * Get the current JWT auth token and decoded claims.\n   */ getCurrentAuthClaims() {\n        const authToken = this.state.getAuth();\n        let decoded = {};\n        if (authToken && authToken.tokenType === \"User\") {\n            try {\n                decoded = authToken ? (0,_vendor_jwt_decode_index_js__WEBPACK_IMPORTED_MODULE_14__.jwtDecode)(authToken.value) : {};\n            } catch  {\n                decoded = {};\n            }\n        } else {\n            return void 0;\n        }\n        return {\n            token: authToken.value,\n            decoded\n        };\n    }\n    /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   * `fetchToken` will be called automatically again if a token expires.\n   * `fetchToken` should return `null` if the token cannot be retrieved, for example\n   * when the user's rights were permanently revoked.\n   * @param fetchToken - an async function returning the JWT-encoded OpenID Connect Identity Token\n   * @param onChange - a callback that will be called when the authentication status changes\n   */ setAuth(fetchToken, onChange) {\n        void this.authenticationManager.setConfig(fetchToken, onChange);\n    }\n    hasAuth() {\n        return this.state.hasAuth();\n    }\n    /** @internal */ setAdminAuth(value, fakeUserIdentity) {\n        const message = this.state.setAdminAuth(value, fakeUserIdentity);\n        this.webSocketManager.sendMessage(message);\n    }\n    clearAuth() {\n        const message = this.state.clearAuth();\n        this.webSocketManager.sendMessage(message);\n    }\n    /**\n     * Subscribe to a query function.\n     *\n     * Whenever this query's result changes, the `onTransition` callback\n     * passed into the constructor will be called.\n     *\n     * @param name - The name of the query.\n     * @param args - An arguments object for the query. If this is omitted, the\n     * arguments will be `{}`.\n     * @param options - A {@link SubscribeOptions} options object for this query.\n  \n     * @returns An object containing a {@link QueryToken} corresponding to this\n     * query and an `unsubscribe` callback.\n     */ subscribe(name, args, options) {\n        const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n        const { modification, queryToken, unsubscribe } = this.state.subscribe(name, argsObject, options?.journal, options?.componentPath);\n        if (modification !== null) {\n            this.webSocketManager.sendMessage(modification);\n        }\n        return {\n            queryToken,\n            unsubscribe: ()=>{\n                const modification2 = unsubscribe();\n                if (modification2) {\n                    this.webSocketManager.sendMessage(modification2);\n                }\n            }\n        };\n    }\n    /**\n   * A query result based only on the current, local state.\n   *\n   * The only way this will return a value is if we're already subscribed to the\n   * query or its value has been set optimistically.\n   */ localQueryResult(udfPath, args) {\n        const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n        const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__.serializePathAndArgs)(udfPath, argsObject);\n        return this.optimisticQueryResults.queryResult(queryToken);\n    }\n    /**\n   * Get query result by query token based on current, local state\n   *\n   * The only way this will return a value is if we're already subscribed to the\n   * query or its value has been set optimistically.\n   *\n   * @internal\n   */ localQueryResultByToken(queryToken) {\n        return this.optimisticQueryResults.queryResult(queryToken);\n    }\n    /**\n   * Whether local query result is available for a token.\n   *\n   * This method does not throw if the result is an error.\n   *\n   * @internal\n   */ hasLocalQueryResultByToken(queryToken) {\n        return this.optimisticQueryResults.hasQueryResult(queryToken);\n    }\n    /**\n   * @internal\n   */ localQueryLogs(udfPath, args) {\n        const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n        const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__.serializePathAndArgs)(udfPath, argsObject);\n        return this.optimisticQueryResults.queryLogs(queryToken);\n    }\n    /**\n   * Retrieve the current {@link QueryJournal} for this query function.\n   *\n   * If we have not yet received a result for this query, this will be `undefined`.\n   *\n   * @param name - The name of the query.\n   * @param args - The arguments object for this query.\n   * @returns The query's {@link QueryJournal} or `undefined`.\n   */ queryJournal(name, args) {\n        const argsObject = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n        const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_7__.serializePathAndArgs)(name, argsObject);\n        return this.state.queryJournal(queryToken);\n    }\n    /**\n   * Get the current {@link ConnectionState} between the client and the Convex\n   * backend.\n   *\n   * @returns The {@link ConnectionState} with the Convex backend.\n   */ connectionState() {\n        const wsConnectionState = this.webSocketManager.connectionState();\n        return {\n            hasInflightRequests: this.requestManager.hasInflightRequests(),\n            isWebSocketConnected: wsConnectionState.isConnected,\n            hasEverConnected: wsConnectionState.hasEverConnected,\n            connectionCount: wsConnectionState.connectionCount,\n            connectionRetries: wsConnectionState.connectionRetries,\n            timeOfOldestInflightRequest: this.requestManager.timeOfOldestInflightRequest(),\n            inflightMutations: this.requestManager.inflightMutations(),\n            inflightActions: this.requestManager.inflightActions()\n        };\n    }\n    /**\n   * Subscribe to the {@link ConnectionState} between the client and the Convex\n   * backend, calling a callback each time it changes.\n   *\n   * Subscribed callbacks will be called when any part of ConnectionState changes.\n   * ConnectionState may grow in future versions (e.g. to provide a array of\n   * inflight requests) in which case callbacks would be called more frequently.\n   *\n   * @returns An unsubscribe function to stop listening.\n   */ subscribeToConnectionState(cb) {\n        const id = this.nextConnectionStateSubscriberId++;\n        this.connectionStateSubscribers.set(id, cb);\n        return ()=>{\n            this.connectionStateSubscribers.delete(id);\n        };\n    }\n    /**\n     * Execute a mutation function.\n     *\n     * @param name - The name of the mutation.\n     * @param args - An arguments object for the mutation. If this is omitted,\n     * the arguments will be `{}`.\n     * @param options - A {@link MutationOptions} options object for this mutation.\n  \n     * @returns - A promise of the mutation's result.\n     */ async mutation(name, args, options) {\n        const result = await this.mutationInternal(name, args, options);\n        if (!result.success) {\n            if (result.errorData !== void 0) {\n                throw (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.forwardData)(result, new _values_errors_js__WEBPACK_IMPORTED_MODULE_13__.ConvexError((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"mutation\", name, result)));\n            }\n            throw new Error((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"mutation\", name, result));\n        }\n        return result.value;\n    }\n    /**\n   * @internal\n   */ async mutationInternal(udfPath, args, options, componentPath) {\n        const { mutationPromise } = this.enqueueMutation(udfPath, args, options, componentPath);\n        return mutationPromise;\n    }\n    /**\n   * @internal\n   */ enqueueMutation(udfPath, args, options, componentPath) {\n        const mutationArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n        this.tryReportLongDisconnect();\n        const requestId = this.nextRequestId;\n        this._nextRequestId++;\n        if (options !== void 0) {\n            const optimisticUpdate = options.optimisticUpdate;\n            if (optimisticUpdate !== void 0) {\n                const wrappedUpdate = (localQueryStore)=>{\n                    const result = optimisticUpdate(localQueryStore, mutationArgs);\n                    if (result instanceof Promise) {\n                        this.logger.warn(\"Optimistic update handler returned a Promise. Optimistic updates should be synchronous.\");\n                    }\n                };\n                const changedQueryTokens = this.optimisticQueryResults.applyOptimisticUpdate(wrappedUpdate, requestId);\n                const changedQueries = changedQueryTokens.map((token)=>{\n                    const localResult = this.localQueryResultByToken(token);\n                    return {\n                        token,\n                        modification: {\n                            kind: \"Updated\",\n                            result: localResult === void 0 ? void 0 : {\n                                success: true,\n                                value: localResult,\n                                logLines: []\n                            }\n                        }\n                    };\n                });\n                this.handleTransition({\n                    queries: changedQueries,\n                    reflectedMutations: [],\n                    timestamp: this.remoteQuerySet.timestamp()\n                });\n            }\n        }\n        const message = {\n            type: \"Mutation\",\n            requestId,\n            udfPath,\n            componentPath,\n            args: [\n                (0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(mutationArgs)\n            ]\n        };\n        const mightBeSent = this.webSocketManager.sendMessage(message);\n        const mutationPromise = this.requestManager.request(message, mightBeSent);\n        return {\n            requestId,\n            mutationPromise\n        };\n    }\n    /**\n   * Execute an action function.\n   *\n   * @param name - The name of the action.\n   * @param args - An arguments object for the action. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the action's result.\n   */ async action(name, args) {\n        const result = await this.actionInternal(name, args);\n        if (!result.success) {\n            if (result.errorData !== void 0) {\n                throw (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.forwardData)(result, new _values_errors_js__WEBPACK_IMPORTED_MODULE_13__.ConvexError((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"action\", name, result)));\n            }\n            throw new Error((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"action\", name, result));\n        }\n        return result.value;\n    }\n    /**\n   * @internal\n   */ async actionInternal(udfPath, args, componentPath) {\n        const actionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_12__.parseArgs)(args);\n        const requestId = this.nextRequestId;\n        this._nextRequestId++;\n        this.tryReportLongDisconnect();\n        const message = {\n            type: \"Action\",\n            requestId,\n            udfPath,\n            componentPath,\n            args: [\n                (0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(actionArgs)\n            ]\n        };\n        const mightBeSent = this.webSocketManager.sendMessage(message);\n        return this.requestManager.request(message, mightBeSent);\n    }\n    /**\n   * Close any network handles associated with this client and stop all subscriptions.\n   *\n   * Call this method when you're done with an {@link BaseConvexClient} to\n   * dispose of its sockets and resources.\n   *\n   * @returns A `Promise` fulfilled when the connection has been completely closed.\n   */ async close() {\n        this.authenticationManager.stop();\n        return this.webSocketManager.terminate();\n    }\n    /**\n   * Return the address for this client, useful for creating a new client.\n   *\n   * Not guaranteed to match the address with which this client was constructed:\n   * it may be canonicalized.\n   */ get url() {\n        return this.address;\n    }\n    /**\n   * @internal\n   */ get nextRequestId() {\n        return this._nextRequestId;\n    }\n    /**\n   * @internal\n   */ get sessionId() {\n        return this._sessionId;\n    }\n    /**\n   * Reports performance marks to the server. This should only be called when\n   * we have a functional websocket.\n   */ reportMarks() {\n        if (this.debug) {\n            const report = (0,_metrics_js__WEBPACK_IMPORTED_MODULE_11__.getMarksReport)(this.sessionId);\n            this.webSocketManager.sendMessage({\n                type: \"Event\",\n                eventType: \"ClientConnect\",\n                event: report\n            });\n        }\n    }\n    tryReportLongDisconnect() {\n        if (!this.debug) {\n            return;\n        }\n        const timeOfOldestRequest = this.connectionState().timeOfOldestInflightRequest;\n        if (timeOfOldestRequest === null || Date.now() - timeOfOldestRequest.getTime() <= 60 * 1e3) {\n            return;\n        }\n        const endpoint = `${this.address}/api/debug_event`;\n        fetch(endpoint, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Convex-Client\": `npm-${_index_js__WEBPACK_IMPORTED_MODULE_0__.version}`\n            },\n            body: JSON.stringify({\n                event: \"LongWebsocketDisconnect\"\n            })\n        }).then((response)=>{\n            if (!response.ok) {\n                this.logger.warn(\"Analytics request failed with response:\", response.body);\n            }\n        }).catch((error)=>{\n            this.logger.warn(\"Analytics response failed with error:\", error);\n        });\n    }\n} //# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVN3QjtBQUNZO0FBUTdCO0FBQ3dCO0FBQ0E7QUFReEI7QUFXd0I7QUFDa0I7QUFDRztBQUN2QjtBQUt0QjtBQUV3QztBQUNFO0FBQ3JCO0FBQ0Y7QUFnTW5CLE1BQU0saUJBQWlCO0lBQUE7Ozs7Ozs7R0FBQSxHQWdDNUIsWUFDRSxTQUNBLGNBQ0EsUUFDQTtRQW5DRixvQkFBaUI7UUFDakIsb0JBQWlCO1FBQ2pCLG9CQUFpQjtRQUNqQixvQkFBaUI7UUFDakIsb0JBQWlCO1FBQ2pCLG9CQUFRO1FBQ1Isb0JBQWlCO1FBQ2pCLG9CQUFRLDZCQUE0QjtRQUNwQyxvQkFBUTtRQUNSLG9CQUFRLG9CQUNOLG9CQUFJLElBQUk7UUFDVixvQkFBaUI7UUFDakIsb0JBQVEsd0JBQXVCO1FBQy9CLG9CQUFpQjtRQUNqQixvQkFBaUI7UUFDakIsb0JBQVE7UUFDUixvQkFBUSw4QkFBNkIsb0JBQUksSUFHdkM7UUFDRixvQkFBUSxtQ0FBMEM7UUFDbEQsb0JBQVE7UUFnaUJSOzs7S0FBQSx1QkFBUSw0QkFBMkI7WUFDakMsS0FBSyxRQUFRLFFBQVEsRUFBRSxLQUFLO2dCQUMxQixNQUFNLHFCQUFxQixLQUFLLGdCQUFnQjtnQkFDaEQsSUFDRSxLQUFLLFVBQVUsa0JBQWtCLE1BQ2pDLEtBQUssVUFBVSxLQUFLLDZCQUE2QixHQUNqRDtvQkFDQSxLQUFLLGdDQUFnQztvQkFDckMsV0FBVyxNQUFNLEtBQUssMkJBQTJCLE9BQU8sRUFBRzt3QkFHekQsR0FBRyxrQkFBa0I7b0JBQ3ZCO2dCQUNGO1lBQ0YsQ0FBQztRQUNIO1FBc09BO1FBQUEsb0JBQVEsUUFBTyxDQUFDO1lBQ2QsSUFBSSxLQUFLLE9BQU87Z0JBQ2Qsa0RBQUksQ0FBQyxNQUFNLEtBQUssU0FBUztZQUMzQjtRQUNGO1FBMXdCRSxJ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SUFBSSxDQUFDLFNBQVMsSUFBSTtnQkFDaEIsS0FBSyxPQUFPLEtBQ1YsMkNBQ0EsU0FBUztZQUViO1FBQ0YsQ0FBQyxFQUNBLE1BQU0sQ0FBQztZQUNOLEtBQUssT0FBTyxLQUFLLHlDQUF5QyxLQUFLO1FBQ2pFLENBQUM7SUFDTDtBQUNGIiwic291cmNlcyI6WyIvc3JjL2Jyb3dzZXIvc3luYy9jbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCYXNlQ29udmV4Q2xpZW50IHNob3VsZCBub3QgYmUgdXNlZCBkaXJlY3RseSBhbmQgZG9lcyBub3QgcHJvdmlkZSBhIHN0YWJsZVxuICogaW50ZXJmYWNlLiBJdCBpcyBhIFwiQmFzZVwiIGNsaWVudCBub3QgYmVjYXVzZSBpdCBleHBlY3RzIHRvIGJlIGluaGVyaXRlZCBmcm9tXG4gKiBidXQgYmVjYXVzZSBvdGhlciBjbGllbnRzIGFyZSBidWlsdCBhcm91bmQgaXQuXG4gKlxuICogQmFzZUNvbnZleENsaWVudCBpcyBub3QgQ29udmV4IEZ1bmN0aW9uIHR5cGUtYXdhcmU6IGl0IGRlYWxzXG4gKiB3aXRoIHF1ZXJpZXMgYXMgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIFZhbHVlLCBub3QgdGhlIHNwZWNpZmljIHZhbHVlLlxuICogVXNlIGEgaGlnaGVyLWxldmVsIGxpYnJhcnkgdG8gZ2V0IHR5cGVzLlxuICovXG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjb252ZXhUb0pzb24sIFZhbHVlIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgY3JlYXRlSHlicmlkRXJyb3JTdGFja3RyYWNlLFxuICBmb3J3YXJkRGF0YSxcbiAgaW5zdGFudGlhdGVEZWZhdWx0TG9nZ2VyLFxuICBpbnN0YW50aWF0ZU5vb3BMb2dnZXIsXG4gIGxvZ0ZhdGFsRXJyb3IsXG4gIExvZ2dlcixcbn0gZnJvbSBcIi4uL2xvZ2dpbmcuanNcIjtcbmltcG9ydCB7IExvY2FsU3luY1N0YXRlIH0gZnJvbSBcIi4vbG9jYWxfc3RhdGUuanNcIjtcbmltcG9ydCB7IFJlcXVlc3RNYW5hZ2VyIH0gZnJvbSBcIi4vcmVxdWVzdF9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQge1xuICBPcHRpbWlzdGljTG9jYWxTdG9yZSxcbiAgT3B0aW1pc3RpY1VwZGF0ZSxcbn0gZnJvbSBcIi4vb3B0aW1pc3RpY191cGRhdGVzLmpzXCI7XG5pbXBvcnQge1xuICBPcHRpbWlzdGljUXVlcnlSZXN1bHRzLFxuICBRdWVyeVJlc3VsdHNNYXAsXG59IGZyb20gXCIuL29wdGltaXN0aWNfdXBkYXRlc19pbXBsLmpzXCI7XG5pbXBvcnQge1xuICBBY3Rpb25SZXF1ZXN0LFxuICBNdXRhdGlvblJlcXVlc3QsXG4gIFF1ZXJ5SWQsXG4gIFF1ZXJ5Sm91cm5hbCxcbiAgU2VydmVyTWVzc2FnZSxcbiAgUmVxdWVzdElkLFxuICBUUyxcbiAgVXNlcklkZW50aXR5QXR0cmlidXRlcyxcbn0gZnJvbSBcIi4vcHJvdG9jb2wuanNcIjtcbmltcG9ydCB7IFJlbW90ZVF1ZXJ5U2V0IH0gZnJvbSBcIi4vcmVtb3RlX3F1ZXJ5X3NldC5qc1wiO1xuaW1wb3J0IHsgUXVlcnlUb2tlbiwgc2VyaWFsaXplUGF0aEFuZEFyZ3MgfSBmcm9tIFwiLi91ZGZfcGF0aF91dGlscy5qc1wiO1xuaW1wb3J0IHsgUmVjb25uZWN0TWV0YWRhdGEsIFdlYlNvY2tldE1hbmFnZXIgfSBmcm9tIFwiLi93ZWJfc29ja2V0X21hbmFnZXIuanNcIjtcbmltcG9ydCB7IG5ld1Nlc3Npb25JZCB9IGZyb20gXCIuL3Nlc3Npb24uanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVzdWx0IH0gZnJvbSBcIi4vZnVuY3Rpb25fcmVzdWx0LmpzXCI7XG5pbXBvcnQge1xuICBBdXRoZW50aWNhdGlvbk1hbmFnZXIsXG4gIEF1dGhUb2tlbkZldGNoZXIsXG59IGZyb20gXCIuL2F1dGhlbnRpY2F0aW9uX21hbmFnZXIuanNcIjtcbmV4cG9ydCB7IHR5cGUgQXV0aFRva2VuRmV0Y2hlciB9IGZyb20gXCIuL2F1dGhlbnRpY2F0aW9uX21hbmFnZXIuanNcIjtcbmltcG9ydCB7IGdldE1hcmtzUmVwb3J0LCBtYXJrLCBNYXJrTmFtZSB9IGZyb20gXCIuL21ldHJpY3MuanNcIjtcbmltcG9ydCB7IHBhcnNlQXJncywgdmFsaWRhdGVEZXBsb3ltZW50VXJsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQ29udmV4RXJyb3IgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgand0RGVjb2RlIH0gZnJvbSBcIi4uLy4uL3ZlbmRvci9qd3QtZGVjb2RlL2luZGV4LmpzXCI7XG5cbi8qKlxuICogT3B0aW9ucyBmb3Ige0BsaW5rIEJhc2VDb252ZXhDbGllbnR9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCYXNlQ29udmV4Q2xpZW50T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByb21wdCB0aGUgdXNlciBpZiB0aGV5IGhhdmUgdW5zYXZlZCBjaGFuZ2VzIHBlbmRpbmdcbiAgICogd2hlbiBuYXZpZ2F0aW5nIGF3YXkgb3IgY2xvc2luZyBhIHdlYiBwYWdlLlxuICAgKlxuICAgKiBUaGlzIGlzIG9ubHkgcG9zc2libGUgd2hlbiB0aGUgYHdpbmRvd2Agb2JqZWN0IGV4aXN0cywgaS5lLiBpbiBhIGJyb3dzZXIuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYCBpbiBicm93c2Vycy5cbiAgICovXG4gIHVuc2F2ZWRDaGFuZ2VzV2FybmluZz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgYW4gYWx0ZXJuYXRlXG4gICAqIFtXZWJTb2NrZXRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XZWJTb2NrZXQpXG4gICAqIGNvbnN0cnVjdG9yIHRvIHVzZSBmb3IgY2xpZW50IGNvbW11bmljYXRpb24gd2l0aCB0aGUgQ29udmV4IGNsb3VkLlxuICAgKiBUaGUgZGVmYXVsdCBiZWhhdmlvciBpcyB0byB1c2UgYFdlYlNvY2tldGAgZnJvbSB0aGUgZ2xvYmFsIGVudmlyb25tZW50LlxuICAgKi9cbiAgd2ViU29ja2V0Q29uc3RydWN0b3I/OiB0eXBlb2YgV2ViU29ja2V0O1xuICAvKipcbiAgICogQWRkcyBhZGRpdGlvbmFsIGxvZ2dpbmcgZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICovXG4gIHZlcmJvc2U/OiBib29sZWFuO1xuICAvKipcbiAgICogQSBsb2dnZXIsIGB0cnVlYCwgb3IgYGZhbHNlYC4gSWYgbm90IHByb3ZpZGVkIG9yIGB0cnVlYCwgbG9ncyB0byB0aGUgY29uc29sZS5cbiAgICogSWYgYGZhbHNlYCwgbG9ncyBhcmUgbm90IHByaW50ZWQgYW55d2hlcmUuXG4gICAqXG4gICAqIFlvdSBjYW4gY29uc3RydWN0IHlvdXIgb3duIGxvZ2dlciB0byBjdXN0b21pemUgbG9nZ2luZyB0byBsb2cgZWxzZXdoZXJlLlxuICAgKiBBIGxvZ2dlciBpcyBhbiBvYmplY3Qgd2l0aCA0IG1ldGhvZHM6IGxvZygpLCB3YXJuKCksIGVycm9yKCksIGFuZCBsb2dWZXJib3NlKCkuXG4gICAqIFRoZXNlIG1ldGhvZHMgY2FuIHJlY2VpdmUgbXVsdGlwbGUgYXJndW1lbnRzIG9mIGFueSB0eXBlcywgbGlrZSBjb25zb2xlLmxvZygpLlxuICAgKi9cbiAgbG9nZ2VyPzogTG9nZ2VyIHwgYm9vbGVhbjtcbiAgLyoqXG4gICAqIFNlbmRzIGFkZGl0aW9uYWwgbWV0cmljcyB0byBDb252ZXggZm9yIGRlYnVnZ2luZyBwdXJwb3Nlcy5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICovXG4gIHJlcG9ydERlYnVnSW5mb1RvQ29udmV4PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoaXMgQVBJIGlzIGV4cGVyaW1lbnRhbDogaXQgbWF5IGNoYW5nZSBvciBkaXNhcHBlYXIuXG4gICAqXG4gICAqIEEgZnVuY3Rpb24gdG8gY2FsbCBvbiByZWNlaXZpbmcgYWJub3JtYWwgV2ViU29ja2V0IGNsb3NlIG1lc3NhZ2VzIGZyb20gdGhlXG4gICAqIGNvbm5lY3RlZCBDb252ZXggZGVwbG95bWVudC4gVGhlIGNvbnRlbnQgb2YgdGhlc2UgbWVzc2FnZXMgaXMgbm90IHN0YWJsZSxcbiAgICogaXQgaXMgYW4gaW1wbGVtZW50YXRpb24gZGV0YWlsIHRoYXQgbWF5IGNoYW5nZS5cbiAgICpcbiAgICogQ29uc2lkZXIgdGhpcyBBUEkgYW4gb2JzZXJ2YWJpbGl0eSBzdG9wZ2FwIHVudGlsIGhpZ2hlciBsZXZlbCBjb2RlcyB3aXRoXG4gICAqIHJlY29tbWVuZGF0aW9ucyBvbiB3aGF0IHRvIGRvIGFyZSBhdmFpbGFibGUsIHdoaWNoIGNvdWxkIGJlIGEgbW9yZSBzdGFibGVcbiAgICogaW50ZXJmYWNlIGluc3RlYWQgb2YgYHN0cmluZ2AuXG4gICAqXG4gICAqIENoZWNrIGBjb25uZWN0aW9uU3RhdGVgIGZvciBtb3JlIHF1YW50aXRhdGl2ZSBtZXRyaWNzIGFib3V0IGNvbm5lY3Rpb24gc3RhdHVzLlxuICAgKi9cbiAgb25TZXJ2ZXJEaXNjb25uZWN0RXJyb3I/OiAobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2tpcCB2YWxpZGF0aW5nIHRoYXQgdGhlIENvbnZleCBkZXBsb3ltZW50IFVSTCBsb29rcyBsaWtlXG4gICAqIGBodHRwczovL2hhcHB5LWFuaW1hbC0xMjMuY29udmV4LmNsb3VkYCBvciBsb2NhbGhvc3QuXG4gICAqXG4gICAqIFRoaXMgY2FuIGJlIHVzZWZ1bCBpZiBydW5uaW5nIGEgc2VsZi1ob3N0ZWQgQ29udmV4IGJhY2tlbmQgdGhhdCB1c2VzIGEgZGlmZmVyZW50XG4gICAqIFVSTC5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYFxuICAgKi9cbiAgc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjaz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJZiB1c2luZyBhdXRoLCB0aGUgbnVtYmVyIG9mIHNlY29uZHMgYmVmb3JlIGEgdG9rZW4gZXhwaXJlcyB0aGF0IHdlIHNob3VsZCByZWZyZXNoIGl0LlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgMmAuXG4gICAqL1xuICBhdXRoUmVmcmVzaFRva2VuTGVld2F5U2Vjb25kcz86IG51bWJlcjtcbiAgLyoqXG4gICAqIFRoaXMgQVBJIGlzIGV4cGVyaW1lbnRhbDogaXQgbWF5IGNoYW5nZSBvciBkaXNhcHBlYXIuXG4gICAqXG4gICAqIFdoZXRoZXIgcXVlcnksIG11dGF0aW9uLCBhbmQgYWN0aW9uIHJlcXVlc3RzIHNob3VsZCBiZSBoZWxkIGJhY2tcbiAgICogdW50aWwgdGhlIGZpcnN0IGF1dGggdG9rZW4gY2FuIGJlIHNlbnQuXG4gICAqXG4gICAqIE9wdGluZyBpbnRvIHRoaXMgYmVoYXZpb3Igd29ya3Mgd2VsbCBmb3IgcGFnZXMgdGhhdCBzaG91bGRcbiAgICogb25seSBiZSB2aWV3ZWQgYnkgYXV0aGVudGljYXRlZCBjbGllbnRzLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBmYWxzZSwgbm90IHdhaXRpbmcgZm9yIGFuIGF1dGggdG9rZW4uXG4gICAqL1xuICBleHBlY3RBdXRoPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBTdGF0ZSBkZXNjcmliaW5nIHRoZSBjbGllbnQncyBjb25uZWN0aW9uIHdpdGggdGhlIENvbnZleCBiYWNrZW5kLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgQ29ubmVjdGlvblN0YXRlID0ge1xuICBoYXNJbmZsaWdodFJlcXVlc3RzOiBib29sZWFuO1xuICBpc1dlYlNvY2tldENvbm5lY3RlZDogYm9vbGVhbjtcbiAgdGltZU9mT2xkZXN0SW5mbGlnaHRSZXF1ZXN0OiBEYXRlIHwgbnVsbDtcbiAgLyoqXG4gICAqIFRydWUgaWYgdGhlIGNsaWVudCBoYXMgZXZlciBvcGVuZWQgYSBXZWJTb2NrZXQgdG8gdGhlIFwicmVhZHlcIiBzdGF0ZS5cbiAgICovXG4gIGhhc0V2ZXJDb25uZWN0ZWQ6IGJvb2xlYW47XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRoaXMgY2xpZW50IGhhcyBjb25uZWN0ZWQgdG8gdGhlIENvbnZleCBiYWNrZW5kLlxuICAgKlxuICAgKiBBIG51bWJlciBvZiB0aGluZ3MgY2FuIGNhdXNlIHRoZSBjbGllbnQgdG8gcmVjb25uZWN0IC0tIHNlcnZlciBlcnJvcnMsXG4gICAqIGJhZCBpbnRlcm5ldCwgYXV0aCBleHBpcmluZy4gQnV0IHRoaXMgbnVtYmVyIGJlaW5nIGhpZ2ggaXMgYW4gaW5kaWNhdGlvblxuICAgKiB0aGF0IHRoZSBjbGllbnQgaXMgaGF2aW5nIHRyb3VibGUga2VlcGluZyBhIHN0YWJsZSBjb25uZWN0aW9uLlxuICAgKi9cbiAgY29ubmVjdGlvbkNvdW50OiBudW1iZXI7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRoaXMgY2xpZW50IGhhcyB0cmllZCAoYW5kIGZhaWxlZCkgdG8gY29ubmVjdCB0byB0aGUgQ29udmV4IGJhY2tlbmQuXG4gICAqL1xuICBjb25uZWN0aW9uUmV0cmllczogbnVtYmVyO1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBtdXRhdGlvbnMgY3VycmVudGx5IGluIGZsaWdodC5cbiAgICovXG4gIGluZmxpZ2h0TXV0YXRpb25zOiBudW1iZXI7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGFjdGlvbnMgY3VycmVudGx5IGluIGZsaWdodC5cbiAgICovXG4gIGluZmxpZ2h0QWN0aW9uczogbnVtYmVyO1xufTtcblxuLyoqXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgQmFzZUNvbnZleENsaWVudC5zdWJzY3JpYmV9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpYmVPcHRpb25zIHtcbiAgLyoqXG4gICAqIEFuIChvcHRpb25hbCkgam91cm5hbCBwcm9kdWNlZCBmcm9tIGEgcHJldmlvdXMgZXhlY3V0aW9uIG9mIHRoaXMgcXVlcnlcbiAgICogZnVuY3Rpb24uXG4gICAqXG4gICAqIElmIHRoZXJlIGlzIGFuIGV4aXN0aW5nIHN1YnNjcmlwdGlvbiB0byBhIHF1ZXJ5IGZ1bmN0aW9uIHdpdGggdGhlIHNhbWVcbiAgICogbmFtZSBhbmQgYXJndW1lbnRzLCB0aGlzIGpvdXJuYWwgd2lsbCBoYXZlIG5vIGVmZmVjdC5cbiAgICovXG4gIGpvdXJuYWw/OiBRdWVyeUpvdXJuYWw7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29tcG9uZW50UGF0aD86IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgQmFzZUNvbnZleENsaWVudC5tdXRhdGlvbn0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE11dGF0aW9uT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBbiBvcHRpbWlzdGljIHVwZGF0ZSB0byBhcHBseSBhbG9uZyB3aXRoIHRoaXMgbXV0YXRpb24uXG4gICAqXG4gICAqIEFuIG9wdGltaXN0aWMgdXBkYXRlIGxvY2FsbHkgdXBkYXRlcyBxdWVyaWVzIHdoaWxlIGEgbXV0YXRpb24gaXMgcGVuZGluZy5cbiAgICogT25jZSB0aGUgbXV0YXRpb24gY29tcGxldGVzLCB0aGUgdXBkYXRlIHdpbGwgYmUgcm9sbGVkIGJhY2suXG4gICAqL1xuICBvcHRpbWlzdGljVXBkYXRlPzogT3B0aW1pc3RpY1VwZGF0ZTxhbnk+IHwgdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFR5cGUgZGVzY3JpYmluZyB1cGRhdGVzIHRvIGEgcXVlcnkgd2l0aGluIGEgYFRyYW5zaXRpb25gLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgUXVlcnlNb2RpZmljYXRpb24gPVxuICAvLyBgdW5kZWZpbmVkYCBnZW5lcmFsbHkgY29tZXMgZnJvbSBhbiBvcHRpbWlzdGljIHVwZGF0ZSBzZXR0aW5nIHRoZSBxdWVyeSB0byBiZSBsb2FkaW5nXG4gIHsga2luZDogXCJVcGRhdGVkXCI7IHJlc3VsdDogRnVuY3Rpb25SZXN1bHQgfCB1bmRlZmluZWQgfSB8IHsga2luZDogXCJSZW1vdmVkXCIgfTtcblxuLyoqXG4gKiBPYmplY3QgZGVzY3JpYmluZyBhIHRyYW5zaXRpb24gcGFzc2VkIGludG8gdGhlIGBvblRyYW5zaXRpb25gIGhhbmRsZXIuXG4gKlxuICogVGhlc2UgY2FuIGJlIGZyb20gcmVjZWl2aW5nIGEgdHJhbnNpdGlvbiBmcm9tIHRoZSBzZXJ2ZXIsIG9yIGZyb20gYXBwbHlpbmcgYW5cbiAqIG9wdGltaXN0aWMgdXBkYXRlIGxvY2FsbHkuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBUcmFuc2l0aW9uID0ge1xuICBxdWVyaWVzOiBBcnJheTx7IHRva2VuOiBRdWVyeVRva2VuOyBtb2RpZmljYXRpb246IFF1ZXJ5TW9kaWZpY2F0aW9uIH0+O1xuICByZWZsZWN0ZWRNdXRhdGlvbnM6IEFycmF5PHsgcmVxdWVzdElkOiBSZXF1ZXN0SWQ7IHJlc3VsdDogRnVuY3Rpb25SZXN1bHQgfT47XG4gIHRpbWVzdGFtcDogVFM7XG59O1xuXG4vKipcbiAqIExvdy1sZXZlbCBjbGllbnQgZm9yIGRpcmVjdGx5IGludGVncmF0aW5nIHN0YXRlIG1hbmFnZW1lbnQgbGlicmFyaWVzXG4gKiB3aXRoIENvbnZleC5cbiAqXG4gKiBNb3N0IGRldmVsb3BlcnMgc2hvdWxkIHVzZSBoaWdoZXIgbGV2ZWwgY2xpZW50cywgbGlrZVxuICogdGhlIHtAbGluayBDb252ZXhIdHRwQ2xpZW50fSBvciB0aGUgUmVhY3QgaG9vayBiYXNlZCB7QGxpbmsgcmVhY3QuQ29udmV4UmVhY3RDbGllbnR9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDb252ZXhDbGllbnQge1xuICBwcml2YXRlIHJlYWRvbmx5IGFkZHJlc3M6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBzdGF0ZTogTG9jYWxTeW5jU3RhdGU7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVxdWVzdE1hbmFnZXI6IFJlcXVlc3RNYW5hZ2VyO1xuICBwcml2YXRlIHJlYWRvbmx5IHdlYlNvY2tldE1hbmFnZXI6IFdlYlNvY2tldE1hbmFnZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgYXV0aGVudGljYXRpb25NYW5hZ2VyOiBBdXRoZW50aWNhdGlvbk1hbmFnZXI7XG4gIHByaXZhdGUgcmVtb3RlUXVlcnlTZXQ6IFJlbW90ZVF1ZXJ5U2V0O1xuICBwcml2YXRlIHJlYWRvbmx5IG9wdGltaXN0aWNRdWVyeVJlc3VsdHM6IE9wdGltaXN0aWNRdWVyeVJlc3VsdHM7XG4gIHByaXZhdGUgX3RyYW5zaXRpb25IYW5kbGVyQ291bnRlciA9IDA7XG4gIHByaXZhdGUgX25leHRSZXF1ZXN0SWQ6IFJlcXVlc3RJZDtcbiAgcHJpdmF0ZSBfb25UcmFuc2l0aW9uRm5zOiBNYXA8bnVtYmVyLCAodHJhbnNpdGlvbjogVHJhbnNpdGlvbikgPT4gdm9pZD4gPVxuICAgIG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSByZWFkb25seSBfc2Vzc2lvbklkOiBzdHJpbmc7XG4gIHByaXZhdGUgZmlyc3RNZXNzYWdlUmVjZWl2ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSByZWFkb25seSBkZWJ1ZzogYm9vbGVhbjtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcjtcbiAgcHJpdmF0ZSBtYXhPYnNlcnZlZFRpbWVzdGFtcDogVFMgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgY29ubmVjdGlvblN0YXRlU3Vic2NyaWJlcnMgPSBuZXcgTWFwPFxuICAgIG51bWJlcixcbiAgICAoY29ubmVjdGlvblN0YXRlOiBDb25uZWN0aW9uU3RhdGUpID0+IHZvaWRcbiAgPigpO1xuICBwcml2YXRlIG5leHRDb25uZWN0aW9uU3RhdGVTdWJzY3JpYmVySWQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2xhc3RQdWJsaXNoZWRDb25uZWN0aW9uU3RhdGU6IENvbm5lY3Rpb25TdGF0ZSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQHBhcmFtIGFkZHJlc3MgLSBUaGUgdXJsIG9mIHlvdXIgQ29udmV4IGRlcGxveW1lbnQsIG9mdGVuIHByb3ZpZGVkXG4gICAqIGJ5IGFuIGVudmlyb25tZW50IHZhcmlhYmxlLiBFLmcuIGBodHRwczovL3NtYWxsLW1vdXNlLTEyMy5jb252ZXguY2xvdWRgLlxuICAgKiBAcGFyYW0gb25UcmFuc2l0aW9uIC0gQSBjYWxsYmFjayByZWNlaXZpbmcgYW4gYXJyYXkgb2YgcXVlcnkgdG9rZW5zXG4gICAqIGNvcnJlc3BvbmRpbmcgdG8gcXVlcnkgcmVzdWx0cyB0aGF0IGhhdmUgY2hhbmdlZCAtLSBhZGRpdGlvbmFsIGhhbmRsZXJzXG4gICAqIGNhbiBiZSBhZGRlZCB2aWEgYGFkZE9uVHJhbnNpdGlvbkhhbmRsZXJgLlxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNlZSB7QGxpbmsgQmFzZUNvbnZleENsaWVudE9wdGlvbnN9IGZvciBhIGZ1bGwgZGVzY3JpcHRpb24uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBhZGRyZXNzOiBzdHJpbmcsXG4gICAgb25UcmFuc2l0aW9uOiAodXBkYXRlZFF1ZXJpZXM6IFF1ZXJ5VG9rZW5bXSkgPT4gdm9pZCxcbiAgICBvcHRpb25zPzogQmFzZUNvbnZleENsaWVudE9wdGlvbnMsXG4gICkge1xuICAgIGlmICh0eXBlb2YgYWRkcmVzcyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlBhc3NpbmcgYSBDbGllbnRDb25maWcgb2JqZWN0IGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuIFBhc3MgdGhlIFVSTCBvZiB0aGUgQ29udmV4IGRlcGxveW1lbnQgYXMgYSBzdHJpbmcgZGlyZWN0bHkuXCIsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucz8uc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVjayAhPT0gdHJ1ZSkge1xuICAgICAgdmFsaWRhdGVEZXBsb3ltZW50VXJsKGFkZHJlc3MpO1xuICAgIH1cbiAgICBvcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgY29uc3QgYXV0aFJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHMgPVxuICAgICAgb3B0aW9ucy5hdXRoUmVmcmVzaFRva2VuTGVld2F5U2Vjb25kcyA/PyAyO1xuICAgIGxldCB3ZWJTb2NrZXRDb25zdHJ1Y3RvciA9IG9wdGlvbnMud2ViU29ja2V0Q29uc3RydWN0b3I7XG4gICAgaWYgKCF3ZWJTb2NrZXRDb25zdHJ1Y3RvciAmJiB0eXBlb2YgV2ViU29ja2V0ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiTm8gV2ViU29ja2V0IGdsb2JhbCB2YXJpYWJsZSBkZWZpbmVkISBUbyB1c2UgQ29udmV4IGluIGFuIGVudmlyb25tZW50IHdpdGhvdXQgV2ViU29ja2V0IHRyeSB0aGUgSFRUUCBjbGllbnQ6IGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L2FwaS9jbGFzc2VzL2Jyb3dzZXIuQ29udmV4SHR0cENsaWVudFwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgd2ViU29ja2V0Q29uc3RydWN0b3IgPSB3ZWJTb2NrZXRDb25zdHJ1Y3RvciB8fCBXZWJTb2NrZXQ7XG4gICAgdGhpcy5kZWJ1ZyA9IG9wdGlvbnMucmVwb3J0RGVidWdJbmZvVG9Db252ZXggPz8gZmFsc2U7XG4gICAgdGhpcy5hZGRyZXNzID0gYWRkcmVzcztcbiAgICB0aGlzLmxvZ2dlciA9XG4gICAgICBvcHRpb25zLmxvZ2dlciA9PT0gZmFsc2VcbiAgICAgICAgPyBpbnN0YW50aWF0ZU5vb3BMb2dnZXIoeyB2ZXJib3NlOiBvcHRpb25zLnZlcmJvc2UgPz8gZmFsc2UgfSlcbiAgICAgICAgOiBvcHRpb25zLmxvZ2dlciAhPT0gdHJ1ZSAmJiBvcHRpb25zLmxvZ2dlclxuICAgICAgICAgID8gb3B0aW9ucy5sb2dnZXJcbiAgICAgICAgICA6IGluc3RhbnRpYXRlRGVmYXVsdExvZ2dlcih7IHZlcmJvc2U6IG9wdGlvbnMudmVyYm9zZSA/PyBmYWxzZSB9KTtcbiAgICAvLyBTdWJzdGl0dXRlIGh0dHAocykgd2l0aCB3cyhzKVxuICAgIGNvbnN0IGkgPSBhZGRyZXNzLnNlYXJjaChcIjovL1wiKTtcbiAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3ZpZGVkIGFkZHJlc3Mgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwuXCIpO1xuICAgIH1cbiAgICBjb25zdCBvcmlnaW4gPSBhZGRyZXNzLnN1YnN0cmluZyhpICsgMyk7IC8vIG1vdmUgcGFzdCB0aGUgZG91YmxlIHNsYXNoXG4gICAgY29uc3QgcHJvdG9jb2wgPSBhZGRyZXNzLnN1YnN0cmluZygwLCBpKTtcbiAgICBsZXQgd3NQcm90b2NvbDtcbiAgICBpZiAocHJvdG9jb2wgPT09IFwiaHR0cFwiKSB7XG4gICAgICB3c1Byb3RvY29sID0gXCJ3c1wiO1xuICAgIH0gZWxzZSBpZiAocHJvdG9jb2wgPT09IFwiaHR0cHNcIikge1xuICAgICAgd3NQcm90b2NvbCA9IFwid3NzXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJlbnQgcHJvdG9jb2wgJHtwcm90b2NvbH1gKTtcbiAgICB9XG4gICAgY29uc3Qgd3NVcmkgPSBgJHt3c1Byb3RvY29sfTovLyR7b3JpZ2lufS9hcGkvJHt2ZXJzaW9ufS9zeW5jYDtcblxuICAgIHRoaXMuc3RhdGUgPSBuZXcgTG9jYWxTeW5jU3RhdGUoKTtcbiAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0ID0gbmV3IFJlbW90ZVF1ZXJ5U2V0KFxuICAgICAgKHF1ZXJ5SWQpID0+IHRoaXMuc3RhdGUucXVlcnlQYXRoKHF1ZXJ5SWQpLFxuICAgICAgdGhpcy5sb2dnZXIsXG4gICAgKTtcbiAgICB0aGlzLnJlcXVlc3RNYW5hZ2VyID0gbmV3IFJlcXVlc3RNYW5hZ2VyKFxuICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICB0aGlzLm1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSxcbiAgICApO1xuXG4gICAgLy8gVGhpcyBpcyBhIGNhbGxiYWNrIGZvciBBdXRoZW50aWNhdGlvbk1hbmFnZXIgKHdoaWNoIGNhbid0IGNhbGxcbiAgICAvLyB0aGlzIHN5bmNocm9ub3VzbHksIHRoZSBjYWxsYmFjayB3b3VsZG4ndCB3b3JrKSBzbyB0aGUgaW5pdGlhbFxuICAgIC8vIHBhdXNlIGZvciBleHBlY3RBdXRoIHdlIGNhbGwgaXQgYXQgdGhlIGVuZCBvZiB0aGlzIGNvbnN0cnVjdG9yLlxuICAgIGNvbnN0IHBhdXNlU29ja2V0ID0gKCkgPT4ge1xuICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnBhdXNlKCk7XG4gICAgICB0aGlzLnN0YXRlLnBhdXNlKCk7XG4gICAgfTtcbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uTWFuYWdlciA9IG5ldyBBdXRoZW50aWNhdGlvbk1hbmFnZXIoXG4gICAgICB0aGlzLnN0YXRlLFxuICAgICAge1xuICAgICAgICBhdXRoZW50aWNhdGU6ICh0b2tlbikgPT4ge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnN0YXRlLnNldEF1dGgodG9rZW4pO1xuICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICByZXR1cm4gbWVzc2FnZS5iYXNlVmVyc2lvbjtcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcFNvY2tldDogKCkgPT4gdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnN0b3AoKSxcbiAgICAgICAgdHJ5UmVzdGFydFNvY2tldDogKCkgPT4gdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnRyeVJlc3RhcnQoKSxcbiAgICAgICAgcGF1c2VTb2NrZXQsXG4gICAgICAgIHJlc3VtZVNvY2tldDogKCkgPT4gdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnJlc3VtZSgpLFxuICAgICAgICBjbGVhckF1dGg6ICgpID0+IHtcbiAgICAgICAgICB0aGlzLmNsZWFyQXV0aCgpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbG9nZ2VyOiB0aGlzLmxvZ2dlcixcbiAgICAgICAgcmVmcmVzaFRva2VuTGVld2F5U2Vjb25kczogYXV0aFJlZnJlc2hUb2tlbkxlZXdheVNlY29uZHMsXG4gICAgICB9LFxuICAgICk7XG4gICAgdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzID0gbmV3IE9wdGltaXN0aWNRdWVyeVJlc3VsdHMoKTtcbiAgICB0aGlzLmFkZE9uVHJhbnNpdGlvbkhhbmRsZXIoKHRyYW5zaXRpb24pID0+IHtcbiAgICAgIG9uVHJhbnNpdGlvbih0cmFuc2l0aW9uLnF1ZXJpZXMubWFwKChxKSA9PiBxLnRva2VuKSk7XG4gICAgfSk7XG4gICAgdGhpcy5fbmV4dFJlcXVlc3RJZCA9IDA7XG4gICAgdGhpcy5fc2Vzc2lvbklkID0gbmV3U2Vzc2lvbklkKCk7XG5cbiAgICBjb25zdCB7IHVuc2F2ZWRDaGFuZ2VzV2FybmluZyB9ID0gb3B0aW9ucztcbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgICB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCJcbiAgICApIHtcbiAgICAgIGlmICh1bnNhdmVkQ2hhbmdlc1dhcm5pbmcgPT09IHRydWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwidW5zYXZlZENoYW5nZXNXYXJuaW5nIHJlcXVlc3RlZCwgYnV0IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIG5vdCBmb3VuZCEgUmVtb3ZlIHt1bnNhdmVkQ2hhbmdlc1dhcm5pbmc6IHRydWV9IGZyb20gQ29udmV4IGNsaWVudCBvcHRpb25zLlwiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodW5zYXZlZENoYW5nZXNXYXJuaW5nICE9PSBmYWxzZSkge1xuICAgICAgLy8gTGlzdGVuIGZvciB0YWIgY2xvc2UgZXZlbnRzIGFuZCBub3RpZnkgdGhlIHVzZXIgb24gdW5zYXZlZCBjaGFuZ2VzLlxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgKGUpID0+IHtcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdE1hbmFnZXIuaGFzSW5jb21wbGV0ZVJlcXVlc3RzKCkpIHtcbiAgICAgICAgICAvLyBUaGVyZSBhcmUgMyBkaWZmZXJlbnQgd2F5cyB0byB0cmlnZ2VyIHRoaXMgcG9wIHVwIHNvIGp1c3QgdHJ5IGFsbCBvZlxuICAgICAgICAgIC8vIHRoZW0uXG5cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgLy8gVGhpcyBjb25maXJtYXRpb24gbWVzc2FnZSBkb2Vzbid0IGFjdHVhbGx5IGFwcGVhciBpbiBtb3N0IG1vZGVyblxuICAgICAgICAgIC8vIGJyb3dzZXJzIGJ1dCB3ZSB0cmllZC5cbiAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25NZXNzYWdlID1cbiAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGxlYXZlPyBZb3VyIGNoYW5nZXMgbWF5IG5vdCBiZSBzYXZlZC5cIjtcbiAgICAgICAgICAvLyBSZWNvbW1lbmRlZCBtZXRob2QgZm9yIGxlZ2FjeSAoSUUpIGJyb3dzZXJzLlxuICAgICAgICAgIC8vIGNhc3RzIHRvIGF2b2lkIGRlcHJlY2F0aW9uIG5vdGljZXNcbiAgICAgICAgICAoKGUgfHwgKHdpbmRvdyBhcyBhbnkpLmV2ZW50KSBhcyBhbnkpLnJldHVyblZhbHVlID1cbiAgICAgICAgICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2U7XG4gICAgICAgICAgcmV0dXJuIGNvbmZpcm1hdGlvbk1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMud2ViU29ja2V0TWFuYWdlciA9IG5ldyBXZWJTb2NrZXRNYW5hZ2VyKFxuICAgICAgd3NVcmksXG4gICAgICB7XG4gICAgICAgIG9uT3BlbjogKHJlY29ubmVjdE1ldGFkYXRhOiBSZWNvbm5lY3RNZXRhZGF0YSkgPT4ge1xuICAgICAgICAgIC8vIFdlIGhhdmUgYSBuZXcgV2ViU29ja2V0IVxuICAgICAgICAgIHRoaXMubWFyayhcImNvbnZleFdlYlNvY2tldE9wZW5cIik7XG4gICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIC4uLnJlY29ubmVjdE1ldGFkYXRhLFxuICAgICAgICAgICAgdHlwZTogXCJDb25uZWN0XCIsXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuX3Nlc3Npb25JZCxcbiAgICAgICAgICAgIG1heE9ic2VydmVkVGltZXN0YW1wOiB0aGlzLm1heE9ic2VydmVkVGltZXN0YW1wLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gVGhyb3cgb3V0IG91ciByZW1vdGUgcXVlcnksIHJlaXNzdWUgcXVlcmllc1xuICAgICAgICAgIC8vIGFuZCBvdXRzdGFuZGluZyBtdXRhdGlvbnMsIGFuZCByZWF1dGhlbnRpY2F0ZS5cbiAgICAgICAgICBjb25zdCBvbGRSZW1vdGVRdWVyeVJlc3VsdHMgPSBuZXcgU2V0KFxuICAgICAgICAgICAgdGhpcy5yZW1vdGVRdWVyeVNldC5yZW1vdGVRdWVyeVJlc3VsdHMoKS5rZXlzKCksXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0ID0gbmV3IFJlbW90ZVF1ZXJ5U2V0KFxuICAgICAgICAgICAgKHF1ZXJ5SWQpID0+IHRoaXMuc3RhdGUucXVlcnlQYXRoKHF1ZXJ5SWQpLFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBbcXVlcnlTZXRNb2RpZmljYXRpb24sIGF1dGhNb2RpZmljYXRpb25dID0gdGhpcy5zdGF0ZS5yZXN0YXJ0KFxuICAgICAgICAgICAgb2xkUmVtb3RlUXVlcnlSZXN1bHRzLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGF1dGhNb2RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShhdXRoTW9kaWZpY2F0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKHF1ZXJ5U2V0TW9kaWZpY2F0aW9uKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgdGhpcy5yZXF1ZXN0TWFuYWdlci5yZXN0YXJ0KCkpIHtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uUmVzdW1lOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgW3F1ZXJ5U2V0TW9kaWZpY2F0aW9uLCBhdXRoTW9kaWZpY2F0aW9uXSA9IHRoaXMuc3RhdGUucmVzdW1lKCk7XG4gICAgICAgICAgaWYgKGF1dGhNb2RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShhdXRoTW9kaWZpY2F0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHF1ZXJ5U2V0TW9kaWZpY2F0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLndlYlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UocXVlcnlTZXRNb2RpZmljYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgdGhpcy5yZXF1ZXN0TWFuYWdlci5yZXN1bWUoKSkge1xuICAgICAgICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25NZXNzYWdlOiAoc2VydmVyTWVzc2FnZTogU2VydmVyTWVzc2FnZSkgPT4ge1xuICAgICAgICAgIC8vIE1ldHJpY3MgZXZlbnRzIGdyb3cgbGluZWFybHkgd2l0aCByZWNvbm5lY3Rpb24gYXR0ZW1wdHMgc28gdGhpc1xuICAgICAgICAgIC8vIGNvbmRpdGlvbmFsIHByZXZlbnRzIG5eMiBtZXRyaWNzIHJlcG9ydGluZy5cbiAgICAgICAgICBpZiAoIXRoaXMuZmlyc3RNZXNzYWdlUmVjZWl2ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RNZXNzYWdlUmVjZWl2ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5tYXJrKFwiY29udmV4Rmlyc3RNZXNzYWdlUmVjZWl2ZWRcIik7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydE1hcmtzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN3aXRjaCAoc2VydmVyTWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiVHJhbnNpdGlvblwiOiB7XG4gICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZWRUaW1lc3RhbXAoc2VydmVyTWVzc2FnZS5lbmRWZXJzaW9uLnRzKTtcbiAgICAgICAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbk1hbmFnZXIub25UcmFuc2l0aW9uKHNlcnZlck1lc3NhZ2UpO1xuICAgICAgICAgICAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0LnRyYW5zaXRpb24oc2VydmVyTWVzc2FnZSk7XG4gICAgICAgICAgICAgIHRoaXMuc3RhdGUudHJhbnNpdGlvbihzZXJ2ZXJNZXNzYWdlKTtcbiAgICAgICAgICAgICAgY29uc3QgY29tcGxldGVkUmVxdWVzdHMgPSB0aGlzLnJlcXVlc3RNYW5hZ2VyLnJlbW92ZUNvbXBsZXRlZChcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0LnRpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLm5vdGlmeU9uUXVlcnlSZXN1bHRDaGFuZ2VzKGNvbXBsZXRlZFJlcXVlc3RzKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiTXV0YXRpb25SZXNwb25zZVwiOiB7XG4gICAgICAgICAgICAgIGlmIChzZXJ2ZXJNZXNzYWdlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVkVGltZXN0YW1wKHNlcnZlck1lc3NhZ2UudHMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZE11dGF0aW9uSW5mbyA9XG4gICAgICAgICAgICAgICAgdGhpcy5yZXF1ZXN0TWFuYWdlci5vblJlc3BvbnNlKHNlcnZlck1lc3NhZ2UpO1xuICAgICAgICAgICAgICBpZiAoY29tcGxldGVkTXV0YXRpb25JbmZvICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlPblF1ZXJ5UmVzdWx0Q2hhbmdlcyhcbiAgICAgICAgICAgICAgICAgIG5ldyBNYXAoW1xuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkTXV0YXRpb25JbmZvLnJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWRNdXRhdGlvbkluZm8ucmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJBY3Rpb25SZXNwb25zZVwiOiB7XG4gICAgICAgICAgICAgIHRoaXMucmVxdWVzdE1hbmFnZXIub25SZXNwb25zZShzZXJ2ZXJNZXNzYWdlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiQXV0aEVycm9yXCI6IHtcbiAgICAgICAgICAgICAgdGhpcy5hdXRoZW50aWNhdGlvbk1hbmFnZXIub25BdXRoRXJyb3Ioc2VydmVyTWVzc2FnZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBcIkZhdGFsRXJyb3JcIjoge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGxvZ0ZhdGFsRXJyb3IodGhpcy5sb2dnZXIsIHNlcnZlck1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICAgICAgICB2b2lkIHRoaXMud2ViU29ja2V0TWFuYWdlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgIHNlcnZlck1lc3NhZ2Ugc2F0aXNmaWVzIG5ldmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYXNTeW5jZWRQYXN0TGFzdFJlY29ubmVjdDogdGhpcy5oYXNTeW5jZWRQYXN0TGFzdFJlY29ubmVjdCgpLFxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIG9uU2VydmVyRGlzY29ubmVjdEVycm9yOiBvcHRpb25zLm9uU2VydmVyRGlzY29ubmVjdEVycm9yLFxuICAgICAgfSxcbiAgICAgIHdlYlNvY2tldENvbnN0cnVjdG9yLFxuICAgICAgdGhpcy5sb2dnZXIsXG4gICAgICB0aGlzLm1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSxcbiAgICAgIHRoaXMuZGVidWcsXG4gICAgKTtcbiAgICB0aGlzLm1hcmsoXCJjb252ZXhDbGllbnRDb25zdHJ1Y3RlZFwiKTtcblxuICAgIC8vIEJlZ2luIGNsaWVudCBpbiBhIHBhdXNlZCBzdGF0ZSB3YWl0aW5nIGZvciBhbiBhdXRoIHRva2VuLlxuICAgIGlmIChvcHRpb25zLmV4cGVjdEF1dGgpIHtcbiAgICAgIHBhdXNlU29ja2V0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0cnVlIGlmIHRoZXJlIGlzIG91dHN0YW5kaW5nIHdvcmsgZnJvbSBwcmlvciB0byB0aGUgdGltZSBvZiB0aGUgbW9zdCByZWNlbnQgcmVzdGFydC5cbiAgICogVGhpcyBpbmRpY2F0ZXMgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgcHJvdmVuIGl0c2VsZiB0byBoYXZlIGdvdHRlbiBwYXN0IHRoZSBpc3N1ZSB0aGF0XG4gICAqIHBvdGVudGlhbGx5IGxlZCB0byB0aGUgcmVzdGFydC4gVXNlIHRoaXMgdG8gaW5mbHVlbmNlIHdoZW4gdG8gcmVzZXQgYmFja29mZiBhZnRlciBhIGZhaWx1cmUuXG4gICAqL1xuICBwcml2YXRlIGhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0KCkge1xuICAgIGNvbnN0IGhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0ID1cbiAgICAgIHRoaXMucmVxdWVzdE1hbmFnZXIuaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3QoKSB8fFxuICAgICAgdGhpcy5zdGF0ZS5oYXNTeW5jZWRQYXN0TGFzdFJlY29ubmVjdCgpO1xuICAgIHJldHVybiBoYXNTeW5jZWRQYXN0TGFzdFJlY29ubmVjdDtcbiAgfVxuXG4gIHByaXZhdGUgb2JzZXJ2ZWRUaW1lc3RhbXAob2JzZXJ2ZWRUczogVFMpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLm1heE9ic2VydmVkVGltZXN0YW1wID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMubWF4T2JzZXJ2ZWRUaW1lc3RhbXAubGVzc1RoYW5PckVxdWFsKG9ic2VydmVkVHMpXG4gICAgKSB7XG4gICAgICB0aGlzLm1heE9ic2VydmVkVGltZXN0YW1wID0gb2JzZXJ2ZWRUcztcbiAgICB9XG4gIH1cblxuICBnZXRNYXhPYnNlcnZlZFRpbWVzdGFtcCgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXhPYnNlcnZlZFRpbWVzdGFtcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdHMgYmFzZWQgb24gdGhlIHJlbW90ZVF1ZXJ5U2V0IGFuZCB0aGVcbiAgICogY3VycmVudCBvcHRpbWlzdGljIHVwZGF0ZXMgYW5kIGNhbGwgYG9uVHJhbnNpdGlvbmAgZm9yIGFsbCB0aGUgY2hhbmdlZFxuICAgKiBxdWVyaWVzLlxuICAgKlxuICAgKiBAcGFyYW0gY29tcGxldGVkTXV0YXRpb25zIC0gQSBzZXQgb2YgbXV0YXRpb24gSURzIHdob3NlIG9wdGltaXN0aWMgdXBkYXRlc1xuICAgKiBhcmUgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICovXG4gIHByaXZhdGUgbm90aWZ5T25RdWVyeVJlc3VsdENoYW5nZXMoXG4gICAgY29tcGxldGVkUmVxdWVzdHM6IE1hcDxSZXF1ZXN0SWQsIEZ1bmN0aW9uUmVzdWx0PixcbiAgKSB7XG4gICAgY29uc3QgcmVtb3RlUXVlcnlSZXN1bHRzOiBNYXA8UXVlcnlJZCwgRnVuY3Rpb25SZXN1bHQ+ID1cbiAgICAgIHRoaXMucmVtb3RlUXVlcnlTZXQucmVtb3RlUXVlcnlSZXN1bHRzKCk7XG4gICAgY29uc3QgcXVlcnlUb2tlblRvVmFsdWU6IFF1ZXJ5UmVzdWx0c01hcCA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IFtxdWVyeUlkLCByZXN1bHRdIG9mIHJlbW90ZVF1ZXJ5UmVzdWx0cykge1xuICAgICAgY29uc3QgcXVlcnlUb2tlbiA9IHRoaXMuc3RhdGUucXVlcnlUb2tlbihxdWVyeUlkKTtcbiAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3ZSd2ZSBhbHJlYWR5IHVuc3Vic2NyaWJlZCB0byB0aGlzIHF1ZXJ5IGJ1dFxuICAgICAgLy8gdGhlIHNlcnZlciBoYXNuJ3QgbGVhcm5lZCBhYm91dCB0aGF0IHlldC4gSWYgc28sIGlnbm9yZSB0aGlzIG9uZS5cblxuICAgICAgaWYgKHF1ZXJ5VG9rZW4gIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgcXVlcnkgPSB7XG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIHVkZlBhdGg6IHRoaXMuc3RhdGUucXVlcnlQYXRoKHF1ZXJ5SWQpISxcbiAgICAgICAgICBhcmdzOiB0aGlzLnN0YXRlLnF1ZXJ5QXJncyhxdWVyeUlkKSEsXG4gICAgICAgIH07XG4gICAgICAgIHF1ZXJ5VG9rZW5Ub1ZhbHVlLnNldChxdWVyeVRva2VuLCBxdWVyeSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUXVlcnkgdG9rZW5zIHRoYXQgYXJlIG5ldyAoYmVjYXVzZSBvZiBuZXcgc2VydmVyIHJlc3VsdHMgb3IgbmV3IGxvY2FsIG9wdGltaXN0aWMgdXBkYXRlcylcbiAgICAvLyBvciBkaWZmZXIgZnJvbSBvbGQgdmFsdWVzIChiZWNhdXNlIG9mIGNoYW5nZXMgZnJvbSBsb2NhbCBvcHRpbWlzdGljIHVwZGF0ZXMgb3IgbmV3IHJlc3VsdHNcbiAgICAvLyBmcm9tIHRoZSBzZXJ2ZXIpLlxuICAgIGNvbnN0IGNoYW5nZWRRdWVyeVRva2VucyA9XG4gICAgICB0aGlzLm9wdGltaXN0aWNRdWVyeVJlc3VsdHMuaW5nZXN0UXVlcnlSZXN1bHRzRnJvbVNlcnZlcihcbiAgICAgICAgcXVlcnlUb2tlblRvVmFsdWUsXG4gICAgICAgIG5ldyBTZXQoY29tcGxldGVkUmVxdWVzdHMua2V5cygpKSxcbiAgICAgICk7XG5cbiAgICB0aGlzLmhhbmRsZVRyYW5zaXRpb24oe1xuICAgICAgcXVlcmllczogY2hhbmdlZFF1ZXJ5VG9rZW5zLm1hcCgodG9rZW4pID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW1pc3RpY1Jlc3VsdCA9XG4gICAgICAgICAgdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzLnJhd1F1ZXJ5UmVzdWx0KHRva2VuKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0b2tlbixcbiAgICAgICAgICBtb2RpZmljYXRpb246IHtcbiAgICAgICAgICAgIGtpbmQ6IFwiVXBkYXRlZFwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgcmVzdWx0OiBvcHRpbWlzdGljUmVzdWx0LFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9KSxcbiAgICAgIHJlZmxlY3RlZE11dGF0aW9uczogQXJyYXkuZnJvbShjb21wbGV0ZWRSZXF1ZXN0cykubWFwKFxuICAgICAgICAoW3JlcXVlc3RJZCwgcmVzdWx0XSkgPT4gKHtcbiAgICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICB9KSxcbiAgICAgICksXG4gICAgICB0aW1lc3RhbXA6IHRoaXMucmVtb3RlUXVlcnlTZXQudGltZXN0YW1wKCksXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVRyYW5zaXRpb24odHJhbnNpdGlvbjogVHJhbnNpdGlvbikge1xuICAgIGZvciAoY29uc3QgZm4gb2YgdGhpcy5fb25UcmFuc2l0aW9uRm5zLnZhbHVlcygpKSB7XG4gICAgICBmbih0cmFuc2l0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgaGFuZGxlciB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGEgdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQW55IGV4dGVybmFsIHNpZGUgZWZmZWN0cyAoZS5nLiBzZXR0aW5nIFJlYWN0IHN0YXRlKSBzaG91bGQgYmUgaGFuZGxlZCBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0gZm5cbiAgICpcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFkZE9uVHJhbnNpdGlvbkhhbmRsZXIoZm46ICh0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSA9PiB2b2lkKSB7XG4gICAgY29uc3QgaWQgPSB0aGlzLl90cmFuc2l0aW9uSGFuZGxlckNvdW50ZXIrKztcbiAgICB0aGlzLl9vblRyYW5zaXRpb25GbnMuc2V0KGlkLCBmbik7XG4gICAgcmV0dXJuICgpID0+IHRoaXMuX29uVHJhbnNpdGlvbkZucy5kZWxldGUoaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCBKV1QgYXV0aCB0b2tlbiBhbmQgZGVjb2RlZCBjbGFpbXMuXG4gICAqL1xuICBnZXRDdXJyZW50QXV0aENsYWltcygpOlxuICAgIHwgeyB0b2tlbjogc3RyaW5nOyBkZWNvZGVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IH1cbiAgICB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYXV0aFRva2VuID0gdGhpcy5zdGF0ZS5nZXRBdXRoKCk7XG4gICAgbGV0IGRlY29kZWQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBpZiAoYXV0aFRva2VuICYmIGF1dGhUb2tlbi50b2tlblR5cGUgPT09IFwiVXNlclwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkZWNvZGVkID0gYXV0aFRva2VuID8gand0RGVjb2RlKGF1dGhUb2tlbi52YWx1ZSkgOiB7fTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBkZWNvZGVkID0ge307XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB7IHRva2VuOiBhdXRoVG9rZW4udmFsdWUsIGRlY29kZWQgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGF1dGhlbnRpY2F0aW9uIHRva2VuIHRvIGJlIHVzZWQgZm9yIHN1YnNlcXVlbnQgcXVlcmllcyBhbmQgbXV0YXRpb25zLlxuICAgKiBgZmV0Y2hUb2tlbmAgd2lsbCBiZSBjYWxsZWQgYXV0b21hdGljYWxseSBhZ2FpbiBpZiBhIHRva2VuIGV4cGlyZXMuXG4gICAqIGBmZXRjaFRva2VuYCBzaG91bGQgcmV0dXJuIGBudWxsYCBpZiB0aGUgdG9rZW4gY2Fubm90IGJlIHJldHJpZXZlZCwgZm9yIGV4YW1wbGVcbiAgICogd2hlbiB0aGUgdXNlcidzIHJpZ2h0cyB3ZXJlIHBlcm1hbmVudGx5IHJldm9rZWQuXG4gICAqIEBwYXJhbSBmZXRjaFRva2VuIC0gYW4gYXN5bmMgZnVuY3Rpb24gcmV0dXJuaW5nIHRoZSBKV1QtZW5jb2RlZCBPcGVuSUQgQ29ubmVjdCBJZGVudGl0eSBUb2tlblxuICAgKiBAcGFyYW0gb25DaGFuZ2UgLSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgYXV0aGVudGljYXRpb24gc3RhdHVzIGNoYW5nZXNcbiAgICovXG4gIHNldEF1dGgoXG4gICAgZmV0Y2hUb2tlbjogQXV0aFRva2VuRmV0Y2hlcixcbiAgICBvbkNoYW5nZTogKGlzQXV0aGVudGljYXRlZDogYm9vbGVhbikgPT4gdm9pZCxcbiAgKSB7XG4gICAgdm9pZCB0aGlzLmF1dGhlbnRpY2F0aW9uTWFuYWdlci5zZXRDb25maWcoZmV0Y2hUb2tlbiwgb25DaGFuZ2UpO1xuICB9XG5cbiAgaGFzQXV0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5oYXNBdXRoKCk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHNldEFkbWluQXV0aCh2YWx1ZTogc3RyaW5nLCBmYWtlVXNlcklkZW50aXR5PzogVXNlcklkZW50aXR5QXR0cmlidXRlcykge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnN0YXRlLnNldEFkbWluQXV0aCh2YWx1ZSwgZmFrZVVzZXJJZGVudGl0eSk7XG4gICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICB9XG5cbiAgY2xlYXJBdXRoKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLnN0YXRlLmNsZWFyQXV0aCgpO1xuICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtZXNzYWdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYSBxdWVyeSBmdW5jdGlvbi5cbiAgICpcbiAgICogV2hlbmV2ZXIgdGhpcyBxdWVyeSdzIHJlc3VsdCBjaGFuZ2VzLCB0aGUgYG9uVHJhbnNpdGlvbmAgY2FsbGJhY2tcbiAgICogcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yIHdpbGwgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICogQHBhcmFtIGFyZ3MgLSBBbiBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgcXVlcnkuIElmIHRoaXMgaXMgb21pdHRlZCwgdGhlXG4gICAqIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gQSB7QGxpbmsgU3Vic2NyaWJlT3B0aW9uc30gb3B0aW9ucyBvYmplY3QgZm9yIHRoaXMgcXVlcnkuXG5cbiAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYSB7QGxpbmsgUXVlcnlUb2tlbn0gY29ycmVzcG9uZGluZyB0byB0aGlzXG4gICAqIHF1ZXJ5IGFuZCBhbiBgdW5zdWJzY3JpYmVgIGNhbGxiYWNrLlxuICAgKi9cbiAgc3Vic2NyaWJlKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgIG9wdGlvbnM/OiBTdWJzY3JpYmVPcHRpb25zLFxuICApOiB7IHF1ZXJ5VG9rZW46IFF1ZXJ5VG9rZW47IHVuc3Vic2NyaWJlOiAoKSA9PiB2b2lkIH0ge1xuICAgIGNvbnN0IGFyZ3NPYmplY3QgPSBwYXJzZUFyZ3MoYXJncyk7XG5cbiAgICBjb25zdCB7IG1vZGlmaWNhdGlvbiwgcXVlcnlUb2tlbiwgdW5zdWJzY3JpYmUgfSA9IHRoaXMuc3RhdGUuc3Vic2NyaWJlKFxuICAgICAgbmFtZSxcbiAgICAgIGFyZ3NPYmplY3QsXG4gICAgICBvcHRpb25zPy5qb3VybmFsLFxuICAgICAgb3B0aW9ucz8uY29tcG9uZW50UGF0aCxcbiAgICApO1xuICAgIGlmIChtb2RpZmljYXRpb24gIT09IG51bGwpIHtcbiAgICAgIHRoaXMud2ViU29ja2V0TWFuYWdlci5zZW5kTWVzc2FnZShtb2RpZmljYXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcXVlcnlUb2tlbixcbiAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1vZGlmaWNhdGlvbiA9IHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIGlmIChtb2RpZmljYXRpb24pIHtcbiAgICAgICAgICB0aGlzLndlYlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UobW9kaWZpY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEEgcXVlcnkgcmVzdWx0IGJhc2VkIG9ubHkgb24gdGhlIGN1cnJlbnQsIGxvY2FsIHN0YXRlLlxuICAgKlxuICAgKiBUaGUgb25seSB3YXkgdGhpcyB3aWxsIHJldHVybiBhIHZhbHVlIGlzIGlmIHdlJ3JlIGFscmVhZHkgc3Vic2NyaWJlZCB0byB0aGVcbiAgICogcXVlcnkgb3IgaXRzIHZhbHVlIGhhcyBiZWVuIHNldCBvcHRpbWlzdGljYWxseS5cbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHQoXG4gICAgdWRmUGF0aDogc3RyaW5nLFxuICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICk6IFZhbHVlIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBhcmdzT2JqZWN0ID0gcGFyc2VBcmdzKGFyZ3MpO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSBzZXJpYWxpemVQYXRoQW5kQXJncyh1ZGZQYXRoLCBhcmdzT2JqZWN0KTtcbiAgICByZXR1cm4gdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzLnF1ZXJ5UmVzdWx0KHF1ZXJ5VG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBxdWVyeSByZXN1bHQgYnkgcXVlcnkgdG9rZW4gYmFzZWQgb24gY3VycmVudCwgbG9jYWwgc3RhdGVcbiAgICpcbiAgICogVGhlIG9ubHkgd2F5IHRoaXMgd2lsbCByZXR1cm4gYSB2YWx1ZSBpcyBpZiB3ZSdyZSBhbHJlYWR5IHN1YnNjcmliZWQgdG8gdGhlXG4gICAqIHF1ZXJ5IG9yIGl0cyB2YWx1ZSBoYXMgYmVlbiBzZXQgb3B0aW1pc3RpY2FsbHkuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4ocXVlcnlUb2tlbjogUXVlcnlUb2tlbik6IFZhbHVlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzLnF1ZXJ5UmVzdWx0KHF1ZXJ5VG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgbG9jYWwgcXVlcnkgcmVzdWx0IGlzIGF2YWlsYWJsZSBmb3IgYSB0b2tlbi5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgZG9lcyBub3QgdGhyb3cgaWYgdGhlIHJlc3VsdCBpcyBhbiBlcnJvci5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBoYXNMb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihxdWVyeVRva2VuOiBRdWVyeVRva2VuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY1F1ZXJ5UmVzdWx0cy5oYXNRdWVyeVJlc3VsdChxdWVyeVRva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGxvY2FsUXVlcnlMb2dzKFxuICAgIHVkZlBhdGg6IHN0cmluZyxcbiAgICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICApOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYXJnc09iamVjdCA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICBjb25zdCBxdWVyeVRva2VuID0gc2VyaWFsaXplUGF0aEFuZEFyZ3ModWRmUGF0aCwgYXJnc09iamVjdCk7XG4gICAgcmV0dXJuIHRoaXMub3B0aW1pc3RpY1F1ZXJ5UmVzdWx0cy5xdWVyeUxvZ3MocXVlcnlUb2tlbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgdGhlIGN1cnJlbnQge0BsaW5rIFF1ZXJ5Sm91cm5hbH0gZm9yIHRoaXMgcXVlcnkgZnVuY3Rpb24uXG4gICAqXG4gICAqIElmIHdlIGhhdmUgbm90IHlldCByZWNlaXZlZCBhIHJlc3VsdCBmb3IgdGhpcyBxdWVyeSwgdGhpcyB3aWxsIGJlIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBxdWVyeS5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIG9iamVjdCBmb3IgdGhpcyBxdWVyeS5cbiAgICogQHJldHVybnMgVGhlIHF1ZXJ5J3Mge0BsaW5rIFF1ZXJ5Sm91cm5hbH0gb3IgYHVuZGVmaW5lZGAuXG4gICAqL1xuICBxdWVyeUpvdXJuYWwoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICk6IFF1ZXJ5Sm91cm5hbCB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgYXJnc09iamVjdCA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICBjb25zdCBxdWVyeVRva2VuID0gc2VyaWFsaXplUGF0aEFuZEFyZ3MobmFtZSwgYXJnc09iamVjdCk7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUucXVlcnlKb3VybmFsKHF1ZXJ5VG9rZW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCB7QGxpbmsgQ29ubmVjdGlvblN0YXRlfSBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIHRoZSBDb252ZXhcbiAgICogYmFja2VuZC5cbiAgICpcbiAgICogQHJldHVybnMgVGhlIHtAbGluayBDb25uZWN0aW9uU3RhdGV9IHdpdGggdGhlIENvbnZleCBiYWNrZW5kLlxuICAgKi9cbiAgY29ubmVjdGlvblN0YXRlKCk6IENvbm5lY3Rpb25TdGF0ZSB7XG4gICAgY29uc3Qgd3NDb25uZWN0aW9uU3RhdGUgPSB0aGlzLndlYlNvY2tldE1hbmFnZXIuY29ubmVjdGlvblN0YXRlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc0luZmxpZ2h0UmVxdWVzdHM6IHRoaXMucmVxdWVzdE1hbmFnZXIuaGFzSW5mbGlnaHRSZXF1ZXN0cygpLFxuICAgICAgaXNXZWJTb2NrZXRDb25uZWN0ZWQ6IHdzQ29ubmVjdGlvblN0YXRlLmlzQ29ubmVjdGVkLFxuICAgICAgaGFzRXZlckNvbm5lY3RlZDogd3NDb25uZWN0aW9uU3RhdGUuaGFzRXZlckNvbm5lY3RlZCxcbiAgICAgIGNvbm5lY3Rpb25Db3VudDogd3NDb25uZWN0aW9uU3RhdGUuY29ubmVjdGlvbkNvdW50LFxuICAgICAgY29ubmVjdGlvblJldHJpZXM6IHdzQ29ubmVjdGlvblN0YXRlLmNvbm5lY3Rpb25SZXRyaWVzLFxuICAgICAgdGltZU9mT2xkZXN0SW5mbGlnaHRSZXF1ZXN0OlxuICAgICAgICB0aGlzLnJlcXVlc3RNYW5hZ2VyLnRpbWVPZk9sZGVzdEluZmxpZ2h0UmVxdWVzdCgpLFxuICAgICAgaW5mbGlnaHRNdXRhdGlvbnM6IHRoaXMucmVxdWVzdE1hbmFnZXIuaW5mbGlnaHRNdXRhdGlvbnMoKSxcbiAgICAgIGluZmxpZ2h0QWN0aW9uczogdGhpcy5yZXF1ZXN0TWFuYWdlci5pbmZsaWdodEFjdGlvbnMoKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgdGhpcyB3aGVuZXZlciB0aGUgY29ubmVjdGlvbiBzdGF0ZSBtYXkgaGF2ZSBjaGFuZ2VkIGluIGEgd2F5IHRoYXQgY291bGRcbiAgICogcmVxdWlyZSBwdWJsaXNoaW5nIGl0LiBTY2hlZHVsZXMgYSBwb3NzaWJseSB1cGRhdGUuXG4gICAqL1xuICBwcml2YXRlIG1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSA9ICgpID0+IHtcbiAgICB2b2lkIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgY29uc3QgY3VyQ29ubmVjdGlvblN0YXRlID0gdGhpcy5jb25uZWN0aW9uU3RhdGUoKTtcbiAgICAgIGlmIChcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoY3VyQ29ubmVjdGlvblN0YXRlKSAhPT1cbiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5fbGFzdFB1Ymxpc2hlZENvbm5lY3Rpb25TdGF0ZSlcbiAgICAgICkge1xuICAgICAgICB0aGlzLl9sYXN0UHVibGlzaGVkQ29ubmVjdGlvblN0YXRlID0gY3VyQ29ubmVjdGlvblN0YXRlO1xuICAgICAgICBmb3IgKGNvbnN0IGNiIG9mIHRoaXMuY29ubmVjdGlvblN0YXRlU3Vic2NyaWJlcnMudmFsdWVzKCkpIHtcbiAgICAgICAgICAvLyBPbmUgb2YgdGhlc2UgY2FsbGJhY2sgdGhyb3dpbmcgd2lsbCBwcmV2ZW50IG90aGVyIGNhbGxiYWNrc1xuICAgICAgICAgIC8vIGZyb20gcnVubmluZyBidXQgd2lsbCBub3QgbGVhdmUgdGhlIGNsaWVudCBpbiBhIHVuZGVmaW5lZCBzdGF0ZS5cbiAgICAgICAgICBjYihjdXJDb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCB0aGUgQ29udmV4XG4gICAqIGJhY2tlbmQsIGNhbGxpbmcgYSBjYWxsYmFjayBlYWNoIHRpbWUgaXQgY2hhbmdlcy5cbiAgICpcbiAgICogU3Vic2NyaWJlZCBjYWxsYmFja3Mgd2lsbCBiZSBjYWxsZWQgd2hlbiBhbnkgcGFydCBvZiBDb25uZWN0aW9uU3RhdGUgY2hhbmdlcy5cbiAgICogQ29ubmVjdGlvblN0YXRlIG1heSBncm93IGluIGZ1dHVyZSB2ZXJzaW9ucyAoZS5nLiB0byBwcm92aWRlIGEgYXJyYXkgb2ZcbiAgICogaW5mbGlnaHQgcmVxdWVzdHMpIGluIHdoaWNoIGNhc2UgY2FsbGJhY2tzIHdvdWxkIGJlIGNhbGxlZCBtb3JlIGZyZXF1ZW50bHkuXG4gICAqXG4gICAqIEByZXR1cm5zIEFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRvIHN0b3AgbGlzdGVuaW5nLlxuICAgKi9cbiAgc3Vic2NyaWJlVG9Db25uZWN0aW9uU3RhdGUoXG4gICAgY2I6IChjb25uZWN0aW9uU3RhdGU6IENvbm5lY3Rpb25TdGF0ZSkgPT4gdm9pZCxcbiAgKTogKCkgPT4gdm9pZCB7XG4gICAgY29uc3QgaWQgPSB0aGlzLm5leHRDb25uZWN0aW9uU3RhdGVTdWJzY3JpYmVySWQrKztcbiAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZVN1YnNjcmliZXJzLnNldChpZCwgY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZVN1YnNjcmliZXJzLmRlbGV0ZShpZCk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgbXV0YXRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIG11dGF0aW9uLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgKiB0aGUgYXJndW1lbnRzIHdpbGwgYmUgYHt9YC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBIHtAbGluayBNdXRhdGlvbk9wdGlvbnN9IG9wdGlvbnMgb2JqZWN0IGZvciB0aGlzIG11dGF0aW9uLlxuXG4gICAqIEByZXR1cm5zIC0gQSBwcm9taXNlIG9mIHRoZSBtdXRhdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIGFzeW5jIG11dGF0aW9uKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgIG9wdGlvbnM/OiBNdXRhdGlvbk9wdGlvbnMsXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5tdXRhdGlvbkludGVybmFsKG5hbWUsIGFyZ3MsIG9wdGlvbnMpO1xuICAgIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgIGlmIChyZXN1bHQuZXJyb3JEYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgZm9yd2FyZERhdGEoXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIG5ldyBDb252ZXhFcnJvcihcbiAgICAgICAgICAgIGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZShcIm11dGF0aW9uXCIsIG5hbWUsIHJlc3VsdCksXG4gICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihjcmVhdGVIeWJyaWRFcnJvclN0YWNrdHJhY2UoXCJtdXRhdGlvblwiLCBuYW1lLCByZXN1bHQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIG11dGF0aW9uSW50ZXJuYWwoXG4gICAgdWRmUGF0aDogc3RyaW5nLFxuICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgb3B0aW9ucz86IE11dGF0aW9uT3B0aW9ucyxcbiAgICBjb21wb25lbnRQYXRoPzogc3RyaW5nLFxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgeyBtdXRhdGlvblByb21pc2UgfSA9IHRoaXMuZW5xdWV1ZU11dGF0aW9uKFxuICAgICAgdWRmUGF0aCxcbiAgICAgIGFyZ3MsXG4gICAgICBvcHRpb25zLFxuICAgICAgY29tcG9uZW50UGF0aCxcbiAgICApO1xuICAgIHJldHVybiBtdXRhdGlvblByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlTXV0YXRpb24oXG4gICAgdWRmUGF0aDogc3RyaW5nLFxuICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgb3B0aW9ucz86IE11dGF0aW9uT3B0aW9ucyxcbiAgICBjb21wb25lbnRQYXRoPzogc3RyaW5nLFxuICApOiB7IHJlcXVlc3RJZDogUmVxdWVzdElkOyBtdXRhdGlvblByb21pc2U6IFByb21pc2U8RnVuY3Rpb25SZXN1bHQ+IH0ge1xuICAgIGNvbnN0IG11dGF0aW9uQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICB0aGlzLnRyeVJlcG9ydExvbmdEaXNjb25uZWN0KCk7XG4gICAgY29uc3QgcmVxdWVzdElkID0gdGhpcy5uZXh0UmVxdWVzdElkO1xuICAgIHRoaXMuX25leHRSZXF1ZXN0SWQrKztcblxuICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IG9wdGltaXN0aWNVcGRhdGUgPSBvcHRpb25zLm9wdGltaXN0aWNVcGRhdGU7XG4gICAgICBpZiAob3B0aW1pc3RpY1VwZGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZWRVcGRhdGUgPSAobG9jYWxRdWVyeVN0b3JlOiBPcHRpbWlzdGljTG9jYWxTdG9yZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdDogdW5rbm93biA9IG9wdGltaXN0aWNVcGRhdGUoXG4gICAgICAgICAgICBsb2NhbFF1ZXJ5U3RvcmUsXG4gICAgICAgICAgICBtdXRhdGlvbkFyZ3MsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIud2FybihcbiAgICAgICAgICAgICAgXCJPcHRpbWlzdGljIHVwZGF0ZSBoYW5kbGVyIHJldHVybmVkIGEgUHJvbWlzZS4gT3B0aW1pc3RpYyB1cGRhdGVzIHNob3VsZCBiZSBzeW5jaHJvbm91cy5cIixcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNoYW5nZWRRdWVyeVRva2VucyA9XG4gICAgICAgICAgdGhpcy5vcHRpbWlzdGljUXVlcnlSZXN1bHRzLmFwcGx5T3B0aW1pc3RpY1VwZGF0ZShcbiAgICAgICAgICAgIHdyYXBwZWRVcGRhdGUsXG4gICAgICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjaGFuZ2VkUXVlcmllcyA9IGNoYW5nZWRRdWVyeVRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICAgICAgY29uc3QgbG9jYWxSZXN1bHQgPSB0aGlzLmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHRva2VuKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBtb2RpZmljYXRpb246IHtcbiAgICAgICAgICAgICAga2luZDogXCJVcGRhdGVkXCIgYXMgY29uc3QsXG4gICAgICAgICAgICAgIHJlc3VsdDpcbiAgICAgICAgICAgICAgICBsb2NhbFJlc3VsdCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbG9jYWxSZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgbG9nTGluZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5oYW5kbGVUcmFuc2l0aW9uKHtcbiAgICAgICAgICBxdWVyaWVzOiBjaGFuZ2VkUXVlcmllcyxcbiAgICAgICAgICByZWZsZWN0ZWRNdXRhdGlvbnM6IFtdLFxuICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5yZW1vdGVRdWVyeVNldC50aW1lc3RhbXAoKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZTogTXV0YXRpb25SZXF1ZXN0ID0ge1xuICAgICAgdHlwZTogXCJNdXRhdGlvblwiLFxuICAgICAgcmVxdWVzdElkLFxuICAgICAgdWRmUGF0aCxcbiAgICAgIGNvbXBvbmVudFBhdGgsXG4gICAgICBhcmdzOiBbY29udmV4VG9Kc29uKG11dGF0aW9uQXJncyldLFxuICAgIH07XG4gICAgY29uc3QgbWlnaHRCZVNlbnQgPSB0aGlzLndlYlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgY29uc3QgbXV0YXRpb25Qcm9taXNlID0gdGhpcy5yZXF1ZXN0TWFuYWdlci5yZXF1ZXN0KG1lc3NhZ2UsIG1pZ2h0QmVTZW50KTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWVzdElkLFxuICAgICAgbXV0YXRpb25Qcm9taXNlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZSBhbiBhY3Rpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGFjdGlvbi5cbiAgICogQHBhcmFtIGFyZ3MgLSBBbiBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgYWN0aW9uLiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIGFjdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIGFzeW5jIGFjdGlvbihuYW1lOiBzdHJpbmcsIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4pOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0aW9uSW50ZXJuYWwobmFtZSwgYXJncyk7XG4gICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgaWYgKHJlc3VsdC5lcnJvckRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBmb3J3YXJkRGF0YShcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgbmV3IENvbnZleEVycm9yKGNyZWF0ZUh5YnJpZEVycm9yU3RhY2t0cmFjZShcImFjdGlvblwiLCBuYW1lLCByZXN1bHQpKSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcihjcmVhdGVIeWJyaWRFcnJvclN0YWNrdHJhY2UoXCJhY3Rpb25cIiwgbmFtZSwgcmVzdWx0KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQudmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhc3luYyBhY3Rpb25JbnRlcm5hbChcbiAgICB1ZGZQYXRoOiBzdHJpbmcsXG4gICAgYXJncz86IFJlY29yZDxzdHJpbmcsIFZhbHVlPixcbiAgICBjb21wb25lbnRQYXRoPzogc3RyaW5nLFxuICApOiBQcm9taXNlPEZ1bmN0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgYWN0aW9uQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICBjb25zdCByZXF1ZXN0SWQgPSB0aGlzLm5leHRSZXF1ZXN0SWQ7XG4gICAgdGhpcy5fbmV4dFJlcXVlc3RJZCsrO1xuICAgIHRoaXMudHJ5UmVwb3J0TG9uZ0Rpc2Nvbm5lY3QoKTtcblxuICAgIGNvbnN0IG1lc3NhZ2U6IEFjdGlvblJlcXVlc3QgPSB7XG4gICAgICB0eXBlOiBcIkFjdGlvblwiLFxuICAgICAgcmVxdWVzdElkLFxuICAgICAgdWRmUGF0aCxcbiAgICAgIGNvbXBvbmVudFBhdGgsXG4gICAgICBhcmdzOiBbY29udmV4VG9Kc29uKGFjdGlvbkFyZ3MpXSxcbiAgICB9O1xuXG4gICAgY29uc3QgbWlnaHRCZVNlbnQgPSB0aGlzLndlYlNvY2tldE1hbmFnZXIuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdE1hbmFnZXIucmVxdWVzdChtZXNzYWdlLCBtaWdodEJlU2VudCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgYW55IG5ldHdvcmsgaGFuZGxlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjbGllbnQgYW5kIHN0b3AgYWxsIHN1YnNjcmlwdGlvbnMuXG4gICAqXG4gICAqIENhbGwgdGhpcyBtZXRob2Qgd2hlbiB5b3UncmUgZG9uZSB3aXRoIGFuIHtAbGluayBCYXNlQ29udmV4Q2xpZW50fSB0b1xuICAgKiBkaXNwb3NlIG9mIGl0cyBzb2NrZXRzIGFuZCByZXNvdXJjZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIEEgYFByb21pc2VgIGZ1bGZpbGxlZCB3aGVuIHRoZSBjb25uZWN0aW9uIGhhcyBiZWVuIGNvbXBsZXRlbHkgY2xvc2VkLlxuICAgKi9cbiAgYXN5bmMgY2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5hdXRoZW50aWNhdGlvbk1hbmFnZXIuc3RvcCgpO1xuICAgIHJldHVybiB0aGlzLndlYlNvY2tldE1hbmFnZXIudGVybWluYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBhZGRyZXNzIGZvciB0aGlzIGNsaWVudCwgdXNlZnVsIGZvciBjcmVhdGluZyBhIG5ldyBjbGllbnQuXG4gICAqXG4gICAqIE5vdCBndWFyYW50ZWVkIHRvIG1hdGNoIHRoZSBhZGRyZXNzIHdpdGggd2hpY2ggdGhpcyBjbGllbnQgd2FzIGNvbnN0cnVjdGVkOlxuICAgKiBpdCBtYXkgYmUgY2Fub25pY2FsaXplZC5cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWRkcmVzcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldCBuZXh0UmVxdWVzdElkKCkge1xuICAgIHJldHVybiB0aGlzLl9uZXh0UmVxdWVzdElkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0IHNlc3Npb25JZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2Vzc2lvbklkO1xuICB9XG5cbiAgLy8gSW5zdGFuY2UgcHJvcGVydHkgc28gdGhhdCBgbWFyaygpYCBkb2Vzbid0IG5lZWQgdG8gYmUgY2FsbGVkIGFzIGEgbWV0aG9kLlxuICBwcml2YXRlIG1hcmsgPSAobmFtZTogTWFya05hbWUpID0+IHtcbiAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgbWFyayhuYW1lLCB0aGlzLnNlc3Npb25JZCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBSZXBvcnRzIHBlcmZvcm1hbmNlIG1hcmtzIHRvIHRoZSBzZXJ2ZXIuIFRoaXMgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cbiAgICogd2UgaGF2ZSBhIGZ1bmN0aW9uYWwgd2Vic29ja2V0LlxuICAgKi9cbiAgcHJpdmF0ZSByZXBvcnRNYXJrcygpIHtcbiAgICBpZiAodGhpcy5kZWJ1Zykge1xuICAgICAgY29uc3QgcmVwb3J0ID0gZ2V0TWFya3NSZXBvcnQodGhpcy5zZXNzaW9uSWQpO1xuICAgICAgdGhpcy53ZWJTb2NrZXRNYW5hZ2VyLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogXCJFdmVudFwiLFxuICAgICAgICBldmVudFR5cGU6IFwiQ2xpZW50Q29ubmVjdFwiLFxuICAgICAgICBldmVudDogcmVwb3J0LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB0cnlSZXBvcnRMb25nRGlzY29ubmVjdCgpIHtcbiAgICBpZiAoIXRoaXMuZGVidWcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdGltZU9mT2xkZXN0UmVxdWVzdCA9XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSgpLnRpbWVPZk9sZGVzdEluZmxpZ2h0UmVxdWVzdDtcbiAgICBpZiAoXG4gICAgICB0aW1lT2ZPbGRlc3RSZXF1ZXN0ID09PSBudWxsIHx8XG4gICAgICBEYXRlLm5vdygpIC0gdGltZU9mT2xkZXN0UmVxdWVzdC5nZXRUaW1lKCkgPD0gNjAgKiAxMDAwXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5hZGRyZXNzfS9hcGkvZGVidWdfZXZlbnRgO1xuICAgIGZldGNoKGVuZHBvaW50LCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJDb252ZXgtQ2xpZW50XCI6IGBucG0tJHt2ZXJzaW9ufWAsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBldmVudDogXCJMb25nV2Vic29ja2V0RGlzY29ubmVjdFwiIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oXG4gICAgICAgICAgICBcIkFuYWx5dGljcyByZXF1ZXN0IGZhaWxlZCB3aXRoIHJlc3BvbnNlOlwiLFxuICAgICAgICAgICAgcmVzcG9uc2UuYm9keSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKFwiQW5hbHl0aWNzIHJlc3BvbnNlIGZhaWxlZCB3aXRoIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIm1vZGlmaWNhdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/local_state.js":
/*!******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/local_state.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalSyncState: () => (/* binding */ LocalSyncState)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass LocalSyncState {\n    constructor(){\n        __publicField(this, \"nextQueryId\");\n        __publicField(this, \"querySetVersion\");\n        __publicField(this, \"querySet\");\n        __publicField(this, \"queryIdToToken\");\n        __publicField(this, \"identityVersion\");\n        __publicField(this, \"auth\");\n        __publicField(this, \"outstandingQueriesOlderThanRestart\");\n        __publicField(this, \"outstandingAuthOlderThanRestart\");\n        __publicField(this, \"paused\");\n        __publicField(this, \"pendingQuerySetModifications\");\n        this.nextQueryId = 0;\n        this.querySetVersion = 0;\n        this.identityVersion = 0;\n        this.querySet = /* @__PURE__ */ new Map();\n        this.queryIdToToken = /* @__PURE__ */ new Map();\n        this.outstandingQueriesOlderThanRestart = /* @__PURE__ */ new Set();\n        this.outstandingAuthOlderThanRestart = false;\n        this.paused = false;\n        this.pendingQuerySetModifications = /* @__PURE__ */ new Map();\n    }\n    hasSyncedPastLastReconnect() {\n        return this.outstandingQueriesOlderThanRestart.size === 0 && !this.outstandingAuthOlderThanRestart;\n    }\n    markAuthCompletion() {\n        this.outstandingAuthOlderThanRestart = false;\n    }\n    subscribe(udfPath, args, journal, componentPath) {\n        const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.canonicalizeUdfPath)(udfPath);\n        const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.serializePathAndArgs)(canonicalizedUdfPath, args);\n        const existingEntry = this.querySet.get(queryToken);\n        if (existingEntry !== void 0) {\n            existingEntry.numSubscribers += 1;\n            return {\n                queryToken,\n                modification: null,\n                unsubscribe: ()=>this.removeSubscriber(queryToken)\n            };\n        } else {\n            const queryId = this.nextQueryId++;\n            const query = {\n                id: queryId,\n                canonicalizedUdfPath,\n                args,\n                numSubscribers: 1,\n                journal,\n                componentPath\n            };\n            this.querySet.set(queryToken, query);\n            this.queryIdToToken.set(queryId, queryToken);\n            const baseVersion = this.querySetVersion;\n            const newVersion = this.querySetVersion + 1;\n            const add = {\n                type: \"Add\",\n                queryId,\n                udfPath: canonicalizedUdfPath,\n                args: [\n                    (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args)\n                ],\n                journal,\n                componentPath\n            };\n            if (this.paused) {\n                this.pendingQuerySetModifications.set(queryId, add);\n            } else {\n                this.querySetVersion = newVersion;\n            }\n            const modification = {\n                type: \"ModifyQuerySet\",\n                baseVersion,\n                newVersion,\n                modifications: [\n                    add\n                ]\n            };\n            return {\n                queryToken,\n                modification,\n                unsubscribe: ()=>this.removeSubscriber(queryToken)\n            };\n        }\n    }\n    transition(transition) {\n        for (const modification of transition.modifications){\n            switch(modification.type){\n                case \"QueryUpdated\":\n                case \"QueryFailed\":\n                    {\n                        this.outstandingQueriesOlderThanRestart.delete(modification.queryId);\n                        const journal = modification.journal;\n                        if (journal !== void 0) {\n                            const queryToken = this.queryIdToToken.get(modification.queryId);\n                            if (queryToken !== void 0) {\n                                this.querySet.get(queryToken).journal = journal;\n                            }\n                        }\n                        break;\n                    }\n                case \"QueryRemoved\":\n                    {\n                        this.outstandingQueriesOlderThanRestart.delete(modification.queryId);\n                        break;\n                    }\n                default:\n                    {\n                        modification;\n                        throw new Error(`Invalid modification ${modification.type}`);\n                    }\n            }\n        }\n    }\n    queryId(udfPath, args) {\n        const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.canonicalizeUdfPath)(udfPath);\n        const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_1__.serializePathAndArgs)(canonicalizedUdfPath, args);\n        const existingEntry = this.querySet.get(queryToken);\n        if (existingEntry !== void 0) {\n            return existingEntry.id;\n        }\n        return null;\n    }\n    isCurrentOrNewerAuthVersion(version) {\n        return version >= this.identityVersion;\n    }\n    getAuth() {\n        return this.auth;\n    }\n    setAuth(value) {\n        this.auth = {\n            tokenType: \"User\",\n            value\n        };\n        const baseVersion = this.identityVersion;\n        if (!this.paused) {\n            this.identityVersion = baseVersion + 1;\n        }\n        return {\n            type: \"Authenticate\",\n            baseVersion,\n            ...this.auth\n        };\n    }\n    setAdminAuth(value, actingAs) {\n        const auth = {\n            tokenType: \"Admin\",\n            value,\n            impersonating: actingAs\n        };\n        this.auth = auth;\n        const baseVersion = this.identityVersion;\n        if (!this.paused) {\n            this.identityVersion = baseVersion + 1;\n        }\n        return {\n            type: \"Authenticate\",\n            baseVersion,\n            ...auth\n        };\n    }\n    clearAuth() {\n        this.auth = void 0;\n        this.markAuthCompletion();\n        const baseVersion = this.identityVersion;\n        if (!this.paused) {\n            this.identityVersion = baseVersion + 1;\n        }\n        return {\n            type: \"Authenticate\",\n            tokenType: \"None\",\n            baseVersion\n        };\n    }\n    hasAuth() {\n        return !!this.auth;\n    }\n    isNewAuth(value) {\n        return this.auth?.value !== value;\n    }\n    queryPath(queryId) {\n        const pathAndArgs = this.queryIdToToken.get(queryId);\n        if (pathAndArgs) {\n            return this.querySet.get(pathAndArgs).canonicalizedUdfPath;\n        }\n        return null;\n    }\n    queryArgs(queryId) {\n        const pathAndArgs = this.queryIdToToken.get(queryId);\n        if (pathAndArgs) {\n            return this.querySet.get(pathAndArgs).args;\n        }\n        return null;\n    }\n    queryToken(queryId) {\n        return this.queryIdToToken.get(queryId) ?? null;\n    }\n    queryJournal(queryToken) {\n        return this.querySet.get(queryToken)?.journal;\n    }\n    restart(oldRemoteQueryResults) {\n        this.unpause();\n        this.outstandingQueriesOlderThanRestart.clear();\n        const modifications = [];\n        for (const localQuery of this.querySet.values()){\n            const add = {\n                type: \"Add\",\n                queryId: localQuery.id,\n                udfPath: localQuery.canonicalizedUdfPath,\n                args: [\n                    (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(localQuery.args)\n                ],\n                journal: localQuery.journal,\n                componentPath: localQuery.componentPath\n            };\n            modifications.push(add);\n            if (!oldRemoteQueryResults.has(localQuery.id)) {\n                this.outstandingQueriesOlderThanRestart.add(localQuery.id);\n            }\n        }\n        this.querySetVersion = 1;\n        const querySet = {\n            type: \"ModifyQuerySet\",\n            baseVersion: 0,\n            newVersion: 1,\n            modifications\n        };\n        if (!this.auth) {\n            this.identityVersion = 0;\n            return [\n                querySet,\n                void 0\n            ];\n        }\n        this.outstandingAuthOlderThanRestart = true;\n        const authenticate = {\n            type: \"Authenticate\",\n            baseVersion: 0,\n            ...this.auth\n        };\n        this.identityVersion = 1;\n        return [\n            querySet,\n            authenticate\n        ];\n    }\n    pause() {\n        this.paused = true;\n    }\n    resume() {\n        const querySet = this.pendingQuerySetModifications.size > 0 ? {\n            type: \"ModifyQuerySet\",\n            baseVersion: this.querySetVersion,\n            newVersion: ++this.querySetVersion,\n            modifications: Array.from(this.pendingQuerySetModifications.values())\n        } : void 0;\n        const authenticate = this.auth !== void 0 ? {\n            type: \"Authenticate\",\n            baseVersion: this.identityVersion++,\n            ...this.auth\n        } : void 0;\n        this.unpause();\n        return [\n            querySet,\n            authenticate\n        ];\n    }\n    unpause() {\n        this.paused = false;\n        this.pendingQuerySetModifications.clear();\n    }\n    removeSubscriber(queryToken) {\n        const localQuery = this.querySet.get(queryToken);\n        if (localQuery.numSubscribers > 1) {\n            localQuery.numSubscribers -= 1;\n            return null;\n        } else {\n            this.querySet.delete(queryToken);\n            this.queryIdToToken.delete(localQuery.id);\n            this.outstandingQueriesOlderThanRestart.delete(localQuery.id);\n            const baseVersion = this.querySetVersion;\n            const newVersion = this.querySetVersion + 1;\n            const remove = {\n                type: \"Remove\",\n                queryId: localQuery.id\n            };\n            if (this.paused) {\n                if (this.pendingQuerySetModifications.has(localQuery.id)) {\n                    this.pendingQuerySetModifications.delete(localQuery.id);\n                } else {\n                    this.pendingQuerySetModifications.set(localQuery.id, remove);\n                }\n            } else {\n                this.querySetVersion = newVersion;\n            }\n            return {\n                type: \"ModifyQuerySet\",\n                baseVersion,\n                newVersion,\n                modifications: [\n                    remove\n                ]\n            };\n        }\n    }\n} //# sourceMappingURL=local_state.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9sb2NhbF9zdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFZb0M7QUFrQjdCO0FBc0JBLE1BQU0sZUFBZTtJQVkxQixhQUFjO1FBWGQsb0JBQVE7UUFDUixvQkFBUTtRQUNSLG9CQUFpQjtRQUNqQixvQkFBaUI7UUFDakIsb0JBQVE7UUFDUixvQkFBUTtRQUNSLG9CQUFpQjtRQUNqQixvQkFBUTtRQUNSLG9CQUFRO1FBQ1Isb0JBQVE7UUFHTixLQUFLLGNBQWM7UUFDbkIsS0FBSyxrQkFBa0I7UUFDdkIsS0FBSyxrQkFBa0I7UUFDdkIsS0FBSyxXQUFXLG9CQUFJLElBQUk7UUFDeEIsS0FBSyxpQkFBaUIsb0JBQUksSUFBSTtRQUM5QixLQUFLLHFDQUFxQyxvQkFBSSxJQUFJO1FBQ2xELEtBQUssa0NBQWtDO1FBQ3ZDLEtBQUssU0FBUztRQUNkLEtBQUssK0JBQStCLG9CQUFJLElBQUk7SUFDOUM7SUFFQSw2QkFBc0M7UUFDcEMsT0FDRSxLQUFLLG1DQUFtQyxTQUFTLEtBQ2pELENBQUMsS0FBSztJQUVWO0lBRUEscUJBQXFCO1FBQ25CLEtBQUssa0NBQWtDO0lBQ3pDO0lBRUEsVUFDRSxTQUNBLE1BQ0EsU0FDQSxlQUtBO1FBQ0EsTUFBTSx1QkFBdUIsdUVBQW1CLENBQUMsT0FBTztRQUN4RCxNQUFNLGFBQWEsd0VBQW9CLENBQUMsc0JBQXNCLElBQUk7UUFFbEUsTUFBTSxnQkFBZ0IsS0FBSyxTQUFTLElBQUksVUFBVTtRQUVsRCxJQUFJLGtCQUFrQixRQUFXO1lBQy9CLGNBQWMsa0JBQWtCO1lBQ2hDLE9BQU87Z0JBQ0w7Z0JBQ0EsY0FBYztnQkFDZCxhQUFhLElBQU0sS0FBSyxpQkFBaUIsVUFBVTtZQUNyRDtRQUNGLE9BQU87WUFDTCxNQUFNLFVBQVUsS0FBSztZQUNyQixNQUFNLFFBQW9CO2dCQUN4QixJQUFJO2dCQUNKO2dCQUNBO2dCQUNBLGdC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QkFBNkIsT0FBTyxXQUFXLEVBQUU7Z0JBQ3hELE9BQU87b0JBQ0wsS0FBSyw2QkFBNkIsSUFBSSxXQUFXLElBQUksTUFBTTtnQkFDN0Q7WUFDRixPQUFPO2dCQUNMLEtBQUssa0JBQWtCO1lBQ3pCO1lBQ0EsT0FBTztnQkFDTCxNQUFNO2dCQUNOO2dCQUNBO2dCQUNBLGVBQWU7b0JBQUMsTUFBTTtpQkFBQTtZQUN4QjtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL3NyYy9icm93c2VyL3N5bmMvbG9jYWxfc3RhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGUgbG9jYWwgc3RhdGUgb2YgdGhlIGNsaWVudDpcbiAqIC0gd2hpY2ggcXVlcmllcyBhcmUgc3Vic2NyaWJlZCB0b1xuICogLSB0aGUgXCJRdWVyeSBTZXQgVmVyc2lvbixcIiB1c2VkIHRvIHByb2R1Y2UgUXVlcnlTZXRNb2RpZmljYXRpb24gbWVzc2FnZXNcbiAqIC0gdGhlIGN1cnJlbnQgYXV0aCB0b2tlbiBhbmQgXCJJZGVudGl0eSBWZXJzaW9uXCJcbiAqXG4gKiBMb2NhbCBzdGF0ZSBkb2VzIG5vdCBpbmNsdWRlOlxuICogLSBxdWVyeSByZXN1bHRzIChzZWUgUmVtb3RlUXVlcnlTZXQpXG4gKiAtIGxvY2FsbHkgbWFkZSBcIm9wdGltaXN0aWMgdXBkYXRlXCIgbW9kaWZpY2F0aW9ucyB0byBxdWVyeSByZXN1bHRzIChzZWUgT3B0aW1pc3RpY1F1ZXJ5UmVzdWx0cylcbiAqIC0gYW55IHF1ZXJ5IHJlc3VsdHMgYXQgYWxsXG4gKiovXG5cbmltcG9ydCB7IGNvbnZleFRvSnNvbiwgVmFsdWUgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBBZGRRdWVyeSxcbiAgUmVtb3ZlUXVlcnksXG4gIFF1ZXJ5SWQsXG4gIFF1ZXJ5U2V0TW9kaWZpY2F0aW9uLFxuICBRdWVyeVNldFZlcnNpb24sXG4gIElkZW50aXR5VmVyc2lvbixcbiAgQXV0aGVudGljYXRlLFxuICBRdWVyeUpvdXJuYWwsXG4gIFRyYW5zaXRpb24sXG4gIEFkbWluQXV0aGVudGljYXRpb24sXG4gIFVzZXJJZGVudGl0eUF0dHJpYnV0ZXMsXG59IGZyb20gXCIuL3Byb3RvY29sLmpzXCI7XG5pbXBvcnQge1xuICBjYW5vbmljYWxpemVVZGZQYXRoLFxuICBRdWVyeVRva2VuLFxuICBzZXJpYWxpemVQYXRoQW5kQXJncyxcbn0gZnJvbSBcIi4vdWRmX3BhdGhfdXRpbHMuanNcIjtcblxudHlwZSBMb2NhbFF1ZXJ5ID0ge1xuICBpZDogUXVlcnlJZDtcbiAgY2Fub25pY2FsaXplZFVkZlBhdGg6IHN0cmluZztcbiAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+O1xuICBudW1TdWJzY3JpYmVyczogbnVtYmVyO1xuICBqb3VybmFsPzogUXVlcnlKb3VybmFsIHwgdW5kZWZpbmVkO1xuICBjb21wb25lbnRQYXRoPzogc3RyaW5nIHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IHR5cGUgQXV0aFN0YXRlID1cbiAgfCB7XG4gICAgICB0b2tlblR5cGU6IFwiVXNlclwiO1xuICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9XG4gIHwge1xuICAgICAgdG9rZW5UeXBlOiBcIkFkbWluXCI7XG4gICAgICB2YWx1ZTogc3RyaW5nO1xuICAgICAgaW1wZXJzb25hdGluZz86IFVzZXJJZGVudGl0eUF0dHJpYnV0ZXMgfCB1bmRlZmluZWQ7XG4gICAgfTtcblxuZXhwb3J0IGNsYXNzIExvY2FsU3luY1N0YXRlIHtcbiAgcHJpdmF0ZSBuZXh0UXVlcnlJZDogUXVlcnlJZDtcbiAgcHJpdmF0ZSBxdWVyeVNldFZlcnNpb246IFF1ZXJ5U2V0VmVyc2lvbjtcbiAgcHJpdmF0ZSByZWFkb25seSBxdWVyeVNldDogTWFwPFF1ZXJ5VG9rZW4sIExvY2FsUXVlcnk+O1xuICBwcml2YXRlIHJlYWRvbmx5IHF1ZXJ5SWRUb1Rva2VuOiBNYXA8UXVlcnlJZCwgUXVlcnlUb2tlbj47XG4gIHByaXZhdGUgaWRlbnRpdHlWZXJzaW9uOiBJZGVudGl0eVZlcnNpb247XG4gIHByaXZhdGUgYXV0aDogQXV0aFN0YXRlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHJlYWRvbmx5IG91dHN0YW5kaW5nUXVlcmllc09sZGVyVGhhblJlc3RhcnQ6IFNldDxRdWVyeUlkPjtcbiAgcHJpdmF0ZSBvdXRzdGFuZGluZ0F1dGhPbGRlclRoYW5SZXN0YXJ0OiBib29sZWFuO1xuICBwcml2YXRlIHBhdXNlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBwZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zOiBNYXA8UXVlcnlJZCwgQWRkUXVlcnkgfCBSZW1vdmVRdWVyeT47XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5uZXh0UXVlcnlJZCA9IDA7XG4gICAgdGhpcy5xdWVyeVNldFZlcnNpb24gPSAwO1xuICAgIHRoaXMuaWRlbnRpdHlWZXJzaW9uID0gMDtcbiAgICB0aGlzLnF1ZXJ5U2V0ID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucXVlcnlJZFRvVG9rZW4gPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0ID0gbmV3IFNldCgpO1xuICAgIHRoaXMub3V0c3RhbmRpbmdBdXRoT2xkZXJUaGFuUmVzdGFydCA9IGZhbHNlO1xuICAgIHRoaXMucGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5wZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zID0gbmV3IE1hcCgpO1xuICB9XG5cbiAgaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3QoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMub3V0c3RhbmRpbmdRdWVyaWVzT2xkZXJUaGFuUmVzdGFydC5zaXplID09PSAwICYmXG4gICAgICAhdGhpcy5vdXRzdGFuZGluZ0F1dGhPbGRlclRoYW5SZXN0YXJ0XG4gICAgKTtcbiAgfVxuXG4gIG1hcmtBdXRoQ29tcGxldGlvbigpIHtcbiAgICB0aGlzLm91dHN0YW5kaW5nQXV0aE9sZGVyVGhhblJlc3RhcnQgPSBmYWxzZTtcbiAgfVxuXG4gIHN1YnNjcmliZShcbiAgICB1ZGZQYXRoOiBzdHJpbmcsXG4gICAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgIGpvdXJuYWw/OiBRdWVyeUpvdXJuYWwgfCB1bmRlZmluZWQsXG4gICAgY29tcG9uZW50UGF0aD86IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgKToge1xuICAgIHF1ZXJ5VG9rZW46IFF1ZXJ5VG9rZW47XG4gICAgbW9kaWZpY2F0aW9uOiBRdWVyeVNldE1vZGlmaWNhdGlvbiB8IG51bGw7XG4gICAgdW5zdWJzY3JpYmU6ICgpID0+IFF1ZXJ5U2V0TW9kaWZpY2F0aW9uIHwgbnVsbDtcbiAgfSB7XG4gICAgY29uc3QgY2Fub25pY2FsaXplZFVkZlBhdGggPSBjYW5vbmljYWxpemVVZGZQYXRoKHVkZlBhdGgpO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSBzZXJpYWxpemVQYXRoQW5kQXJncyhjYW5vbmljYWxpemVkVWRmUGF0aCwgYXJncyk7XG5cbiAgICBjb25zdCBleGlzdGluZ0VudHJ5ID0gdGhpcy5xdWVyeVNldC5nZXQocXVlcnlUb2tlbik7XG5cbiAgICBpZiAoZXhpc3RpbmdFbnRyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBleGlzdGluZ0VudHJ5Lm51bVN1YnNjcmliZXJzICs9IDE7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBxdWVyeVRva2VuLFxuICAgICAgICBtb2RpZmljYXRpb246IG51bGwsXG4gICAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB0aGlzLnJlbW92ZVN1YnNjcmliZXIocXVlcnlUb2tlbiksXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBxdWVyeUlkID0gdGhpcy5uZXh0UXVlcnlJZCsrO1xuICAgICAgY29uc3QgcXVlcnk6IExvY2FsUXVlcnkgPSB7XG4gICAgICAgIGlkOiBxdWVyeUlkLFxuICAgICAgICBjYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgICAgYXJncyxcbiAgICAgICAgbnVtU3Vic2NyaWJlcnM6IDEsXG4gICAgICAgIGpvdXJuYWwsXG4gICAgICAgIGNvbXBvbmVudFBhdGgsXG4gICAgICB9O1xuICAgICAgdGhpcy5xdWVyeVNldC5zZXQocXVlcnlUb2tlbiwgcXVlcnkpO1xuICAgICAgdGhpcy5xdWVyeUlkVG9Ub2tlbi5zZXQocXVlcnlJZCwgcXVlcnlUb2tlbik7XG5cbiAgICAgIGNvbnN0IGJhc2VWZXJzaW9uID0gdGhpcy5xdWVyeVNldFZlcnNpb247XG4gICAgICBjb25zdCBuZXdWZXJzaW9uID0gdGhpcy5xdWVyeVNldFZlcnNpb24gKyAxO1xuXG4gICAgICBjb25zdCBhZGQ6IEFkZFF1ZXJ5ID0ge1xuICAgICAgICB0eXBlOiBcIkFkZFwiLFxuICAgICAgICBxdWVyeUlkLFxuICAgICAgICB1ZGZQYXRoOiBjYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgICAgYXJnczogW2NvbnZleFRvSnNvbihhcmdzKV0sXG4gICAgICAgIGpvdXJuYWwsXG4gICAgICAgIGNvbXBvbmVudFBhdGgsXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5wYXVzZWQpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zLnNldChxdWVyeUlkLCBhZGQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWVyeVNldFZlcnNpb24gPSBuZXdWZXJzaW9uO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBtb2RpZmljYXRpb246IFF1ZXJ5U2V0TW9kaWZpY2F0aW9uID0ge1xuICAgICAgICB0eXBlOiBcIk1vZGlmeVF1ZXJ5U2V0XCIsXG4gICAgICAgIGJhc2VWZXJzaW9uLFxuICAgICAgICBuZXdWZXJzaW9uLFxuICAgICAgICBtb2RpZmljYXRpb25zOiBbYWRkXSxcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBxdWVyeVRva2VuLFxuICAgICAgICBtb2RpZmljYXRpb24sXG4gICAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB0aGlzLnJlbW92ZVN1YnNjcmliZXIocXVlcnlUb2tlbiksXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHRyYW5zaXRpb24odHJhbnNpdGlvbjogVHJhbnNpdGlvbikge1xuICAgIGZvciAoY29uc3QgbW9kaWZpY2F0aW9uIG9mIHRyYW5zaXRpb24ubW9kaWZpY2F0aW9ucykge1xuICAgICAgc3dpdGNoIChtb2RpZmljYXRpb24udHlwZSkge1xuICAgICAgICBjYXNlIFwiUXVlcnlVcGRhdGVkXCI6XG4gICAgICAgIGNhc2UgXCJRdWVyeUZhaWxlZFwiOiB7XG4gICAgICAgICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShtb2RpZmljYXRpb24ucXVlcnlJZCk7XG4gICAgICAgICAgY29uc3Qgam91cm5hbCA9IG1vZGlmaWNhdGlvbi5qb3VybmFsO1xuICAgICAgICAgIGlmIChqb3VybmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSB0aGlzLnF1ZXJ5SWRUb1Rva2VuLmdldChtb2RpZmljYXRpb24ucXVlcnlJZCk7XG4gICAgICAgICAgICAvLyBXZSBtYXkgaGF2ZSBhbHJlYWR5IHVuc3Vic2NyaWJlZCB0byB0aGlzIHF1ZXJ5IGJ5IHRoZSB0aW1lIHRoZSBzZXJ2ZXJcbiAgICAgICAgICAgIC8vIHNlbmRzIHVzIHRoZSBqb3VybmFsLiBJZiBzbywganVzdCBpZ25vcmUgaXQuXG4gICAgICAgICAgICBpZiAocXVlcnlUb2tlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMucXVlcnlTZXQuZ2V0KHF1ZXJ5VG9rZW4pIS5qb3VybmFsID0gam91cm5hbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiUXVlcnlSZW1vdmVkXCI6IHtcbiAgICAgICAgICB0aGlzLm91dHN0YW5kaW5nUXVlcmllc09sZGVyVGhhblJlc3RhcnQuZGVsZXRlKG1vZGlmaWNhdGlvbi5xdWVyeUlkKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgLy8gRW5mb3JjZSB0aGF0IHRoZSBzd2l0Y2gtY2FzZSBpcyBleGhhdXN0aXZlLlxuICAgICAgICAgIG1vZGlmaWNhdGlvbiBzYXRpc2ZpZXMgbmV2ZXI7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1vZGlmaWNhdGlvbiAkeyhtb2RpZmljYXRpb24gYXMgYW55KS50eXBlfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcXVlcnlJZCh1ZGZQYXRoOiBzdHJpbmcsIGFyZ3M6IFJlY29yZDxzdHJpbmcsIFZhbHVlPik6IFF1ZXJ5SWQgfCBudWxsIHtcbiAgICBjb25zdCBjYW5vbmljYWxpemVkVWRmUGF0aCA9IGNhbm9uaWNhbGl6ZVVkZlBhdGgodWRmUGF0aCk7XG4gICAgY29uc3QgcXVlcnlUb2tlbiA9IHNlcmlhbGl6ZVBhdGhBbmRBcmdzKGNhbm9uaWNhbGl6ZWRVZGZQYXRoLCBhcmdzKTtcbiAgICBjb25zdCBleGlzdGluZ0VudHJ5ID0gdGhpcy5xdWVyeVNldC5nZXQocXVlcnlUb2tlbik7XG4gICAgaWYgKGV4aXN0aW5nRW50cnkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV4aXN0aW5nRW50cnkuaWQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaXNDdXJyZW50T3JOZXdlckF1dGhWZXJzaW9uKHZlcnNpb246IElkZW50aXR5VmVyc2lvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB2ZXJzaW9uID49IHRoaXMuaWRlbnRpdHlWZXJzaW9uO1xuICB9XG5cbiAgZ2V0QXV0aCgpOiBBdXRoU3RhdGUgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmF1dGg7XG4gIH1cblxuICBzZXRBdXRoKHZhbHVlOiBzdHJpbmcpOiBBdXRoZW50aWNhdGUge1xuICAgIHRoaXMuYXV0aCA9IHtcbiAgICAgIHRva2VuVHlwZTogXCJVc2VyXCIgYXMgY29uc3QsXG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgfTtcbiAgICBjb25zdCBiYXNlVmVyc2lvbiA9IHRoaXMuaWRlbnRpdHlWZXJzaW9uO1xuICAgIGlmICghdGhpcy5wYXVzZWQpIHtcbiAgICAgIHRoaXMuaWRlbnRpdHlWZXJzaW9uID0gYmFzZVZlcnNpb24gKyAxO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJBdXRoZW50aWNhdGVcIixcbiAgICAgIGJhc2VWZXJzaW9uOiBiYXNlVmVyc2lvbixcbiAgICAgIC4uLnRoaXMuYXV0aCxcbiAgICB9O1xuICB9XG5cbiAgc2V0QWRtaW5BdXRoKFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgYWN0aW5nQXM/OiBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzLFxuICApOiBBZG1pbkF1dGhlbnRpY2F0aW9uIHtcbiAgICBjb25zdCBhdXRoOiB0eXBlb2YgdGhpcy5hdXRoICYge1xuICAgICAgdG9rZW5UeXBlOiBcIkFkbWluXCI7XG4gICAgfSA9IHtcbiAgICAgIHRva2VuVHlwZTogXCJBZG1pblwiLFxuICAgICAgdmFsdWUsXG4gICAgICBpbXBlcnNvbmF0aW5nOiBhY3RpbmdBcyxcbiAgICB9O1xuICAgIHRoaXMuYXV0aCA9IGF1dGg7XG4gICAgY29uc3QgYmFzZVZlcnNpb24gPSB0aGlzLmlkZW50aXR5VmVyc2lvbjtcbiAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICB0aGlzLmlkZW50aXR5VmVyc2lvbiA9IGJhc2VWZXJzaW9uICsgMTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiQXV0aGVudGljYXRlXCIsXG4gICAgICBiYXNlVmVyc2lvbjogYmFzZVZlcnNpb24sXG4gICAgICAuLi5hdXRoLFxuICAgIH07XG4gIH1cblxuICBjbGVhckF1dGgoKTogQXV0aGVudGljYXRlIHtcbiAgICB0aGlzLmF1dGggPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tYXJrQXV0aENvbXBsZXRpb24oKTtcbiAgICBjb25zdCBiYXNlVmVyc2lvbiA9IHRoaXMuaWRlbnRpdHlWZXJzaW9uO1xuICAgIGlmICghdGhpcy5wYXVzZWQpIHtcbiAgICAgIHRoaXMuaWRlbnRpdHlWZXJzaW9uID0gYmFzZVZlcnNpb24gKyAxO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJBdXRoZW50aWNhdGVcIixcbiAgICAgIHRva2VuVHlwZTogXCJOb25lXCIsXG4gICAgICBiYXNlVmVyc2lvbjogYmFzZVZlcnNpb24sXG4gICAgfTtcbiAgfVxuXG4gIGhhc0F1dGgoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5hdXRoO1xuICB9XG5cbiAgaXNOZXdBdXRoKHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5hdXRoPy52YWx1ZSAhPT0gdmFsdWU7XG4gIH1cblxuICBxdWVyeVBhdGgocXVlcnlJZDogUXVlcnlJZCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhdGhBbmRBcmdzID0gdGhpcy5xdWVyeUlkVG9Ub2tlbi5nZXQocXVlcnlJZCk7XG4gICAgaWYgKHBhdGhBbmRBcmdzKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWVyeVNldC5nZXQocGF0aEFuZEFyZ3MpIS5jYW5vbmljYWxpemVkVWRmUGF0aDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBxdWVyeUFyZ3MocXVlcnlJZDogUXVlcnlJZCk6IFJlY29yZDxzdHJpbmcsIFZhbHVlPiB8IG51bGwge1xuICAgIGNvbnN0IHBhdGhBbmRBcmdzID0gdGhpcy5xdWVyeUlkVG9Ub2tlbi5nZXQocXVlcnlJZCk7XG4gICAgaWYgKHBhdGhBbmRBcmdzKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWVyeVNldC5nZXQocGF0aEFuZEFyZ3MpIS5hcmdzO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHF1ZXJ5VG9rZW4ocXVlcnlJZDogUXVlcnlJZCk6IFF1ZXJ5VG9rZW4gfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeUlkVG9Ub2tlbi5nZXQocXVlcnlJZCkgPz8gbnVsbDtcbiAgfVxuXG4gIHF1ZXJ5Sm91cm5hbChxdWVyeVRva2VuOiBRdWVyeVRva2VuKTogUXVlcnlKb3VybmFsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5xdWVyeVNldC5nZXQocXVlcnlUb2tlbik/LmpvdXJuYWw7XG4gIH1cblxuICByZXN0YXJ0KFxuICAgIG9sZFJlbW90ZVF1ZXJ5UmVzdWx0czogU2V0PFF1ZXJ5SWQ+LFxuICApOiBbUXVlcnlTZXRNb2RpZmljYXRpb24sIChBdXRoZW50aWNhdGUgfCB1bmRlZmluZWQpP10ge1xuICAgIC8vIFJlc3RhcnQgd29ya3Mgd2hldGhlciB3ZSBhcmUgcGF1c2VkIG9yIHVucGF1c2VkLlxuICAgIC8vIFRoZSBgdGhpcy5wZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zYCBpcyBub3QgdXNlZFxuICAgIC8vIHdoZW4gcmVzdGFydGluZyBhcyB0aGUgQWRkUXVlcnkgYW5kIFJlbW92ZVF1ZXJ5IGFyZSBjb21wdXRlZFxuICAgIC8vIGZyb20gc2NyYXRjaCwgYmFzZWQgb24gdGhlIG9sZCByZW1vdGUgcXVlcnkgcmVzdWx0cywgaGVyZS5cbiAgICB0aGlzLnVucGF1c2UoKTtcblxuICAgIHRoaXMub3V0c3RhbmRpbmdRdWVyaWVzT2xkZXJUaGFuUmVzdGFydC5jbGVhcigpO1xuICAgIGNvbnN0IG1vZGlmaWNhdGlvbnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGxvY2FsUXVlcnkgb2YgdGhpcy5xdWVyeVNldC52YWx1ZXMoKSkge1xuICAgICAgY29uc3QgYWRkOiBBZGRRdWVyeSA9IHtcbiAgICAgICAgdHlwZTogXCJBZGRcIixcbiAgICAgICAgcXVlcnlJZDogbG9jYWxRdWVyeS5pZCxcbiAgICAgICAgdWRmUGF0aDogbG9jYWxRdWVyeS5jYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgICAgYXJnczogW2NvbnZleFRvSnNvbihsb2NhbFF1ZXJ5LmFyZ3MpXSxcbiAgICAgICAgam91cm5hbDogbG9jYWxRdWVyeS5qb3VybmFsLFxuICAgICAgICBjb21wb25lbnRQYXRoOiBsb2NhbFF1ZXJ5LmNvbXBvbmVudFBhdGgsXG4gICAgICB9O1xuICAgICAgbW9kaWZpY2F0aW9ucy5wdXNoKGFkZCk7XG5cbiAgICAgIGlmICghb2xkUmVtb3RlUXVlcnlSZXN1bHRzLmhhcyhsb2NhbFF1ZXJ5LmlkKSkge1xuICAgICAgICB0aGlzLm91dHN0YW5kaW5nUXVlcmllc09sZGVyVGhhblJlc3RhcnQuYWRkKGxvY2FsUXVlcnkuaWQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXJ5U2V0VmVyc2lvbiA9IDE7XG4gICAgY29uc3QgcXVlcnlTZXQ6IFF1ZXJ5U2V0TW9kaWZpY2F0aW9uID0ge1xuICAgICAgdHlwZTogXCJNb2RpZnlRdWVyeVNldFwiLFxuICAgICAgYmFzZVZlcnNpb246IDAsXG4gICAgICBuZXdWZXJzaW9uOiAxLFxuICAgICAgbW9kaWZpY2F0aW9ucyxcbiAgICB9O1xuICAgIC8vIElmIHRoZXJlJ3Mgbm8gYXV0aCwgbm8gbmVlZCB0byBzZW5kIGFuIHVwZGF0ZSBhcyB0aGUgc2VydmVyIHdpbGwgYWxzbyBzdGFydCB3aXRoIGFuIHVua25vd24gaWRlbnRpdHkuXG4gICAgaWYgKCF0aGlzLmF1dGgpIHtcbiAgICAgIHRoaXMuaWRlbnRpdHlWZXJzaW9uID0gMDtcbiAgICAgIHJldHVybiBbcXVlcnlTZXQsIHVuZGVmaW5lZF07XG4gICAgfVxuICAgIHRoaXMub3V0c3RhbmRpbmdBdXRoT2xkZXJUaGFuUmVzdGFydCA9IHRydWU7XG4gICAgY29uc3QgYXV0aGVudGljYXRlOiBBdXRoZW50aWNhdGUgPSB7XG4gICAgICB0eXBlOiBcIkF1dGhlbnRpY2F0ZVwiLFxuICAgICAgYmFzZVZlcnNpb246IDAsXG4gICAgICAuLi50aGlzLmF1dGgsXG4gICAgfTtcbiAgICB0aGlzLmlkZW50aXR5VmVyc2lvbiA9IDE7XG4gICAgcmV0dXJuIFtxdWVyeVNldCwgYXV0aGVudGljYXRlXTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc3VtZSgpOiBbUXVlcnlTZXRNb2RpZmljYXRpb24gfCB1bmRlZmluZWQsIEF1dGhlbnRpY2F0ZSB8IHVuZGVmaW5lZF0ge1xuICAgIGNvbnN0IHF1ZXJ5U2V0OiBRdWVyeVNldE1vZGlmaWNhdGlvbiB8IHVuZGVmaW5lZCA9XG4gICAgICB0aGlzLnBlbmRpbmdRdWVyeVNldE1vZGlmaWNhdGlvbnMuc2l6ZSA+IDBcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB0eXBlOiBcIk1vZGlmeVF1ZXJ5U2V0XCIsXG4gICAgICAgICAgICBiYXNlVmVyc2lvbjogdGhpcy5xdWVyeVNldFZlcnNpb24sXG4gICAgICAgICAgICBuZXdWZXJzaW9uOiArK3RoaXMucXVlcnlTZXRWZXJzaW9uLFxuICAgICAgICAgICAgbW9kaWZpY2F0aW9uczogQXJyYXkuZnJvbShcbiAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nUXVlcnlTZXRNb2RpZmljYXRpb25zLnZhbHVlcygpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IGF1dGhlbnRpY2F0ZTogQXV0aGVudGljYXRlIHwgdW5kZWZpbmVkID1cbiAgICAgIHRoaXMuYXV0aCAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8ge1xuICAgICAgICAgICAgdHlwZTogXCJBdXRoZW50aWNhdGVcIixcbiAgICAgICAgICAgIGJhc2VWZXJzaW9uOiB0aGlzLmlkZW50aXR5VmVyc2lvbisrLFxuICAgICAgICAgICAgLi4udGhpcy5hdXRoLFxuICAgICAgICAgIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLnVucGF1c2UoKTtcblxuICAgIHJldHVybiBbcXVlcnlTZXQsIGF1dGhlbnRpY2F0ZV07XG4gIH1cblxuICBwcml2YXRlIHVucGF1c2UoKSB7XG4gICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICB0aGlzLnBlbmRpbmdRdWVyeVNldE1vZGlmaWNhdGlvbnMuY2xlYXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlU3Vic2NyaWJlcihcbiAgICBxdWVyeVRva2VuOiBRdWVyeVRva2VuLFxuICApOiBRdWVyeVNldE1vZGlmaWNhdGlvbiB8IG51bGwge1xuICAgIGNvbnN0IGxvY2FsUXVlcnkgPSB0aGlzLnF1ZXJ5U2V0LmdldChxdWVyeVRva2VuKSE7XG5cbiAgICBpZiAobG9jYWxRdWVyeS5udW1TdWJzY3JpYmVycyA+IDEpIHtcbiAgICAgIGxvY2FsUXVlcnkubnVtU3Vic2NyaWJlcnMgLT0gMTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnF1ZXJ5U2V0LmRlbGV0ZShxdWVyeVRva2VuKTtcbiAgICAgIHRoaXMucXVlcnlJZFRvVG9rZW4uZGVsZXRlKGxvY2FsUXVlcnkuaWQpO1xuICAgICAgdGhpcy5vdXRzdGFuZGluZ1F1ZXJpZXNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShsb2NhbFF1ZXJ5LmlkKTtcbiAgICAgIGNvbnN0IGJhc2VWZXJzaW9uID0gdGhpcy5xdWVyeVNldFZlcnNpb247XG4gICAgICBjb25zdCBuZXdWZXJzaW9uID0gdGhpcy5xdWVyeVNldFZlcnNpb24gKyAxO1xuICAgICAgY29uc3QgcmVtb3ZlOiBSZW1vdmVRdWVyeSA9IHtcbiAgICAgICAgdHlwZTogXCJSZW1vdmVcIixcbiAgICAgICAgcXVlcnlJZDogbG9jYWxRdWVyeS5pZCxcbiAgICAgIH07XG4gICAgICBpZiAodGhpcy5wYXVzZWQpIHtcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1F1ZXJ5U2V0TW9kaWZpY2F0aW9ucy5oYXMobG9jYWxRdWVyeS5pZCkpIHtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdRdWVyeVNldE1vZGlmaWNhdGlvbnMuZGVsZXRlKGxvY2FsUXVlcnkuaWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucGVuZGluZ1F1ZXJ5U2V0TW9kaWZpY2F0aW9ucy5zZXQobG9jYWxRdWVyeS5pZCwgcmVtb3ZlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWVyeVNldFZlcnNpb24gPSBuZXdWZXJzaW9uO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJNb2RpZnlRdWVyeVNldFwiLFxuICAgICAgICBiYXNlVmVyc2lvbixcbiAgICAgICAgbmV3VmVyc2lvbixcbiAgICAgICAgbW9kaWZpY2F0aW9uczogW3JlbW92ZV0sXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/local_state.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/metrics.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/metrics.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMarksReport: () => (/* binding */ getMarksReport),\n/* harmony export */   mark: () => (/* binding */ mark)\n/* harmony export */ });\n\nconst markNames = [\n    \"convexClientConstructed\",\n    \"convexWebSocketOpen\",\n    \"convexFirstMessageReceived\"\n];\nfunction mark(name, sessionId) {\n    const detail = {\n        sessionId\n    };\n    if (typeof performance === \"undefined\" || !performance.mark) return;\n    performance.mark(name, {\n        detail\n    });\n}\nfunction performanceMarkToJson(mark2) {\n    let name = mark2.name.slice(\"convex\".length);\n    name = name.charAt(0).toLowerCase() + name.slice(1);\n    return {\n        name,\n        startTime: mark2.startTime\n    };\n}\nfunction getMarksReport(sessionId) {\n    if (typeof performance === \"undefined\" || !performance.getEntriesByName) {\n        return [];\n    }\n    const allMarks = [];\n    for (const name of markNames){\n        const marks = performance.getEntriesByName(name).filter((entry)=>entry.entryType === \"mark\").filter((mark2)=>mark2.detail.sessionId === sessionId);\n        allMarks.push(...marks);\n    }\n    return allMarks.map(performanceMarkToJson);\n} //# sourceMappingURL=metrics.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9tZXRyaWNzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNBLE1BQU0sWUFBWTtJQUNoQjtJQUNBO0lBQ0E7Q0FDRjtBQVlPLFNBQVMsS0FBSyxNQUFnQixXQUFtQjtJQUN0RCxNQUFNLFNBQXFCO1FBQUU7SUFBVTtJQUd2QyxJQUFJLE9BQU8sZ0JBQWdCLGVBQWUsQ0FBQyxZQUFZLEtBQU07SUFDN0QsWUFBWSxLQUFLLE1BQU07UUFBRTtJQUFPLENBQUM7QUFDbkM7QUFJQSxTQUFTLHNCQUFzQkEsS0FBQUEsRUFBaUM7SUFFOUQsSUFBSSxPQUFPQSxNQUFLLEtBQUssTUFBTSxTQUFTLE1BQU07SUFFMUMsT0FBTyxLQUFLLE9BQU8sQ0FBQyxFQUFFLFlBQVksSUFBSSxLQUFLLE1BQU0sQ0FBQztJQUNsRCxPQUFPO1FBQ0w7UUFDQSxXQUFXQSxNQUFLO0lBQ2xCO0FBQ0Y7QUFVTyxTQUFTLGVBQWUsV0FBK0I7SUFDNUQsSUFBSSxPQUFPLGdCQUFnQixlQUFlLENBQUMsWUFBWSxrQkFBa0I7UUFDdkUsT0FBTyxDQUFDO0lBQ1Y7SUFDQSxNQUFNLFdBQThCLENBQUM7SUFDckMsV0FBVyxRQUFRLFVBQVc7UUFDNUIsTUFBTSxRQUNKLFlBQ0csaUJBQWlCLElBQUksRUFDckIsT0FBTyxDQUFDLFFBQVUsTUFBTSxjQUFjLE1BQU0sRUFDL0MsT0FBTyxDQUFDQSxRQUFTQSxNQUFLLE9BQU8sY0FBYyxTQUFTO1FBQ3RELFNBQVMsS0FBSyxHQUFHLEtBQUs7SUFDeEI7SUFDQSxPQUFPLFNBQVMsSUFBSSxxQkFBcUI7QUFDM0MiLCJzb3VyY2VzIjpbIi9zcmMvYnJvd3Nlci9zeW5jL21ldHJpY3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTWFya3Mgc2hhcmUgYSBnbG9iYWwgbmFtZXNwYWNlIHdpdGggb3RoZXIgZGV2ZWxvcGVyIGNvZGUuXG5jb25zdCBtYXJrTmFtZXMgPSBbXG4gIFwiY29udmV4Q2xpZW50Q29uc3RydWN0ZWRcIixcbiAgXCJjb252ZXhXZWJTb2NrZXRPcGVuXCIsXG4gIFwiY29udmV4Rmlyc3RNZXNzYWdlUmVjZWl2ZWRcIixcbl0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBNYXJrTmFtZSA9ICh0eXBlb2YgbWFya05hbWVzKVtudW1iZXJdO1xuXG4vLyBNYXJrIGRldGFpbHMgYXJlIG5vdCByZXBvcnRlZCB0byB0aGUgc2VydmVyLlxudHlwZSBNYXJrRGV0YWlsID0ge1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbn07XG5cbi8vIGBQZXJmb3JtYW5jZU1hcmtgcyBhcmUgZWZmaWNpZW50IGFuZCBzaG93IHVwIGluIGJyb3dzZXIncyBwZXJmb3JtYW5jZVxuLy8gdGltZWxpbmUuIFRoZXkgY2FuIGJlIGNsZWFyZWQgd2l0aCBgcGVyZm9ybWFuY2UuY2xlYXJNYXJrcygpYC5cbi8vIFRoaXMgaXMgYSBtZW1vcnkgbGVhaywgYnV0IGEgd29ydGh3aGlsZSBvbmU6IGF1dG9tYXRpY1xuLy8gY2xlYW51cCB3b3VsZCBtYWtlIGluLWJyb3dzZXIgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LlxuZXhwb3J0IGZ1bmN0aW9uIG1hcmsobmFtZTogTWFya05hbWUsIHNlc3Npb25JZDogc3RyaW5nKSB7XG4gIGNvbnN0IGRldGFpbDogTWFya0RldGFpbCA9IHsgc2Vzc2lvbklkIH07XG4gIC8vIGBwZXJmb3JtYW5jZWAgQVBJcyBleGlzdHMgaW4gYnJvd3NlcnMsIE5vZGUuanMsIERlbm8sIGFuZCBtb3JlIGJ1dCBpdFxuICAvLyBpcyBub3QgcmVxdWlyZWQgYnkgdGhlIENvbnZleCBjbGllbnQuXG4gIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgPT09IFwidW5kZWZpbmVkXCIgfHwgIXBlcmZvcm1hbmNlLm1hcmspIHJldHVybjtcbiAgcGVyZm9ybWFuY2UubWFyayhuYW1lLCB7IGRldGFpbCB9KTtcbn1cblxuLy8gYFBlcmZvbWFuY2VNYXJrYCBoYXMgYSBidWlsdC1pbiB0b0pTT04oKSBidXQgdGhlIHJldHVybiB0eXBlIHZhcmllc1xuLy8gYmV0d2VlbiBpbXBsZW1lbnRhdGlvbnMsIGUuZy4gTm9kZS5qcyByZXR1cm5zIGRldGFpbHMgYnV0IENocm9tZSBkb2VzIG5vdC5cbmZ1bmN0aW9uIHBlcmZvcm1hbmNlTWFya1RvSnNvbihtYXJrOiBQZXJmb3JtYW5jZU1hcmspOiBNYXJrSnNvbiB7XG4gIC8vIFJlbW92ZSBcImNvbnZleFwiIHByZWZpeFxuICBsZXQgbmFtZSA9IG1hcmsubmFtZS5zbGljZShcImNvbnZleFwiLmxlbmd0aCk7XG4gIC8vIGxvd2VyY2FzZSB0aGUgZmlyc3QgbGV0dGVyXG4gIG5hbWUgPSBuYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgbmFtZS5zbGljZSgxKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lLFxuICAgIHN0YXJ0VGltZTogbWFyay5zdGFydFRpbWUsXG4gIH07XG59XG5cbi8vIFNpbWlsYXIgdG8gdGhlIHJldHVybiB0eXBlIG9mIGBQZXJmb3JtYW5jZU1hcmsudG9Kc29uKClgLlxuZXhwb3J0IHR5cGUgTWFya0pzb24gPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgLy8gYHN0YXJ0VGltZWAgaXMgaW4gbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSB0aW1lIG9yaWdpbiBsaWtlIGBwZXJmb3JtYW5jZS5ub3coKWAuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ET01IaWdoUmVzVGltZVN0YW1wI3RoZV90aW1lX29yaWdpblxuICBzdGFydFRpbWU6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXJrc1JlcG9ydChzZXNzaW9uSWQ6IHN0cmluZyk6IE1hcmtKc29uW10ge1xuICBpZiAodHlwZW9mIHBlcmZvcm1hbmNlID09PSBcInVuZGVmaW5lZFwiIHx8ICFwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlOYW1lKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGNvbnN0IGFsbE1hcmtzOiBQZXJmb3JtYW5jZU1hcmtbXSA9IFtdO1xuICBmb3IgKGNvbnN0IG5hbWUgb2YgbWFya05hbWVzKSB7XG4gICAgY29uc3QgbWFya3MgPSAoXG4gICAgICBwZXJmb3JtYW5jZVxuICAgICAgICAuZ2V0RW50cmllc0J5TmFtZShuYW1lKVxuICAgICAgICAuZmlsdGVyKChlbnRyeSkgPT4gZW50cnkuZW50cnlUeXBlID09PSBcIm1hcmtcIikgYXMgUGVyZm9ybWFuY2VNYXJrW11cbiAgICApLmZpbHRlcigobWFyaykgPT4gbWFyay5kZXRhaWwuc2Vzc2lvbklkID09PSBzZXNzaW9uSWQpO1xuICAgIGFsbE1hcmtzLnB1c2goLi4ubWFya3MpO1xuICB9XG4gIHJldHVybiBhbGxNYXJrcy5tYXAocGVyZm9ybWFuY2VNYXJrVG9Kc29uKTtcbn1cbiJdLCJuYW1lcyI6WyJtYXJrIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/metrics.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js":
/*!******************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OptimisticQueryResults: () => (/* binding */ OptimisticQueryResults)\n/* harmony export */ });\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nclass OptimisticLocalStoreImpl {\n    constructor(queryResults){\n        // A references of the query results in OptimisticQueryResults\n        __publicField(this, \"queryResults\");\n        // All of the queries modified by this class\n        __publicField(this, \"modifiedQueries\");\n        this.queryResults = queryResults;\n        this.modifiedQueries = [];\n    }\n    getQuery(query, ...args) {\n        const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args[0]);\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(query);\n        const queryResult = this.queryResults.get((0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__.serializePathAndArgs)(name, queryArgs));\n        if (queryResult === void 0) {\n            return void 0;\n        }\n        return OptimisticLocalStoreImpl.queryValue(queryResult.result);\n    }\n    getAllQueries(query) {\n        const queriesWithName = [];\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(query);\n        for (const queryResult of this.queryResults.values()){\n            if (queryResult.udfPath === (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__.canonicalizeUdfPath)(name)) {\n                queriesWithName.push({\n                    args: queryResult.args,\n                    value: OptimisticLocalStoreImpl.queryValue(queryResult.result)\n                });\n            }\n        }\n        return queriesWithName;\n    }\n    setQuery(queryReference, args, value) {\n        const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args);\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(queryReference);\n        const queryToken = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_3__.serializePathAndArgs)(name, queryArgs);\n        let result;\n        if (value === void 0) {\n            result = void 0;\n        } else {\n            result = {\n                success: true,\n                value,\n                // It's an optimistic update, so there are no function logs to show.\n                logLines: []\n            };\n        }\n        const query = {\n            udfPath: name,\n            args: queryArgs,\n            result\n        };\n        this.queryResults.set(queryToken, query);\n        this.modifiedQueries.push(queryToken);\n    }\n    static queryValue(result) {\n        if (result === void 0) {\n            return void 0;\n        } else if (result.success) {\n            return result.value;\n        } else {\n            return void 0;\n        }\n    }\n}\nclass OptimisticQueryResults {\n    constructor(){\n        __publicField(this, \"queryResults\");\n        __publicField(this, \"optimisticUpdates\");\n        this.queryResults = /* @__PURE__ */ new Map();\n        this.optimisticUpdates = [];\n    }\n    /**\n   * Apply all optimistic updates on top of server query results\n   */ ingestQueryResultsFromServer(serverQueryResults, optimisticUpdatesToDrop) {\n        this.optimisticUpdates = this.optimisticUpdates.filter((updateAndId)=>{\n            return !optimisticUpdatesToDrop.has(updateAndId.mutationId);\n        });\n        const oldQueryResults = this.queryResults;\n        this.queryResults = new Map(serverQueryResults);\n        const localStore = new OptimisticLocalStoreImpl(this.queryResults);\n        for (const updateAndId of this.optimisticUpdates){\n            updateAndId.update(localStore);\n        }\n        const changedQueries = [];\n        for (const [queryToken, query] of this.queryResults){\n            const oldQuery = oldQueryResults.get(queryToken);\n            if (oldQuery === void 0 || oldQuery.result !== query.result) {\n                changedQueries.push(queryToken);\n            }\n        }\n        return changedQueries;\n    }\n    applyOptimisticUpdate(update, mutationId) {\n        this.optimisticUpdates.push({\n            update,\n            mutationId\n        });\n        const localStore = new OptimisticLocalStoreImpl(this.queryResults);\n        update(localStore);\n        return localStore.modifiedQueries;\n    }\n    /**\n   * \"Raw\" with respect to errors vs values, but query results still have\n   * optimistic updates applied.\n   *\n   * @internal\n   */ rawQueryResult(queryToken) {\n        const query = this.queryResults.get(queryToken);\n        if (query === void 0) {\n            return void 0;\n        }\n        return query.result;\n    }\n    queryResult(queryToken) {\n        const query = this.queryResults.get(queryToken);\n        if (query === void 0) {\n            return void 0;\n        }\n        const result = query.result;\n        if (result === void 0) {\n            return void 0;\n        } else if (result.success) {\n            return result.value;\n        } else {\n            if (result.errorData !== void 0) {\n                throw (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.forwardData)(result, new _values_errors_js__WEBPACK_IMPORTED_MODULE_4__.ConvexError((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"query\", query.udfPath, result)));\n            }\n            throw new Error((0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.createHybridErrorStacktrace)(\"query\", query.udfPath, result));\n        }\n    }\n    hasQueryResult(queryToken) {\n        return this.queryResults.get(queryToken) !== void 0;\n    }\n    /**\n   * @internal\n   */ queryLogs(queryToken) {\n        const query = this.queryResults.get(queryToken);\n        return query?.result?.logLines;\n    }\n} //# sourceMappingURL=optimistic_updates_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9vcHRpbWlzdGljX3VwZGF0ZXNfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNTztBQUNtQjtBQUUrQjtBQVFsRDtBQUNxQjtBQVk1QixNQUFNLHlCQUF5RDtJQU83RCxZQUFZLGFBQStCO1FBTDNDO1FBQUEsb0JBQWlCO1FBR2pCO1FBQUEsb0JBQVM7UUFHUCxLQUFLLGVBQWU7UUFDcEIsS0FBSyxrQkFBa0IsQ0FBQztJQUMxQjtJQUVBLFNBQ0UsVUFDRyxNQUNvQztRQUN2QyxNQUFNLFlBQVksMkRBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxNQUFNLE9BQU8sK0RBQWUsQ0FBQyxLQUFLO1FBQ2xDLE1BQU0sY0FBYyxLQUFLLGFBQWEsSUFDcEMsd0VBQW9CLENBQUMsTUFBTSxTQUFTO1FBRXRDLElBQUksZ0JBQWdCLFFBQVc7WUFDN0IsT0FBTztRQUNUO1FBQ0EsT0FBTyx5QkFBeUIsV0FBVyxZQUFZLE1BQU07SUFDL0Q7SUFFQSxjQUNFLE9BSUU7UUFDRixNQUFNLGtCQUdBLENBQUM7UUFDUCxNQUFNLE9BQU8sK0RBQWUsQ0FBQyxLQUFLO1FBQ2xDLFdBQVcsZUFBZSxLQUFLLGFBQWEsT0FBTyxFQUFHO1lBQ3BELElBQUksWUFBWSxZQUFZLHVFQUFtQixDQUFDLElBQUksR0FBRztnQkFDckQsZ0JBQWdCLEtBQUs7b0JBQ25CLE1BQU0sWUFBWTtvQkFDbEIsT0FBTyx5QkFBeUIsV0FBVyxZQUFZLE1BQU07Z0JBQy9ELENBQUM7WUFDSDtRQUNGO1FBQ0EsT0FBTztJQUNUO0lBRUEsU0FDRSxnQkFDQSxNQUNBLE9BQ007UUFDTixNQUFNLFlBQVksMkRBQVMsQ0FBQyxJQUFJO1FBQ2hDLE1BQU0sT0FBTywrREFBZSxDQUFDLGNBQWM7UUFDM0MsTUFBTSxhQUFhLHdFQUFvQixDQUFDLE1BQU0sU0FBUztRQUV2RCxJQUFJO1FBQ0osSUFBSSxVQUFVLFFBQVc7WUFDdkIsU0FBUztRQUNYLE9BQU87WUFDTCxTQUFTO2dCQUNQLFNBQVM7Z0JBQ1Q7Z0JBQUE7Z0JBRUEsVUFBVSxDQUFDO1lBQ2I7UUFDRjtRQUNBLE1BQU0sUUFBZTtZQUNuQixTQUFTO1lBQ1QsTUFBTTtZQUNOO1FBQ0Y7UUFDQSxLQUFLLGFBQWEsSUFBSSxZQUFZLEtBQUs7UUFDdkMsS0FBSyxnQkFBZ0IsS0FBSyxVQUFVO0lBQ3RDO0lBRUEsT0FBZSxXQUNiLFFBQ21CO1FBQ25CLElBQUksV0FBVyxRQUFXO1lBQ3hCLE9BQU87UUFDVCxXQUFXLE9BQU8sU0FBUztZQUN6QixPQUFPLE9BQU87UUFDaEIsT0FBTztZQUtMLE9BQU87UUFDVDtJQUNGO0FBQ0Y7QUF1Qk8sTUFBTSx1QkFBdUI7SUFJbEMsYUFBYztRQUhkLG9CQUFRO1FBQ1Isb0JBQVE7UUFHTixLQUFLLGVBQWUsb0JBQUksSUFBSTtRQUM1QixLQUFLLG9CQUFvQixDQUFDO0lBQzVCO0lBQUE7O0dBQUEsR0FLQSw2QkFDRSxvQkFDQSx5QkFDZ0I7UUFDaEIsS0FBSyxvQkFBb0IsS0FBSyxrQkFBa0IsT0FBTyxDQUFDO1lBQ3RELE9BQU8sQ0FBQyx3QkFBd0IsSUFBSSxZQUFZLFVBQVU7UUFDNUQsQ0FBQztRQUVELE1BQU0sa0JBQWtCLEtBQUs7UUFDN0IsS0FBSyxlQUFlLElBQUksSUFBSSxrQkFBa0I7UUFDOUMsTUFBTSxhQUFhLElBQUkseUJBQXlCLEtBQUssWUFBWTtRQUNqRSxXQUFXLGVBQWUsS0FBSyxrQkFBbUI7WUFDaEQsWUFBWSxPQUFPLFVBQVU7UUFDL0I7UUFJQSxNQUFNLGlCQUFpQyxDQUFDO1FBQ3hDLFdBQVcsQ0FBQyxZQUFZLEtBQUssS0FBSyxLQUFLLGFBQWM7WUFDbkQsTUFBTSxXQUFXLGdCQUFnQixJQUFJLFVBQVU7WUFDL0MsSUFBSSxhQUFhLFVBQWEsU0FBUyxXQUFXLE1BQU0sUUFBUTtnQkFDOUQsZUFBZSxLQUFLLFVBQVU7WUFDaEM7UUFDRjtRQUVBLE9BQU87SUFDVDtJQUVBLHNCQUNFLFFBQ0EsWUFDZ0I7UUFFaEIsS0FBSyxrQkFBa0IsS0FBSztZQUMxQjtZQUNBO1FBQ0YsQ0FBQztRQUNELE1BQU0sYUFBYSxJQUFJLHlCQUF5QixLQUFLLFlBQVk7UUFDakUsT0FBTyxVQUFVO1FBSWpCLE9BQU8sV0FBVztJQUNwQjtJQUFBOzs7OztHQUFBLEdBUUEsZUFBZSxZQUFvRDtRQUNqRSxNQUFNLFFBQVEsS0FBSyxhQUFhLElBQUksVUFBVTtRQUM5QyxJQUFJLFVBQVUsUUFBVztZQUN2QixPQUFPO1FBQ1Q7UUFDQSxPQUFPLE1BQU07SUFDZjtJQUVBLFlBQVksWUFBMkM7UUFDckQsTUFBTSxRQUFRLEtBQUssYUFBYSxJQUFJLFVBQVU7UUFDOUMsSUFBSSxVQUFVLFFBQVc7WUFDdkIsT0FBTztRQUNUO1FBQ0EsTUFBTSxTQUFTLE1BQU07UUFDckIsSUFBSSxXQUFXLFFBQVc7WUFDeEIsT0FBTztRQUNULFdBQVcsT0FBTyxTQUFTO1lBQ3pCLE9BQU8sT0FBTztRQUNoQixPQUFPO1lBQ0wsSUFBSSxPQUFPLGNBQWMsUUFBVztnQkFDbEMsTUFBTSx3REFBVyxDQUNmLFFBQ0EsSUFBSSwwREFBVyxDQUNiLHdFQUEyQixDQUFDLFNBQVMsTUFBTSxTQUFTLE1BQU07WUFHaEU7WUFDQSxNQUFNLElBQUksTUFDUix3RUFBMkIsQ0FBQyxTQUFTLE1BQU0sU0FBUyxNQUFNO1FBRTlEO0lBQ0Y7SUFFQSxlQUFlLFlBQWlDO1FBQzlDLE9BQU8sS0FBSyxhQUFhLElBQUksVUFBVSxNQUFNO0lBQy9DO0lBQUE7O0dBQUEsR0FLQSxVQUFVLFlBQThDO1FBQ3RELE1BQU0sUUFBUSxLQUFLLGFBQWEsSUFBSSxVQUFVO1FBQzlDLE9BQU8sT0FBTyxRQUFRO0lBQ3hCO0FBQ0YiLCJzb3VyY2VzIjpbIi9zcmMvYnJvd3Nlci9zeW5jL29wdGltaXN0aWNfdXBkYXRlc19pbXBsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEZ1bmN0aW9uQXJncyxcbiAgRnVuY3Rpb25SZWZlcmVuY2UsXG4gIEZ1bmN0aW9uUmV0dXJuVHlwZSxcbiAgT3B0aW9uYWxSZXN0QXJncyxcbiAgZ2V0RnVuY3Rpb25OYW1lLFxufSBmcm9tIFwiLi4vLi4vc2VydmVyL2FwaS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VBcmdzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVIeWJyaWRFcnJvclN0YWNrdHJhY2UsIGZvcndhcmREYXRhIH0gZnJvbSBcIi4uL2xvZ2dpbmcuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVzdWx0IH0gZnJvbSBcIi4vZnVuY3Rpb25fcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBPcHRpbWlzdGljTG9jYWxTdG9yZSB9IGZyb20gXCIuL29wdGltaXN0aWNfdXBkYXRlcy5qc1wiO1xuaW1wb3J0IHsgUmVxdWVzdElkIH0gZnJvbSBcIi4vcHJvdG9jb2wuanNcIjtcbmltcG9ydCB7XG4gIGNhbm9uaWNhbGl6ZVVkZlBhdGgsXG4gIFF1ZXJ5VG9rZW4sXG4gIHNlcmlhbGl6ZVBhdGhBbmRBcmdzLFxufSBmcm9tIFwiLi91ZGZfcGF0aF91dGlscy5qc1wiO1xuaW1wb3J0IHsgQ29udmV4RXJyb3IgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2Vycm9ycy5qc1wiO1xuXG4vKipcbiAqIEFuIG9wdGltaXN0aWMgdXBkYXRlIGZ1bmN0aW9uIHRoYXQgaGFzIGJlZW4gY3VycmllZCBvdmVyIGl0cyBhcmd1bWVudHMuXG4gKi9cbnR5cGUgV3JhcHBlZE9wdGltaXN0aWNVcGRhdGUgPSAobG9jYVF1ZXJ5U3RvcmU6IE9wdGltaXN0aWNMb2NhbFN0b3JlKSA9PiB2b2lkO1xuXG4vKipcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBgT3B0aW1pc3RpY0xvY2FsU3RvcmVgLlxuICpcbiAqIFRoaXMgY2xhc3MgcHJvdmlkZXMgdGhlIGludGVyZmFjZSBmb3Igb3B0aW1pc3RpYyB1cGRhdGVzIHRvIG1vZGlmeSBxdWVyeSByZXN1bHRzLlxuICovXG5jbGFzcyBPcHRpbWlzdGljTG9jYWxTdG9yZUltcGwgaW1wbGVtZW50cyBPcHRpbWlzdGljTG9jYWxTdG9yZSB7XG4gIC8vIEEgcmVmZXJlbmNlcyBvZiB0aGUgcXVlcnkgcmVzdWx0cyBpbiBPcHRpbWlzdGljUXVlcnlSZXN1bHRzXG4gIHByaXZhdGUgcmVhZG9ubHkgcXVlcnlSZXN1bHRzOiBRdWVyeVJlc3VsdHNNYXA7XG5cbiAgLy8gQWxsIG9mIHRoZSBxdWVyaWVzIG1vZGlmaWVkIGJ5IHRoaXMgY2xhc3NcbiAgcmVhZG9ubHkgbW9kaWZpZWRRdWVyaWVzOiBRdWVyeVRva2VuW107XG5cbiAgY29uc3RydWN0b3IocXVlcnlSZXN1bHRzOiBRdWVyeVJlc3VsdHNNYXApIHtcbiAgICB0aGlzLnF1ZXJ5UmVzdWx0cyA9IHF1ZXJ5UmVzdWx0cztcbiAgICB0aGlzLm1vZGlmaWVkUXVlcmllcyA9IFtdO1xuICB9XG5cbiAgZ2V0UXVlcnk8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxRdWVyeT5cbiAgKTogdW5kZWZpbmVkIHwgRnVuY3Rpb25SZXR1cm5UeXBlPFF1ZXJ5PiB7XG4gICAgY29uc3QgcXVlcnlBcmdzID0gcGFyc2VBcmdzKGFyZ3NbMF0pO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUocXVlcnkpO1xuICAgIGNvbnN0IHF1ZXJ5UmVzdWx0ID0gdGhpcy5xdWVyeVJlc3VsdHMuZ2V0KFxuICAgICAgc2VyaWFsaXplUGF0aEFuZEFyZ3MobmFtZSwgcXVlcnlBcmdzKSxcbiAgICApO1xuICAgIGlmIChxdWVyeVJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gT3B0aW1pc3RpY0xvY2FsU3RvcmVJbXBsLnF1ZXJ5VmFsdWUocXVlcnlSZXN1bHQucmVzdWx0KTtcbiAgfVxuXG4gIGdldEFsbFF1ZXJpZXM8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICk6IHtcbiAgICBhcmdzOiBGdW5jdGlvbkFyZ3M8UXVlcnk+O1xuICAgIHZhbHVlOiB1bmRlZmluZWQgfCBGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+O1xuICB9W10ge1xuICAgIGNvbnN0IHF1ZXJpZXNXaXRoTmFtZToge1xuICAgICAgYXJnczogRnVuY3Rpb25BcmdzPFF1ZXJ5PjtcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQgfCBGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+O1xuICAgIH1bXSA9IFtdO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUocXVlcnkpO1xuICAgIGZvciAoY29uc3QgcXVlcnlSZXN1bHQgb2YgdGhpcy5xdWVyeVJlc3VsdHMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChxdWVyeVJlc3VsdC51ZGZQYXRoID09PSBjYW5vbmljYWxpemVVZGZQYXRoKG5hbWUpKSB7XG4gICAgICAgIHF1ZXJpZXNXaXRoTmFtZS5wdXNoKHtcbiAgICAgICAgICBhcmdzOiBxdWVyeVJlc3VsdC5hcmdzIGFzIEZ1bmN0aW9uQXJnczxRdWVyeT4sXG4gICAgICAgICAgdmFsdWU6IE9wdGltaXN0aWNMb2NhbFN0b3JlSW1wbC5xdWVyeVZhbHVlKHF1ZXJ5UmVzdWx0LnJlc3VsdCksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcXVlcmllc1dpdGhOYW1lO1xuICB9XG5cbiAgc2V0UXVlcnk8UXVlcnlSZWZlcmVuY2UgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeVJlZmVyZW5jZTogUXVlcnlSZWZlcmVuY2UsXG4gICAgYXJnczogRnVuY3Rpb25BcmdzPFF1ZXJ5UmVmZXJlbmNlPixcbiAgICB2YWx1ZTogdW5kZWZpbmVkIHwgRnVuY3Rpb25SZXR1cm5UeXBlPFF1ZXJ5UmVmZXJlbmNlPixcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcXVlcnlBcmdzID0gcGFyc2VBcmdzKGFyZ3MpO1xuICAgIGNvbnN0IG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUocXVlcnlSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW4gPSBzZXJpYWxpemVQYXRoQW5kQXJncyhuYW1lLCBxdWVyeUFyZ3MpO1xuXG4gICAgbGV0IHJlc3VsdDogRnVuY3Rpb25SZXN1bHQgfCB1bmRlZmluZWQ7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgLy8gSXQncyBhbiBvcHRpbWlzdGljIHVwZGF0ZSwgc28gdGhlcmUgYXJlIG5vIGZ1bmN0aW9uIGxvZ3MgdG8gc2hvdy5cbiAgICAgICAgbG9nTGluZXM6IFtdLFxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnk6IFF1ZXJ5ID0ge1xuICAgICAgdWRmUGF0aDogbmFtZSxcbiAgICAgIGFyZ3M6IHF1ZXJ5QXJncyxcbiAgICAgIHJlc3VsdCxcbiAgICB9O1xuICAgIHRoaXMucXVlcnlSZXN1bHRzLnNldChxdWVyeVRva2VuLCBxdWVyeSk7XG4gICAgdGhpcy5tb2RpZmllZFF1ZXJpZXMucHVzaChxdWVyeVRva2VuKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIHF1ZXJ5VmFsdWUoXG4gICAgcmVzdWx0OiBGdW5jdGlvblJlc3VsdCB8IHVuZGVmaW5lZCxcbiAgKTogVmFsdWUgfCB1bmRlZmluZWQge1xuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGUgcXVlcnkgaXMgYW4gZXJyb3Igc3RhdGUsIGp1c3QgcmV0dXJuIGB1bmRlZmluZWRgIGFzIHRob3VnaFxuICAgICAgLy8gaXQncyBsb2FkaW5nLiBPcHRpbWlzdGljIHVwZGF0ZXMgc2hvdWxkIGFscmVhZHkgaGFuZGxlIGB1bmRlZmluZWRgIHdlbGxcbiAgICAgIC8vIGFuZCB0aGVyZSBpc24ndCBhIG5lZWQgdG8gYnJlYWsgdGhlIHdob2xlIHVwZGF0ZSBiZWNhdXNlIGl0IHRyaWVkXG4gICAgICAvLyB0byBsb2FkIGEgc2luZ2xlIHF1ZXJ5IHRoYXQgZXJyb3JlZC5cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgT3B0aW1pc3RpY1VwZGF0ZUFuZElkID0ge1xuICB1cGRhdGU6IFdyYXBwZWRPcHRpbWlzdGljVXBkYXRlO1xuICBtdXRhdGlvbklkOiBSZXF1ZXN0SWQ7XG59O1xuXG50eXBlIFF1ZXJ5ID0ge1xuICAvLyB1bmRlZmluZWQgbWVhbnMgdGhlIHF1ZXJ5IHdhcyBzZXQgdG8gYmUgbG9hZGluZyAodW5kZWZpbmVkKSBpbiBhbiBvcHRpbWlzdGljIHVwZGF0ZS5cbiAgLy8gTm90ZSB0aGF0IHdlIGNhbiBhbHNvIGhhdmUgcXVlcmllcyBub3QgcHJlc2VudCBpbiB0aGUgUXVlcnlSZXN1bHRNYXBcbiAgLy8gYXQgYWxsIGJlY2F1c2UgdGhleSBhcmUgc3RpbGwgbG9hZGluZyBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGhhdmUgbm8gb3B0aW1pc3RpYyB1cGRhdGVcbiAgLy8gc2V0dGluZyBhbiBvcHRpbWlzdGljIHZhbHVlIGluIGFkdmFuY2UuXG4gIHJlc3VsdDogRnVuY3Rpb25SZXN1bHQgfCB1bmRlZmluZWQ7XG4gIHVkZlBhdGg6IHN0cmluZztcbiAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+O1xufTtcbmV4cG9ydCB0eXBlIFF1ZXJ5UmVzdWx0c01hcCA9IE1hcDxRdWVyeVRva2VuLCBRdWVyeT47XG5cbnR5cGUgQ2hhbmdlZFF1ZXJpZXMgPSBRdWVyeVRva2VuW107XG5cbi8qKlxuICogQSB2aWV3IG9mIGFsbCBvZiBvdXIgcXVlcnkgcmVzdWx0cyB3aXRoIG9wdGltaXN0aWMgdXBkYXRlcyBhcHBsaWVkIG9uIHRvcC5cbiAqL1xuZXhwb3J0IGNsYXNzIE9wdGltaXN0aWNRdWVyeVJlc3VsdHMge1xuICBwcml2YXRlIHF1ZXJ5UmVzdWx0czogUXVlcnlSZXN1bHRzTWFwO1xuICBwcml2YXRlIG9wdGltaXN0aWNVcGRhdGVzOiBPcHRpbWlzdGljVXBkYXRlQW5kSWRbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnF1ZXJ5UmVzdWx0cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLm9wdGltaXN0aWNVcGRhdGVzID0gW107XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYWxsIG9wdGltaXN0aWMgdXBkYXRlcyBvbiB0b3Agb2Ygc2VydmVyIHF1ZXJ5IHJlc3VsdHNcbiAgICovXG4gIGluZ2VzdFF1ZXJ5UmVzdWx0c0Zyb21TZXJ2ZXIoXG4gICAgc2VydmVyUXVlcnlSZXN1bHRzOiBRdWVyeVJlc3VsdHNNYXAsXG4gICAgb3B0aW1pc3RpY1VwZGF0ZXNUb0Ryb3A6IFNldDxSZXF1ZXN0SWQ+LFxuICApOiBDaGFuZ2VkUXVlcmllcyB7XG4gICAgdGhpcy5vcHRpbWlzdGljVXBkYXRlcyA9IHRoaXMub3B0aW1pc3RpY1VwZGF0ZXMuZmlsdGVyKCh1cGRhdGVBbmRJZCkgPT4ge1xuICAgICAgcmV0dXJuICFvcHRpbWlzdGljVXBkYXRlc1RvRHJvcC5oYXModXBkYXRlQW5kSWQubXV0YXRpb25JZCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBvbGRRdWVyeVJlc3VsdHMgPSB0aGlzLnF1ZXJ5UmVzdWx0cztcbiAgICB0aGlzLnF1ZXJ5UmVzdWx0cyA9IG5ldyBNYXAoc2VydmVyUXVlcnlSZXN1bHRzKTtcbiAgICBjb25zdCBsb2NhbFN0b3JlID0gbmV3IE9wdGltaXN0aWNMb2NhbFN0b3JlSW1wbCh0aGlzLnF1ZXJ5UmVzdWx0cyk7XG4gICAgZm9yIChjb25zdCB1cGRhdGVBbmRJZCBvZiB0aGlzLm9wdGltaXN0aWNVcGRhdGVzKSB7XG4gICAgICB1cGRhdGVBbmRJZC51cGRhdGUobG9jYWxTdG9yZSk7XG4gICAgfVxuXG4gICAgLy8gVG8gZmluZCB0aGUgY2hhbmdlZCBxdWVyaWVzLCBqdXN0IGRvIGEgc2hhbGxvdyBjb21wYXJpc29uXG4gICAgLy8gVE9ETyhDWC03MzMpOiBDaGFuZ2UgdGhpcyBzbyB3ZSBhdm9pZCB1bm5lY2Vzc2FyeSByZXJlbmRlcnNcbiAgICBjb25zdCBjaGFuZ2VkUXVlcmllczogQ2hhbmdlZFF1ZXJpZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtxdWVyeVRva2VuLCBxdWVyeV0gb2YgdGhpcy5xdWVyeVJlc3VsdHMpIHtcbiAgICAgIGNvbnN0IG9sZFF1ZXJ5ID0gb2xkUXVlcnlSZXN1bHRzLmdldChxdWVyeVRva2VuKTtcbiAgICAgIGlmIChvbGRRdWVyeSA9PT0gdW5kZWZpbmVkIHx8IG9sZFF1ZXJ5LnJlc3VsdCAhPT0gcXVlcnkucmVzdWx0KSB7XG4gICAgICAgIGNoYW5nZWRRdWVyaWVzLnB1c2gocXVlcnlUb2tlbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZWRRdWVyaWVzO1xuICB9XG5cbiAgYXBwbHlPcHRpbWlzdGljVXBkYXRlKFxuICAgIHVwZGF0ZTogV3JhcHBlZE9wdGltaXN0aWNVcGRhdGUsXG4gICAgbXV0YXRpb25JZDogUmVxdWVzdElkLFxuICApOiBDaGFuZ2VkUXVlcmllcyB7XG4gICAgLy8gQXBwbHkgdGhlIHVwZGF0ZSB0byBvdXIgc3RvcmVcbiAgICB0aGlzLm9wdGltaXN0aWNVcGRhdGVzLnB1c2goe1xuICAgICAgdXBkYXRlLFxuICAgICAgbXV0YXRpb25JZCxcbiAgICB9KTtcbiAgICBjb25zdCBsb2NhbFN0b3JlID0gbmV3IE9wdGltaXN0aWNMb2NhbFN0b3JlSW1wbCh0aGlzLnF1ZXJ5UmVzdWx0cyk7XG4gICAgdXBkYXRlKGxvY2FsU3RvcmUpO1xuXG4gICAgLy8gTm90aWZ5IGFib3V0IGFueSBxdWVyeSByZXN1bHRzIHRoYXQgY2hhbmdlZFxuICAgIC8vIFRPRE8oQ1gtNzMzKTogQ2hhbmdlIHRoaXMgc28gd2UgYXZvaWQgdW5uZWNlc3NhcnkgcmVyZW5kZXJzXG4gICAgcmV0dXJuIGxvY2FsU3RvcmUubW9kaWZpZWRRdWVyaWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiUmF3XCIgd2l0aCByZXNwZWN0IHRvIGVycm9ycyB2cyB2YWx1ZXMsIGJ1dCBxdWVyeSByZXN1bHRzIHN0aWxsIGhhdmVcbiAgICogb3B0aW1pc3RpYyB1cGRhdGVzIGFwcGxpZWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmF3UXVlcnlSZXN1bHQocXVlcnlUb2tlbjogUXVlcnlUb2tlbik6IEZ1bmN0aW9uUmVzdWx0IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMucXVlcnlSZXN1bHRzLmdldChxdWVyeVRva2VuKTtcbiAgICBpZiAocXVlcnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHF1ZXJ5LnJlc3VsdDtcbiAgfVxuXG4gIHF1ZXJ5UmVzdWx0KHF1ZXJ5VG9rZW46IFF1ZXJ5VG9rZW4pOiBWYWx1ZSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5UmVzdWx0cy5nZXQocXVlcnlUb2tlbik7XG4gICAgaWYgKHF1ZXJ5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHF1ZXJ5LnJlc3VsdDtcbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIHJlc3VsdC52YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlc3VsdC5lcnJvckRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBmb3J3YXJkRGF0YShcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgbmV3IENvbnZleEVycm9yKFxuICAgICAgICAgICAgY3JlYXRlSHlicmlkRXJyb3JTdGFja3RyYWNlKFwicXVlcnlcIiwgcXVlcnkudWRmUGF0aCwgcmVzdWx0KSxcbiAgICAgICAgICApLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBjcmVhdGVIeWJyaWRFcnJvclN0YWNrdHJhY2UoXCJxdWVyeVwiLCBxdWVyeS51ZGZQYXRoLCByZXN1bHQpLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBoYXNRdWVyeVJlc3VsdChxdWVyeVRva2VuOiBRdWVyeVRva2VuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlSZXN1bHRzLmdldChxdWVyeVRva2VuKSAhPT0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcXVlcnlMb2dzKHF1ZXJ5VG9rZW46IFF1ZXJ5VG9rZW4pOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnF1ZXJ5UmVzdWx0cy5nZXQocXVlcnlUb2tlbik7XG4gICAgcmV0dXJuIHF1ZXJ5Py5yZXN1bHQ/LmxvZ0xpbmVzO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/optimistic_updates_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PaginatedQueryClient: () => (/* binding */ PaginatedQueryClient)\n/* harmony export */ });\n/* harmony import */ var _udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./udf_path_utils.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\");\n/* harmony import */ var _pagination_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pagination.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/pagination.js\");\n/* harmony import */ var _vendor_long_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../vendor/long.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/long.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nclass PaginatedQueryClient {\n    constructor(client, onTransition){\n        this.client = client;\n        this.onTransition = onTransition;\n        __publicField(this, \"paginatedQuerySet\", /* @__PURE__ */ new Map());\n        // hold onto a real Transition so we can construct synthetic ones with that timestamp\n        __publicField(this, \"lastTransitionTs\");\n        this.lastTransitionTs = _vendor_long_js__WEBPACK_IMPORTED_MODULE_2__.Long.fromNumber(0);\n        this.client.addOnTransitionHandler((transition)=>this.onBaseTransition(transition));\n    }\n    /**\n   * Subscribe to a paginated query.\n   *\n   * @param name - The name of the paginated query function\n   * @param args - Arguments for the query (excluding paginationOpts)\n   * @param options - Pagination options including initialNumItems\n   * @returns Object with paginatedQueryToken and unsubscribe function\n   */ subscribe(name, args, options) {\n        const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.canonicalizeUdfPath)(name);\n        const token = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.serializePaginatedPathAndArgs)(canonicalizedUdfPath, args, options);\n        const unsubscribe = ()=>this.removePaginatedQuerySubscriber(token);\n        const existingEntry = this.paginatedQuerySet.get(token);\n        if (existingEntry) {\n            existingEntry.numSubscribers += 1;\n            return {\n                paginatedQueryToken: token,\n                unsubscribe\n            };\n        }\n        this.paginatedQuerySet.set(token, {\n            token,\n            canonicalizedUdfPath,\n            args,\n            numSubscribers: 1,\n            options: {\n                initialNumItems: options.initialNumItems\n            },\n            nextPageKey: 0,\n            pageKeys: [],\n            pageKeyToQuery: /* @__PURE__ */ new Map(),\n            ongoingSplits: /* @__PURE__ */ new Map(),\n            skip: false,\n            id: options.id\n        });\n        this.addPageToPaginatedQuery(token, null, options.initialNumItems);\n        return {\n            paginatedQueryToken: token,\n            unsubscribe\n        };\n    }\n    /**\n   * Get current results for a paginated query based on local state.\n   *\n   * Throws an error when one of the pages has errored.\n   */ localQueryResult(name, args, options) {\n        const canonicalizedUdfPath = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.canonicalizeUdfPath)(name);\n        const token = (0,_udf_path_utils_js__WEBPACK_IMPORTED_MODULE_0__.serializePaginatedPathAndArgs)(canonicalizedUdfPath, args, options);\n        return this.localQueryResultByToken(token);\n    }\n    /**\n   * @internal\n   */ localQueryResultByToken(token) {\n        const paginatedQuery = this.paginatedQuerySet.get(token);\n        if (!paginatedQuery) {\n            return void 0;\n        }\n        const activePages = this.activePageQueryTokens(paginatedQuery);\n        if (activePages.length === 0) {\n            return {\n                results: [],\n                status: \"LoadingFirstPage\",\n                loadMore: (numItems)=>{\n                    return this.loadMoreOfPaginatedQuery(token, numItems);\n                }\n            };\n        }\n        let allResults = [];\n        let hasUndefined = false;\n        let isDone = false;\n        for (const pageToken of activePages){\n            const result = this.client.localQueryResultByToken(pageToken);\n            if (result === void 0) {\n                hasUndefined = true;\n                isDone = false;\n                continue;\n            }\n            const paginationResult = (0,_pagination_js__WEBPACK_IMPORTED_MODULE_1__.asPaginationResult)(result);\n            allResults = allResults.concat(paginationResult.page);\n            isDone = !!paginationResult.isDone;\n        }\n        let status;\n        if (hasUndefined) {\n            status = allResults.length === 0 ? \"LoadingFirstPage\" : \"LoadingMore\";\n        } else if (isDone) {\n            status = \"Exhausted\";\n        } else {\n            status = \"CanLoadMore\";\n        }\n        return {\n            results: allResults,\n            status,\n            loadMore: (numItems)=>{\n                return this.loadMoreOfPaginatedQuery(token, numItems);\n            }\n        };\n    }\n    onBaseTransition(transition) {\n        const changedBaseTokens = transition.queries.map((q)=>q.token);\n        const changed = this.queriesContainingTokens(changedBaseTokens);\n        let paginatedQueries = [];\n        if (changed.length > 0) {\n            this.processPaginatedQuerySplits(changed, (token)=>this.client.localQueryResultByToken(token));\n            paginatedQueries = changed.map((token)=>({\n                    token,\n                    modification: {\n                        kind: \"Updated\",\n                        result: this.localQueryResultByToken(token)\n                    }\n                }));\n        }\n        const extendedTransition = {\n            ...transition,\n            paginatedQueries\n        };\n        this.onTransition(extendedTransition);\n    }\n    /**\n   * Load more items for a paginated query.\n   *\n   * This *always* causes a transition, the status of the query\n   * has probably changed from \"CanLoadMore\" to \"LoadingMore\".\n   * Data might have changed too: maybe a subscription to this page\n   * query already exists (unlikely but possible) or this page query\n   * has an optimistic update providing some initial data.\n   *\n   * @internal\n   */ loadMoreOfPaginatedQuery(token, numItems) {\n        this.mustGetPaginatedQuery(token);\n        const lastPageToken = this.queryTokenForLastPageOfPaginatedQuery(token);\n        const lastPageResult = this.client.localQueryResultByToken(lastPageToken);\n        if (!lastPageResult) {\n            return false;\n        }\n        const paginationResult = (0,_pagination_js__WEBPACK_IMPORTED_MODULE_1__.asPaginationResult)(lastPageResult);\n        if (paginationResult.isDone) {\n            return false;\n        }\n        this.addPageToPaginatedQuery(token, paginationResult.continueCursor, numItems);\n        const loadMoreTransition = {\n            timestamp: this.lastTransitionTs,\n            reflectedMutations: [],\n            queries: [],\n            paginatedQueries: [\n                {\n                    token,\n                    modification: {\n                        kind: \"Updated\",\n                        result: this.localQueryResultByToken(token)\n                    }\n                }\n            ]\n        };\n        this.onTransition(loadMoreTransition);\n        return true;\n    }\n    /**\n   * @internal\n   */ queriesContainingTokens(queryTokens) {\n        if (queryTokens.length === 0) {\n            return [];\n        }\n        const changed = [];\n        const queryTokenSet = new Set(queryTokens);\n        for (const [paginatedToken, paginatedQuery] of this.paginatedQuerySet){\n            for (const pageToken of this.allQueryTokens(paginatedQuery)){\n                if (queryTokenSet.has(pageToken)) {\n                    changed.push(paginatedToken);\n                    break;\n                }\n            }\n        }\n        return changed;\n    }\n    /**\n   * @internal\n   */ processPaginatedQuerySplits(changed, getResult) {\n        for (const paginatedQueryToken of changed){\n            const paginatedQuery = this.mustGetPaginatedQuery(paginatedQueryToken);\n            const { ongoingSplits, pageKeyToQuery, pageKeys } = paginatedQuery;\n            for (const [pageKey, [splitKey1, splitKey2]] of ongoingSplits){\n                const bothNewPagesLoaded = getResult(pageKeyToQuery.get(splitKey1).queryToken) !== void 0 && getResult(pageKeyToQuery.get(splitKey2).queryToken) !== void 0;\n                if (bothNewPagesLoaded) {\n                    this.completePaginatedQuerySplit(paginatedQuery, pageKey, splitKey1, splitKey2);\n                }\n            }\n            for (const pageKey of pageKeys){\n                if (ongoingSplits.has(pageKey)) {\n                    continue;\n                }\n                const pageToken = pageKeyToQuery.get(pageKey).queryToken;\n                const pageResult = getResult(pageToken);\n                if (!pageResult) {\n                    continue;\n                }\n                const result = (0,_pagination_js__WEBPACK_IMPORTED_MODULE_1__.asPaginationResult)(pageResult);\n                const shouldSplit = result.splitCursor && (result.pageStatus === \"SplitRecommended\" || result.pageStatus === \"SplitRequired\" || // This client-driven page splitting condition will change in the future.\n                result.page.length > paginatedQuery.options.initialNumItems * 2);\n                if (shouldSplit) {\n                    this.splitPaginatedQueryPage(paginatedQuery, pageKey, result.splitCursor, // we just checked\n                    result.continueCursor);\n                }\n            }\n        }\n    }\n    splitPaginatedQueryPage(paginatedQuery, pageKey, splitCursor, continueCursor) {\n        const splitKey1 = paginatedQuery.nextPageKey++;\n        const splitKey2 = paginatedQuery.nextPageKey++;\n        const paginationOpts = {\n            cursor: continueCursor,\n            numItems: paginatedQuery.options.initialNumItems,\n            id: paginatedQuery.id\n        };\n        const firstSubscription = this.client.subscribe(paginatedQuery.canonicalizedUdfPath, {\n            ...paginatedQuery.args,\n            paginationOpts: {\n                ...paginationOpts,\n                cursor: null,\n                // Start from beginning for first split\n                endCursor: splitCursor\n            }\n        });\n        paginatedQuery.pageKeyToQuery.set(splitKey1, firstSubscription);\n        const secondSubscription = this.client.subscribe(paginatedQuery.canonicalizedUdfPath, {\n            ...paginatedQuery.args,\n            paginationOpts: {\n                ...paginationOpts,\n                cursor: splitCursor,\n                endCursor: continueCursor\n            }\n        });\n        paginatedQuery.pageKeyToQuery.set(splitKey2, secondSubscription);\n        paginatedQuery.ongoingSplits.set(pageKey, [\n            splitKey1,\n            splitKey2\n        ]);\n    }\n    /**\n   * @internal\n   */ addPageToPaginatedQuery(token, continueCursor, numItems) {\n        const paginatedQuery = this.mustGetPaginatedQuery(token);\n        const pageKey = paginatedQuery.nextPageKey++;\n        const paginationOpts = {\n            cursor: continueCursor,\n            numItems,\n            id: paginatedQuery.id\n        };\n        const pageArgs = {\n            ...paginatedQuery.args,\n            paginationOpts\n        };\n        const subscription = this.client.subscribe(paginatedQuery.canonicalizedUdfPath, pageArgs);\n        paginatedQuery.pageKeys.push(pageKey);\n        paginatedQuery.pageKeyToQuery.set(pageKey, subscription);\n        return subscription;\n    }\n    removePaginatedQuerySubscriber(token) {\n        const paginatedQuery = this.paginatedQuerySet.get(token);\n        if (!paginatedQuery) {\n            return;\n        }\n        paginatedQuery.numSubscribers -= 1;\n        if (paginatedQuery.numSubscribers > 0) {\n            return;\n        }\n        for (const subscription of paginatedQuery.pageKeyToQuery.values()){\n            subscription.unsubscribe();\n        }\n        this.paginatedQuerySet.delete(token);\n    }\n    completePaginatedQuerySplit(paginatedQuery, pageKey, splitKey1, splitKey2) {\n        const originalQuery = paginatedQuery.pageKeyToQuery.get(pageKey);\n        paginatedQuery.pageKeyToQuery.delete(pageKey);\n        const pageIndex = paginatedQuery.pageKeys.indexOf(pageKey);\n        paginatedQuery.pageKeys.splice(pageIndex, 1, splitKey1, splitKey2);\n        paginatedQuery.ongoingSplits.delete(pageKey);\n        originalQuery.unsubscribe();\n    }\n    /** The query tokens for all active pages, in result order */ activePageQueryTokens(paginatedQuery) {\n        return paginatedQuery.pageKeys.map((pageKey)=>paginatedQuery.pageKeyToQuery.get(pageKey).queryToken);\n    }\n    allQueryTokens(paginatedQuery) {\n        return Array.from(paginatedQuery.pageKeyToQuery.values()).map((sub)=>sub.queryToken);\n    }\n    queryTokenForLastPageOfPaginatedQuery(token) {\n        const paginatedQuery = this.mustGetPaginatedQuery(token);\n        const lastPageKey = paginatedQuery.pageKeys[paginatedQuery.pageKeys.length - 1];\n        if (lastPageKey === void 0) {\n            throw new Error(`No pages for paginated query ${token}`);\n        }\n        return paginatedQuery.pageKeyToQuery.get(lastPageKey).queryToken;\n    }\n    mustGetPaginatedQuery(token) {\n        const paginatedQuery = this.paginatedQuerySet.get(token);\n        if (!paginatedQuery) {\n            throw new Error(\"paginated query no longer exists for token \" + token);\n        }\n        return paginatedQuery;\n    }\n} //# sourceMappingURL=paginated_query_client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9wYWdpbmF0ZWRfcXVlcnlfY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQk87QUFNQTtBQUVjO0FBa0RkLE1BQU0scUJBQXFCO0lBTWhDLFlBQ1UsUUFDQSxhQUNSO1FBRlE7UUFDQTtRQVBWLG9CQUFRLHFCQUNOLG9CQUFJLElBQUk7UUFFVjtRQUFBLG9CQUFRO1FBT04sS0FBSyxtQkFBbUIsaURBQUksQ0FBQyxXQUFXLENBQUM7UUFDekMsS0FBSyxPQUFPLHVCQUF1QixDQUFDLGFBQ2xDLEtBQUssaUJBQWlCLFVBQVU7SUFFcEM7SUFBQTs7Ozs7OztHQUFBLEdBVUEsVUFDRSxNQUNBLE1BQ0EsU0FJQTtRQUNBLE1BQU0sdUJBQXVCLHVFQUFtQixDQUFDLElBQUk7UUFFckQsTUFBTSxRQUFRLGlGQUE2QixDQUN6QyxzQkFDQSxNQUNBO1FBR0YsTUFBTSxjQUFjLElBQU0sS0FBSywrQkFBK0IsS0FBSztRQUVuRSxNQUFNLGdCQUFnQixLQUFLLGtCQUFrQixJQUFJLEtBQUs7UUFDdEQsSUFBSSxlQUFlO1lBQ2pCLGNBQWMsa0JBQWtCO1lBQ2hDLE9BQU87Z0JBQ0wscUJBQXFCO2dCQUNyQjtZQUNGO1FBQ0Y7UUFHQSxLQUFLLGtCQUFrQixJQUFJLE9BQU87WUFDaEM7WUFDQTtZQUNBO1lBQ0EsZ0JBQWdCO1lBQ2hCLFNBQVM7Z0JBQUUsaUJBQWlCLFFBQVE7WUFBZ0I7WUFDcEQsYUFBYTtZQUNiLFVBQVUsQ0FBQztZQUNYLGdCQUFnQixvQkFBSSxJQUFJO1lBQ3hCLGVBQWUsb0JBQUksSUFBSTtZQUN2QixNQUFNO1lBQ04sSUFBSSxRQUFRO1FBQ2QsQ0FBQztRQUVELEtBQUssd0JBQXdCLE9BQU8sTUFBTSxRQUFRLGVBQWU7UUFFakUsT0FBTztZQUNMLHFCQUFxQjtZQUNyQjtRQUNGO0lBQ0Y7SUFBQTs7OztHQUFBLEdBT0EsaUJBQ0UsTUFDQSxN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QUN2RTtRQUNBLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvc3JjL2Jyb3dzZXIvc3luYy9wYWdpbmF0ZWRfcXVlcnlfY2xpZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUGFnaW5hdGVkUXVlcnlDbGllbnQgbWFwcyBzdWJzY3JpcHRpb25zIHRvIHBhZ2luYXRlZCBxdWVyaWVzIHRvIHRoZVxuICogaW5kaXZpZHVhbCBwYWdlIHF1ZXJpZXMgYW5kIGhhbmRsZXMgcGFnZSBzcGxpdHMuXG4gKlxuICogSW4gb3JkZXIgdG8gcHJvY2VzcyBhbGwgbW9kaWZpZWQgcXVlcmllcywgcGFnaW5hdGVkIGFuZCBub3JtYWwsIGluIHRoZSBzYW1lXG4gKiBzeW5jaHJvbm91cyBjYWxsIHRoZSBQYWdpbmF0ZWRRdWVyeUNsaWVudCB0cmFuc2l0aW9uIHNob3VsZCBiZSB1c2VkIGV4Y2x1c2l2ZWx5LlxuICpcbiAqIExpa2UgdGhlIEJhc2VDb252ZXhDbGllbnQsIHRoaXMgY2xpZW50IGlzIG5vdCBDb252ZXggRnVuY3Rpb24gdHlwZS1hd2FyZTogaXQgZGVhbHNcbiAqIHdpdGggcXVlcmllcyBhcyBmdW5jdGlvbnMgdGhhdCByZXR1cm4gVmFsdWUsIG5vdCB0aGUgc3BlY2lmaWMgdmFsdWUuXG4gKiBVc2UgYSBoaWdoZXItbGV2ZWwgbGlicmFyeSB0byBnZXQgdHlwZXMuXG4gKi9cblxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBQYWdpbmF0ZWRRdWVyeVRva2VuLFxuICBRdWVyeVRva2VuLFxuICBzZXJpYWxpemVQYWdpbmF0ZWRQYXRoQW5kQXJncyxcbiAgY2Fub25pY2FsaXplVWRmUGF0aCxcbn0gZnJvbSBcIi4vdWRmX3BhdGhfdXRpbHMuanNcIjtcbmltcG9ydCB7IEJhc2VDb252ZXhDbGllbnQsIFRyYW5zaXRpb24gfSBmcm9tIFwiLi9jbGllbnQuanNcIjtcbmltcG9ydCB7XG4gIFBhZ2luYXRlZFF1ZXJ5UmVzdWx0LFxuICBQYWdpbmF0aW9uU3RhdHVzLFxuICBhc1BhZ2luYXRpb25SZXN1bHQsXG59IGZyb20gXCIuL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IFRTIH0gZnJvbSBcIi4vcHJvdG9jb2wuanNcIjtcbmltcG9ydCB7IExvbmcgfSBmcm9tIFwiLi4vLi4vdmVuZG9yL2xvbmcuanNcIjtcblxudHlwZSBRdWVyeVBhZ2VLZXkgPSBudW1iZXI7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIHBhZ2luYXRlZCBxdWVyeSBzdWJzY3JpcHRpb24gd2l0aCBtdWx0aXBsZSBwYWdlcy5cbiAqXG4gKiBUbyBrbm93IHRoZSBvcmRlciBvZiBwYWdlcyBpdCdzIG5lY2Vzc2FyeSB0byBjb25zdWx0IGBwYWdlS2V5c2AuXG4gKiBUaGUgcGFnZXMgaW4gdGhpcyBhcnJheSBhcmUgYWN0aXZlLCB0aGV5IGNvbnN0aXR1dGUgYSBnYXBsZXNzIHNlcXVlbmNlIG9mIHJlc3VsdHMuXG4gKiBTb21lIHBhZ2VzIGFyZSBub3QgaW4gdGhpcyBhcnJheTogdGhleSBtYXkgYmUgd2FpdGluZyBmb3IgZGF0YSBmb3IgYSBwYWdlIHNwbGl0LlxuICovXG50eXBlIExvY2FsUGFnaW5hdGVkUXVlcnkgPSB7XG4gIHRva2VuOiBQYWdpbmF0ZWRRdWVyeVRva2VuO1xuICBjYW5vbmljYWxpemVkVWRmUGF0aDogc3RyaW5nO1xuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT47IC8vIFdJVEhPVVQgcGFnaW5hdGlvbk9wdHNcbiAgbnVtU3Vic2NyaWJlcnM6IG51bWJlcjtcbiAgb3B0aW9uczogeyBpbml0aWFsTnVtSXRlbXM6IG51bWJlciB9O1xuICBuZXh0UGFnZUtleTogUXVlcnlQYWdlS2V5O1xuICBwYWdlS2V5czogUXVlcnlQYWdlS2V5W107IC8vIFRoZXNlIHBhZ2VzIG1ha2UgdXAgdGhlIGFjdGl2ZSBwYWdlIHF1ZXJpZXMuXG4gIC8vIE1hcCBwYWdlIGtleXMgdG8gdGhlaXIgcXVlcnkgc3Vic2NyaXB0aW9uc1xuICBwYWdlS2V5VG9RdWVyeTogTWFwPFxuICAgIFF1ZXJ5UGFnZUtleSxcbiAgICB7IHF1ZXJ5VG9rZW46IFF1ZXJ5VG9rZW47IHVuc3Vic2NyaWJlOiAoKSA9PiB2b2lkIH1cbiAgPjtcbiAgb25nb2luZ1NwbGl0czogTWFwPFF1ZXJ5UGFnZUtleSwgW1F1ZXJ5UGFnZUtleSwgUXVlcnlQYWdlS2V5XT47XG4gIHNraXA6IGJvb2xlYW47XG5cbiAgLy8gR2l2ZSBzZXBhcmF0ZSB1c2VzIG9mIHRoZSBxdWVyeSBzZXBhcmF0ZSBpZGVudGl0aWVzLFxuICAvLyB3aGljaCBtYXkgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlIHRvIGltcHJvdmUgY2FjaGluZy5cbiAgaWQ6IG51bWJlcjtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaWJlVG9QYWdpbmF0ZWRRdWVyeU9wdGlvbnMge1xuICBpbml0aWFsTnVtSXRlbXM6IG51bWJlcjtcbiAgaWQ6IG51bWJlcjtcbn1cblxudHlwZSBBbnlQYWdpbmF0ZWRRdWVyeVJlc3VsdCA9IFBhZ2luYXRlZFF1ZXJ5UmVzdWx0PFZhbHVlPjtcblxuZXhwb3J0IHR5cGUgUGFnaW5hdGVkUXVlcnlNb2RpZmljYXRpb24gPVxuICB8IHsga2luZDogXCJVcGRhdGVkXCI7IHJlc3VsdDogQW55UGFnaW5hdGVkUXVlcnlSZXN1bHQgfCB1bmRlZmluZWQgfVxuICB8IHsga2luZDogXCJSZW1vdmVkXCIgfTtcblxuZXhwb3J0IHR5cGUgRXh0ZW5kZWRUcmFuc2l0aW9uID0gVHJhbnNpdGlvbiAmIHtcbiAgcGFnaW5hdGVkUXVlcmllczogQXJyYXk8e1xuICAgIHRva2VuOiBQYWdpbmF0ZWRRdWVyeVRva2VuO1xuICAgIG1vZGlmaWNhdGlvbjogUGFnaW5hdGVkUXVlcnlNb2RpZmljYXRpb247XG4gIH0+O1xufTtcblxuZXhwb3J0IGNsYXNzIFBhZ2luYXRlZFF1ZXJ5Q2xpZW50IHtcbiAgcHJpdmF0ZSBwYWdpbmF0ZWRRdWVyeVNldDogTWFwPFBhZ2luYXRlZFF1ZXJ5VG9rZW4sIExvY2FsUGFnaW5hdGVkUXVlcnk+ID1cbiAgICBuZXcgTWFwKCk7XG4gIC8vIGhvbGQgb250byBhIHJlYWwgVHJhbnNpdGlvbiBzbyB3ZSBjYW4gY29uc3RydWN0IHN5bnRoZXRpYyBvbmVzIHdpdGggdGhhdCB0aW1lc3RhbXBcbiAgcHJpdmF0ZSBsYXN0VHJhbnNpdGlvblRzOiBUUztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNsaWVudDogQmFzZUNvbnZleENsaWVudCxcbiAgICBwcml2YXRlIG9uVHJhbnNpdGlvbjogKHRyYW5zaXRpb246IEV4dGVuZGVkVHJhbnNpdGlvbikgPT4gdm9pZCxcbiAgKSB7XG4gICAgLy8gTm9uc2Vuc2UgaW5pdGlhbCB2YWx1ZSB0byBjb25zdHJ1Y3Qgc3ludGhldGljIFRyYW5zaXRpb25zXG4gICAgdGhpcy5sYXN0VHJhbnNpdGlvblRzID0gTG9uZy5mcm9tTnVtYmVyKDApO1xuICAgIHRoaXMuY2xpZW50LmFkZE9uVHJhbnNpdGlvbkhhbmRsZXIoKHRyYW5zaXRpb246IFRyYW5zaXRpb24pID0+XG4gICAgICB0aGlzLm9uQmFzZVRyYW5zaXRpb24odHJhbnNpdGlvbiksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmUgdG8gYSBwYWdpbmF0ZWQgcXVlcnkuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHBhZ2luYXRlZCBxdWVyeSBmdW5jdGlvblxuICAgKiBAcGFyYW0gYXJncyAtIEFyZ3VtZW50cyBmb3IgdGhlIHF1ZXJ5IChleGNsdWRpbmcgcGFnaW5hdGlvbk9wdHMpXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gUGFnaW5hdGlvbiBvcHRpb25zIGluY2x1ZGluZyBpbml0aWFsTnVtSXRlbXNcbiAgICogQHJldHVybnMgT2JqZWN0IHdpdGggcGFnaW5hdGVkUXVlcnlUb2tlbiBhbmQgdW5zdWJzY3JpYmUgZnVuY3Rpb25cbiAgICovXG4gIHN1YnNjcmliZShcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgIG9wdGlvbnM6IFN1YnNjcmliZVRvUGFnaW5hdGVkUXVlcnlPcHRpb25zLFxuICApOiB7XG4gICAgcGFnaW5hdGVkUXVlcnlUb2tlbjogUGFnaW5hdGVkUXVlcnlUb2tlbjtcbiAgICB1bnN1YnNjcmliZTogKCkgPT4gdm9pZDtcbiAgfSB7XG4gICAgY29uc3QgY2Fub25pY2FsaXplZFVkZlBhdGggPSBjYW5vbmljYWxpemVVZGZQYXRoKG5hbWUpO1xuICAgIC8vIE5vdGUgdGhhdCBvbmx5IHRoZSBleHBlY3RlZCBvcHRpb25zIGFyZSBpbmNsdWRlZCBpbiB0aGUgc2VyaWFsaXphdGlvbi5cbiAgICBjb25zdCB0b2tlbiA9IHNlcmlhbGl6ZVBhZ2luYXRlZFBhdGhBbmRBcmdzKFxuICAgICAgY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICBhcmdzLFxuICAgICAgb3B0aW9ucyxcbiAgICApO1xuXG4gICAgY29uc3QgdW5zdWJzY3JpYmUgPSAoKSA9PiB0aGlzLnJlbW92ZVBhZ2luYXRlZFF1ZXJ5U3Vic2NyaWJlcih0b2tlbik7XG5cbiAgICBjb25zdCBleGlzdGluZ0VudHJ5ID0gdGhpcy5wYWdpbmF0ZWRRdWVyeVNldC5nZXQodG9rZW4pO1xuICAgIGlmIChleGlzdGluZ0VudHJ5KSB7XG4gICAgICBleGlzdGluZ0VudHJ5Lm51bVN1YnNjcmliZXJzICs9IDE7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYWdpbmF0ZWRRdWVyeVRva2VuOiB0b2tlbixcbiAgICAgICAgdW5zdWJzY3JpYmUsXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBuZXcgcGFnaW5hdGVkIHF1ZXJ5XG4gICAgdGhpcy5wYWdpbmF0ZWRRdWVyeVNldC5zZXQodG9rZW4sIHtcbiAgICAgIHRva2VuLFxuICAgICAgY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICBhcmdzLFxuICAgICAgbnVtU3Vic2NyaWJlcnM6IDEsXG4gICAgICBvcHRpb25zOiB7IGluaXRpYWxOdW1JdGVtczogb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMgfSxcbiAgICAgIG5leHRQYWdlS2V5OiAwLFxuICAgICAgcGFnZUtleXM6IFtdLFxuICAgICAgcGFnZUtleVRvUXVlcnk6IG5ldyBNYXAoKSxcbiAgICAgIG9uZ29pbmdTcGxpdHM6IG5ldyBNYXAoKSxcbiAgICAgIHNraXA6IGZhbHNlLFxuICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFBhZ2VUb1BhZ2luYXRlZFF1ZXJ5KHRva2VuLCBudWxsLCBvcHRpb25zLmluaXRpYWxOdW1JdGVtcyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFnaW5hdGVkUXVlcnlUb2tlbjogdG9rZW4sXG4gICAgICB1bnN1YnNjcmliZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHJlc3VsdHMgZm9yIGEgcGFnaW5hdGVkIHF1ZXJ5IGJhc2VkIG9uIGxvY2FsIHN0YXRlLlxuICAgKlxuICAgKiBUaHJvd3MgYW4gZXJyb3Igd2hlbiBvbmUgb2YgdGhlIHBhZ2VzIGhhcyBlcnJvcmVkLlxuICAgKi9cbiAgbG9jYWxRdWVyeVJlc3VsdChcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgIG9wdGlvbnM6IHsgaW5pdGlhbE51bUl0ZW1zOiBudW1iZXI7IGlkOiBudW1iZXIgfSxcbiAgKTogQW55UGFnaW5hdGVkUXVlcnlSZXN1bHQgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNhbm9uaWNhbGl6ZWRVZGZQYXRoID0gY2Fub25pY2FsaXplVWRmUGF0aChuYW1lKTtcbiAgICBjb25zdCB0b2tlbiA9IHNlcmlhbGl6ZVBhZ2luYXRlZFBhdGhBbmRBcmdzKFxuICAgICAgY2Fub25pY2FsaXplZFVkZlBhdGgsXG4gICAgICBhcmdzLFxuICAgICAgb3B0aW9ucyxcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHRva2VuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKFxuICAgIHRva2VuOiBQYWdpbmF0ZWRRdWVyeVRva2VuLFxuICApOiBBbnlQYWdpbmF0ZWRRdWVyeVJlc3VsdCB8IHVuZGVmaW5lZCB7XG4gICAgLy8gdW5kZWZpbmVkIGlzIHByb2JhYmx5IHRoZSB3cm9uZyB2YWx1ZSEgU2hvdWxkIGJlIGEgcmVhbCBwYWdpbmF0ZWQgcXVlcnkgcmVzdWx0IGZvciBsb2FkaW5nIVxuICAgIC8vIEJ1dGl0J3MgY29uZnVzaW5nIHdoeSB3ZSdkIGV2ZXIgZ2V0IHRoaXMsIEkgZ3Vlc3Mgc29tZSBmbG93cyBjYWxsIGxvY2FsUXVlcnlSZXN1bHQgYmVmb3JlXG4gICAgLy8gc3Vic2NyaWJpbmc/IFRoYXQncyBwcm9hYmJseSBmYWlyIGJ1dCBpcyBpdCBjb25zaXN0ZW50IHdpdGggdGhlIG5vcm1hbCBjbGllbnQ/XG4gICAgLy8gV2hhdCBpcyB0aGUgaW52YXJpYW50IGhlcmUsIHdpbGwgYSB0b2tlbiBhbHdheXMgZXhpc3Q/IE9yIGNhbiBhIGxvb2t1cCBvY2N1ciBhdCBhbnkgdGltZT9cbiAgICBjb25zdCBwYWdpbmF0ZWRRdWVyeSA9IHRoaXMucGFnaW5hdGVkUXVlcnlTZXQuZ2V0KHRva2VuKTtcbiAgICBpZiAoIXBhZ2luYXRlZFF1ZXJ5KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZVBhZ2VzID0gdGhpcy5hY3RpdmVQYWdlUXVlcnlUb2tlbnMocGFnaW5hdGVkUXVlcnkpO1xuICAgIGlmIChhY3RpdmVQYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdHM6IFtdLFxuICAgICAgICBzdGF0dXM6IFwiTG9hZGluZ0ZpcnN0UGFnZVwiLFxuICAgICAgICBsb2FkTW9yZTogKG51bUl0ZW1zOiBudW1iZXIpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTW9yZU9mUGFnaW5hdGVkUXVlcnkodG9rZW4sIG51bUl0ZW1zKTtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgbGV0IGFsbFJlc3VsdHM6IFZhbHVlW10gPSBbXTtcblxuICAgIC8vIFNvbWUgcGFnZSBpcyBsb2FkaW5nICh0aGlzIGlzbid0IHN1cHBvc2VkIHRvIGhhcHBlbiB0byBhbnkgcGFnZSBidXQgdGhlIGxhc3QpXG4gICAgbGV0IGhhc1VuZGVmaW5lZCA9IGZhbHNlO1xuICAgIGxldCBpc0RvbmUgPSBmYWxzZTtcblxuICAgIGZvciAoY29uc3QgcGFnZVRva2VuIG9mIGFjdGl2ZVBhZ2VzKSB7XG4gICAgICAvLyBUaGlzIHRocm93cywgZG9uJ3QgY2F0Y2ggaXQsIGl0IHNob3VsZCBidWJibGUgdXAuXG4gICAgICAvLyBJdCBtaWdodCBiZSBhIEludmFsaWRDdXJzb3IgRXJyb3IuIElmIGl0IGlzLCB0aGlzIHF1ZXJ5XG4gICAgICAvLyBzaG91bGQgYmUgcmVzZXQgKGZvciBub3csIHVzZSBhIG5ldyBJRCB0byBlbnN1cmUgbmV3IHN0YXRlKS5cbiAgICAgIC8vXG4gICAgICAvLyBJbiB0aGUgZnV0dXJlIHRoaXMgbWlnaHQgYmUgY2F1Z2h0IGFuZCBkZWFsdCB3aXRoIGhlcmUgYnV0XG4gICAgICAvLyBhbiBJRC1iYXNlZCBzb2x1dGlvbiB3b24ndCB3b3JrIGhlcmUsIElEIGlzIGFuIGludHJpbnNpYyBwcm9wZXJ0eVxuICAgICAgLy8gb2YgdGhpcyBwYWdpbmF0ZWQgcXVlcnkuXG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNsaWVudC5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbihwYWdlVG9rZW4pO1xuXG4gICAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaGFzVW5kZWZpbmVkID0gdHJ1ZTtcbiAgICAgICAgaXNEb25lID0gZmFsc2U7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwYWdpbmF0aW9uUmVzdWx0ID0gYXNQYWdpbmF0aW9uUmVzdWx0KHJlc3VsdCk7XG4gICAgICBhbGxSZXN1bHRzID0gYWxsUmVzdWx0cy5jb25jYXQocGFnaW5hdGlvblJlc3VsdC5wYWdlKTtcbiAgICAgIC8vIGxvZ2ljIG9ubHkgcmVsZXZhbnQgdG8gdGhlIGxhc3QgcGFnZSwgd2UganVzdCBoYXBwZW4gdG8gcnVuIGl0IGVhY2ggdGltZVxuICAgICAgaXNEb25lID0gISFwYWdpbmF0aW9uUmVzdWx0LmlzRG9uZTtcbiAgICB9XG5cbiAgICBsZXQgc3RhdHVzOiBQYWdpbmF0aW9uU3RhdHVzO1xuICAgIGlmIChoYXNVbmRlZmluZWQpIHtcbiAgICAgIHN0YXR1cyA9IGFsbFJlc3VsdHMubGVuZ3RoID09PSAwID8gXCJMb2FkaW5nRmlyc3RQYWdlXCIgOiBcIkxvYWRpbmdNb3JlXCI7XG4gICAgfSBlbHNlIGlmIChpc0RvbmUpIHtcbiAgICAgIHN0YXR1cyA9IFwiRXhoYXVzdGVkXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXR1cyA9IFwiQ2FuTG9hZE1vcmVcIjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0czogYWxsUmVzdWx0cyxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGxvYWRNb3JlOiAobnVtSXRlbXM6IG51bWJlcikgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2FkTW9yZU9mUGFnaW5hdGVkUXVlcnkodG9rZW4sIG51bUl0ZW1zKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgb25CYXNlVHJhbnNpdGlvbih0cmFuc2l0aW9uOiBUcmFuc2l0aW9uKSB7XG4gICAgY29uc3QgY2hhbmdlZEJhc2VUb2tlbnMgPSB0cmFuc2l0aW9uLnF1ZXJpZXMubWFwKChxKSA9PiBxLnRva2VuKTtcbiAgICBjb25zdCBjaGFuZ2VkID0gdGhpcy5xdWVyaWVzQ29udGFpbmluZ1Rva2VucyhjaGFuZ2VkQmFzZVRva2Vucyk7XG5cbiAgICBsZXQgcGFnaW5hdGVkUXVlcmllczogQXJyYXk8e1xuICAgICAgdG9rZW46IFBhZ2luYXRlZFF1ZXJ5VG9rZW47XG4gICAgICBtb2RpZmljYXRpb246IFBhZ2luYXRlZFF1ZXJ5TW9kaWZpY2F0aW9uO1xuICAgIH0+ID0gW107XG5cbiAgICBpZiAoY2hhbmdlZC5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnByb2Nlc3NQYWdpbmF0ZWRRdWVyeVNwbGl0cyhjaGFuZ2VkLCAodG9rZW4pID0+XG4gICAgICAgIHRoaXMuY2xpZW50LmxvY2FsUXVlcnlSZXN1bHRCeVRva2VuKHRva2VuKSxcbiAgICAgICk7XG5cbiAgICAgIHBhZ2luYXRlZFF1ZXJpZXMgPSBjaGFuZ2VkLm1hcCgodG9rZW4pID0+ICh7XG4gICAgICAgIHRva2VuLFxuICAgICAgICBtb2RpZmljYXRpb246IHtcbiAgICAgICAgICBraW5kOiBcIlVwZGF0ZWRcIiBhcyBjb25zdCxcbiAgICAgICAgICByZXN1bHQ6IHRoaXMubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4odG9rZW4pLFxuICAgICAgICB9LFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGV4dGVuZGVkVHJhbnNpdGlvbjogRXh0ZW5kZWRUcmFuc2l0aW9uID0ge1xuICAgICAgLi4udHJhbnNpdGlvbixcbiAgICAgIHBhZ2luYXRlZFF1ZXJpZXMsXG4gICAgfTtcblxuICAgIHRoaXMub25UcmFuc2l0aW9uKGV4dGVuZGVkVHJhbnNpdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBtb3JlIGl0ZW1zIGZvciBhIHBhZ2luYXRlZCBxdWVyeS5cbiAgICpcbiAgICogVGhpcyAqYWx3YXlzKiBjYXVzZXMgYSB0cmFuc2l0aW9uLCB0aGUgc3RhdHVzIG9mIHRoZSBxdWVyeVxuICAgKiBoYXMgcHJvYmFibHkgY2hhbmdlZCBmcm9tIFwiQ2FuTG9hZE1vcmVcIiB0byBcIkxvYWRpbmdNb3JlXCIuXG4gICAqIERhdGEgbWlnaHQgaGF2ZSBjaGFuZ2VkIHRvbzogbWF5YmUgYSBzdWJzY3JpcHRpb24gdG8gdGhpcyBwYWdlXG4gICAqIHF1ZXJ5IGFscmVhZHkgZXhpc3RzICh1bmxpa2VseSBidXQgcG9zc2libGUpIG9yIHRoaXMgcGFnZSBxdWVyeVxuICAgKiBoYXMgYW4gb3B0aW1pc3RpYyB1cGRhdGUgcHJvdmlkaW5nIHNvbWUgaW5pdGlhbCBkYXRhLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByaXZhdGUgbG9hZE1vcmVPZlBhZ2luYXRlZFF1ZXJ5KFxuICAgIHRva2VuOiBQYWdpbmF0ZWRRdWVyeVRva2VuLFxuICAgIG51bUl0ZW1zOiBudW1iZXIsXG4gICk6IGJvb2xlYW4ge1xuICAgIHRoaXMubXVzdEdldFBhZ2luYXRlZFF1ZXJ5KHRva2VuKTtcblxuICAgIGNvbnN0IGxhc3RQYWdlVG9rZW4gPSB0aGlzLnF1ZXJ5VG9rZW5Gb3JMYXN0UGFnZU9mUGFnaW5hdGVkUXVlcnkodG9rZW4pO1xuICAgIGNvbnN0IGxhc3RQYWdlUmVzdWx0ID0gdGhpcy5jbGllbnQubG9jYWxRdWVyeVJlc3VsdEJ5VG9rZW4obGFzdFBhZ2VUb2tlbik7XG5cbiAgICBpZiAoIWxhc3RQYWdlUmVzdWx0KSB7XG4gICAgICAvLyBTdGlsbCBsb2FkaW5nIGEgcGFnZSBhbmQgY29uY3VycmVudCBsb2FkcyBhcmUgbm90IGFsbG93ZWRcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdpbmF0aW9uUmVzdWx0ID0gYXNQYWdpbmF0aW9uUmVzdWx0KGxhc3RQYWdlUmVzdWx0KTtcbiAgICBpZiAocGFnaW5hdGlvblJlc3VsdC5pc0RvbmUpIHtcbiAgICAgIC8vIE5vIG1vcmUgcGFnZXMgYXZhaWxhYmxlXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRQYWdlVG9QYWdpbmF0ZWRRdWVyeShcbiAgICAgIHRva2VuLFxuICAgICAgcGFnaW5hdGlvblJlc3VsdC5jb250aW51ZUN1cnNvcixcbiAgICAgIG51bUl0ZW1zLFxuICAgICk7XG5cbiAgICBjb25zdCBsb2FkTW9yZVRyYW5zaXRpb246IEV4dGVuZGVkVHJhbnNpdGlvbiA9IHtcbiAgICAgIHRpbWVzdGFtcDogdGhpcy5sYXN0VHJhbnNpdGlvblRzLFxuICAgICAgcmVmbGVjdGVkTXV0YXRpb25zOiBbXSxcbiAgICAgIHF1ZXJpZXM6IFtdLFxuICAgICAgcGFnaW5hdGVkUXVlcmllczogW1xuICAgICAgICB7XG4gICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgbW9kaWZpY2F0aW9uOiB7XG4gICAgICAgICAgICBraW5kOiBcIlVwZGF0ZWRcIiBhcyBjb25zdCxcbiAgICAgICAgICAgIHJlc3VsdDogdGhpcy5sb2NhbFF1ZXJ5UmVzdWx0QnlUb2tlbih0b2tlbiksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcbiAgICB0aGlzLm9uVHJhbnNpdGlvbihsb2FkTW9yZVRyYW5zaXRpb24pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIHF1ZXJpZXNDb250YWluaW5nVG9rZW5zKFxuICAgIHF1ZXJ5VG9rZW5zOiBRdWVyeVRva2VuW10sXG4gICk6IFBhZ2luYXRlZFF1ZXJ5VG9rZW5bXSB7XG4gICAgaWYgKHF1ZXJ5VG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZWQ6IFBhZ2luYXRlZFF1ZXJ5VG9rZW5bXSA9IFtdO1xuICAgIGNvbnN0IHF1ZXJ5VG9rZW5TZXQgPSBuZXcgU2V0KHF1ZXJ5VG9rZW5zKTtcblxuICAgIGZvciAoY29uc3QgW3BhZ2luYXRlZFRva2VuLCBwYWdpbmF0ZWRRdWVyeV0gb2YgdGhpcy5wYWdpbmF0ZWRRdWVyeVNldCkge1xuICAgICAgZm9yIChjb25zdCBwYWdlVG9rZW4gb2YgdGhpcy5hbGxRdWVyeVRva2VucyhwYWdpbmF0ZWRRdWVyeSkpIHtcbiAgICAgICAgaWYgKHF1ZXJ5VG9rZW5TZXQuaGFzKHBhZ2VUb2tlbikpIHtcbiAgICAgICAgICBjaGFuZ2VkLnB1c2gocGFnaW5hdGVkVG9rZW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYW5nZWQ7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIHByb2Nlc3NQYWdpbmF0ZWRRdWVyeVNwbGl0cyhcbiAgICBjaGFuZ2VkOiBQYWdpbmF0ZWRRdWVyeVRva2VuW10sXG4gICAgZ2V0UmVzdWx0OiAodG9rZW46IFF1ZXJ5VG9rZW4pID0+IFZhbHVlIHwgdW5kZWZpbmVkLFxuICApOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IHBhZ2luYXRlZFF1ZXJ5VG9rZW4gb2YgY2hhbmdlZCkge1xuICAgICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLm11c3RHZXRQYWdpbmF0ZWRRdWVyeShwYWdpbmF0ZWRRdWVyeVRva2VuKTtcblxuICAgICAgLy8gVGhlc2UgcHJvcGVydGllcyBhcmUgYWxsIG11dGFibGUsIHRoZSBkZXN0cnVjdHVyZSBoZXJlIGlzIG9wdGlvbmFsLlxuICAgICAgY29uc3QgeyBvbmdvaW5nU3BsaXRzLCBwYWdlS2V5VG9RdWVyeSwgcGFnZUtleXMgfSA9IHBhZ2luYXRlZFF1ZXJ5O1xuXG4gICAgICAvLyBDaGVjayBmb3IgYW55IGNvbXBsZXRlZCBzcGxpdHNcbiAgICAgIGZvciAoY29uc3QgW3BhZ2VLZXksIFtzcGxpdEtleTEsIHNwbGl0S2V5Ml1dIG9mIG9uZ29pbmdTcGxpdHMpIHtcbiAgICAgICAgY29uc3QgYm90aE5ld1BhZ2VzTG9hZGVkID1cbiAgICAgICAgICBnZXRSZXN1bHQocGFnZUtleVRvUXVlcnkuZ2V0KHNwbGl0S2V5MSkhLnF1ZXJ5VG9rZW4pICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICBnZXRSZXN1bHQocGFnZUtleVRvUXVlcnkuZ2V0KHNwbGl0S2V5MikhLnF1ZXJ5VG9rZW4pICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKGJvdGhOZXdQYWdlc0xvYWRlZCkge1xuICAgICAgICAgIHRoaXMuY29tcGxldGVQYWdpbmF0ZWRRdWVyeVNwbGl0KFxuICAgICAgICAgICAgcGFnaW5hdGVkUXVlcnksXG4gICAgICAgICAgICBwYWdlS2V5LFxuICAgICAgICAgICAgc3BsaXRLZXkxLFxuICAgICAgICAgICAgc3BsaXRLZXkyLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZWFjaCBhY3RpdmUgcGFnZSBmb3Igc3BsaXRzIG5lZWRlZFxuICAgICAgZm9yIChjb25zdCBwYWdlS2V5IG9mIHBhZ2VLZXlzKSB7XG4gICAgICAgIGlmIChvbmdvaW5nU3BsaXRzLmhhcyhwYWdlS2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvLyBBbHJlYWR5IHNwbGl0dGluZ1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFnZVRva2VuID0gcGFnZUtleVRvUXVlcnkuZ2V0KHBhZ2VLZXkpIS5xdWVyeVRva2VuO1xuICAgICAgICBjb25zdCBwYWdlUmVzdWx0ID0gZ2V0UmVzdWx0KHBhZ2VUb2tlbik7XG4gICAgICAgIGlmICghcGFnZVJlc3VsdCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGFzUGFnaW5hdGlvblJlc3VsdChwYWdlUmVzdWx0KTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIHBhZ2UgbmVlZHMgc3BsaXR0aW5nXG4gICAgICAgIGNvbnN0IHNob3VsZFNwbGl0ID1cbiAgICAgICAgICByZXN1bHQuc3BsaXRDdXJzb3IgJiZcbiAgICAgICAgICAocmVzdWx0LnBhZ2VTdGF0dXMgPT09IFwiU3BsaXRSZWNvbW1lbmRlZFwiIHx8XG4gICAgICAgICAgICByZXN1bHQucGFnZVN0YXR1cyA9PT0gXCJTcGxpdFJlcXVpcmVkXCIgfHxcbiAgICAgICAgICAgIC8vIFRoaXMgY2xpZW50LWRyaXZlbiBwYWdlIHNwbGl0dGluZyBjb25kaXRpb24gd2lsbCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS5cbiAgICAgICAgICAgIHJlc3VsdC5wYWdlLmxlbmd0aCA+IHBhZ2luYXRlZFF1ZXJ5Lm9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zICogMik7XG5cbiAgICAgICAgaWYgKHNob3VsZFNwbGl0KSB7XG4gICAgICAgICAgdGhpcy5zcGxpdFBhZ2luYXRlZFF1ZXJ5UGFnZShcbiAgICAgICAgICAgIHBhZ2luYXRlZFF1ZXJ5LFxuICAgICAgICAgICAgcGFnZUtleSxcbiAgICAgICAgICAgIHJlc3VsdC5zcGxpdEN1cnNvciEsIC8vIHdlIGp1c3QgY2hlY2tlZFxuICAgICAgICAgICAgcmVzdWx0LmNvbnRpbnVlQ3Vyc29yLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNwbGl0UGFnaW5hdGVkUXVlcnlQYWdlKFxuICAgIHBhZ2luYXRlZFF1ZXJ5OiBMb2NhbFBhZ2luYXRlZFF1ZXJ5LFxuICAgIHBhZ2VLZXk6IFF1ZXJ5UGFnZUtleSxcbiAgICBzcGxpdEN1cnNvcjogc3RyaW5nLFxuICAgIGNvbnRpbnVlQ3Vyc29yOiBzdHJpbmcgfCBudWxsLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBzcGxpdEtleTEgPSBwYWdpbmF0ZWRRdWVyeS5uZXh0UGFnZUtleSsrO1xuICAgIGNvbnN0IHNwbGl0S2V5MiA9IHBhZ2luYXRlZFF1ZXJ5Lm5leHRQYWdlS2V5Kys7XG5cbiAgICBjb25zdCBwYWdpbmF0aW9uT3B0czogVmFsdWUgPSB7XG4gICAgICBjdXJzb3I6IGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgbnVtSXRlbXM6IHBhZ2luYXRlZFF1ZXJ5Lm9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgICAgaWQ6IHBhZ2luYXRlZFF1ZXJ5LmlkLFxuICAgIH07XG5cbiAgICAvLyBGaXJzdCBzcGxpdCBwYWdlOiBzYW1lIGN1cnNvciBhcyBvcmlnaW5hbCwgYnV0IGFkZCBlbmRDdXJzb3IgYXQgc3BsaXRDdXJzb3JcbiAgICBjb25zdCBmaXJzdFN1YnNjcmlwdGlvbiA9IHRoaXMuY2xpZW50LnN1YnNjcmliZShcbiAgICAgIHBhZ2luYXRlZFF1ZXJ5LmNhbm9uaWNhbGl6ZWRVZGZQYXRoLFxuICAgICAge1xuICAgICAgICAuLi5wYWdpbmF0ZWRRdWVyeS5hcmdzLFxuICAgICAgICBwYWdpbmF0aW9uT3B0czoge1xuICAgICAgICAgIC4uLnBhZ2luYXRpb25PcHRzLFxuICAgICAgICAgIGN1cnNvcjogbnVsbCwgLy8gU3RhcnQgZnJvbSBiZWdpbm5pbmcgZm9yIGZpcnN0IHNwbGl0XG4gICAgICAgICAgZW5kQ3Vyc29yOiBzcGxpdEN1cnNvcixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgKTtcbiAgICBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5VG9RdWVyeS5zZXQoc3BsaXRLZXkxLCBmaXJzdFN1YnNjcmlwdGlvbik7XG5cbiAgICAvLyBTZWNvbmQgc3BsaXQgcGFnZTogY3Vyc29yIHN0YXJ0cyBhdCBzcGxpdEN1cnNvciwgZW5kQ3Vyc29yIGlzIHRoZSBvcmlnaW5hbCBjb250aW51ZUN1cnNvclxuICAgIGNvbnN0IHNlY29uZFN1YnNjcmlwdGlvbiA9IHRoaXMuY2xpZW50LnN1YnNjcmliZShcbiAgICAgIHBhZ2luYXRlZFF1ZXJ5LmNhbm9uaWNhbGl6ZWRVZGZQYXRoLFxuICAgICAge1xuICAgICAgICAuLi5wYWdpbmF0ZWRRdWVyeS5hcmdzLFxuICAgICAgICBwYWdpbmF0aW9uT3B0czoge1xuICAgICAgICAgIC4uLnBhZ2luYXRpb25PcHRzLFxuICAgICAgICAgIGN1cnNvcjogc3BsaXRDdXJzb3IsXG4gICAgICAgICAgZW5kQ3Vyc29yOiBjb250aW51ZUN1cnNvcixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgKTtcbiAgICBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5VG9RdWVyeS5zZXQoc3BsaXRLZXkyLCBzZWNvbmRTdWJzY3JpcHRpb24pO1xuXG4gICAgcGFnaW5hdGVkUXVlcnkub25nb2luZ1NwbGl0cy5zZXQocGFnZUtleSwgW3NwbGl0S2V5MSwgc3BsaXRLZXkyXSk7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBwcml2YXRlIGFkZFBhZ2VUb1BhZ2luYXRlZFF1ZXJ5KFxuICAgIHRva2VuOiBQYWdpbmF0ZWRRdWVyeVRva2VuLFxuICAgIGNvbnRpbnVlQ3Vyc29yOiBzdHJpbmcgfCBudWxsLFxuICAgIG51bUl0ZW1zOiBudW1iZXIsXG4gICk6IHsgcXVlcnlUb2tlbjogUXVlcnlUb2tlbjsgdW5zdWJzY3JpYmU6ICgpID0+IHZvaWQgfSB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLm11c3RHZXRQYWdpbmF0ZWRRdWVyeSh0b2tlbik7XG4gICAgY29uc3QgcGFnZUtleSA9IHBhZ2luYXRlZFF1ZXJ5Lm5leHRQYWdlS2V5Kys7XG5cbiAgICBjb25zdCBwYWdpbmF0aW9uT3B0czogVmFsdWUgPSB7XG4gICAgICBjdXJzb3I6IGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgbnVtSXRlbXMsXG4gICAgICBpZDogcGFnaW5hdGVkUXVlcnkuaWQsXG4gICAgfTtcblxuICAgIGNvbnN0IHBhZ2VBcmdzID0ge1xuICAgICAgLi4ucGFnaW5hdGVkUXVlcnkuYXJncyxcbiAgICAgIHBhZ2luYXRpb25PcHRzLFxuICAgIH07XG5cbiAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLmNsaWVudC5zdWJzY3JpYmUoXG4gICAgICBwYWdpbmF0ZWRRdWVyeS5jYW5vbmljYWxpemVkVWRmUGF0aCxcbiAgICAgIHBhZ2VBcmdzLFxuICAgICk7XG5cbiAgICBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5cy5wdXNoKHBhZ2VLZXkpO1xuICAgIHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlUb1F1ZXJ5LnNldChwYWdlS2V5LCBzdWJzY3JpcHRpb24pO1xuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZVBhZ2luYXRlZFF1ZXJ5U3Vic2NyaWJlcih0b2tlbjogUGFnaW5hdGVkUXVlcnlUb2tlbik6IHZvaWQge1xuICAgIGNvbnN0IHBhZ2luYXRlZFF1ZXJ5ID0gdGhpcy5wYWdpbmF0ZWRRdWVyeVNldC5nZXQodG9rZW4pO1xuICAgIGlmICghcGFnaW5hdGVkUXVlcnkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwYWdpbmF0ZWRRdWVyeS5udW1TdWJzY3JpYmVycyAtPSAxO1xuICAgIGlmIChwYWdpbmF0ZWRRdWVyeS5udW1TdWJzY3JpYmVycyA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIHBhZ2Ugc3Vic2NyaXB0aW9ucyBieSBjYWxsaW5nIHRoZWlyIHVuc3Vic2NyaWJlIGNhbGxiYWNrc1xuICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlUb1F1ZXJ5LnZhbHVlcygpKSB7XG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLnBhZ2luYXRlZFF1ZXJ5U2V0LmRlbGV0ZSh0b2tlbik7XG4gIH1cblxuICBwcml2YXRlIGNvbXBsZXRlUGFnaW5hdGVkUXVlcnlTcGxpdChcbiAgICBwYWdpbmF0ZWRRdWVyeTogTG9jYWxQYWdpbmF0ZWRRdWVyeSxcbiAgICBwYWdlS2V5OiBRdWVyeVBhZ2VLZXksXG4gICAgc3BsaXRLZXkxOiBRdWVyeVBhZ2VLZXksXG4gICAgc3BsaXRLZXkyOiBRdWVyeVBhZ2VLZXksXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG9yaWdpbmFsUXVlcnkgPSBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5VG9RdWVyeS5nZXQocGFnZUtleSkhO1xuICAgIHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlUb1F1ZXJ5LmRlbGV0ZShwYWdlS2V5KTtcbiAgICBjb25zdCBwYWdlSW5kZXggPSBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5cy5pbmRleE9mKHBhZ2VLZXkpO1xuICAgIHBhZ2luYXRlZFF1ZXJ5LnBhZ2VLZXlzLnNwbGljZShwYWdlSW5kZXgsIDEsIHNwbGl0S2V5MSwgc3BsaXRLZXkyKTtcbiAgICBwYWdpbmF0ZWRRdWVyeS5vbmdvaW5nU3BsaXRzLmRlbGV0ZShwYWdlS2V5KTtcbiAgICBvcmlnaW5hbFF1ZXJ5LnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICAvKiogVGhlIHF1ZXJ5IHRva2VucyBmb3IgYWxsIGFjdGl2ZSBwYWdlcywgaW4gcmVzdWx0IG9yZGVyICovXG4gIHByaXZhdGUgYWN0aXZlUGFnZVF1ZXJ5VG9rZW5zKFxuICAgIHBhZ2luYXRlZFF1ZXJ5OiBMb2NhbFBhZ2luYXRlZFF1ZXJ5LFxuICApOiBRdWVyeVRva2VuW10ge1xuICAgIHJldHVybiBwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5cy5tYXAoXG4gICAgICAocGFnZUtleSkgPT4gcGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkuZ2V0KHBhZ2VLZXkpIS5xdWVyeVRva2VuLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGFsbFF1ZXJ5VG9rZW5zKHBhZ2luYXRlZFF1ZXJ5OiBMb2NhbFBhZ2luYXRlZFF1ZXJ5KTogUXVlcnlUb2tlbltdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShwYWdpbmF0ZWRRdWVyeS5wYWdlS2V5VG9RdWVyeS52YWx1ZXMoKSkubWFwKFxuICAgICAgKHN1YikgPT4gc3ViLnF1ZXJ5VG9rZW4sXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgcXVlcnlUb2tlbkZvckxhc3RQYWdlT2ZQYWdpbmF0ZWRRdWVyeShcbiAgICB0b2tlbjogUGFnaW5hdGVkUXVlcnlUb2tlbixcbiAgKTogUXVlcnlUb2tlbiB7XG4gICAgY29uc3QgcGFnaW5hdGVkUXVlcnkgPSB0aGlzLm11c3RHZXRQYWdpbmF0ZWRRdWVyeSh0b2tlbik7XG4gICAgY29uc3QgbGFzdFBhZ2VLZXkgPVxuICAgICAgcGFnaW5hdGVkUXVlcnkucGFnZUtleXNbcGFnaW5hdGVkUXVlcnkucGFnZUtleXMubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RQYWdlS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gcGFnZXMgZm9yIHBhZ2luYXRlZCBxdWVyeSAke3Rva2VufWApO1xuICAgIH1cbiAgICByZXR1cm4gcGFnaW5hdGVkUXVlcnkucGFnZUtleVRvUXVlcnkuZ2V0KGxhc3RQYWdlS2V5KSEucXVlcnlUb2tlbjtcbiAgfVxuXG4gIHByaXZhdGUgbXVzdEdldFBhZ2luYXRlZFF1ZXJ5KFxuICAgIHRva2VuOiBQYWdpbmF0ZWRRdWVyeVRva2VuLFxuICApOiBMb2NhbFBhZ2luYXRlZFF1ZXJ5IHtcbiAgICBjb25zdCBwYWdpbmF0ZWRRdWVyeSA9IHRoaXMucGFnaW5hdGVkUXVlcnlTZXQuZ2V0KHRva2VuKTtcbiAgICBpZiAoIXBhZ2luYXRlZFF1ZXJ5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJwYWdpbmF0ZWQgcXVlcnkgbm8gbG9uZ2VyIGV4aXN0cyBmb3IgdG9rZW4gXCIgKyB0b2tlbik7XG4gICAgfVxuICAgIHJldHVybiBwYWdpbmF0ZWRRdWVyeTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/pagination.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/pagination.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   asPaginationArgs: () => (/* binding */ asPaginationArgs),\n/* harmony export */   asPaginationResult: () => (/* binding */ asPaginationResult)\n/* harmony export */ });\n\nfunction asPaginationArgs(value) {\n    if (typeof value.paginationOpts.numItems !== \"number\") {\n        throw new Error(`Not valid paginated query args: ${JSON.stringify(value)}`);\n    }\n    return value;\n}\nfunction asPaginationResult(value) {\n    if (typeof value !== \"object\" || value === null || !Array.isArray(value.page) || typeof value.isDone !== \"boolean\" || typeof value.continueCursor !== \"string\") {\n        throw new Error(`Not a valid paginated query result: ${value?.toString()}`);\n    }\n    return value;\n} //# sourceMappingURL=pagination.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9wYWdpbmF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQXdCTyxTQUFTLGlCQUFpQixPQUUvQjtJQUNBLElBQUksT0FBUSxNQUFjLGVBQWUsYUFBYSxVQUFVO1FBQzlELE1BQU0sSUFBSSxNQUFNLG1DQUFtQyxLQUFLLFVBQVUsS0FBSyxDQUFDLEVBQUU7SUFDNUU7SUFDQSxPQUFPO0FBR1Q7QUFLTyxTQUFTLG1CQUFtQixPQUF1QztJQUN4RSxJQUNFLE9BQU8sVUFBVSxZQUNqQixVQUFVLFFBQ1YsQ0FBQyxNQUFNLFFBQVMsTUFBYyxJQUFJLEtBQ2xDLE9BQVEsTUFBYyxXQUFXLGFBQ2pDLE9BQVEsTUFBYyxtQkFBbUIsVUFDekM7UUFDQSxNQUFNLElBQUksTUFBTSx1Q0FBdUMsT0FBTyxTQUFTLENBQUMsRUFBRTtJQUM1RTtJQUNBLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiL3NyYy9icm93c2VyL3N5bmMvcGFnaW5hdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFBhZ2luYXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vLi4vc2VydmVyL2luZGV4LmpzXCI7XG5pbXBvcnQgdHlwZSB7IEluZmVyLCBWYWx1ZSB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB0eXBlIHsgcGFnaW5hdGlvbk9wdHNWYWxpZGF0b3IgfSBmcm9tIFwiLi4vLi4vc2VydmVyL2luZGV4LmpzXCI7XG5cbmV4cG9ydCB0eXBlIFBhZ2luYXRpb25TdGF0dXMgPVxuICB8IFwiTG9hZGluZ0ZpcnN0UGFnZVwiXG4gIHwgXCJDYW5Mb2FkTW9yZVwiXG4gIHwgXCJMb2FkaW5nTW9yZVwiXG4gIHwgXCJFeGhhdXN0ZWRcIjtcblxuZXhwb3J0IHR5cGUgUGFnaW5hdGVkUXVlcnlSZXN1bHQ8VD4gPSB7XG4gIHJlc3VsdHM6IFRbXTtcbiAgc3RhdHVzOiBQYWdpbmF0aW9uU3RhdHVzO1xuICBsb2FkTW9yZTogTG9hZE1vcmVPZlBhZ2luYXRlZFF1ZXJ5O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgbG9hZGluZyBtb3JlIHdhcyBhY3R1YWxseSBpbml0aWF0ZWQ7IGluIGNhc2VzIHdoZXJlXG4gKiBhIHBhZ2luYXRlZCBxdWVyeSBpcyBhbHJlYWR5IGxvYWRpbmcgbW9yZSBpdGVtcyBvciB0aGVyZSBhcmUgbm8gbW9yZVxuICogaXRlbXMgYXZhaWxhYmxlLCBjYWxsaW5nIGxvYWRNb3JlKCkgbWF5IGRvIG5vdGhpbmcuXG4gKi9cbmV4cG9ydCB0eXBlIExvYWRNb3JlT2ZQYWdpbmF0ZWRRdWVyeSA9IChudW1JdGVtczogbnVtYmVyKSA9PiBib29sZWFuO1xuXG4vLyBUaGUgYXJndW1lbnRzIGZvciBlYWNoIHBhZ2UgcXVlcnkuXG5leHBvcnQgZnVuY3Rpb24gYXNQYWdpbmF0aW9uQXJncyh2YWx1ZTogVmFsdWUpOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4gJiB7XG4gIHBhZ2luYXRpb25PcHRzOiBJbmZlcjx0eXBlb2YgcGFnaW5hdGlvbk9wdHNWYWxpZGF0b3I+O1xufSB7XG4gIGlmICh0eXBlb2YgKHZhbHVlIGFzIGFueSkucGFnaW5hdGlvbk9wdHMubnVtSXRlbXMgIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCB2YWxpZCBwYWdpbmF0ZWQgcXVlcnkgYXJnczogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9YCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlIGFzIHVua25vd24gYXMgUmVjb3JkPHN0cmluZywgVmFsdWU+ICYge1xuICAgIHBhZ2luYXRpb25PcHRzOiBJbmZlcjx0eXBlb2YgcGFnaW5hdGlvbk9wdHNWYWxpZGF0b3I+O1xuICB9O1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGEgVmFsdWUgaXMgYSB2YWxpZCBwYWdpbmF0aW9uIHJlc3VsdCBhbmQgcmV0dXJucyBpdCBjYXN0IHRvIFBhZ2luYXRpb25SZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc1BhZ2luYXRpb25SZXN1bHQodmFsdWU6IFZhbHVlKTogUGFnaW5hdGlvblJlc3VsdDxWYWx1ZT4ge1xuICBpZiAoXG4gICAgdHlwZW9mIHZhbHVlICE9PSBcIm9iamVjdFwiIHx8XG4gICAgdmFsdWUgPT09IG51bGwgfHxcbiAgICAhQXJyYXkuaXNBcnJheSgodmFsdWUgYXMgYW55KS5wYWdlKSB8fFxuICAgIHR5cGVvZiAodmFsdWUgYXMgYW55KS5pc0RvbmUgIT09IFwiYm9vbGVhblwiIHx8XG4gICAgdHlwZW9mICh2YWx1ZSBhcyBhbnkpLmNvbnRpbnVlQ3Vyc29yICE9PSBcInN0cmluZ1wiXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgdmFsaWQgcGFnaW5hdGVkIHF1ZXJ5IHJlc3VsdDogJHt2YWx1ZT8udG9TdHJpbmcoKX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWUgYXMgdW5rbm93biBhcyBQYWdpbmF0aW9uUmVzdWx0PFZhbHVlPjtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/pagination.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/protocol.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/protocol.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeClientMessage: () => (/* binding */ encodeClientMessage),\n/* harmony export */   longToU64: () => (/* binding */ longToU64),\n/* harmony export */   parseServerMessage: () => (/* binding */ parseServerMessage),\n/* harmony export */   u64ToLong: () => (/* binding */ u64ToLong)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../vendor/long.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/long.js\");\n\n\n\nfunction u64ToLong(encoded) {\n    const integerBytes = _values_index_js__WEBPACK_IMPORTED_MODULE_0__.Base64.toByteArray(encoded);\n    return _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__.Long.fromBytesLE(Array.from(integerBytes));\n}\nfunction longToU64(raw) {\n    const integerBytes = new Uint8Array(raw.toBytesLE());\n    return _values_index_js__WEBPACK_IMPORTED_MODULE_0__.Base64.fromByteArray(integerBytes);\n}\nfunction parseServerMessage(encoded) {\n    switch(encoded.type){\n        case \"FatalError\":\n        case \"AuthError\":\n        case \"ActionResponse\":\n        case \"TransitionChunk\":\n        case \"Ping\":\n            {\n                return {\n                    ...encoded\n                };\n            }\n        case \"MutationResponse\":\n            {\n                if (encoded.success) {\n                    return {\n                        ...encoded,\n                        ts: u64ToLong(encoded.ts)\n                    };\n                } else {\n                    return {\n                        ...encoded\n                    };\n                }\n            }\n        case \"Transition\":\n            {\n                return {\n                    ...encoded,\n                    startVersion: {\n                        ...encoded.startVersion,\n                        ts: u64ToLong(encoded.startVersion.ts)\n                    },\n                    endVersion: {\n                        ...encoded.endVersion,\n                        ts: u64ToLong(encoded.endVersion.ts)\n                    }\n                };\n            }\n        default:\n            {\n                encoded;\n            }\n    }\n    return void 0;\n}\nfunction encodeClientMessage(message) {\n    switch(message.type){\n        case \"Authenticate\":\n        case \"ModifyQuerySet\":\n        case \"Mutation\":\n        case \"Action\":\n        case \"Event\":\n            {\n                return {\n                    ...message\n                };\n            }\n        case \"Connect\":\n            {\n                if (message.maxObservedTimestamp !== void 0) {\n                    return {\n                        ...message,\n                        maxObservedTimestamp: longToU64(message.maxObservedTimestamp)\n                    };\n                } else {\n                    return {\n                        ...message,\n                        maxObservedTimestamp: void 0\n                    };\n                }\n            }\n        default:\n            {\n                message;\n            }\n    }\n    return void 0;\n} //# sourceMappingURL=protocol.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9wcm90b2NvbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBRWtDO0FBQ2I7QUFNZCxTQUFTLFVBQVUsU0FBMEI7SUFDbEQsTUFBTSxlQUFlLGdFQUFPLENBQVksT0FBTztJQUMvQyxPQUFPLGlEQUFJLENBQUMsWUFBWSxNQUFNLEtBQUssWUFBWSxDQUFDO0FBQ2xEO0FBRU8sU0FBUyxVQUFVLEtBQXNCO0lBQzlDLE1BQU0sZUFBZSxJQUFJLFdBQVcsSUFBSSxVQUFVLENBQUM7SUFDbkQsT0FBTyxrRUFBTyxDQUFjLFlBQVk7QUFDMUM7QUFFTyxTQUFTLG1CQUNkLFNBQ21CO0lBQ25CLE9BQVEsUUFBUSxNQUFNO1FBQ3BCLEtBQUs7UUFDTCxLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO1lBQVE7Z0JBQ1gsT0FBTztvQkFBRSxHQUFHO2dCQUFRO1lBQ3RCO1FBQ0EsS0FBSztZQUFvQjtnQkFDdkIsSUFBSSxRQUFRLFNBQVM7b0JBQ25CLE9BQU87d0JBQUUsR0FBRzt3QkFBUyxJQUFJLFVBQVUsUUFBUSxFQUFFO29CQUFFO2dCQUNqRCxPQUFPO29CQUNMLE9BQU87d0JBQUUsR0FBRztvQkFBUTtnQkFDdEI7WUFDRjtRQUNBLEtBQUs7WUFBYztnQkFDakIsT0FBTztvQkFDTCxHQUFHO29CQUNILGNBQWM7d0JBQ1osR0FBRyxRQUFRO3dCQUNYLElBQUksVUFBVSxRQUFRLGFBQWEsRUFBRTtvQkFDdkM7b0JBQ0EsWUFBWTt3QkFDVixHQUFHLFFBQVE7d0JBQ1gsSUFBSSxVQUFVLFFBQVEsV0FBVyxFQUFFO29CQUNyQztnQkFDRjtZQUNGO1FBQ0E7WUFBUztnQkFDUDtZQUNGO0lBQ0Y7SUFDQSxPQUFPO0FBQ1Q7QUFFTyxTQUFTLG9CQUNkLFNBQ3NCO0lBQ3RCLE9BQVEsUUFBUSxNQUFNO1FBQ3BCLEtBQUs7UUFDTCxLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO1lBQVM7Z0JBQ1osT0FBTztvQkFBRSxHQUFHO2dCQUFRO1lBQ3RCO1FBQ0EsS0FBSztZQUFXO2dCQUNkLElBQUksUUFBUSx5QkFBeUIsUUFBVztvQkFDOUMsT0FBTzt3QkFDTCxHQUFHO3dCQUNILHNCQUFzQixVQUFVLFFBQVEsb0JBQW9CO29CQUM5RDtnQkFDRixPQUFPO29CQUNMLE9BQU87d0JBQUUsR0FBRzt3QkFBUyxzQkFBc0I7b0JBQVU7Z0JBQ3ZEO1lBQ0Y7UUFDQTtZQUFTO2dCQUNQO1lBQ0Y7SUFDRjtJQUNBLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiL3NyYy9icm93c2VyL3N5bmMvcHJvdG9jb2wudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzIH0gZnJvbSBcIi4uLy4uL3NlcnZlci9hdXRoZW50aWNhdGlvbi5qc1wiO1xuZXhwb3J0IHR5cGUgeyBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzIH0gZnJvbSBcIi4uLy4uL3NlcnZlci9hdXRoZW50aWNhdGlvbi5qc1wiO1xuaW1wb3J0IHsgSlNPTlZhbHVlLCBCYXNlNjQgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBMb25nIH0gZnJvbSBcIi4uLy4uL3ZlbmRvci9sb25nLmpzXCI7XG5cbi8qKlxuICogU2hhcmVkIHNjaGVtYVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB1NjRUb0xvbmcoZW5jb2RlZDogRW5jb2RlZFU2NCk6IFU2NCB7XG4gIGNvbnN0IGludGVnZXJCeXRlcyA9IEJhc2U2NC50b0J5dGVBcnJheShlbmNvZGVkKTtcbiAgcmV0dXJuIExvbmcuZnJvbUJ5dGVzTEUoQXJyYXkuZnJvbShpbnRlZ2VyQnl0ZXMpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvbmdUb1U2NChyYXc6IFU2NCk6IEVuY29kZWRVNjQge1xuICBjb25zdCBpbnRlZ2VyQnl0ZXMgPSBuZXcgVWludDhBcnJheShyYXcudG9CeXRlc0xFKCkpO1xuICByZXR1cm4gQmFzZTY0LmZyb21CeXRlQXJyYXkoaW50ZWdlckJ5dGVzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2VydmVyTWVzc2FnZShcbiAgZW5jb2RlZDogRW5jb2RlZFNlcnZlck1lc3NhZ2UsXG4pOiBXaXJlU2VydmVyTWVzc2FnZSB7XG4gIHN3aXRjaCAoZW5jb2RlZC50eXBlKSB7XG4gICAgY2FzZSBcIkZhdGFsRXJyb3JcIjpcbiAgICBjYXNlIFwiQXV0aEVycm9yXCI6XG4gICAgY2FzZSBcIkFjdGlvblJlc3BvbnNlXCI6XG4gICAgY2FzZSBcIlRyYW5zaXRpb25DaHVua1wiOlxuICAgIGNhc2UgXCJQaW5nXCI6IHtcbiAgICAgIHJldHVybiB7IC4uLmVuY29kZWQgfTtcbiAgICB9XG4gICAgY2FzZSBcIk11dGF0aW9uUmVzcG9uc2VcIjoge1xuICAgICAgaWYgKGVuY29kZWQuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4geyAuLi5lbmNvZGVkLCB0czogdTY0VG9Mb25nKGVuY29kZWQudHMpIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyAuLi5lbmNvZGVkIH07XG4gICAgICB9XG4gICAgfVxuICAgIGNhc2UgXCJUcmFuc2l0aW9uXCI6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmVuY29kZWQsXG4gICAgICAgIHN0YXJ0VmVyc2lvbjoge1xuICAgICAgICAgIC4uLmVuY29kZWQuc3RhcnRWZXJzaW9uLFxuICAgICAgICAgIHRzOiB1NjRUb0xvbmcoZW5jb2RlZC5zdGFydFZlcnNpb24udHMpLFxuICAgICAgICB9LFxuICAgICAgICBlbmRWZXJzaW9uOiB7XG4gICAgICAgICAgLi4uZW5jb2RlZC5lbmRWZXJzaW9uLFxuICAgICAgICAgIHRzOiB1NjRUb0xvbmcoZW5jb2RlZC5lbmRWZXJzaW9uLnRzKSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIGVuY29kZWQgc2F0aXNmaWVzIG5ldmVyO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkIGFzIG5ldmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlQ2xpZW50TWVzc2FnZShcbiAgbWVzc2FnZTogQ2xpZW50TWVzc2FnZSxcbik6IEVuY29kZWRDbGllbnRNZXNzYWdlIHtcbiAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICBjYXNlIFwiQXV0aGVudGljYXRlXCI6XG4gICAgY2FzZSBcIk1vZGlmeVF1ZXJ5U2V0XCI6XG4gICAgY2FzZSBcIk11dGF0aW9uXCI6XG4gICAgY2FzZSBcIkFjdGlvblwiOlxuICAgIGNhc2UgXCJFdmVudFwiOiB7XG4gICAgICByZXR1cm4geyAuLi5tZXNzYWdlIH07XG4gICAgfVxuICAgIGNhc2UgXCJDb25uZWN0XCI6IHtcbiAgICAgIGlmIChtZXNzYWdlLm1heE9ic2VydmVkVGltZXN0YW1wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgIG1heE9ic2VydmVkVGltZXN0YW1wOiBsb25nVG9VNjQobWVzc2FnZS5tYXhPYnNlcnZlZFRpbWVzdGFtcCksXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4geyAuLi5tZXNzYWdlLCBtYXhPYnNlcnZlZFRpbWVzdGFtcDogdW5kZWZpbmVkIH07XG4gICAgICB9XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIG1lc3NhZ2Ugc2F0aXNmaWVzIG5ldmVyO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkIGFzIG5ldmVyO1xufVxuXG50eXBlIFU2NCA9IExvbmc7XG50eXBlIEVuY29kZWRVNjQgPSBzdHJpbmc7XG5cbi8qKlxuICogVW5pcXVlIG5vbm5lZ2F0aXZlIGludGVnZXIgaWRlbnRpZnlpbmcgYSBzaW5nbGUgcXVlcnkuXG4gKi9cbmV4cG9ydCB0eXBlIFF1ZXJ5SWQgPSBudW1iZXI7IC8vIG5vbm5lZ2F0aXZlIGludFxuXG5leHBvcnQgdHlwZSBRdWVyeVNldFZlcnNpb24gPSBudW1iZXI7IC8vIG5vbm5lZ2F0aXZlIGludFxuXG5leHBvcnQgdHlwZSBSZXF1ZXN0SWQgPSBudW1iZXI7IC8vIG5vbm5lZ2F0aXZlIGludFxuXG5leHBvcnQgdHlwZSBJZGVudGl0eVZlcnNpb24gPSBudW1iZXI7IC8vIG5vbm5lZ2F0aXZlIGludFxuXG4vKipcbiAqIEEgc2VyaWFsaXplZCByZXByZXNlbnRhdGlvbiBvZiBkZWNpc2lvbnMgbWFkZSBkdXJpbmcgYSBxdWVyeSdzIGV4ZWN1dGlvbi5cbiAqXG4gKiBBIGpvdXJuYWwgaXMgcHJvZHVjZWQgd2hlbiBhIHF1ZXJ5IGZ1bmN0aW9uIGZpcnN0IGV4ZWN1dGVzIGFuZCBpcyByZS11c2VkXG4gKiB3aGVuIGEgcXVlcnkgaXMgcmUtZXhlY3V0ZWQuXG4gKlxuICogQ3VycmVudGx5IHRoaXMgaXMgdXNlZCB0byBzdG9yZSBwYWdpbmF0aW9uIGVuZCBjdXJzb3JzIHRvIGVuc3VyZVxuICogdGhhdCBwYWdlcyBvZiBwYWdpbmF0ZWQgcXVlcmllcyB3aWxsIGFsd2F5cyBlbmQgYXQgdGhlIHNhbWUgY3Vyc29yLiBUaGlzXG4gKiBlbmFibGVzIGdhcGxlc3MsIHJlYWN0aXZlIHBhZ2luYXRpb24uXG4gKlxuICogYG51bGxgIGlzIHVzZWQgdG8gcmVwcmVzZW50IGVtcHR5IGpvdXJuYWxzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBRdWVyeUpvdXJuYWwgPSBzdHJpbmcgfCBudWxsO1xuXG4vKipcbiAqIENsaWVudCBtZXNzYWdlIHNjaGVtYVxuICovXG5cbnR5cGUgQ29ubmVjdCA9IHtcbiAgdHlwZTogXCJDb25uZWN0XCI7XG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICBjb25uZWN0aW9uQ291bnQ6IG51bWJlcjtcbiAgbGFzdENsb3NlUmVhc29uOiBzdHJpbmcgfCBudWxsO1xuICBtYXhPYnNlcnZlZFRpbWVzdGFtcD86IFRTIHwgdW5kZWZpbmVkO1xuICBjbGllbnRUczogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgQWRkUXVlcnkgPSB7XG4gIHR5cGU6IFwiQWRkXCI7XG4gIHF1ZXJ5SWQ6IFF1ZXJ5SWQ7XG4gIHVkZlBhdGg6IHN0cmluZztcbiAgYXJnczogSlNPTlZhbHVlW107XG4gIGpvdXJuYWw/OiBRdWVyeUpvdXJuYWwgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbXBvbmVudFBhdGg/OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgdHlwZSBSZW1vdmVRdWVyeSA9IHtcbiAgdHlwZTogXCJSZW1vdmVcIjtcbiAgcXVlcnlJZDogUXVlcnlJZDtcbn07XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5U2V0TW9kaWZpY2F0aW9uID0ge1xuICB0eXBlOiBcIk1vZGlmeVF1ZXJ5U2V0XCI7XG4gIGJhc2VWZXJzaW9uOiBRdWVyeVNldFZlcnNpb247XG4gIG5ld1ZlcnNpb246IFF1ZXJ5U2V0VmVyc2lvbjtcbiAgbW9kaWZpY2F0aW9uczogKEFkZFF1ZXJ5IHwgUmVtb3ZlUXVlcnkpW107XG59O1xuXG5leHBvcnQgdHlwZSBNdXRhdGlvblJlcXVlc3QgPSB7XG4gIHR5cGU6IFwiTXV0YXRpb25cIjtcbiAgcmVxdWVzdElkOiBSZXF1ZXN0SWQ7XG4gIHVkZlBhdGg6IHN0cmluZztcbiAgYXJnczogSlNPTlZhbHVlW107XG4gIC8vIEV4ZWN1dGUgdGhlIG11dGF0aW9uIG9uIGEgc3BlY2lmaWMgY29tcG9uZW50LlxuICAvLyBPbmx5IGFkbWluIGF1dGggaXMgYWxsb3dlZCB0byBydW4gbXV0YXRpb25zIG9uIG5vbi1yb290IGNvbXBvbmVudHMuXG4gIGNvbXBvbmVudFBhdGg/OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgdHlwZSBBY3Rpb25SZXF1ZXN0ID0ge1xuICB0eXBlOiBcIkFjdGlvblwiO1xuICByZXF1ZXN0SWQ6IFJlcXVlc3RJZDtcbiAgdWRmUGF0aDogc3RyaW5nO1xuICBhcmdzOiBKU09OVmFsdWVbXTtcbiAgLy8gRXhlY3V0ZSB0aGUgYWN0aW9uIG9uIGEgc3BlY2lmaWMgY29tcG9uZW50LlxuICAvLyBPbmx5IGFkbWluIGF1dGggaXMgYWxsb3dlZCB0byBydW4gYWN0aW9ucyBvbiBub24tcm9vdCBjb21wb25lbnRzLlxuICBjb21wb25lbnRQYXRoPzogc3RyaW5nIHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IHR5cGUgQWRtaW5BdXRoZW50aWNhdGlvbiA9IHtcbiAgdHlwZTogXCJBdXRoZW50aWNhdGVcIjtcbiAgdG9rZW5UeXBlOiBcIkFkbWluXCI7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIGJhc2VWZXJzaW9uOiBJZGVudGl0eVZlcnNpb247XG4gIGltcGVyc29uYXRpbmc/OiBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzIHwgdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IHR5cGUgQXV0aGVudGljYXRlID1cbiAgfCBBZG1pbkF1dGhlbnRpY2F0aW9uXG4gIHwge1xuICAgICAgdHlwZTogXCJBdXRoZW50aWNhdGVcIjtcbiAgICAgIHRva2VuVHlwZTogXCJVc2VyXCI7XG4gICAgICB2YWx1ZTogc3RyaW5nO1xuICAgICAgYmFzZVZlcnNpb246IElkZW50aXR5VmVyc2lvbjtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogXCJBdXRoZW50aWNhdGVcIjtcbiAgICAgIHRva2VuVHlwZTogXCJOb25lXCI7XG4gICAgICBiYXNlVmVyc2lvbjogSWRlbnRpdHlWZXJzaW9uO1xuICAgIH07XG5cbmV4cG9ydCB0eXBlIEV2ZW50ID0ge1xuICB0eXBlOiBcIkV2ZW50XCI7XG4gIGV2ZW50VHlwZTogc3RyaW5nO1xuICBldmVudDogYW55O1xufTtcbmV4cG9ydCB0eXBlIENsaWVudE1lc3NhZ2UgPVxuICB8IENvbm5lY3RcbiAgfCBBdXRoZW50aWNhdGVcbiAgfCBRdWVyeVNldE1vZGlmaWNhdGlvblxuICB8IE11dGF0aW9uUmVxdWVzdFxuICB8IEFjdGlvblJlcXVlc3RcbiAgfCBFdmVudDtcblxudHlwZSBFbmNvZGVkQ29ubmVjdCA9IE9taXQ8Q29ubmVjdCwgXCJtYXhPYnNlcnZlZFRpbWVzdGFtcFwiPiAmIHtcbiAgbWF4T2JzZXJ2ZWRUaW1lc3RhbXA/OiBFbmNvZGVkVFMgfCB1bmRlZmluZWQ7XG59O1xuXG4vLyBJdCdzIG5vdCBhIGJpZyBkZWFsIHRvIGFkZCBgfCB1bmRlZmluZWRgIHRvIGFueSBvcHRpb25hbCBwcm9wZXJ0aWVzIGhlcmUgYmVjYXVzZVxuLy8gdGhlc2UgbWVzc2FnZXMgYXJlIGJvdW5kIGZvciBKU09OLnN0cmluZ2lmeSgpIHNlcmlhbGl6YXRpb24sIHdoaWNoIHJlbW92ZXMgcHJvcGVydGllc1xuLy8gdGhhdCBhcmUgdW5kZWZpbmVkLlxudHlwZSBFbmNvZGVkQ2xpZW50TWVzc2FnZSA9XG4gIHwgRW5jb2RlZENvbm5lY3RcbiAgfCBBdXRoZW50aWNhdGVcbiAgfCBRdWVyeVNldE1vZGlmaWNhdGlvblxuICB8IE11dGF0aW9uUmVxdWVzdFxuICB8IEFjdGlvblJlcXVlc3RcbiAgfCBFdmVudDtcblxuLyoqXG4gKiBTZXJ2ZXIgbWVzc2FnZSBzY2hlbWFcbiAqL1xuZXhwb3J0IHR5cGUgVFMgPSBVNjQ7XG50eXBlIEVuY29kZWRUUyA9IEVuY29kZWRVNjQ7XG50eXBlIExvZ0xpbmVzID0gc3RyaW5nW107XG5cbmV4cG9ydCB0eXBlIFN0YXRlVmVyc2lvbiA9IHtcbiAgcXVlcnlTZXQ6IFF1ZXJ5U2V0VmVyc2lvbjtcbiAgdHM6IFRTO1xuICBpZGVudGl0eTogSWRlbnRpdHlWZXJzaW9uO1xufTtcbnR5cGUgRW5jb2RlZFN0YXRlVmVyc2lvbiA9IE9taXQ8U3RhdGVWZXJzaW9uLCBcInRzXCI+ICYgeyB0czogRW5jb2RlZFRTIH07XG5cbnR5cGUgU3RhdGVNb2RpZmljYXRpb24gPVxuICB8IHtcbiAgICAgIHR5cGU6IFwiUXVlcnlVcGRhdGVkXCI7XG4gICAgICBxdWVyeUlkOiBRdWVyeUlkO1xuICAgICAgdmFsdWU6IEpTT05WYWx1ZTtcbiAgICAgIGxvZ0xpbmVzOiBMb2dMaW5lcztcbiAgICAgIGpvdXJuYWw6IFF1ZXJ5Sm91cm5hbDtcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogXCJRdWVyeUZhaWxlZFwiO1xuICAgICAgcXVlcnlJZDogUXVlcnlJZDtcbiAgICAgIGVycm9yTWVzc2FnZTogc3RyaW5nO1xuICAgICAgbG9nTGluZXM6IExvZ0xpbmVzO1xuICAgICAgZXJyb3JEYXRhOiBKU09OVmFsdWU7XG4gICAgICBqb3VybmFsOiBRdWVyeUpvdXJuYWw7XG4gICAgfVxuICB8IHtcbiAgICAgIHR5cGU6IFwiUXVlcnlSZW1vdmVkXCI7XG4gICAgICBxdWVyeUlkOiBRdWVyeUlkO1xuICAgIH07XG5cbmV4cG9ydCB0eXBlIFRyYW5zaXRpb24gPSB7XG4gIHR5cGU6IFwiVHJhbnNpdGlvblwiO1xuICBzdGFydFZlcnNpb246IFN0YXRlVmVyc2lvbjtcbiAgZW5kVmVyc2lvbjogU3RhdGVWZXJzaW9uO1xuICBtb2RpZmljYXRpb25zOiBTdGF0ZU1vZGlmaWNhdGlvbltdO1xuICBjbGllbnRDbG9ja1NrZXc/OiBudW1iZXI7XG4gIHNlcnZlclRzPzogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgVHJhbnNpdGlvbkNodW5rID0ge1xuICB0eXBlOiBcIlRyYW5zaXRpb25DaHVua1wiO1xuICBjaHVuazogc3RyaW5nO1xuICBwYXJ0TnVtYmVyOiBudW1iZXI7XG4gIHRvdGFsUGFydHM6IG51bWJlcjtcbiAgdHJhbnNpdGlvbklkOiBzdHJpbmc7XG59O1xuXG50eXBlIE11dGF0aW9uU3VjY2VzcyA9IHtcbiAgdHlwZTogXCJNdXRhdGlvblJlc3BvbnNlXCI7XG4gIHJlcXVlc3RJZDogUmVxdWVzdElkO1xuICBzdWNjZXNzOiB0cnVlO1xuICByZXN1bHQ6IEpTT05WYWx1ZTtcbiAgdHM6IFRTO1xuICBsb2dMaW5lczogTG9nTGluZXM7XG59O1xudHlwZSBNdXRhdGlvbkZhaWxlZCA9IHtcbiAgdHlwZTogXCJNdXRhdGlvblJlc3BvbnNlXCI7XG4gIHJlcXVlc3RJZDogUmVxdWVzdElkO1xuICBzdWNjZXNzOiBmYWxzZTtcbiAgcmVzdWx0OiBzdHJpbmc7XG4gIGxvZ0xpbmVzOiBMb2dMaW5lcztcbiAgZXJyb3JEYXRhPzogSlNPTlZhbHVlO1xufTtcbmV4cG9ydCB0eXBlIE11dGF0aW9uUmVzcG9uc2UgPSBNdXRhdGlvblN1Y2Nlc3MgfCBNdXRhdGlvbkZhaWxlZDtcbnR5cGUgQWN0aW9uU3VjY2VzcyA9IHtcbiAgdHlwZTogXCJBY3Rpb25SZXNwb25zZVwiO1xuICByZXF1ZXN0SWQ6IFJlcXVlc3RJZDtcbiAgc3VjY2VzczogdHJ1ZTtcbiAgcmVzdWx0OiBKU09OVmFsdWU7XG4gIGxvZ0xpbmVzOiBMb2dMaW5lcztcbn07XG50eXBlIEFjdGlvbkZhaWxlZCA9IHtcbiAgdHlwZTogXCJBY3Rpb25SZXNwb25zZVwiO1xuICByZXF1ZXN0SWQ6IFJlcXVlc3RJZDtcbiAgc3VjY2VzczogZmFsc2U7XG4gIHJlc3VsdDogc3RyaW5nO1xuICBsb2dMaW5lczogTG9nTGluZXM7XG4gIGVycm9yRGF0YT86IEpTT05WYWx1ZTtcbn07XG5leHBvcnQgdHlwZSBBY3Rpb25SZXNwb25zZSA9IEFjdGlvblN1Y2Nlc3MgfCBBY3Rpb25GYWlsZWQ7XG5leHBvcnQgdHlwZSBBdXRoRXJyb3IgPSB7XG4gIHR5cGU6IFwiQXV0aEVycm9yXCI7XG4gIGVycm9yOiBzdHJpbmc7XG4gIGJhc2VWZXJzaW9uOiBJZGVudGl0eVZlcnNpb247XG4gIC8vIFRydWUgaWYgdGhpcyBlcnJvciBpcyBpbiByZXNwb25zZSB0byBwcm9jZXNzaW5nIGEgbmV3IGBBdXRoZW50aWNhdGVgIG1lc3NhZ2UuXG4gIC8vIE90aGVyIEF1dGhFcnJvcnMgbWF5IG9jY3VyIGR1ZSB0byBleGVjdXRpbmcgYSBmdW5jdGlvbiB3aXRoIGV4cGlyZWQgYXV0aCBhbmRcbiAgLy8gc2hvdWxkIGJlIGhhbmRsZWQgZGlmZmVyZW50bHkuXG4gIGF1dGhVcGRhdGVBdHRlbXB0ZWQ6IGJvb2xlYW47XG59O1xudHlwZSBGYXRhbEVycm9yID0ge1xuICB0eXBlOiBcIkZhdGFsRXJyb3JcIjtcbiAgZXJyb3I6IHN0cmluZztcbn07XG50eXBlIFBpbmcgPSB7XG4gIHR5cGU6IFwiUGluZ1wiO1xufTtcblxuLy8gU2VydmVyIE1lc3NhZ2VzIHdpdGhvdXQgdGhlIG1lc3NhZ2VzIG9ubHkgdmlzaWJsZSB0byBXZWJTb2NrZXRNYW5hZ2VyXG5leHBvcnQgdHlwZSBTZXJ2ZXJNZXNzYWdlID1cbiAgfCBUcmFuc2l0aW9uXG4gIHwgTXV0YXRpb25SZXNwb25zZVxuICB8IEFjdGlvblJlc3BvbnNlXG4gIHwgRmF0YWxFcnJvclxuICB8IEF1dGhFcnJvcjtcblxuZXhwb3J0IHR5cGUgV2lyZVNlcnZlck1lc3NhZ2UgPVxuICB8IFRyYW5zaXRpb25cbiAgfCBUcmFuc2l0aW9uQ2h1bmtcbiAgfCBNdXRhdGlvblJlc3BvbnNlXG4gIHwgQWN0aW9uUmVzcG9uc2VcbiAgfCBGYXRhbEVycm9yXG4gIHwgQXV0aEVycm9yXG4gIHwgUGluZztcblxudHlwZSBFbmNvZGVkVHJhbnNpdGlvbiA9IE9taXQ8VHJhbnNpdGlvbiwgXCJzdGFydFZlcnNpb25cIiB8IFwiZW5kVmVyc2lvblwiPiAmIHtcbiAgc3RhcnRWZXJzaW9uOiBFbmNvZGVkU3RhdGVWZXJzaW9uO1xuICBlbmRWZXJzaW9uOiBFbmNvZGVkU3RhdGVWZXJzaW9uO1xufTtcbnR5cGUgRW5jb2RlZE11dGF0aW9uU3VjY2VzcyA9IE9taXQ8TXV0YXRpb25TdWNjZXNzLCBcInRzXCI+ICYgeyB0czogRW5jb2RlZFRTIH07XG50eXBlIEVuY29kZWRNdXRhdGlvblJlc3BvbnNlID0gTXV0YXRpb25GYWlsZWQgfCBFbmNvZGVkTXV0YXRpb25TdWNjZXNzO1xuXG50eXBlIEVuY29kZWRTZXJ2ZXJNZXNzYWdlID1cbiAgfCBFbmNvZGVkVHJhbnNpdGlvblxuICB8IFRyYW5zaXRpb25DaHVua1xuICB8IEVuY29kZWRNdXRhdGlvblJlc3BvbnNlXG4gIHwgQWN0aW9uUmVzcG9uc2VcbiAgfCBGYXRhbEVycm9yXG4gIHwgQXV0aEVycm9yXG4gIHwgUGluZztcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/protocol.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/remote_query_set.js":
/*!***********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/remote_query_set.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RemoteQuerySet: () => (/* binding */ RemoteQuerySet)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../vendor/long.js */ \"(ssr)/./node_modules/convex/dist/esm/vendor/long.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nclass RemoteQuerySet {\n    constructor(queryPath, logger){\n        __publicField(this, \"version\");\n        __publicField(this, \"remoteQuerySet\");\n        __publicField(this, \"queryPath\");\n        __publicField(this, \"logger\");\n        this.version = {\n            querySet: 0,\n            ts: _vendor_long_js__WEBPACK_IMPORTED_MODULE_1__.Long.fromNumber(0),\n            identity: 0\n        };\n        this.remoteQuerySet = /* @__PURE__ */ new Map();\n        this.queryPath = queryPath;\n        this.logger = logger;\n    }\n    transition(transition) {\n        const start = transition.startVersion;\n        if (this.version.querySet !== start.querySet || this.version.ts.notEquals(start.ts) || this.version.identity !== start.identity) {\n            throw new Error(`Invalid start version: ${start.ts.toString()}:${start.querySet}:${start.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);\n        }\n        for (const modification of transition.modifications){\n            switch(modification.type){\n                case \"QueryUpdated\":\n                    {\n                        const queryPath = this.queryPath(modification.queryId);\n                        if (queryPath) {\n                            for (const line of modification.logLines){\n                                (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.logForFunction)(this.logger, \"info\", \"query\", queryPath, line);\n                            }\n                        }\n                        const value = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(modification.value ?? null);\n                        this.remoteQuerySet.set(modification.queryId, {\n                            success: true,\n                            value,\n                            logLines: modification.logLines\n                        });\n                        break;\n                    }\n                case \"QueryFailed\":\n                    {\n                        const queryPath = this.queryPath(modification.queryId);\n                        if (queryPath) {\n                            for (const line of modification.logLines){\n                                (0,_logging_js__WEBPACK_IMPORTED_MODULE_2__.logForFunction)(this.logger, \"info\", \"query\", queryPath, line);\n                            }\n                        }\n                        const { errorData } = modification;\n                        this.remoteQuerySet.set(modification.queryId, {\n                            success: false,\n                            errorMessage: modification.errorMessage,\n                            errorData: errorData !== void 0 ? (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(errorData) : void 0,\n                            logLines: modification.logLines\n                        });\n                        break;\n                    }\n                case \"QueryRemoved\":\n                    {\n                        this.remoteQuerySet.delete(modification.queryId);\n                        break;\n                    }\n                default:\n                    {\n                        modification;\n                        throw new Error(`Invalid modification ${modification.type}`);\n                    }\n            }\n        }\n        this.version = transition.endVersion;\n    }\n    remoteQueryResults() {\n        return this.remoteQuerySet;\n    }\n    timestamp() {\n        return this.version.ts;\n    }\n} //# sourceMappingURL=remote_query_set.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9yZW1vdGVfcXVlcnlfc2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNkI7QUFDUjtBQUNrQjtBQWNoQyxNQUFNLGVBQWU7SUFNMUIsWUFBWSxXQUFnRCxPQUFnQjtRQUw1RSxvQkFBUTtRQUNSLG9CQUFpQjtRQUNqQixvQkFBaUI7UUFDakIsb0JBQWlCO1FBR2YsS0FBSyxVQUFVO1lBQUUsVUFBVTtZQUFHLElBQUksaURBQUksQ0FBQyxXQUFXLENBQUM7WUFBRyxVQUFVO1FBQUU7UUFDbEUsS0FBSyxpQkFBaUIsb0JBQUksSUFBSTtRQUM5QixLQUFLLFlBQVk7UUFDakIsS0FBSyxTQUFTO0lBQ2hCO0lBRUEsV0FBVyxZQUE4QjtRQUN2QyxNQUFNLFFBQVEsV0FBVztRQUN6QixJQUNFLEtBQUssUUFBUSxhQUFhLE1BQU0sWUFDaEMsS0FBSyxRQUFRLEdBQUcsVUFBVSxNQUFNLEVBQUUsS0FDbEMsS0FBSyxRQUFRLGFBQWEsTUFBTSxVQUNoQztZQUNBLE1BQU0sSUFBSSxNQUNSLDBCQUEwQixNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksTUFBTSxRQUFRLElBQUksTUFBTSxRQUFRLHdCQUF3QixLQUFLLFFBQVEsR0FBRyxTQUFTLENBQUMsSUFBSSxLQUFLLFFBQVEsUUFBUSxJQUFJLEtBQUssUUFBUSxRQUFRO1FBRXpMO1FBQ0EsV0FBVyxnQkFBZ0IsV0FBVyxjQUFlO1lBQ25ELE9BQVEsYUFBYSxNQUFNO2dCQUN6QixLQUFLO29CQUFnQjt3QkFDbkIsTUFBTSxZQUFZLEtBQUssVUFBVSxhQUFhLE9BQU87d0JBQ3JELElBQUksV0FBVzs0QkFDYixXQUFXLFFBQVEsYUFBYSxTQUFVO2dDQUN4QywyREFBYyxDQUFDLEtBQUssUUFBUSxRQUFRLFNBQVMsV0FBVyxJQUFJOzRCQUM5RDt3QkFDRjt3QkFDQSxNQUFNLFFBQVEsOERBQVksQ0FBQyxhQUFhLFNBQVMsSUFBSTt3QkFDckQsS0FBSyxlQUFlLElBQUksYUFBYSxTQUFTOzRCQUM1QyxTQUFTOzRCQUNUOzRCQUNBLFVBQVUsYUFBYTt3QkFDekIsQ0FBQzt3QkFDRDtvQkFDRjtnQkFDQSxLQUFLO29CQUFlO3dCQUNsQixNQUFNLFlBQVksS0FBSyxVQUFVLGFBQWEsT0FBTzt3QkFDckQsSUFBSSxXQUFXOzRCQUNiLFdBQVcsUUFBUSxhQUFhLFNBQVU7Z0NBQ3hDLDJEQUFjLENBQUMsS0FBSyxRQUFRLFFBQVEsU0FBUyxXQUFXLElBQUk7NEJBQzlEO3dCQUNGO3dCQUNBLE1BQU0sRUFBRSxVQUFVLElBQUk7d0JBQ3RCLEtBQUssZUFBZSxJQUFJLGFBQWEsU0FBUzs0QkFDNUMsU0FBUzs0QkFDVCxjQUFjLGFBQWE7NEJBQzNCLFdBQ0UsY0FBYyxTQUFZLDhEQUFZLENBQUMsU0FBUyxJQUFJOzRCQUN0RCxVQUFVLGFBQWE7d0JBQ3pCLENBQUM7d0JBQ0Q7b0JBQ0Y7Z0JBQ0EsS0FBSztvQkFBZ0I7d0JBQ25CLEtBQUssZUFBZSxPQUFPLGFBQWEsT0FBTzt3QkFDL0M7b0JBQ0Y7Z0JBQ0E7b0JBQVM7d0JBRVA7d0JBQ0EsTUFBTSxJQUFJLE1BQU0sd0JBQXlCLGFBQXFCLElBQUksRUFBRTtvQkFDdEU7WUFDRjtRQUNGO1FBQ0EsS0FBSyxVQUFVLFdBQVc7SUFDNUI7SUFFQSxxQkFBbUQ7UUFDakQsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxZQUFrQjtRQUNoQixPQUFPLEtBQUssUUFBUTtJQUN0QjtBQUNGIiwic291cmNlcyI6WyIvc3JjL2Jyb3dzZXIvc3luYy9yZW1vdGVfcXVlcnlfc2V0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzb25Ub0NvbnZleCB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IExvbmcgfSBmcm9tIFwiLi4vLi4vdmVuZG9yL2xvbmcuanNcIjtcbmltcG9ydCB7IGxvZ0ZvckZ1bmN0aW9uLCBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2luZy5qc1wiO1xuaW1wb3J0IHsgUXVlcnlJZCwgU3RhdGVWZXJzaW9uLCBUcmFuc2l0aW9uIH0gZnJvbSBcIi4vcHJvdG9jb2wuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVzdWx0IH0gZnJvbSBcIi4vZnVuY3Rpb25fcmVzdWx0LmpzXCI7XG5cbi8qKlxuICogQSByZXByZXNlbnRpb24gb2YgdGhlIHF1ZXJ5IHJlc3VsdHMgd2UndmUgcmVjZWl2ZWQgb24gdGhlIGN1cnJlbnQgV2ViU29ja2V0XG4gKiBjb25uZWN0aW9uLlxuICpcbiAqIFF1ZXJpZXMgeW91IHdvbid0IGZpbmQgaGVyZSBpbmNsdWRlOlxuICogLSBxdWVyaWVzIHdoaWNoIGhhdmUgYmVlbiByZXF1ZXN0ZWQsIGJ1dCBubyBxdWVyeSB0cmFuc2l0aW9uIGhhcyBiZWVuIHJlY2VpdmVkIHlldCBmb3JcbiAqIC0gcXVlcmllcyB3aGljaCBhcmUgcG9wdWxhdGVkIG9ubHkgdGhvdWdoIGFjdGl2ZSBvcHRpbWlzdGljIHVwZGF0ZXMsIGJ1dCBhcmUgbm90IHN1YnNjcmliZWQgdG9cbiAqIC0gcXVlcmllcyB3aGljaCBoYXZlIGFscmVhZHkgYmVlbiByZW1vdmVkIGJ5IHRoZSBzZXJ2ZXIgKHdoaWNoIGl0IHNob3VsZG4ndCBkbyB1bmxlc3MgdGhhdCdzXG4gKiAgIGJlZW4gcmVxdWVzdGVkIGJ5IHRoZSBjbGllbnQpXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW1vdGVRdWVyeVNldCB7XG4gIHByaXZhdGUgdmVyc2lvbjogU3RhdGVWZXJzaW9uO1xuICBwcml2YXRlIHJlYWRvbmx5IHJlbW90ZVF1ZXJ5U2V0OiBNYXA8UXVlcnlJZCwgRnVuY3Rpb25SZXN1bHQ+O1xuICBwcml2YXRlIHJlYWRvbmx5IHF1ZXJ5UGF0aDogKHF1ZXJ5SWQ6IFF1ZXJ5SWQpID0+IHN0cmluZyB8IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXI7XG5cbiAgY29uc3RydWN0b3IocXVlcnlQYXRoOiAocXVlcnlJZDogUXVlcnlJZCkgPT4gc3RyaW5nIHwgbnVsbCwgbG9nZ2VyOiBMb2dnZXIpIHtcbiAgICB0aGlzLnZlcnNpb24gPSB7IHF1ZXJ5U2V0OiAwLCB0czogTG9uZy5mcm9tTnVtYmVyKDApLCBpZGVudGl0eTogMCB9O1xuICAgIHRoaXMucmVtb3RlUXVlcnlTZXQgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5xdWVyeVBhdGggPSBxdWVyeVBhdGg7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG4gIH1cblxuICB0cmFuc2l0aW9uKHRyYW5zaXRpb246IFRyYW5zaXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCBzdGFydCA9IHRyYW5zaXRpb24uc3RhcnRWZXJzaW9uO1xuICAgIGlmIChcbiAgICAgIHRoaXMudmVyc2lvbi5xdWVyeVNldCAhPT0gc3RhcnQucXVlcnlTZXQgfHxcbiAgICAgIHRoaXMudmVyc2lvbi50cy5ub3RFcXVhbHMoc3RhcnQudHMpIHx8XG4gICAgICB0aGlzLnZlcnNpb24uaWRlbnRpdHkgIT09IHN0YXJ0LmlkZW50aXR5XG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIHN0YXJ0IHZlcnNpb246ICR7c3RhcnQudHMudG9TdHJpbmcoKX06JHtzdGFydC5xdWVyeVNldH06JHtzdGFydC5pZGVudGl0eX0sIHRyYW5zaXRpb25pbmcgZnJvbSAke3RoaXMudmVyc2lvbi50cy50b1N0cmluZygpfToke3RoaXMudmVyc2lvbi5xdWVyeVNldH06JHt0aGlzLnZlcnNpb24uaWRlbnRpdHl9YCxcbiAgICAgICk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbW9kaWZpY2F0aW9uIG9mIHRyYW5zaXRpb24ubW9kaWZpY2F0aW9ucykge1xuICAgICAgc3dpdGNoIChtb2RpZmljYXRpb24udHlwZSkge1xuICAgICAgICBjYXNlIFwiUXVlcnlVcGRhdGVkXCI6IHtcbiAgICAgICAgICBjb25zdCBxdWVyeVBhdGggPSB0aGlzLnF1ZXJ5UGF0aChtb2RpZmljYXRpb24ucXVlcnlJZCk7XG4gICAgICAgICAgaWYgKHF1ZXJ5UGF0aCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIG1vZGlmaWNhdGlvbi5sb2dMaW5lcykge1xuICAgICAgICAgICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIFwicXVlcnlcIiwgcXVlcnlQYXRoLCBsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBqc29uVG9Db252ZXgobW9kaWZpY2F0aW9uLnZhbHVlID8/IG51bGwpO1xuICAgICAgICAgIHRoaXMucmVtb3RlUXVlcnlTZXQuc2V0KG1vZGlmaWNhdGlvbi5xdWVyeUlkLCB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBsb2dMaW5lczogbW9kaWZpY2F0aW9uLmxvZ0xpbmVzLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJRdWVyeUZhaWxlZFwiOiB7XG4gICAgICAgICAgY29uc3QgcXVlcnlQYXRoID0gdGhpcy5xdWVyeVBhdGgobW9kaWZpY2F0aW9uLnF1ZXJ5SWQpO1xuICAgICAgICAgIGlmIChxdWVyeVBhdGgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBtb2RpZmljYXRpb24ubG9nTGluZXMpIHtcbiAgICAgICAgICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiaW5mb1wiLCBcInF1ZXJ5XCIsIHF1ZXJ5UGF0aCwgbGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHsgZXJyb3JEYXRhIH0gPSBtb2RpZmljYXRpb247XG4gICAgICAgICAgdGhpcy5yZW1vdGVRdWVyeVNldC5zZXQobW9kaWZpY2F0aW9uLnF1ZXJ5SWQsIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBtb2RpZmljYXRpb24uZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JEYXRhOlxuICAgICAgICAgICAgICBlcnJvckRhdGEgIT09IHVuZGVmaW5lZCA/IGpzb25Ub0NvbnZleChlcnJvckRhdGEpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgbG9nTGluZXM6IG1vZGlmaWNhdGlvbi5sb2dMaW5lcyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiUXVlcnlSZW1vdmVkXCI6IHtcbiAgICAgICAgICB0aGlzLnJlbW90ZVF1ZXJ5U2V0LmRlbGV0ZShtb2RpZmljYXRpb24ucXVlcnlJZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIC8vIEVuZm9yY2UgdGhhdCB0aGUgc3dpdGNoLWNhc2UgaXMgZXhoYXVzdGl2ZS5cbiAgICAgICAgICBtb2RpZmljYXRpb24gc2F0aXNmaWVzIG5ldmVyO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtb2RpZmljYXRpb24gJHsobW9kaWZpY2F0aW9uIGFzIGFueSkudHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnZlcnNpb24gPSB0cmFuc2l0aW9uLmVuZFZlcnNpb247XG4gIH1cblxuICByZW1vdGVRdWVyeVJlc3VsdHMoKTogTWFwPFF1ZXJ5SWQsIEZ1bmN0aW9uUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlUXVlcnlTZXQ7XG4gIH1cblxuICB0aW1lc3RhbXAoKTogTG9uZyB7XG4gICAgcmV0dXJuIHRoaXMudmVyc2lvbi50cztcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/remote_query_set.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/request_manager.js":
/*!**********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/request_manager.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RequestManager: () => (/* binding */ RequestManager)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _logging_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass RequestManager {\n    constructor(logger, markConnectionStateDirty){\n        this.logger = logger;\n        this.markConnectionStateDirty = markConnectionStateDirty;\n        __publicField(this, \"inflightRequests\");\n        __publicField(this, \"requestsOlderThanRestart\");\n        __publicField(this, \"inflightMutationsCount\", 0);\n        __publicField(this, \"inflightActionsCount\", 0);\n        this.inflightRequests = /* @__PURE__ */ new Map();\n        this.requestsOlderThanRestart = /* @__PURE__ */ new Set();\n    }\n    request(message, sent) {\n        const result = new Promise((resolve)=>{\n            const status = sent ? \"Requested\" : \"NotSent\";\n            this.inflightRequests.set(message.requestId, {\n                message,\n                status: {\n                    status,\n                    requestedAt: /* @__PURE__ */ new Date(),\n                    onResult: resolve\n                }\n            });\n            if (message.type === \"Mutation\") {\n                this.inflightMutationsCount++;\n            } else if (message.type === \"Action\") {\n                this.inflightActionsCount++;\n            }\n        });\n        this.markConnectionStateDirty();\n        return result;\n    }\n    /**\n   * Update the state after receiving a response.\n   *\n   * @returns A RequestId if the request is complete and its optimistic update\n   * can be dropped, null otherwise.\n   */ onResponse(response) {\n        const requestInfo = this.inflightRequests.get(response.requestId);\n        if (requestInfo === void 0) {\n            return null;\n        }\n        if (requestInfo.status.status === \"Completed\") {\n            return null;\n        }\n        const udfType = requestInfo.message.type === \"Mutation\" ? \"mutation\" : \"action\";\n        const udfPath = requestInfo.message.udfPath;\n        for (const line of response.logLines){\n            (0,_logging_js__WEBPACK_IMPORTED_MODULE_1__.logForFunction)(this.logger, \"info\", udfType, udfPath, line);\n        }\n        const status = requestInfo.status;\n        let result;\n        let onResolve;\n        if (response.success) {\n            result = {\n                success: true,\n                logLines: response.logLines,\n                value: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(response.result)\n            };\n            onResolve = ()=>status.onResult(result);\n        } else {\n            const errorMessage = response.result;\n            const { errorData } = response;\n            (0,_logging_js__WEBPACK_IMPORTED_MODULE_1__.logForFunction)(this.logger, \"error\", udfType, udfPath, errorMessage);\n            result = {\n                success: false,\n                errorMessage,\n                errorData: errorData !== void 0 ? (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(errorData) : void 0,\n                logLines: response.logLines\n            };\n            onResolve = ()=>status.onResult(result);\n        }\n        if (response.type === \"ActionResponse\" || !response.success) {\n            onResolve();\n            this.inflightRequests.delete(response.requestId);\n            this.requestsOlderThanRestart.delete(response.requestId);\n            if (requestInfo.message.type === \"Action\") {\n                this.inflightActionsCount--;\n            } else if (requestInfo.message.type === \"Mutation\") {\n                this.inflightMutationsCount--;\n            }\n            this.markConnectionStateDirty();\n            return {\n                requestId: response.requestId,\n                result\n            };\n        }\n        requestInfo.status = {\n            status: \"Completed\",\n            result,\n            ts: response.ts,\n            onResolve\n        };\n        return null;\n    }\n    // Remove and returns completed requests.\n    removeCompleted(ts) {\n        const completeRequests = /* @__PURE__ */ new Map();\n        for (const [requestId, requestInfo] of this.inflightRequests.entries()){\n            const status = requestInfo.status;\n            if (status.status === \"Completed\" && status.ts.lessThanOrEqual(ts)) {\n                status.onResolve();\n                completeRequests.set(requestId, status.result);\n                if (requestInfo.message.type === \"Mutation\") {\n                    this.inflightMutationsCount--;\n                } else if (requestInfo.message.type === \"Action\") {\n                    this.inflightActionsCount--;\n                }\n                this.inflightRequests.delete(requestId);\n                this.requestsOlderThanRestart.delete(requestId);\n            }\n        }\n        if (completeRequests.size > 0) {\n            this.markConnectionStateDirty();\n        }\n        return completeRequests;\n    }\n    restart() {\n        this.requestsOlderThanRestart = new Set(this.inflightRequests.keys());\n        const allMessages = [];\n        for (const [requestId, value] of this.inflightRequests){\n            if (value.status.status === \"NotSent\") {\n                value.status.status = \"Requested\";\n                allMessages.push(value.message);\n                continue;\n            }\n            if (value.message.type === \"Mutation\") {\n                allMessages.push(value.message);\n            } else if (value.message.type === \"Action\") {\n                this.inflightRequests.delete(requestId);\n                this.requestsOlderThanRestart.delete(requestId);\n                this.inflightActionsCount--;\n                if (value.status.status === \"Completed\") {\n                    throw new Error(\"Action should never be in 'Completed' state\");\n                }\n                value.status.onResult({\n                    success: false,\n                    errorMessage: \"Connection lost while action was in flight\",\n                    logLines: []\n                });\n            }\n        }\n        this.markConnectionStateDirty();\n        return allMessages;\n    }\n    resume() {\n        const allMessages = [];\n        for (const [, value] of this.inflightRequests){\n            if (value.status.status === \"NotSent\") {\n                value.status.status = \"Requested\";\n                allMessages.push(value.message);\n                continue;\n            }\n        }\n        return allMessages;\n    }\n    /**\n   * @returns true if there are any requests that have been requested but have\n   * not be completed yet.\n   */ hasIncompleteRequests() {\n        for (const requestInfo of this.inflightRequests.values()){\n            if (requestInfo.status.status === \"Requested\") {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n   * @returns true if there are any inflight requests, including ones that have\n   * completed on the server, but have not been applied.\n   */ hasInflightRequests() {\n        return this.inflightRequests.size > 0;\n    }\n    /**\n   * @returns true if there are any inflight requests, that have been hanging around\n   * since prior to the most recent restart.\n   */ hasSyncedPastLastReconnect() {\n        return this.requestsOlderThanRestart.size === 0;\n    }\n    timeOfOldestInflightRequest() {\n        if (this.inflightRequests.size === 0) {\n            return null;\n        }\n        let oldestInflightRequest = Date.now();\n        for (const request of this.inflightRequests.values()){\n            if (request.status.status !== \"Completed\") {\n                if (request.status.requestedAt.getTime() < oldestInflightRequest) {\n                    oldestInflightRequest = request.status.requestedAt.getTime();\n                }\n            }\n        }\n        return new Date(oldestInflightRequest);\n    }\n    /**\n   * @returns The number of mutations currently in flight.\n   */ inflightMutations() {\n        return this.inflightMutationsCount;\n    }\n    /**\n   * @returns The number of actions currently in flight.\n   */ inflightActions() {\n        return this.inflightActionsCount;\n    }\n} //# sourceMappingURL=request_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9yZXF1ZXN0X21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZCO0FBQ1U7QUF5QmhDLE1BQU0sZUFBZTtJQVcxQixZQUNtQixRQUNBLHlCQUNqQjtRQUZpQjtRQUNBO1FBWm5CLG9CQUFRO1FBT1Isb0JBQVE7UUFDUixvQkFBUSwwQkFBaUM7UUFDekMsb0JBQVEsd0JBQStCO1FBS3JDLEtBQUssbUJBQW1CLG9CQUFJLElBQUk7UUFDaEMsS0FBSywyQkFBMkIsb0JBQUksSUFBSTtJQUMxQztJQUVBLFFBQ0UsU0FDQSxNQUN5QjtRQUN6QixNQUFNLFNBQVMsSUFBSSxRQUF3QixDQUFDO1lBQzFDLE1BQU0sU0FBUyxPQUFPLGNBQWM7WUFDcEMsS0FBSyxpQkFBaUIsSUFBSSxRQUFRLFdBQVc7Z0JBQzNDO2dCQUNBLFFBQVE7b0JBQUU7b0JBQVEsYUFBYSxvQkFBSSxLQUFLO29CQUFHLFVBQVU7Z0JBQVE7WUFDL0QsQ0FBQztZQUVELElBQUksUUFBUSxTQUFTLFlBQVk7Z0JBQy9CLEtBQUs7WUFDUCxXQUFXLFFBQVEsU0FBUyxVQUFVO2dCQUNwQyxLQUFLO1lBQ1A7UUFDRixDQUFDO1FBRUQsS0FBSyx5QkFBeUI7UUFDOUIsT0FBTztJQUNUO0lBQUE7Ozs7O0dBQUEsR0FRQSxXQUNFLFVBQ3lEO1FBQ3pELE1BQU0sY0FBYyxLQUFLLGlCQUFpQixJQUFJLFNBQVMsU0FBUztRQUNoRSxJQUFJLGdCQUFnQixRQUFXO1lBZ0I3QixPQUFPO1FBQ1Q7UUFNQSxJQUFJLFlBQVksT0FBTyxXQUFXLGFBQWE7WUFDN0MsT0FBTztRQUNUO1FBRUEsTUFBTSxVQUNKLFlBQVksUUFBUSxTQUFTLGFBQWEsYUFBYTtRQUN6RCxNQUFNLFVBQVUsWUFBWSxRQUFRO1FBRXBDLFdBQVcsUUFBUSxTQUFTLFNBQVU7WUFDcEMsMkRBQWMsQ0FBQyxLQUFLLFFBQVEsUUFBUSxTQUFT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QUM7UUFDckIsV0FBVyxDQUFDLEVBQUUsS0FBSyxLQUFLLEtBQUssaUJBQWtCO1lBQzdDLElBQUksTUFBTSxPQUFPLFdBQVcsV0FBVztnQkFDckMsTUFBTSxPQUFPLFNBQVM7Z0JBQ3RCLFlBQVksS0FBSyxNQUFNLE9BQU87Z0JBQzlCO1lBQ0Y7UUFDRjtRQUNBLE9BQU87SUFDVDtJQUFBOzs7R0FBQSxHQU1BLHdCQUFpQztRQUMvQixXQUFXLGVBQWUsS0FBSyxpQkFBaUIsT0FBTyxFQUFHO1lBQ3hELElBQUksWUFBWSxPQUFPLFdBQVcsYUFBYTtnQkFDN0MsT0FBTztZQUNUO1FBQ0Y7UUFDQSxPQUFPO0lBQ1Q7SUFBQTs7O0dBQUEsR0FNQSxzQkFBK0I7UUFDN0IsT0FBTyxLQUFLLGlCQUFpQixPQUFPO0lBQ3RDO0lBQUE7OztHQUFBLEdBTUEsNkJBQXNDO1FBQ3BDLE9BQU8sS0FBSyx5QkFBeUIsU0FBUztJQUNoRDtJQUVBLDhCQUEyQztRQUN6QyxJQUFJLEtBQUssaUJBQWlCLFNBQVMsR0FBRztZQUNwQyxPQUFPO1FBQ1Q7UUFDQSxJQUFJLHdCQUF3QixLQUFLLElBQUk7UUFDckMsV0FBVyxXQUFXLEtBQUssaUJBQWlCLE9BQU8sRUFBRztZQUNwRCxJQUFJLFFBQVEsT0FBTyxXQUFXLGFBQWE7Z0JBQ3pDLElBQUksUUFBUSxPQUFPLFlBQVksUUFBUSxJQUFJLHVCQUF1QjtvQkFDaEUsd0JBQXdCLFFBQVEsT0FBTyxZQUFZLFFBQVE7Z0JBQzdEO1lBQ0Y7UUFDRjtRQUNBLE9BQU8sSUFBSSxLQUFLLHFCQUFxQjtJQUN2QztJQUFBOztHQUFBLEdBS0Esb0JBQTRCO1FBQzFCLE9BQU8sS0FBSztJQUNkO0lBQUE7O0dBQUEsR0FLQSxrQkFBMEI7UUFDeEIsT0FBTyxLQUFLO0lBQ2Q7QUFDRiIsInNvdXJjZXMiOlsiL3NyYy9icm93c2VyL3N5bmMvcmVxdWVzdF9tYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzb25Ub0NvbnZleCB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IGxvZ0ZvckZ1bmN0aW9uLCBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nZ2luZy5qc1wiO1xuaW1wb3J0IHsgTG9uZyB9IGZyb20gXCIuLi8uLi92ZW5kb3IvbG9uZy5qc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25SZXN1bHQgfSBmcm9tIFwiLi9mdW5jdGlvbl9yZXN1bHQuanNcIjtcbmltcG9ydCB7XG4gIEFjdGlvblJlcXVlc3QsXG4gIEFjdGlvblJlc3BvbnNlLFxuICBDbGllbnRNZXNzYWdlLFxuICBNdXRhdGlvblJlcXVlc3QsXG4gIE11dGF0aW9uUmVzcG9uc2UsXG4gIFJlcXVlc3RJZCxcbn0gZnJvbSBcIi4vcHJvdG9jb2wuanNcIjtcblxudHlwZSBSZXF1ZXN0U3RhdHVzID1cbiAgfCB7XG4gICAgICBzdGF0dXM6IFwiUmVxdWVzdGVkXCIgfCBcIk5vdFNlbnRcIjtcbiAgICAgIG9uUmVzdWx0OiAocmVzdWx0OiBGdW5jdGlvblJlc3VsdCkgPT4gdm9pZDtcbiAgICAgIHJlcXVlc3RlZEF0OiBEYXRlO1xuICAgIH1cbiAgfCB7XG4gICAgICBzdGF0dXM6IFwiQ29tcGxldGVkXCI7XG4gICAgICByZXN1bHQ6IEZ1bmN0aW9uUmVzdWx0O1xuICAgICAgb25SZXNvbHZlOiAoKSA9PiB2b2lkO1xuICAgICAgdHM6IExvbmc7XG4gICAgfTtcblxuZXhwb3J0IGNsYXNzIFJlcXVlc3RNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBpbmZsaWdodFJlcXVlc3RzOiBNYXA8XG4gICAgUmVxdWVzdElkLFxuICAgIHtcbiAgICAgIG1lc3NhZ2U6IE11dGF0aW9uUmVxdWVzdCB8IEFjdGlvblJlcXVlc3Q7XG4gICAgICBzdGF0dXM6IFJlcXVlc3RTdGF0dXM7XG4gICAgfVxuICA+O1xuICBwcml2YXRlIHJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydDogU2V0PFJlcXVlc3RJZD47XG4gIHByaXZhdGUgaW5mbGlnaHRNdXRhdGlvbnNDb3VudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBpbmZsaWdodEFjdGlvbnNDb3VudDogbnVtYmVyID0gMDtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eTogKCkgPT4gdm9pZCxcbiAgKSB7XG4gICAgdGhpcy5pbmZsaWdodFJlcXVlc3RzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMucmVxdWVzdHNPbGRlclRoYW5SZXN0YXJ0ID0gbmV3IFNldCgpO1xuICB9XG5cbiAgcmVxdWVzdChcbiAgICBtZXNzYWdlOiBNdXRhdGlvblJlcXVlc3QgfCBBY3Rpb25SZXF1ZXN0LFxuICAgIHNlbnQ6IGJvb2xlYW4sXG4gICk6IFByb21pc2U8RnVuY3Rpb25SZXN1bHQ+IHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgUHJvbWlzZTxGdW5jdGlvblJlc3VsdD4oKHJlc29sdmUpID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHNlbnQgPyBcIlJlcXVlc3RlZFwiIDogXCJOb3RTZW50XCI7XG4gICAgICB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuc2V0KG1lc3NhZ2UucmVxdWVzdElkLCB7XG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICAgIHN0YXR1czogeyBzdGF0dXMsIHJlcXVlc3RlZEF0OiBuZXcgRGF0ZSgpLCBvblJlc3VsdDogcmVzb2x2ZSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiTXV0YXRpb25cIikge1xuICAgICAgICB0aGlzLmluZmxpZ2h0TXV0YXRpb25zQ291bnQrKztcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSBcIkFjdGlvblwiKSB7XG4gICAgICAgIHRoaXMuaW5mbGlnaHRBY3Rpb25zQ291bnQrKztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHN0YXRlIGFmdGVyIHJlY2VpdmluZyBhIHJlc3BvbnNlLlxuICAgKlxuICAgKiBAcmV0dXJucyBBIFJlcXVlc3RJZCBpZiB0aGUgcmVxdWVzdCBpcyBjb21wbGV0ZSBhbmQgaXRzIG9wdGltaXN0aWMgdXBkYXRlXG4gICAqIGNhbiBiZSBkcm9wcGVkLCBudWxsIG90aGVyd2lzZS5cbiAgICovXG4gIG9uUmVzcG9uc2UoXG4gICAgcmVzcG9uc2U6IE11dGF0aW9uUmVzcG9uc2UgfCBBY3Rpb25SZXNwb25zZSxcbiAgKTogeyByZXF1ZXN0SWQ6IFJlcXVlc3RJZDsgcmVzdWx0OiBGdW5jdGlvblJlc3VsdCB9IHwgbnVsbCB7XG4gICAgY29uc3QgcmVxdWVzdEluZm8gPSB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuZ2V0KHJlc3BvbnNlLnJlcXVlc3RJZCk7XG4gICAgaWYgKHJlcXVlc3RJbmZvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEFubm95aW5nbHkgd2UgY2FuIG9jY2FzaW9uYWxseSBnZXQgcmVzcG9uc2VzIHRvIG11dGF0aW9ucyB0aGF0IHdlJ3JlIG5vXG4gICAgICAvLyBsb25nZXIgdHJhY2tpbmcuIE9uZSBmbG93IHdoZXJlIHRoaXMgaGFwcGVucyBpczpcbiAgICAgIC8vIDEuIENsaWVudCBzZW5kcyBtdXRhdGlvbiAxXG4gICAgICAvLyAyLiBDbGllbnQgZ2V0cyByZXNwb25zZSBmb3IgbXV0YXRpb24gMS4gVGhlIHNldmVyIHNheXMgdGhhdCBpdCB3YXMgY29tbWl0dGVkIGF0IHRzPTEwLlxuICAgICAgLy8gMy4gQ2xpZW50IGlzIGRpc2Nvbm5lY3RlZFxuICAgICAgLy8gNC4gQ2xpZW50IHJlY29ubmVjdHMgYW5kIHJlLWlzc3VlcyBxdWVyaWVzIGFuZCB0aGlzIG11dGF0aW9uLlxuICAgICAgLy8gNS4gU2VydmVyIHNlbmRzIHRyYW5zaXRpb24gbWVzc2FnZSB0byB0cz0yMFxuICAgICAgLy8gNi4gQ2xpZW50IGRyb3BzIG11dGF0aW9uIGJlY2F1c2UgaXQncyBhbHJlYWR5IGJlZW4gb2JzZXJ2ZWQuXG4gICAgICAvLyA3LiBDbGllbnQgcmVjZWl2ZXMgYSBzZWNvbmQgcmVzcG9uc2UgZm9yIG11dGF0aW9uIDEgYnV0IGRvZXNuJ3Qga25vdyBhYm91dCBpdCBhbnltb3JlLlxuXG4gICAgICAvLyBUaGUgcmlnaHQgZml4IGZvciB0aGlzIGlzIHByb2JhYmx5IHRvIGFkZCBhIHJlY29uY2lsaWF0aW9uIHBoYXNlIG9uXG4gICAgICAvLyByZWNvbm5lY3Rpb24gd2hlcmUgd2UgcmVjZWl2ZSByZXNwb25zZXMgdG8gYWxsIHRoZSBtdXRhdGlvbnMgYmVmb3JlXG4gICAgICAvLyB0aGUgdHJhbnNpdGlvbiBtZXNzYWdlIHNvIHRoaXMgZmxvdyBjb3VsZCBuZXZlciBoYXBwZW4gKENYLTE1MTMpLlxuXG4gICAgICAvLyBGb3Igbm93IHRob3VnaCwgd2UgY2FuIGp1c3QgaWdub3JlIHRoaXMgbWVzc2FnZS5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIEJlY2F1c2UgYC5yZXN0YXJ0KClgIHJlLXJlcXVlc3RzIGNvbXBsZXRlZCByZXF1ZXN0cywgd2UgbWF5IGdldCBzb21lXG4gICAgLy8gcmVzcG9uc2VzIGZvciByZXF1ZXN0cyB0aGF0IGFyZSBhbHJlYWR5IGluIHRoZSBcIkNvbXBsZXRlZFwiIHN0YXRlLlxuICAgIC8vIFdlIGNhbiBzYWZlbHkgaWdub3JlIHRob3NlIGJlY2F1c2Ugd2UndmUgYWxyZWFkeSBub3RpZmllZCB0aGUgVUkgYWJvdXRcbiAgICAvLyB0aGVpciByZXN1bHRzLlxuICAgIGlmIChyZXF1ZXN0SW5mby5zdGF0dXMuc3RhdHVzID09PSBcIkNvbXBsZXRlZFwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCB1ZGZUeXBlID1cbiAgICAgIHJlcXVlc3RJbmZvLm1lc3NhZ2UudHlwZSA9PT0gXCJNdXRhdGlvblwiID8gXCJtdXRhdGlvblwiIDogXCJhY3Rpb25cIjtcbiAgICBjb25zdCB1ZGZQYXRoID0gcmVxdWVzdEluZm8ubWVzc2FnZS51ZGZQYXRoO1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIHJlc3BvbnNlLmxvZ0xpbmVzKSB7XG4gICAgICBsb2dGb3JGdW5jdGlvbih0aGlzLmxvZ2dlciwgXCJpbmZvXCIsIHVkZlR5cGUsIHVkZlBhdGgsIGxpbmUpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXR1cyA9IHJlcXVlc3RJbmZvLnN0YXR1cztcbiAgICBsZXQgcmVzdWx0OiBGdW5jdGlvblJlc3VsdDtcbiAgICBsZXQgb25SZXNvbHZlO1xuICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGxvZ0xpbmVzOiByZXNwb25zZS5sb2dMaW5lcyxcbiAgICAgICAgdmFsdWU6IGpzb25Ub0NvbnZleChyZXNwb25zZS5yZXN1bHQpLFxuICAgICAgfTtcbiAgICAgIG9uUmVzb2x2ZSA9ICgpID0+IHN0YXR1cy5vblJlc3VsdChyZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5yZXN1bHQgYXMgc3RyaW5nO1xuICAgICAgY29uc3QgeyBlcnJvckRhdGEgfSA9IHJlc3BvbnNlO1xuICAgICAgbG9nRm9yRnVuY3Rpb24odGhpcy5sb2dnZXIsIFwiZXJyb3JcIiwgdWRmVHlwZSwgdWRmUGF0aCwgZXJyb3JNZXNzYWdlKTtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yTWVzc2FnZSxcbiAgICAgICAgZXJyb3JEYXRhOlxuICAgICAgICAgIGVycm9yRGF0YSAhPT0gdW5kZWZpbmVkID8ganNvblRvQ29udmV4KGVycm9yRGF0YSkgOiB1bmRlZmluZWQsXG4gICAgICAgIGxvZ0xpbmVzOiByZXNwb25zZS5sb2dMaW5lcyxcbiAgICAgIH07XG4gICAgICBvblJlc29sdmUgPSAoKSA9PiBzdGF0dXMub25SZXN1bHQocmVzdWx0KTtcbiAgICB9XG5cbiAgICAvLyBXZSBjYW4gcmVzb2x2ZSBNdXRhdGlvbiBmYWlsdXJlcyBpbW1lZGlhdGVseSBzaW5jZSB0aGV5IGRvbid0IGhhdmUgYW55XG4gICAgLy8gc2lkZSBlZmZlY3RzLiBBY3Rpb25zIGFyZSBpbnRlbnRpb25hbGx5IGRlY291cGxlZCBmcm9tXG4gICAgLy8gcXVlcmllcy9tdXRhdGlvbnMgaGVyZSBvbiB0aGUgc3luYyBwcm90b2NvbCBzaW5jZSB0aGV5IGhhdmUgZGlmZmVyZW50XG4gICAgLy8gZ3VhcmFudGVlcy5cbiAgICBpZiAocmVzcG9uc2UudHlwZSA9PT0gXCJBY3Rpb25SZXNwb25zZVwiIHx8ICFyZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICBvblJlc29sdmUoKTtcbiAgICAgIHRoaXMuaW5mbGlnaHRSZXF1ZXN0cy5kZWxldGUocmVzcG9uc2UucmVxdWVzdElkKTtcbiAgICAgIHRoaXMucmVxdWVzdHNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShyZXNwb25zZS5yZXF1ZXN0SWQpO1xuXG4gICAgICBpZiAocmVxdWVzdEluZm8ubWVzc2FnZS50eXBlID09PSBcIkFjdGlvblwiKSB7XG4gICAgICAgIHRoaXMuaW5mbGlnaHRBY3Rpb25zQ291bnQtLTtcbiAgICAgIH0gZWxzZSBpZiAocmVxdWVzdEluZm8ubWVzc2FnZS50eXBlID09PSBcIk11dGF0aW9uXCIpIHtcbiAgICAgICAgdGhpcy5pbmZsaWdodE11dGF0aW9uc0NvdW50LS07XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgICByZXR1cm4geyByZXF1ZXN0SWQ6IHJlc3BvbnNlLnJlcXVlc3RJZCwgcmVzdWx0IH07XG4gICAgfVxuXG4gICAgLy8gV2UgaGF2ZSB0byB3YWl0IHRvIHJlc29sdmUgdGhlIHJlcXVlc3QgcHJvbWlzZSB1bnRpbCBhZnRlciB3ZSB0cmFuc2l0aW9uXG4gICAgLy8gcGFzdCB0aGlzIHRpbWVzdGFtcCBzbyBjbGllbnRzIGNhbiByZWFkIHRoZWlyIG93biB3cml0ZXMuXG4gICAgcmVxdWVzdEluZm8uc3RhdHVzID0ge1xuICAgICAgc3RhdHVzOiBcIkNvbXBsZXRlZFwiLFxuICAgICAgcmVzdWx0LFxuICAgICAgdHM6IHJlc3BvbnNlLnRzLFxuICAgICAgb25SZXNvbHZlLFxuICAgIH07XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFJlbW92ZSBhbmQgcmV0dXJucyBjb21wbGV0ZWQgcmVxdWVzdHMuXG4gIHJlbW92ZUNvbXBsZXRlZCh0czogTG9uZyk6IE1hcDxSZXF1ZXN0SWQsIEZ1bmN0aW9uUmVzdWx0PiB7XG4gICAgY29uc3QgY29tcGxldGVSZXF1ZXN0czogTWFwPFJlcXVlc3RJZCwgRnVuY3Rpb25SZXN1bHQ+ID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgW3JlcXVlc3RJZCwgcmVxdWVzdEluZm9dIG9mIHRoaXMuaW5mbGlnaHRSZXF1ZXN0cy5lbnRyaWVzKCkpIHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJlcXVlc3RJbmZvLnN0YXR1cztcbiAgICAgIGlmIChzdGF0dXMuc3RhdHVzID09PSBcIkNvbXBsZXRlZFwiICYmIHN0YXR1cy50cy5sZXNzVGhhbk9yRXF1YWwodHMpKSB7XG4gICAgICAgIHN0YXR1cy5vblJlc29sdmUoKTtcbiAgICAgICAgY29tcGxldGVSZXF1ZXN0cy5zZXQocmVxdWVzdElkLCBzdGF0dXMucmVzdWx0KTtcblxuICAgICAgICBpZiAocmVxdWVzdEluZm8ubWVzc2FnZS50eXBlID09PSBcIk11dGF0aW9uXCIpIHtcbiAgICAgICAgICB0aGlzLmluZmxpZ2h0TXV0YXRpb25zQ291bnQtLTtcbiAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0SW5mby5tZXNzYWdlLnR5cGUgPT09IFwiQWN0aW9uXCIpIHtcbiAgICAgICAgICB0aGlzLmluZmxpZ2h0QWN0aW9uc0NvdW50LS07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuZGVsZXRlKHJlcXVlc3RJZCk7XG4gICAgICAgIHRoaXMucmVxdWVzdHNPbGRlclRoYW5SZXN0YXJ0LmRlbGV0ZShyZXF1ZXN0SWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29tcGxldGVSZXF1ZXN0cy5zaXplID4gMCkge1xuICAgICAgdGhpcy5tYXJrQ29ubmVjdGlvblN0YXRlRGlydHkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBsZXRlUmVxdWVzdHM7XG4gIH1cblxuICByZXN0YXJ0KCk6IENsaWVudE1lc3NhZ2VbXSB7XG4gICAgLy8gV2hlbiB3ZSByZWNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHJlLXJlcXVlc3QgYWxsIHJlcXVlc3RzIHRoYXQgYXJlIHNhZmVcbiAgICAvLyB0byBiZSByZXNlbmQuXG5cbiAgICB0aGlzLnJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydCA9IG5ldyBTZXQodGhpcy5pbmZsaWdodFJlcXVlc3RzLmtleXMoKSk7XG4gICAgY29uc3QgYWxsTWVzc2FnZXMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtyZXF1ZXN0SWQsIHZhbHVlXSBvZiB0aGlzLmluZmxpZ2h0UmVxdWVzdHMpIHtcbiAgICAgIGlmICh2YWx1ZS5zdGF0dXMuc3RhdHVzID09PSBcIk5vdFNlbnRcIikge1xuICAgICAgICB2YWx1ZS5zdGF0dXMuc3RhdHVzID0gXCJSZXF1ZXN0ZWRcIjtcbiAgICAgICAgYWxsTWVzc2FnZXMucHVzaCh2YWx1ZS5tZXNzYWdlKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWx1ZS5tZXNzYWdlLnR5cGUgPT09IFwiTXV0YXRpb25cIikge1xuICAgICAgICAvLyBUaGlzIGluY2x1ZGVzIG9uZXMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBjb21wbGV0ZWQgYmVjYXVzZSB3ZSBzdGlsbFxuICAgICAgICAvLyB3YW50IHRvIHRlbGwgdGhlIGJhY2tlbmQgdG8gdHJhbnNpdGlvbiB0aGUgY2xpZW50IHBhc3QgdGhlIGNvbXBsZXRlZFxuICAgICAgICAvLyB0aW1lc3RhbXAuIFRoaXMgaXMgc2FmZSBzaW5jZSBtdXRhdGlvbnMgYXJlIGlkZW1wb3RlbnQuXG4gICAgICAgIGFsbE1lc3NhZ2VzLnB1c2godmFsdWUubWVzc2FnZSk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlLm1lc3NhZ2UudHlwZSA9PT0gXCJBY3Rpb25cIikge1xuICAgICAgICAvLyBVbmxpa2UgbXV0YXRpb25zLCBhY3Rpb25zIGFyZSBub3QgaWRlbXBvdGVudC4gV2hlbiB3ZSByZWNvbm5lY3QgdG8gdGhlXG4gICAgICAgIC8vIGJhY2tlbmQsIHdlIGRvbid0IGtub3cgaWYgaXQgaXMgc2FmZSB0byByZXNlbmQgaW4tZmxpZ2h0IGFjdGlvbnMsIHNvIHdlXG4gICAgICAgIC8vIGNhbmNlbCB0aGVtIGFuZCBjb25zaWRlciB0aGVtIGZhaWxlZC5cbiAgICAgICAgdGhpcy5pbmZsaWdodFJlcXVlc3RzLmRlbGV0ZShyZXF1ZXN0SWQpO1xuICAgICAgICB0aGlzLnJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydC5kZWxldGUocmVxdWVzdElkKTtcbiAgICAgICAgdGhpcy5pbmZsaWdodEFjdGlvbnNDb3VudC0tO1xuICAgICAgICBpZiAodmFsdWUuc3RhdHVzLnN0YXR1cyA9PT0gXCJDb21wbGV0ZWRcIikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFjdGlvbiBzaG91bGQgbmV2ZXIgYmUgaW4gJ0NvbXBsZXRlZCcgc3RhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUuc3RhdHVzLm9uUmVzdWx0KHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvck1lc3NhZ2U6IFwiQ29ubmVjdGlvbiBsb3N0IHdoaWxlIGFjdGlvbiB3YXMgaW4gZmxpZ2h0XCIsXG4gICAgICAgICAgbG9nTGluZXM6IFtdLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5tYXJrQ29ubmVjdGlvblN0YXRlRGlydHkoKTtcbiAgICByZXR1cm4gYWxsTWVzc2FnZXM7XG4gIH1cblxuICByZXN1bWUoKTogQ2xpZW50TWVzc2FnZVtdIHtcbiAgICBjb25zdCBhbGxNZXNzYWdlcyA9IFtdO1xuICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIHRoaXMuaW5mbGlnaHRSZXF1ZXN0cykge1xuICAgICAgaWYgKHZhbHVlLnN0YXR1cy5zdGF0dXMgPT09IFwiTm90U2VudFwiKSB7XG4gICAgICAgIHZhbHVlLnN0YXR1cy5zdGF0dXMgPSBcIlJlcXVlc3RlZFwiO1xuICAgICAgICBhbGxNZXNzYWdlcy5wdXNoKHZhbHVlLm1lc3NhZ2UpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFsbE1lc3NhZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHRydWUgaWYgdGhlcmUgYXJlIGFueSByZXF1ZXN0cyB0aGF0IGhhdmUgYmVlbiByZXF1ZXN0ZWQgYnV0IGhhdmVcbiAgICogbm90IGJlIGNvbXBsZXRlZCB5ZXQuXG4gICAqL1xuICBoYXNJbmNvbXBsZXRlUmVxdWVzdHMoKTogYm9vbGVhbiB7XG4gICAgZm9yIChjb25zdCByZXF1ZXN0SW5mbyBvZiB0aGlzLmluZmxpZ2h0UmVxdWVzdHMudmFsdWVzKCkpIHtcbiAgICAgIGlmIChyZXF1ZXN0SW5mby5zdGF0dXMuc3RhdHVzID09PSBcIlJlcXVlc3RlZFwiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYW55IGluZmxpZ2h0IHJlcXVlc3RzLCBpbmNsdWRpbmcgb25lcyB0aGF0IGhhdmVcbiAgICogY29tcGxldGVkIG9uIHRoZSBzZXJ2ZXIsIGJ1dCBoYXZlIG5vdCBiZWVuIGFwcGxpZWQuXG4gICAqL1xuICBoYXNJbmZsaWdodFJlcXVlc3RzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmluZmxpZ2h0UmVxdWVzdHMuc2l6ZSA+IDA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYW55IGluZmxpZ2h0IHJlcXVlc3RzLCB0aGF0IGhhdmUgYmVlbiBoYW5naW5nIGFyb3VuZFxuICAgKiBzaW5jZSBwcmlvciB0byB0aGUgbW9zdCByZWNlbnQgcmVzdGFydC5cbiAgICovXG4gIGhhc1N5bmNlZFBhc3RMYXN0UmVjb25uZWN0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3RzT2xkZXJUaGFuUmVzdGFydC5zaXplID09PSAwO1xuICB9XG5cbiAgdGltZU9mT2xkZXN0SW5mbGlnaHRSZXF1ZXN0KCk6IERhdGUgfCBudWxsIHtcbiAgICBpZiAodGhpcy5pbmZsaWdodFJlcXVlc3RzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgb2xkZXN0SW5mbGlnaHRSZXF1ZXN0ID0gRGF0ZS5ub3coKTtcbiAgICBmb3IgKGNvbnN0IHJlcXVlc3Qgb2YgdGhpcy5pbmZsaWdodFJlcXVlc3RzLnZhbHVlcygpKSB7XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMuc3RhdHVzICE9PSBcIkNvbXBsZXRlZFwiKSB7XG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cy5yZXF1ZXN0ZWRBdC5nZXRUaW1lKCkgPCBvbGRlc3RJbmZsaWdodFJlcXVlc3QpIHtcbiAgICAgICAgICBvbGRlc3RJbmZsaWdodFJlcXVlc3QgPSByZXF1ZXN0LnN0YXR1cy5yZXF1ZXN0ZWRBdC5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBEYXRlKG9sZGVzdEluZmxpZ2h0UmVxdWVzdCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgVGhlIG51bWJlciBvZiBtdXRhdGlvbnMgY3VycmVudGx5IGluIGZsaWdodC5cbiAgICovXG4gIGluZmxpZ2h0TXV0YXRpb25zKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW5mbGlnaHRNdXRhdGlvbnNDb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBUaGUgbnVtYmVyIG9mIGFjdGlvbnMgY3VycmVudGx5IGluIGZsaWdodC5cbiAgICovXG4gIGluZmxpZ2h0QWN0aW9ucygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmluZmxpZ2h0QWN0aW9uc0NvdW50O1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/request_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/session.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/session.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   newSessionId: () => (/* binding */ newSessionId)\n/* harmony export */ });\n\nfunction newSessionId() {\n    return uuidv4();\n}\nfunction uuidv4() {\n    return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c)=>{\n        const r = Math.random() * 16 | 0, v = c === \"x\" ? r : r & 3 | 8;\n        return v.toString(16);\n    });\n} //# sourceMappingURL=session.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy9zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sU0FBUyxlQUFlO0lBQzdCLE9BQU8sT0FBTztBQUNoQjtBQUdBLFNBQVMsU0FBUztJQUNoQixPQUFPLHVDQUF1QyxRQUFRLFNBQVMsQ0FBQztRQUM5RCxNQUFNLElBQUssS0FBSyxPQUFPLElBQUksS0FBTSxHQUMvQixJQUFJLE1BQU0sTUFBTSxJQUFLLElBQUksSUFBTztRQUNsQyxPQUFPLEVBQUUsU0FBUyxFQUFFO0lBQ3RCLENBQUM7QUFDSCIsInNvdXJjZXMiOlsiL3NyYy9icm93c2VyL3N5bmMvc2Vzc2lvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gbmV3U2Vzc2lvbklkKCkge1xuICByZXR1cm4gdXVpZHY0KCk7XG59XG5cbi8vIEZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcbmZ1bmN0aW9uIHV1aWR2NCgpIHtcbiAgcmV0dXJuIFwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDAsXG4gICAgICB2ID0gYyA9PT0gXCJ4XCIgPyByIDogKHIgJiAweDMpIHwgMHg4O1xuICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgfSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/session.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canonicalizeUdfPath: () => (/* binding */ canonicalizeUdfPath),\n/* harmony export */   serializePaginatedPathAndArgs: () => (/* binding */ serializePaginatedPathAndArgs),\n/* harmony export */   serializePathAndArgs: () => (/* binding */ serializePathAndArgs),\n/* harmony export */   serializedQueryTokenIsPaginated: () => (/* binding */ serializedQueryTokenIsPaginated)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n\n\nfunction canonicalizeUdfPath(udfPath) {\n    const pieces = udfPath.split(\":\");\n    let moduleName;\n    let functionName;\n    if (pieces.length === 1) {\n        moduleName = pieces[0];\n        functionName = \"default\";\n    } else {\n        moduleName = pieces.slice(0, pieces.length - 1).join(\":\");\n        functionName = pieces[pieces.length - 1];\n    }\n    if (moduleName.endsWith(\".js\")) {\n        moduleName = moduleName.slice(0, -3);\n    }\n    return `${moduleName}:${functionName}`;\n}\nfunction serializePathAndArgs(udfPath, args) {\n    return JSON.stringify({\n        udfPath: canonicalizeUdfPath(udfPath),\n        args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args)\n    });\n}\nfunction serializePaginatedPathAndArgs(udfPath, args, options) {\n    const { initialNumItems, id } = options;\n    const result = JSON.stringify({\n        type: \"paginated\",\n        udfPath: canonicalizeUdfPath(udfPath),\n        args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args),\n        options: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)({\n            initialNumItems,\n            id\n        })\n    });\n    return result;\n}\nfunction serializedQueryTokenIsPaginated(token) {\n    return JSON.parse(token).type === \"paginated\";\n} //# sourceMappingURL=udf_path_utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy91ZGZfcGF0aF91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0M7QUFFN0IsU0FBUyxvQkFBb0IsU0FBeUI7SUFDM0QsTUFBTSxTQUFTLFFBQVEsTUFBTSxHQUFHO0lBQ2hDLElBQUk7SUFDSixJQUFJO0lBQ0osSUFBSSxPQUFPLFdBQVcsR0FBRztRQUN2QixhQUFhLE9BQU8sQ0FBQztRQUNyQixlQUFlO0lBQ2pCLE9BQU87UUFDTCxhQUFhLE9BQU8sTUFBTSxHQUFHLE9BQU8sU0FBUyxDQUFDLEVBQUUsS0FBSyxHQUFHO1FBQ3hELGVBQWUsT0FBTyxPQUFPLFNBQVMsQ0FBQztJQUN6QztJQUNBLElBQUksV0FBVyxTQUFTLEtBQUssR0FBRztRQUM5QixhQUFhLFdBQVcsTUFBTSxHQUFHLEVBQUU7SUFDckM7SUFDQSxPQUFPLEdBQUcsVUFBVSxJQUFJLFlBQVk7QUFDdEM7QUFzQk8sU0FBUyxxQkFDZCxTQUNBLE1BQ1k7SUFDWixPQUFPLEtBQUssVUFBVTtRQUNwQixTQUFTLG9CQUFvQixPQUFPO1FBQ3BDLE1BQU0sOERBQVksQ0FBQyxJQUFJO0lBQ3pCLENBQUM7QUFDSDtBQUVPLFNBQVMsOEJBQ2QsU0FDQSxNQUNBLFNBQ3FCO0lBQ3JCLE1BQU0sRUFBRSxpQkFBaUIsR0FBRyxJQUFJO0lBQ2hDLE1BQU0sU0FBUyxLQUFLLFVBQVU7UUFDNUIsTUFBTTtRQUNOLFNBQVMsb0JBQW9CLE9BQU87UUFDcEMsTUFBTSw4REFBWSxDQUFDLElBQUk7UUFDdkIsU0FBUyw4REFBWSxDQUFDO1lBQUU7WUFBaUI7UUFBRyxDQUFDO0lBQy9DLENBQUM7SUFDRCxPQUFPO0FBQ1Q7QUFFTyxTQUFTLGdDQUNkLE9BQzhCO0lBQzlCLE9BQU8sS0FBSyxNQUFNLEtBQUssRUFBRSxTQUFTO0FBQ3BDIiwic291cmNlcyI6WyIvc3JjL2Jyb3dzZXIvc3luYy91ZGZfcGF0aF91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb252ZXhUb0pzb24sIFZhbHVlIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gY2Fub25pY2FsaXplVWRmUGF0aCh1ZGZQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBwaWVjZXMgPSB1ZGZQYXRoLnNwbGl0KFwiOlwiKTtcbiAgbGV0IG1vZHVsZU5hbWU6IHN0cmluZztcbiAgbGV0IGZ1bmN0aW9uTmFtZTogc3RyaW5nO1xuICBpZiAocGllY2VzLmxlbmd0aCA9PT0gMSkge1xuICAgIG1vZHVsZU5hbWUgPSBwaWVjZXNbMF07XG4gICAgZnVuY3Rpb25OYW1lID0gXCJkZWZhdWx0XCI7XG4gIH0gZWxzZSB7XG4gICAgbW9kdWxlTmFtZSA9IHBpZWNlcy5zbGljZSgwLCBwaWVjZXMubGVuZ3RoIC0gMSkuam9pbihcIjpcIik7XG4gICAgZnVuY3Rpb25OYW1lID0gcGllY2VzW3BpZWNlcy5sZW5ndGggLSAxXTtcbiAgfVxuICBpZiAobW9kdWxlTmFtZS5lbmRzV2l0aChcIi5qc1wiKSkge1xuICAgIG1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lLnNsaWNlKDAsIC0zKTtcbiAgfVxuICByZXR1cm4gYCR7bW9kdWxlTmFtZX06JHtmdW5jdGlvbk5hbWV9YDtcbn1cblxuLyoqXG4gKiBUaGUgc2VyaWFsaXphdGlvbiBoZXJlIGlzIG5vdCBzdGFibGUsIHRoZXNlIHN0cmluZ3MgbmV2ZXIgbWFrZSBpdCBvdXRzaWRlIHRoZSBjbGllbnQuXG4gKi9cblxuLyoqXG4gKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIHF1ZXJ5LlxuICpcbiAqIFRoaXMgaXMgdXNlZCBieSB0aGUge0BsaW5rIEJhc2VDb252ZXhDbGllbnR9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgUXVlcnlUb2tlbiA9IHN0cmluZyAmIHsgX19xdWVyeVRva2VuOiB0cnVlIH07XG5cbi8qKlxuICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBwYWdpbmF0ZWQgcXVlcnkuXG4gKlxuICogVGhpcyBpcyBhIHNwZWNpYWxpemVkIGZvcm0gb2YgUXVlcnlUb2tlbiB1c2VkIGZvciBwYWdpbmF0ZWQgcXVlcmllcy5cbiAqL1xuZXhwb3J0IHR5cGUgUGFnaW5hdGVkUXVlcnlUb2tlbiA9IFF1ZXJ5VG9rZW4gJiB7IF9fcGFnaW5hdGVkUXVlcnlUb2tlbjogdHJ1ZSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplUGF0aEFuZEFyZ3MoXG4gIHVkZlBhdGg6IHN0cmluZyxcbiAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuKTogUXVlcnlUb2tlbiB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgdWRmUGF0aDogY2Fub25pY2FsaXplVWRmUGF0aCh1ZGZQYXRoKSxcbiAgICBhcmdzOiBjb252ZXhUb0pzb24oYXJncyksXG4gIH0pIGFzIFF1ZXJ5VG9rZW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVQYWdpbmF0ZWRQYXRoQW5kQXJncyhcbiAgdWRmUGF0aDogc3RyaW5nLFxuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sIC8vIGFyZ3MgV0lUSE9VVCBwYWdpbmF0aW9uT3B0c1xuICBvcHRpb25zOiB7IGluaXRpYWxOdW1JdGVtczogbnVtYmVyOyBpZDogbnVtYmVyIH0sXG4pOiBQYWdpbmF0ZWRRdWVyeVRva2VuIHtcbiAgY29uc3QgeyBpbml0aWFsTnVtSXRlbXMsIGlkIH0gPSBvcHRpb25zO1xuICBjb25zdCByZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgdHlwZTogXCJwYWdpbmF0ZWRcIixcbiAgICB1ZGZQYXRoOiBjYW5vbmljYWxpemVVZGZQYXRoKHVkZlBhdGgpLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihhcmdzKSxcbiAgICBvcHRpb25zOiBjb252ZXhUb0pzb24oeyBpbml0aWFsTnVtSXRlbXMsIGlkIH0pLFxuICB9KSBhcyBQYWdpbmF0ZWRRdWVyeVRva2VuO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplZFF1ZXJ5VG9rZW5Jc1BhZ2luYXRlZChcbiAgdG9rZW46IFF1ZXJ5VG9rZW4gfCBQYWdpbmF0ZWRRdWVyeVRva2VuLFxuKTogdG9rZW4gaXMgUGFnaW5hdGVkUXVlcnlUb2tlbiB7XG4gIHJldHVybiBKU09OLnBhcnNlKHRva2VuKS50eXBlID09PSBcInBhZ2luYXRlZFwiO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/udf_path_utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js":
/*!*************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WebSocketManager: () => (/* binding */ WebSocketManager)\n/* harmony export */ });\n/* harmony import */ var _protocol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./protocol.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/protocol.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst CLOSE_NORMAL = 1e3;\nconst CLOSE_GOING_AWAY = 1001;\nconst CLOSE_NO_STATUS = 1005;\nconst CLOSE_NOT_FOUND = 4040;\nlet firstTime;\nfunction monotonicMillis() {\n    if (firstTime === void 0) {\n        firstTime = Date.now();\n    }\n    if (typeof performance === \"undefined\" || !performance.now) {\n        return Date.now();\n    }\n    return Math.round(firstTime + performance.now());\n}\nfunction prettyNow() {\n    return `t=${Math.round((monotonicMillis() - firstTime) / 100) / 10}s`;\n}\nconst serverDisconnectErrors = {\n    // A known error, e.g. during a restart or push\n    InternalServerError: {\n        timeout: 1e3\n    },\n    // ErrorMetadata::overloaded() messages that we realy should back off\n    SubscriptionsWorkerFullError: {\n        timeout: 3e3\n    },\n    TooManyConcurrentRequests: {\n        timeout: 3e3\n    },\n    CommitterFullError: {\n        timeout: 3e3\n    },\n    AwsTooManyRequestsException: {\n        timeout: 3e3\n    },\n    ExecuteFullError: {\n        timeout: 3e3\n    },\n    SystemTimeoutError: {\n        timeout: 3e3\n    },\n    ExpiredInQueue: {\n        timeout: 3e3\n    },\n    // ErrorMetadata::feature_temporarily_unavailable() that typically indicate a deploy just happened\n    VectorIndexesUnavailable: {\n        timeout: 1e3\n    },\n    SearchIndexesUnavailable: {\n        timeout: 1e3\n    },\n    TableSummariesUnavailable: {\n        timeout: 1e3\n    },\n    // More ErrorMetadata::overloaded()\n    VectorIndexTooLarge: {\n        timeout: 3e3\n    },\n    SearchIndexTooLarge: {\n        timeout: 3e3\n    },\n    TooManyWritesInTimePeriod: {\n        timeout: 3e3\n    }\n};\nfunction classifyDisconnectError(s) {\n    if (s === void 0) return \"Unknown\";\n    for (const prefix of Object.keys(serverDisconnectErrors)){\n        if (s.startsWith(prefix)) {\n            return prefix;\n        }\n    }\n    return \"Unknown\";\n}\nclass WebSocketManager {\n    constructor(uri, callbacks, webSocketConstructor, logger, markConnectionStateDirty, debug){\n        this.markConnectionStateDirty = markConnectionStateDirty;\n        this.debug = debug;\n        __publicField(this, \"socket\");\n        __publicField(this, \"connectionCount\");\n        __publicField(this, \"_hasEverConnected\", false);\n        __publicField(this, \"lastCloseReason\");\n        // State for assembling the split-up Transition currently being received.\n        __publicField(this, \"transitionChunkBuffer\", null);\n        /** Upon HTTPS/WSS failure, the first jittered backoff duration, in ms. */ __publicField(this, \"defaultInitialBackoff\");\n        /** We backoff exponentially, but we need to cap that--this is the jittered max. */ __publicField(this, \"maxBackoff\");\n        /** How many times have we failed consecutively? */ __publicField(this, \"retries\");\n        /** How long before lack of server response causes us to initiate a reconnect,\n     * in ms */ __publicField(this, \"serverInactivityThreshold\");\n        __publicField(this, \"reconnectDueToServerInactivityTimeout\");\n        __publicField(this, \"uri\");\n        __publicField(this, \"onOpen\");\n        __publicField(this, \"onResume\");\n        __publicField(this, \"onMessage\");\n        __publicField(this, \"webSocketConstructor\");\n        __publicField(this, \"logger\");\n        __publicField(this, \"onServerDisconnectError\");\n        this.webSocketConstructor = webSocketConstructor;\n        this.socket = {\n            state: \"disconnected\"\n        };\n        this.connectionCount = 0;\n        this.lastCloseReason = \"InitialConnect\";\n        this.defaultInitialBackoff = 1e3;\n        this.maxBackoff = 16e3;\n        this.retries = 0;\n        this.serverInactivityThreshold = 6e4;\n        this.reconnectDueToServerInactivityTimeout = null;\n        this.uri = uri;\n        this.onOpen = callbacks.onOpen;\n        this.onResume = callbacks.onResume;\n        this.onMessage = callbacks.onMessage;\n        this.onServerDisconnectError = callbacks.onServerDisconnectError;\n        this.logger = logger;\n        this.connect();\n    }\n    setSocketState(state) {\n        this.socket = state;\n        this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${\"paused\" in this.socket ? this.socket.paused : void 0}`);\n        this.markConnectionStateDirty();\n    }\n    assembleTransition(chunk) {\n        if (chunk.partNumber < 0 || chunk.partNumber >= chunk.totalParts || chunk.totalParts === 0 || this.transitionChunkBuffer && (this.transitionChunkBuffer.totalParts !== chunk.totalParts || this.transitionChunkBuffer.transitionId !== chunk.transitionId)) {\n            this.transitionChunkBuffer = null;\n            throw new Error(\"Invalid TransitionChunk\");\n        }\n        if (this.transitionChunkBuffer === null) {\n            this.transitionChunkBuffer = {\n                chunks: [],\n                totalParts: chunk.totalParts,\n                transitionId: chunk.transitionId\n            };\n        }\n        if (chunk.partNumber !== this.transitionChunkBuffer.chunks.length) {\n            const expectedLength = this.transitionChunkBuffer.chunks.length;\n            this.transitionChunkBuffer = null;\n            throw new Error(`TransitionChunk received out of order: expected part ${expectedLength}, got ${chunk.partNumber}`);\n        }\n        this.transitionChunkBuffer.chunks.push(chunk.chunk);\n        if (this.transitionChunkBuffer.chunks.length === chunk.totalParts) {\n            const fullJson = this.transitionChunkBuffer.chunks.join(\"\");\n            this.transitionChunkBuffer = null;\n            const transition = (0,_protocol_js__WEBPACK_IMPORTED_MODULE_0__.parseServerMessage)(JSON.parse(fullJson));\n            if (transition.type !== \"Transition\") {\n                throw new Error(`Expected Transition, got ${transition.type} after assembling chunks`);\n            }\n            return transition;\n        }\n        return null;\n    }\n    connect() {\n        if (this.socket.state === \"terminated\") {\n            return;\n        }\n        if (this.socket.state !== \"disconnected\" && this.socket.state !== \"stopped\") {\n            throw new Error(\"Didn't start connection from disconnected state: \" + this.socket.state);\n        }\n        const ws = new this.webSocketConstructor(this.uri);\n        this._logVerbose(\"constructed WebSocket\");\n        this.setSocketState({\n            state: \"connecting\",\n            ws,\n            paused: \"no\"\n        });\n        this.resetServerInactivityTimeout();\n        ws.onopen = ()=>{\n            this.logger.logVerbose(\"begin ws.onopen\");\n            if (this.socket.state !== \"connecting\") {\n                throw new Error(\"onopen called with socket not in connecting state\");\n            }\n            this.setSocketState({\n                state: \"ready\",\n                ws,\n                paused: this.socket.paused === \"yes\" ? \"uninitialized\" : \"no\"\n            });\n            this.resetServerInactivityTimeout();\n            if (this.socket.paused === \"no\") {\n                this._hasEverConnected = true;\n                this.onOpen({\n                    connectionCount: this.connectionCount,\n                    lastCloseReason: this.lastCloseReason,\n                    clientTs: monotonicMillis()\n                });\n            }\n            if (this.lastCloseReason !== \"InitialConnect\") {\n                if (this.lastCloseReason) {\n                    this.logger.log(\"WebSocket reconnected at\", prettyNow(), \"after disconnect due to\", this.lastCloseReason);\n                } else {\n                    this.logger.log(\"WebSocket reconnected at\", prettyNow());\n                }\n            }\n            this.connectionCount += 1;\n            this.lastCloseReason = null;\n        };\n        ws.onerror = (error)=>{\n            this.transitionChunkBuffer = null;\n            const message = error.message;\n            if (message) {\n                this.logger.log(`WebSocket error message: ${message}`);\n            }\n        };\n        ws.onmessage = (message)=>{\n            this.resetServerInactivityTimeout();\n            const messageLength = message.data.length;\n            let serverMessage = (0,_protocol_js__WEBPACK_IMPORTED_MODULE_0__.parseServerMessage)(JSON.parse(message.data));\n            this._logVerbose(`received ws message with type ${serverMessage.type}`);\n            if (serverMessage.type === \"Ping\") {\n                return;\n            }\n            if (serverMessage.type === \"TransitionChunk\") {\n                const transition = this.assembleTransition(serverMessage);\n                if (!transition) {\n                    return;\n                }\n                serverMessage = transition;\n                this._logVerbose(`assembled full ws message of type ${serverMessage.type}`);\n            }\n            if (this.transitionChunkBuffer !== null) {\n                this.transitionChunkBuffer = null;\n                this.logger.log(`Received unexpected ${serverMessage.type} while buffering TransitionChunks`);\n            }\n            if (serverMessage.type === \"Transition\") {\n                this.reportLargeTransition({\n                    messageLength,\n                    transition: serverMessage\n                });\n            }\n            const response = this.onMessage(serverMessage);\n            if (response.hasSyncedPastLastReconnect) {\n                this.retries = 0;\n                this.markConnectionStateDirty();\n            }\n        };\n        ws.onclose = (event)=>{\n            this._logVerbose(\"begin ws.onclose\");\n            this.transitionChunkBuffer = null;\n            if (this.lastCloseReason === null) {\n                this.lastCloseReason = event.reason || `closed with code ${event.code}`;\n            }\n            if (event.code !== CLOSE_NORMAL && event.code !== CLOSE_GOING_AWAY && // This commonly gets fired on mobile apps when the app is backgrounded\n            event.code !== CLOSE_NO_STATUS && event.code !== CLOSE_NOT_FOUND) {\n                let msg = `WebSocket closed with code ${event.code}`;\n                if (event.reason) {\n                    msg += `: ${event.reason}`;\n                }\n                this.logger.log(msg);\n                if (this.onServerDisconnectError && event.reason) {\n                    this.onServerDisconnectError(msg);\n                }\n            }\n            const reason = classifyDisconnectError(event.reason);\n            this.scheduleReconnect(reason);\n            return;\n        };\n    }\n    /**\n   * @returns The state of the {@link Socket}.\n   */ socketState() {\n        return this.socket.state;\n    }\n    /**\n   * @param message - A ClientMessage to send.\n   * @returns Whether the message (might have been) sent.\n   */ sendMessage(message) {\n        const messageForLog = {\n            type: message.type,\n            ...message.type === \"Authenticate\" && message.tokenType === \"User\" ? {\n                value: `...${message.value.slice(-7)}`\n            } : {}\n        };\n        if (this.socket.state === \"ready\" && this.socket.paused === \"no\") {\n            const encodedMessage = (0,_protocol_js__WEBPACK_IMPORTED_MODULE_0__.encodeClientMessage)(message);\n            const request = JSON.stringify(encodedMessage);\n            let sent = false;\n            try {\n                this.socket.ws.send(request);\n                sent = true;\n            } catch (error) {\n                this.logger.log(`Failed to send message on WebSocket, reconnecting: ${error}`);\n                this.closeAndReconnect(\"FailedToSendMessage\");\n            }\n            this._logVerbose(`${sent ? \"sent\" : \"failed to send\"} message with type ${message.type}: ${JSON.stringify(messageForLog)}`);\n            return true;\n        }\n        this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${\"paused\" in this.socket ? this.socket.paused : void 0}): ${JSON.stringify(messageForLog)}`);\n        return false;\n    }\n    resetServerInactivityTimeout() {\n        if (this.socket.state === \"terminated\") {\n            return;\n        }\n        if (this.reconnectDueToServerInactivityTimeout !== null) {\n            clearTimeout(this.reconnectDueToServerInactivityTimeout);\n            this.reconnectDueToServerInactivityTimeout = null;\n        }\n        this.reconnectDueToServerInactivityTimeout = setTimeout(()=>{\n            this.closeAndReconnect(\"InactiveServer\");\n        }, this.serverInactivityThreshold);\n    }\n    scheduleReconnect(reason) {\n        this.socket = {\n            state: \"disconnected\"\n        };\n        const backoff = this.nextBackoff(reason);\n        this.markConnectionStateDirty();\n        this.logger.log(`Attempting reconnect in ${Math.round(backoff)}ms`);\n        setTimeout(()=>this.connect(), backoff);\n    }\n    /**\n   * Close the WebSocket and schedule a reconnect.\n   *\n   * This should be used when we hit an error and would like to restart the session.\n   */ closeAndReconnect(closeReason) {\n        this._logVerbose(`begin closeAndReconnect with reason ${closeReason}`);\n        switch(this.socket.state){\n            case \"disconnected\":\n            case \"terminated\":\n            case \"stopped\":\n                return;\n            case \"connecting\":\n            case \"ready\":\n                {\n                    this.lastCloseReason = closeReason;\n                    void this.close();\n                    this.scheduleReconnect(\"client\");\n                    return;\n                }\n            default:\n                {\n                    this.socket;\n                }\n        }\n    }\n    /**\n   * Close the WebSocket, being careful to clear the onclose handler to avoid re-entrant\n   * calls. Use this instead of directly calling `ws.close()`\n   *\n   * It is the callers responsibility to update the state after this method is called so that the\n   * closed socket is not accessible or used again after this method is called\n   */ close() {\n        this.transitionChunkBuffer = null;\n        switch(this.socket.state){\n            case \"disconnected\":\n            case \"terminated\":\n            case \"stopped\":\n                return Promise.resolve();\n            case \"connecting\":\n                {\n                    const ws = this.socket.ws;\n                    ws.onmessage = (_message)=>{\n                        this._logVerbose(\"Ignoring message received after close\");\n                    };\n                    return new Promise((r)=>{\n                        ws.onclose = ()=>{\n                            this._logVerbose(\"Closed after connecting\");\n                            r();\n                        };\n                        ws.onopen = ()=>{\n                            this._logVerbose(\"Opened after connecting\");\n                            ws.close();\n                        };\n                    });\n                }\n            case \"ready\":\n                {\n                    this._logVerbose(\"ws.close called\");\n                    const ws = this.socket.ws;\n                    ws.onmessage = (_message)=>{\n                        this._logVerbose(\"Ignoring message received after close\");\n                    };\n                    const result = new Promise((r)=>{\n                        ws.onclose = ()=>{\n                            r();\n                        };\n                    });\n                    ws.close();\n                    return result;\n                }\n            default:\n                {\n                    this.socket;\n                    return Promise.resolve();\n                }\n        }\n    }\n    /**\n   * Close the WebSocket and do not reconnect.\n   * @returns A Promise that resolves when the WebSocket `onClose` callback is called.\n   */ terminate() {\n        if (this.reconnectDueToServerInactivityTimeout) {\n            clearTimeout(this.reconnectDueToServerInactivityTimeout);\n        }\n        switch(this.socket.state){\n            case \"terminated\":\n            case \"stopped\":\n            case \"disconnected\":\n            case \"connecting\":\n            case \"ready\":\n                {\n                    const result = this.close();\n                    this.setSocketState({\n                        state: \"terminated\"\n                    });\n                    return result;\n                }\n            default:\n                {\n                    this.socket;\n                    throw new Error(`Invalid websocket state: ${this.socket.state}`);\n                }\n        }\n    }\n    stop() {\n        switch(this.socket.state){\n            case \"terminated\":\n                return Promise.resolve();\n            case \"connecting\":\n            case \"stopped\":\n            case \"disconnected\":\n            case \"ready\":\n                {\n                    const result = this.close();\n                    this.socket = {\n                        state: \"stopped\"\n                    };\n                    return result;\n                }\n            default:\n                {\n                    this.socket;\n                    return Promise.resolve();\n                }\n        }\n    }\n    /**\n   * Create a new WebSocket after a previous `stop()`, unless `terminate()` was\n   * called before.\n   */ tryRestart() {\n        switch(this.socket.state){\n            case \"stopped\":\n                break;\n            case \"terminated\":\n            case \"connecting\":\n            case \"ready\":\n            case \"disconnected\":\n                this.logger.logVerbose(\"Restart called without stopping first\");\n                return;\n            default:\n                {\n                    this.socket;\n                }\n        }\n        this.connect();\n    }\n    pause() {\n        switch(this.socket.state){\n            case \"disconnected\":\n            case \"stopped\":\n            case \"terminated\":\n                return;\n            case \"connecting\":\n            case \"ready\":\n                {\n                    this.socket = {\n                        ...this.socket,\n                        paused: \"yes\"\n                    };\n                    return;\n                }\n            default:\n                {\n                    this.socket;\n                    return;\n                }\n        }\n    }\n    /**\n   * Resume the state machine if previously paused.\n   */ resume() {\n        switch(this.socket.state){\n            case \"connecting\":\n                this.socket = {\n                    ...this.socket,\n                    paused: \"no\"\n                };\n                return;\n            case \"ready\":\n                if (this.socket.paused === \"uninitialized\") {\n                    this.socket = {\n                        ...this.socket,\n                        paused: \"no\"\n                    };\n                    this.onOpen({\n                        connectionCount: this.connectionCount,\n                        lastCloseReason: this.lastCloseReason,\n                        clientTs: monotonicMillis()\n                    });\n                } else if (this.socket.paused === \"yes\") {\n                    this.socket = {\n                        ...this.socket,\n                        paused: \"no\"\n                    };\n                    this.onResume();\n                }\n                return;\n            case \"terminated\":\n            case \"stopped\":\n            case \"disconnected\":\n                return;\n            default:\n                {\n                    this.socket;\n                }\n        }\n        this.connect();\n    }\n    connectionState() {\n        return {\n            isConnected: this.socket.state === \"ready\",\n            hasEverConnected: this._hasEverConnected,\n            connectionCount: this.connectionCount,\n            connectionRetries: this.retries\n        };\n    }\n    _logVerbose(message) {\n        this.logger.logVerbose(message);\n    }\n    nextBackoff(reason) {\n        const initialBackoff = reason === \"client\" ? 100 : reason === \"Unknown\" ? this.defaultInitialBackoff : serverDisconnectErrors[reason].timeout;\n        const baseBackoff = initialBackoff * Math.pow(2, this.retries);\n        this.retries += 1;\n        const actualBackoff = Math.min(baseBackoff, this.maxBackoff);\n        const jitter = actualBackoff * (Math.random() - 0.5);\n        return actualBackoff + jitter;\n    }\n    reportLargeTransition({ transition, messageLength }) {\n        if (transition.clientClockSkew === void 0 || transition.serverTs === void 0) {\n            return;\n        }\n        const transitionTransitTime = monotonicMillis() - // client time now\n        // clientClockSkew = (server time + upstream latency) - client time\n        // clientClockSkew is \"how many milliseconds behind (slow) is the client clock\"\n        // but the latency of the Connect message inflates this, making it appear further behind\n        transition.clientClockSkew - transition.serverTs / 1e6;\n        const prettyTransitionTime = `${Math.round(transitionTransitTime)}ms`;\n        const prettyMessageMB = `${Math.round(messageLength / 1e4) / 100}MB`;\n        const bytesPerSecond = messageLength / (transitionTransitTime / 1e3);\n        const prettyBytesPerSecond = `${Math.round(bytesPerSecond / 1e4) / 100}MB per second`;\n        this._logVerbose(`received ${prettyMessageMB} transition in ${prettyTransitionTime} at ${prettyBytesPerSecond}`);\n        if (messageLength > 2e7) {\n            this.logger.log(`received query results totaling more that 20MB (${prettyMessageMB}) which will take a long time to download on slower connections`);\n        } else if (transitionTransitTime > 2e4) {\n            this.logger.log(`received query results totaling ${prettyMessageMB} which took more than 20s to arrive (${prettyTransitionTime})`);\n        }\n        if (this.debug) {\n            this.sendMessage({\n                type: \"Event\",\n                eventType: \"ClientReceivedTransition\",\n                event: {\n                    transitionTransitTime,\n                    messageLength\n                }\n            });\n        }\n    }\n} //# sourceMappingURL=web_socket_manager.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2Jyb3dzZXIvc3luYy93ZWJfc29ja2V0X21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFRTztBQUVQLE1BQU0sZUFBZTtBQUNyQixNQUFNLG1CQUFtQjtBQUN6QixNQUFNLGtCQUFrQjtBQU14QixNQUFNLGtCQUFrQjtBQWdGeEIsSUFBSTtBQUNKLFNBQVMsa0JBQWtCO0lBQ3pCLElBQUksY0FBYyxRQUFXO1FBQzNCLFlBQVksS0FBSyxJQUFJO0lBQ3ZCO0lBQ0EsSUFBSSxPQUFPLGdCQUFnQixlQUFlLENBQUMsWUFBWSxLQUFLO1FBQzFELE9BQU8sS0FBSyxJQUFJO0lBQ2xCO0lBQ0EsT0FBTyxLQUFLLE1BQU0sWUFBWSxZQUFZLElBQUksQ0FBQztBQUNqRDtBQUVBLFNBQVMsWUFBWTtJQUNuQixPQUFPLEtBQUssS0FBSyxzQkFBdUIsS0FBSSxhQUFjLEdBQUcsSUFBSSxFQUFFO0FBQ3JFO0FBRUEsTUFBTSx5QkFBeUI7SUFBQTtJQUU3QixxQkFBcUI7UUFBRSxTQUFTO0lBQUs7SUFBQTtJQUVyQyw4QkFBOEI7UUFBRSxTQUFTO0lBQUs7SUFDOUMsMkJBQTJCO1FBQUUsU0FBUztJQUFLO0lBQzNDLG9CQUFvQjtRQUFFLFNBQVM7SUFBSztJQUNwQyw2QkFBNkI7UUFBRSxTQUFTO0lBQUs7SUFDN0Msa0JBQWtCO1FBQUUsU0FBUztJQUFLO0lBQ2xDLG9CQUFvQjtRQUFFLFNBQVM7SUFBSztJQUNwQyxnQkFBZ0I7UUFBRSxTQUFTO0lBQUs7SUFBQTtJQUVoQywwQkFBMEI7UUFBRSxTQUFTO0lBQUs7SUFDMUMsMEJBQTBCO1FBQUUsU0FBUztJQUFLO0lBQzFDLDJCQUEyQjtRQUFFLFNBQVM7SUFBSztJQUFBO0lBRTNDLHFCQUFxQjtRQUFFLFNBQVM7SUFBSztJQUNyQyxxQkFBcUI7UUFBRSxTQUFTO0lBQUs7SUFDckMsMkJBQTJCO1FBQUUsU0FBUztJQUFLO0FBQzdDO0FBSUEs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UUFFQSxJQUFJLEtBQUssT0FBTztZQUVkLEtBQUssWUFBWTtnQkFDZixNQUFNO2dCQUNOLFdBQVc7Z0JBQ1gsT0FBTztvQkFBRTtvQkFBdUI7Z0JBQWM7WUFDaEQsQ0FBQztRQUNIO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL3NyYy9icm93c2VyL3N5bmMvd2ViX3NvY2tldF9tYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvZ2dlciB9IGZyb20gXCIuLi9sb2dnaW5nLmpzXCI7XG5pbXBvcnQge1xuICBDbGllbnRNZXNzYWdlLFxuICBlbmNvZGVDbGllbnRNZXNzYWdlLFxuICBwYXJzZVNlcnZlck1lc3NhZ2UsXG4gIFNlcnZlck1lc3NhZ2UsXG4gIFRyYW5zaXRpb24sXG4gIFRyYW5zaXRpb25DaHVuayxcbn0gZnJvbSBcIi4vcHJvdG9jb2wuanNcIjtcblxuY29uc3QgQ0xPU0VfTk9STUFMID0gMTAwMDtcbmNvbnN0IENMT1NFX0dPSU5HX0FXQVkgPSAxMDAxO1xuY29uc3QgQ0xPU0VfTk9fU1RBVFVTID0gMTAwNTtcbi8qKiBDb252ZXgtc3BlY2lmaWMgY2xvc2UgY29kZSByZXByZXNlbnRpbmcgYSBcIjQwNCBOb3QgRm91bmRcIi5cbiAqIFRoZSBlZGdlIE9ucmFtcCBhY2NlcHRzIHdlYnNvY2tldCB1cGdyYWRlcyBiZWZvcmUgY29uZmlybWluZyB0aGF0IHRoZVxuICogaW50ZW5kZWQgZGVzdGluYXRpb24gZXhpc3RzLCBzbyB0aGlzIGNvZGUgaXMgc2VudCBvbmNlIHdlJ3ZlIGRpc2NvdmVyZWQgdGhhdFxuICogdGhlIGRlc3RpbmF0aW9uIGRvZXMgbm90IGV4aXN0LlxuICovXG5jb25zdCBDTE9TRV9OT1RfRk9VTkQgPSA0MDQwO1xuXG4vKipcbiAqIFRoZSB2YXJpb3VzIHN0YXRlcyBvdXIgV2ViU29ja2V0IGNhbiBiZSBpbjpcbiAqXG4gKiAtIFwiZGlzY29ubmVjdGVkXCI6IFdlIGRvbid0IGhhdmUgYSBXZWJTb2NrZXQsIGJ1dCBwbGFuIHRvIGNyZWF0ZSBvbmUuXG4gKiAtIFwiY29ubmVjdGluZ1wiOiBXZSBoYXZlIGNyZWF0ZWQgdGhlIFdlYlNvY2tldCBhbmQgYXJlIHdhaXRpbmcgZm9yIHRoZVxuICogICBgb25PcGVuYCBjYWxsYmFjay5cbiAqIC0gXCJyZWFkeVwiOiBXZSBoYXZlIGFuIG9wZW4gV2ViU29ja2V0LlxuICogLSBcInN0b3BwZWRcIjogVGhlIFdlYlNvY2tldCB3YXMgY2xvc2VkIGFuZCBhIG5ldyBvbmUgY2FuIGJlIGNyZWF0ZWQgdmlhIGAucmVzdGFydCgpYC5cbiAqIC0gXCJ0ZXJtaW5hdGVkXCI6IFdlIGhhdmUgY2xvc2VkIHRoZSBXZWJTb2NrZXQgYW5kIHdpbGwgbmV2ZXIgY3JlYXRlIGEgbmV3IG9uZS5cbiAqXG4gKlxuICogV2ViU29ja2V0IFN0YXRlIE1hY2hpbmVcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBpbml0aWFsU3RhdGU6IGRpc2Nvbm5lY3RlZFxuICogdmFsaWRUcmFuc2l0aW9uczpcbiAqICAgZGlzY29ubmVjdGVkOlxuICogICAgIG5ldyBXZWJTb2NrZXQoKSAtPiBjb25uZWN0aW5nXG4gKiAgICAgdGVybWluYXRlKCkgLT4gdGVybWluYXRlZFxuICogICBjb25uZWN0aW5nOlxuICogICAgIG9ub3BlbiAtPiByZWFkeVxuICogICAgIGNsb3NlKCkgLT4gZGlzY29ubmVjdGVkXG4gKiAgICAgdGVybWluYXRlKCkgLT4gdGVybWluYXRlZFxuICogICByZWFkeTpcbiAqICAgICBjbG9zZSgpIC0+IGRpc2Nvbm5lY3RlZFxuICogICAgIHN0b3AoKSAtPiBzdG9wcGVkXG4gKiAgICAgdGVybWluYXRlKCkgLT4gdGVybWluYXRlZFxuICogICBzdG9wcGVkOlxuICogICAgIHJlc3RhcnQoKSAtPiBjb25uZWN0aW5nXG4gKiAgICAgdGVybWluYXRlKCkgLT4gdGVybWluYXRlZFxuICogdGVybWluYWxTdGF0ZXM6XG4gKiAgIHRlcm1pbmF0ZWRcbiAqXG4gKlxuICpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkFxuICogICAgICAgICAgICAgICAg4pSM4pSA4pSA4pSA4pSAdGVybWluYXRlKCnilIDilIDilIDilIDilIDilIDilIDilIDilIIgIGRpc2Nvbm5lY3RlZCAg4pSC4peA4pSA4pSQXG4gKiAgICAgICAgICAgICAgICDilIIgICAgICAgICAgICAgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmCAg4pSCXG4gKiAgICAgICAgICAgICAgICDilrwgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCICAgICAgIOKWsiAgICAgIOKUglxuICogICAgICAg4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQICAgICAgICAgICBuZXcgV2ViU29ja2V0KCkgIOKUgiAgICAgIOKUglxuICogICAg4pSM4pSA4pa24pSCICAgdGVybWluYXRlZCAgIOKUguKXgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAgICAgICAgICAgIOKUgiAgICAgICDilIIgICAgICDilIJcbiAqICAgIOKUgiAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYICAgICAgIOKUgiAgICAgICAgICAgIOKUgiAgICAgICDilIIgICAgICDilIJcbiAqICAgIOKUgiAgICAgICAgICAg4payICAgICAgICAgIHRlcm1pbmF0ZSgpICAgICAgIOKUgiAgICBjbG9zZSgpIGNsb3NlKClcbiAqICAgIOKUgiAgICAgIHRlcm1pbmF0ZSgpICAgICAgICAgIOKUgiAgICAgICAgICAgIOKUgiAgICAgICDilIIgICAgICDilIJcbiAqICAgIOKUgiAgICAgICAgICAg4pSCICAgICAgICAgICAgICAg4pSCICAgICAgICAgICAg4pa8ICAgICAgIOKUgiAgICAgIOKUglxuICogICAg4pSCICDilIzilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSM4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQICDilIJcbiAqICAgIOKUgiAg4pSCICAgIHN0b3BwZWQgICAgIOKUguKUgOKUgHJlc3RhcnQoKeKUgOKUgOKUgOKWtuKUgiAgIGNvbm5lY3RpbmcgICDilIIgIOKUglxuICogICAg4pSCICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggICAgICAgICAgICAgICDilJTilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilJggIOKUglxuICogICAg4pSCICAgICAgICAgICDilrIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUgiAgICAgICAgICDilIJcbiAqICAgIOKUgiAgICAgICAgICAg4pSCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ub3BlbiAgICAgIOKUglxuICogICAg4pSCICAgICAgICAgICDilIIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUgiAgICAgICAgICDilIJcbiAqICAgIOKUgiAgICAgICAgICAg4pSCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilrwgICAgICAgICAg4pSCXG4gKiB0ZXJtaW5hdGUoKSAgICDilIIgICAgICAgICAgICAgICAgICAgICAgIOKUjOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUkCAg4pSCXG4gKiAgICDilIIgICAgICAgICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgHN0b3AoKeKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgiAgICAgcmVhZHkgICAgICDilILilIDilIDilJhcbiAqICAgIOKUgiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXG4gKiAgICDilIIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIOKUglxuICogICAg4pSCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDilIJcbiAqICAgIOKUlOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUmFxuICpcbiAqIFRoZSBgY29ubmVjdGluZ2AgYW5kIGByZWFkeWAgc3RhdGUgaGF2ZSBhIHN1Yi1zdGF0ZS1tYWNoaW5lIGZvciBwYXVzaW5nLlxuICovXG5cbnR5cGUgU29ja2V0ID1cbiAgfCB7IHN0YXRlOiBcImRpc2Nvbm5lY3RlZFwiIH1cbiAgfCB7IHN0YXRlOiBcImNvbm5lY3RpbmdcIjsgd3M6IFdlYlNvY2tldDsgcGF1c2VkOiBcInllc1wiIHwgXCJub1wiIH1cbiAgfCB7IHN0YXRlOiBcInJlYWR5XCI7IHdzOiBXZWJTb2NrZXQ7IHBhdXNlZDogXCJ5ZXNcIiB8IFwibm9cIiB8IFwidW5pbml0aWFsaXplZFwiIH1cbiAgfCB7IHN0YXRlOiBcInN0b3BwZWRcIiB9XG4gIHwgeyBzdGF0ZTogXCJ0ZXJtaW5hdGVkXCIgfTtcblxuZXhwb3J0IHR5cGUgUmVjb25uZWN0TWV0YWRhdGEgPSB7XG4gIGNvbm5lY3Rpb25Db3VudDogbnVtYmVyO1xuICBsYXN0Q2xvc2VSZWFzb246IHN0cmluZyB8IG51bGw7XG4gIGNsaWVudFRzOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBPbk1lc3NhZ2VSZXNwb25zZSA9IHtcbiAgaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3Q6IGJvb2xlYW47XG59O1xuXG5sZXQgZmlyc3RUaW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5mdW5jdGlvbiBtb25vdG9uaWNNaWxsaXMoKSB7XG4gIGlmIChmaXJzdFRpbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGZpcnN0VGltZSA9IERhdGUubm93KCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBwZXJmb3JtYW5jZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhcGVyZm9ybWFuY2Uubm93KSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH1cbiAgcmV0dXJuIE1hdGgucm91bmQoZmlyc3RUaW1lICsgcGVyZm9ybWFuY2Uubm93KCkpO1xufVxuXG5mdW5jdGlvbiBwcmV0dHlOb3coKSB7XG4gIHJldHVybiBgdD0ke01hdGgucm91bmQoKG1vbm90b25pY01pbGxpcygpIC0gZmlyc3RUaW1lISkgLyAxMDApIC8gMTB9c2A7XG59XG5cbmNvbnN0IHNlcnZlckRpc2Nvbm5lY3RFcnJvcnMgPSB7XG4gIC8vIEEga25vd24gZXJyb3IsIGUuZy4gZHVyaW5nIGEgcmVzdGFydCBvciBwdXNoXG4gIEludGVybmFsU2VydmVyRXJyb3I6IHsgdGltZW91dDogMTAwMCB9LFxuICAvLyBFcnJvck1ldGFkYXRhOjpvdmVybG9hZGVkKCkgbWVzc2FnZXMgdGhhdCB3ZSByZWFseSBzaG91bGQgYmFjayBvZmZcbiAgU3Vic2NyaXB0aW9uc1dvcmtlckZ1bGxFcnJvcjogeyB0aW1lb3V0OiAzMDAwIH0sXG4gIFRvb01hbnlDb25jdXJyZW50UmVxdWVzdHM6IHsgdGltZW91dDogMzAwMCB9LFxuICBDb21taXR0ZXJGdWxsRXJyb3I6IHsgdGltZW91dDogMzAwMCB9LFxuICBBd3NUb29NYW55UmVxdWVzdHNFeGNlcHRpb246IHsgdGltZW91dDogMzAwMCB9LFxuICBFeGVjdXRlRnVsbEVycm9yOiB7IHRpbWVvdXQ6IDMwMDAgfSxcbiAgU3lzdGVtVGltZW91dEVycm9yOiB7IHRpbWVvdXQ6IDMwMDAgfSxcbiAgRXhwaXJlZEluUXVldWU6IHsgdGltZW91dDogMzAwMCB9LFxuICAvLyBFcnJvck1ldGFkYXRhOjpmZWF0dXJlX3RlbXBvcmFyaWx5X3VuYXZhaWxhYmxlKCkgdGhhdCB0eXBpY2FsbHkgaW5kaWNhdGUgYSBkZXBsb3kganVzdCBoYXBwZW5lZFxuICBWZWN0b3JJbmRleGVzVW5hdmFpbGFibGU6IHsgdGltZW91dDogMTAwMCB9LFxuICBTZWFyY2hJbmRleGVzVW5hdmFpbGFibGU6IHsgdGltZW91dDogMTAwMCB9LFxuICBUYWJsZVN1bW1hcmllc1VuYXZhaWxhYmxlOiB7IHRpbWVvdXQ6IDEwMDAgfSxcbiAgLy8gTW9yZSBFcnJvck1ldGFkYXRhOjpvdmVybG9hZGVkKClcbiAgVmVjdG9ySW5kZXhUb29MYXJnZTogeyB0aW1lb3V0OiAzMDAwIH0sXG4gIFNlYXJjaEluZGV4VG9vTGFyZ2U6IHsgdGltZW91dDogMzAwMCB9LFxuICBUb29NYW55V3JpdGVzSW5UaW1lUGVyaW9kOiB7IHRpbWVvdXQ6IDMwMDAgfSxcbn0gYXMgY29uc3Qgc2F0aXNmaWVzIFJlY29yZDxzdHJpbmcsIHsgdGltZW91dDogbnVtYmVyIH0+O1xuXG50eXBlIFNlcnZlckRpc2Nvbm5lY3RFcnJvciA9IGtleW9mIHR5cGVvZiBzZXJ2ZXJEaXNjb25uZWN0RXJyb3JzIHwgXCJVbmtub3duXCI7XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5RGlzY29ubmVjdEVycm9yKHM/OiBzdHJpbmcpOiBTZXJ2ZXJEaXNjb25uZWN0RXJyb3Ige1xuICBpZiAocyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gXCJVbmtub3duXCI7XG4gIC8vIHN0YXJ0c1dpdGggc28gbW9yZSBpbmZvIGNvdWxkIGJlIGF0IHRoZSBlbmQgKGFsdGhvdWdoIGN1cnJlbnRseSB0aGVyZSBpc24ndClcblxuICBmb3IgKGNvbnN0IHByZWZpeCBvZiBPYmplY3Qua2V5cyhcbiAgICBzZXJ2ZXJEaXNjb25uZWN0RXJyb3JzLFxuICApIGFzIFNlcnZlckRpc2Nvbm5lY3RFcnJvcltdKSB7XG4gICAgaWYgKHMuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICByZXR1cm4gcHJlZml4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gXCJVbmtub3duXCI7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhIHdlYnNvY2tldCB0aGF0IGhhbmRsZXMgZXJyb3JzLCByZWNvbm5lY3Rpb24sIGFuZCBtZXNzYWdlXG4gKiBwYXJzaW5nLlxuICovXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0TWFuYWdlciB7XG4gIHByaXZhdGUgc29ja2V0OiBTb2NrZXQ7XG5cbiAgcHJpdmF0ZSBjb25uZWN0aW9uQ291bnQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBfaGFzRXZlckNvbm5lY3RlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIGxhc3RDbG9zZVJlYXNvbjpcbiAgICB8IFwiSW5pdGlhbENvbm5lY3RcIlxuICAgIHwgXCJPbkNsb3NlSW52b2tlZFwiXG4gICAgfCAoc3RyaW5nICYge30pIC8vIGEgZnVsbCBzZXJ2ZXJFcnJvclJlYXNvbiAobm90IGp1c3QgdGhlIHByZWZpeCkgb3IgYSBuZXcgb25lXG4gICAgfCBudWxsO1xuXG4gIC8vIFN0YXRlIGZvciBhc3NlbWJsaW5nIHRoZSBzcGxpdC11cCBUcmFuc2l0aW9uIGN1cnJlbnRseSBiZWluZyByZWNlaXZlZC5cbiAgcHJpdmF0ZSB0cmFuc2l0aW9uQ2h1bmtCdWZmZXI6IHtcbiAgICBjaHVua3M6IHN0cmluZ1tdO1xuICAgIHRvdGFsUGFydHM6IG51bWJlcjtcbiAgICB0cmFuc2l0aW9uSWQ6IHN0cmluZztcbiAgfSB8IG51bGwgPSBudWxsO1xuXG4gIC8qKiBVcG9uIEhUVFBTL1dTUyBmYWlsdXJlLCB0aGUgZmlyc3Qgaml0dGVyZWQgYmFja29mZiBkdXJhdGlvbiwgaW4gbXMuICovXG4gIHByaXZhdGUgcmVhZG9ubHkgZGVmYXVsdEluaXRpYWxCYWNrb2ZmOiBudW1iZXI7XG5cbiAgLyoqIFdlIGJhY2tvZmYgZXhwb25lbnRpYWxseSwgYnV0IHdlIG5lZWQgdG8gY2FwIHRoYXQtLXRoaXMgaXMgdGhlIGppdHRlcmVkIG1heC4gKi9cbiAgcHJpdmF0ZSByZWFkb25seSBtYXhCYWNrb2ZmOiBudW1iZXI7XG5cbiAgLyoqIEhvdyBtYW55IHRpbWVzIGhhdmUgd2UgZmFpbGVkIGNvbnNlY3V0aXZlbHk/ICovXG4gIHByaXZhdGUgcmV0cmllczogbnVtYmVyO1xuXG4gIC8qKiBIb3cgbG9uZyBiZWZvcmUgbGFjayBvZiBzZXJ2ZXIgcmVzcG9uc2UgY2F1c2VzIHVzIHRvIGluaXRpYXRlIGEgcmVjb25uZWN0LFxuICAgKiBpbiBtcyAqL1xuICBwcml2YXRlIHJlYWRvbmx5IHNlcnZlckluYWN0aXZpdHlUaHJlc2hvbGQ6IG51bWJlcjtcblxuICBwcml2YXRlIHJlY29ubmVjdER1ZVRvU2VydmVySW5hY3Rpdml0eVRpbWVvdXQ6IFJldHVyblR5cGU8XG4gICAgdHlwZW9mIHNldFRpbWVvdXRcbiAgPiB8IG51bGw7XG5cbiAgcHJpdmF0ZSByZWFkb25seSB1cmk6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBvbk9wZW46IChyZWNvbm5lY3RNZXRhZGF0YTogUmVjb25uZWN0TWV0YWRhdGEpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgb25SZXN1bWU6ICgpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgb25NZXNzYWdlOiAobWVzc2FnZTogU2VydmVyTWVzc2FnZSkgPT4gT25NZXNzYWdlUmVzcG9uc2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgd2ViU29ja2V0Q29uc3RydWN0b3I6IHR5cGVvZiBXZWJTb2NrZXQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyOiBMb2dnZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgb25TZXJ2ZXJEaXNjb25uZWN0RXJyb3I6XG4gICAgfCAoKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZClcbiAgICB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICB1cmk6IHN0cmluZyxcbiAgICBjYWxsYmFja3M6IHtcbiAgICAgIG9uT3BlbjogKHJlY29ubmVjdE1ldGFkYXRhOiBSZWNvbm5lY3RNZXRhZGF0YSkgPT4gdm9pZDtcbiAgICAgIG9uUmVzdW1lOiAoKSA9PiB2b2lkO1xuICAgICAgb25NZXNzYWdlOiAobWVzc2FnZTogU2VydmVyTWVzc2FnZSkgPT4gT25NZXNzYWdlUmVzcG9uc2U7XG4gICAgICBvblNlcnZlckRpc2Nvbm5lY3RFcnJvcj86ICgobWVzc2FnZTogc3RyaW5nKSA9PiB2b2lkKSB8IHVuZGVmaW5lZDtcbiAgICB9LFxuICAgIHdlYlNvY2tldENvbnN0cnVjdG9yOiB0eXBlb2YgV2ViU29ja2V0LFxuICAgIGxvZ2dlcjogTG9nZ2VyLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgbWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5OiAoKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGVidWc6IGJvb2xlYW4sXG4gICkge1xuICAgIHRoaXMud2ViU29ja2V0Q29uc3RydWN0b3IgPSB3ZWJTb2NrZXRDb25zdHJ1Y3RvcjtcbiAgICB0aGlzLnNvY2tldCA9IHsgc3RhdGU6IFwiZGlzY29ubmVjdGVkXCIgfTtcbiAgICB0aGlzLmNvbm5lY3Rpb25Db3VudCA9IDA7XG4gICAgdGhpcy5sYXN0Q2xvc2VSZWFzb24gPSBcIkluaXRpYWxDb25uZWN0XCI7XG5cbiAgICAvLyBiYWNrb2ZmIGZvciB1bmtub3duIGVycm9yc1xuICAgIHRoaXMuZGVmYXVsdEluaXRpYWxCYWNrb2ZmID0gMTAwMDtcbiAgICB0aGlzLm1heEJhY2tvZmYgPSAxNjAwMDtcbiAgICB0aGlzLnJldHJpZXMgPSAwO1xuXG4gICAgLy8gUGluZyBtZXNzYWdlcyAoc3luYyBwcm90b2NvbCBQaW5ncywgbm90IFdlYlNvY2tldCBwcm90b2NvbCBQaW5ncykgYXJlXG4gICAgLy8gc2VudCBldmVyeSAxNXMgaW4gdGhlIGFic2VuY2Ugb2Ygb3RoZXIgbWVzc2FnZXMuIEJ1dCBhIHNpbmdsZSBsYXJnZVxuICAgIC8vIFRyYW5zaXRpb24gb3Igb3RoZXIgZG93bnN0cmVhbSBtZXNzYWdlIGNhbiBob2cgdGhlIGxpbmUgc28gdGhpc1xuICAgIC8vIHRocmVzaG9sZCBpcyBzZXQgaGlnaGVyIHRvIHByZXZlbnQgY2xpZW50cyBmcm9tIGdpdmluZyB1cC5cbiAgICB0aGlzLnNlcnZlckluYWN0aXZpdHlUaHJlc2hvbGQgPSA2MDAwMDtcbiAgICB0aGlzLnJlY29ubmVjdER1ZVRvU2VydmVySW5hY3Rpdml0eVRpbWVvdXQgPSBudWxsO1xuXG4gICAgdGhpcy51cmkgPSB1cmk7XG4gICAgdGhpcy5vbk9wZW4gPSBjYWxsYmFja3Mub25PcGVuO1xuICAgIHRoaXMub25SZXN1bWUgPSBjYWxsYmFja3Mub25SZXN1bWU7XG4gICAgdGhpcy5vbk1lc3NhZ2UgPSBjYWxsYmFja3Mub25NZXNzYWdlO1xuICAgIHRoaXMub25TZXJ2ZXJEaXNjb25uZWN0RXJyb3IgPSBjYWxsYmFja3Mub25TZXJ2ZXJEaXNjb25uZWN0RXJyb3I7XG4gICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7XG5cbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0U29ja2V0U3RhdGUoc3RhdGU6IFNvY2tldCkge1xuICAgIHRoaXMuc29ja2V0ID0gc3RhdGU7XG4gICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgIGBzb2NrZXQgc3RhdGUgY2hhbmdlZDogJHt0aGlzLnNvY2tldC5zdGF0ZX0sIHBhdXNlZDogJHtcbiAgICAgICAgXCJwYXVzZWRcIiBpbiB0aGlzLnNvY2tldCA/IHRoaXMuc29ja2V0LnBhdXNlZCA6IHVuZGVmaW5lZFxuICAgICAgfWAsXG4gICAgKTtcbiAgICB0aGlzLm1hcmtDb25uZWN0aW9uU3RhdGVEaXJ0eSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3NlbWJsZVRyYW5zaXRpb24oY2h1bms6IFRyYW5zaXRpb25DaHVuayk6IFRyYW5zaXRpb24gfCBudWxsIHtcbiAgICBpZiAoXG4gICAgICBjaHVuay5wYXJ0TnVtYmVyIDwgMCB8fFxuICAgICAgY2h1bmsucGFydE51bWJlciA+PSBjaHVuay50b3RhbFBhcnRzIHx8XG4gICAgICBjaHVuay50b3RhbFBhcnRzID09PSAwIHx8XG4gICAgICAodGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgJiZcbiAgICAgICAgKHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyLnRvdGFsUGFydHMgIT09IGNodW5rLnRvdGFsUGFydHMgfHxcbiAgICAgICAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlci50cmFuc2l0aW9uSWQgIT09IGNodW5rLnRyYW5zaXRpb25JZCkpXG4gICAgKSB7XG4gICAgICAvLyBUaHJvd2luZyBhbiBlcnJvciBkb2Vzbid0IGNyYXNoIHRoZSBjbGllbnQsIHNvIGNsZWFyIHRoZSBidWZmZXIuXG4gICAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9IG51bGw7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFRyYW5zaXRpb25DaHVua1wiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgPT09IG51bGwpIHtcbiAgICAgIHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyID0ge1xuICAgICAgICBjaHVua3M6IFtdLFxuICAgICAgICB0b3RhbFBhcnRzOiBjaHVuay50b3RhbFBhcnRzLFxuICAgICAgICB0cmFuc2l0aW9uSWQ6IGNodW5rLnRyYW5zaXRpb25JZCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKGNodW5rLnBhcnROdW1iZXIgIT09IHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyLmNodW5rcy5sZW5ndGgpIHtcbiAgICAgIC8vIFRocm93aW5nIGFuIGVycm9yIGRvZXNuJ3QgY3Jhc2ggdGhlIGNsaWVudCwgc28gY2xlYXIgdGhlIGJ1ZmZlci5cbiAgICAgIGNvbnN0IGV4cGVjdGVkTGVuZ3RoID0gdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIuY2h1bmtzLmxlbmd0aDtcbiAgICAgIHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyID0gbnVsbDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFRyYW5zaXRpb25DaHVuayByZWNlaXZlZCBvdXQgb2Ygb3JkZXI6IGV4cGVjdGVkIHBhcnQgJHtleHBlY3RlZExlbmd0aH0sIGdvdCAke2NodW5rLnBhcnROdW1iZXJ9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIuY2h1bmtzLnB1c2goY2h1bmsuY2h1bmspO1xuXG4gICAgaWYgKHRoaXMudHJhbnNpdGlvbkNodW5rQnVmZmVyLmNodW5rcy5sZW5ndGggPT09IGNodW5rLnRvdGFsUGFydHMpIHtcbiAgICAgIGNvbnN0IGZ1bGxKc29uID0gdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIuY2h1bmtzLmpvaW4oXCJcIik7XG4gICAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9IG51bGw7XG5cbiAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSBwYXJzZVNlcnZlck1lc3NhZ2UoSlNPTi5wYXJzZShmdWxsSnNvbikpO1xuICAgICAgaWYgKHRyYW5zaXRpb24udHlwZSAhPT0gXCJUcmFuc2l0aW9uXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBFeHBlY3RlZCBUcmFuc2l0aW9uLCBnb3QgJHt0cmFuc2l0aW9uLnR5cGV9IGFmdGVyIGFzc2VtYmxpbmcgY2h1bmtzYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cmFuc2l0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBjb25uZWN0KCkge1xuICAgIGlmICh0aGlzLnNvY2tldC5zdGF0ZSA9PT0gXCJ0ZXJtaW5hdGVkXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5zb2NrZXQuc3RhdGUgIT09IFwiZGlzY29ubmVjdGVkXCIgJiZcbiAgICAgIHRoaXMuc29ja2V0LnN0YXRlICE9PSBcInN0b3BwZWRcIlxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkRpZG4ndCBzdGFydCBjb25uZWN0aW9uIGZyb20gZGlzY29ubmVjdGVkIHN0YXRlOiBcIiArIHRoaXMuc29ja2V0LnN0YXRlLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB3cyA9IG5ldyB0aGlzLndlYlNvY2tldENvbnN0cnVjdG9yKHRoaXMudXJpKTtcbiAgICB0aGlzLl9sb2dWZXJib3NlKFwiY29uc3RydWN0ZWQgV2ViU29ja2V0XCIpO1xuICAgIHRoaXMuc2V0U29ja2V0U3RhdGUoe1xuICAgICAgc3RhdGU6IFwiY29ubmVjdGluZ1wiLFxuICAgICAgd3MsXG4gICAgICBwYXVzZWQ6IFwibm9cIixcbiAgICB9KTtcblxuICAgIC8vIEtpY2sgb2ZmIHNlcnZlciBpbmFjdGl2aXR5IHRpbWVyIGJlZm9yZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZFxuICAgIC8vIHNvIHdlIGNhbiBkZXRlY3QgY2FzZXMgd2hlcmUgaGFuZHNoYWtlIGZhaWxzLlxuICAgIC8vIFRoZSBgb25vcGVuYCBldmVudCBvbmx5IGZpcmVzIGFmdGVyIHRoZSBjb25uZWN0aW9uIGlzIGVzdGFibGlzaGVkOlxuICAgIC8vIFNvdXJjZTogaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM2NDU1I3BhZ2UtMTk6fjp0ZXh0PV9UaGUlMjBXZWJTb2NrZXQlMjBDb25uZWN0aW9uJTIwaXMlMjBFc3RhYmxpc2hlZF8sLWFuZFxuICAgIHRoaXMucmVzZXRTZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCgpO1xuXG4gICAgd3Mub25vcGVuID0gKCkgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIubG9nVmVyYm9zZShcImJlZ2luIHdzLm9ub3BlblwiKTtcbiAgICAgIGlmICh0aGlzLnNvY2tldC5zdGF0ZSAhPT0gXCJjb25uZWN0aW5nXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib25vcGVuIGNhbGxlZCB3aXRoIHNvY2tldCBub3QgaW4gY29ubmVjdGluZyBzdGF0ZVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0U29ja2V0U3RhdGUoe1xuICAgICAgICBzdGF0ZTogXCJyZWFkeVwiLFxuICAgICAgICB3cyxcbiAgICAgICAgcGF1c2VkOiB0aGlzLnNvY2tldC5wYXVzZWQgPT09IFwieWVzXCIgPyBcInVuaW5pdGlhbGl6ZWRcIiA6IFwibm9cIixcbiAgICAgIH0pO1xuICAgICAgdGhpcy5yZXNldFNlcnZlckluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgICBpZiAodGhpcy5zb2NrZXQucGF1c2VkID09PSBcIm5vXCIpIHtcbiAgICAgICAgdGhpcy5faGFzRXZlckNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub25PcGVuKHtcbiAgICAgICAgICBjb25uZWN0aW9uQ291bnQ6IHRoaXMuY29ubmVjdGlvbkNvdW50LFxuICAgICAgICAgIGxhc3RDbG9zZVJlYXNvbjogdGhpcy5sYXN0Q2xvc2VSZWFzb24sXG4gICAgICAgICAgY2xpZW50VHM6IG1vbm90b25pY01pbGxpcygpLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubGFzdENsb3NlUmVhc29uICE9PSBcIkluaXRpYWxDb25uZWN0XCIpIHtcbiAgICAgICAgaWYgKHRoaXMubGFzdENsb3NlUmVhc29uKSB7XG4gICAgICAgICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgICAgICAgXCJXZWJTb2NrZXQgcmVjb25uZWN0ZWQgYXRcIixcbiAgICAgICAgICAgIHByZXR0eU5vdygpLFxuICAgICAgICAgICAgXCJhZnRlciBkaXNjb25uZWN0IGR1ZSB0b1wiLFxuICAgICAgICAgICAgdGhpcy5sYXN0Q2xvc2VSZWFzb24sXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5sb2coXCJXZWJTb2NrZXQgcmVjb25uZWN0ZWQgYXRcIiwgcHJldHR5Tm93KCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29ubmVjdGlvbkNvdW50ICs9IDE7XG4gICAgICB0aGlzLmxhc3RDbG9zZVJlYXNvbiA9IG51bGw7XG4gICAgfTtcbiAgICAvLyBOQjogVGhlIFdlYlNvY2tldCBBUEkgY2FsbHMgYG9uY2xvc2VgIGV2ZW4gaWYgY29ubmVjdGlvbiBmYWlscywgc28gd2UgY2FuIHJvdXRlIGFsbCBlcnJvciBwYXRocyB0aHJvdWdoIGBvbmNsb3NlYC5cbiAgICB3cy5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9IG51bGw7XG4gICAgICBjb25zdCBtZXNzYWdlID0gKGVycm9yIGFzIEVycm9yRXZlbnQpLm1lc3NhZ2U7XG4gICAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5sb2coYFdlYlNvY2tldCBlcnJvciBtZXNzYWdlOiAke21lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB3cy5vbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICAgICAgdGhpcy5yZXNldFNlcnZlckluYWN0aXZpdHlUaW1lb3V0KCk7XG4gICAgICBjb25zdCBtZXNzYWdlTGVuZ3RoID0gbWVzc2FnZS5kYXRhLmxlbmd0aDtcbiAgICAgIGxldCBzZXJ2ZXJNZXNzYWdlID0gcGFyc2VTZXJ2ZXJNZXNzYWdlKEpTT04ucGFyc2UobWVzc2FnZS5kYXRhKSk7XG4gICAgICB0aGlzLl9sb2dWZXJib3NlKGByZWNlaXZlZCB3cyBtZXNzYWdlIHdpdGggdHlwZSAke3NlcnZlck1lc3NhZ2UudHlwZX1gKTtcblxuICAgICAgLy8gUGluZydzIG9ubHkgcHVycG9zZSBpcyB0byByZXNldCB0aGUgc2VydmVyIGluYWN0aXZpdHkgdGltZXIuXG4gICAgICBpZiAoc2VydmVyTWVzc2FnZS50eXBlID09PSBcIlBpbmdcIikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRyYW5zaXRpb25DaHVua3MgbmV2ZXIgcmVhY2ggdGhlIG1haW4gY2xpZW50IGxvZ2ljLlxuICAgICAgaWYgKHNlcnZlck1lc3NhZ2UudHlwZSA9PT0gXCJUcmFuc2l0aW9uQ2h1bmtcIikge1xuICAgICAgICBjb25zdCB0cmFuc2l0aW9uID0gdGhpcy5hc3NlbWJsZVRyYW5zaXRpb24oc2VydmVyTWVzc2FnZSk7XG4gICAgICAgIGlmICghdHJhbnNpdGlvbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZXJ2ZXJNZXNzYWdlID0gdHJhbnNpdGlvbjtcbiAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgICAgICBgYXNzZW1ibGVkIGZ1bGwgd3MgbWVzc2FnZSBvZiB0eXBlICR7c2VydmVyTWVzc2FnZS50eXBlfWAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25DaHVua0J1ZmZlciA9IG51bGw7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgICAgICBgUmVjZWl2ZWQgdW5leHBlY3RlZCAke3NlcnZlck1lc3NhZ2UudHlwZX0gd2hpbGUgYnVmZmVyaW5nIFRyYW5zaXRpb25DaHVua3NgLFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2VydmVyTWVzc2FnZS50eXBlID09PSBcIlRyYW5zaXRpb25cIikge1xuICAgICAgICB0aGlzLnJlcG9ydExhcmdlVHJhbnNpdGlvbih7XG4gICAgICAgICAgbWVzc2FnZUxlbmd0aCxcbiAgICAgICAgICB0cmFuc2l0aW9uOiBzZXJ2ZXJNZXNzYWdlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5vbk1lc3NhZ2Uoc2VydmVyTWVzc2FnZSk7XG4gICAgICBpZiAocmVzcG9uc2UuaGFzU3luY2VkUGFzdExhc3RSZWNvbm5lY3QpIHtcbiAgICAgICAgLy8gUmVzZXQgYmFja29mZiB0byAwIG9uY2UgYWxsIG91dHN0YW5kaW5nIHJlcXVlc3RzIGFyZSBjb21wbGV0ZS5cbiAgICAgICAgdGhpcy5yZXRyaWVzID0gMDtcbiAgICAgICAgdGhpcy5tYXJrQ29ubmVjdGlvblN0YXRlRGlydHkoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdzLm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1ZlcmJvc2UoXCJiZWdpbiB3cy5vbmNsb3NlXCIpO1xuICAgICAgdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgPSBudWxsO1xuICAgICAgaWYgKHRoaXMubGFzdENsb3NlUmVhc29uID09PSBudWxsKSB7XG4gICAgICAgIC8vIGV2ZW50LnJlYXNvbiBpcyBvZnRlbiBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICAgdGhpcy5sYXN0Q2xvc2VSZWFzb24gPSBldmVudC5yZWFzb24gfHwgYGNsb3NlZCB3aXRoIGNvZGUgJHtldmVudC5jb2RlfWA7XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGV2ZW50LmNvZGUgIT09IENMT1NFX05PUk1BTCAmJlxuICAgICAgICBldmVudC5jb2RlICE9PSBDTE9TRV9HT0lOR19BV0FZICYmIC8vIFRoaXMgY29tbW9ubHkgZ2V0cyBmaXJlZCBvbiBtb2JpbGUgYXBwcyB3aGVuIHRoZSBhcHAgaXMgYmFja2dyb3VuZGVkXG4gICAgICAgIGV2ZW50LmNvZGUgIT09IENMT1NFX05PX1NUQVRVUyAmJlxuICAgICAgICBldmVudC5jb2RlICE9PSBDTE9TRV9OT1RfRk9VTkQgLy8gTm90ZSB0aGF0IHdlIHdhbnQgdG8gcmV0cnkgb24gYSA0MDQsIGFzIGl0IGNhbiBiZSB0cmFuc2llbnQgZHVyaW5nIGEgcHVzaC5cbiAgICAgICkge1xuICAgICAgICBsZXQgbXNnID0gYFdlYlNvY2tldCBjbG9zZWQgd2l0aCBjb2RlICR7ZXZlbnQuY29kZX1gO1xuICAgICAgICBpZiAoZXZlbnQucmVhc29uKSB7XG4gICAgICAgICAgbXNnICs9IGA6ICR7ZXZlbnQucmVhc29ufWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKG1zZyk7XG4gICAgICAgIGlmICh0aGlzLm9uU2VydmVyRGlzY29ubmVjdEVycm9yICYmIGV2ZW50LnJlYXNvbikge1xuICAgICAgICAgIC8vIFRoaXMgY2FsbGJhY2sgaXMgYSB1bnN0YWJsZSBBUEksIEludGVybmFsU2VydmVyRXJyb3JzIGluIHBhcnRpY3VsYXIgbWF5IGJlIHJlbW92ZWRcbiAgICAgICAgICAvLyBzaW5jZSB0aGV5IHJlZmxlY3QgZXhwZWN0ZWQgdGVtcG9yYXJ5IGRvd250aW1lLiBCdXQgdW50aWwgYSBxdWFudGl0YXRpdmUgbWVhc3VyZVxuICAgICAgICAgIC8vIG9mIHVwdGltZSBpcyByZXBvcnRlZCB0aGlzIHVuc3RhYmxlIEFQSSBlcnJzIG9uIHRoZSBpbmNsdXNpdmUgc2lkZS5cbiAgICAgICAgICB0aGlzLm9uU2VydmVyRGlzY29ubmVjdEVycm9yKG1zZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlYXNvbiA9IGNsYXNzaWZ5RGlzY29ubmVjdEVycm9yKGV2ZW50LnJlYXNvbik7XG4gICAgICB0aGlzLnNjaGVkdWxlUmVjb25uZWN0KHJlYXNvbik7XG4gICAgICByZXR1cm47XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBUaGUgc3RhdGUgb2YgdGhlIHtAbGluayBTb2NrZXR9LlxuICAgKi9cbiAgc29ja2V0U3RhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zb2NrZXQuc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIG1lc3NhZ2UgLSBBIENsaWVudE1lc3NhZ2UgdG8gc2VuZC5cbiAgICogQHJldHVybnMgV2hldGhlciB0aGUgbWVzc2FnZSAobWlnaHQgaGF2ZSBiZWVuKSBzZW50LlxuICAgKi9cbiAgc2VuZE1lc3NhZ2UobWVzc2FnZTogQ2xpZW50TWVzc2FnZSkge1xuICAgIGNvbnN0IG1lc3NhZ2VGb3JMb2cgPSB7XG4gICAgICB0eXBlOiBtZXNzYWdlLnR5cGUsXG4gICAgICAuLi4obWVzc2FnZS50eXBlID09PSBcIkF1dGhlbnRpY2F0ZVwiICYmIG1lc3NhZ2UudG9rZW5UeXBlID09PSBcIlVzZXJcIlxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHZhbHVlOiBgLi4uJHttZXNzYWdlLnZhbHVlLnNsaWNlKC03KX1gLFxuICAgICAgICAgIH1cbiAgICAgICAgOiB7fSksXG4gICAgfTtcbiAgICBpZiAodGhpcy5zb2NrZXQuc3RhdGUgPT09IFwicmVhZHlcIiAmJiB0aGlzLnNvY2tldC5wYXVzZWQgPT09IFwibm9cIikge1xuICAgICAgY29uc3QgZW5jb2RlZE1lc3NhZ2UgPSBlbmNvZGVDbGllbnRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgY29uc3QgcmVxdWVzdCA9IEpTT04uc3RyaW5naWZ5KGVuY29kZWRNZXNzYWdlKTtcbiAgICAgIGxldCBzZW50ID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnNvY2tldC53cy5zZW5kKHJlcXVlc3QpO1xuICAgICAgICBzZW50ID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgICAgIGBGYWlsZWQgdG8gc2VuZCBtZXNzYWdlIG9uIFdlYlNvY2tldCwgcmVjb25uZWN0aW5nOiAke2Vycm9yfWAsXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2xvc2VBbmRSZWNvbm5lY3QoXCJGYWlsZWRUb1NlbmRNZXNzYWdlXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgICAgYCR7c2VudCA/IFwic2VudFwiIDogXCJmYWlsZWQgdG8gc2VuZFwifSBtZXNzYWdlIHdpdGggdHlwZSAke21lc3NhZ2UudHlwZX06ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgbWVzc2FnZUZvckxvZyxcbiAgICAgICAgKX1gLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLl9sb2dWZXJib3NlKFxuICAgICAgYG1lc3NhZ2Ugbm90IHNlbnQgKHNvY2tldCBzdGF0ZTogJHt0aGlzLnNvY2tldC5zdGF0ZX0sIHBhdXNlZDogJHtcInBhdXNlZFwiIGluIHRoaXMuc29ja2V0ID8gdGhpcy5zb2NrZXQucGF1c2VkIDogdW5kZWZpbmVkfSk6ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIG1lc3NhZ2VGb3JMb2csXG4gICAgICApfWAsXG4gICAgKTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCgpIHtcbiAgICBpZiAodGhpcy5zb2NrZXQuc3RhdGUgPT09IFwidGVybWluYXRlZFwiKSB7XG4gICAgICAvLyBEb24ndCByZXNldCBhbnkgdGltZXJzIGlmIHdlIHdlcmUgdHJ5aW5nIHRvIHRlcm1pbmF0ZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMucmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCk7XG4gICAgICB0aGlzLnJlY29ubmVjdER1ZVRvU2VydmVySW5hY3Rpdml0eVRpbWVvdXQgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnJlY29ubmVjdER1ZVRvU2VydmVySW5hY3Rpdml0eVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2VBbmRSZWNvbm5lY3QoXCJJbmFjdGl2ZVNlcnZlclwiKTtcbiAgICB9LCB0aGlzLnNlcnZlckluYWN0aXZpdHlUaHJlc2hvbGQpO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVJlY29ubmVjdChyZWFzb246IFwiY2xpZW50XCIgfCBTZXJ2ZXJEaXNjb25uZWN0RXJyb3IpIHtcbiAgICB0aGlzLnNvY2tldCA9IHsgc3RhdGU6IFwiZGlzY29ubmVjdGVkXCIgfTtcbiAgICBjb25zdCBiYWNrb2ZmID0gdGhpcy5uZXh0QmFja29mZihyZWFzb24pO1xuICAgIHRoaXMubWFya0Nvbm5lY3Rpb25TdGF0ZURpcnR5KCk7XG4gICAgdGhpcy5sb2dnZXIubG9nKGBBdHRlbXB0aW5nIHJlY29ubmVjdCBpbiAke01hdGgucm91bmQoYmFja29mZil9bXNgKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY29ubmVjdCgpLCBiYWNrb2ZmKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZSB0aGUgV2ViU29ja2V0IGFuZCBzY2hlZHVsZSBhIHJlY29ubmVjdC5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgdXNlZCB3aGVuIHdlIGhpdCBhbiBlcnJvciBhbmQgd291bGQgbGlrZSB0byByZXN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBjbG9zZUFuZFJlY29ubmVjdChjbG9zZVJlYXNvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5fbG9nVmVyYm9zZShgYmVnaW4gY2xvc2VBbmRSZWNvbm5lY3Qgd2l0aCByZWFzb24gJHtjbG9zZVJlYXNvbn1gKTtcbiAgICBzd2l0Y2ggKHRoaXMuc29ja2V0LnN0YXRlKSB7XG4gICAgICBjYXNlIFwiZGlzY29ubmVjdGVkXCI6XG4gICAgICBjYXNlIFwidGVybWluYXRlZFwiOlxuICAgICAgY2FzZSBcInN0b3BwZWRcIjpcbiAgICAgICAgLy8gTm90aGluZyB0byBkbyBpZiB3ZSBkb24ndCBoYXZlIGEgV2ViU29ja2V0LlxuICAgICAgICByZXR1cm47XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgY2FzZSBcInJlYWR5XCI6IHtcbiAgICAgICAgdGhpcy5sYXN0Q2xvc2VSZWFzb24gPSBjbG9zZVJlYXNvbjtcbiAgICAgICAgLy8gQ2xvc2UgdGhlIG9sZCBzb2NrZXQgYXN5bmNocm9ub3VzbHksIHdlJ2xsIG9wZW4gYSBuZXcgc29ja2V0IGluIHJlY29ubmVjdC5cbiAgICAgICAgdm9pZCB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVSZWNvbm5lY3QoXCJjbGllbnRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gRW5mb3JjZSB0aGF0IHRoZSBzd2l0Y2gtY2FzZSBpcyBleGhhdXN0aXZlLlxuICAgICAgICB0aGlzLnNvY2tldCBzYXRpc2ZpZXMgbmV2ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIHRoZSBXZWJTb2NrZXQsIGJlaW5nIGNhcmVmdWwgdG8gY2xlYXIgdGhlIG9uY2xvc2UgaGFuZGxlciB0byBhdm9pZCByZS1lbnRyYW50XG4gICAqIGNhbGxzLiBVc2UgdGhpcyBpbnN0ZWFkIG9mIGRpcmVjdGx5IGNhbGxpbmcgYHdzLmNsb3NlKClgXG4gICAqXG4gICAqIEl0IGlzIHRoZSBjYWxsZXJzIHJlc3BvbnNpYmlsaXR5IHRvIHVwZGF0ZSB0aGUgc3RhdGUgYWZ0ZXIgdGhpcyBtZXRob2QgaXMgY2FsbGVkIHNvIHRoYXQgdGhlXG4gICAqIGNsb3NlZCBzb2NrZXQgaXMgbm90IGFjY2Vzc2libGUgb3IgdXNlZCBhZ2FpbiBhZnRlciB0aGlzIG1ldGhvZCBpcyBjYWxsZWRcbiAgICovXG4gIHByaXZhdGUgY2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy50cmFuc2l0aW9uQ2h1bmtCdWZmZXIgPSBudWxsO1xuICAgIHN3aXRjaCAodGhpcy5zb2NrZXQuc3RhdGUpIHtcbiAgICAgIGNhc2UgXCJkaXNjb25uZWN0ZWRcIjpcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgICAvLyBOb3RoaW5nIHRvIGRvIGlmIHdlIGRvbid0IGhhdmUgYSBXZWJTb2NrZXQuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6IHtcbiAgICAgICAgY29uc3Qgd3MgPSB0aGlzLnNvY2tldC53cztcbiAgICAgICAgLy8gTWVzc2FnZXMgY2FuIHN0aWxsIGJlIHJlY2VpdmVkIGFmdGVyIGNsb3NlIGJ1dCB3ZSdyZSBub3QgaW50ZXJlc3RlZC5cbiAgICAgICAgd3Mub25tZXNzYWdlID0gKF9tZXNzYWdlKSA9PiB7XG4gICAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcIklnbm9yaW5nIG1lc3NhZ2UgcmVjZWl2ZWQgYWZ0ZXIgY2xvc2VcIik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocikgPT4ge1xuICAgICAgICAgIHdzLm9uY2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2dWZXJib3NlKFwiQ2xvc2VkIGFmdGVyIGNvbm5lY3RpbmdcIik7XG4gICAgICAgICAgICByKCk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB3cy5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9sb2dWZXJib3NlKFwiT3BlbmVkIGFmdGVyIGNvbm5lY3RpbmdcIik7XG4gICAgICAgICAgICB3cy5jbG9zZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY2FzZSBcInJlYWR5XCI6IHtcbiAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcIndzLmNsb3NlIGNhbGxlZFwiKTtcbiAgICAgICAgY29uc3Qgd3MgPSB0aGlzLnNvY2tldC53cztcbiAgICAgICAgLy8gTWVzc2FnZXMgY2FuIHN0aWxsIGJlIHJlY2VpdmVkIGFmdGVyIGNsb3NlIGJ1dCB3ZSdyZSBub3QgaW50ZXJlc3RlZC5cbiAgICAgICAgd3Mub25tZXNzYWdlID0gKF9tZXNzYWdlKSA9PiB7XG4gICAgICAgICAgdGhpcy5fbG9nVmVyYm9zZShcIklnbm9yaW5nIG1lc3NhZ2UgcmVjZWl2ZWQgYWZ0ZXIgY2xvc2VcIik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdDogUHJvbWlzZTx2b2lkPiA9IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICAgICAgd3Mub25jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHIoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgd3MuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gRW5mb3JjZSB0aGF0IHRoZSBzd2l0Y2gtY2FzZSBpcyBleGhhdXN0aXZlLlxuICAgICAgICB0aGlzLnNvY2tldCBzYXRpc2ZpZXMgbmV2ZXI7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgdGhlIFdlYlNvY2tldCBhbmQgZG8gbm90IHJlY29ubmVjdC5cbiAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgV2ViU29ja2V0IGBvbkNsb3NlYCBjYWxsYmFjayBpcyBjYWxsZWQuXG4gICAqL1xuICB0ZXJtaW5hdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMucmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0RHVlVG9TZXJ2ZXJJbmFjdGl2aXR5VGltZW91dCk7XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5zb2NrZXQuc3RhdGUpIHtcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgY2FzZSBcImNvbm5lY3RpbmdcIjpcbiAgICAgIGNhc2UgXCJyZWFkeVwiOiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5zZXRTb2NrZXRTdGF0ZSh7IHN0YXRlOiBcInRlcm1pbmF0ZWRcIiB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gRW5mb3JjZSB0aGF0IHRoZSBzd2l0Y2gtY2FzZSBpcyBleGhhdXN0aXZlLlxuICAgICAgICB0aGlzLnNvY2tldCBzYXRpc2ZpZXMgbmV2ZXI7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgSW52YWxpZCB3ZWJzb2NrZXQgc3RhdGU6ICR7KHRoaXMuc29ja2V0IGFzIGFueSkuc3RhdGV9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdG9wKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHN3aXRjaCAodGhpcy5zb2NrZXQuc3RhdGUpIHtcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICAgIC8vIElmIHdlJ3JlIHRlcm1pbmF0aW5nIHdlIGlnbm9yZSBzdG9wXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgY2FzZSBcInJlYWR5XCI6IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLnNvY2tldCA9IHsgc3RhdGU6IFwic3RvcHBlZFwiIH07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIC8vIEVuZm9yY2UgdGhhdCB0aGUgc3dpdGNoLWNhc2UgaXMgZXhoYXVzdGl2ZS5cbiAgICAgICAgdGhpcy5zb2NrZXQgc2F0aXNmaWVzIG5ldmVyO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBXZWJTb2NrZXQgYWZ0ZXIgYSBwcmV2aW91cyBgc3RvcCgpYCwgdW5sZXNzIGB0ZXJtaW5hdGUoKWAgd2FzXG4gICAqIGNhbGxlZCBiZWZvcmUuXG4gICAqL1xuICB0cnlSZXN0YXJ0KCk6IHZvaWQge1xuICAgIHN3aXRjaCAodGhpcy5zb2NrZXQuc3RhdGUpIHtcbiAgICAgIGNhc2UgXCJzdG9wcGVkXCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInRlcm1pbmF0ZWRcIjpcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6XG4gICAgICBjYXNlIFwicmVhZHlcIjpcbiAgICAgIGNhc2UgXCJkaXNjb25uZWN0ZWRcIjpcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nVmVyYm9zZShcIlJlc3RhcnQgY2FsbGVkIHdpdGhvdXQgc3RvcHBpbmcgZmlyc3RcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gRW5mb3JjZSB0aGF0IHRoZSBzd2l0Y2gtY2FzZSBpcyBleGhhdXN0aXZlLlxuICAgICAgICB0aGlzLnNvY2tldCBzYXRpc2ZpZXMgbmV2ZXI7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY29ubmVjdCgpO1xuICB9XG5cbiAgcGF1c2UoKTogdm9pZCB7XG4gICAgc3dpdGNoICh0aGlzLnNvY2tldC5zdGF0ZSkge1xuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgY2FzZSBcInN0b3BwZWRcIjpcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICAgIC8vIElmIGFscmVhZHkgc3RvcHBlZCBvciBzdG9wcGluZyBpZ25vcmUuXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCJjb25uZWN0aW5nXCI6XG4gICAgICBjYXNlIFwicmVhZHlcIjoge1xuICAgICAgICB0aGlzLnNvY2tldCA9IHsgLi4udGhpcy5zb2NrZXQsIHBhdXNlZDogXCJ5ZXNcIiB9O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIC8vIEVuZm9yY2UgdGhhdCB0aGUgc3dpdGNoLWNhc2UgaXMgZXhoYXVzdGl2ZS5cbiAgICAgICAgdGhpcy5zb2NrZXQgc2F0aXNmaWVzIG5ldmVyO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc3VtZSB0aGUgc3RhdGUgbWFjaGluZSBpZiBwcmV2aW91c2x5IHBhdXNlZC5cbiAgICovXG4gIHJlc3VtZSgpOiB2b2lkIHtcbiAgICBzd2l0Y2ggKHRoaXMuc29ja2V0LnN0YXRlKSB7XG4gICAgICBjYXNlIFwiY29ubmVjdGluZ1wiOlxuICAgICAgICB0aGlzLnNvY2tldCA9IHsgLi4udGhpcy5zb2NrZXQsIHBhdXNlZDogXCJub1wiIH07XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCJyZWFkeVwiOlxuICAgICAgICBpZiAodGhpcy5zb2NrZXQucGF1c2VkID09PSBcInVuaW5pdGlhbGl6ZWRcIikge1xuICAgICAgICAgIHRoaXMuc29ja2V0ID0geyAuLi50aGlzLnNvY2tldCwgcGF1c2VkOiBcIm5vXCIgfTtcbiAgICAgICAgICB0aGlzLm9uT3Blbih7XG4gICAgICAgICAgICBjb25uZWN0aW9uQ291bnQ6IHRoaXMuY29ubmVjdGlvbkNvdW50LFxuICAgICAgICAgICAgbGFzdENsb3NlUmVhc29uOiB0aGlzLmxhc3RDbG9zZVJlYXNvbixcbiAgICAgICAgICAgIGNsaWVudFRzOiBtb25vdG9uaWNNaWxsaXMoKSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNvY2tldC5wYXVzZWQgPT09IFwieWVzXCIpIHtcbiAgICAgICAgICB0aGlzLnNvY2tldCA9IHsgLi4udGhpcy5zb2NrZXQsIHBhdXNlZDogXCJub1wiIH07XG4gICAgICAgICAgdGhpcy5vblJlc3VtZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIGNhc2UgXCJ0ZXJtaW5hdGVkXCI6XG4gICAgICBjYXNlIFwic3RvcHBlZFwiOlxuICAgICAgY2FzZSBcImRpc2Nvbm5lY3RlZFwiOlxuICAgICAgICAvLyBJZ25vcmUgcmVzdW1lIGlmIG5vdCBwYXVzZWQsIHBlcmhhcHMgd2UgYWxyZWFkeSByZXN1bWVkLlxuICAgICAgICByZXR1cm47XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIC8vIEVuZm9yY2UgdGhhdCB0aGUgc3dpdGNoLWNhc2UgaXMgZXhoYXVzdGl2ZS5cbiAgICAgICAgdGhpcy5zb2NrZXQgc2F0aXNmaWVzIG5ldmVyO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfVxuXG4gIGNvbm5lY3Rpb25TdGF0ZSgpOiB7XG4gICAgaXNDb25uZWN0ZWQ6IGJvb2xlYW47XG4gICAgaGFzRXZlckNvbm5lY3RlZDogYm9vbGVhbjtcbiAgICBjb25uZWN0aW9uQ291bnQ6IG51bWJlcjtcbiAgICBjb25uZWN0aW9uUmV0cmllczogbnVtYmVyO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNDb25uZWN0ZWQ6IHRoaXMuc29ja2V0LnN0YXRlID09PSBcInJlYWR5XCIsXG4gICAgICBoYXNFdmVyQ29ubmVjdGVkOiB0aGlzLl9oYXNFdmVyQ29ubmVjdGVkLFxuICAgICAgY29ubmVjdGlvbkNvdW50OiB0aGlzLmNvbm5lY3Rpb25Db3VudCxcbiAgICAgIGNvbm5lY3Rpb25SZXRyaWVzOiB0aGlzLnJldHJpZXMsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgX2xvZ1ZlcmJvc2UobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5sb2dnZXIubG9nVmVyYm9zZShtZXNzYWdlKTtcbiAgfVxuXG4gIHByaXZhdGUgbmV4dEJhY2tvZmYocmVhc29uOiBcImNsaWVudFwiIHwgU2VydmVyRGlzY29ubmVjdEVycm9yKTogbnVtYmVyIHtcbiAgICBjb25zdCBpbml0aWFsQmFja29mZjogbnVtYmVyID1cbiAgICAgIHJlYXNvbiA9PT0gXCJjbGllbnRcIlxuICAgICAgICA/IDEwMCAvLyBUaGVyZSdzIG5vIGV2aWRlbmNlIG9mIGEgc2VydmVyIHByb2JsZW0sIHJldHJ5IHF1aWNrbHlcbiAgICAgICAgOiByZWFzb24gPT09IFwiVW5rbm93blwiXG4gICAgICAgICAgPyB0aGlzLmRlZmF1bHRJbml0aWFsQmFja29mZlxuICAgICAgICAgIDogc2VydmVyRGlzY29ubmVjdEVycm9yc1tyZWFzb25dLnRpbWVvdXQ7XG5cbiAgICBjb25zdCBiYXNlQmFja29mZiA9IGluaXRpYWxCYWNrb2ZmICogTWF0aC5wb3coMiwgdGhpcy5yZXRyaWVzKTtcbiAgICB0aGlzLnJldHJpZXMgKz0gMTtcbiAgICBjb25zdCBhY3R1YWxCYWNrb2ZmID0gTWF0aC5taW4oYmFzZUJhY2tvZmYsIHRoaXMubWF4QmFja29mZik7XG4gICAgY29uc3Qgaml0dGVyID0gYWN0dWFsQmFja29mZiAqIChNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICByZXR1cm4gYWN0dWFsQmFja29mZiArIGppdHRlcjtcbiAgfVxuXG4gIHByaXZhdGUgcmVwb3J0TGFyZ2VUcmFuc2l0aW9uKHtcbiAgICB0cmFuc2l0aW9uLFxuICAgIG1lc3NhZ2VMZW5ndGgsXG4gIH06IHtcbiAgICB0cmFuc2l0aW9uOiBUcmFuc2l0aW9uO1xuICAgIG1lc3NhZ2VMZW5ndGg6IG51bWJlcjtcbiAgfSkge1xuICAgIGlmIChcbiAgICAgIHRyYW5zaXRpb24uY2xpZW50Q2xvY2tTa2V3ID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRyYW5zaXRpb24uc2VydmVyVHMgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYW5zaXRpb25UcmFuc2l0VGltZSA9XG4gICAgICBtb25vdG9uaWNNaWxsaXMoKSAtIC8vIGNsaWVudCB0aW1lIG5vd1xuICAgICAgLy8gY2xpZW50Q2xvY2tTa2V3ID0gKHNlcnZlciB0aW1lICsgdXBzdHJlYW0gbGF0ZW5jeSkgLSBjbGllbnQgdGltZVxuICAgICAgLy8gY2xpZW50Q2xvY2tTa2V3IGlzIFwiaG93IG1hbnkgbWlsbGlzZWNvbmRzIGJlaGluZCAoc2xvdykgaXMgdGhlIGNsaWVudCBjbG9ja1wiXG4gICAgICAvLyBidXQgdGhlIGxhdGVuY3kgb2YgdGhlIENvbm5lY3QgbWVzc2FnZSBpbmZsYXRlcyB0aGlzLCBtYWtpbmcgaXQgYXBwZWFyIGZ1cnRoZXIgYmVoaW5kXG4gICAgICB0cmFuc2l0aW9uLmNsaWVudENsb2NrU2tldyAtXG4gICAgICB0cmFuc2l0aW9uLnNlcnZlclRzIC8gMV8wMDBfMDAwOyAvLyBzZXJ2ZXIgdGltZSB3aGVuIHRyYW5zaXRpb24gd2FzIHNlbnRcbiAgICBjb25zdCBwcmV0dHlUcmFuc2l0aW9uVGltZSA9IGAke01hdGgucm91bmQodHJhbnNpdGlvblRyYW5zaXRUaW1lKX1tc2A7XG4gICAgY29uc3QgcHJldHR5TWVzc2FnZU1CID0gYCR7TWF0aC5yb3VuZChtZXNzYWdlTGVuZ3RoIC8gMTBfMDAwKSAvIDEwMH1NQmA7XG4gICAgY29uc3QgYnl0ZXNQZXJTZWNvbmQgPSBtZXNzYWdlTGVuZ3RoIC8gKHRyYW5zaXRpb25UcmFuc2l0VGltZSAvIDEwMDApO1xuICAgIGNvbnN0IHByZXR0eUJ5dGVzUGVyU2Vjb25kID0gYCR7TWF0aC5yb3VuZChieXRlc1BlclNlY29uZCAvIDEwXzAwMCkgLyAxMDB9TUIgcGVyIHNlY29uZGA7XG4gICAgdGhpcy5fbG9nVmVyYm9zZShcbiAgICAgIGByZWNlaXZlZCAke3ByZXR0eU1lc3NhZ2VNQn0gdHJhbnNpdGlvbiBpbiAke3ByZXR0eVRyYW5zaXRpb25UaW1lfSBhdCAke3ByZXR0eUJ5dGVzUGVyU2Vjb25kfWAsXG4gICAgKTtcblxuICAgIC8vIFdhcm5pbmdzIHRoYXQgd2lsbCBzaG93IHVwIGZvciAqYWxsIHVzZXJzKiwgc28gZG9uJ3QgYmUgdG9vIGFnZ3Jlc3NpdmUuXG4gICAgLy8gVGhlc2UgY2FuIGJlIHNpbGVuY2VkIChhbG9uZyB3aXRoIHJlY29ubmVjdGlvbiBtZXNzYWdlcykgYnkgc2V0dGluZyBgbG9nZ2VyOiBmYWxzZWAgaW4gY2xpZW50IG9wdGlvbnMuXG4gICAgaWYgKG1lc3NhZ2VMZW5ndGggPiAyMF8wMDBfMDAwKSB7XG4gICAgICAvLyBCaWcgZW5vdWdoIHRoYXQgdGhlIGRldmVsb3BlciBzaG91bGQgYmUgbWFkZSBhd2FyZSBvZiB0aGlzLlxuICAgICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgICBgcmVjZWl2ZWQgcXVlcnkgcmVzdWx0cyB0b3RhbGluZyBtb3JlIHRoYXQgMjBNQiAoJHtwcmV0dHlNZXNzYWdlTUJ9KSB3aGljaCB3aWxsIHRha2UgYSBsb25nIHRpbWUgdG8gZG93bmxvYWQgb24gc2xvd2VyIGNvbm5lY3Rpb25zYCxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0cmFuc2l0aW9uVHJhbnNpdFRpbWUgPiAyMF8wMDApIHtcbiAgICAgIC8vIExvbmcgZW5vdWdoIHRoYXQgYSBwYXR0ZXJuIG9mIHRoZXNlIHNob3VsZCBiZSBpbnRlcmVzdGluZyB0byBhIGRldmVsb3BlciwgYnV0IGJlIGF3YXJlIHRoYXRcbiAgICAgIC8vIHdlYWsgY29ubmVjdGlvbnMsIHB1dHRpbmcgY2xpZW50cyB0byBzbGVlcCwgYmFja2dyb3VuZGluZyBldGMuIGNvdWxkIGFsbCBjYXVzZSB0aGlzIHRvby5cbiAgICAgIHRoaXMubG9nZ2VyLmxvZyhcbiAgICAgICAgYHJlY2VpdmVkIHF1ZXJ5IHJlc3VsdHMgdG90YWxpbmcgJHtwcmV0dHlNZXNzYWdlTUJ9IHdoaWNoIHRvb2sgbW9yZSB0aGFuIDIwcyB0byBhcnJpdmUgKCR7cHJldHR5VHJhbnNpdGlvblRpbWV9KWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRlYnVnKSB7XG4gICAgICAvLyBkZWJ1ZyBtZWFucyBcInJlcG9ydERlYnVnSW5mb1RvQ29udmV4XCIgaXMgc2V0IHNvIHRoaXMgY2FuIGJlIGFnZ3Jlc3NpdmUuXG4gICAgICB0aGlzLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogXCJFdmVudFwiLFxuICAgICAgICBldmVudFR5cGU6IFwiQ2xpZW50UmVjZWl2ZWRUcmFuc2l0aW9uXCIsXG4gICAgICAgIGV2ZW50OiB7IHRyYW5zaXRpb25UcmFuc2l0VGltZSwgbWVzc2FnZUxlbmd0aCB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/browser/sync/web_socket_manager.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/common/index.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/common/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isSimpleObject: () => (/* binding */ isSimpleObject),\n/* harmony export */   parseArgs: () => (/* binding */ parseArgs),\n/* harmony export */   validateDeploymentUrl: () => (/* binding */ validateDeploymentUrl)\n/* harmony export */ });\n\nfunction parseArgs(args) {\n    if (args === void 0) {\n        return {};\n    }\n    if (!isSimpleObject(args)) {\n        throw new Error(`The arguments to a Convex function must be an object. Received: ${args}`);\n    }\n    return args;\n}\nfunction validateDeploymentUrl(deploymentUrl) {\n    if (typeof deploymentUrl === \"undefined\") {\n        throw new Error(`Client created with undefined deployment address. If you used an environment variable, check that it's set.`);\n    }\n    if (typeof deploymentUrl !== \"string\") {\n        throw new Error(`Invalid deployment address: found ${deploymentUrl}\".`);\n    }\n    if (!(deploymentUrl.startsWith(\"http:\") || deploymentUrl.startsWith(\"https:\"))) {\n        throw new Error(`Invalid deployment address: Must start with \"https://\" or \"http://\". Found \"${deploymentUrl}\".`);\n    }\n    try {\n        new URL(deploymentUrl);\n    } catch  {\n        throw new Error(`Invalid deployment address: \"${deploymentUrl}\" is not a valid URL. If you believe this URL is correct, use the \\`skipConvexDeploymentUrlCheck\\` option to bypass this.`);\n    }\n    if (deploymentUrl.endsWith(\".convex.site\")) {\n        throw new Error(`Invalid deployment address: \"${deploymentUrl}\" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \\`skipConvexDeploymentUrlCheck\\` option to bypass this.`);\n    }\n}\nfunction isSimpleObject(value) {\n    const isObject = typeof value === \"object\";\n    const prototype = Object.getPrototypeOf(value);\n    const isSimple = prototype === null || prototype === Object.prototype || // Objects generated from other contexts (e.g. across Node.js `vm` modules) will not satisfy the previous\n    // conditions but are still simple objects.\n    prototype?.constructor?.name === \"Object\";\n    return isObject && isSimple;\n} //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2NvbW1vbi9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBTU8sU0FBUyxVQUNkLE1BQ3VCO0lBQ3ZCLElBQUksU0FBUyxRQUFXO1FBQ3RCLE9BQU8sQ0FBQztJQUNWO0lBQ0EsSUFBSSxDQUFDLGVBQWUsSUFBSSxHQUFHO1FBQ3pCLE1BQU0sSUFBSSxNQUNSLG1FQUNFLElBQ0Y7SUFFSjtJQUNBLE9BQU87QUFDVDtBQUVPLFNBQVMsc0JBQXNCLGVBQXVCO0lBRzNELElBQUksT0FBTyxrQkFBa0IsYUFBYTtRQUN4QyxNQUFNLElBQUksTUFDUjtJQUVKO0lBQ0EsSUFBSSxPQUFPLGtCQUFrQixVQUFVO1FBQ3JDLE1BQU0sSUFBSSxNQUNSLHFDQUFxQyxhQUFvQjtJQUU3RDtJQUNBLElBQ0UsRUFBRSxjQUFjLFdBQVcsT0FBTyxLQUFLLGNBQWMsV0FBVyxTQUFRLEdBQ3hFO1FBQ0EsTUFBTSxJQUFJLE1BQ1IsK0VBQStFLGFBQWE7SUFFaEc7SUFLQSxJQUFJO1FBQ0YsSUFBSSxJQUFJLGFBQWE7SUFDdkIsU0FBUTtRQUNOLE1BQU0sSUFBSSxNQUNSLGdDQUFnQyxhQUFhO0lBRWpEO0lBR0EsSUFBSSxjQUFjLFNBQVMsY0FBYyxHQUFHO1FBQzFDLE1BQU0sSUFBSSxNQUNSLGdDQUFnQyxhQUFhO0lBRWpEO0FBQ0Y7QUFLTyxTQUFTLGVBQWUsT0FBZ0I7SUFDN0MsTUFBTSxXQUFXLE9BQU8sVUFBVTtJQUNsQyxNQUFNLFlBQVksT0FBTyxlQUFlLEtBQUs7SUFDN0MsTUFBTSxXQUNKLGNBQWMsUUFDZCxjQUFjLE9BQU87SUFBQTtJQUdyQixXQUFXLGFBQWEsU0FBUztJQUNuQyxPQUFPLFlBQVk7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvY29tbW9uL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVmFsdWUgfSBmcm9tIFwiLi4vdmFsdWVzL3ZhbHVlLmpzXCI7XG5cbi8qKlxuICogVmFsaWRhdGUgdGhhdCB0aGUgYXJndW1lbnRzIHRvIGEgQ29udmV4IGZ1bmN0aW9uIGFyZSBhbiBvYmplY3QsIGRlZmF1bHRpbmdcbiAqIGB1bmRlZmluZWRgIHRvIGB7fWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFyZ3MoXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIFZhbHVlPiB8IHVuZGVmaW5lZCxcbik6IFJlY29yZDxzdHJpbmcsIFZhbHVlPiB7XG4gIGlmIChhcmdzID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgaWYgKCFpc1NpbXBsZU9iamVjdChhcmdzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBUaGUgYXJndW1lbnRzIHRvIGEgQ29udmV4IGZ1bmN0aW9uIG11c3QgYmUgYW4gb2JqZWN0LiBSZWNlaXZlZDogJHtcbiAgICAgICAgYXJncyBhcyBhbnlcbiAgICAgIH1gLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGFyZ3M7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZURlcGxveW1lbnRVcmwoZGVwbG95bWVudFVybDogc3RyaW5nKSB7XG4gIC8vIERvbid0IHVzZSB0aGluZ3MgbGlrZSBgbmV3IFVSTChkZXBsb3ltZW50VXJsKS5ob3N0bmFtZWAgc2luY2UgdGhlc2UgYXJlbid0XG4gIC8vIHN1cHBvcnRlZCBieSBSZWFjdCBOYXRpdmUncyBKUyBlbnZpcm9ubWVudFxuICBpZiAodHlwZW9mIGRlcGxveW1lbnRVcmwgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQ2xpZW50IGNyZWF0ZWQgd2l0aCB1bmRlZmluZWQgZGVwbG95bWVudCBhZGRyZXNzLiBJZiB5b3UgdXNlZCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZSwgY2hlY2sgdGhhdCBpdCdzIHNldC5gLFxuICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiBkZXBsb3ltZW50VXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgZGVwbG95bWVudCBhZGRyZXNzOiBmb3VuZCAke2RlcGxveW1lbnRVcmwgYXMgYW55fVwiLmAsXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgIShkZXBsb3ltZW50VXJsLnN0YXJ0c1dpdGgoXCJodHRwOlwiKSB8fCBkZXBsb3ltZW50VXJsLnN0YXJ0c1dpdGgoXCJodHRwczpcIikpXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIGRlcGxveW1lbnQgYWRkcmVzczogTXVzdCBzdGFydCB3aXRoIFwiaHR0cHM6Ly9cIiBvciBcImh0dHA6Ly9cIi4gRm91bmQgXCIke2RlcGxveW1lbnRVcmx9XCIuYCxcbiAgICApO1xuICB9XG5cbiAgLy8gTW9zdCBjbGllbnRzIHNob3VsZCBjb25uZWN0IHRvIFwiLmNvbnZleC5jbG91ZFwiLiBCdXQgd2UgYWxzbyBzdXBwb3J0IGxvY2FsaG9zdCBhbmRcbiAgLy8gY3VzdG9tIGN1c3RvbS4gV2UgdmFsaWRhdGUgdGhlIGRlcGxveW1lbnQgdXJsIGlzIGEgdmFsaWQgdXJsLCB3aGljaCBpcyB0aGUgbW9zdFxuICAvLyBjb21tb24gZmFpbHVyZSBwYXR0ZXJuLlxuICB0cnkge1xuICAgIG5ldyBVUkwoZGVwbG95bWVudFVybCk7XG4gIH0gY2F0Y2gge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIGRlcGxveW1lbnQgYWRkcmVzczogXCIke2RlcGxveW1lbnRVcmx9XCIgaXMgbm90IGEgdmFsaWQgVVJMLiBJZiB5b3UgYmVsaWV2ZSB0aGlzIFVSTCBpcyBjb3JyZWN0LCB1c2UgdGhlIFxcYHNraXBDb252ZXhEZXBsb3ltZW50VXJsQ2hlY2tcXGAgb3B0aW9uIHRvIGJ5cGFzcyB0aGlzLmAsXG4gICAgKTtcbiAgfVxuXG4gIC8vIElmIGEgdXNlciB1c2VzIC5jb252ZXguc2l0ZSwgdGhpcyBpcyB2ZXJ5IGxpa2VseSBpbmNvcnJlY3QuXG4gIGlmIChkZXBsb3ltZW50VXJsLmVuZHNXaXRoKFwiLmNvbnZleC5zaXRlXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgZGVwbG95bWVudCBhZGRyZXNzOiBcIiR7ZGVwbG95bWVudFVybH1cIiBlbmRzIHdpdGggLmNvbnZleC5zaXRlLCB3aGljaCBpcyB1c2VkIGZvciBIVFRQIEFjdGlvbnMuIENvbnZleCBkZXBsb3ltZW50IFVSTHMgdHlwaWNhbGx5IGVuZCB3aXRoIC5jb252ZXguY2xvdWQ/IElmIHlvdSBiZWxpZXZlIHRoaXMgVVJMIGlzIGNvcnJlY3QsIHVzZSB0aGUgXFxgc2tpcENvbnZleERlcGxveW1lbnRVcmxDaGVja1xcYCBvcHRpb24gdG8gYnlwYXNzIHRoaXMuYCxcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhIHZhbHVlIGlzIGEgcGxhaW4gb2xkIEphdmFTY3JpcHQgb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTaW1wbGVPYmplY3QodmFsdWU6IHVua25vd24pIHtcbiAgY29uc3QgaXNPYmplY3QgPSB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCI7XG4gIGNvbnN0IHByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWx1ZSk7XG4gIGNvbnN0IGlzU2ltcGxlID1cbiAgICBwcm90b3R5cGUgPT09IG51bGwgfHxcbiAgICBwcm90b3R5cGUgPT09IE9iamVjdC5wcm90b3R5cGUgfHxcbiAgICAvLyBPYmplY3RzIGdlbmVyYXRlZCBmcm9tIG90aGVyIGNvbnRleHRzIChlLmcuIGFjcm9zcyBOb2RlLmpzIGB2bWAgbW9kdWxlcykgd2lsbCBub3Qgc2F0aXNmeSB0aGUgcHJldmlvdXNcbiAgICAvLyBjb25kaXRpb25zIGJ1dCBhcmUgc3RpbGwgc2ltcGxlIG9iamVjdHMuXG4gICAgcHJvdG90eXBlPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gXCJPYmplY3RcIjtcbiAgcmV0dXJuIGlzT2JqZWN0ICYmIGlzU2ltcGxlO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/common/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/index.js":
/*!***********************************************!*\
  !*** ./node_modules/convex/dist/esm/index.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n\nconst version = \"1.30.0\"; //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTSxVQUFVIiwic291cmNlcyI6WyIvVXNlcnMvYmdmL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdmVyc2lvbiA9IFwiMS4zMC4wXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/ConvexAuthState.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexProviderWithAuth: () => (/* binding */ ConvexProviderWithAuth),\n/* harmony export */   useConvexAuth: () => (/* binding */ useConvexAuth)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n\n\n\nconst ConvexAuthContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nfunction useConvexAuth() {\n    const authContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ConvexAuthContext);\n    if (authContext === void 0) {\n        throw new Error(\"Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.\");\n    }\n    return authContext;\n}\nfunction ConvexProviderWithAuth({ children, client, useAuth }) {\n    const { isLoading: authProviderLoading, isAuthenticated: authProviderAuthenticated, fetchAccessToken } = useAuth();\n    const [isConvexAuthenticated, setIsConvexAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    if (authProviderLoading && isConvexAuthenticated !== null) {\n        setIsConvexAuthenticated(null);\n    }\n    if (!authProviderLoading && !authProviderAuthenticated && isConvexAuthenticated !== false) {\n        setIsConvexAuthenticated(false);\n    }\n    return /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConvexAuthContext.Provider, {\n        value: {\n            isLoading: isConvexAuthenticated === null,\n            isAuthenticated: authProviderAuthenticated && (isConvexAuthenticated ?? false)\n        }\n    }, /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConvexAuthStateFirstEffect, {\n        authProviderAuthenticated,\n        fetchAccessToken,\n        authProviderLoading,\n        client,\n        setIsConvexAuthenticated\n    }), /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(_client_js__WEBPACK_IMPORTED_MODULE_1__.ConvexProvider, {\n        client\n    }, children), /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(ConvexAuthStateLastEffect, {\n        authProviderAuthenticated,\n        fetchAccessToken,\n        authProviderLoading,\n        client,\n        setIsConvexAuthenticated\n    }));\n}\nfunction ConvexAuthStateFirstEffect({ authProviderAuthenticated, fetchAccessToken, authProviderLoading, client, setIsConvexAuthenticated }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"ConvexAuthStateFirstEffect.useEffect\": ()=>{\n            let isThisEffectRelevant = true;\n            if (authProviderAuthenticated) {\n                client.setAuth(fetchAccessToken, {\n                    \"ConvexAuthStateFirstEffect.useEffect\": (backendReportsIsAuthenticated)=>{\n                        if (isThisEffectRelevant) {\n                            setIsConvexAuthenticated({\n                                \"ConvexAuthStateFirstEffect.useEffect\": ()=>backendReportsIsAuthenticated\n                            }[\"ConvexAuthStateFirstEffect.useEffect\"]);\n                        }\n                    }\n                }[\"ConvexAuthStateFirstEffect.useEffect\"]);\n                return ({\n                    \"ConvexAuthStateFirstEffect.useEffect\": ()=>{\n                        isThisEffectRelevant = false;\n                        setIsConvexAuthenticated({\n                            \"ConvexAuthStateFirstEffect.useEffect\": (isConvexAuthenticated)=>isConvexAuthenticated ? false : null\n                        }[\"ConvexAuthStateFirstEffect.useEffect\"]);\n                    }\n                })[\"ConvexAuthStateFirstEffect.useEffect\"];\n            }\n        }\n    }[\"ConvexAuthStateFirstEffect.useEffect\"], [\n        authProviderAuthenticated,\n        fetchAccessToken,\n        authProviderLoading,\n        client,\n        setIsConvexAuthenticated\n    ]);\n    return null;\n}\nfunction ConvexAuthStateLastEffect({ authProviderAuthenticated, fetchAccessToken, authProviderLoading, client, setIsConvexAuthenticated }) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"ConvexAuthStateLastEffect.useEffect\": ()=>{\n            if (authProviderAuthenticated) {\n                return ({\n                    \"ConvexAuthStateLastEffect.useEffect\": ()=>{\n                        client.clearAuth();\n                        setIsConvexAuthenticated({\n                            \"ConvexAuthStateLastEffect.useEffect\": ()=>null\n                        }[\"ConvexAuthStateLastEffect.useEffect\"]);\n                    }\n                })[\"ConvexAuthStateLastEffect.useEffect\"];\n            }\n        }\n    }[\"ConvexAuthStateLastEffect.useEffect\"], [\n        authProviderAuthenticated,\n        fetchAccessToken,\n        authProviderLoading,\n        client,\n        setIsConvexAuthenticated\n    ]);\n    return null;\n} //# sourceMappingURL=ConvexAuthState.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L0NvbnZleEF1dGhTdGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU1PO0FBRXdCO0FBc0IvQixNQUFNLGtDQUFvQixvREFBYSxDQUFrQixNQUFnQjtBQVlsRSxTQUFTLGdCQUdkO0lBQ0EsTUFBTSxjQUFjLGlEQUFVLENBQUMsaUJBQWlCO0lBQ2hELElBQUksZ0JBQWdCLFFBQVc7UUFDN0IsTUFBTSxJQUFJLE1BQ1I7SUFNSjtJQUNBLE9BQU87QUFDVDtBQWlCTyxTQUFTLHVCQUF1QixFQUNyQyxVQUNBLFFBQ0EsU0FDRixFQVVHO0lBQ0QsTUFBTSxFQUNKLFdBQVcscUJBQ1gsaUJBQWlCLDJCQUNqQixrQkFDRixHQUFJLFFBQVE7SUFDWixNQUFNLENBQUMsdUJBQXVCLHdCQUF3QixJQUFJLCtDQUFRLENBRWhFLElBQUk7SUFNTixJQUFJLHVCQUF1QiwwQkFBMEIsTUFBTTtRQUN6RCx5QkFBeUIsSUFBSTtJQUMvQjtJQUdBLElBQ0UsQ0FBQyx1QkFDRCxDQUFDLDZCQUNELDBCQUEwQixPQUMxQjtRQUNBLHlCQUF5QixLQUFLO0lBQ2hDO0lBRUEsT0FDRSwrRUFBQyxrQkFBa0IsVUFBbEI7UUFDQyxPQUFPO1lBQ0wsV0FBVywwQkFBMEI7WUFDckMsaUJBQ0UsOEJBQThCLHlCQUF5QjtRQUMzRDtJQUFBLEdBRUEsK0VBQUM7UUFDQztRQUNBO1FBQ0E7UUFDQTtRQUNBO0lBQUEsSUFFRiwrRUFBQyxzREFBYyxFQUFkO1FBQWU7SUFBQSxHQUF3QixRQUFTLEdBQ2pELCtFQUFDO1FBQ0M7UUFDQTtRQUNBO1FBQ0E7UUFDQTtJQUFBO0FBSVI7QUFJQSxTQUFTLDJCQUEyQixFQUNsQywyQkFDQSxrQkFDQSxxQkFDQSxRQUNBLDBCQUNGLEVBVUc7SUFDRCxnREFBUztnREFBQztZQUNSLElBQUksdUJBQXVCO1lBQzNCLElBQUksMkJBQTJCO2dCQUM3QixPQUFPLFFBQVE7NERBQWtCLENBQUM7d0JBQ2hDLElBQUksc0JBQXNCOzRCQUN4Qjt3RUFBeUIsSUFBTSw2QkFBNkI7O3dCQUM5RDtvQkFDRixDQUFDOztnQkFDRDs0REFBTzt3QkFDTCx1QkFBdUI7d0JBSXZCO29FQUF5QixDQUFDLHdCQUN4Qix3QkFBd0IsUUFBUTs7b0JBRXBDOztZQUNGO1FBQ0Y7K0NBQUc7UUFDRDtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFDRCxPQUFPO0FBQ1Q7QUFLQSxTQUFTLDBCQUEwQixFQUNqQywyQkFDQSxrQkFDQSxxQkFDQSxRQUNBLDBCQUNGLEVBVUc7SUFDRCxnREFBUzsrQ0FBQztZQUVSLElBQUksMkJBQTJCO2dCQUM3QjsyREFBTzt3QkFDTCxPQUFPLFVBQVU7d0JBT2pCO21FQUF5QixJQUFNLElBQUk7O29CQUNyQzs7WUFDRjtRQUNGOzhDQUFHO1FBQ0Q7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBQ0QsT0FBTztBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3JlYWN0L0NvbnZleEF1dGhTdGF0ZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7XG4gIGNyZWF0ZUNvbnRleHQsXG4gIFJlYWN0Tm9kZSxcbiAgdXNlQ29udGV4dCxcbiAgdXNlRWZmZWN0LFxuICB1c2VTdGF0ZSxcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBdXRoVG9rZW5GZXRjaGVyIH0gZnJvbSBcIi4uL2Jyb3dzZXIvc3luYy9jbGllbnQuanNcIjtcbmltcG9ydCB7IENvbnZleFByb3ZpZGVyIH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5cbi8vIFVudGlsIHdlIGNhbiBpbXBvcnQgZnJvbSBvdXIgb3duIGVudHJ5IHBvaW50cyAocmVxdWlyZXMgVHlwZVNjcmlwdCA0LjcpLFxuLy8ganVzdCBkZXNjcmliZSB0aGUgaW50ZXJmYWNlIGVub3VnaCB0byBoZWxwIHVzZXJzIHBhc3MgdGhlIHJpZ2h0IHR5cGUuXG50eXBlIElDb252ZXhSZWFjdENsaWVudCA9IHtcbiAgc2V0QXV0aChcbiAgICBmZXRjaFRva2VuOiBBdXRoVG9rZW5GZXRjaGVyLFxuICAgIG9uQ2hhbmdlOiAoaXNBdXRoZW50aWNhdGVkOiBib29sZWFuKSA9PiB2b2lkLFxuICApOiB2b2lkO1xuICBjbGVhckF1dGgoKTogdm9pZDtcbn07XG5cbi8qKlxuICogVHlwZSByZXByZXNlbnRpbmcgdGhlIHN0YXRlIG9mIGFuIGF1dGggaW50ZWdyYXRpb24gd2l0aCBDb252ZXguXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBDb252ZXhBdXRoU3RhdGUgPSB7XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xufTtcblxuY29uc3QgQ29udmV4QXV0aENvbnRleHQgPSBjcmVhdGVDb250ZXh0PENvbnZleEF1dGhTdGF0ZT4odW5kZWZpbmVkIGFzIGFueSk7XG5cbi8qKlxuICogR2V0IHRoZSB7QGxpbmsgQ29udmV4QXV0aFN0YXRlfSB3aXRoaW4gYSBSZWFjdCBjb21wb25lbnQuXG4gKlxuICogVGhpcyByZWxpZXMgb24gYSBDb252ZXggYXV0aCBpbnRlZ3JhdGlvbiBwcm92aWRlciBiZWluZyBhYm92ZSBpbiB0aGUgUmVhY3RcbiAqIGNvbXBvbmVudCB0cmVlLlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHtAbGluayBDb252ZXhBdXRoU3RhdGV9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbnZleEF1dGgoKToge1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGlzQXV0aGVudGljYXRlZDogYm9vbGVhbjtcbn0ge1xuICBjb25zdCBhdXRoQ29udGV4dCA9IHVzZUNvbnRleHQoQ29udmV4QXV0aENvbnRleHQpO1xuICBpZiAoYXV0aENvbnRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiQ291bGQgbm90IGZpbmQgYENvbnZleFByb3ZpZGVyV2l0aEF1dGhgIChvciBgQ29udmV4UHJvdmlkZXJXaXRoQ2xlcmtgIFwiICtcbiAgICAgICAgXCJvciBgQ29udmV4UHJvdmlkZXJXaXRoQXV0aDBgKSBcIiArXG4gICAgICAgIFwiYXMgYW4gYW5jZXN0b3IgY29tcG9uZW50LiBUaGlzIGNvbXBvbmVudCBtYXkgYmUgbWlzc2luZywgb3IgeW91IFwiICtcbiAgICAgICAgXCJtaWdodCBoYXZlIHR3byBpbnN0YW5jZXMgb2YgdGhlIGBjb252ZXgvcmVhY3RgIG1vZHVsZSBsb2FkZWQgaW4geW91ciBcIiArXG4gICAgICAgIFwicHJvamVjdC5cIixcbiAgICApO1xuICB9XG4gIHJldHVybiBhdXRoQ29udGV4dDtcbn1cblxuLyoqXG4gKiBBIHJlcGxhY2VtZW50IGZvciB7QGxpbmsgQ29udmV4UHJvdmlkZXJ9IHdoaWNoIGFkZGl0aW9uYWxseSBwcm92aWRlc1xuICoge0BsaW5rIENvbnZleEF1dGhTdGF0ZX0gdG8gZGVzY2VuZGFudHMgb2YgdGhpcyBjb21wb25lbnQuXG4gKlxuICogVXNlIHRoaXMgdG8gaW50ZWdyYXRlIGFueSBhdXRoIHByb3ZpZGVyIHdpdGggQ29udmV4LiBUaGUgYHVzZUF1dGhgIHByb3BcbiAqIHNob3VsZCBiZSBhIFJlYWN0IGhvb2sgdGhhdCByZXR1cm5zIHRoZSBwcm92aWRlcidzIGF1dGhlbnRpY2F0aW9uIHN0YXRlXG4gKiBhbmQgYSBmdW5jdGlvbiB0byBmZXRjaCBhIEpXVCBhY2Nlc3MgdG9rZW4uXG4gKlxuICogSWYgdGhlIGB1c2VBdXRoYCBwcm9wIGZ1bmN0aW9uIHVwZGF0ZXMgY2F1c2luZyBhIHJlcmVuZGVyIHRoZW4gYXV0aCBzdGF0ZVxuICogd2lsbCB0cmFuc2l0aW9uIHRvIGxvYWRpbmcgYW5kIHRoZSBgZmV0Y2hBY2Nlc3NUb2tlbigpYCBmdW5jdGlvbiBjYWxsZWQgYWdhaW4uXG4gKlxuICogU2VlIFtDdXN0b20gQXV0aCBJbnRlZ3JhdGlvbl0oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvYXV0aC9hZHZhbmNlZC9jdXN0b20tYXV0aCkgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gQ29udmV4UHJvdmlkZXJXaXRoQXV0aCh7XG4gIGNoaWxkcmVuLFxuICBjbGllbnQsXG4gIHVzZUF1dGgsXG59OiB7XG4gIGNoaWxkcmVuPzogUmVhY3ROb2RlO1xuICBjbGllbnQ6IElDb252ZXhSZWFjdENsaWVudDtcbiAgdXNlQXV0aDogKCkgPT4ge1xuICAgIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG4gICAgZmV0Y2hBY2Nlc3NUb2tlbjogKGFyZ3M6IHtcbiAgICAgIGZvcmNlUmVmcmVzaFRva2VuOiBib29sZWFuO1xuICAgIH0pID0+IFByb21pc2U8c3RyaW5nIHwgbnVsbD47XG4gIH07XG59KSB7XG4gIGNvbnN0IHtcbiAgICBpc0xvYWRpbmc6IGF1dGhQcm92aWRlckxvYWRpbmcsXG4gICAgaXNBdXRoZW50aWNhdGVkOiBhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkLFxuICAgIGZldGNoQWNjZXNzVG9rZW4sXG4gIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IFtpc0NvbnZleEF1dGhlbnRpY2F0ZWQsIHNldElzQ29udmV4QXV0aGVudGljYXRlZF0gPSB1c2VTdGF0ZTxcbiAgICBib29sZWFuIHwgbnVsbFxuICA+KG51bGwpO1xuXG4gIC8vIElmIHRoZSB1c2VBdXRoIHdlbnQgYmFjayB0byB0aGUgYXV0aFByb3ZpZGVyTG9hZGluZyBzdGF0ZSAod2hpY2ggaXMgdW51c3VhbCBidXQgcG9zc2libGUpXG4gIC8vIHJlc2V0IHRoZSBDb252ZXggYXV0aCBzdGF0ZSB0byBudWxsIHNvIHRoYXQgd2UgY2FuIGNvcnJlY3RseVxuICAvLyB0cmFuc2l0aW9uIHRoZSBzdGF0ZSBmcm9tIFwibG9hZGluZ1wiIHRvIFwiYXV0aGVudGljYXRlZFwiXG4gIC8vIHdpdGhvdXQgZ29pbmcgdGhyb3VnaCBcInVuYXV0aGVudGljYXRlZFwiLlxuICBpZiAoYXV0aFByb3ZpZGVyTG9hZGluZyAmJiBpc0NvbnZleEF1dGhlbnRpY2F0ZWQgIT09IG51bGwpIHtcbiAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQobnVsbCk7XG4gIH1cblxuICAvLyBJZiB0aGUgdXNlQXV0aCBnb2VzIHRvIG5vdCBhdXRoZW50aWNhdGVkIHRoZW4gaXNDb252ZXhBdXRoZW50aWNhdGVkIHNob3VsZCByZWZsZWN0IHRoYXQuXG4gIGlmIChcbiAgICAhYXV0aFByb3ZpZGVyTG9hZGluZyAmJlxuICAgICFhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkICYmXG4gICAgaXNDb252ZXhBdXRoZW50aWNhdGVkICE9PSBmYWxzZVxuICApIHtcbiAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQoZmFsc2UpO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8Q29udmV4QXV0aENvbnRleHQuUHJvdmlkZXJcbiAgICAgIHZhbHVlPXt7XG4gICAgICAgIGlzTG9hZGluZzogaXNDb252ZXhBdXRoZW50aWNhdGVkID09PSBudWxsLFxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6XG4gICAgICAgICAgYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCAmJiAoaXNDb252ZXhBdXRoZW50aWNhdGVkID8/IGZhbHNlKSxcbiAgICAgIH19XG4gICAgPlxuICAgICAgPENvbnZleEF1dGhTdGF0ZUZpcnN0RWZmZWN0XG4gICAgICAgIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQ9e2F1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWR9XG4gICAgICAgIGZldGNoQWNjZXNzVG9rZW49e2ZldGNoQWNjZXNzVG9rZW59XG4gICAgICAgIGF1dGhQcm92aWRlckxvYWRpbmc9e2F1dGhQcm92aWRlckxvYWRpbmd9XG4gICAgICAgIGNsaWVudD17Y2xpZW50fVxuICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQ9e3NldElzQ29udmV4QXV0aGVudGljYXRlZH1cbiAgICAgIC8+XG4gICAgICA8Q29udmV4UHJvdmlkZXIgY2xpZW50PXtjbGllbnQgYXMgYW55fT57Y2hpbGRyZW59PC9Db252ZXhQcm92aWRlcj5cbiAgICAgIDxDb252ZXhBdXRoU3RhdGVMYXN0RWZmZWN0XG4gICAgICAgIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQ9e2F1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWR9XG4gICAgICAgIGZldGNoQWNjZXNzVG9rZW49e2ZldGNoQWNjZXNzVG9rZW59XG4gICAgICAgIGF1dGhQcm92aWRlckxvYWRpbmc9e2F1dGhQcm92aWRlckxvYWRpbmd9XG4gICAgICAgIGNsaWVudD17Y2xpZW50fVxuICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQ9e3NldElzQ29udmV4QXV0aGVudGljYXRlZH1cbiAgICAgIC8+XG4gICAgPC9Db252ZXhBdXRoQ29udGV4dC5Qcm92aWRlcj5cbiAgKTtcbn1cblxuLy8gRmlyc3QgY2hpbGQgZW5zdXJlcyB3ZSBgc2V0QXV0aGAgYmVmb3JlXG4vLyBvdGhlciBjaGlsZCBjb21wb25lbnRzIHN1YnNjcmliZSB0byBxdWVyaWVzIHZpYSBgdXNlRWZmZWN0YC5cbmZ1bmN0aW9uIENvbnZleEF1dGhTdGF0ZUZpcnN0RWZmZWN0KHtcbiAgYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCxcbiAgZmV0Y2hBY2Nlc3NUb2tlbixcbiAgYXV0aFByb3ZpZGVyTG9hZGluZyxcbiAgY2xpZW50LFxuICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQsXG59OiB7XG4gIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XG4gIGZldGNoQWNjZXNzVG9rZW46IChhcmdzOiB7XG4gICAgZm9yY2VSZWZyZXNoVG9rZW46IGJvb2xlYW47XG4gIH0pID0+IFByb21pc2U8c3RyaW5nIHwgbnVsbD47XG4gIGF1dGhQcm92aWRlckxvYWRpbmc6IGJvb2xlYW47XG4gIGNsaWVudDogSUNvbnZleFJlYWN0Q2xpZW50O1xuICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQ6IFJlYWN0LkRpc3BhdGNoPFxuICAgIFJlYWN0LlNldFN0YXRlQWN0aW9uPGJvb2xlYW4gfCBudWxsPlxuICA+O1xufSkge1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc1RoaXNFZmZlY3RSZWxldmFudCA9IHRydWU7XG4gICAgaWYgKGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIGNsaWVudC5zZXRBdXRoKGZldGNoQWNjZXNzVG9rZW4sIChiYWNrZW5kUmVwb3J0c0lzQXV0aGVudGljYXRlZCkgPT4ge1xuICAgICAgICBpZiAoaXNUaGlzRWZmZWN0UmVsZXZhbnQpIHtcbiAgICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQoKCkgPT4gYmFja2VuZFJlcG9ydHNJc0F1dGhlbnRpY2F0ZWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlzVGhpc0VmZmVjdFJlbGV2YW50ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSWYgdW5tb3VudGluZyBvciBzb21ldGhpbmcgY2hhbmdlZCBiZWZvcmUgd2UgZmluaXNoZWQgZmV0Y2hpbmcgdGhlIHRva2VuXG4gICAgICAgIC8vIHdlIHNob3VsZG4ndCB0cmFuc2l0aW9uIHRvIGEgbG9hZGVkIHN0YXRlLlxuICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQoKGlzQ29udmV4QXV0aGVudGljYXRlZCkgPT5cbiAgICAgICAgICBpc0NvbnZleEF1dGhlbnRpY2F0ZWQgPyBmYWxzZSA6IG51bGwsXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW1xuICAgIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQsXG4gICAgZmV0Y2hBY2Nlc3NUb2tlbixcbiAgICBhdXRoUHJvdmlkZXJMb2FkaW5nLFxuICAgIGNsaWVudCxcbiAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQsXG4gIF0pO1xuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gTGFzdCBjaGlsZCBlbnN1cmVzIHdlIGBjbGVhckF1dGhgIGxhc3QsXG4vLyBzbyB0aGF0IHF1ZXJpZXMgZnJvbSB1bm1vdW50ZWQgc2libGluZyBjb21wb25lbnRzXG4vLyB1bnN1YnNjcmliZSBmaXJzdCBhbmQgZG9uJ3QgcmVydW4gd2l0aG91dCBhdXRoIG9uIHRoZSBzZXJ2ZXJcbmZ1bmN0aW9uIENvbnZleEF1dGhTdGF0ZUxhc3RFZmZlY3Qoe1xuICBhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkLFxuICBmZXRjaEFjY2Vzc1Rva2VuLFxuICBhdXRoUHJvdmlkZXJMb2FkaW5nLFxuICBjbGllbnQsXG4gIHNldElzQ29udmV4QXV0aGVudGljYXRlZCxcbn06IHtcbiAgYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZDogYm9vbGVhbjtcbiAgZmV0Y2hBY2Nlc3NUb2tlbjogKGFyZ3M6IHtcbiAgICBmb3JjZVJlZnJlc2hUb2tlbjogYm9vbGVhbjtcbiAgfSkgPT4gUHJvbWlzZTxzdHJpbmcgfCBudWxsPjtcbiAgYXV0aFByb3ZpZGVyTG9hZGluZzogYm9vbGVhbjtcbiAgY2xpZW50OiBJQ29udmV4UmVhY3RDbGllbnQ7XG4gIHNldElzQ29udmV4QXV0aGVudGljYXRlZDogUmVhY3QuRGlzcGF0Y2g8XG4gICAgUmVhY3QuU2V0U3RhdGVBY3Rpb248Ym9vbGVhbiB8IG51bGw+XG4gID47XG59KSB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSWYgcmVuZGVyZWQgd2l0aCBhdXRoUHJvdmlkZXJBdXRoZW50aWNhdGVkPXRydWUgdGhlbiBjbGVhciB0aGF0IGF1dGggb24gaW4gY2xlYW51cC5cbiAgICBpZiAoYXV0aFByb3ZpZGVyQXV0aGVudGljYXRlZCkge1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgY2xpZW50LmNsZWFyQXV0aCgpO1xuICAgICAgICAvLyBTZXQgc3RhdGUgYmFjayB0byBsb2FkaW5nIGluIGNhc2UgdGhpcyBpcyBhIHRyYW5zaXRpb24gZnJvbSBvbmVcbiAgICAgICAgLy8gZmV0Y2hUb2tlbiBmdW5jdGlvbiB0byBhbm90aGVyIHdoaWNoIHNpZ25hbHMgYSBuZXcgYXV0aCBjb250ZXh0LFxuICAgICAgICAvLyBlLmcuIGEgbmV3IG9yZ0lkIGZyb20gQ2xlcmsuIEF1dGggY29udGV4dCBjaGFuZ2VzIGxpa2UgdGhpc1xuICAgICAgICAvLyByZXR1cm4gaXNBdXRoZW50aWNhdGVkOiB0cnVlIGZyb20gdXNlQXV0aCgpIGJ1dCBpZlxuICAgICAgICAvLyB1c2VBdXRoIHJlcG9ydHMgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSBvbiB0aGUgbmV4dCByZW5kZXJcbiAgICAgICAgLy8gdGhlbiB0aGlzIG51bGwgdmFsdWUgd2lsbCBiZSBvdmVycmlkZGVuIHRvIGZhbHNlLlxuICAgICAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQoKCkgPT4gbnVsbCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW1xuICAgIGF1dGhQcm92aWRlckF1dGhlbnRpY2F0ZWQsXG4gICAgZmV0Y2hBY2Nlc3NUb2tlbixcbiAgICBhdXRoUHJvdmlkZXJMb2FkaW5nLFxuICAgIGNsaWVudCxcbiAgICBzZXRJc0NvbnZleEF1dGhlbnRpY2F0ZWQsXG4gIF0pO1xuICByZXR1cm4gbnVsbDtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/auth_helpers.js":
/*!************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/auth_helpers.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthLoading: () => (/* binding */ AuthLoading),\n/* harmony export */   Authenticated: () => (/* binding */ Authenticated),\n/* harmony export */   Unauthenticated: () => (/* binding */ Unauthenticated)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ConvexAuthState.js */ \"(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\");\n\n\n\nfunction Authenticated({ children }) {\n    const { isLoading, isAuthenticated } = (0,_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.useConvexAuth)();\n    if (isLoading || !isAuthenticated) {\n        return null;\n    }\n    return /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, children);\n}\nfunction Unauthenticated({ children }) {\n    const { isLoading, isAuthenticated } = (0,_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.useConvexAuth)();\n    if (isLoading || isAuthenticated) {\n        return null;\n    }\n    return /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, children);\n}\nfunction AuthLoading({ children }) {\n    const { isLoading } = (0,_ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_1__.useConvexAuth)();\n    if (!isLoading) {\n        return null;\n    }\n    return /* @__PURE__ */ /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null, children);\n} //# sourceMappingURL=auth_helpers.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2F1dGhfaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0I7QUFFWTtBQU92QixTQUFTLGNBQWMsRUFBRSxTQUFTLEdBQTRCO0lBQ25FLE1BQU0sRUFBRSxXQUFXLGdCQUFnQixJQUFJLGtFQUFhLENBQUM7SUFDckQsSUFBSSxhQUFhLENBQUMsaUJBQWlCO1FBQ2pDLE9BQU87SUFDVDtJQUNBLE9BQU8sa0lBQUcsUUFBUztBQUNyQjtBQU9PLFNBQVMsZ0JBQWdCLEVBQUUsU0FBUyxHQUE0QjtJQUNyRSxNQUFNLEVBQUUsV0FBVyxnQkFBZ0IsSUFBSSxrRUFBYSxDQUFDO0lBQ3JELElBQUksYUFBYSxpQkFBaUI7UUFDaEMsT0FBTztJQUNUO0lBQ0EsT0FBTyxrSUFBRyxRQUFTO0FBQ3JCO0FBUU8sU0FBUyxZQUFZLEVBQUUsU0FBUyxHQUE0QjtJQUNqRSxNQUFNLEVBQUUsVUFBVSxJQUFJLGtFQUFhLENBQUM7SUFDcEMsSUFBSSxDQUFDLFdBQVc7UUFDZCxPQUFPO0lBQ1Q7SUFDQSxPQUFPLGtJQUFHLFFBQVM7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvcmVhY3QvYXV0aF9oZWxwZXJzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBSZWFjdE5vZGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUNvbnZleEF1dGggfSBmcm9tIFwiLi9Db252ZXhBdXRoU3RhdGUuanNcIjtcblxuLyoqXG4gKiBSZW5kZXJzIGNoaWxkcmVuIGlmIHRoZSBjbGllbnQgaXMgYXV0aGVudGljYXRlZC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBBdXRoZW50aWNhdGVkKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcbiAgY29uc3QgeyBpc0xvYWRpbmcsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQ29udmV4QXV0aCgpO1xuICBpZiAoaXNMb2FkaW5nIHx8ICFpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gPD57Y2hpbGRyZW59PC8+O1xufVxuXG4vKipcbiAqIFJlbmRlcnMgY2hpbGRyZW4gaWYgdGhlIGNsaWVudCBpcyB1c2luZyBhdXRoZW50aWNhdGlvbiBidXQgaXMgbm90IGF1dGhlbnRpY2F0ZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gVW5hdXRoZW50aWNhdGVkKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3ROb2RlIH0pIHtcbiAgY29uc3QgeyBpc0xvYWRpbmcsIGlzQXV0aGVudGljYXRlZCB9ID0gdXNlQ29udmV4QXV0aCgpO1xuICBpZiAoaXNMb2FkaW5nIHx8IGlzQXV0aGVudGljYXRlZCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiA8PntjaGlsZHJlbn08Lz47XG59XG5cbi8qKlxuICogUmVuZGVycyBjaGlsZHJlbiBpZiB0aGUgY2xpZW50IGlzbid0IHVzaW5nIGF1dGhlbnRpY2F0aW9uIG9yIGlzIGluIHRoZSBwcm9jZXNzXG4gKiBvZiBhdXRoZW50aWNhdGluZy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBBdXRoTG9hZGluZyh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9KSB7XG4gIGNvbnN0IHsgaXNMb2FkaW5nIH0gPSB1c2VDb252ZXhBdXRoKCk7XG4gIGlmICghaXNMb2FkaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIDw+e2NoaWxkcmVufTwvPjtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/auth_helpers.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/client.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/client.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexProvider: () => (/* binding */ ConvexProvider),\n/* harmony export */   ConvexReactClient: () => (/* binding */ ConvexReactClient),\n/* harmony export */   createMutation: () => (/* binding */ createMutation),\n/* harmony export */   useAction: () => (/* binding */ useAction),\n/* harmony export */   useConvex: () => (/* binding */ useConvex),\n/* harmony export */   useConvexConnectionState: () => (/* binding */ useConvexConnectionState),\n/* harmony export */   useMutation: () => (/* binding */ useMutation),\n/* harmony export */   useQuery: () => (/* binding */ useQuery)\n/* harmony export */ });\n/* harmony import */ var _browser_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../browser/index.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _use_subscription_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./use_subscription.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _browser_logging_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../browser/logging.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/logging.js\");\n/* harmony import */ var _browser_sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../browser/sync/paginated_query_client.js */ \"(ssr)/./node_modules/convex/dist/esm/browser/sync/paginated_query_client.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\n\n\n\n\nconst DEFAULT_EXTEND_SUBSCRIPTION_FOR = 5e3;\nif (typeof react__WEBPACK_IMPORTED_MODULE_1__ === \"undefined\") {\n    throw new Error(\"Required dependency 'react' not found\");\n}\nfunction createMutation(mutationReference, client, update) {\n    function mutation(args) {\n        assertNotAccidentalArgument(args);\n        return client.mutation(mutationReference, args, {\n            optimisticUpdate: update\n        });\n    }\n    mutation.withOptimisticUpdate = function withOptimisticUpdate(optimisticUpdate) {\n        if (update !== void 0) {\n            throw new Error(`Already specified optimistic update for mutation ${(0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(mutationReference)}`);\n        }\n        return createMutation(mutationReference, client, optimisticUpdate);\n    };\n    return mutation;\n}\nfunction createAction(actionReference, client) {\n    return function(args) {\n        return client.action(actionReference, args);\n    };\n}\nclass ConvexReactClient {\n    /**\n   * @param address - The url of your Convex deployment, often provided\n   * by an environment variable. E.g. `https://small-mouse-123.convex.cloud`.\n   * @param options - See {@link ConvexReactClientOptions} for a full description.\n   */ constructor(address, options){\n        __publicField(this, \"address\");\n        __publicField(this, \"cachedSync\");\n        __publicField(this, \"cachedPaginatedQueryClient\");\n        __publicField(this, \"listeners\");\n        __publicField(this, \"options\");\n        // \"closed\" means this client is done, not just that the underlying WS connection is closed.\n        __publicField(this, \"closed\", false);\n        __publicField(this, \"_logger\");\n        __publicField(this, \"adminAuth\");\n        __publicField(this, \"fakeUserIdentity\");\n        if (address === void 0) {\n            throw new Error(\"No address provided to ConvexReactClient.\\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.\");\n        }\n        if (typeof address !== \"string\") {\n            throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof address} instead.`);\n        }\n        if (!address.includes(\"://\")) {\n            throw new Error(\"Provided address was not an absolute URL.\");\n        }\n        this.address = address;\n        this.listeners = /* @__PURE__ */ new Map();\n        this._logger = options?.logger === false ? (0,_browser_logging_js__WEBPACK_IMPORTED_MODULE_7__.instantiateNoopLogger)({\n            verbose: options?.verbose ?? false\n        }) : options?.logger !== true && options?.logger ? options.logger : (0,_browser_logging_js__WEBPACK_IMPORTED_MODULE_7__.instantiateDefaultLogger)({\n            verbose: options?.verbose ?? false\n        });\n        this.options = {\n            ...options,\n            logger: this._logger\n        };\n    }\n    /**\n   * Return the address for this client, useful for creating a new client.\n   *\n   * Not guaranteed to match the address with which this client was constructed:\n   * it may be canonicalized.\n   */ get url() {\n        return this.address;\n    }\n    /**\n   * Lazily instantiate the `BaseConvexClient` so we don't create the WebSocket\n   * when server-side rendering.\n   *\n   * @internal\n   */ get sync() {\n        if (this.closed) {\n            throw new Error(\"ConvexReactClient has already been closed.\");\n        }\n        if (this.cachedSync) {\n            return this.cachedSync;\n        }\n        this.cachedSync = new _browser_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseConvexClient(this.address, ()=>{}, // Use the PaginatedQueryClient's transition instead.\n        this.options);\n        if (this.adminAuth) {\n            this.cachedSync.setAdminAuth(this.adminAuth, this.fakeUserIdentity);\n        }\n        this.cachedPaginatedQueryClient = new _browser_sync_paginated_query_client_js__WEBPACK_IMPORTED_MODULE_8__.PaginatedQueryClient(this.cachedSync, (transition)=>this.handleTransition(transition));\n        return this.cachedSync;\n    }\n    /**\n   * Lazily instantiate the `PaginatedQueryClient` so we don't create it\n   * when server-side rendering.\n   *\n   * @internal\n   */ get paginatedQueryClient() {\n        this.sync;\n        if (this.cachedPaginatedQueryClient) {\n            return this.cachedPaginatedQueryClient;\n        }\n        throw new Error(\"Should already be instantiated\");\n    }\n    /**\n   * Set the authentication token to be used for subsequent queries and mutations.\n   * `fetchToken` will be called automatically again if a token expires.\n   * `fetchToken` should return `null` if the token cannot be retrieved, for example\n   * when the user's rights were permanently revoked.\n   * @param fetchToken - an async function returning the JWT-encoded OpenID Connect Identity Token\n   * @param onChange - a callback that will be called when the authentication status changes\n   */ setAuth(fetchToken, onChange) {\n        if (typeof fetchToken === \"string\") {\n            throw new Error(\"Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.\");\n        }\n        this.sync.setAuth(fetchToken, onChange ?? (()=>{}));\n    }\n    /**\n   * Clear the current authentication token if set.\n   */ clearAuth() {\n        this.sync.clearAuth();\n    }\n    /**\n   * @internal\n   */ setAdminAuth(token, identity) {\n        this.adminAuth = token;\n        this.fakeUserIdentity = identity;\n        if (this.closed) {\n            throw new Error(\"ConvexReactClient has already been closed.\");\n        }\n        if (this.cachedSync) {\n            this.sync.setAdminAuth(token, identity);\n        }\n    }\n    /**\n   * Construct a new {@link Watch} on a Convex query function.\n   *\n   * **Most application code should not call this method directly. Instead use\n   * the {@link useQuery} hook.**\n   *\n   * The act of creating a watch does nothing, a Watch is stateless.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - An arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - A {@link WatchQueryOptions} options object for this query.\n   *\n   * @returns The {@link Watch} object.\n   */ watchQuery(query, ...argsAndOptions) {\n        const [args, options] = argsAndOptions;\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(query);\n        return {\n            onUpdate: (callback)=>{\n                const { queryToken, unsubscribe } = this.sync.subscribe(name, args, options);\n                const currentListeners = this.listeners.get(queryToken);\n                if (currentListeners !== void 0) {\n                    currentListeners.add(callback);\n                } else {\n                    this.listeners.set(queryToken, /* @__PURE__ */ new Set([\n                        callback\n                    ]));\n                }\n                return ()=>{\n                    if (this.closed) {\n                        return;\n                    }\n                    const currentListeners2 = this.listeners.get(queryToken);\n                    currentListeners2.delete(callback);\n                    if (currentListeners2.size === 0) {\n                        this.listeners.delete(queryToken);\n                    }\n                    unsubscribe();\n                };\n            },\n            localQueryResult: ()=>{\n                if (this.cachedSync) {\n                    return this.cachedSync.localQueryResult(name, args);\n                }\n                return void 0;\n            },\n            localQueryLogs: ()=>{\n                if (this.cachedSync) {\n                    return this.cachedSync.localQueryLogs(name, args);\n                }\n                return void 0;\n            },\n            journal: ()=>{\n                if (this.cachedSync) {\n                    return this.cachedSync.queryJournal(name, args);\n                }\n                return void 0;\n            }\n        };\n    }\n    // Let's try out a queryOptions-style API.\n    // This method is similar to the React Query API `queryClient.prefetchQuery()`.\n    // In the future an ensureQueryData(): Promise<Data> method could exist.\n    /**\n   * Indicates likely future interest in a query subscription.\n   *\n   * The implementation currently immediately subscribes to a query. In the future this method\n   * may prioritize some queries over others, fetch the query result without subscribing, or\n   * do nothing in slow network connections or high load scenarios.\n   *\n   * To use this in a React component, call useQuery() and ignore the return value.\n   *\n   * @param queryOptions - A query (function reference from an api object) and its args, plus\n   * an optional extendSubscriptionFor for how long to subscribe to the query.\n   */ prewarmQuery(queryOptions) {\n        const extendSubscriptionFor = queryOptions.extendSubscriptionFor ?? DEFAULT_EXTEND_SUBSCRIPTION_FOR;\n        const watch = this.watchQuery(queryOptions.query, queryOptions.args || {});\n        const unsubscribe = watch.onUpdate(()=>{});\n        setTimeout(unsubscribe, extendSubscriptionFor);\n    }\n    /**\n   * Construct a new {@link PaginatedWatch} on a Convex paginated query function.\n   *\n   * **Most application code should not call this method directly. Instead use\n   * the {@link usePaginatedQuery} hook.**\n   *\n   * The act of creating a watch does nothing, a Watch is stateless.\n   *\n   * @param query - A {@link server.FunctionReference} for the public query to run.\n   * @param args - An arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - A {@link WatchPaginatedQueryOptions} options object for this query.\n   *\n   * @returns The {@link PaginatedWatch} object.\n   *\n   * @internal\n   */ watchPaginatedQuery(query, args, options) {\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(query);\n        return {\n            onUpdate: (callback)=>{\n                const { paginatedQueryToken, unsubscribe } = this.paginatedQueryClient.subscribe(name, args || {}, options);\n                const currentListeners = this.listeners.get(paginatedQueryToken);\n                if (currentListeners !== void 0) {\n                    currentListeners.add(callback);\n                } else {\n                    this.listeners.set(paginatedQueryToken, /* @__PURE__ */ new Set([\n                        callback\n                    ]));\n                }\n                return ()=>{\n                    if (this.closed) {\n                        return;\n                    }\n                    const currentListeners2 = this.listeners.get(paginatedQueryToken);\n                    currentListeners2.delete(callback);\n                    if (currentListeners2.size === 0) {\n                        this.listeners.delete(paginatedQueryToken);\n                    }\n                    unsubscribe();\n                };\n            },\n            localQueryResult: ()=>{\n                return this.paginatedQueryClient.localQueryResult(name, args, options);\n            }\n        };\n    }\n    /**\n   * Execute a mutation function.\n   *\n   * @param mutation - A {@link server.FunctionReference} for the public mutation\n   * to run.\n   * @param args - An arguments object for the mutation. If this is omitted,\n   * the arguments will be `{}`.\n   * @param options - A {@link MutationOptions} options object for the mutation.\n   * @returns A promise of the mutation's result.\n   */ mutation(mutation, ...argsAndOptions) {\n        const [args, options] = argsAndOptions;\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(mutation);\n        return this.sync.mutation(name, args, options);\n    }\n    /**\n   * Execute an action function.\n   *\n   * @param action - A {@link server.FunctionReference} for the public action\n   * to run.\n   * @param args - An arguments object for the action. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the action's result.\n   */ action(action, ...args) {\n        const name = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(action);\n        return this.sync.action(name, ...args);\n    }\n    /**\n   * Fetch a query result once.\n   *\n   * **Most application code should subscribe to queries instead, using\n   * the {@link useQuery} hook.**\n   *\n   * @param query - A {@link server.FunctionReference} for the public query\n   * to run.\n   * @param args - An arguments object for the query. If this is omitted,\n   * the arguments will be `{}`.\n   * @returns A promise of the query's result.\n   */ query(query, ...args) {\n        const watch = this.watchQuery(query, ...args);\n        const existingResult = watch.localQueryResult();\n        if (existingResult !== void 0) {\n            return Promise.resolve(existingResult);\n        }\n        return new Promise((resolve, reject)=>{\n            const unsubscribe = watch.onUpdate(()=>{\n                unsubscribe();\n                try {\n                    resolve(watch.localQueryResult());\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    /**\n   * Get the current {@link ConnectionState} between the client and the Convex\n   * backend.\n   *\n   * @returns The {@link ConnectionState} with the Convex backend.\n   */ connectionState() {\n        return this.sync.connectionState();\n    }\n    /**\n   * Subscribe to the {@link ConnectionState} between the client and the Convex\n   * backend, calling a callback each time it changes.\n   *\n   * Subscribed callbacks will be called when any part of ConnectionState changes.\n   * ConnectionState may grow in future versions (e.g. to provide a array of\n   * inflight requests) in which case callbacks would be called more frequently.\n   * ConnectionState may also *lose* properties in future versions as we figure\n   * out what information is most useful. As such this API is considered unstable.\n   *\n   * @returns An unsubscribe function to stop listening.\n   */ subscribeToConnectionState(cb) {\n        return this.sync.subscribeToConnectionState(cb);\n    }\n    /**\n   * Get the logger for this client.\n   *\n   * @returns The {@link Logger} for this client.\n   */ get logger() {\n        return this._logger;\n    }\n    /**\n   * Close any network handles associated with this client and stop all subscriptions.\n   *\n   * Call this method when you're done with a {@link ConvexReactClient} to\n   * dispose of its sockets and resources.\n   *\n   * @returns A `Promise` fulfilled when the connection has been completely closed.\n   */ async close() {\n        this.closed = true;\n        this.listeners = /* @__PURE__ */ new Map();\n        if (this.cachedPaginatedQueryClient) {\n            this.cachedPaginatedQueryClient = void 0;\n        }\n        if (this.cachedSync) {\n            const sync = this.cachedSync;\n            this.cachedSync = void 0;\n            await sync.close();\n        }\n    }\n    /**\n   * Handle transitions from both base client and paginated client.\n   * This ensures all transitions are processed synchronously and in order.\n   */ handleTransition(transition) {\n        const simple = transition.queries.map((q)=>q.token);\n        const paginated = transition.paginatedQueries.map((q)=>q.token);\n        this.transition([\n            ...simple,\n            ...paginated\n        ]);\n    }\n    transition(updatedQueries) {\n        for (const queryToken of updatedQueries){\n            const callbacks = this.listeners.get(queryToken);\n            if (callbacks) {\n                for (const callback of callbacks){\n                    callback();\n                }\n            }\n        }\n    }\n}\nconst ConvexContext = /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createContext(void 0);\nfunction useConvex() {\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n}\nconst ConvexProvider = ({ client, children })=>{\n    return /*#__PURE__*/ react__WEBPACK_IMPORTED_MODULE_1__.createElement(ConvexContext.Provider, {\n        value: client\n    }, children);\n};\nfunction useQuery(query, ...args) {\n    const skip = args[0] === \"skip\";\n    const argsObject = args[0] === \"skip\" ? {} : (0,_common_index_js__WEBPACK_IMPORTED_MODULE_5__.parseArgs)(args[0]);\n    const queryReference = typeof query === \"string\" ? (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.makeFunctionReference)(query) : query;\n    const queryName = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(queryReference);\n    const queries = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useQuery.useMemo[queries]\": ()=>skip ? {} : {\n                query: {\n                    query: queryReference,\n                    args: argsObject\n                }\n            }\n    }[\"useQuery.useMemo[queries]\"], // Stringify args so args that are semantically the same don't trigger a\n    // rerender. Saves developers from adding `useMemo` on every args usage.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(argsObject)),\n        queryName,\n        skip\n    ]);\n    const results = (0,_use_queries_js__WEBPACK_IMPORTED_MODULE_3__.useQueries)(queries);\n    const result = results[\"query\"];\n    if (result instanceof Error) {\n        throw result;\n    }\n    return result;\n}\nfunction useMutation(mutation) {\n    const mutationReference = typeof mutation === \"string\" ? (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.makeFunctionReference)(mutation) : mutation;\n    const convex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n    if (convex === void 0) {\n        throw new Error(\"Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\");\n    }\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useMutation.useMemo\": ()=>createMutation(mutationReference, convex)\n    }[\"useMutation.useMemo\"], // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        convex,\n        (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(mutationReference)\n    ]);\n}\nfunction useAction(action) {\n    const convex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n    const actionReference = typeof action === \"string\" ? (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.makeFunctionReference)(action) : action;\n    if (convex === void 0) {\n        throw new Error(\"Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\");\n    }\n    return (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)({\n        \"useAction.useMemo\": ()=>createAction(actionReference, convex)\n    }[\"useAction.useMemo\"], // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        convex,\n        (0,_server_api_js__WEBPACK_IMPORTED_MODULE_6__.getFunctionName)(actionReference)\n    ]);\n}\nfunction useConvexConnectionState() {\n    const convex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ConvexContext);\n    if (convex === void 0) {\n        throw new Error(\"Could not find Convex client! `useConvexConnectionState` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\");\n    }\n    const getCurrentValue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useConvexConnectionState.useCallback[getCurrentValue]\": ()=>{\n            return convex.connectionState();\n        }\n    }[\"useConvexConnectionState.useCallback[getCurrentValue]\"], [\n        convex\n    ]);\n    const subscribe = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)({\n        \"useConvexConnectionState.useCallback[subscribe]\": (callback)=>{\n            return convex.subscribeToConnectionState({\n                \"useConvexConnectionState.useCallback[subscribe]\": ()=>{\n                    callback();\n                }\n            }[\"useConvexConnectionState.useCallback[subscribe]\"]);\n        }\n    }[\"useConvexConnectionState.useCallback[subscribe]\"], [\n        convex\n    ]);\n    return (0,_use_subscription_js__WEBPACK_IMPORTED_MODULE_4__.useSubscription)({\n        getCurrentValue,\n        subscribe\n    });\n}\nfunction assertNotAccidentalArgument(value) {\n    if (typeof value === \"object\" && value !== null && \"bubbles\" in value && \"persist\" in value && \"isDefaultPrevented\" in value) {\n        throw new Error(`Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like \\`const handler = () => myMutation();\\` and using \\`handler\\` in the event handler.`);\n    }\n} //# sourceMappingURL=client.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2NsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFpQztBQU91QjtBQUNwQjtBQVFVO0FBQ2Q7QUFDTjtBQVNuQjtBQU1BO0FBTUE7QUFJUCxNQUFNLGtDQUFrQztBQUV4QyxJQUFJLE9BQU8sa0NBQUssS0FBSyxhQUFhO0lBQ2hDLE1BQU0sSUFBSSxNQUFNLHVDQUF1QztBQUN6RDtBQWdETyxTQUFTLGVBQ2QsbUJBQ0EsUUFDQSxRQUNvQjtJQUNwQixTQUFTLFNBQVMsTUFBZ0Q7UUFDaEUsNEJBQTRCLElBQUk7UUFFaEMsT0FBTyxPQUFPLFNBQVMsbUJBQW1CLE1BQU07WUFDOUMsa0JBQWtCO1FBQ3BCLENBQUM7SUFDSDtJQUNBLFNBQVMsdUJBQXVCLFNBQVMscUJBQ3ZDLGtCQUNvQjtRQUNwQixJQUFJLFdBQVcsUUFBVztZQUN4QixNQUFNLElBQUksTUFDUixvREFBb0QsK0RBQWUsQ0FDakUsb0JBQ0Q7UUFFTDtRQUNBLE9BQU8sZUFBZSxtQkFBbUIsUUFBUSxnQkFBZ0I7SUFDbkU7SUFDQSxPQUFPO0FBQ1Q7QUFrQkEsU0FBUyxhQUNQLGlCQUNBLFFBQ2tCO0lBQ2xCLE9BQU8sU0FBVSxNQUFnRDtRQUMvRCxPQUFPLE9BQU8sT0FBTyxpQkFBaUIsSUFBSTtJQUM1QztBQUNGO0FBeUpPLE1BQU0sa0JBQWtCO0lBQUE7Ozs7R0FBQSxHQWtCN0IsWUFBWSxTQUFpQixRQUFvQztRQWpCakUsb0JBQVE7UUFDUixvQkFBUTtRQUNSLG9CQUFRO1FBQ1Isb0JBQVE7UUFDUixvQkFBUTtRQUVSO1FBQUEsb0JBQVEsVUFBUztRQUNqQixvQkFBUTtRQUVSLG9CQUFRO1FBQ1Isb0JBQVE7UUFVTixJQUFJLFlBQVksUUFBVztZQUN6QixNQUFNLElBQUksTUFDUjtRQUlKO1FBQ0EsSUFBSSxPQUFPLFlBQVksVUFBVTtZQUMvQixNQUFNLElBQUksTUFDUiw0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O0FBa0JPLFNBQVMsMkJBQTRDO0lBQzFELE1BQU0sU0FBUyxpREFBVSxDQUFDLGFBQWE7SUFDdkMsSUFBSSxXQUFXLFFBQVc7UUFDeEIsTUFBTSxJQUFJLE1BQ1I7SUFJSjtJQUVBLE1BQU0sa0JBQWtCLGtEQUFXO2lFQUFDO1lBQ2xDLE9BQU8sT0FBTyxnQkFBZ0I7UUFDaEM7Z0VBQUc7UUFBQyxNQUFNO0tBQUM7SUFFWCxNQUFNLFlBQVksa0RBQVc7MkRBQzNCLENBQUM7WUFDQyxPQUFPLE9BQU87bUVBQTJCO29CQUN2QyxTQUFTO2dCQUNYLENBQUM7O1FBQ0g7MERBQ0E7UUFBQyxNQUFNO0tBQUE7SUFHVCxPQUFPLHFFQUFlLENBQUM7UUFBRTtRQUFpQjtJQUFVLENBQUM7QUFDdkQ7QUFJQSxTQUFTLDRCQUE0QixPQUFZO0lBRy9DLElBQ0UsT0FBTyxVQUFVLFlBQ2pCLFVBQVUsUUFDVixhQUFhLFNBQ2IsYUFBYSxTQUNiLHdCQUF3QixPQUN4QjtRQUNBLE1BQU0sSUFBSSxNQUNSO0lBRUo7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9yZWFjdC9jbGllbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUNvbnZleENsaWVudCB9IGZyb20gXCIuLi9icm93c2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgdHlwZSB7XG4gIE9wdGltaXN0aWNVcGRhdGUsXG4gIFBhZ2luYXRlZFF1ZXJ5VG9rZW4sXG4gIFF1ZXJ5VG9rZW4sXG4gIFBhZ2luYXRpb25TdGF0dXMsXG59IGZyb20gXCIuLi9icm93c2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ2FsbGJhY2ssIHVzZUNvbnRleHQsIHVzZU1lbW8gfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiwgVmFsdWUgfSBmcm9tIFwiLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBRdWVyeUpvdXJuYWwgfSBmcm9tIFwiLi4vYnJvd3Nlci9zeW5jL3Byb3RvY29sLmpzXCI7XG5pbXBvcnQge1xuICBBdXRoVG9rZW5GZXRjaGVyLFxuICBCYXNlQ29udmV4Q2xpZW50T3B0aW9ucyxcbiAgQ29ubmVjdGlvblN0YXRlLFxufSBmcm9tIFwiLi4vYnJvd3Nlci9zeW5jL2NsaWVudC5qc1wiO1xuaW1wb3J0IHR5cGUgeyBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzIH0gZnJvbSBcIi4uL2Jyb3dzZXIvc3luYy9wcm90b2NvbC5qc1wiO1xuaW1wb3J0IHsgUmVxdWVzdEZvclF1ZXJpZXMsIHVzZVF1ZXJpZXMgfSBmcm9tIFwiLi91c2VfcXVlcmllcy5qc1wiO1xuaW1wb3J0IHsgdXNlU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4vdXNlX3N1YnNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VBcmdzIH0gZnJvbSBcIi4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgQXJnc0FuZE9wdGlvbnMsXG4gIEZ1bmN0aW9uQXJncyxcbiAgRnVuY3Rpb25SZWZlcmVuY2UsXG4gIEZ1bmN0aW9uUmV0dXJuVHlwZSxcbiAgT3B0aW9uYWxSZXN0QXJncyxcbiAgZ2V0RnVuY3Rpb25OYW1lLFxuICBtYWtlRnVuY3Rpb25SZWZlcmVuY2UsXG59IGZyb20gXCIuLi9zZXJ2ZXIvYXBpLmpzXCI7XG5pbXBvcnQgeyBFbXB0eU9iamVjdCB9IGZyb20gXCIuLi9zZXJ2ZXIvcmVnaXN0cmF0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBpbnN0YW50aWF0ZURlZmF1bHRMb2dnZXIsXG4gIGluc3RhbnRpYXRlTm9vcExvZ2dlcixcbiAgTG9nZ2VyLFxufSBmcm9tIFwiLi4vYnJvd3Nlci9sb2dnaW5nLmpzXCI7XG5pbXBvcnQgeyBDb252ZXhRdWVyeU9wdGlvbnMgfSBmcm9tIFwiLi4vYnJvd3Nlci9xdWVyeV9vcHRpb25zLmpzXCI7XG5pbXBvcnQgeyBMb2FkTW9yZU9mUGFnaW5hdGVkUXVlcnkgfSBmcm9tIFwiLi4vYnJvd3Nlci9zeW5jL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIFBhZ2luYXRlZFF1ZXJ5Q2xpZW50LFxuICBFeHRlbmRlZFRyYW5zaXRpb24sXG59IGZyb20gXCIuLi9icm93c2VyL3N5bmMvcGFnaW5hdGVkX3F1ZXJ5X2NsaWVudC5qc1wiO1xuXG4vLyBXaGVuIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkLCBleHRlbmQgc3Vic2NyaXB0aW9ucyAoZm9yIEFQSXMgdGhhdCBkbyB0aGlzIGJ5IGRlZmF1bHQpXG4vLyBmb3IgdGhpcyBhbW91bnQgYWZ0ZXIgdGhlIHN1YnNjcmlwdGlvbiB3b3VsZCBvdGhlcndpc2UgYmUgZHJvcHBlZC5cbmNvbnN0IERFRkFVTFRfRVhURU5EX1NVQlNDUklQVElPTl9GT1IgPSA1XzAwMDtcblxuaWYgKHR5cGVvZiBSZWFjdCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJSZXF1aXJlZCBkZXBlbmRlbmN5ICdyZWFjdCcgbm90IGZvdW5kXCIpO1xufVxuXG4vLyBUT0RPIFR5cGVkb2MgZG9lc24ndCBnZW5lcmF0ZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgY29tbWVudCBiZWxvdyBwZXJoYXBzXG4vLyBiZWNhdXNlIGl0J3MgYSBjYWxsYWJsZSBpbnRlcmZhY2UuXG4vKipcbiAqIEFuIGludGVyZmFjZSB0byBleGVjdXRlIGEgQ29udmV4IG11dGF0aW9uIGZ1bmN0aW9uIG9uIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWN0TXV0YXRpb248TXV0YXRpb24gZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCI+PiB7XG4gIC8qKlxuICAgKiBFeGVjdXRlIHRoZSBtdXRhdGlvbiBvbiB0aGUgc2VydmVyLCByZXR1cm5pbmcgYSBgUHJvbWlzZWAgb2YgaXRzIHJldHVybiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIGFyZ3MgLSBBcmd1bWVudHMgZm9yIHRoZSBtdXRhdGlvbiB0byBwYXNzIHVwIHRvIHRoZSBzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHNlcnZlci1zaWRlIGZ1bmN0aW9uIGNhbGwuXG4gICAqL1xuICAoLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxNdXRhdGlvbj4pOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxNdXRhdGlvbj4+O1xuXG4gIC8qKlxuICAgKiBEZWZpbmUgYW4gb3B0aW1pc3RpYyB1cGRhdGUgdG8gYXBwbHkgYXMgcGFydCBvZiB0aGlzIG11dGF0aW9uLlxuICAgKlxuICAgKiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHVwZGF0ZSB0byB0aGUgbG9jYWwgcXVlcnkgcmVzdWx0cyB0byBmYWNpbGl0YXRlIGFcbiAgICogZmFzdCwgaW50ZXJhY3RpdmUgVUkuIEl0IGVuYWJsZXMgcXVlcnkgcmVzdWx0cyB0byB1cGRhdGUgYmVmb3JlIGEgbXV0YXRpb25cbiAgICogZXhlY3V0ZWQgb24gdGhlIHNlcnZlci5cbiAgICpcbiAgICogV2hlbiB0aGUgbXV0YXRpb24gaXMgaW52b2tlZCwgdGhlIG9wdGltaXN0aWMgdXBkYXRlIHdpbGwgYmUgYXBwbGllZC5cbiAgICpcbiAgICogT3B0aW1pc3RpYyB1cGRhdGVzIGNhbiBhbHNvIGJlIHVzZWQgdG8gdGVtcG9yYXJpbHkgcmVtb3ZlIHF1ZXJpZXMgZnJvbSB0aGVcbiAgICogY2xpZW50IGFuZCBjcmVhdGUgbG9hZGluZyBleHBlcmllbmNlcyB1bnRpbCBhIG11dGF0aW9uIGNvbXBsZXRlcyBhbmQgdGhlXG4gICAqIG5ldyBxdWVyeSByZXN1bHRzIGFyZSBzeW5jZWQuXG4gICAqXG4gICAqIFRoZSB1cGRhdGUgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IHJvbGxlZCBiYWNrIHdoZW4gdGhlIG11dGF0aW9uIGlzIGZ1bGx5XG4gICAqIGNvbXBsZXRlZCBhbmQgcXVlcmllcyBoYXZlIGJlZW4gdXBkYXRlZC5cbiAgICpcbiAgICogQHBhcmFtIG9wdGltaXN0aWNVcGRhdGUgLSBUaGUgb3B0aW1pc3RpYyB1cGRhdGUgdG8gYXBwbHkuXG4gICAqIEByZXR1cm5zIEEgbmV3IGBSZWFjdE11dGF0aW9uYCB3aXRoIHRoZSB1cGRhdGUgY29uZmlndXJlZC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgd2l0aE9wdGltaXN0aWNVcGRhdGU8VCBleHRlbmRzIE9wdGltaXN0aWNVcGRhdGU8RnVuY3Rpb25BcmdzPE11dGF0aW9uPj4+KFxuICAgIG9wdGltaXN0aWNVcGRhdGU6IFQgJlxuICAgICAgKFJldHVyblR5cGU8VD4gZXh0ZW5kcyBQcm9taXNlPGFueT5cbiAgICAgICAgPyBcIk9wdGltaXN0aWMgdXBkYXRlIGhhbmRsZXJzIG11c3QgYmUgc3luY2hyb25vdXNcIlxuICAgICAgICA6IHt9KSxcbiAgKTogUmVhY3RNdXRhdGlvbjxNdXRhdGlvbj47XG59XG5cbi8vIEV4cG9ydGVkIG9ubHkgZm9yIHRlc3RpbmcuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTXV0YXRpb24oXG4gIG11dGF0aW9uUmVmZXJlbmNlOiBGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCI+LFxuICBjbGllbnQ6IENvbnZleFJlYWN0Q2xpZW50LFxuICB1cGRhdGU/OiBPcHRpbWlzdGljVXBkYXRlPGFueT4sXG4pOiBSZWFjdE11dGF0aW9uPGFueT4ge1xuICBmdW5jdGlvbiBtdXRhdGlvbihhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+KTogUHJvbWlzZTx1bmtub3duPiB7XG4gICAgYXNzZXJ0Tm90QWNjaWRlbnRhbEFyZ3VtZW50KGFyZ3MpO1xuXG4gICAgcmV0dXJuIGNsaWVudC5tdXRhdGlvbihtdXRhdGlvblJlZmVyZW5jZSwgYXJncywge1xuICAgICAgb3B0aW1pc3RpY1VwZGF0ZTogdXBkYXRlLFxuICAgIH0pO1xuICB9XG4gIG11dGF0aW9uLndpdGhPcHRpbWlzdGljVXBkYXRlID0gZnVuY3Rpb24gd2l0aE9wdGltaXN0aWNVcGRhdGUoXG4gICAgb3B0aW1pc3RpY1VwZGF0ZTogT3B0aW1pc3RpY1VwZGF0ZTxhbnk+LFxuICApOiBSZWFjdE11dGF0aW9uPGFueT4ge1xuICAgIGlmICh1cGRhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQWxyZWFkeSBzcGVjaWZpZWQgb3B0aW1pc3RpYyB1cGRhdGUgZm9yIG11dGF0aW9uICR7Z2V0RnVuY3Rpb25OYW1lKFxuICAgICAgICAgIG11dGF0aW9uUmVmZXJlbmNlLFxuICAgICAgICApfWAsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlTXV0YXRpb24obXV0YXRpb25SZWZlcmVuY2UsIGNsaWVudCwgb3B0aW1pc3RpY1VwZGF0ZSk7XG4gIH07XG4gIHJldHVybiBtdXRhdGlvbiBhcyBSZWFjdE11dGF0aW9uPGFueT47XG59XG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIHRvIGV4ZWN1dGUgYSBDb252ZXggYWN0aW9uIG9uIHRoZSBzZXJ2ZXIuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlYWN0QWN0aW9uPEFjdGlvbiBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwiYWN0aW9uXCI+PiB7XG4gIC8qKlxuICAgKiBFeGVjdXRlIHRoZSBmdW5jdGlvbiBvbiB0aGUgc2VydmVyLCByZXR1cm5pbmcgYSBgUHJvbWlzZWAgb2YgaXRzIHJldHVybiB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIGFyZ3MgLSBBcmd1bWVudHMgZm9yIHRoZSBmdW5jdGlvbiB0byBwYXNzIHVwIHRvIHRoZSBzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIFRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIHNlcnZlci1zaWRlIGZ1bmN0aW9uIGNhbGwuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gICguLi5hcmdzOiBPcHRpb25hbFJlc3RBcmdzPEFjdGlvbj4pOiBQcm9taXNlPEZ1bmN0aW9uUmV0dXJuVHlwZTxBY3Rpb24+Pjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQWN0aW9uKFxuICBhY3Rpb25SZWZlcmVuY2U6IEZ1bmN0aW9uUmVmZXJlbmNlPFwiYWN0aW9uXCI+LFxuICBjbGllbnQ6IENvbnZleFJlYWN0Q2xpZW50LFxuKTogUmVhY3RBY3Rpb248YW55PiB7XG4gIHJldHVybiBmdW5jdGlvbiAoYXJncz86IFJlY29yZDxzdHJpbmcsIFZhbHVlPik6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiBjbGllbnQuYWN0aW9uKGFjdGlvblJlZmVyZW5jZSwgYXJncyk7XG4gIH0gYXMgUmVhY3RBY3Rpb248YW55Pjtcbn1cblxuLy8gV2F0Y2hlcyBzaG91bGQgYmUgc3RhdGVsZXNzOiBpbiBRdWVyaWVzT2JzZXJ2ZXIgd2UgY3JlYXRlIGEgd2F0Y2gganVzdCB0byBnZXRcbi8vIHRoZSBjdXJyZW50IHZhbHVlLlxuLyoqXG4gKiBBIHdhdGNoIG9uIHRoZSBvdXRwdXQgb2YgYSBDb252ZXggcXVlcnkgZnVuY3Rpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdhdGNoPFQ+IHtcbiAgLyoqXG4gICAqIEluaXRpYXRlIGEgd2F0Y2ggb24gdGhlIG91dHB1dCBvZiBhIHF1ZXJ5LlxuICAgKlxuICAgKiBUaGlzIHdpbGwgc3Vic2NyaWJlIHRvIHRoaXMgcXVlcnkgYW5kIGNhbGxcbiAgICogdGhlIGNhbGxiYWNrIHdoZW5ldmVyIHRoZSBxdWVyeSByZXN1bHQgY2hhbmdlcy5cbiAgICpcbiAgICogKipJbXBvcnRhbnQ6IElmIHRoZSBjbGllbnQgaXMgYWxyZWFkeSBzdWJzY3JpYmVkIHRvIHRoaXMgcXVlcnkgd2l0aCB0aGVcbiAgICogc2FtZSBhcmd1bWVudHMgdGhpcyBjYWxsYmFjayB3aWxsIG5vdCBiZSBpbnZva2VkIHVudGlsIHRoZSBxdWVyeSByZXN1bHQgaXNcbiAgICogdXBkYXRlZC4qKiBUbyBnZXQgdGhlIGN1cnJlbnQsIGxvY2FsIHJlc3VsdCBjYWxsXG4gICAqIHtAbGluayByZWFjdC5XYXRjaC5sb2NhbFF1ZXJ5UmVzdWx0fS5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbmV2ZXIgdGhlIHF1ZXJ5IHJlc3VsdCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyAtIEEgZnVuY3Rpb24gdGhhdCBkaXNwb3NlcyBvZiB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKi9cbiAgb25VcGRhdGUoY2FsbGJhY2s6ICgpID0+IHZvaWQpOiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVzdWx0IG9mIGEgcXVlcnkuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBvbmx5IHJldHVybiBhIHJlc3VsdCBpZiB3ZSdyZSBhbHJlYWR5IHN1YnNjcmliZWQgdG8gdGhlIHF1ZXJ5XG4gICAqIGFuZCBoYXZlIHJlY2VpdmVkIGEgcmVzdWx0IGZyb20gdGhlIHNlcnZlciBvciB0aGUgcXVlcnkgdmFsdWUgaGFzIGJlZW4gc2V0XG4gICAqIG9wdGltaXN0aWNhbGx5LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgcmVzdWx0IG9mIHRoZSBxdWVyeSBvciBgdW5kZWZpbmVkYCBpZiBpdCBpc24ndCBrbm93bi5cbiAgICogQHRocm93cyBBbiBlcnJvciBpZiB0aGUgcXVlcnkgZW5jb3VudGVyZWQgYW4gZXJyb3Igb24gdGhlIHNlcnZlci5cbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHQoKTogVCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBsb2NhbFF1ZXJ5TG9ncygpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHtAbGluayBicm93c2VyLlF1ZXJ5Sm91cm5hbH0gZm9yIHRoaXMgcXVlcnkuXG4gICAqXG4gICAqIElmIHdlIGhhdmUgbm90IHlldCByZWNlaXZlZCBhIHJlc3VsdCBmb3IgdGhpcyBxdWVyeSwgdGhpcyB3aWxsIGJlIGB1bmRlZmluZWRgLlxuICAgKi9cbiAgam91cm5hbCgpOiBRdWVyeUpvdXJuYWwgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQSB3YXRjaCBvbiB0aGUgb3V0cHV0IG9mIGEgcGFnaW5hdGVkIENvbnZleCBxdWVyeSBmdW5jdGlvbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5hdGVkV2F0Y2g8VD4ge1xuICAvKipcbiAgICogSW5pdGlhdGUgYSB3YXRjaCBvbiB0aGUgb3V0cHV0IG9mIGEgcGFnaW5hdGVkIHF1ZXJ5LlxuICAgKlxuICAgKiBUaGlzIHdpbGwgc3Vic2NyaWJlIHRvIHRoaXMgcXVlcnkgYW5kIGNhbGxcbiAgICogdGhlIGNhbGxiYWNrIHdoZW5ldmVyIHRoZSBxdWVyeSByZXN1bHQgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgd2hlbmV2ZXIgdGhlIHF1ZXJ5IHJlc3VsdCBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyAtIEEgZnVuY3Rpb24gdGhhdCBkaXNwb3NlcyBvZiB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKi9cbiAgb25VcGRhdGUoY2FsbGJhY2s6ICgpID0+IHZvaWQpOiAoKSA9PiB2b2lkO1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVzdWx0IG9mIGEgcGFnaW5hdGVkIHF1ZXJ5LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCByZXN1bHRzLCBzdGF0dXMsIGFuZCBsb2FkTW9yZSBmdW5jdGlvbiwgb3IgYHVuZGVmaW5lZGAgaWYgbm90IGxvYWRlZC5cbiAgICovXG4gIGxvY2FsUXVlcnlSZXN1bHQoKTpcbiAgICB8IHtcbiAgICAgICAgcmVzdWx0czogVFtdO1xuICAgICAgICBzdGF0dXM6IFBhZ2luYXRpb25TdGF0dXM7XG4gICAgICAgIGxvYWRNb3JlOiBMb2FkTW9yZU9mUGFnaW5hdGVkUXVlcnk7XG4gICAgICB9XG4gICAgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3Ige0BsaW5rIENvbnZleFJlYWN0Q2xpZW50LndhdGNoUXVlcnl9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXYXRjaFF1ZXJ5T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBbiAob3B0aW9uYWwpIGpvdXJuYWwgcHJvZHVjZWQgZnJvbSBhIHByZXZpb3VzIGV4ZWN1dGlvbiBvZiB0aGlzIHF1ZXJ5XG4gICAqIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBJZiB0aGVyZSBpcyBhbiBleGlzdGluZyBzdWJzY3JpcHRpb24gdG8gYSBxdWVyeSBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lXG4gICAqIG5hbWUgYW5kIGFyZ3VtZW50cywgdGhpcyBqb3VybmFsIHdpbGwgaGF2ZSBubyBlZmZlY3QuXG4gICAqL1xuICBqb3VybmFsPzogUXVlcnlKb3VybmFsO1xuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbXBvbmVudFBhdGg/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3Ige0BsaW5rIENvbnZleFJlYWN0Q2xpZW50LndhdGNoUGFnaW5hdGVkUXVlcnl9LlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFdhdGNoUGFnaW5hdGVkUXVlcnlPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBpbml0aWFsIG51bWJlciBvZiBpdGVtcyB0byBsb2FkLlxuICAgKi9cbiAgaW5pdGlhbE51bUl0ZW1zOiBudW1iZXI7XG5cbiAgLy8gV2UgbWF5IGJlIGFibGUgdG8gcmVtb3ZlIHRoaXMgaW4gdGhlIGZ1dHVyZSwgYnV0IHRvIHByZXNlcnZlIHRoZSBleGlzdGluZyBiZWhhdmlvciBvZlxuICAvLyB1c2VQYWdpbmF0ZWRRdWVyeSgpIGl0J3Mgc3RpbGwgaGVyZS5cbiAgaWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb21wb25lbnRQYXRoPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHtAbGluayBDb252ZXhSZWFjdENsaWVudC5tdXRhdGlvbn0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIE11dGF0aW9uT3B0aW9uczxBcmdzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgVmFsdWU+PiB7XG4gIC8qKlxuICAgKiBBbiBvcHRpbWlzdGljIHVwZGF0ZSB0byBhcHBseSBhbG9uZyB3aXRoIHRoaXMgbXV0YXRpb24uXG4gICAqXG4gICAqIEFuIG9wdGltaXN0aWMgdXBkYXRlIGxvY2FsbHkgdXBkYXRlcyBxdWVyaWVzIHdoaWxlIGEgbXV0YXRpb24gaXMgcGVuZGluZy5cbiAgICogT25jZSB0aGUgbXV0YXRpb24gY29tcGxldGVzLCB0aGUgdXBkYXRlIHdpbGwgYmUgcm9sbGVkIGJhY2suXG4gICAqL1xuICBvcHRpbWlzdGljVXBkYXRlPzogT3B0aW1pc3RpY1VwZGF0ZTxBcmdzPiB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgQ29udmV4UmVhY3RDbGllbnR9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb252ZXhSZWFjdENsaWVudE9wdGlvbnMgZXh0ZW5kcyBCYXNlQ29udmV4Q2xpZW50T3B0aW9ucyB7fVxuXG4vKipcbiAqIEEgQ29udmV4IGNsaWVudCBmb3IgdXNlIHdpdGhpbiBSZWFjdC5cbiAqXG4gKiBUaGlzIGxvYWRzIHJlYWN0aXZlIHF1ZXJpZXMgYW5kIGV4ZWN1dGVzIG11dGF0aW9ucyBvdmVyIGEgV2ViU29ja2V0LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnZleFJlYWN0Q2xpZW50IHtcbiAgcHJpdmF0ZSBhZGRyZXNzOiBzdHJpbmc7XG4gIHByaXZhdGUgY2FjaGVkU3luYz86IEJhc2VDb252ZXhDbGllbnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgY2FjaGVkUGFnaW5hdGVkUXVlcnlDbGllbnQ/OiBQYWdpbmF0ZWRRdWVyeUNsaWVudCB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBsaXN0ZW5lcnM6IE1hcDxRdWVyeVRva2VuIHwgUGFnaW5hdGVkUXVlcnlUb2tlbiwgU2V0PCgpID0+IHZvaWQ+PjtcbiAgcHJpdmF0ZSBvcHRpb25zOiBDb252ZXhSZWFjdENsaWVudE9wdGlvbnM7XG4gIC8vIFwiY2xvc2VkXCIgbWVhbnMgdGhpcyBjbGllbnQgaXMgZG9uZSwgbm90IGp1c3QgdGhhdCB0aGUgdW5kZXJseWluZyBXUyBjb25uZWN0aW9uIGlzIGNsb3NlZC5cbiAgcHJpdmF0ZSBjbG9zZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfbG9nZ2VyOiBMb2dnZXI7XG5cbiAgcHJpdmF0ZSBhZG1pbkF1dGg/OiBzdHJpbmc7XG4gIHByaXZhdGUgZmFrZVVzZXJJZGVudGl0eT86IFVzZXJJZGVudGl0eUF0dHJpYnV0ZXMgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBhZGRyZXNzIC0gVGhlIHVybCBvZiB5b3VyIENvbnZleCBkZXBsb3ltZW50LCBvZnRlbiBwcm92aWRlZFxuICAgKiBieSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS4gRS5nLiBgaHR0cHM6Ly9zbWFsbC1tb3VzZS0xMjMuY29udmV4LmNsb3VkYC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBTZWUge0BsaW5rIENvbnZleFJlYWN0Q2xpZW50T3B0aW9uc30gZm9yIGEgZnVsbCBkZXNjcmlwdGlvbi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFkZHJlc3M6IHN0cmluZywgb3B0aW9ucz86IENvbnZleFJlYWN0Q2xpZW50T3B0aW9ucykge1xuICAgIC8vIFZhbGlkYXRlIGFkZHJlc3MgaW1tZWRpYXRlbHkgc2luY2UgdmFsaWRhdGlvbiBieSB0aGUgbGF6aWx5LWluc3RhbnRpYXRlZFxuICAgIC8vIGludGVybmFsIGNsaWVudCBkb2VzIG5vdCBvY2N1ciBzeW5jaHJvbm91c2x5LlxuICAgIGlmIChhZGRyZXNzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJObyBhZGRyZXNzIHByb3ZpZGVkIHRvIENvbnZleFJlYWN0Q2xpZW50LlxcblwiICtcbiAgICAgICAgICBcIklmIHRyeWluZyB0byBkZXBsb3kgdG8gcHJvZHVjdGlvbiwgbWFrZSBzdXJlIHRvIGZvbGxvdyBhbGwgdGhlIGluc3RydWN0aW9ucyBmb3VuZCBhdCBodHRwczovL2RvY3MuY29udmV4LmRldi9wcm9kdWN0aW9uL2hvc3RpbmcvXFxuXCIgK1xuICAgICAgICAgIFwiSWYgcnVubmluZyBsb2NhbGx5LCBtYWtlIHN1cmUgdG8gcnVuIGBjb252ZXggZGV2YCBhbmQgZW5zdXJlIHRoZSAuZW52LmxvY2FsIGZpbGUgaXMgcG9wdWxhdGVkLlwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhZGRyZXNzICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDb252ZXhSZWFjdENsaWVudCByZXF1aXJlcyBhIFVSTCBsaWtlICdodHRwczovL2hhcHB5LW90dGVyLTEyMy5jb252ZXguY2xvdWQnLCByZWNlaXZlZCBzb21ldGhpbmcgb2YgdHlwZSAke3R5cGVvZiBhZGRyZXNzfSBpbnN0ZWFkLmAsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIWFkZHJlc3MuaW5jbHVkZXMoXCI6Ly9cIikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3ZpZGVkIGFkZHJlc3Mgd2FzIG5vdCBhbiBhYnNvbHV0ZSBVUkwuXCIpO1xuICAgIH1cbiAgICB0aGlzLmFkZHJlc3MgPSBhZGRyZXNzO1xuICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX2xvZ2dlciA9XG4gICAgICBvcHRpb25zPy5sb2dnZXIgPT09IGZhbHNlXG4gICAgICAgID8gaW5zdGFudGlhdGVOb29wTG9nZ2VyKHsgdmVyYm9zZTogb3B0aW9ucz8udmVyYm9zZSA/PyBmYWxzZSB9KVxuICAgICAgICA6IG9wdGlvbnM/LmxvZ2dlciAhPT0gdHJ1ZSAmJiBvcHRpb25zPy5sb2dnZXJcbiAgICAgICAgICA/IG9wdGlvbnMubG9nZ2VyXG4gICAgICAgICAgOiBpbnN0YW50aWF0ZURlZmF1bHRMb2dnZXIoeyB2ZXJib3NlOiBvcHRpb25zPy52ZXJib3NlID8/IGZhbHNlIH0pO1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgbG9nZ2VyOiB0aGlzLl9sb2dnZXIgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGFkZHJlc3MgZm9yIHRoaXMgY2xpZW50LCB1c2VmdWwgZm9yIGNyZWF0aW5nIGEgbmV3IGNsaWVudC5cbiAgICpcbiAgICogTm90IGd1YXJhbnRlZWQgdG8gbWF0Y2ggdGhlIGFkZHJlc3Mgd2l0aCB3aGljaCB0aGlzIGNsaWVudCB3YXMgY29uc3RydWN0ZWQ6XG4gICAqIGl0IG1heSBiZSBjYW5vbmljYWxpemVkLlxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5hZGRyZXNzO1xuICB9XG5cbiAgLyoqXG4gICAqIExhemlseSBpbnN0YW50aWF0ZSB0aGUgYEJhc2VDb252ZXhDbGllbnRgIHNvIHdlIGRvbid0IGNyZWF0ZSB0aGUgV2ViU29ja2V0XG4gICAqIHdoZW4gc2VydmVyLXNpZGUgcmVuZGVyaW5nLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldCBzeW5jKCkge1xuICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29udmV4UmVhY3RDbGllbnQgaGFzIGFscmVhZHkgYmVlbiBjbG9zZWQuXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jYWNoZWRTeW5jKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZWRTeW5jO1xuICAgIH1cbiAgICAvLyBCYXNlQ29udmV4Q2xpZW50IGFuZCBwYWdpbmF0ZWQgcXVlcnkgY2xpZW50IGFyZSBhbHdheXMgY3JlYXRlZCB0b2dldGhlci5cbiAgICB0aGlzLmNhY2hlZFN5bmMgPSBuZXcgQmFzZUNvbnZleENsaWVudChcbiAgICAgIHRoaXMuYWRkcmVzcyxcbiAgICAgICgpID0+IHt9LCAvLyBVc2UgdGhlIFBhZ2luYXRlZFF1ZXJ5Q2xpZW50J3MgdHJhbnNpdGlvbiBpbnN0ZWFkLlxuICAgICAgdGhpcy5vcHRpb25zLFxuICAgICk7XG4gICAgaWYgKHRoaXMuYWRtaW5BdXRoKSB7XG4gICAgICB0aGlzLmNhY2hlZFN5bmMuc2V0QWRtaW5BdXRoKHRoaXMuYWRtaW5BdXRoLCB0aGlzLmZha2VVc2VySWRlbnRpdHkpO1xuICAgIH1cbiAgICB0aGlzLmNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50ID0gbmV3IFBhZ2luYXRlZFF1ZXJ5Q2xpZW50KFxuICAgICAgdGhpcy5jYWNoZWRTeW5jLFxuICAgICAgKHRyYW5zaXRpb24pID0+IHRoaXMuaGFuZGxlVHJhbnNpdGlvbih0cmFuc2l0aW9uKSxcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmNhY2hlZFN5bmM7XG4gIH1cblxuICAvKipcbiAgICogTGF6aWx5IGluc3RhbnRpYXRlIHRoZSBgUGFnaW5hdGVkUXVlcnlDbGllbnRgIHNvIHdlIGRvbid0IGNyZWF0ZSBpdFxuICAgKiB3aGVuIHNlcnZlci1zaWRlIHJlbmRlcmluZy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXQgcGFnaW5hdGVkUXVlcnlDbGllbnQoKSB7XG4gICAgLy8gYWNjZXNzIHN5bmMgdG8gaW5zdGFudGlhdGUgdGhlIGNsaWVudHNcbiAgICB0aGlzLnN5bmM7XG4gICAgaWYgKHRoaXMuY2FjaGVkUGFnaW5hdGVkUXVlcnlDbGllbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaG91bGQgYWxyZWFkeSBiZSBpbnN0YW50aWF0ZWRcIik7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhdXRoZW50aWNhdGlvbiB0b2tlbiB0byBiZSB1c2VkIGZvciBzdWJzZXF1ZW50IHF1ZXJpZXMgYW5kIG11dGF0aW9ucy5cbiAgICogYGZldGNoVG9rZW5gIHdpbGwgYmUgY2FsbGVkIGF1dG9tYXRpY2FsbHkgYWdhaW4gaWYgYSB0b2tlbiBleHBpcmVzLlxuICAgKiBgZmV0Y2hUb2tlbmAgc2hvdWxkIHJldHVybiBgbnVsbGAgaWYgdGhlIHRva2VuIGNhbm5vdCBiZSByZXRyaWV2ZWQsIGZvciBleGFtcGxlXG4gICAqIHdoZW4gdGhlIHVzZXIncyByaWdodHMgd2VyZSBwZXJtYW5lbnRseSByZXZva2VkLlxuICAgKiBAcGFyYW0gZmV0Y2hUb2tlbiAtIGFuIGFzeW5jIGZ1bmN0aW9uIHJldHVybmluZyB0aGUgSldULWVuY29kZWQgT3BlbklEIENvbm5lY3QgSWRlbnRpdHkgVG9rZW5cbiAgICogQHBhcmFtIG9uQ2hhbmdlIC0gYSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGF1dGhlbnRpY2F0aW9uIHN0YXR1cyBjaGFuZ2VzXG4gICAqL1xuICBzZXRBdXRoKFxuICAgIGZldGNoVG9rZW46IEF1dGhUb2tlbkZldGNoZXIsXG4gICAgb25DaGFuZ2U/OiAoaXNBdXRoZW50aWNhdGVkOiBib29sZWFuKSA9PiB2b2lkLFxuICApIHtcbiAgICBpZiAodHlwZW9mIGZldGNoVG9rZW4gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJQYXNzaW5nIGEgc3RyaW5nIHRvIENvbnZleFJlYWN0Q2xpZW50LnNldEF1dGggaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCwgXCIgK1xuICAgICAgICAgIFwicGxlYXNlIHVwZ3JhZGUgdG8gcGFzc2luZyBpbiBhbiBhc3luYyBmdW5jdGlvbiB0byBoYW5kbGUgcmVhdXRoZW50aWNhdGlvbi5cIixcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuc3luYy5zZXRBdXRoKFxuICAgICAgZmV0Y2hUb2tlbixcbiAgICAgIG9uQ2hhbmdlID8/XG4gICAgICAgICgoKSA9PiB7XG4gICAgICAgICAgLy8gRG8gbm90aGluZ1xuICAgICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIHRoZSBjdXJyZW50IGF1dGhlbnRpY2F0aW9uIHRva2VuIGlmIHNldC5cbiAgICovXG4gIGNsZWFyQXV0aCgpIHtcbiAgICB0aGlzLnN5bmMuY2xlYXJBdXRoKCk7XG4gIH1cblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRBZG1pbkF1dGgodG9rZW46IHN0cmluZywgaWRlbnRpdHk/OiBVc2VySWRlbnRpdHlBdHRyaWJ1dGVzKSB7XG4gICAgdGhpcy5hZG1pbkF1dGggPSB0b2tlbjtcbiAgICB0aGlzLmZha2VVc2VySWRlbnRpdHkgPSBpZGVudGl0eTtcbiAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnZleFJlYWN0Q2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gY2xvc2VkLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2FjaGVkU3luYykge1xuICAgICAgdGhpcy5zeW5jLnNldEFkbWluQXV0aCh0b2tlbiwgaWRlbnRpdHkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYSBuZXcge0BsaW5rIFdhdGNofSBvbiBhIENvbnZleCBxdWVyeSBmdW5jdGlvbi5cbiAgICpcbiAgICogKipNb3N0IGFwcGxpY2F0aW9uIGNvZGUgc2hvdWxkIG5vdCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBJbnN0ZWFkIHVzZVxuICAgKiB0aGUge0BsaW5rIHVzZVF1ZXJ5fSBob29rLioqXG4gICAqXG4gICAqIFRoZSBhY3Qgb2YgY3JlYXRpbmcgYSB3YXRjaCBkb2VzIG5vdGhpbmcsIGEgV2F0Y2ggaXMgc3RhdGVsZXNzLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgLSBBIHtAbGluayBzZXJ2ZXIuRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgcHVibGljIHF1ZXJ5IHRvIHJ1bi5cbiAgICogQHBhcmFtIGFyZ3MgLSBBbiBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgcXVlcnkuIElmIHRoaXMgaXMgb21pdHRlZCxcbiAgICogdGhlIGFyZ3VtZW50cyB3aWxsIGJlIGB7fWAuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gQSB7QGxpbmsgV2F0Y2hRdWVyeU9wdGlvbnN9IG9wdGlvbnMgb2JqZWN0IGZvciB0aGlzIHF1ZXJ5LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIFdhdGNofSBvYmplY3QuXG4gICAqL1xuICB3YXRjaFF1ZXJ5PFF1ZXJ5IGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPj4oXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIC4uLmFyZ3NBbmRPcHRpb25zOiBBcmdzQW5kT3B0aW9uczxRdWVyeSwgV2F0Y2hRdWVyeU9wdGlvbnM+XG4gICk6IFdhdGNoPEZ1bmN0aW9uUmV0dXJuVHlwZTxRdWVyeT4+IHtcbiAgICBjb25zdCBbYXJncywgb3B0aW9uc10gPSBhcmdzQW5kT3B0aW9ucztcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KTtcblxuICAgIHJldHVybiB7XG4gICAgICBvblVwZGF0ZTogKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcXVlcnlUb2tlbiwgdW5zdWJzY3JpYmUgfSA9IHRoaXMuc3luYy5zdWJzY3JpYmUoXG4gICAgICAgICAgbmFtZSBhcyBzdHJpbmcsXG4gICAgICAgICAgYXJncyxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQocXVlcnlUb2tlbik7XG4gICAgICAgIGlmIChjdXJyZW50TGlzdGVuZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmFkZChjYWxsYmFjayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KHF1ZXJ5VG9rZW4sIG5ldyBTZXQoW2NhbGxiYWNrXSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjdXJyZW50TGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KHF1ZXJ5VG9rZW4pITtcbiAgICAgICAgICBjdXJyZW50TGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgICAgaWYgKGN1cnJlbnRMaXN0ZW5lcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKHF1ZXJ5VG9rZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB9O1xuICAgICAgfSxcblxuICAgICAgbG9jYWxRdWVyeVJlc3VsdDogKCkgPT4ge1xuICAgICAgICAvLyBVc2UgdGhlIGNhY2hlZCBjbGllbnQgYmVjYXVzZSB3ZSBjYW4ndCBoYXZlIGEgcXVlcnkgcmVzdWx0IGlmIHdlIGRvbid0XG4gICAgICAgIC8vIGV2ZW4gaGF2ZSBhIGNsaWVudCB5ZXQhXG4gICAgICAgIGlmICh0aGlzLmNhY2hlZFN5bmMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZWRTeW5jLmxvY2FsUXVlcnlSZXN1bHQobmFtZSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0sXG5cbiAgICAgIGxvY2FsUXVlcnlMb2dzOiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlZFN5bmMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZWRTeW5jLmxvY2FsUXVlcnlMb2dzKG5hbWUsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9LFxuXG4gICAgICBqb3VybmFsOiAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlZFN5bmMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZWRTeW5jLnF1ZXJ5Sm91cm5hbChuYW1lLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gTGV0J3MgdHJ5IG91dCBhIHF1ZXJ5T3B0aW9ucy1zdHlsZSBBUEkuXG4gIC8vIFRoaXMgbWV0aG9kIGlzIHNpbWlsYXIgdG8gdGhlIFJlYWN0IFF1ZXJ5IEFQSSBgcXVlcnlDbGllbnQucHJlZmV0Y2hRdWVyeSgpYC5cbiAgLy8gSW4gdGhlIGZ1dHVyZSBhbiBlbnN1cmVRdWVyeURhdGEoKTogUHJvbWlzZTxEYXRhPiBtZXRob2QgY291bGQgZXhpc3QuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgbGlrZWx5IGZ1dHVyZSBpbnRlcmVzdCBpbiBhIHF1ZXJ5IHN1YnNjcmlwdGlvbi5cbiAgICpcbiAgICogVGhlIGltcGxlbWVudGF0aW9uIGN1cnJlbnRseSBpbW1lZGlhdGVseSBzdWJzY3JpYmVzIHRvIGEgcXVlcnkuIEluIHRoZSBmdXR1cmUgdGhpcyBtZXRob2RcbiAgICogbWF5IHByaW9yaXRpemUgc29tZSBxdWVyaWVzIG92ZXIgb3RoZXJzLCBmZXRjaCB0aGUgcXVlcnkgcmVzdWx0IHdpdGhvdXQgc3Vic2NyaWJpbmcsIG9yXG4gICAqIGRvIG5vdGhpbmcgaW4gc2xvdyBuZXR3b3JrIGNvbm5lY3Rpb25zIG9yIGhpZ2ggbG9hZCBzY2VuYXJpb3MuXG4gICAqXG4gICAqIFRvIHVzZSB0aGlzIGluIGEgUmVhY3QgY29tcG9uZW50LCBjYWxsIHVzZVF1ZXJ5KCkgYW5kIGlnbm9yZSB0aGUgcmV0dXJuIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnlPcHRpb25zIC0gQSBxdWVyeSAoZnVuY3Rpb24gcmVmZXJlbmNlIGZyb20gYW4gYXBpIG9iamVjdCkgYW5kIGl0cyBhcmdzLCBwbHVzXG4gICAqIGFuIG9wdGlvbmFsIGV4dGVuZFN1YnNjcmlwdGlvbkZvciBmb3IgaG93IGxvbmcgdG8gc3Vic2NyaWJlIHRvIHRoZSBxdWVyeS5cbiAgICovXG4gIHByZXdhcm1RdWVyeTxRdWVyeSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj4+KFxuICAgIHF1ZXJ5T3B0aW9uczogQ29udmV4UXVlcnlPcHRpb25zPFF1ZXJ5PiAmIHtcbiAgICAgIGV4dGVuZFN1YnNjcmlwdGlvbkZvcj86IG51bWJlcjtcbiAgICB9LFxuICApIHtcbiAgICBjb25zdCBleHRlbmRTdWJzY3JpcHRpb25Gb3IgPVxuICAgICAgcXVlcnlPcHRpb25zLmV4dGVuZFN1YnNjcmlwdGlvbkZvciA/PyBERUZBVUxUX0VYVEVORF9TVUJTQ1JJUFRJT05fRk9SO1xuICAgIGNvbnN0IHdhdGNoID0gdGhpcy53YXRjaFF1ZXJ5KHF1ZXJ5T3B0aW9ucy5xdWVyeSwgcXVlcnlPcHRpb25zLmFyZ3MgfHwge30pO1xuICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gd2F0Y2gub25VcGRhdGUoKCkgPT4ge30pO1xuICAgIHNldFRpbWVvdXQodW5zdWJzY3JpYmUsIGV4dGVuZFN1YnNjcmlwdGlvbkZvcik7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0IGEgbmV3IHtAbGluayBQYWdpbmF0ZWRXYXRjaH0gb24gYSBDb252ZXggcGFnaW5hdGVkIHF1ZXJ5IGZ1bmN0aW9uLlxuICAgKlxuICAgKiAqKk1vc3QgYXBwbGljYXRpb24gY29kZSBzaG91bGQgbm90IGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuIEluc3RlYWQgdXNlXG4gICAqIHRoZSB7QGxpbmsgdXNlUGFnaW5hdGVkUXVlcnl9IGhvb2suKipcbiAgICpcbiAgICogVGhlIGFjdCBvZiBjcmVhdGluZyBhIHdhdGNoIGRvZXMgbm90aGluZywgYSBXYXRjaCBpcyBzdGF0ZWxlc3MuXG4gICAqXG4gICAqIEBwYXJhbSBxdWVyeSAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgcXVlcnkgdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBxdWVyeS4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgKiB0aGUgYXJndW1lbnRzIHdpbGwgYmUgYHt9YC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBIHtAbGluayBXYXRjaFBhZ2luYXRlZFF1ZXJ5T3B0aW9uc30gb3B0aW9ucyBvYmplY3QgZm9yIHRoaXMgcXVlcnkuXG4gICAqXG4gICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgUGFnaW5hdGVkV2F0Y2h9IG9iamVjdC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICB3YXRjaFBhZ2luYXRlZFF1ZXJ5PFF1ZXJ5IGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPj4oXG4gICAgcXVlcnk6IFF1ZXJ5LFxuICAgIGFyZ3M6IFF1ZXJ5W1wiX2FyZ3NcIl0sXG4gICAgb3B0aW9uczogV2F0Y2hQYWdpbmF0ZWRRdWVyeU9wdGlvbnMsXG4gICk6IFBhZ2luYXRlZFdhdGNoPEZ1bmN0aW9uUmV0dXJuVHlwZTxRdWVyeT4+IHtcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5KTtcblxuICAgIHJldHVybiB7XG4gICAgICBvblVwZGF0ZTogKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcGFnaW5hdGVkUXVlcnlUb2tlbiwgdW5zdWJzY3JpYmUgfSA9XG4gICAgICAgICAgdGhpcy5wYWdpbmF0ZWRRdWVyeUNsaWVudC5zdWJzY3JpYmUobmFtZSwgYXJncyB8fCB7fSwgb3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgY3VycmVudExpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzLmdldChwYWdpbmF0ZWRRdWVyeVRva2VuKTtcbiAgICAgICAgaWYgKGN1cnJlbnRMaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGN1cnJlbnRMaXN0ZW5lcnMuYWRkKGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxpc3RlbmVycy5zZXQocGFnaW5hdGVkUXVlcnlUb2tlbiwgbmV3IFNldChbY2FsbGJhY2tdKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQocGFnaW5hdGVkUXVlcnlUb2tlbikhO1xuICAgICAgICAgIGN1cnJlbnRMaXN0ZW5lcnMuZGVsZXRlKGNhbGxiYWNrKTtcbiAgICAgICAgICBpZiAoY3VycmVudExpc3RlbmVycy5zaXplID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5kZWxldGUocGFnaW5hdGVkUXVlcnlUb2tlbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgICAgIH07XG4gICAgICB9LFxuXG4gICAgICBsb2NhbFF1ZXJ5UmVzdWx0OiAoKSA9PiB7XG4gICAgICAgIC8vIFVzZSBvdXIgbmV3IHBhZ2luYXRlZCBxdWVyeSBjbGllbnRcbiAgICAgICAgcmV0dXJuIHRoaXMucGFnaW5hdGVkUXVlcnlDbGllbnQubG9jYWxRdWVyeVJlc3VsdChuYW1lLCBhcmdzLCBvcHRpb25zKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGEgbXV0YXRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSBtdXRhdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgbXV0YXRpb25cbiAgICogdG8gcnVuLlxuICAgKiBAcGFyYW0gYXJncyAtIEFuIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBtdXRhdGlvbi4gSWYgdGhpcyBpcyBvbWl0dGVkLFxuICAgKiB0aGUgYXJndW1lbnRzIHdpbGwgYmUgYHt9YC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBBIHtAbGluayBNdXRhdGlvbk9wdGlvbnN9IG9wdGlvbnMgb2JqZWN0IGZvciB0aGUgbXV0YXRpb24uXG4gICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgbXV0YXRpb24ncyByZXN1bHQuXG4gICAqL1xuICBtdXRhdGlvbjxNdXRhdGlvbiBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwibXV0YXRpb25cIj4+KFxuICAgIG11dGF0aW9uOiBNdXRhdGlvbixcbiAgICAuLi5hcmdzQW5kT3B0aW9uczogQXJnc0FuZE9wdGlvbnM8XG4gICAgICBNdXRhdGlvbixcbiAgICAgIE11dGF0aW9uT3B0aW9uczxGdW5jdGlvbkFyZ3M8TXV0YXRpb24+PlxuICAgID5cbiAgKTogUHJvbWlzZTxGdW5jdGlvblJldHVyblR5cGU8TXV0YXRpb24+PiB7XG4gICAgY29uc3QgW2FyZ3MsIG9wdGlvbnNdID0gYXJnc0FuZE9wdGlvbnM7XG4gICAgY29uc3QgbmFtZSA9IGdldEZ1bmN0aW9uTmFtZShtdXRhdGlvbik7XG4gICAgcmV0dXJuIHRoaXMuc3luYy5tdXRhdGlvbihuYW1lLCBhcmdzLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlIGFuIGFjdGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIGFjdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgYWN0aW9uXG4gICAqIHRvIHJ1bi5cbiAgICogQHBhcmFtIGFyZ3MgLSBBbiBhcmd1bWVudHMgb2JqZWN0IGZvciB0aGUgYWN0aW9uLiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIGFjdGlvbidzIHJlc3VsdC5cbiAgICovXG4gIGFjdGlvbjxBY3Rpb24gZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcImFjdGlvblwiPj4oXG4gICAgYWN0aW9uOiBBY3Rpb24sXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxBY3Rpb24+XG4gICk6IFByb21pc2U8RnVuY3Rpb25SZXR1cm5UeXBlPEFjdGlvbj4+IHtcbiAgICBjb25zdCBuYW1lID0gZ2V0RnVuY3Rpb25OYW1lKGFjdGlvbik7XG4gICAgcmV0dXJuIHRoaXMuc3luYy5hY3Rpb24obmFtZSwgLi4uYXJncyk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYSBxdWVyeSByZXN1bHQgb25jZS5cbiAgICpcbiAgICogKipNb3N0IGFwcGxpY2F0aW9uIGNvZGUgc2hvdWxkIHN1YnNjcmliZSB0byBxdWVyaWVzIGluc3RlYWQsIHVzaW5nXG4gICAqIHRoZSB7QGxpbmsgdXNlUXVlcnl9IGhvb2suKipcbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5IC0gQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIHB1YmxpYyBxdWVyeVxuICAgKiB0byBydW4uXG4gICAqIEBwYXJhbSBhcmdzIC0gQW4gYXJndW1lbnRzIG9iamVjdCBmb3IgdGhlIHF1ZXJ5LiBJZiB0aGlzIGlzIG9taXR0ZWQsXG4gICAqIHRoZSBhcmd1bWVudHMgd2lsbCBiZSBge31gLlxuICAgKiBAcmV0dXJucyBBIHByb21pc2Ugb2YgdGhlIHF1ZXJ5J3MgcmVzdWx0LlxuICAgKi9cbiAgcXVlcnk8UXVlcnkgZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+PihcbiAgICBxdWVyeTogUXVlcnksXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxRdWVyeT5cbiAgKTogUHJvbWlzZTxGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+PiB7XG4gICAgY29uc3Qgd2F0Y2ggPSB0aGlzLndhdGNoUXVlcnkocXVlcnksIC4uLmFyZ3MpO1xuICAgIGNvbnN0IGV4aXN0aW5nUmVzdWx0ID0gd2F0Y2gubG9jYWxRdWVyeVJlc3VsdCgpO1xuICAgIGlmIChleGlzdGluZ1Jlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGV4aXN0aW5nUmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gd2F0Y2gub25VcGRhdGUoKCkgPT4ge1xuICAgICAgICB1bnN1YnNjcmliZSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc29sdmUod2F0Y2gubG9jYWxRdWVyeVJlc3VsdCgpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50IHtAbGluayBDb25uZWN0aW9uU3RhdGV9IGJldHdlZW4gdGhlIGNsaWVudCBhbmQgdGhlIENvbnZleFxuICAgKiBiYWNrZW5kLlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gd2l0aCB0aGUgQ29udmV4IGJhY2tlbmQuXG4gICAqL1xuICBjb25uZWN0aW9uU3RhdGUoKTogQ29ubmVjdGlvblN0YXRlIHtcbiAgICByZXR1cm4gdGhpcy5zeW5jLmNvbm5lY3Rpb25TdGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byB0aGUge0BsaW5rIENvbm5lY3Rpb25TdGF0ZX0gYmV0d2VlbiB0aGUgY2xpZW50IGFuZCB0aGUgQ29udmV4XG4gICAqIGJhY2tlbmQsIGNhbGxpbmcgYSBjYWxsYmFjayBlYWNoIHRpbWUgaXQgY2hhbmdlcy5cbiAgICpcbiAgICogU3Vic2NyaWJlZCBjYWxsYmFja3Mgd2lsbCBiZSBjYWxsZWQgd2hlbiBhbnkgcGFydCBvZiBDb25uZWN0aW9uU3RhdGUgY2hhbmdlcy5cbiAgICogQ29ubmVjdGlvblN0YXRlIG1heSBncm93IGluIGZ1dHVyZSB2ZXJzaW9ucyAoZS5nLiB0byBwcm92aWRlIGEgYXJyYXkgb2ZcbiAgICogaW5mbGlnaHQgcmVxdWVzdHMpIGluIHdoaWNoIGNhc2UgY2FsbGJhY2tzIHdvdWxkIGJlIGNhbGxlZCBtb3JlIGZyZXF1ZW50bHkuXG4gICAqIENvbm5lY3Rpb25TdGF0ZSBtYXkgYWxzbyAqbG9zZSogcHJvcGVydGllcyBpbiBmdXR1cmUgdmVyc2lvbnMgYXMgd2UgZmlndXJlXG4gICAqIG91dCB3aGF0IGluZm9ybWF0aW9uIGlzIG1vc3QgdXNlZnVsLiBBcyBzdWNoIHRoaXMgQVBJIGlzIGNvbnNpZGVyZWQgdW5zdGFibGUuXG4gICAqXG4gICAqIEByZXR1cm5zIEFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRvIHN0b3AgbGlzdGVuaW5nLlxuICAgKi9cbiAgc3Vic2NyaWJlVG9Db25uZWN0aW9uU3RhdGUoXG4gICAgY2I6IChjb25uZWN0aW9uU3RhdGU6IENvbm5lY3Rpb25TdGF0ZSkgPT4gdm9pZCxcbiAgKTogKCkgPT4gdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMuc3luYy5zdWJzY3JpYmVUb0Nvbm5lY3Rpb25TdGF0ZShjYik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsb2dnZXIgZm9yIHRoaXMgY2xpZW50LlxuICAgKlxuICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIExvZ2dlcn0gZm9yIHRoaXMgY2xpZW50LlxuICAgKi9cbiAgZ2V0IGxvZ2dlcigpOiBMb2dnZXIge1xuICAgIHJldHVybiB0aGlzLl9sb2dnZXI7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgYW55IG5ldHdvcmsgaGFuZGxlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBjbGllbnQgYW5kIHN0b3AgYWxsIHN1YnNjcmlwdGlvbnMuXG4gICAqXG4gICAqIENhbGwgdGhpcyBtZXRob2Qgd2hlbiB5b3UncmUgZG9uZSB3aXRoIGEge0BsaW5rIENvbnZleFJlYWN0Q2xpZW50fSB0b1xuICAgKiBkaXNwb3NlIG9mIGl0cyBzb2NrZXRzIGFuZCByZXNvdXJjZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIEEgYFByb21pc2VgIGZ1bGZpbGxlZCB3aGVuIHRoZSBjb25uZWN0aW9uIGhhcyBiZWVuIGNvbXBsZXRlbHkgY2xvc2VkLlxuICAgKi9cbiAgYXN5bmMgY2xvc2UoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgIC8vIFByZXZlbnQgb3V0c3RhbmRpbmcgUmVhY3QgYmF0Y2hlZCB1cGRhdGVzIGZyb20gaW52b2tpbmcgbGlzdGVuZXJzLlxuICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuICAgIGlmICh0aGlzLmNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50KSB7XG4gICAgICB0aGlzLmNhY2hlZFBhZ2luYXRlZFF1ZXJ5Q2xpZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodGhpcy5jYWNoZWRTeW5jKSB7XG4gICAgICBjb25zdCBzeW5jID0gdGhpcy5jYWNoZWRTeW5jO1xuICAgICAgdGhpcy5jYWNoZWRTeW5jID0gdW5kZWZpbmVkO1xuICAgICAgYXdhaXQgc3luYy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdHJhbnNpdGlvbnMgZnJvbSBib3RoIGJhc2UgY2xpZW50IGFuZCBwYWdpbmF0ZWQgY2xpZW50LlxuICAgKiBUaGlzIGVuc3VyZXMgYWxsIHRyYW5zaXRpb25zIGFyZSBwcm9jZXNzZWQgc3luY2hyb25vdXNseSBhbmQgaW4gb3JkZXIuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVRyYW5zaXRpb24odHJhbnNpdGlvbjogRXh0ZW5kZWRUcmFuc2l0aW9uKSB7XG4gICAgY29uc3Qgc2ltcGxlID0gdHJhbnNpdGlvbi5xdWVyaWVzLm1hcCgocSkgPT4gcS50b2tlbik7XG4gICAgY29uc3QgcGFnaW5hdGVkID0gdHJhbnNpdGlvbi5wYWdpbmF0ZWRRdWVyaWVzLm1hcCgocSkgPT4gcS50b2tlbik7XG4gICAgdGhpcy50cmFuc2l0aW9uKFsuLi5zaW1wbGUsIC4uLnBhZ2luYXRlZF0pO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFuc2l0aW9uKHVwZGF0ZWRRdWVyaWVzOiAoUXVlcnlUb2tlbiB8IFBhZ2luYXRlZFF1ZXJ5VG9rZW4pW10pIHtcbiAgICBmb3IgKGNvbnN0IHF1ZXJ5VG9rZW4gb2YgdXBkYXRlZFF1ZXJpZXMpIHtcbiAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzLmdldChxdWVyeVRva2VuKTtcbiAgICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IENvbnZleENvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0PENvbnZleFJlYWN0Q2xpZW50PihcbiAgdW5kZWZpbmVkIGFzIHVua25vd24gYXMgQ29udmV4UmVhY3RDbGllbnQsIC8vIGluIHRoZSBmdXR1cmUgdGhpcyB3aWxsIGJlIGEgbW9ja2VkIGNsaWVudCBmb3IgdGVzdGluZ1xuKTtcblxuLyoqXG4gKiBHZXQgdGhlIHtAbGluayBDb252ZXhSZWFjdENsaWVudH0gd2l0aGluIGEgUmVhY3QgY29tcG9uZW50LlxuICpcbiAqIFRoaXMgcmVsaWVzIG9uIHRoZSB7QGxpbmsgQ29udmV4UHJvdmlkZXJ9IGJlaW5nIGFib3ZlIGluIHRoZSBSZWFjdCBjb21wb25lbnQgdHJlZS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgYWN0aXZlIHtAbGluayBDb252ZXhSZWFjdENsaWVudH0gb2JqZWN0LCBvciBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb252ZXgoKTogQ29udmV4UmVhY3RDbGllbnQge1xuICByZXR1cm4gdXNlQ29udGV4dChDb252ZXhDb250ZXh0KTtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbiBhY3RpdmUgQ29udmV4IHtAbGluayBDb252ZXhSZWFjdENsaWVudH0gdG8gZGVzY2VuZGFudHMgb2YgdGhpcyBjb21wb25lbnQuXG4gKlxuICogV3JhcCB5b3VyIGFwcCBpbiB0aGlzIGNvbXBvbmVudCB0byB1c2UgQ29udmV4IGhvb2tzIGB1c2VRdWVyeWAsXG4gKiBgdXNlTXV0YXRpb25gLCBhbmQgYHVzZUNvbnZleGAuXG4gKlxuICogQHBhcmFtIHByb3BzIC0gYW4gb2JqZWN0IHdpdGggYSBgY2xpZW50YCBwcm9wZXJ0eSB0aGF0IHJlZmVycyB0byBhIHtAbGluayBDb252ZXhSZWFjdENsaWVudH0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgQ29udmV4UHJvdmlkZXI6IFJlYWN0LkZDPHtcbiAgY2xpZW50OiBDb252ZXhSZWFjdENsaWVudDtcbiAgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGU7XG59PiA9ICh7IGNsaWVudCwgY2hpbGRyZW4gfSkgPT4ge1xuICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcbiAgICBDb252ZXhDb250ZXh0LlByb3ZpZGVyLFxuICAgIHsgdmFsdWU6IGNsaWVudCB9LFxuICAgIGNoaWxkcmVuLFxuICApO1xufTtcblxuZXhwb3J0IHR5cGUgT3B0aW9uYWxSZXN0QXJnc09yU2tpcDxGdW5jUmVmIGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8YW55Pj4gPVxuICBGdW5jUmVmW1wiX2FyZ3NcIl0gZXh0ZW5kcyBFbXB0eU9iamVjdFxuICAgID8gW2FyZ3M/OiBFbXB0eU9iamVjdCB8IFwic2tpcFwiXVxuICAgIDogW2FyZ3M6IEZ1bmNSZWZbXCJfYXJnc1wiXSB8IFwic2tpcFwiXTtcblxuLyoqXG4gKiBMb2FkIGEgcmVhY3RpdmUgcXVlcnkgd2l0aGluIGEgUmVhY3QgY29tcG9uZW50LlxuICpcbiAqIFRoaXMgUmVhY3QgaG9vayBjb250YWlucyBpbnRlcm5hbCBzdGF0ZSB0aGF0IHdpbGwgY2F1c2UgYSByZXJlbmRlclxuICogd2hlbmV2ZXIgdGhlIHF1ZXJ5IHJlc3VsdCBjaGFuZ2VzLlxuICpcbiAqIFRocm93cyBhbiBlcnJvciBpZiBub3QgdXNlZCB1bmRlciB7QGxpbmsgQ29udmV4UHJvdmlkZXJ9LlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIGEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgcXVlcnkgdG8gcnVuXG4gKiBsaWtlIGBhcGkuZGlyMS5kaXIyLmZpbGVuYW1lLmZ1bmNgLlxuICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHRvIHRoZSBxdWVyeSBmdW5jdGlvbiBvciB0aGUgc3RyaW5nIFwic2tpcFwiIGlmIHRoZVxuICogcXVlcnkgc2hvdWxkIG5vdCBiZSBsb2FkZWQuXG4gKiBAcmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBxdWVyeS4gSWYgdGhlIHF1ZXJ5IGlzIGxvYWRpbmcgcmV0dXJucyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVyeTxRdWVyeSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj4+KFxuICBxdWVyeTogUXVlcnksXG4gIC4uLmFyZ3M6IE9wdGlvbmFsUmVzdEFyZ3NPclNraXA8UXVlcnk+XG4pOiBRdWVyeVtcIl9yZXR1cm5UeXBlXCJdIHwgdW5kZWZpbmVkIHtcbiAgY29uc3Qgc2tpcCA9IGFyZ3NbMF0gPT09IFwic2tpcFwiO1xuICBjb25zdCBhcmdzT2JqZWN0ID0gYXJnc1swXSA9PT0gXCJza2lwXCIgPyB7fSA6IHBhcnNlQXJncyhhcmdzWzBdKTtcblxuICBjb25zdCBxdWVyeVJlZmVyZW5jZSA9XG4gICAgdHlwZW9mIHF1ZXJ5ID09PSBcInN0cmluZ1wiXG4gICAgICA/IG1ha2VGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCIsIGFueSwgYW55PihxdWVyeSlcbiAgICAgIDogcXVlcnk7XG5cbiAgY29uc3QgcXVlcnlOYW1lID0gZ2V0RnVuY3Rpb25OYW1lKHF1ZXJ5UmVmZXJlbmNlKTtcblxuICBjb25zdCBxdWVyaWVzID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgc2tpcFxuICAgICAgICA/ICh7fSBhcyBSZXF1ZXN0Rm9yUXVlcmllcylcbiAgICAgICAgOiB7IHF1ZXJ5OiB7IHF1ZXJ5OiBxdWVyeVJlZmVyZW5jZSwgYXJnczogYXJnc09iamVjdCB9IH0sXG4gICAgLy8gU3RyaW5naWZ5IGFyZ3Mgc28gYXJncyB0aGF0IGFyZSBzZW1hbnRpY2FsbHkgdGhlIHNhbWUgZG9uJ3QgdHJpZ2dlciBhXG4gICAgLy8gcmVyZW5kZXIuIFNhdmVzIGRldmVsb3BlcnMgZnJvbSBhZGRpbmcgYHVzZU1lbW9gIG9uIGV2ZXJ5IGFyZ3MgdXNhZ2UuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIFtKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24oYXJnc09iamVjdCkpLCBxdWVyeU5hbWUsIHNraXBdLFxuICApO1xuXG4gIGNvbnN0IHJlc3VsdHMgPSB1c2VRdWVyaWVzKHF1ZXJpZXMpO1xuICBjb25zdCByZXN1bHQgPSByZXN1bHRzW1wicXVlcnlcIl07XG4gIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHRocm93IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENvbnN0cnVjdCBhIG5ldyB7QGxpbmsgUmVhY3RNdXRhdGlvbn0uXG4gKlxuICogTXV0YXRpb24gb2JqZWN0cyBjYW4gYmUgY2FsbGVkIGxpa2UgZnVuY3Rpb25zIHRvIHJlcXVlc3QgZXhlY3V0aW9uIG9mIHRoZVxuICogY29ycmVzcG9uZGluZyBDb252ZXggZnVuY3Rpb24sIG9yIGZ1cnRoZXIgY29uZmlndXJlZCB3aXRoXG4gKiBbb3B0aW1pc3RpYyB1cGRhdGVzXShodHRwczovL2RvY3MuY29udmV4LmRldi91c2luZy9vcHRpbWlzdGljLXVwZGF0ZXMpLlxuICpcbiAqIFRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGlzIGhvb2sgaXMgc3RhYmxlIGFjcm9zcyByZW5kZXJzLCBzbyBpdCBjYW4gYmUgdXNlZFxuICogYnkgUmVhY3QgZGVwZW5kZW5jeSBhcnJheXMgYW5kIG1lbW9pemF0aW9uIGxvZ2ljIHJlbHlpbmcgb24gb2JqZWN0IGlkZW50aXR5XG4gKiB3aXRob3V0IGNhdXNpbmcgcmVyZW5kZXJzLlxuICpcbiAqIFRocm93cyBhbiBlcnJvciBpZiBub3QgdXNlZCB1bmRlciB7QGxpbmsgQ29udmV4UHJvdmlkZXJ9LlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgbXV0YXRpb25cbiAqIHRvIHJ1biBsaWtlIGBhcGkuZGlyMS5kaXIyLmZpbGVuYW1lLmZ1bmNgLlxuICogQHJldHVybnMgVGhlIHtAbGluayBSZWFjdE11dGF0aW9ufSBvYmplY3Qgd2l0aCB0aGF0IG5hbWUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlTXV0YXRpb248TXV0YXRpb24gZXh0ZW5kcyBGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCI+PihcbiAgbXV0YXRpb246IE11dGF0aW9uLFxuKTogUmVhY3RNdXRhdGlvbjxNdXRhdGlvbj4ge1xuICBjb25zdCBtdXRhdGlvblJlZmVyZW5jZSA9XG4gICAgdHlwZW9mIG11dGF0aW9uID09PSBcInN0cmluZ1wiXG4gICAgICA/IG1ha2VGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCIsIGFueSwgYW55PihtdXRhdGlvbilcbiAgICAgIDogbXV0YXRpb247XG5cbiAgY29uc3QgY29udmV4ID0gdXNlQ29udGV4dChDb252ZXhDb250ZXh0KTtcbiAgaWYgKGNvbnZleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBDb252ZXggY2xpZW50ISBgdXNlTXV0YXRpb25gIG11c3QgYmUgdXNlZCBpbiB0aGUgUmVhY3QgY29tcG9uZW50IFwiICtcbiAgICAgICAgXCJ0cmVlIHVuZGVyIGBDb252ZXhQcm92aWRlcmAuIERpZCB5b3UgZm9yZ2V0IGl0PyBcIiArXG4gICAgICAgIFwiU2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3F1aWNrLXN0YXJ0I3NldC11cC1jb252ZXgtaW4teW91ci1yZWFjdC1hcHBcIixcbiAgICApO1xuICB9XG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+IGNyZWF0ZU11dGF0aW9uKG11dGF0aW9uUmVmZXJlbmNlLCBjb252ZXgpLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICBbY29udmV4LCBnZXRGdW5jdGlvbk5hbWUobXV0YXRpb25SZWZlcmVuY2UpXSxcbiAgKTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3QgYSBuZXcge0BsaW5rIFJlYWN0QWN0aW9ufS5cbiAqXG4gKiBBY3Rpb24gb2JqZWN0cyBjYW4gYmUgY2FsbGVkIGxpa2UgZnVuY3Rpb25zIHRvIHJlcXVlc3QgZXhlY3V0aW9uIG9mIHRoZVxuICogY29ycmVzcG9uZGluZyBDb252ZXggZnVuY3Rpb24uXG4gKlxuICogVGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoaXMgaG9vayBpcyBzdGFibGUgYWNyb3NzIHJlbmRlcnMsIHNvIGl0IGNhbiBiZSB1c2VkXG4gKiBieSBSZWFjdCBkZXBlbmRlbmN5IGFycmF5cyBhbmQgbWVtb2l6YXRpb24gbG9naWMgcmVseWluZyBvbiBvYmplY3QgaWRlbnRpdHlcbiAqIHdpdGhvdXQgY2F1c2luZyByZXJlbmRlcnMuXG4gKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIG5vdCB1c2VkIHVuZGVyIHtAbGluayBDb252ZXhQcm92aWRlcn0uXG4gKlxuICogQHBhcmFtIGFjdGlvbiAtIEEge0BsaW5rIHNlcnZlci5GdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBwdWJsaWMgYWN0aW9uXG4gKiB0byBydW4gbGlrZSBgYXBpLmRpcjEuZGlyMi5maWxlbmFtZS5mdW5jYC5cbiAqIEByZXR1cm5zIFRoZSB7QGxpbmsgUmVhY3RBY3Rpb259IG9iamVjdCB3aXRoIHRoYXQgbmFtZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VBY3Rpb248QWN0aW9uIGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJhY3Rpb25cIj4+KFxuICBhY3Rpb246IEFjdGlvbixcbik6IFJlYWN0QWN0aW9uPEFjdGlvbj4ge1xuICBjb25zdCBjb252ZXggPSB1c2VDb250ZXh0KENvbnZleENvbnRleHQpO1xuICBjb25zdCBhY3Rpb25SZWZlcmVuY2UgPVxuICAgIHR5cGVvZiBhY3Rpb24gPT09IFwic3RyaW5nXCJcbiAgICAgID8gbWFrZUZ1bmN0aW9uUmVmZXJlbmNlPFwiYWN0aW9uXCIsIGFueSwgYW55PihhY3Rpb24pXG4gICAgICA6IGFjdGlvbjtcblxuICBpZiAoY29udmV4ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkNvdWxkIG5vdCBmaW5kIENvbnZleCBjbGllbnQhIGB1c2VBY3Rpb25gIG11c3QgYmUgdXNlZCBpbiB0aGUgUmVhY3QgY29tcG9uZW50IFwiICtcbiAgICAgICAgXCJ0cmVlIHVuZGVyIGBDb252ZXhQcm92aWRlcmAuIERpZCB5b3UgZm9yZ2V0IGl0PyBcIiArXG4gICAgICAgIFwiU2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3F1aWNrLXN0YXJ0I3NldC11cC1jb252ZXgtaW4teW91ci1yZWFjdC1hcHBcIixcbiAgICApO1xuICB9XG4gIHJldHVybiB1c2VNZW1vKFxuICAgICgpID0+IGNyZWF0ZUFjdGlvbihhY3Rpb25SZWZlcmVuY2UsIGNvbnZleCksXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIFtjb252ZXgsIGdldEZ1bmN0aW9uTmFtZShhY3Rpb25SZWZlcmVuY2UpXSxcbiAgKTtcbn1cblxuLyoqXG4gKiBSZWFjdCBob29rIHRvIGdldCB0aGUgY3VycmVudCB7QGxpbmsgQ29ubmVjdGlvblN0YXRlfSBhbmQgc3Vic2NyaWJlIHRvIGNoYW5nZXMuXG4gKlxuICogVGhpcyBob29rIHJldHVybnMgdGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBhbmQgYXV0b21hdGljYWxseSByZXJlbmRlcnNcbiAqIHdoZW4gYW55IHBhcnQgb2YgdGhlIGNvbm5lY3Rpb24gc3RhdGUgY2hhbmdlcyAoZS5nLiwgd2hlbiBnb2luZyBvbmxpbmUvb2ZmbGluZSxcbiAqIHdoZW4gcmVxdWVzdHMgc3RhcnQvY29tcGxldGUsIGV0Yy4pLlxuICpcbiAqIFRoZSBzaGFwZSBvZiBDb25uZWN0aW9uU3RhdGUgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlIHdoaWNoIG1heSBjYXVzZSB0aGlzXG4gKiBob29rIHRvIHJlcmVuZGVyIG1vcmUgZnJlcXVlbnRseS5cbiAqXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgbm90IHVzZWQgdW5kZXIge0BsaW5rIENvbnZleFByb3ZpZGVyfS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgY3VycmVudCB7QGxpbmsgQ29ubmVjdGlvblN0YXRlfSB3aXRoIHRoZSBDb252ZXggYmFja2VuZC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb252ZXhDb25uZWN0aW9uU3RhdGUoKTogQ29ubmVjdGlvblN0YXRlIHtcbiAgY29uc3QgY29udmV4ID0gdXNlQ29udGV4dChDb252ZXhDb250ZXh0KTtcbiAgaWYgKGNvbnZleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBDb252ZXggY2xpZW50ISBgdXNlQ29udmV4Q29ubmVjdGlvblN0YXRlYCBtdXN0IGJlIHVzZWQgaW4gdGhlIFJlYWN0IGNvbXBvbmVudCBcIiArXG4gICAgICAgIFwidHJlZSB1bmRlciBgQ29udmV4UHJvdmlkZXJgLiBEaWQgeW91IGZvcmdldCBpdD8gXCIgK1xuICAgICAgICBcIlNlZSBodHRwczovL2RvY3MuY29udmV4LmRldi9xdWljay1zdGFydCNzZXQtdXAtY29udmV4LWluLXlvdXItcmVhY3QtYXBwXCIsXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGdldEN1cnJlbnRWYWx1ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZXR1cm4gY29udmV4LmNvbm5lY3Rpb25TdGF0ZSgpO1xuICB9LCBbY29udmV4XSk7XG5cbiAgY29uc3Qgc3Vic2NyaWJlID0gdXNlQ2FsbGJhY2soXG4gICAgKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICByZXR1cm4gY29udmV4LnN1YnNjcmliZVRvQ29ubmVjdGlvblN0YXRlKCgpID0+IHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2NvbnZleF0sXG4gICk7XG5cbiAgcmV0dXJuIHVzZVN1YnNjcmlwdGlvbih7IGdldEN1cnJlbnRWYWx1ZSwgc3Vic2NyaWJlIH0pO1xufVxuXG4vLyBXaGVuIGEgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgdGhhdCBsb29rcyBsaWtlIGFcbi8vIFJlYWN0IFN5bnRoZXRpY0V2ZW50IGl0IHdhcyBsaWtlbHkgY2FsbGVkIGFzIGFuIGV2ZW50IGhhbmRsZXIuXG5mdW5jdGlvbiBhc3NlcnROb3RBY2NpZGVudGFsQXJndW1lbnQodmFsdWU6IGFueSkge1xuICAvLyB0aGVzZSBhcmUgcHJvcGVydGllcyBvZiBhIFJlYWN0LlN5bnRoZXRpY0V2ZW50XG4gIC8vIGh0dHBzOi8vcmVhY3Rqcy5vcmcvZG9jcy9ldmVudHMuaHRtbFxuICBpZiAoXG4gICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgdmFsdWUgIT09IG51bGwgJiZcbiAgICBcImJ1YmJsZXNcIiBpbiB2YWx1ZSAmJlxuICAgIFwicGVyc2lzdFwiIGluIHZhbHVlICYmXG4gICAgXCJpc0RlZmF1bHRQcmV2ZW50ZWRcIiBpbiB2YWx1ZVxuICApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQ29udmV4IGZ1bmN0aW9uIGNhbGxlZCB3aXRoIFN5bnRoZXRpY0V2ZW50IG9iamVjdC4gRGlkIHlvdSB1c2UgYSBDb252ZXggZnVuY3Rpb24gYXMgYW4gZXZlbnQgaGFuZGxlciBkaXJlY3RseT8gRXZlbnQgaGFuZGxlcnMgbGlrZSBvbkNsaWNrIHJlY2VpdmUgYW4gZXZlbnQgb2JqZWN0IGFzIHRoZWlyIGZpcnN0IGFyZ3VtZW50LiBUaGVzZSBTeW50aGV0aWNFdmVudCBvYmplY3RzIGFyZSBub3QgdmFsaWQgQ29udmV4IHZhbHVlcy4gVHJ5IHdyYXBwaW5nIHRoZSBmdW5jdGlvbiBsaWtlIFxcYGNvbnN0IGhhbmRsZXIgPSAoKSA9PiBteU11dGF0aW9uKCk7XFxgIGFuZCB1c2luZyBcXGBoYW5kbGVyXFxgIGluIHRoZSBldmVudCBoYW5kbGVyLmAsXG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImN1cnJlbnRMaXN0ZW5lcnMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/hydration.js":
/*!*********************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/hydration.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePreloadedQuery: () => (/* binding */ usePreloadedQuery)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _react_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../react/client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n\n\n\n\n\nfunction usePreloadedQuery(preloadedQuery) {\n    const args = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"usePreloadedQuery.useMemo[args]\": ()=>(0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(preloadedQuery._argsJSON)\n    }[\"usePreloadedQuery.useMemo[args]\"], [\n        preloadedQuery._argsJSON\n    ]);\n    const preloadedResult = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"usePreloadedQuery.useMemo[preloadedResult]\": ()=>(0,_values_index_js__WEBPACK_IMPORTED_MODULE_3__.jsonToConvex)(preloadedQuery._valueJSON)\n    }[\"usePreloadedQuery.useMemo[preloadedResult]\"], [\n        preloadedQuery._valueJSON\n    ]);\n    const result = (0,_react_client_js__WEBPACK_IMPORTED_MODULE_1__.useQuery)((0,_server_api_js__WEBPACK_IMPORTED_MODULE_2__.makeFunctionReference)(preloadedQuery._name), args);\n    return result === void 0 ? preloadedResult : result;\n} //# sourceMappingURL=hydration.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2h5ZHJhdGlvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0I7QUFDQztBQUNnQztBQUM1QjtBQThCdEIsU0FBUyxrQkFDZCxnQkFDc0I7SUFDdEIsTUFBTSxPQUFPLDhDQUFPOzJDQUNsQixJQUFNLDhEQUFZLENBQUMsZUFBZSxTQUFTOzBDQUMzQztRQUFDLGVBQWUsU0FBUztLQUFBO0lBRTNCLE1BQU0sa0JBQWtCLDhDQUFPO3NEQUM3QixJQUFNLDhEQUFZLENBQUMsZUFBZSxVQUFVO3FEQUM1QztRQUFDLGVBQWUsVUFBVTtLQUFBO0lBRTVCLE1BQU0sU0FBUywwREFBUSxDQUNyQixxRUFBcUIsQ0FBQyxlQUFlLEtBQUssR0FDMUM7SUFFRixPQUFPLFdBQVcsU0FBWSxrQkFBa0I7QUFDbEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvcmVhY3QvaHlkcmF0aW9uLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gXCIuLi9yZWFjdC9jbGllbnQuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVmZXJlbmNlLCBtYWtlRnVuY3Rpb25SZWZlcmVuY2UgfSBmcm9tIFwiLi4vc2VydmVyL2FwaS5qc1wiO1xuaW1wb3J0IHsganNvblRvQ29udmV4IH0gZnJvbSBcIi4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIFRoZSBwcmVsb2FkZWQgcXVlcnkgcGF5bG9hZCwgd2hpY2ggc2hvdWxkIGJlIHBhc3NlZCB0byBhIGNsaWVudCBjb21wb25lbnRcbiAqIGFuZCBwYXNzZWQgdG8ge0BsaW5rIHVzZVByZWxvYWRlZFF1ZXJ5fS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFByZWxvYWRlZDxRdWVyeSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj4+ID0ge1xuICBfX3R5cGU6IFF1ZXJ5O1xuICBfbmFtZTogc3RyaW5nO1xuICBfYXJnc0pTT046IHN0cmluZztcbiAgX3ZhbHVlSlNPTjogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBMb2FkIGEgcmVhY3RpdmUgcXVlcnkgd2l0aGluIGEgUmVhY3QgY29tcG9uZW50IHVzaW5nIGEgYFByZWxvYWRlZGAgcGF5bG9hZFxuICogZnJvbSBhIFNlcnZlciBDb21wb25lbnQgcmV0dXJuZWQgYnkge0BsaW5rIG5leHRqcy5wcmVsb2FkUXVlcnl9LlxuICpcbiAqIFRoaXMgUmVhY3QgaG9vayBjb250YWlucyBpbnRlcm5hbCBzdGF0ZSB0aGF0IHdpbGwgY2F1c2UgYSByZXJlbmRlclxuICogd2hlbmV2ZXIgdGhlIHF1ZXJ5IHJlc3VsdCBjaGFuZ2VzLlxuICpcbiAqIFRocm93cyBhbiBlcnJvciBpZiBub3QgdXNlZCB1bmRlciB7QGxpbmsgQ29udmV4UHJvdmlkZXJ9LlxuICpcbiAqIEBwYXJhbSBwcmVsb2FkZWRRdWVyeSAtIFRoZSBgUHJlbG9hZGVkYCBxdWVyeSBwYXlsb2FkIGZyb20gYSBTZXJ2ZXIgQ29tcG9uZW50LlxuICogQHJldHVybnMgdGhlIHJlc3VsdCBvZiB0aGUgcXVlcnkuIEluaXRpYWxseSByZXR1cm5zIHRoZSByZXN1bHQgZmV0Y2hlZFxuICogYnkgdGhlIFNlcnZlciBDb21wb25lbnQuIFN1YnNlcXVlbnRseSByZXR1cm5zIHRoZSByZXN1bHQgZmV0Y2hlZCBieSB0aGUgY2xpZW50LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVByZWxvYWRlZFF1ZXJ5PFF1ZXJ5IGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPj4oXG4gIHByZWxvYWRlZFF1ZXJ5OiBQcmVsb2FkZWQ8UXVlcnk+LFxuKTogUXVlcnlbXCJfcmV0dXJuVHlwZVwiXSB7XG4gIGNvbnN0IGFyZ3MgPSB1c2VNZW1vKFxuICAgICgpID0+IGpzb25Ub0NvbnZleChwcmVsb2FkZWRRdWVyeS5fYXJnc0pTT04pLFxuICAgIFtwcmVsb2FkZWRRdWVyeS5fYXJnc0pTT05dLFxuICApIGFzIFF1ZXJ5W1wiX2FyZ3NcIl07XG4gIGNvbnN0IHByZWxvYWRlZFJlc3VsdCA9IHVzZU1lbW8oXG4gICAgKCkgPT4ganNvblRvQ29udmV4KHByZWxvYWRlZFF1ZXJ5Ll92YWx1ZUpTT04pLFxuICAgIFtwcmVsb2FkZWRRdWVyeS5fdmFsdWVKU09OXSxcbiAgKTtcbiAgY29uc3QgcmVzdWx0ID0gdXNlUXVlcnkoXG4gICAgbWFrZUZ1bmN0aW9uUmVmZXJlbmNlKHByZWxvYWRlZFF1ZXJ5Ll9uYW1lKSBhcyBRdWVyeSxcbiAgICBhcmdzLFxuICApO1xuICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBwcmVsb2FkZWRSZXN1bHQgOiByZXN1bHQ7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/hydration.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/index.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthLoading: () => (/* reexport safe */ _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__.AuthLoading),\n/* harmony export */   Authenticated: () => (/* reexport safe */ _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__.Authenticated),\n/* harmony export */   ConvexProvider: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.ConvexProvider),\n/* harmony export */   ConvexProviderWithAuth: () => (/* reexport safe */ _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_4__.ConvexProviderWithAuth),\n/* harmony export */   ConvexReactClient: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.ConvexReactClient),\n/* harmony export */   Unauthenticated: () => (/* reexport safe */ _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__.Unauthenticated),\n/* harmony export */   includePage: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.includePage),\n/* harmony export */   insertAtBottomIfLoaded: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.insertAtBottomIfLoaded),\n/* harmony export */   insertAtPosition: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.insertAtPosition),\n/* harmony export */   insertAtTop: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.insertAtTop),\n/* harmony export */   optimisticallyUpdateValueInPaginatedQuery: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.optimisticallyUpdateValueInPaginatedQuery),\n/* harmony export */   page: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.page),\n/* harmony export */   resetPaginationId: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.resetPaginationId),\n/* harmony export */   useAction: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useAction),\n/* harmony export */   useConvex: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useConvex),\n/* harmony export */   useConvexAuth: () => (/* reexport safe */ _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_4__.useConvexAuth),\n/* harmony export */   useConvexConnectionState: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useConvexConnectionState),\n/* harmony export */   useMutation: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useMutation),\n/* harmony export */   usePaginatedQuery: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.usePaginatedQuery),\n/* harmony export */   usePaginatedQueryInternal: () => (/* reexport safe */ _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__.usePaginatedQueryInternal),\n/* harmony export */   usePaginatedQuery_experimental: () => (/* reexport safe */ _use_paginated_query2_js__WEBPACK_IMPORTED_MODULE_1__.usePaginatedQuery_experimental),\n/* harmony export */   usePreloadedQuery: () => (/* reexport safe */ _hydration_js__WEBPACK_IMPORTED_MODULE_5__.usePreloadedQuery),\n/* harmony export */   useQueries: () => (/* reexport safe */ _use_queries_js__WEBPACK_IMPORTED_MODULE_2__.useQueries),\n/* harmony export */   useQuery: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_7__.useQuery),\n/* harmony export */   useSubscription: () => (/* reexport safe */ _use_subscription_js__WEBPACK_IMPORTED_MODULE_6__.useSubscription)\n/* harmony export */ });\n/* harmony import */ var _use_paginated_query_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./use_paginated_query.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query.js\");\n/* harmony import */ var _use_paginated_query2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./use_paginated_query2.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query2.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _auth_helpers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./auth_helpers.js */ \"(ssr)/./node_modules/convex/dist/esm/react/auth_helpers.js\");\n/* harmony import */ var _ConvexAuthState_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ConvexAuthState.js */ \"(ssr)/./node_modules/convex/dist/esm/react/ConvexAuthState.js\");\n/* harmony import */ var _hydration_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hydration.js */ \"(ssr)/./node_modules/convex/dist/esm/react/hydration.js\");\n/* harmony import */ var _use_subscription_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./use_subscription.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n\n\n\n\n\n\n\n\n\n //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE4RGM7QUFDaUM7QUFDYjtBQUNpQjtBQUVyQztBQUNBO0FBQ0E7QUFFa0I7QUFnQnpCIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3JlYWN0L2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVG9vbHMgdG8gaW50ZWdyYXRlIENvbnZleCBpbnRvIFJlYWN0IGFwcGxpY2F0aW9ucy5cbiAqXG4gKiBUaGlzIG1vZHVsZSBjb250YWluczpcbiAqIDEuIHtAbGluayBDb252ZXhSZWFjdENsaWVudH0sIGEgY2xpZW50IGZvciB1c2luZyBDb252ZXggaW4gUmVhY3QuXG4gKiAyLiB7QGxpbmsgQ29udmV4UHJvdmlkZXJ9LCBhIGNvbXBvbmVudCB0aGF0IHN0b3JlcyB0aGlzIGNsaWVudCBpbiBSZWFjdCBjb250ZXh0LlxuICogMy4ge0BsaW5rIEF1dGhlbnRpY2F0ZWR9LCB7QGxpbmsgVW5hdXRoZW50aWNhdGVkfSBhbmQge0BsaW5rIEF1dGhMb2FkaW5nfSBoZWxwZXIgYXV0aCBjb21wb25lbnRzLlxuICogNC4gSG9va3Mge0BsaW5rIHVzZVF1ZXJ5fSwge0BsaW5rIHVzZU11dGF0aW9ufSwge0BsaW5rIHVzZUFjdGlvbn0gYW5kIG1vcmUgZm9yIGFjY2Vzc2luZyB0aGlzXG4gKiAgICBjbGllbnQgZnJvbSB5b3VyIFJlYWN0IGNvbXBvbmVudHMuXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiAjIyMgQ3JlYXRpbmcgdGhlIGNsaWVudFxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IENvbnZleFJlYWN0Q2xpZW50IH0gZnJvbSBcImNvbnZleC9yZWFjdFwiO1xuICpcbiAqIC8vIHR5cGljYWxseSBsb2FkZWQgZnJvbSBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZVxuICogY29uc3QgYWRkcmVzcyA9IFwiaHR0cHM6Ly9zbWFsbC1tb3VzZS0xMjMuY29udmV4LmNsb3VkXCJcbiAqIGNvbnN0IGNvbnZleCA9IG5ldyBDb252ZXhSZWFjdENsaWVudChhZGRyZXNzKTtcbiAqIGBgYFxuICpcbiAqICMjIyBTdG9yaW5nIHRoZSBjbGllbnQgaW4gUmVhY3QgQ29udGV4dFxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IENvbnZleFByb3ZpZGVyIH0gZnJvbSBcImNvbnZleC9yZWFjdFwiO1xuICpcbiAqIDxDb252ZXhQcm92aWRlciBjbGllbnQ9e2NvbnZleH0+XG4gKiAgIDxBcHAgLz5cbiAqIDwvQ29udmV4UHJvdmlkZXI+XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNpbmcgdGhlIGF1dGggaGVscGVyc1xuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IEF1dGhlbnRpY2F0ZWQsIFVuYXV0aGVudGljYXRlZCwgQXV0aExvYWRpbmcgfSBmcm9tIFwiY29udmV4L3JlYWN0XCI7XG4gKlxuICogPEF1dGhlbnRpY2F0ZWQ+XG4gKiAgIExvZ2dlZCBpblxuICogPC9BdXRoZW50aWNhdGVkPlxuICogPFVuYXV0aGVudGljYXRlZD5cbiAqICAgTG9nZ2VkIG91dFxuICogPC9VbmF1dGhlbnRpY2F0ZWQ+XG4gKiA8QXV0aExvYWRpbmc+XG4gKiAgIFN0aWxsIGxvYWRpbmdcbiAqIDwvQXV0aExvYWRpbmc+XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNpbmcgUmVhY3QgaG9va3NcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyB1c2VRdWVyeSwgdXNlTXV0YXRpb24gfSBmcm9tIFwiY29udmV4L3JlYWN0XCI7XG4gKiBpbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29udmV4L19nZW5lcmF0ZWQvYXBpXCI7XG4gKlxuICogZnVuY3Rpb24gQXBwKCkge1xuICogICBjb25zdCBjb3VudGVyID0gdXNlUXVlcnkoYXBpLmdldENvdW50ZXIuZGVmYXVsdCk7XG4gKiAgIGNvbnN0IGluY3JlbWVudCA9IHVzZU11dGF0aW9uKGFwaS5pbmNyZW1lbnRDb3VudGVyLmRlZmF1bHQpO1xuICogICAvLyBZb3VyIGNvbXBvbmVudCBoZXJlIVxuICogfVxuICogYGBgXG4gKiBAbW9kdWxlXG4gKi9cbmV4cG9ydCAqIGZyb20gXCIuL3VzZV9wYWdpbmF0ZWRfcXVlcnkuanNcIjtcbmV4cG9ydCB7IHVzZVBhZ2luYXRlZFF1ZXJ5X2V4cGVyaW1lbnRhbCB9IGZyb20gXCIuL3VzZV9wYWdpbmF0ZWRfcXVlcnkyLmpzXCI7XG5leHBvcnQgeyB1c2VQYWdpbmF0ZWRRdWVyeSB9IGZyb20gXCIuL3VzZV9wYWdpbmF0ZWRfcXVlcnkuanNcIjtcbmV4cG9ydCB7IHVzZVF1ZXJpZXMsIHR5cGUgUmVxdWVzdEZvclF1ZXJpZXMgfSBmcm9tIFwiLi91c2VfcXVlcmllcy5qc1wiO1xuZXhwb3J0IHR5cGUgeyBBdXRoVG9rZW5GZXRjaGVyIH0gZnJvbSBcIi4uL2Jyb3dzZXIvc3luYy9jbGllbnQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F1dGhfaGVscGVycy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vQ29udmV4QXV0aFN0YXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9oeWRyYXRpb24uanNcIjtcbi8qIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHsgdXNlU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4vdXNlX3N1YnNjcmlwdGlvbi5qc1wiO1xuZXhwb3J0IHtcbiAgdHlwZSBSZWFjdE11dGF0aW9uLFxuICB0eXBlIFJlYWN0QWN0aW9uLFxuICB0eXBlIFdhdGNoLFxuICB0eXBlIFdhdGNoUXVlcnlPcHRpb25zLFxuICB0eXBlIE11dGF0aW9uT3B0aW9ucyxcbiAgdHlwZSBDb252ZXhSZWFjdENsaWVudE9wdGlvbnMsXG4gIHR5cGUgT3B0aW9uYWxSZXN0QXJnc09yU2tpcCxcbiAgQ29udmV4UmVhY3RDbGllbnQsXG4gIHVzZUNvbnZleCxcbiAgQ29udmV4UHJvdmlkZXIsXG4gIHVzZVF1ZXJ5LFxuICB1c2VNdXRhdGlvbixcbiAgdXNlQWN0aW9uLFxuICB1c2VDb252ZXhDb25uZWN0aW9uU3RhdGUsXG59IGZyb20gXCIuL2NsaWVudC5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/queries_observer.js":
/*!****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/queries_observer.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueriesObserver: () => (/* binding */ QueriesObserver)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass QueriesObserver {\n    constructor(createWatch){\n        __publicField(this, \"createWatch\");\n        __publicField(this, \"queries\");\n        __publicField(this, \"listeners\");\n        this.createWatch = createWatch;\n        this.queries = {};\n        this.listeners = /* @__PURE__ */ new Set();\n    }\n    setQueries(newQueries) {\n        for (const identifier of Object.keys(newQueries)){\n            const { query, args, paginationOptions } = newQueries[identifier];\n            (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query);\n            if (this.queries[identifier] === void 0) {\n                this.addQuery(identifier, query, args, paginationOptions ? {\n                    paginationOptions\n                } : {});\n            } else {\n                const existingInfo = this.queries[identifier];\n                if ((0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query) !== (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(existingInfo.query) || JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(args)) !== JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(existingInfo.args)) || JSON.stringify(paginationOptions) !== JSON.stringify(existingInfo.paginationOptions)) {\n                    this.removeQuery(identifier);\n                    this.addQuery(identifier, query, args, paginationOptions ? {\n                        paginationOptions\n                    } : {});\n                }\n            }\n        }\n        for (const identifier of Object.keys(this.queries)){\n            if (newQueries[identifier] === void 0) {\n                this.removeQuery(identifier);\n            }\n        }\n    }\n    subscribe(listener) {\n        this.listeners.add(listener);\n        return ()=>{\n            this.listeners.delete(listener);\n        };\n    }\n    getLocalResults(queries) {\n        const result = {};\n        for (const identifier of Object.keys(queries)){\n            const { query, args } = queries[identifier];\n            const paginationOptions = queries[identifier].paginationOptions;\n            (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query);\n            const watch = this.createWatch(query, args, paginationOptions ? {\n                paginationOptions\n            } : {});\n            let value;\n            try {\n                value = watch.localQueryResult();\n            } catch (e) {\n                if (e instanceof Error) {\n                    value = e;\n                } else {\n                    throw e;\n                }\n            }\n            result[identifier] = value;\n        }\n        return result;\n    }\n    setCreateWatch(createWatch) {\n        this.createWatch = createWatch;\n        for (const identifier of Object.keys(this.queries)){\n            const { query, args, watch, paginationOptions } = this.queries[identifier];\n            const journal = \"journal\" in watch ? watch.journal() : void 0;\n            this.removeQuery(identifier);\n            this.addQuery(identifier, query, args, {\n                ...journal ? {\n                    journal\n                } : [],\n                ...paginationOptions ? {\n                    paginationOptions\n                } : {}\n            });\n        }\n    }\n    destroy() {\n        for (const identifier of Object.keys(this.queries)){\n            this.removeQuery(identifier);\n        }\n        this.listeners = /* @__PURE__ */ new Set();\n    }\n    addQuery(identifier, query, args, { paginationOptions, journal }) {\n        if (this.queries[identifier] !== void 0) {\n            throw new Error(`Tried to add a new query with identifier ${identifier} when it already exists.`);\n        }\n        const watch = this.createWatch(query, args, {\n            ...journal ? {\n                journal\n            } : [],\n            ...paginationOptions ? {\n                paginationOptions\n            } : {}\n        });\n        const unsubscribe = watch.onUpdate(()=>this.notifyListeners());\n        this.queries[identifier] = {\n            query,\n            args,\n            watch,\n            unsubscribe,\n            ...paginationOptions ? {\n                paginationOptions\n            } : {}\n        };\n    }\n    removeQuery(identifier) {\n        const info = this.queries[identifier];\n        if (info === void 0) {\n            throw new Error(`No query found with identifier ${identifier}.`);\n        }\n        info.unsubscribe();\n        delete this.queries[identifier];\n    }\n    notifyListeners() {\n        for (const listener of this.listeners){\n            listener();\n        }\n    }\n} //# sourceMappingURL=queries_observer.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3F1ZXJpZXNfb2JzZXJ2ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBR2U7QUFnQzVDLE1BQU0sZ0JBQWdCO0lBSzNCLFlBQVksWUFBMEI7UUFKdEMsb0JBQU87UUFDUCxvQkFBUTtRQUNSLG9CQUFRO1FBR04sS0FBSyxjQUFjO1FBQ25CLEtBQUssVUFBVSxDQUFDO1FBQ2hCLEtBQUssWUFBWSxvQkFBSSxJQUFJO0lBQzNCO0lBRUEsV0FDRSxZQVFBO1FBR0EsV0FBVyxjQUFjLE9BQU8sS0FBSyxVQUFVLEVBQUc7WUFDaEQsTUFBTSxFQUFFLE9BQU8sTUFBTSxrQkFBa0IsSUFBSSxXQUFXLFVBQVU7WUFFaEUsK0RBQWUsQ0FBQyxLQUFLO1lBRXJCLElBQUksS0FBSyxRQUFRLFVBQVUsTUFBTSxRQUFXO2dCQUUxQyxLQUFLLFNBQ0gsWUFDQSxPQUNBLE1BQ0Esb0JBQW9CO29CQUFFO2dCQUFrQixJQUFJLENBQUM7WUFFakQsT0FBTztnQkFDTCxNQUFNLGVBQWUsS0FBSyxRQUFRLFVBQVU7Z0JBRTVDLElBQ0UsK0RBQWUsQ0FBQyxLQUFLLE1BQU0sK0RBQWUsQ0FBQyxhQUFhLEtBQUssS0FDN0QsS0FBSyxVQUFVLDhEQUFZLENBQUMsSUFBSSxDQUFDLE1BQy9CLEtBQUssVUFBVSw4REFBWSxDQUFDLGFBQWEsSUFBSSxDQUFDLEtBQ2hELEtBQUssVUFBVSxpQkFBaUIsTUFDOUIsS0FBSyxVQUFVLGFBQWEsaUJBQWlCLEdBQy9DO29CQUVBLEtBQUssWUFBWSxVQUFVO29CQUMzQixLQUFLLFNBQ0gsWUFDQSxPQUNBLE1BQ0Esb0JBQW9CO3dCQUFFO29CQUFrQixJQUFJLENBQUM7Z0JBRWpEO1lBQ0Y7UUFDRjtRQUdBLFdBQVcsY0FBYyxPQUFPLEtBQUssS0FBSyxPQUFPLEVBQUc7WUFDbEQsSUFBSSxXQUFXLFVBQVUsTUFBTSxRQUFXO2dCQUN4QyxLQUFLLFlBQVksVUFBVTtZQUM3QjtRQUNGO0lBQ0Y7SUFFQSxVQUFVLFVBQWtDO1FBQzFDLEtBQUssVUFBVSxJQUFJLFFBQVE7UUFDM0IsT0FBTztZQUNMLEtBQUssVUFBVSxPQUFPLFFBQVE7UUFDaEM7SUFDRjtJQUVBLGdCQUNFLFNBSUE7UUFDQSxNQUFNLFNBR0YsQ0FBQztRQUNMLFdBQVcsY0FBYyxPQUFPLEtBQUssT0FBTyxFQUFHO1lBQzdDLE1BQU0sRUFBRSxPQUFPLEtBQUssSUFBSSxRQUFRLFVBQVU7WUFDMUMsTUFBTSxvQkFBb0IsUUFBUSxVQUFVLEVBQUU7WUFHOUMsK0RBQWUsQ0FBQyxLQUFLO1lBSXJCLE1BQU0sUUFBUSxLQUFLLFlBQ2pCLE9BQ0EsTUFDQSxvQkFBb0I7Z0JBQUU7WUFBa0IsSUFBSSxDQUFDO1lBRy9DLElBQUk7WUFDSixJQUFJO2dCQUNGLFFBQVEsTUFBTSxpQkFBaUI7WUFDakMsU0FBUyxHQUFHO2dCQUdWLElBQUksYUFBYSxPQUFPO29CQUN0QixRQUFRO2dCQUNWLE9BQU87b0JBQ0wsTUFBTTtnQkFDUjtZQUNGO1lBQ0EsT0FBTyxVQUFVLElBQUk7UUFDdkI7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxlQUFlLGFBQTBCO1FBQ3ZDLEtBQUssY0FBYztRQUduQixXQUFXLGNBQWMsT0FBTyxLQUFLLEtBQUssT0FBTyxFQUFHO1lBQ2xELE1BQU0sRUFBRSxPQUFPLE1BQU0sT0FBTyxrQkFBa0IsSUFDNUMsS0FBSyxRQUFRLFVBQVU7WUFDekIsTUFBTSxVQUFVLGFBQWEsUUFBUSxNQUFNLFFBQVEsSUFBSTtZQUN2RCxLQUFLLFlBQVksVUFBVTtZQUMzQixLQUFLLFNBQVMsWUFBWSxPQUFPLE1BQU07Z0JBQ3JDLEdBQUksVUFBVTtvQkFBRTtnQkFBUSxJQUFJLENBQUM7Z0JBQzdCLEdBQUksb0JBQW9CO29CQUFFO2dCQUFrQixJQUFJLENBQUM7WUFDbkQsQ0FBQztRQUNIO0lBQ0Y7SUFFQSxVQUFVO1FBQ1IsV0FBVyxjQUFjLE9BQU8sS0FBSyxLQUFLLE9BQU8sRUFBRztZQUNsRCxLQUFLLFlBQVksVUFBVTtRQUM3QjtRQUNBLEtBQUssWUFBWSxvQkFBSSxJQUFJO0lBQzNCO0lBRVEsU0FDTixZQUNBLE9BQ0EsTUFDQSxFQUNFLG1CQUNBLFNBQ0YsRUFJQTtRQUNBLElBQUksS0FBSyxRQUFRLFVBQVUsTUFBTSxRQUFXO1lBQzFDLE1BQU0sSUFBSSxNQUNSLDRDQUE0QyxVQUFVO1FBRTFEO1FBQ0EsTUFBTSxRQUFRLEtBQUssWUFBWSxPQUFPLE1BQU07WUFDMUMsR0FBSSxVQUFVO2dCQUFFO1lBQVEsSUFBSSxDQUFDO1lBQzdCLEdBQUksb0JBQW9CO2dCQUFFO1lBQWtCLElBQUksQ0FBQztRQUNuRCxDQUFDO1FBQ0QsTUFBTSxjQUFjLE1BQU0sU0FBUyxJQUFNLEtBQUssZ0JBQWdCLENBQUM7UUFDL0QsS0FBSyxRQUFRLFVBQVUsSUFBSTtZQUN6QjtZQUNBO1lBQ0E7WUFDQTtZQUNBLEdBQUksb0JBQW9CO2dCQUFFO1lBQWtCLElBQUksQ0FBQztRQUNuRDtJQUNGO0lBRVEsWUFBWSxZQUF3QjtRQUMxQyxNQUFNLE9BQU8sS0FBSyxRQUFRLFVBQVU7UUFDcEMsSUFBSSxTQUFTLFFBQVc7WUFDdEIsTUFBTSxJQUFJLE1BQU0sa0NBQWtDLFVBQVUsR0FBRztRQUNqRTtRQUNBLEtBQUssWUFBWTtRQUNqQixPQUFPLEtBQUssUUFBUSxVQUFVO0lBQ2hDO0lBRVEsa0JBQXdCO1FBQzlCLFdBQVcsWUFBWSxLQUFLLFVBQVc7WUFDckMsU0FBUztRQUNYO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9yZWFjdC9xdWVyaWVzX29ic2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnZleFRvSnNvbiwgVmFsdWUgfSBmcm9tIFwiLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBQYWdpbmF0ZWRXYXRjaCwgV2F0Y2ggfSBmcm9tIFwiLi9jbGllbnQuanNcIjtcbmltcG9ydCB7IFF1ZXJ5Sm91cm5hbCB9IGZyb20gXCIuLi9icm93c2VyL3N5bmMvcHJvdG9jb2wuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVmZXJlbmNlLCBnZXRGdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi4vc2VydmVyL2FwaS5qc1wiO1xuaW1wb3J0IHsgUmVxdWVzdEZvclF1ZXJpZXMgfSBmcm9tIFwiLi91c2VfcXVlcmllcy5qc1wiO1xuaW1wb3J0IHsgUGFnaW5hdGVkUXVlcnlSZXN1bHQgfSBmcm9tIFwiLi4vYnJvd3Nlci9zeW5jL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IFN1YnNjcmliZVRvUGFnaW5hdGVkUXVlcnlPcHRpb25zIH0gZnJvbSBcIi4uL2Jyb3dzZXIvc3luYy9wYWdpbmF0ZWRfcXVlcnlfY2xpZW50LmpzXCI7XG5cbnR5cGUgSWRlbnRpZmllciA9IHN0cmluZztcblxudHlwZSBRdWVyeUluZm8gPSB7XG4gIHF1ZXJ5OiBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+O1xuICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT47XG4gIHdhdGNoOiBXYXRjaDxWYWx1ZT4gfCBQYWdpbmF0ZWRXYXRjaDxWYWx1ZT47XG4gIHVuc3Vic2NyaWJlOiAoKSA9PiB2b2lkO1xuICBwYWdpbmF0aW9uT3B0aW9ucz86IFN1YnNjcmliZVRvUGFnaW5hdGVkUXVlcnlPcHRpb25zO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVXYXRjaCB7XG4gIChcbiAgICBxdWVyeTogRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPixcbiAgICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgb3B0aW9uczoge1xuICAgICAgam91cm5hbD86IFF1ZXJ5Sm91cm5hbDtcbiAgICAgIC8vIEp1c3QgdGhlIGV4aXN0ZW5jZSBvZiB0aGlzIG9wdGlvbiBtYWtlcyB0aGlzIGEgcGFnaW5hdGVkIHF1ZXJ5XG4gICAgICBwYWdpbmF0aW9uT3B0aW9ucz86IFN1YnNjcmliZVRvUGFnaW5hdGVkUXVlcnlPcHRpb25zO1xuICAgIH0sXG4gICk6IFdhdGNoPFZhbHVlPiB8IFBhZ2luYXRlZFdhdGNoPFZhbHVlPjtcbn1cblxuLyoqXG4gKiBBIGNsYXNzIGZvciBvYnNlcnZpbmcgdGhlIHJlc3VsdHMgb2YgbXVsdGlwbGUgcXVlcmllcyBhdCB0aGUgc2FtZSB0aW1lLlxuICpcbiAqIEFueSB0aW1lIHRoZSByZXN1bHQgb2YgYSBxdWVyeSBjaGFuZ2VzLCB0aGUgbGlzdGVuZXJzIGFyZSBub3RpZmllZC5cbiAqL1xuZXhwb3J0IGNsYXNzIFF1ZXJpZXNPYnNlcnZlciB7XG4gIHB1YmxpYyBjcmVhdGVXYXRjaDogQ3JlYXRlV2F0Y2g7XG4gIHByaXZhdGUgcXVlcmllczogUmVjb3JkPElkZW50aWZpZXIsIFF1ZXJ5SW5mbz47XG4gIHByaXZhdGUgbGlzdGVuZXJzOiBTZXQ8KCkgPT4gdm9pZD47XG5cbiAgY29uc3RydWN0b3IoY3JlYXRlV2F0Y2g6IENyZWF0ZVdhdGNoKSB7XG4gICAgdGhpcy5jcmVhdGVXYXRjaCA9IGNyZWF0ZVdhdGNoO1xuICAgIHRoaXMucXVlcmllcyA9IHt9O1xuICAgIHRoaXMubGlzdGVuZXJzID0gbmV3IFNldCgpO1xuICB9XG5cbiAgc2V0UXVlcmllcyhcbiAgICBuZXdRdWVyaWVzOiBSZWNvcmQ8XG4gICAgICBJZGVudGlmaWVyLFxuICAgICAge1xuICAgICAgICBxdWVyeTogRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPjtcbiAgICAgICAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+O1xuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucz86IFN1YnNjcmliZVRvUGFnaW5hdGVkUXVlcnlPcHRpb25zO1xuICAgICAgfVxuICAgID4sXG4gICkge1xuICAgIC8vIEFkZCB0aGUgbmV3IHF1ZXJpZXMgYmVmb3JlIHVuc3Vic2NyaWJpbmcgZnJvbSB0aGUgb2xkIG9uZXMgc28gdGhhdFxuICAgIC8vIHRoZSBkZWR1cGluZyBpbiB0aGUgYENvbnZleFJlYWN0Q2xpZW50YCBjYW4gaGVscCBpZiB0aGVyZSBhcmUgZHVwbGljYXRlcy5cbiAgICBmb3IgKGNvbnN0IGlkZW50aWZpZXIgb2YgT2JqZWN0LmtleXMobmV3UXVlcmllcykpIHtcbiAgICAgIGNvbnN0IHsgcXVlcnksIGFyZ3MsIHBhZ2luYXRpb25PcHRpb25zIH0gPSBuZXdRdWVyaWVzW2lkZW50aWZpZXJdO1xuICAgICAgLy8gTWlnaHQgdGhyb3dcbiAgICAgIGdldEZ1bmN0aW9uTmFtZShxdWVyeSk7XG5cbiAgICAgIGlmICh0aGlzLnF1ZXJpZXNbaWRlbnRpZmllcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBObyBleGlzdGluZyBxdWVyeSA9PiBhZGQgaXQuXG4gICAgICAgIHRoaXMuYWRkUXVlcnkoXG4gICAgICAgICAgaWRlbnRpZmllcixcbiAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICBhcmdzLFxuICAgICAgICAgIHBhZ2luYXRpb25PcHRpb25zID8geyBwYWdpbmF0aW9uT3B0aW9ucyB9IDoge30sXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBleGlzdGluZ0luZm8gPSB0aGlzLnF1ZXJpZXNbaWRlbnRpZmllcl07XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdldEZ1bmN0aW9uTmFtZShxdWVyeSkgIT09IGdldEZ1bmN0aW9uTmFtZShleGlzdGluZ0luZm8ucXVlcnkpIHx8XG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKGFyZ3MpKSAhPT1cbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihleGlzdGluZ0luZm8uYXJncykpIHx8XG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocGFnaW5hdGlvbk9wdGlvbnMpICE9PVxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZXhpc3RpbmdJbmZvLnBhZ2luYXRpb25PcHRpb25zKVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBFeGlzdGluZyBxdWVyeSB0aGF0IGRvZXNuJ3QgbWF0Y2ggPT4gcmVtb3ZlIHRoZSBvbGQgYW5kIGFkZCB0aGUgbmV3LlxuICAgICAgICAgIHRoaXMucmVtb3ZlUXVlcnkoaWRlbnRpZmllcik7XG4gICAgICAgICAgdGhpcy5hZGRRdWVyeShcbiAgICAgICAgICAgIGlkZW50aWZpZXIsXG4gICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucyA/IHsgcGFnaW5hdGlvbk9wdGlvbnMgfSA6IHt9LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcnVuZSBhbGwgdGhlIGV4aXN0aW5nIHF1ZXJpZXMgdGhhdCB3ZSBubyBsb25nZXIgbmVlZC5cbiAgICBmb3IgKGNvbnN0IGlkZW50aWZpZXIgb2YgT2JqZWN0LmtleXModGhpcy5xdWVyaWVzKSkge1xuICAgICAgaWYgKG5ld1F1ZXJpZXNbaWRlbnRpZmllcl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnJlbW92ZVF1ZXJ5KGlkZW50aWZpZXIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN1YnNjcmliZShsaXN0ZW5lcjogKCkgPT4gdm9pZCk6ICgpID0+IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG4gICAgfTtcbiAgfVxuXG4gIGdldExvY2FsUmVzdWx0cyhcbiAgICBxdWVyaWVzOiBSZXF1ZXN0Rm9yUXVlcmllcyxcbiAgKTogUmVjb3JkPFxuICAgIElkZW50aWZpZXIsXG4gICAgVmFsdWUgfCB1bmRlZmluZWQgfCBFcnJvciB8IFBhZ2luYXRlZFF1ZXJ5UmVzdWx0PFZhbHVlPlxuICA+IHtcbiAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxcbiAgICAgIElkZW50aWZpZXIsXG4gICAgICBWYWx1ZSB8IEVycm9yIHwgdW5kZWZpbmVkIHwgUGFnaW5hdGVkUXVlcnlSZXN1bHQ8VmFsdWU+XG4gICAgPiA9IHt9O1xuICAgIGZvciAoY29uc3QgaWRlbnRpZmllciBvZiBPYmplY3Qua2V5cyhxdWVyaWVzKSkge1xuICAgICAgY29uc3QgeyBxdWVyeSwgYXJncyB9ID0gcXVlcmllc1tpZGVudGlmaWVyXTtcbiAgICAgIGNvbnN0IHBhZ2luYXRpb25PcHRpb25zID0gcXVlcmllc1tpZGVudGlmaWVyXS5wYWdpbmF0aW9uT3B0aW9ucztcblxuICAgICAgLy8gTWlnaHQgdGhyb3dcbiAgICAgIGdldEZ1bmN0aW9uTmFtZShxdWVyeSk7XG5cbiAgICAgIC8vIE5vdGU6IFdlJ3JlIG5vdCBnb25uYSB3YXRjaCwgd2UgY291bGQgc2F2ZSBzb21lIGFsbG9jYXRpb25zXG4gICAgICAvLyBieSBnZXR0aW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBjbGllbnQgZGlyZWN0bHkgaW5zdGVhZC5cbiAgICAgIGNvbnN0IHdhdGNoID0gdGhpcy5jcmVhdGVXYXRjaChcbiAgICAgICAgcXVlcnksXG4gICAgICAgIGFyZ3MsXG4gICAgICAgIHBhZ2luYXRpb25PcHRpb25zID8geyBwYWdpbmF0aW9uT3B0aW9ucyB9IDoge30sXG4gICAgICApO1xuXG4gICAgICBsZXQgdmFsdWU6IFZhbHVlIHwgdW5kZWZpbmVkIHwgRXJyb3IgfCBQYWdpbmF0ZWRRdWVyeVJlc3VsdDxWYWx1ZT47XG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IHdhdGNoLmxvY2FsUXVlcnlSZXN1bHQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gT25seSBjb2xsZWN0IGluc3RhbmNlcyBvZiBgRXJyb3JgIGJlY2F1c2UgdGhhdHMgaG93IGNhbGxlcnNcbiAgICAgICAgLy8gd2lsbCBkaXN0aW5ndWlzaCBlcnJvcnMgZnJvbSBub3JtYWwgcmVzdWx0cy5cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIHZhbHVlID0gZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXN1bHRbaWRlbnRpZmllcl0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHNldENyZWF0ZVdhdGNoKGNyZWF0ZVdhdGNoOiBDcmVhdGVXYXRjaCkge1xuICAgIHRoaXMuY3JlYXRlV2F0Y2ggPSBjcmVhdGVXYXRjaDtcbiAgICAvLyBJZiB3ZSBoYXZlIGEgbmV3IHdhdGNoLCB3ZSBtaWdodCBiZSB1c2luZyBhIG5ldyBDb252ZXggY2xpZW50LlxuICAgIC8vIFJlY3JlYXRlIGFsbCB0aGUgd2F0Y2hlcyBiZWluZyBjYXJlZnVsIHRvIHByZXNlcnZlIHRoZSBqb3VybmFscy5cbiAgICBmb3IgKGNvbnN0IGlkZW50aWZpZXIgb2YgT2JqZWN0LmtleXModGhpcy5xdWVyaWVzKSkge1xuICAgICAgY29uc3QgeyBxdWVyeSwgYXJncywgd2F0Y2gsIHBhZ2luYXRpb25PcHRpb25zIH0gPVxuICAgICAgICB0aGlzLnF1ZXJpZXNbaWRlbnRpZmllcl07XG4gICAgICBjb25zdCBqb3VybmFsID0gXCJqb3VybmFsXCIgaW4gd2F0Y2ggPyB3YXRjaC5qb3VybmFsKCkgOiB1bmRlZmluZWQ7XG4gICAgICB0aGlzLnJlbW92ZVF1ZXJ5KGlkZW50aWZpZXIpO1xuICAgICAgdGhpcy5hZGRRdWVyeShpZGVudGlmaWVyLCBxdWVyeSwgYXJncywge1xuICAgICAgICAuLi4oam91cm5hbCA/IHsgam91cm5hbCB9IDogW10pLFxuICAgICAgICAuLi4ocGFnaW5hdGlvbk9wdGlvbnMgPyB7IHBhZ2luYXRpb25PcHRpb25zIH0gOiB7fSksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGZvciAoY29uc3QgaWRlbnRpZmllciBvZiBPYmplY3Qua2V5cyh0aGlzLnF1ZXJpZXMpKSB7XG4gICAgICB0aGlzLnJlbW92ZVF1ZXJ5KGlkZW50aWZpZXIpO1xuICAgIH1cbiAgICB0aGlzLmxpc3RlbmVycyA9IG5ldyBTZXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgYWRkUXVlcnkoXG4gICAgaWRlbnRpZmllcjogSWRlbnRpZmllcixcbiAgICBxdWVyeTogRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPixcbiAgICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAge1xuICAgICAgcGFnaW5hdGlvbk9wdGlvbnMsXG4gICAgICBqb3VybmFsLFxuICAgIH06IHtcbiAgICAgIHBhZ2luYXRpb25PcHRpb25zPzogU3Vic2NyaWJlVG9QYWdpbmF0ZWRRdWVyeU9wdGlvbnM7XG4gICAgICBqb3VybmFsPzogUXVlcnlKb3VybmFsO1xuICAgIH0sXG4gICkge1xuICAgIGlmICh0aGlzLnF1ZXJpZXNbaWRlbnRpZmllcl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgVHJpZWQgdG8gYWRkIGEgbmV3IHF1ZXJ5IHdpdGggaWRlbnRpZmllciAke2lkZW50aWZpZXJ9IHdoZW4gaXQgYWxyZWFkeSBleGlzdHMuYCxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHdhdGNoID0gdGhpcy5jcmVhdGVXYXRjaChxdWVyeSwgYXJncywge1xuICAgICAgLi4uKGpvdXJuYWwgPyB7IGpvdXJuYWwgfSA6IFtdKSxcbiAgICAgIC4uLihwYWdpbmF0aW9uT3B0aW9ucyA/IHsgcGFnaW5hdGlvbk9wdGlvbnMgfSA6IHt9KSxcbiAgICB9KTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IHdhdGNoLm9uVXBkYXRlKCgpID0+IHRoaXMubm90aWZ5TGlzdGVuZXJzKCkpO1xuICAgIHRoaXMucXVlcmllc1tpZGVudGlmaWVyXSA9IHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgYXJncyxcbiAgICAgIHdhdGNoLFxuICAgICAgdW5zdWJzY3JpYmUsXG4gICAgICAuLi4ocGFnaW5hdGlvbk9wdGlvbnMgPyB7IHBhZ2luYXRpb25PcHRpb25zIH0gOiB7fSksXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlUXVlcnkoaWRlbnRpZmllcjogSWRlbnRpZmllcikge1xuICAgIGNvbnN0IGluZm8gPSB0aGlzLnF1ZXJpZXNbaWRlbnRpZmllcl07XG4gICAgaWYgKGluZm8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBxdWVyeSBmb3VuZCB3aXRoIGlkZW50aWZpZXIgJHtpZGVudGlmaWVyfS5gKTtcbiAgICB9XG4gICAgaW5mby51bnN1YnNjcmliZSgpO1xuICAgIGRlbGV0ZSB0aGlzLnF1ZXJpZXNbaWRlbnRpZmllcl07XG4gIH1cblxuICBwcml2YXRlIG5vdGlmeUxpc3RlbmVycygpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzKSB7XG4gICAgICBsaXN0ZW5lcigpO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/queries_observer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query.js":
/*!*******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_paginated_query.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   includePage: () => (/* binding */ includePage),\n/* harmony export */   insertAtBottomIfLoaded: () => (/* binding */ insertAtBottomIfLoaded),\n/* harmony export */   insertAtPosition: () => (/* binding */ insertAtPosition),\n/* harmony export */   insertAtTop: () => (/* binding */ insertAtTop),\n/* harmony export */   optimisticallyUpdateValueInPaginatedQuery: () => (/* binding */ optimisticallyUpdateValueInPaginatedQuery),\n/* harmony export */   page: () => (/* binding */ page),\n/* harmony export */   resetPaginationId: () => (/* binding */ resetPaginationId),\n/* harmony export */   usePaginatedQuery: () => (/* binding */ usePaginatedQuery),\n/* harmony export */   usePaginatedQueryInternal: () => (/* binding */ usePaginatedQueryInternal)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n/* harmony import */ var _values_compare_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../values/compare.js */ \"(ssr)/./node_modules/convex/dist/esm/values/compare.js\");\n\n\n\n\n\n\n\nconst splitQuery = (key, splitCursor, continueCursor)=>(prevState)=>{\n        const queries = {\n            ...prevState.queries\n        };\n        const splitKey1 = prevState.nextPageKey;\n        const splitKey2 = prevState.nextPageKey + 1;\n        const nextPageKey = prevState.nextPageKey + 2;\n        queries[splitKey1] = {\n            query: prevState.query,\n            args: {\n                ...prevState.args,\n                paginationOpts: {\n                    ...prevState.queries[key].args.paginationOpts,\n                    endCursor: splitCursor\n                }\n            }\n        };\n        queries[splitKey2] = {\n            query: prevState.query,\n            args: {\n                ...prevState.args,\n                paginationOpts: {\n                    ...prevState.queries[key].args.paginationOpts,\n                    cursor: splitCursor,\n                    endCursor: continueCursor\n                }\n            }\n        };\n        const ongoingSplits = {\n            ...prevState.ongoingSplits\n        };\n        ongoingSplits[key] = [\n            splitKey1,\n            splitKey2\n        ];\n        return {\n            ...prevState,\n            nextPageKey,\n            queries,\n            ongoingSplits\n        };\n    };\nconst completeSplitQuery = (key)=>(prevState)=>{\n        const completedSplit = prevState.ongoingSplits[key];\n        if (completedSplit === void 0) {\n            return prevState;\n        }\n        const queries = {\n            ...prevState.queries\n        };\n        delete queries[key];\n        const ongoingSplits = {\n            ...prevState.ongoingSplits\n        };\n        delete ongoingSplits[key];\n        let pageKeys = prevState.pageKeys.slice();\n        const pageIndex = prevState.pageKeys.findIndex((v)=>v === key);\n        if (pageIndex >= 0) {\n            pageKeys = [\n                ...prevState.pageKeys.slice(0, pageIndex),\n                ...completedSplit,\n                ...prevState.pageKeys.slice(pageIndex + 1)\n            ];\n        }\n        return {\n            ...prevState,\n            queries,\n            pageKeys,\n            ongoingSplits\n        };\n    };\nfunction usePaginatedQuery(query, args, options) {\n    const { user } = usePaginatedQueryInternal(query, args, options);\n    return user;\n}\nconst includePage = Symbol(\"includePageKeys\");\nconst page = Symbol(\"page\");\nfunction usePaginatedQueryInternal(query, args, options) {\n    if (typeof options?.initialNumItems !== \"number\" || options.initialNumItems < 0) {\n        throw new Error(`\\`options.initialNumItems\\` must be a positive number. Received \\`${options?.initialNumItems}\\`.`);\n    }\n    const skip = args === \"skip\";\n    const argsObject = skip ? {} : args;\n    const queryName = (0,_server_api_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionName)(query);\n    const createInitialState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"usePaginatedQueryInternal.useMemo[createInitialState]\": ()=>{\n            return ({\n                \"usePaginatedQueryInternal.useMemo[createInitialState]\": ()=>{\n                    const id = nextPaginationId();\n                    return {\n                        query,\n                        args: argsObject,\n                        id,\n                        nextPageKey: 1,\n                        pageKeys: skip ? [] : [\n                            0\n                        ],\n                        queries: skip ? {} : {\n                            0: {\n                                query,\n                                args: {\n                                    ...argsObject,\n                                    paginationOpts: {\n                                        numItems: options.initialNumItems,\n                                        cursor: null,\n                                        id\n                                    }\n                                }\n                            }\n                        },\n                        ongoingSplits: {},\n                        skip\n                    };\n                }\n            })[\"usePaginatedQueryInternal.useMemo[createInitialState]\"];\n        }\n    }[\"usePaginatedQueryInternal.useMemo[createInitialState]\"], [\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(argsObject)),\n        queryName,\n        options.initialNumItems,\n        skip\n    ]);\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(createInitialState);\n    let currState = state;\n    if ((0,_server_api_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionName)(query) !== (0,_server_api_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionName)(state.query) || JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(argsObject)) !== JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(state.args)) || skip !== state.skip) {\n        currState = createInitialState();\n        setState(currState);\n    }\n    const convexClient = (0,_client_js__WEBPACK_IMPORTED_MODULE_4__.useConvex)();\n    const logger = convexClient.logger;\n    const resultsObject = (0,_use_queries_js__WEBPACK_IMPORTED_MODULE_2__.useQueries)(currState.queries);\n    const isIncludingPageKeys = options[includePage] ?? false;\n    const [results, maybeLastResult] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"usePaginatedQueryInternal.useMemo\": ()=>{\n            let currResult = void 0;\n            const allItems = [];\n            for (const pageKey of currState.pageKeys){\n                currResult = resultsObject[pageKey];\n                if (currResult === void 0) {\n                    break;\n                }\n                if (currResult instanceof Error) {\n                    if (currResult.message.includes(\"InvalidCursor\") || currResult instanceof _values_index_js__WEBPACK_IMPORTED_MODULE_1__.ConvexError && typeof currResult.data === \"object\" && currResult.data?.isConvexSystemError === true && currResult.data?.paginationError === \"InvalidCursor\") {\n                        logger.warn(\"usePaginatedQuery hit error, resetting pagination state: \" + currResult.message);\n                        setState(createInitialState);\n                        return [\n                            [],\n                            void 0\n                        ];\n                    } else {\n                        throw currResult;\n                    }\n                }\n                const ongoingSplit = currState.ongoingSplits[pageKey];\n                if (ongoingSplit !== void 0) {\n                    if (resultsObject[ongoingSplit[0]] !== void 0 && resultsObject[ongoingSplit[1]] !== void 0) {\n                        setState(completeSplitQuery(pageKey));\n                    }\n                } else if (currResult.splitCursor && (currResult.pageStatus === \"SplitRecommended\" || currResult.pageStatus === \"SplitRequired\" || currResult.page.length > options.initialNumItems * 2)) {\n                    setState(splitQuery(pageKey, currResult.splitCursor, currResult.continueCursor));\n                }\n                if (currResult.pageStatus === \"SplitRequired\") {\n                    return [\n                        allItems,\n                        void 0\n                    ];\n                }\n                allItems.push(...isIncludingPageKeys ? currResult.page.map({\n                    \"usePaginatedQueryInternal.useMemo\": (i)=>({\n                            ...i,\n                            [page]: pageKey.toString()\n                        })\n                }[\"usePaginatedQueryInternal.useMemo\"]) : currResult.page);\n            }\n            return [\n                allItems,\n                currResult\n            ];\n        }\n    }[\"usePaginatedQueryInternal.useMemo\"], [\n        resultsObject,\n        currState.pageKeys,\n        currState.ongoingSplits,\n        options.initialNumItems,\n        createInitialState,\n        logger,\n        isIncludingPageKeys\n    ]);\n    const statusObject = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"usePaginatedQueryInternal.useMemo[statusObject]\": ()=>{\n            if (maybeLastResult === void 0) {\n                if (currState.nextPageKey === 1) {\n                    return {\n                        status: \"LoadingFirstPage\",\n                        isLoading: true,\n                        loadMore: ({\n                            \"usePaginatedQueryInternal.useMemo[statusObject]\": (_numItems)=>{}\n                        })[\"usePaginatedQueryInternal.useMemo[statusObject]\"]\n                    };\n                } else {\n                    return {\n                        status: \"LoadingMore\",\n                        isLoading: true,\n                        loadMore: ({\n                            \"usePaginatedQueryInternal.useMemo[statusObject]\": (_numItems)=>{}\n                        })[\"usePaginatedQueryInternal.useMemo[statusObject]\"]\n                    };\n                }\n            }\n            if (maybeLastResult.isDone) {\n                return {\n                    status: \"Exhausted\",\n                    isLoading: false,\n                    loadMore: ({\n                        \"usePaginatedQueryInternal.useMemo[statusObject]\": (_numItems)=>{}\n                    })[\"usePaginatedQueryInternal.useMemo[statusObject]\"]\n                };\n            }\n            const continueCursor = maybeLastResult.continueCursor;\n            let alreadyLoadingMore = false;\n            return {\n                status: \"CanLoadMore\",\n                isLoading: false,\n                loadMore: ({\n                    \"usePaginatedQueryInternal.useMemo[statusObject]\": (numItems)=>{\n                        if (!alreadyLoadingMore) {\n                            alreadyLoadingMore = true;\n                            setState({\n                                \"usePaginatedQueryInternal.useMemo[statusObject]\": (prevState)=>{\n                                    const pageKeys = [\n                                        ...prevState.pageKeys,\n                                        prevState.nextPageKey\n                                    ];\n                                    const queries = {\n                                        ...prevState.queries\n                                    };\n                                    queries[prevState.nextPageKey] = {\n                                        query: prevState.query,\n                                        args: {\n                                            ...prevState.args,\n                                            paginationOpts: {\n                                                numItems,\n                                                cursor: continueCursor,\n                                                id: prevState.id\n                                            }\n                                        }\n                                    };\n                                    return {\n                                        ...prevState,\n                                        nextPageKey: prevState.nextPageKey + 1,\n                                        pageKeys,\n                                        queries\n                                    };\n                                }\n                            }[\"usePaginatedQueryInternal.useMemo[statusObject]\"]);\n                        }\n                    }\n                })[\"usePaginatedQueryInternal.useMemo[statusObject]\"]\n            };\n        }\n    }[\"usePaginatedQueryInternal.useMemo[statusObject]\"], [\n        maybeLastResult,\n        currState.nextPageKey\n    ]);\n    return {\n        user: {\n            results,\n            ...statusObject\n        },\n        internal: {\n            state: currState\n        }\n    };\n}\nlet paginationId = 0;\nfunction nextPaginationId() {\n    paginationId++;\n    return paginationId;\n}\nfunction resetPaginationId() {\n    paginationId = 0;\n}\nfunction optimisticallyUpdateValueInPaginatedQuery(localStore, query, args, updateValue) {\n    const expectedArgs = JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(args));\n    for (const queryResult of localStore.getAllQueries(query)){\n        if (queryResult.value !== void 0) {\n            const { paginationOpts: _, ...innerArgs } = queryResult.args;\n            if (JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_1__.convexToJson)(innerArgs)) === expectedArgs) {\n                const value = queryResult.value;\n                if (typeof value === \"object\" && value !== null && Array.isArray(value.page)) {\n                    localStore.setQuery(query, queryResult.args, {\n                        ...value,\n                        page: value.page.map(updateValue)\n                    });\n                }\n            }\n        }\n    }\n}\nfunction insertAtTop(options) {\n    const { paginatedQuery, argsToMatch, localQueryStore, item } = options;\n    const queries = localQueryStore.getAllQueries(paginatedQuery);\n    const queriesThatMatch = queries.filter((q)=>{\n        if (argsToMatch === void 0) {\n            return true;\n        }\n        return Object.keys(argsToMatch).every(// @ts-expect-error -- This should be safe since both should be plain objects\n        (k)=>(0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(argsToMatch[k], q.args[k]) === 0);\n    });\n    const firstPage = queriesThatMatch.find((q)=>q.args.paginationOpts.cursor === null);\n    if (firstPage === void 0 || firstPage.value === void 0) {\n        return;\n    }\n    localQueryStore.setQuery(paginatedQuery, firstPage.args, {\n        ...firstPage.value,\n        page: [\n            item,\n            ...firstPage.value.page\n        ]\n    });\n}\nfunction insertAtBottomIfLoaded(options) {\n    const { paginatedQuery, localQueryStore, item, argsToMatch } = options;\n    const queries = localQueryStore.getAllQueries(paginatedQuery);\n    const queriesThatMatch = queries.filter((q)=>{\n        if (argsToMatch === void 0) {\n            return true;\n        }\n        return Object.keys(argsToMatch).every(// @ts-expect-error -- This should be safe since both should be plain objects\n        (k)=>(0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(argsToMatch[k], q.args[k]) === 0);\n    });\n    const lastPage = queriesThatMatch.find((q)=>q.value !== void 0 && q.value.isDone);\n    if (lastPage === void 0) {\n        return;\n    }\n    localQueryStore.setQuery(paginatedQuery, lastPage.args, {\n        ...lastPage.value,\n        page: [\n            ...lastPage.value.page,\n            item\n        ]\n    });\n}\nfunction insertAtPosition(options) {\n    const { paginatedQuery, sortOrder, sortKeyFromItem, localQueryStore, item, argsToMatch } = options;\n    const queries = localQueryStore.getAllQueries(paginatedQuery);\n    const queryGroups = {};\n    for (const query of queries){\n        if (argsToMatch !== void 0 && !Object.keys(argsToMatch).every((k)=>// @ts-ignore why is this not working?\n            argsToMatch[k] === query.args[k])) {\n            continue;\n        }\n        const key = JSON.stringify(Object.fromEntries(Object.entries(query.args).map(([k, v])=>[\n                k,\n                k === \"paginationOpts\" ? v.id : v\n            ])));\n        queryGroups[key] ?? (queryGroups[key] = []);\n        queryGroups[key].push(query);\n    }\n    for (const pageQueries of Object.values(queryGroups)){\n        insertAtPositionInPages({\n            pageQueries,\n            paginatedQuery,\n            sortOrder,\n            sortKeyFromItem,\n            localQueryStore,\n            item\n        });\n    }\n}\nfunction insertAtPositionInPages(options) {\n    const { pageQueries, sortOrder, sortKeyFromItem, localQueryStore, item, paginatedQuery } = options;\n    const insertedKey = sortKeyFromItem(item);\n    const loadedPages = pageQueries.filter((q)=>q.value !== void 0 && q.value.page.length > 0);\n    const sortedPages = loadedPages.sort((a, b)=>{\n        const aKey = sortKeyFromItem(a.value.page[0]);\n        const bKey = sortKeyFromItem(b.value.page[0]);\n        if (sortOrder === \"asc\") {\n            return (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(aKey, bKey);\n        } else {\n            return (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(bKey, aKey);\n        }\n    });\n    const firstLoadedPage = sortedPages[0];\n    if (firstLoadedPage === void 0) {\n        return;\n    }\n    const firstPageKey = sortKeyFromItem(firstLoadedPage.value.page[0]);\n    const isBeforeFirstPage = sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, firstPageKey) <= 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, firstPageKey) >= 0;\n    if (isBeforeFirstPage) {\n        if (firstLoadedPage.args.paginationOpts.cursor === null) {\n            localQueryStore.setQuery(paginatedQuery, firstLoadedPage.args, {\n                ...firstLoadedPage.value,\n                page: [\n                    item,\n                    ...firstLoadedPage.value.page\n                ]\n            });\n        } else {\n            return;\n        }\n        return;\n    }\n    const lastLoadedPage = sortedPages[sortedPages.length - 1];\n    if (lastLoadedPage === void 0) {\n        return;\n    }\n    const lastPageKey = sortKeyFromItem(lastLoadedPage.value.page[lastLoadedPage.value.page.length - 1]);\n    const isAfterLastPage = sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, lastPageKey) >= 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(insertedKey, lastPageKey) <= 0;\n    if (isAfterLastPage) {\n        if (lastLoadedPage.value.isDone) {\n            localQueryStore.setQuery(paginatedQuery, lastLoadedPage.args, {\n                ...lastLoadedPage.value,\n                page: [\n                    ...lastLoadedPage.value.page,\n                    item\n                ]\n            });\n        }\n        return;\n    }\n    const successorPageIndex = sortedPages.findIndex((p)=>sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(p.value.page[0]), insertedKey) > 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(p.value.page[0]), insertedKey) < 0);\n    const pageToUpdate = successorPageIndex === -1 ? sortedPages[sortedPages.length - 1] : sortedPages[successorPageIndex - 1];\n    if (pageToUpdate === void 0) {\n        return;\n    }\n    const indexWithinPage = pageToUpdate.value.page.findIndex((e)=>sortOrder === \"asc\" ? (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(e), insertedKey) >= 0 : (0,_values_compare_js__WEBPACK_IMPORTED_MODULE_5__.compareValues)(sortKeyFromItem(e), insertedKey) <= 0);\n    const newPage = indexWithinPage === -1 ? [\n        ...pageToUpdate.value.page,\n        item\n    ] : [\n        ...pageToUpdate.value.page.slice(0, indexWithinPage),\n        item,\n        ...pageToUpdate.value.page.slice(indexWithinPage)\n    ];\n    localQueryStore.setQuery(paginatedQuery, pageToUpdate.args, {\n        ...pageToUpdate.value,\n        page: newPage\n    });\n} //# sourceMappingURL=use_paginated_query.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9wYWdpbmF0ZWRfcXVlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrQztBQVNzQjtBQUM3QjtBQUtwQjtBQUVtQjtBQUNJO0FBeUM5QixNQUFNLGFBQ0osQ0FBQyxLQUFtQixhQUFxQixpQkFDekMsQ0FBQztRQUNDLE1BQU0sVUFBVTtZQUFFLEdBQUcsVUFBVTtRQUFRO1FBQ3ZDLE1BQU0sWUFBWSxVQUFVO1FBQzVCLE1BQU0sWUFBWSxVQUFVLGNBQWM7UUFDMUMsTUFBTSxjQUFjLFVBQVUsY0FBYztRQUM1QyxRQUFRLFNBQVMsSUFBSTtZQUNuQixPQUFPLFVBQVU7WUFDakIsTUFBTTtnQkFDSixHQUFHLFVBQVU7Z0JBQ2IsZ0JBQWdCO29CQUNkLEdBQUcsVUFBVSxRQUFRLEdBQUcsRUFBRSxLQUFLO29CQUMvQixXQUFXO2dCQUNiO1lBQ0Y7UUFDRjtRQUNBLFFBQVEsU0FBUyxJQUFJO1lBQ25CLE9BQU8sVUFBVTtZQUNqQixNQUFNO2dCQUNKLEdBQUcsVUFBVTtnQkFDYixnQkFBZ0I7b0JBQ2QsR0FBRyxVQUFVLFFBQVEsR0FBRyxFQUFFLEtBQUs7b0JBQy9CLFFBQVE7b0JBQ1IsV0FBVztnQkFDYjtZQUNGO1FBQ0Y7UUFDQSxNQUFNLGdCQUFnQjtZQUFFLEdBQUcsVUFBVTtRQUFjO1FBQ25ELGNBQWMsR0FBRyxJQUFJO1lBQUM7WUFBVyxTQUFTO1NBQUE7UUFDMUMsT0FBTztZQUNMLEdBQUc7WUFDSDtZQUNBO1lBQ0E7UUFDRjtJQUNGO0FBRUYsTUFBTSxxQkFDSixDQUFDLE1BQXNCLENBQUM7UUFDdEIsTUFBTSxpQkFBaUIsVUFBVSxjQUFjLEdBQUc7UUFDbEQsSUFBSSxtQkFBbUIsUUFBVztZQUNoQyxPQUFPO1FBQ1Q7UUFDQSxNQUFNLFVBQVU7WUFBRSxHQUFHLFVBQVU7UUFBUTtRQUN2QyxPQUFPLFFBQVEsR0FBRztRQUNsQixNQUFNLGdCQUFn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QUFhLE1BQU07UUFDMUQsR0FBRyxhQUFhO1FBQ2hCLE1BQU07SUFDUixDQUFDO0FBQ0giLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvcmVhY3QvdXNlX3BhZ2luYXRlZF9xdWVyeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBPcHRpbWlzdGljTG9jYWxTdG9yZSB9IGZyb20gXCIuLi9icm93c2VyL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBGdW5jdGlvblJldHVyblR5cGUsXG4gIFBhZ2luYXRpb25PcHRpb25zLFxuICBwYWdpbmF0aW9uT3B0c1ZhbGlkYXRvcixcbiAgUGFnaW5hdGlvblJlc3VsdCxcbn0gZnJvbSBcIi4uL3NlcnZlci9pbmRleC5qc1wiO1xuaW1wb3J0IHsgQ29udmV4RXJyb3IsIGNvbnZleFRvSnNvbiwgSW5mZXIsIFZhbHVlIH0gZnJvbSBcIi4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdXNlUXVlcmllcyB9IGZyb20gXCIuL3VzZV9xdWVyaWVzLmpzXCI7XG5pbXBvcnQge1xuICBGdW5jdGlvbkFyZ3MsXG4gIEZ1bmN0aW9uUmVmZXJlbmNlLFxuICBnZXRGdW5jdGlvbk5hbWUsXG59IGZyb20gXCIuLi9zZXJ2ZXIvYXBpLmpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJPbWl0LCBFeHBhbmQgfSBmcm9tIFwiLi4vdHlwZV91dGlscy5qc1wiO1xuaW1wb3J0IHsgdXNlQ29udmV4IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlVmFsdWVzIH0gZnJvbSBcIi4uL3ZhbHVlcy9jb21wYXJlLmpzXCI7XG5cbi8qKlxuICogQSB7QGxpbmsgc2VydmVyLkZ1bmN0aW9uUmVmZXJlbmNlfSB0aGF0IGlzIHVzYWJsZSB3aXRoIHtAbGluayB1c2VQYWdpbmF0ZWRRdWVyeX0uXG4gKlxuICogVGhpcyBmdW5jdGlvbiByZWZlcmVuY2UgbXVzdDpcbiAqIC0gUmVmZXIgdG8gYSBwdWJsaWMgcXVlcnlcbiAqIC0gSGF2ZSBhbiBhcmd1bWVudCBuYW1lZCBcInBhZ2luYXRpb25PcHRzXCIgb2YgdHlwZSB7QGxpbmsgc2VydmVyLlBhZ2luYXRpb25PcHRpb25zfVxuICogLSBIYXZlIGEgcmV0dXJuIHR5cGUgb2Yge0BsaW5rIHNlcnZlci5QYWdpbmF0aW9uUmVzdWx0fS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlID0gRnVuY3Rpb25SZWZlcmVuY2U8XG4gIFwicXVlcnlcIixcbiAgXCJwdWJsaWNcIixcbiAgeyBwYWdpbmF0aW9uT3B0czogUGFnaW5hdGlvbk9wdGlvbnMgfSxcbiAgUGFnaW5hdGlvblJlc3VsdDxhbnk+XG4+O1xuXG4vLyBJbmNyZW1lbnRpbmcgaW50ZWdlciBmb3IgZWFjaCBwYWdlIHF1ZXJpZWQgaW4gdGhlIHVzZVBhZ2luYXRlZFF1ZXJ5IGhvb2suXG50eXBlIFF1ZXJ5UGFnZUtleSA9IG51bWJlcjtcblxudHlwZSBVc2VQYWdpbmF0ZWRRdWVyeVN0YXRlID0ge1xuICBxdWVyeTogRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPjtcbiAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+O1xuICBpZDogbnVtYmVyO1xuICBuZXh0UGFnZUtleTogUXVlcnlQYWdlS2V5O1xuICBwYWdlS2V5czogUXVlcnlQYWdlS2V5W107XG4gIHF1ZXJpZXM6IFJlY29yZDxcbiAgICBRdWVyeVBhZ2VLZXksXG4gICAge1xuICAgICAgcXVlcnk6IEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj47XG4gICAgICAvLyBVc2UgdGhlIHZhbGlkYXRvciB0eXBlIGFzIGEgdGVzdCB0aGF0IGl0IG1hdGNoZXMgdGhlIGFyZ3NcbiAgICAgIC8vIHdlIGdlbmVyYXRlLlxuICAgICAgYXJnczogeyBwYWdpbmF0aW9uT3B0czogSW5mZXI8dHlwZW9mIHBhZ2luYXRpb25PcHRzVmFsaWRhdG9yPiB9O1xuICAgIH1cbiAgPjtcbiAgb25nb2luZ1NwbGl0czogUmVjb3JkPFF1ZXJ5UGFnZUtleSwgW1F1ZXJ5UGFnZUtleSwgUXVlcnlQYWdlS2V5XT47XG4gIHNraXA6IGJvb2xlYW47XG59O1xuXG5jb25zdCBzcGxpdFF1ZXJ5ID1cbiAgKGtleTogUXVlcnlQYWdlS2V5LCBzcGxpdEN1cnNvcjogc3RyaW5nLCBjb250aW51ZUN1cnNvcjogc3RyaW5nKSA9PlxuICAocHJldlN0YXRlOiBVc2VQYWdpbmF0ZWRRdWVyeVN0YXRlKSA9PiB7XG4gICAgY29uc3QgcXVlcmllcyA9IHsgLi4ucHJldlN0YXRlLnF1ZXJpZXMgfTtcbiAgICBjb25zdCBzcGxpdEtleTEgPSBwcmV2U3RhdGUubmV4dFBhZ2VLZXk7XG4gICAgY29uc3Qgc3BsaXRLZXkyID0gcHJldlN0YXRlLm5leHRQYWdlS2V5ICsgMTtcbiAgICBjb25zdCBuZXh0UGFnZUtleSA9IHByZXZTdGF0ZS5uZXh0UGFnZUtleSArIDI7XG4gICAgcXVlcmllc1tzcGxpdEtleTFdID0ge1xuICAgICAgcXVlcnk6IHByZXZTdGF0ZS5xdWVyeSxcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLi4ucHJldlN0YXRlLmFyZ3MsXG4gICAgICAgIHBhZ2luYXRpb25PcHRzOiB7XG4gICAgICAgICAgLi4ucHJldlN0YXRlLnF1ZXJpZXNba2V5XS5hcmdzLnBhZ2luYXRpb25PcHRzLFxuICAgICAgICAgIGVuZEN1cnNvcjogc3BsaXRDdXJzb3IsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH07XG4gICAgcXVlcmllc1tzcGxpdEtleTJdID0ge1xuICAgICAgcXVlcnk6IHByZXZTdGF0ZS5xdWVyeSxcbiAgICAgIGFyZ3M6IHtcbiAgICAgICAgLi4ucHJldlN0YXRlLmFyZ3MsXG4gICAgICAgIHBhZ2luYXRpb25PcHRzOiB7XG4gICAgICAgICAgLi4ucHJldlN0YXRlLnF1ZXJpZXNba2V5XS5hcmdzLnBhZ2luYXRpb25PcHRzLFxuICAgICAgICAgIGN1cnNvcjogc3BsaXRDdXJzb3IsXG4gICAgICAgICAgZW5kQ3Vyc29yOiBjb250aW51ZUN1cnNvcixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdCBvbmdvaW5nU3BsaXRzID0geyAuLi5wcmV2U3RhdGUub25nb2luZ1NwbGl0cyB9O1xuICAgIG9uZ29pbmdTcGxpdHNba2V5XSA9IFtzcGxpdEtleTEsIHNwbGl0S2V5Ml07XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgIG5leHRQYWdlS2V5LFxuICAgICAgcXVlcmllcyxcbiAgICAgIG9uZ29pbmdTcGxpdHMsXG4gICAgfTtcbiAgfTtcblxuY29uc3QgY29tcGxldGVTcGxpdFF1ZXJ5ID1cbiAgKGtleTogUXVlcnlQYWdlS2V5KSA9PiAocHJldlN0YXRlOiBVc2VQYWdpbmF0ZWRRdWVyeVN0YXRlKSA9PiB7XG4gICAgY29uc3QgY29tcGxldGVkU3BsaXQgPSBwcmV2U3RhdGUub25nb2luZ1NwbGl0c1trZXldO1xuICAgIGlmIChjb21wbGV0ZWRTcGxpdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gcHJldlN0YXRlO1xuICAgIH1cbiAgICBjb25zdCBxdWVyaWVzID0geyAuLi5wcmV2U3RhdGUucXVlcmllcyB9O1xuICAgIGRlbGV0ZSBxdWVyaWVzW2tleV07XG4gICAgY29uc3Qgb25nb2luZ1NwbGl0cyA9IHsgLi4ucHJldlN0YXRlLm9uZ29pbmdTcGxpdHMgfTtcbiAgICBkZWxldGUgb25nb2luZ1NwbGl0c1trZXldO1xuICAgIGxldCBwYWdlS2V5cyA9IHByZXZTdGF0ZS5wYWdlS2V5cy5zbGljZSgpO1xuICAgIGNvbnN0IHBhZ2VJbmRleCA9IHByZXZTdGF0ZS5wYWdlS2V5cy5maW5kSW5kZXgoKHYpID0+IHYgPT09IGtleSk7XG4gICAgaWYgKHBhZ2VJbmRleCA+PSAwKSB7XG4gICAgICBwYWdlS2V5cyA9IFtcbiAgICAgICAgLi4ucHJldlN0YXRlLnBhZ2VLZXlzLnNsaWNlKDAsIHBhZ2VJbmRleCksXG4gICAgICAgIC4uLmNvbXBsZXRlZFNwbGl0LFxuICAgICAgICAuLi5wcmV2U3RhdGUucGFnZUtleXMuc2xpY2UocGFnZUluZGV4ICsgMSksXG4gICAgICBdO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJldlN0YXRlLFxuICAgICAgcXVlcmllcyxcbiAgICAgIHBhZ2VLZXlzLFxuICAgICAgb25nb2luZ1NwbGl0cyxcbiAgICB9O1xuICB9O1xuXG4vKipcbiAqIExvYWQgZGF0YSByZWFjdGl2ZWx5IGZyb20gYSBwYWdpbmF0ZWQgcXVlcnkgdG8gYSBjcmVhdGUgYSBncm93aW5nIGxpc3QuXG4gKlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBwb3dlciBcImluZmluaXRlIHNjcm9sbFwiIFVJcy5cbiAqXG4gKiBUaGlzIGhvb2sgbXVzdCBiZSB1c2VkIHdpdGggcHVibGljIHF1ZXJ5IHJlZmVyZW5jZXMgdGhhdCBtYXRjaFxuICoge0BsaW5rIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlfS5cbiAqXG4gKiBgdXNlUGFnaW5hdGVkUXVlcnlgIGNvbmNhdGVuYXRlcyBhbGwgdGhlIHBhZ2VzIG9mIHJlc3VsdHMgaW50byBhIHNpbmdsZSBsaXN0XG4gKiBhbmQgbWFuYWdlcyB0aGUgY29udGludWF0aW9uIGN1cnNvcnMgd2hlbiByZXF1ZXN0aW5nIG1vcmUgaXRlbXMuXG4gKlxuICogRXhhbXBsZSB1c2FnZTpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHsgcmVzdWx0cywgc3RhdHVzLCBpc0xvYWRpbmcsIGxvYWRNb3JlIH0gPSB1c2VQYWdpbmF0ZWRRdWVyeShcbiAqICAgYXBpLm1lc3NhZ2VzLmxpc3QsXG4gKiAgIHsgY2hhbm5lbDogXCIjZ2VuZXJhbFwiIH0sXG4gKiAgIHsgaW5pdGlhbE51bUl0ZW1zOiA1IH1cbiAqICk7XG4gKiBgYGBcbiAqXG4gKiBJZiB0aGUgcXVlcnkgcmVmZXJlbmNlIG9yIGFyZ3VtZW50cyBjaGFuZ2UsIHRoZSBwYWdpbmF0aW9uIHN0YXRlIHdpbGwgYmUgcmVzZXRcbiAqIHRvIHRoZSBmaXJzdCBwYWdlLiBTaW1pbGFybHksIGlmIGFueSBvZiB0aGUgcGFnZXMgcmVzdWx0IGluIGFuIEludmFsaWRDdXJzb3JcbiAqIGVycm9yIG9yIGFuIGVycm9yIGFzc29jaWF0ZWQgd2l0aCB0b28gbXVjaCBkYXRhLCB0aGUgcGFnaW5hdGlvbiBzdGF0ZSB3aWxsIGFsc29cbiAqIHJlc2V0IHRvIHRoZSBmaXJzdCBwYWdlLlxuICpcbiAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgcGFnaW5hdGlvbiwgc2VlIFtQYWdpbmF0ZWQgUXVlcmllc10oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvZGF0YWJhc2UvcGFnaW5hdGlvbikuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gQSBGdW5jdGlvblJlZmVyZW5jZSB0byB0aGUgcHVibGljIHF1ZXJ5IGZ1bmN0aW9uIHRvIHJ1bi5cbiAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBxdWVyeSBmdW5jdGlvbiwgZXhjbHVkaW5nXG4gKiB0aGUgYHBhZ2luYXRpb25PcHRzYCBwcm9wZXJ0eS4gVGhhdCBwcm9wZXJ0eSBpcyBpbmplY3RlZCBieSB0aGlzIGhvb2suXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCBzcGVjaWZ5aW5nIHRoZSBgaW5pdGlhbE51bUl0ZW1zYCB0byBiZSBsb2FkZWQgaW5cbiAqIHRoZSBmaXJzdCBwYWdlLlxuICogQHJldHVybnMgQSB7QGxpbmsgVXNlUGFnaW5hdGVkUXVlcnlSZXN1bHR9IHRoYXQgaW5jbHVkZXMgdGhlIGN1cnJlbnRseSBsb2FkZWRcbiAqIGl0ZW1zLCB0aGUgc3RhdHVzIG9mIHRoZSBwYWdpbmF0aW9uLCBhbmQgYSBgbG9hZE1vcmVgIGZ1bmN0aW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhZ2luYXRlZFF1ZXJ5PFF1ZXJ5IGV4dGVuZHMgUGFnaW5hdGVkUXVlcnlSZWZlcmVuY2U+KFxuICBxdWVyeTogUXVlcnksXG4gIGFyZ3M6IFBhZ2luYXRlZFF1ZXJ5QXJnczxRdWVyeT4gfCBcInNraXBcIixcbiAgb3B0aW9uczogeyBpbml0aWFsTnVtSXRlbXM6IG51bWJlciB9LFxuKTogVXNlUGFnaW5hdGVkUXVlcnlSZXR1cm5UeXBlPFF1ZXJ5PiB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlUGFnaW5hdGVkUXVlcnlJbnRlcm5hbChxdWVyeSwgYXJncywgb3B0aW9ucyk7XG4gIHJldHVybiB1c2VyO1xufVxuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgY29uc3QgaW5jbHVkZVBhZ2UgPSBTeW1ib2woXCJpbmNsdWRlUGFnZUtleXNcIik7XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjb25zdCBwYWdlID0gU3ltYm9sKFwicGFnZVwiKTtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhZ2luYXRlZFF1ZXJ5SW50ZXJuYWw8XG4gIFF1ZXJ5IGV4dGVuZHMgUGFnaW5hdGVkUXVlcnlSZWZlcmVuY2UsXG4+KFxuICBxdWVyeTogUXVlcnksXG4gIGFyZ3M6IFBhZ2luYXRlZFF1ZXJ5QXJnczxRdWVyeT4gfCBcInNraXBcIixcbiAgb3B0aW9uczoge1xuICAgIGluaXRpYWxOdW1JdGVtczogbnVtYmVyO1xuICAgIFtpbmNsdWRlUGFnZV0/OiBib29sZWFuO1xuICB9LFxuKToge1xuICB1c2VyOiBVc2VQYWdpbmF0ZWRRdWVyeVJldHVyblR5cGU8UXVlcnk+O1xuICBpbnRlcm5hbDogeyBzdGF0ZTogVXNlUGFnaW5hdGVkUXVlcnlTdGF0ZSB9O1xufSB7XG4gIGlmIChcbiAgICB0eXBlb2Ygb3B0aW9ucz8uaW5pdGlhbE51bUl0ZW1zICE9PSBcIm51bWJlclwiIHx8XG4gICAgb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMgPCAwXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBcXGBvcHRpb25zLmluaXRpYWxOdW1JdGVtc1xcYCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyLiBSZWNlaXZlZCBcXGAke29wdGlvbnM/LmluaXRpYWxOdW1JdGVtc31cXGAuYCxcbiAgICApO1xuICB9XG4gIGNvbnN0IHNraXAgPSBhcmdzID09PSBcInNraXBcIjtcbiAgY29uc3QgYXJnc09iamVjdCA9IHNraXAgPyB7fSA6IGFyZ3M7XG4gIGNvbnN0IHF1ZXJ5TmFtZSA9IGdldEZ1bmN0aW9uTmFtZShxdWVyeSk7XG4gIGNvbnN0IGNyZWF0ZUluaXRpYWxTdGF0ZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBpZCA9IG5leHRQYWdpbmF0aW9uSWQoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBhcmdzOiBhcmdzT2JqZWN0IGFzIFJlY29yZDxzdHJpbmcsIFZhbHVlPixcbiAgICAgICAgaWQsXG4gICAgICAgIG5leHRQYWdlS2V5OiAxLFxuICAgICAgICBwYWdlS2V5czogc2tpcCA/IFtdIDogWzBdLFxuICAgICAgICBxdWVyaWVzOiBza2lwXG4gICAgICAgICAgPyAoe30gYXMgVXNlUGFnaW5hdGVkUXVlcnlTdGF0ZVtcInF1ZXJpZXNcIl0pXG4gICAgICAgICAgOiB7XG4gICAgICAgICAgICAgIDA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgICBhcmdzOiB7XG4gICAgICAgICAgICAgICAgICAuLi5hcmdzT2JqZWN0LFxuICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbk9wdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbnVtSXRlbXM6IG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgb25nb2luZ1NwbGl0czoge30sXG4gICAgICAgIHNraXAsXG4gICAgICB9O1xuICAgIH07XG4gICAgLy8gRVNMaW50IGRvZXNuJ3QgbGlrZSB0aGF0IHdlJ3JlIHN0cmluZ2lmeWluZyB0aGUgYXJncy4gV2UgZG8gdGhpcyBiZWNhdXNlXG4gICAgLy8gd2Ugd2FudCB0byBhdm9pZCByZXJlbmRlcmluZyBpZiB0aGUgYXJncyBhcmUgYSBkaWZmZXJlbnRcbiAgICAvLyBvYmplY3QgdGhhdCBzZXJpYWxpemVzIHRvIHRoZSBzYW1lIHJlc3VsdC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gIH0sIFtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKGFyZ3NPYmplY3QgYXMgVmFsdWUpKSxcbiAgICBxdWVyeU5hbWUsXG4gICAgb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMsXG4gICAgc2tpcCxcbiAgXSk7XG5cbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPVxuICAgIHVzZVN0YXRlPFVzZVBhZ2luYXRlZFF1ZXJ5U3RhdGU+KGNyZWF0ZUluaXRpYWxTdGF0ZSk7XG5cbiAgLy8gYGN1cnJTdGF0ZWAgaXMgdGhlIHN0YXRlIHRoYXQgd2UnbGwgcmVuZGVyIGJhc2VkIG9uLlxuICBsZXQgY3VyclN0YXRlID0gc3RhdGU7XG4gIGlmIChcbiAgICBnZXRGdW5jdGlvbk5hbWUocXVlcnkpICE9PSBnZXRGdW5jdGlvbk5hbWUoc3RhdGUucXVlcnkpIHx8XG4gICAgSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKGFyZ3NPYmplY3QgYXMgVmFsdWUpKSAhPT1cbiAgICAgIEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihzdGF0ZS5hcmdzKSkgfHxcbiAgICBza2lwICE9PSBzdGF0ZS5za2lwXG4gICkge1xuICAgIGN1cnJTdGF0ZSA9IGNyZWF0ZUluaXRpYWxTdGF0ZSgpO1xuICAgIHNldFN0YXRlKGN1cnJTdGF0ZSk7XG4gIH1cbiAgY29uc3QgY29udmV4Q2xpZW50ID0gdXNlQ29udmV4KCk7XG4gIGNvbnN0IGxvZ2dlciA9IGNvbnZleENsaWVudC5sb2dnZXI7XG5cbiAgY29uc3QgcmVzdWx0c09iamVjdCA9IHVzZVF1ZXJpZXMoY3VyclN0YXRlLnF1ZXJpZXMpO1xuXG4gIGNvbnN0IGlzSW5jbHVkaW5nUGFnZUtleXMgPSBvcHRpb25zW2luY2x1ZGVQYWdlXSA/PyBmYWxzZTtcbiAgY29uc3QgW3Jlc3VsdHMsIG1heWJlTGFzdFJlc3VsdF06IFtcbiAgICBWYWx1ZVtdLFxuICAgIHVuZGVmaW5lZCB8IFBhZ2luYXRpb25SZXN1bHQ8VmFsdWU+LFxuICBdID0gdXNlTWVtbygoKSA9PiB7XG4gICAgbGV0IGN1cnJSZXN1bHQgPSB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBhbGxJdGVtcyA9IFtdO1xuICAgIGZvciAoY29uc3QgcGFnZUtleSBvZiBjdXJyU3RhdGUucGFnZUtleXMpIHtcbiAgICAgIGN1cnJSZXN1bHQgPSByZXN1bHRzT2JqZWN0W3BhZ2VLZXldO1xuICAgICAgaWYgKGN1cnJSZXN1bHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJSZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY3VyclJlc3VsdC5tZXNzYWdlLmluY2x1ZGVzKFwiSW52YWxpZEN1cnNvclwiKSB8fFxuICAgICAgICAgIChjdXJyUmVzdWx0IGluc3RhbmNlb2YgQ29udmV4RXJyb3IgJiZcbiAgICAgICAgICAgIHR5cGVvZiBjdXJyUmVzdWx0LmRhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGN1cnJSZXN1bHQuZGF0YT8uaXNDb252ZXhTeXN0ZW1FcnJvciA9PT0gdHJ1ZSAmJlxuICAgICAgICAgICAgY3VyclJlc3VsdC5kYXRhPy5wYWdpbmF0aW9uRXJyb3IgPT09IFwiSW52YWxpZEN1cnNvclwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyAtIEludmFsaWRDdXJzb3I6IElmIHRoZSBjdXJzb3IgaXMgaW52YWxpZCwgcHJvYmFibHkgdGhlIHBhZ2luYXRlZFxuICAgICAgICAgIC8vIGRhdGFiYXNlIHF1ZXJ5IHdhcyBkYXRhLWRlcGVuZGVudCBhbmQgY2hhbmdlZCB1bmRlcm5lYXRoIHVzLiBUaGVcbiAgICAgICAgICAvLyBjdXJzb3IgaW4gdGhlIHBhcmFtcyBvciBqb3VybmFsIG5vIGxvbmdlciBtYXRjaGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgLy8gZGF0YWJhc2UgcXVlcnkuXG5cbiAgICAgICAgICAvLyBJbiBhbGwgY2FzZXMsIHdlIHdhbnQgdG8gcmVzdGFydCBwYWdpbmF0aW9uIHRvIHRocm93IGF3YXkgYWxsIG91clxuICAgICAgICAgIC8vIGV4aXN0aW5nIGN1cnNvcnMuXG4gICAgICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgICAgICBcInVzZVBhZ2luYXRlZFF1ZXJ5IGhpdCBlcnJvciwgcmVzZXR0aW5nIHBhZ2luYXRpb24gc3RhdGU6IFwiICtcbiAgICAgICAgICAgICAgY3VyclJlc3VsdC5tZXNzYWdlLFxuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0U3RhdGUoY3JlYXRlSW5pdGlhbFN0YXRlKTtcbiAgICAgICAgICByZXR1cm4gW1tdLCB1bmRlZmluZWRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IGN1cnJSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9uZ29pbmdTcGxpdCA9IGN1cnJTdGF0ZS5vbmdvaW5nU3BsaXRzW3BhZ2VLZXldO1xuICAgICAgaWYgKG9uZ29pbmdTcGxpdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICByZXN1bHRzT2JqZWN0W29uZ29pbmdTcGxpdFswXV0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgIHJlc3VsdHNPYmplY3Rbb25nb2luZ1NwbGl0WzFdXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIEJvdGggcGFnZXMgb2YgdGhlIHNwbGl0IGhhdmUgcmVzdWx0cyBub3cuIFN3YXAgdGhlbSBpbi5cbiAgICAgICAgICBzZXRTdGF0ZShjb21wbGV0ZVNwbGl0UXVlcnkocGFnZUtleSkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBjdXJyUmVzdWx0LnNwbGl0Q3Vyc29yICYmXG4gICAgICAgIChjdXJyUmVzdWx0LnBhZ2VTdGF0dXMgPT09IFwiU3BsaXRSZWNvbW1lbmRlZFwiIHx8XG4gICAgICAgICAgY3VyclJlc3VsdC5wYWdlU3RhdHVzID09PSBcIlNwbGl0UmVxdWlyZWRcIiB8fFxuICAgICAgICAgIGN1cnJSZXN1bHQucGFnZS5sZW5ndGggPiBvcHRpb25zLmluaXRpYWxOdW1JdGVtcyAqIDIpXG4gICAgICApIHtcbiAgICAgICAgLy8gSWYgYSBzaW5nbGUgcGFnZSBoYXMgbW9yZSB0aGFuIGRvdWJsZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIGl0ZW1zLFxuICAgICAgICAvLyBvciBpZiB0aGUgc2VydmVyIHJlcXVlc3RzIGEgc3BsaXQsIHNwbGl0IHRoZSBwYWdlIGludG8gdHdvLlxuICAgICAgICBzZXRTdGF0ZShcbiAgICAgICAgICBzcGxpdFF1ZXJ5KFxuICAgICAgICAgICAgcGFnZUtleSxcbiAgICAgICAgICAgIGN1cnJSZXN1bHQuc3BsaXRDdXJzb3IsXG4gICAgICAgICAgICBjdXJyUmVzdWx0LmNvbnRpbnVlQ3Vyc29yLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoY3VyclJlc3VsdC5wYWdlU3RhdHVzID09PSBcIlNwbGl0UmVxdWlyZWRcIikge1xuICAgICAgICAvLyBJZiBwYWdlU3RhdHVzIGlzICdTcGxpdFJlcXVpcmVkJywgaXQgbWVhbnMgdGhlIHNlcnZlciB3YXMgbm90IGFibGUgdG9cbiAgICAgICAgLy8gZmV0Y2ggdGhlIGZ1bGwgcGFnZS4gU28gd2Ugc3RvcCByZXN1bHRzIGJlZm9yZSB0aGUgaW5jb21wbGV0ZVxuICAgICAgICAvLyBwYWdlIGFuZCByZXR1cm4gJ0xvYWRpbmdNb3JlJyB3aGlsZSB0aGUgcGFnZSBpcyBzcGxpdHRpbmcuXG4gICAgICAgIHJldHVybiBbYWxsSXRlbXMsIHVuZGVmaW5lZF07XG4gICAgICB9XG4gICAgICBhbGxJdGVtcy5wdXNoKFxuICAgICAgICAuLi4oaXNJbmNsdWRpbmdQYWdlS2V5c1xuICAgICAgICAgID8gY3VyclJlc3VsdC5wYWdlLm1hcCgoaTogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAuLi5pLFxuICAgICAgICAgICAgICBbcGFnZV06IHBhZ2VLZXkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIDogY3VyclJlc3VsdC5wYWdlKSxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBbYWxsSXRlbXMsIGN1cnJSZXN1bHRdO1xuICB9LCBbXG4gICAgcmVzdWx0c09iamVjdCxcbiAgICBjdXJyU3RhdGUucGFnZUtleXMsXG4gICAgY3VyclN0YXRlLm9uZ29pbmdTcGxpdHMsXG4gICAgb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMsXG4gICAgY3JlYXRlSW5pdGlhbFN0YXRlLFxuICAgIGxvZ2dlcixcbiAgICBpc0luY2x1ZGluZ1BhZ2VLZXlzLFxuICBdKTtcblxuICBjb25zdCBzdGF0dXNPYmplY3QgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBpZiAobWF5YmVMYXN0UmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChjdXJyU3RhdGUubmV4dFBhZ2VLZXkgPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IFwiTG9hZGluZ0ZpcnN0UGFnZVwiLFxuICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICBsb2FkTW9yZTogKF9udW1JdGVtczogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAvLyBJbnRlbnRpb25hbCBub29wLlxuICAgICAgICAgIH0sXG4gICAgICAgIH0gYXMgY29uc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1czogXCJMb2FkaW5nTW9yZVwiLFxuICAgICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICBsb2FkTW9yZTogKF9udW1JdGVtczogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAvLyBJbnRlbnRpb25hbCBub29wLlxuICAgICAgICAgIH0sXG4gICAgICAgIH0gYXMgY29uc3Q7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXliZUxhc3RSZXN1bHQuaXNEb25lKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IFwiRXhoYXVzdGVkXCIsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGxvYWRNb3JlOiAoX251bUl0ZW1zOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAvLyBJbnRlbnRpb25hbCBub29wLlxuICAgICAgICB9LFxuICAgICAgfSBhcyBjb25zdDtcbiAgICB9XG4gICAgY29uc3QgY29udGludWVDdXJzb3IgPSBtYXliZUxhc3RSZXN1bHQuY29udGludWVDdXJzb3I7XG4gICAgbGV0IGFscmVhZHlMb2FkaW5nTW9yZSA9IGZhbHNlO1xuICAgIHJldHVybiB7XG4gICAgICBzdGF0dXM6IFwiQ2FuTG9hZE1vcmVcIixcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBsb2FkTW9yZTogKG51bUl0ZW1zOiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKCFhbHJlYWR5TG9hZGluZ01vcmUpIHtcbiAgICAgICAgICBhbHJlYWR5TG9hZGluZ01vcmUgPSB0cnVlO1xuICAgICAgICAgIHNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhZ2VLZXlzID0gWy4uLnByZXZTdGF0ZS5wYWdlS2V5cywgcHJldlN0YXRlLm5leHRQYWdlS2V5XTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJpZXMgPSB7IC4uLnByZXZTdGF0ZS5xdWVyaWVzIH07XG4gICAgICAgICAgICBxdWVyaWVzW3ByZXZTdGF0ZS5uZXh0UGFnZUtleV0gPSB7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBwcmV2U3RhdGUucXVlcnksXG4gICAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgICAuLi5wcmV2U3RhdGUuYXJncyxcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uT3B0czoge1xuICAgICAgICAgICAgICAgICAgbnVtSXRlbXMsXG4gICAgICAgICAgICAgICAgICBjdXJzb3I6IGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgICAgICAgICAgICAgaWQ6IHByZXZTdGF0ZS5pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIC4uLnByZXZTdGF0ZSxcbiAgICAgICAgICAgICAgbmV4dFBhZ2VLZXk6IHByZXZTdGF0ZS5uZXh0UGFnZUtleSArIDEsXG4gICAgICAgICAgICAgIHBhZ2VLZXlzLFxuICAgICAgICAgICAgICBxdWVyaWVzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9IGFzIGNvbnN0O1xuICB9LCBbbWF5YmVMYXN0UmVzdWx0LCBjdXJyU3RhdGUubmV4dFBhZ2VLZXldKTtcblxuICByZXR1cm4ge1xuICAgIHVzZXI6IHtcbiAgICAgIHJlc3VsdHMsXG4gICAgICAuLi5zdGF0dXNPYmplY3QsXG4gICAgfSxcbiAgICBpbnRlcm5hbDogeyBzdGF0ZTogY3VyclN0YXRlIH0sXG4gIH07XG59XG5cbmxldCBwYWdpbmF0aW9uSWQgPSAwO1xuLyoqXG4gKiBHZW5lcmF0ZSBhIG5ldywgdW5pcXVlIElEIGZvciBhIHBhZ2luYXRpb24gc2Vzc2lvbi5cbiAqXG4gKiBFdmVyeSB1c2FnZSBvZiB7QGxpbmsgdXNlUGFnaW5hdGVkUXVlcnl9IHB1dHMgYSB1bmlxdWUgSUQgaW50byB0aGVcbiAqIHF1ZXJ5IGZ1bmN0aW9uIGFyZ3VtZW50cyBhcyBhIFwiY2FjaGUtYnVzdGVyXCIuIFRoaXMgc2VydmVzIHR3byBwdXJwb3NlczpcbiAqXG4gKiAxLiBBbGwgY2FsbHMgdG8ge0BsaW5rIHVzZVBhZ2luYXRlZFF1ZXJ5fSBoYXZlIGluZGVwZW5kZW50IHF1ZXJ5XG4gKiBqb3VybmFscy5cbiAqXG4gKiBFdmVyeSB0aW1lIHdlIHN0YXJ0IGEgbmV3IHBhZ2luYXRpb24gc2Vzc2lvbiwgd2UnbGwgbG9hZCB0aGUgZmlyc3QgcGFnZSBvZlxuICogcmVzdWx0cyBhbmQgcmVjZWl2ZSBhIGZyZXNoIGpvdXJuYWwuIFdpdGhvdXQgdGhlIElELCB3ZSBtaWdodCBpbnN0ZWFkIHJldXNlXG4gKiBhIHF1ZXJ5IHN1YnNjcmlwdGlvbiBhbHJlYWR5IHByZXNlbnQgaW4gb3VyIGNsaWVudC4gVGhpcyBpc24ndCBkZXNpcmFibGVcbiAqIGJlY2F1c2UgdGhlIGV4aXN0aW5nIHF1ZXJ5IGZ1bmN0aW9uIHJlc3VsdCBtYXkgaGF2ZSBncm93biBvciBzaHJ1bmsgZnJvbSB0aGVcbiAqIHJlcXVlc3RlZCBgaW5pdGlhbE51bUl0ZW1zYC5cbiAqXG4gKiAyLiBXZSBjYW4gcmVzdGFydCB0aGUgcGFnaW5hdGlvbiBzZXNzaW9uIG9uIHNvbWUgdHlwZXMgb2YgZXJyb3JzLlxuICpcbiAqIFNvbWV0aW1lcyB3ZSB3YW50IHRvIHJlc3RhcnQgcGFnaW5hdGlvbiBmcm9tIHRoZSBiZWdpbm5pbmcgaWYgd2UgaGl0IGFuIGVycm9yLlxuICogU2ltaWxhciB0byAoMSksIHdlJ2QgbGlrZSB0byBlbnN1cmUgdGhhdCB0aGlzIG5ldyBzZXNzaW9uIGFjdHVhbGx5IHJlcXVlc3RzXG4gKiBpdHMgZmlyc3QgcGFnZSBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGRvZXNuJ3QgcmV1c2UgYSBxdWVyeSByZXN1bHQgYWxyZWFkeVxuICogcHJlc2VudCBpbiB0aGUgY2xpZW50IHRoYXQgbWF5IGhhdmUgaGl0IHRoZSBlcnJvci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFnaW5hdGlvbiBJRC5cbiAqL1xuZnVuY3Rpb24gbmV4dFBhZ2luYXRpb25JZCgpOiBudW1iZXIge1xuICBwYWdpbmF0aW9uSWQrKztcbiAgcmV0dXJuIHBhZ2luYXRpb25JZDtcbn1cblxuLyoqXG4gKiBSZXNldCBwYWdpbmF0aW9uIGlkIGZvciB0ZXN0cyBvbmx5LCBzbyB0ZXN0cyBrbm93IHdoYXQgaXQgaXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFBhZ2luYXRpb25JZCgpIHtcbiAgcGFnaW5hdGlvbklkID0gMDtcbn1cblxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHtAbGluayB1c2VQYWdpbmF0ZWRRdWVyeX0gaG9vay5cbiAqXG4gKiBUaGlzIGluY2x1ZGVzOlxuICogLSBgcmVzdWx0c2AgLSBBbiBhcnJheSBvZiB0aGUgY3VycmVudGx5IGxvYWRlZCByZXN1bHRzLlxuICogLSBgaXNMb2FkaW5nYCAtIFdoZXRoZXIgdGhlIGhvb2sgaXMgY3VycmVudGx5IGxvYWRpbmcgcmVzdWx0cy5cbiAqIC0gYHN0YXR1c2AgLSBUaGUgc3RhdHVzIG9mIHRoZSBwYWdpbmF0aW9uLiBUaGUgcG9zc2libGUgc3RhdHVzZXMgYXJlOlxuICogICAtIFwiTG9hZGluZ0ZpcnN0UGFnZVwiOiBUaGUgaG9vayBpcyBsb2FkaW5nIHRoZSBmaXJzdCBwYWdlIG9mIHJlc3VsdHMuXG4gKiAgIC0gXCJDYW5Mb2FkTW9yZVwiOiBUaGlzIHF1ZXJ5IG1heSBoYXZlIG1vcmUgaXRlbXMgdG8gZmV0Y2guIENhbGwgYGxvYWRNb3JlYCB0b1xuICogICBmZXRjaCBhbm90aGVyIHBhZ2UuXG4gKiAgIC0gXCJMb2FkaW5nTW9yZVwiOiBXZSdyZSBjdXJyZW50bHkgbG9hZGluZyBhbm90aGVyIHBhZ2Ugb2YgcmVzdWx0cy5cbiAqICAgLSBcIkV4aGF1c3RlZFwiOiBXZSd2ZSBwYWdpbmF0ZWQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdC5cbiAqIC0gYGxvYWRNb3JlKG4pYCBBIGNhbGxiYWNrIHRvIGZldGNoIG1vcmUgcmVzdWx0cy4gVGhpcyB3aWxsIG9ubHkgZmV0Y2ggbW9yZVxuICogcmVzdWx0cyBpZiB0aGUgc3RhdHVzIGlzIFwiQ2FuTG9hZE1vcmVcIi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFVzZVBhZ2luYXRlZFF1ZXJ5UmVzdWx0PEl0ZW0+ID0ge1xuICByZXN1bHRzOiBJdGVtW107XG4gIGxvYWRNb3JlOiAobnVtSXRlbXM6IG51bWJlcikgPT4gdm9pZDtcbn0gJiAoXG4gIHwge1xuICAgICAgc3RhdHVzOiBcIkxvYWRpbmdGaXJzdFBhZ2VcIjtcbiAgICAgIGlzTG9hZGluZzogdHJ1ZTtcbiAgICB9XG4gIHwge1xuICAgICAgc3RhdHVzOiBcIkNhbkxvYWRNb3JlXCI7XG4gICAgICBpc0xvYWRpbmc6IGZhbHNlO1xuICAgIH1cbiAgfCB7XG4gICAgICBzdGF0dXM6IFwiTG9hZGluZ01vcmVcIjtcbiAgICAgIGlzTG9hZGluZzogdHJ1ZTtcbiAgICB9XG4gIHwge1xuICAgICAgc3RhdHVzOiBcIkV4aGF1c3RlZFwiO1xuICAgICAgaXNMb2FkaW5nOiBmYWxzZTtcbiAgICB9XG4pO1xuXG4vKipcbiAqIFRoZSBwb3NzaWJsZSBwYWdpbmF0aW9uIHN0YXR1c2VzIGluIHtAbGluayBVc2VQYWdpbmF0ZWRRdWVyeVJlc3VsdH0uXG4gKlxuICogVGhpcyBpcyBhIHVuaW9uIG9mIHN0cmluZyBsaXRlcmFsIHR5cGVzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBQYWdpbmF0aW9uU3RhdHVzID0gVXNlUGFnaW5hdGVkUXVlcnlSZXN1bHQ8YW55PltcInN0YXR1c1wiXTtcblxuLyoqXG4gKiBHaXZlbiBhIHtAbGluayBQYWdpbmF0ZWRRdWVyeVJlZmVyZW5jZX0sIGdldCB0aGUgdHlwZSBvZiB0aGUgYXJndW1lbnRzXG4gKiBvYmplY3QgZm9yIHRoZSBxdWVyeSwgZXhjbHVkaW5nIHRoZSBgcGFnaW5hdGlvbk9wdHNgIGFyZ3VtZW50LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgUGFnaW5hdGVkUXVlcnlBcmdzPFF1ZXJ5IGV4dGVuZHMgUGFnaW5hdGVkUXVlcnlSZWZlcmVuY2U+ID0gRXhwYW5kPFxuICBCZXR0ZXJPbWl0PEZ1bmN0aW9uQXJnczxRdWVyeT4sIFwicGFnaW5hdGlvbk9wdHNcIj5cbj47XG5cbi8qKlxuICogR2l2ZW4gYSB7QGxpbmsgUGFnaW5hdGVkUXVlcnlSZWZlcmVuY2V9LCBnZXQgdGhlIHR5cGUgb2YgdGhlIGl0ZW0gYmVpbmdcbiAqIHBhZ2luYXRlZCBvdmVyLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBQYWdpbmF0ZWRRdWVyeUl0ZW08UXVlcnkgZXh0ZW5kcyBQYWdpbmF0ZWRRdWVyeVJlZmVyZW5jZT4gPVxuICBGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+W1wicGFnZVwiXVtudW1iZXJdO1xuXG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiB7QGxpbmsgdXNlUGFnaW5hdGVkUXVlcnl9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgVXNlUGFnaW5hdGVkUXVlcnlSZXR1cm5UeXBlPFF1ZXJ5IGV4dGVuZHMgUGFnaW5hdGVkUXVlcnlSZWZlcmVuY2U+ID1cbiAgVXNlUGFnaW5hdGVkUXVlcnlSZXN1bHQ8UGFnaW5hdGVkUXVlcnlJdGVtPFF1ZXJ5Pj47XG5cbi8qKlxuICogT3B0aW1pc3RpY2FsbHkgdXBkYXRlIHRoZSB2YWx1ZXMgaW4gYSBwYWdpbmF0ZWQgbGlzdC5cbiAqXG4gKiBUaGlzIG9wdGltaXN0aWMgdXBkYXRlIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgdG8gdXBkYXRlIGRhdGEgbG9hZGVkIHdpdGhcbiAqIHtAbGluayB1c2VQYWdpbmF0ZWRRdWVyeX0uIEl0IHVwZGF0ZXMgdGhlIGxpc3QgYnkgYXBwbHlpbmdcbiAqIGB1cGRhdGVWYWx1ZWAgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBsaXN0IGFjcm9zcyBhbGwgb2YgdGhlIGxvYWRlZCBwYWdlcy5cbiAqXG4gKiBUaGlzIHdpbGwgb25seSBhcHBseSB0byBxdWVyaWVzIHdpdGggYSBtYXRjaGluZyBuYW1lcyBhbmQgYXJndW1lbnRzLlxuICpcbiAqIEV4YW1wbGUgdXNhZ2U6XG4gKiBgYGB0c1xuICogY29uc3QgbXlNdXRhdGlvbiA9IHVzZU11dGF0aW9uKGFwaS5teU1vZHVsZS5teU11dGF0aW9uKVxuICogLndpdGhPcHRpbWlzdGljVXBkYXRlKChsb2NhbFN0b3JlLCBtdXRhdGlvbkFyZykgPT4ge1xuICpcbiAqICAgLy8gT3B0aW1pc3RpY2FsbHkgdXBkYXRlIHRoZSBkb2N1bWVudCB3aXRoIElEIGBtdXRhdGlvbkFyZ2BcbiAqICAgLy8gdG8gaGF2ZSBhbiBhZGRpdGlvbmFsIHByb3BlcnR5LlxuICpcbiAqICAgb3B0aW1pc3RpY2FsbHlVcGRhdGVWYWx1ZUluUGFnaW5hdGVkUXVlcnkoXG4gKiAgICAgbG9jYWxTdG9yZSxcbiAqICAgICBhcGkubXlNb2R1bGUucGFnaW5hdGVkUXVlcnlcbiAqICAgICB7fSxcbiAqICAgICBjdXJyZW50VmFsdWUgPT4ge1xuICogICAgICAgaWYgKG11dGF0aW9uQXJnID09PSBjdXJyZW50VmFsdWUuX2lkKSB7XG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgLi4uY3VycmVudFZhbHVlLFxuICogICAgICAgICAgIFwibmV3UHJvcGVydHlcIjogXCJuZXdWYWx1ZVwiLFxuICogICAgICAgICB9O1xuICogICAgICAgfVxuICogICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZTtcbiAqICAgICB9XG4gKiAgICk7XG4gKlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gbG9jYWxTdG9yZSAtIEFuIHtAbGluayBPcHRpbWlzdGljTG9jYWxTdG9yZX0gdG8gdXBkYXRlLlxuICogQHBhcmFtIHF1ZXJ5IC0gQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgcGFnaW5hdGVkIHF1ZXJ5IHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyBvYmplY3QgdG8gdGhlIHF1ZXJ5IGZ1bmN0aW9uLCBleGNsdWRpbmcgdGhlXG4gKiBgcGFnaW5hdGlvbk9wdHNgIHByb3BlcnR5LlxuICogQHBhcmFtIHVwZGF0ZVZhbHVlIC0gQSBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSBuZXcgdmFsdWVzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9wdGltaXN0aWNhbGx5VXBkYXRlVmFsdWVJblBhZ2luYXRlZFF1ZXJ5PFxuICBRdWVyeSBleHRlbmRzIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlLFxuPihcbiAgbG9jYWxTdG9yZTogT3B0aW1pc3RpY0xvY2FsU3RvcmUsXG4gIHF1ZXJ5OiBRdWVyeSxcbiAgYXJnczogUGFnaW5hdGVkUXVlcnlBcmdzPFF1ZXJ5PixcbiAgdXBkYXRlVmFsdWU6IChcbiAgICBjdXJyZW50VmFsdWU6IFBhZ2luYXRlZFF1ZXJ5SXRlbTxRdWVyeT4sXG4gICkgPT4gUGFnaW5hdGVkUXVlcnlJdGVtPFF1ZXJ5Pixcbik6IHZvaWQge1xuICBjb25zdCBleHBlY3RlZEFyZ3MgPSBKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24oYXJncyBhcyBWYWx1ZSkpO1xuXG4gIGZvciAoY29uc3QgcXVlcnlSZXN1bHQgb2YgbG9jYWxTdG9yZS5nZXRBbGxRdWVyaWVzKHF1ZXJ5KSkge1xuICAgIGlmIChxdWVyeVJlc3VsdC52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB7IHBhZ2luYXRpb25PcHRzOiBfLCAuLi5pbm5lckFyZ3MgfSA9IHF1ZXJ5UmVzdWx0LmFyZ3MgYXMge1xuICAgICAgICBwYWdpbmF0aW9uT3B0czogUGFnaW5hdGlvbk9wdGlvbnM7XG4gICAgICB9O1xuICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihpbm5lckFyZ3MgYXMgVmFsdWUpKSA9PT0gZXhwZWN0ZWRBcmdzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlSZXN1bHQudmFsdWU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUucGFnZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgbG9jYWxTdG9yZS5zZXRRdWVyeShxdWVyeSwgcXVlcnlSZXN1bHQuYXJncywge1xuICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICBwYWdlOiB2YWx1ZS5wYWdlLm1hcCh1cGRhdGVWYWx1ZSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgcGFnaW5hdGVkIHF1ZXJ5IHRvIGluc2VydCBhbiBlbGVtZW50IGF0IHRoZSB0b3Agb2YgdGhlIGxpc3QuXG4gKlxuICogVGhpcyBpcyByZWdhcmRsZXNzIG9mIHRoZSBzb3J0IG9yZGVyLCBzbyBpZiB0aGUgbGlzdCBpcyBpbiBkZXNjZW5kaW5nIG9yZGVyLFxuICogdGhlIGluc2VydGVkIGVsZW1lbnQgd2lsbCBiZSB0cmVhdGVkIGFzIHRoZSBcImJpZ2dlc3RcIiBlbGVtZW50LCBidXQgaWYgaXQnc1xuICogYXNjZW5kaW5nLCBpdCdsbCBiZSB0cmVhdGVkIGFzIHRoZSBcInNtYWxsZXN0XCIuXG4gKlxuICogRXhhbXBsZTpcbiAqIGBgYHRzXG4gKiBjb25zdCBjcmVhdGVUYXNrID0gdXNlTXV0YXRpb24oYXBpLnRhc2tzLmNyZWF0ZSlcbiAqICAgLndpdGhPcHRpbWlzdGljVXBkYXRlKChsb2NhbFN0b3JlLCBtdXRhdGlvbkFyZ3MpID0+IHtcbiAqICAgaW5zZXJ0QXRUb3Aoe1xuICogICAgIHBhZ2luYXRlZFF1ZXJ5OiBhcGkudGFza3MubGlzdCxcbiAqICAgICBhcmdzVG9NYXRjaDogeyBsaXN0SWQ6IG11dGF0aW9uQXJncy5saXN0SWQgfSxcbiAqICAgICBsb2NhbFF1ZXJ5U3RvcmU6IGxvY2FsU3RvcmUsXG4gKiAgICAgaXRlbTogeyBfaWQ6IGNyeXB0by5yYW5kb21VVUlEKCkgYXMgSWQ8XCJ0YXNrc1wiPiwgdGl0bGU6IG11dGF0aW9uQXJncy50aXRsZSwgY29tcGxldGVkOiBmYWxzZSB9LFxuICogICB9KTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIG9wdGlvbnMucGFnaW5hdGVkUXVlcnkgLSBBIGZ1bmN0aW9uIHJlZmVyZW5jZSB0byB0aGUgcGFnaW5hdGVkIHF1ZXJ5LlxuICogQHBhcmFtIG9wdGlvbnMuYXJnc1RvTWF0Y2ggLSBPcHRpb25hbCBhcmd1bWVudHMgdGhhdCBtdXN0IGJlIGluIGVhY2ggcmVsZXZhbnQgcGFnaW5hdGVkIHF1ZXJ5LlxuICogVGhpcyBpcyB1c2VmdWwgaWYgeW91IHVzZSB0aGUgc2FtZSBxdWVyeSBmdW5jdGlvbiB3aXRoIGRpZmZlcmVudCBhcmd1bWVudHMgdG8gbG9hZFxuICogZGlmZmVyZW50IGxpc3RzLlxuICogQHBhcmFtIG9wdGlvbnMubG9jYWxRdWVyeVN0b3JlXG4gKiBAcGFyYW0gb3B0aW9ucy5pdGVtIFRoZSBpdGVtIHRvIGluc2VydC5cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRBdFRvcDxRdWVyeSBleHRlbmRzIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlPihvcHRpb25zOiB7XG4gIHBhZ2luYXRlZFF1ZXJ5OiBRdWVyeTtcbiAgYXJnc1RvTWF0Y2g/OiBQYXJ0aWFsPFBhZ2luYXRlZFF1ZXJ5QXJnczxRdWVyeT4+O1xuICBsb2NhbFF1ZXJ5U3RvcmU6IE9wdGltaXN0aWNMb2NhbFN0b3JlO1xuICBpdGVtOiBQYWdpbmF0ZWRRdWVyeUl0ZW08UXVlcnk+O1xufSkge1xuICBjb25zdCB7IHBhZ2luYXRlZFF1ZXJ5LCBhcmdzVG9NYXRjaCwgbG9jYWxRdWVyeVN0b3JlLCBpdGVtIH0gPSBvcHRpb25zO1xuICBjb25zdCBxdWVyaWVzID0gbG9jYWxRdWVyeVN0b3JlLmdldEFsbFF1ZXJpZXMocGFnaW5hdGVkUXVlcnkpO1xuICBjb25zdCBxdWVyaWVzVGhhdE1hdGNoID0gcXVlcmllcy5maWx0ZXIoKHEpID0+IHtcbiAgICBpZiAoYXJnc1RvTWF0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3Qua2V5cyhhcmdzVG9NYXRjaCkuZXZlcnkoXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0tIFRoaXMgc2hvdWxkIGJlIHNhZmUgc2luY2UgYm90aCBzaG91bGQgYmUgcGxhaW4gb2JqZWN0c1xuICAgICAgKGspID0+IGNvbXBhcmVWYWx1ZXMoYXJnc1RvTWF0Y2hba10sIHEuYXJnc1trXSkgPT09IDAsXG4gICAgKTtcbiAgfSk7XG4gIGNvbnN0IGZpcnN0UGFnZSA9IHF1ZXJpZXNUaGF0TWF0Y2guZmluZChcbiAgICAocSkgPT4gcS5hcmdzLnBhZ2luYXRpb25PcHRzLmN1cnNvciA9PT0gbnVsbCxcbiAgKTtcbiAgaWYgKGZpcnN0UGFnZSA9PT0gdW5kZWZpbmVkIHx8IGZpcnN0UGFnZS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gZmlyc3QgcGFnZSBpcyBub3QgbG9hZGVkLCBzbyBkb24ndCB1cGRhdGUgaXQgdW50aWwgaXQgbG9hZHNcbiAgICByZXR1cm47XG4gIH1cbiAgbG9jYWxRdWVyeVN0b3JlLnNldFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5LCBmaXJzdFBhZ2UuYXJncywge1xuICAgIC4uLmZpcnN0UGFnZS52YWx1ZSxcbiAgICBwYWdlOiBbaXRlbSwgLi4uZmlyc3RQYWdlLnZhbHVlLnBhZ2VdLFxuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIGEgcGFnaW5hdGVkIHF1ZXJ5IHRvIGluc2VydCBhbiBlbGVtZW50IGF0IHRoZSBib3R0b20gb2YgdGhlIGxpc3QuXG4gKlxuICogVGhpcyBpcyByZWdhcmRsZXNzIG9mIHRoZSBzb3J0IG9yZGVyLCBzbyBpZiB0aGUgbGlzdCBpcyBpbiBkZXNjZW5kaW5nIG9yZGVyLFxuICogdGhlIGluc2VydGVkIGVsZW1lbnQgd2lsbCBiZSB0cmVhdGVkIGFzIHRoZSBcInNtYWxsZXN0XCIgZWxlbWVudCwgYnV0IGlmIGl0J3NcbiAqIGFzY2VuZGluZywgaXQnbGwgYmUgdHJlYXRlZCBhcyB0aGUgXCJiaWdnZXN0XCIuXG4gKlxuICogVGhpcyBvbmx5IGhhcyBhbiBlZmZlY3QgaWYgdGhlIGxhc3QgcGFnZSBpcyBsb2FkZWQsIHNpbmNlIG90aGVyd2lzZSBpdCB3b3VsZCByZXN1bHRcbiAqIGluIHRoZSBlbGVtZW50IGJlaW5nIGluc2VydGVkIGF0IHRoZSBlbmQgb2Ygd2hhdGV2ZXIgaXMgbG9hZGVkICh3aGljaCBpcyB0aGUgbWlkZGxlIG9mIHRoZSBsaXN0KVxuICogYW5kIHRoZW4gcG9wcGluZyBvdXQgb25jZSB0aGUgb3B0aW1pc3RpYyB1cGRhdGUgaXMgb3Zlci5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucy5wYWdpbmF0ZWRRdWVyeSAtIEEgZnVuY3Rpb24gcmVmZXJlbmNlIHRvIHRoZSBwYWdpbmF0ZWQgcXVlcnkuXG4gKiBAcGFyYW0gb3B0aW9ucy5hcmdzVG9NYXRjaCAtIE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IG11c3QgYmUgaW4gZWFjaCByZWxldmFudCBwYWdpbmF0ZWQgcXVlcnkuXG4gKiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UgdXNlIHRoZSBzYW1lIHF1ZXJ5IGZ1bmN0aW9uIHdpdGggZGlmZmVyZW50IGFyZ3VtZW50cyB0byBsb2FkXG4gKiBkaWZmZXJlbnQgbGlzdHMuXG4gKiBAcGFyYW0gb3B0aW9ucy5sb2NhbFF1ZXJ5U3RvcmVcbiAqIEBwYXJhbSBvcHRpb25zLmVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gaW5zZXJ0LlxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEF0Qm90dG9tSWZMb2FkZWQ8XG4gIFF1ZXJ5IGV4dGVuZHMgUGFnaW5hdGVkUXVlcnlSZWZlcmVuY2UsXG4+KG9wdGlvbnM6IHtcbiAgcGFnaW5hdGVkUXVlcnk6IFF1ZXJ5O1xuICBhcmdzVG9NYXRjaD86IFBhcnRpYWw8UGFnaW5hdGVkUXVlcnlBcmdzPFF1ZXJ5Pj47XG4gIGxvY2FsUXVlcnlTdG9yZTogT3B0aW1pc3RpY0xvY2FsU3RvcmU7XG4gIGl0ZW06IFBhZ2luYXRlZFF1ZXJ5SXRlbTxRdWVyeT47XG59KSB7XG4gIGNvbnN0IHsgcGFnaW5hdGVkUXVlcnksIGxvY2FsUXVlcnlTdG9yZSwgaXRlbSwgYXJnc1RvTWF0Y2ggfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHF1ZXJpZXMgPSBsb2NhbFF1ZXJ5U3RvcmUuZ2V0QWxsUXVlcmllcyhwYWdpbmF0ZWRRdWVyeSk7XG4gIGNvbnN0IHF1ZXJpZXNUaGF0TWF0Y2ggPSBxdWVyaWVzLmZpbHRlcigocSkgPT4ge1xuICAgIGlmIChhcmdzVG9NYXRjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGFyZ3NUb01hdGNoKS5ldmVyeShcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLS0gVGhpcyBzaG91bGQgYmUgc2FmZSBzaW5jZSBib3RoIHNob3VsZCBiZSBwbGFpbiBvYmplY3RzXG4gICAgICAoaykgPT4gY29tcGFyZVZhbHVlcyhhcmdzVG9NYXRjaFtrXSwgcS5hcmdzW2tdKSA9PT0gMCxcbiAgICApO1xuICB9KTtcbiAgY29uc3QgbGFzdFBhZ2UgPSBxdWVyaWVzVGhhdE1hdGNoLmZpbmQoXG4gICAgKHEpID0+IHEudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBxLnZhbHVlLmlzRG9uZSxcbiAgKTtcbiAgaWYgKGxhc3RQYWdlID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBsYXN0IHBhZ2UgaXMgbm90IGxvYWRlZCwgc28gZG9uJ3QgdXBkYXRlIGl0IHNpbmNlIHRoZSBpdGVtIHdvdWxkIGltbWVkaWF0ZWx5IHBvcCBvdXRcbiAgICAvLyB3aGVuIHRoZSBzZXJ2ZXIgdXBkYXRlc1xuICAgIHJldHVybjtcbiAgfVxuICBsb2NhbFF1ZXJ5U3RvcmUuc2V0UXVlcnkocGFnaW5hdGVkUXVlcnksIGxhc3RQYWdlLmFyZ3MsIHtcbiAgICAuLi5sYXN0UGFnZS52YWx1ZSEsXG4gICAgcGFnZTogWy4uLmxhc3RQYWdlLnZhbHVlIS5wYWdlLCBpdGVtXSxcbiAgfSk7XG59XG5cbnR5cGUgTG9jYWxRdWVyeVJlc3VsdDxRdWVyeSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj4+ID0ge1xuICBhcmdzOiBGdW5jdGlvbkFyZ3M8UXVlcnk+O1xuICB2YWx1ZTogdW5kZWZpbmVkIHwgRnVuY3Rpb25SZXR1cm5UeXBlPFF1ZXJ5Pjtcbn07XG5cbnR5cGUgTG9hZGVkUmVzdWx0PFF1ZXJ5IGV4dGVuZHMgRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPj4gPSB7XG4gIGFyZ3M6IEZ1bmN0aW9uQXJnczxRdWVyeT47XG4gIHZhbHVlOiBGdW5jdGlvblJldHVyblR5cGU8UXVlcnk+O1xufTtcblxuLyoqXG4gKiBUaGlzIGlzIGEgaGVscGVyIGZ1bmN0aW9uIGZvciBpbnNlcnRpbmcgYW4gaXRlbSBhdCBhIHNwZWNpZmljIHBvc2l0aW9uIGluIGEgcGFnaW5hdGVkIHF1ZXJ5LlxuICpcbiAqIFlvdSBtdXN0IHByb3ZpZGUgdGhlIHNvcnRPcmRlciBhbmQgYSBmdW5jdGlvbiBmb3IgZGVyaXZpbmcgdGhlIHNvcnQga2V5IChhbiBhcnJheSBvZiB2YWx1ZXMpIGZyb20gYW4gaXRlbSBpbiB0aGUgbGlzdC5cbiAqXG4gKiBUaGlzIHdpbGwgb25seSB3b3JrIGlmIHRoZSBzZXJ2ZXIgcXVlcnkgdXNlcyB0aGUgc2FtZSBzb3J0IG9yZGVyIGFuZCBzb3J0IGtleSBhcyB0aGUgb3B0aW1pc3RpYyB1cGRhdGUuXG4gKlxuICogRXhhbXBsZTpcbiAqIGBgYHRzXG4gKiBjb25zdCBjcmVhdGVUYXNrID0gdXNlTXV0YXRpb24oYXBpLnRhc2tzLmNyZWF0ZSlcbiAqICAgLndpdGhPcHRpbWlzdGljVXBkYXRlKChsb2NhbFN0b3JlLCBtdXRhdGlvbkFyZ3MpID0+IHtcbiAqICAgaW5zZXJ0QXRQb3NpdGlvbih7XG4gKiAgICAgcGFnaW5hdGVkUXVlcnk6IGFwaS50YXNrcy5saXN0QnlQcmlvcml0eSxcbiAqICAgICBhcmdzVG9NYXRjaDogeyBsaXN0SWQ6IG11dGF0aW9uQXJncy5saXN0SWQgfSxcbiAqICAgICBzb3J0T3JkZXI6IFwiYXNjXCIsXG4gKiAgICAgc29ydEtleUZyb21JdGVtOiAoaXRlbSkgPT4gW2l0ZW0ucHJpb3JpdHksIGl0ZW0uX2NyZWF0aW9uVGltZV0sXG4gKiAgICAgbG9jYWxRdWVyeVN0b3JlOiBsb2NhbFN0b3JlLFxuICogICAgIGl0ZW06IHtcbiAqICAgICAgIF9pZDogY3J5cHRvLnJhbmRvbVVVSUQoKSBhcyBJZDxcInRhc2tzXCI+LFxuICogICAgICAgX2NyZWF0aW9uVGltZTogRGF0ZS5ub3coKSxcbiAqICAgICAgIHRpdGxlOiBtdXRhdGlvbkFyZ3MudGl0bGUsXG4gKiAgICAgICBjb21wbGV0ZWQ6IGZhbHNlLFxuICogICAgICAgcHJpb3JpdHk6IG11dGF0aW9uQXJncy5wcmlvcml0eSxcbiAqICAgICB9LFxuICogICB9KTtcbiAqIH0pO1xuICogYGBgXG4gKiBAcGFyYW0gb3B0aW9ucy5wYWdpbmF0ZWRRdWVyeSAtIEEgZnVuY3Rpb24gcmVmZXJlbmNlIHRvIHRoZSBwYWdpbmF0ZWQgcXVlcnkuXG4gKiBAcGFyYW0gb3B0aW9ucy5hcmdzVG9NYXRjaCAtIE9wdGlvbmFsIGFyZ3VtZW50cyB0aGF0IG11c3QgYmUgaW4gZWFjaCByZWxldmFudCBwYWdpbmF0ZWQgcXVlcnkuXG4gKiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UgdXNlIHRoZSBzYW1lIHF1ZXJ5IGZ1bmN0aW9uIHdpdGggZGlmZmVyZW50IGFyZ3VtZW50cyB0byBsb2FkXG4gKiBkaWZmZXJlbnQgbGlzdHMuXG4gKiBAcGFyYW0gb3B0aW9ucy5zb3J0T3JkZXIgLSBUaGUgc29ydCBvcmRlciBvZiB0aGUgcGFnaW5hdGVkIHF1ZXJ5IChcImFzY1wiIG9yIFwiZGVzY1wiKS5cbiAqIEBwYXJhbSBvcHRpb25zLnNvcnRLZXlGcm9tSXRlbSAtIEEgZnVuY3Rpb24gZm9yIGRlcml2aW5nIHRoZSBzb3J0IGtleSAoYW4gYXJyYXkgb2YgdmFsdWVzKSBmcm9tIGFuIGVsZW1lbnQgaW4gdGhlIGxpc3QuXG4gKiBJbmNsdWRpbmcgYSB0aWUtYnJlYWtlciBmaWVsZCBsaWtlIGBfY3JlYXRpb25UaW1lYCBpcyByZWNvbW1lbmRlZC5cbiAqIEBwYXJhbSBvcHRpb25zLmxvY2FsUXVlcnlTdG9yZVxuICogQHBhcmFtIG9wdGlvbnMuaXRlbSAtIFRoZSBpdGVtIHRvIGluc2VydC5cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRBdFBvc2l0aW9uPFxuICBRdWVyeSBleHRlbmRzIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlLFxuPihvcHRpb25zOiB7XG4gIHBhZ2luYXRlZFF1ZXJ5OiBRdWVyeTtcbiAgYXJnc1RvTWF0Y2g/OiBQYXJ0aWFsPFBhZ2luYXRlZFF1ZXJ5QXJnczxRdWVyeT4+O1xuICBzb3J0T3JkZXI6IFwiYXNjXCIgfCBcImRlc2NcIjtcbiAgc29ydEtleUZyb21JdGVtOiAoZWxlbWVudDogUGFnaW5hdGVkUXVlcnlJdGVtPFF1ZXJ5PikgPT4gVmFsdWUgfCBWYWx1ZVtdO1xuICBsb2NhbFF1ZXJ5U3RvcmU6IE9wdGltaXN0aWNMb2NhbFN0b3JlO1xuICBpdGVtOiBQYWdpbmF0ZWRRdWVyeUl0ZW08UXVlcnk+O1xufSkge1xuICBjb25zdCB7XG4gICAgcGFnaW5hdGVkUXVlcnksXG4gICAgc29ydE9yZGVyLFxuICAgIHNvcnRLZXlGcm9tSXRlbSxcbiAgICBsb2NhbFF1ZXJ5U3RvcmUsXG4gICAgaXRlbSxcbiAgICBhcmdzVG9NYXRjaCxcbiAgfSA9IG9wdGlvbnM7XG5cbiAgY29uc3QgcXVlcmllczogTG9jYWxRdWVyeVJlc3VsdDxRdWVyeT5bXSA9XG4gICAgbG9jYWxRdWVyeVN0b3JlLmdldEFsbFF1ZXJpZXMocGFnaW5hdGVkUXVlcnkpO1xuICAvLyBHcm91cCBpbnRvIHNldHMgb2YgcGFnZXMgZm9yIHRoZSBzYW1lIHVzZVBhZ2luYXRlZFF1ZXJ5LiBHcm91cGluZyBpcyBieSBhbGxcbiAgLy8gYXJncyBleGNlcHQgcGFnaW5hdGlvbk9wdHMsIGJ1dCBpbmNsdWRpbmcgcGFnaW5hdGlvbk9wdHMuaWQuXG4gIGNvbnN0IHF1ZXJ5R3JvdXBzOiBSZWNvcmQ8c3RyaW5nLCBMb2NhbFF1ZXJ5UmVzdWx0PFF1ZXJ5PltdPiA9IHt9O1xuICBmb3IgKGNvbnN0IHF1ZXJ5IG9mIHF1ZXJpZXMpIHtcbiAgICBpZiAoXG4gICAgICBhcmdzVG9NYXRjaCAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAhT2JqZWN0LmtleXMoYXJnc1RvTWF0Y2gpLmV2ZXJ5KFxuICAgICAgICAoaykgPT5cbiAgICAgICAgICAvLyBAdHMtaWdub3JlIHdoeSBpcyB0aGlzIG5vdCB3b3JraW5nP1xuICAgICAgICAgIGFyZ3NUb01hdGNoW2tdID09PSBxdWVyeS5hcmdzW2tdLFxuICAgICAgKVxuICAgICkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3QuZW50cmllcyhxdWVyeS5hcmdzKS5tYXAoKFtrLCB2XSkgPT4gW1xuICAgICAgICAgIGssXG4gICAgICAgICAgayA9PT0gXCJwYWdpbmF0aW9uT3B0c1wiID8gKHYgYXMgYW55KS5pZCA6IHYsXG4gICAgICAgIF0pLFxuICAgICAgKSxcbiAgICApO1xuICAgIHF1ZXJ5R3JvdXBzW2tleV0gPz89IFtdO1xuICAgIHF1ZXJ5R3JvdXBzW2tleV0ucHVzaChxdWVyeSk7XG4gIH1cbiAgZm9yIChjb25zdCBwYWdlUXVlcmllcyBvZiBPYmplY3QudmFsdWVzKHF1ZXJ5R3JvdXBzKSkge1xuICAgIGluc2VydEF0UG9zaXRpb25JblBhZ2VzKHtcbiAgICAgIHBhZ2VRdWVyaWVzLFxuICAgICAgcGFnaW5hdGVkUXVlcnksXG4gICAgICBzb3J0T3JkZXIsXG4gICAgICBzb3J0S2V5RnJvbUl0ZW0sXG4gICAgICBsb2NhbFF1ZXJ5U3RvcmUsXG4gICAgICBpdGVtLFxuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydEF0UG9zaXRpb25JblBhZ2VzPFxuICBRdWVyeSBleHRlbmRzIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlLFxuPihvcHRpb25zOiB7XG4gIHBhZ2VRdWVyaWVzOiBMb2NhbFF1ZXJ5UmVzdWx0PFF1ZXJ5PltdO1xuICBwYWdpbmF0ZWRRdWVyeTogUXVlcnk7XG4gIHNvcnRPcmRlcjogXCJhc2NcIiB8IFwiZGVzY1wiO1xuICBzb3J0S2V5RnJvbUl0ZW06IChlbGVtZW50OiBQYWdpbmF0ZWRRdWVyeUl0ZW08UXVlcnk+KSA9PiBWYWx1ZSB8IFZhbHVlW107XG4gIGxvY2FsUXVlcnlTdG9yZTogT3B0aW1pc3RpY0xvY2FsU3RvcmU7XG4gIGl0ZW06IFBhZ2luYXRlZFF1ZXJ5SXRlbTxRdWVyeT47XG59KSB7XG4gIGNvbnN0IHtcbiAgICBwYWdlUXVlcmllcyxcbiAgICBzb3J0T3JkZXIsXG4gICAgc29ydEtleUZyb21JdGVtLFxuICAgIGxvY2FsUXVlcnlTdG9yZSxcbiAgICBpdGVtLFxuICAgIHBhZ2luYXRlZFF1ZXJ5LFxuICB9ID0gb3B0aW9ucztcbiAgY29uc3QgaW5zZXJ0ZWRLZXkgPSBzb3J0S2V5RnJvbUl0ZW0oaXRlbSk7XG4gIGNvbnN0IGxvYWRlZFBhZ2VzOiBMb2FkZWRSZXN1bHQ8UXVlcnk+W10gPSBwYWdlUXVlcmllcy5maWx0ZXIoXG4gICAgKHEpOiBxIGlzIExvYWRlZFJlc3VsdDxRdWVyeT4gPT5cbiAgICAgIHEudmFsdWUgIT09IHVuZGVmaW5lZCAmJiBxLnZhbHVlLnBhZ2UubGVuZ3RoID4gMCxcbiAgKTtcbiAgY29uc3Qgc29ydGVkUGFnZXMgPSBsb2FkZWRQYWdlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgYUtleSA9IHNvcnRLZXlGcm9tSXRlbShhLnZhbHVlLnBhZ2VbMF0pO1xuICAgIGNvbnN0IGJLZXkgPSBzb3J0S2V5RnJvbUl0ZW0oYi52YWx1ZS5wYWdlWzBdKTtcbiAgICBpZiAoc29ydE9yZGVyID09PSBcImFzY1wiKSB7XG4gICAgICByZXR1cm4gY29tcGFyZVZhbHVlcyhhS2V5LCBiS2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbXBhcmVWYWx1ZXMoYktleSwgYUtleSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBjaGVjayBpZiB0aGUgaW5zZXJ0ZWQgZWxlbWVudCBpcyBiZWZvcmUgdGhlIGZpcnN0IHBhZ2VcbiAgY29uc3QgZmlyc3RMb2FkZWRQYWdlID0gc29ydGVkUGFnZXNbMF07XG4gIGlmIChmaXJzdExvYWRlZFBhZ2UgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIG5vIHBhZ2VzLCBzbyBkb24ndCB1cGRhdGUgdW50aWwgdGhleSBsb2FkXG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGZpcnN0UGFnZUtleSA9IHNvcnRLZXlGcm9tSXRlbShmaXJzdExvYWRlZFBhZ2UudmFsdWUucGFnZVswXSk7XG4gIGNvbnN0IGlzQmVmb3JlRmlyc3RQYWdlID1cbiAgICBzb3J0T3JkZXIgPT09IFwiYXNjXCJcbiAgICAgID8gY29tcGFyZVZhbHVlcyhpbnNlcnRlZEtleSwgZmlyc3RQYWdlS2V5KSA8PSAwXG4gICAgICA6IGNvbXBhcmVWYWx1ZXMoaW5zZXJ0ZWRLZXksIGZpcnN0UGFnZUtleSkgPj0gMDtcbiAgaWYgKGlzQmVmb3JlRmlyc3RQYWdlKSB7XG4gICAgaWYgKGZpcnN0TG9hZGVkUGFnZS5hcmdzLnBhZ2luYXRpb25PcHRzLmN1cnNvciA9PT0gbnVsbCkge1xuICAgICAgbG9jYWxRdWVyeVN0b3JlLnNldFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5LCBmaXJzdExvYWRlZFBhZ2UuYXJncywge1xuICAgICAgICAuLi5maXJzdExvYWRlZFBhZ2UudmFsdWUsXG4gICAgICAgIHBhZ2U6IFtpdGVtLCAuLi5maXJzdExvYWRlZFBhZ2UudmFsdWUucGFnZV0sXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaWYgdGhlIHZlcnkgZmlyc3QgcGFnZSBpcyBub3QgbG9hZGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGxhc3RMb2FkZWRQYWdlID0gc29ydGVkUGFnZXNbc29ydGVkUGFnZXMubGVuZ3RoIC0gMV07XG4gIGlmIChsYXN0TG9hZGVkUGFnZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gbm8gcGFnZXMsIHNvIGRvbid0IHVwZGF0ZSB1bnRpbCB0aGV5IGxvYWRcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgbGFzdFBhZ2VLZXkgPSBzb3J0S2V5RnJvbUl0ZW0oXG4gICAgbGFzdExvYWRlZFBhZ2UudmFsdWUucGFnZVtsYXN0TG9hZGVkUGFnZS52YWx1ZS5wYWdlLmxlbmd0aCAtIDFdLFxuICApO1xuICBjb25zdCBpc0FmdGVyTGFzdFBhZ2UgPVxuICAgIHNvcnRPcmRlciA9PT0gXCJhc2NcIlxuICAgICAgPyBjb21wYXJlVmFsdWVzKGluc2VydGVkS2V5LCBsYXN0UGFnZUtleSkgPj0gMFxuICAgICAgOiBjb21wYXJlVmFsdWVzKGluc2VydGVkS2V5LCBsYXN0UGFnZUtleSkgPD0gMDtcbiAgaWYgKGlzQWZ0ZXJMYXN0UGFnZSkge1xuICAgIC8vIE9ubHkgdXBkYXRlIGlmIHRoZSBsYXN0IHBhZ2UgaXMgZG9uZSBsb2FkaW5nLCBvdGhlcndpc2UgaXQgd2lsbCBwb3Agb3V0XG4gICAgLy8gd2hlbiB0aGUgc2VydmVyIHVwZGF0ZXMgdGhlIHF1ZXJ5XG4gICAgaWYgKGxhc3RMb2FkZWRQYWdlLnZhbHVlLmlzRG9uZSkge1xuICAgICAgbG9jYWxRdWVyeVN0b3JlLnNldFF1ZXJ5KHBhZ2luYXRlZFF1ZXJ5LCBsYXN0TG9hZGVkUGFnZS5hcmdzLCB7XG4gICAgICAgIC4uLmxhc3RMb2FkZWRQYWdlLnZhbHVlLFxuICAgICAgICBwYWdlOiBbLi4ubGFzdExvYWRlZFBhZ2UudmFsdWUucGFnZSwgaXRlbV0sXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gaWYgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciwgZmluZCB0aGUgZmlyc3QgcGFnZSB0aGF0IHN0YXJ0cyB3aXRoIGEga2V5IGdyZWF0ZXIgdGhhbiB0aGUgaW5zZXJ0ZWQgZWxlbWVudCxcbiAgLy8gYW5kIHVwZGF0ZSB0aGUgcGFnZSBiZWZvcmUgaXRcbiAgLy8gaWYgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXIsIGZpbmQgdGhlIGZpcnN0IHBhZ2UgdGhhdCBzdGFydHMgd2l0aCBhIGtleSBsZXNzIHRoYW4gdGhlIGluc2VydGVkIGVsZW1lbnQsXG4gIC8vIGFuZCB1cGRhdGUgdGhlIHBhZ2UgYmVmb3JlIGl0XG5cbiAgY29uc3Qgc3VjY2Vzc29yUGFnZUluZGV4ID0gc29ydGVkUGFnZXMuZmluZEluZGV4KChwKSA9PlxuICAgIHNvcnRPcmRlciA9PT0gXCJhc2NcIlxuICAgICAgPyBjb21wYXJlVmFsdWVzKHNvcnRLZXlGcm9tSXRlbShwLnZhbHVlLnBhZ2VbMF0pLCBpbnNlcnRlZEtleSkgPiAwXG4gICAgICA6IGNvbXBhcmVWYWx1ZXMoc29ydEtleUZyb21JdGVtKHAudmFsdWUucGFnZVswXSksIGluc2VydGVkS2V5KSA8IDAsXG4gICk7XG4gIGNvbnN0IHBhZ2VUb1VwZGF0ZSA9XG4gICAgc3VjY2Vzc29yUGFnZUluZGV4ID09PSAtMVxuICAgICAgPyBzb3J0ZWRQYWdlc1tzb3J0ZWRQYWdlcy5sZW5ndGggLSAxXVxuICAgICAgOiBzb3J0ZWRQYWdlc1tzdWNjZXNzb3JQYWdlSW5kZXggLSAxXTtcbiAgaWYgKHBhZ2VUb1VwZGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gbm8gcGFnZXMsIHNvIGRvbid0IHVwZGF0ZSB1bnRpbCB0aGV5IGxvYWRcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gSWYgYXNjZW5kaW5nLCBmaW5kIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBpbnNlcnRlZCBlbGVtZW50XG4gIC8vIElmIGRlc2NlbmRpbmcsIGZpbmQgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGluc2VydGVkIGVsZW1lbnRcbiAgY29uc3QgaW5kZXhXaXRoaW5QYWdlID0gcGFnZVRvVXBkYXRlLnZhbHVlLnBhZ2UuZmluZEluZGV4KChlKSA9PlxuICAgIHNvcnRPcmRlciA9PT0gXCJhc2NcIlxuICAgICAgPyBjb21wYXJlVmFsdWVzKHNvcnRLZXlGcm9tSXRlbShlKSwgaW5zZXJ0ZWRLZXkpID49IDBcbiAgICAgIDogY29tcGFyZVZhbHVlcyhzb3J0S2V5RnJvbUl0ZW0oZSksIGluc2VydGVkS2V5KSA8PSAwLFxuICApO1xuICBjb25zdCBuZXdQYWdlID1cbiAgICBpbmRleFdpdGhpblBhZ2UgPT09IC0xXG4gICAgICA/IFsuLi5wYWdlVG9VcGRhdGUudmFsdWUucGFnZSwgaXRlbV1cbiAgICAgIDogW1xuICAgICAgICAgIC4uLnBhZ2VUb1VwZGF0ZS52YWx1ZS5wYWdlLnNsaWNlKDAsIGluZGV4V2l0aGluUGFnZSksXG4gICAgICAgICAgaXRlbSxcbiAgICAgICAgICAuLi5wYWdlVG9VcGRhdGUudmFsdWUucGFnZS5zbGljZShpbmRleFdpdGhpblBhZ2UpLFxuICAgICAgICBdO1xuICBsb2NhbFF1ZXJ5U3RvcmUuc2V0UXVlcnkocGFnaW5hdGVkUXVlcnksIHBhZ2VUb1VwZGF0ZS5hcmdzLCB7XG4gICAgLi4ucGFnZVRvVXBkYXRlLnZhbHVlLFxuICAgIHBhZ2U6IG5ld1BhZ2UsXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query2.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_paginated_query2.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   resetPaginationId: () => (/* binding */ resetPaginationId),\n/* harmony export */   usePaginatedQuery_experimental: () => (/* binding */ usePaginatedQuery_experimental)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _use_queries_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use_queries.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\");\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n\n\n\n\n\n\n\nfunction usePaginatedQuery_experimental(query, args, options) {\n    if (typeof options?.initialNumItems !== \"number\" || options.initialNumItems < 0) {\n        throw new Error(`\\`options.initialNumItems\\` must be a positive number. Received \\`${options?.initialNumItems}\\`.`);\n    }\n    const skip = args === \"skip\";\n    const argsObject = skip ? {} : args;\n    const convexClient = (0,_client_js__WEBPACK_IMPORTED_MODULE_5__.useConvex)();\n    const logger = convexClient.logger;\n    const createInitialState = ()=>{\n        const id = nextPaginationId();\n        return {\n            query,\n            args: argsObject,\n            id,\n            // Queries will contain zero or one queries forever.\n            queries: skip ? {} : {\n                paginatedQuery: {\n                    query,\n                    args: {\n                        ...argsObject\n                    },\n                    paginationOptions: {\n                        initialNumItems: options.initialNumItems,\n                        id\n                    }\n                }\n            },\n            skip\n        };\n    };\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(createInitialState);\n    let currState = state;\n    if ((0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(query) !== (0,_server_api_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionName)(state.query) || JSON.stringify((0,_values_value_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(argsObject)) !== JSON.stringify((0,_values_value_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(state.args)) || skip !== state.skip) {\n        currState = createInitialState();\n        setState(currState);\n    }\n    const resultsObject = (0,_use_queries_js__WEBPACK_IMPORTED_MODULE_3__.useQueries)(currState.queries);\n    if (!(\"paginatedQuery\" in resultsObject)) {\n        if (!skip) {\n            throw new Error(\"Why is it missing?\");\n        }\n        return {\n            results: [],\n            status: \"LoadingFirstPage\",\n            isLoading: true,\n            loadMore: function skipNOP(_numItems) {\n                return false;\n            }\n        };\n    }\n    const result = resultsObject.paginatedQuery;\n    if (result === void 0) {\n        return {\n            results: [],\n            loadMore: ()=>false,\n            isLoading: true,\n            status: \"LoadingFirstPage\"\n        };\n    }\n    if (result instanceof Error) {\n        if (result.message.includes(\"InvalidCursor\") || result instanceof _values_errors_js__WEBPACK_IMPORTED_MODULE_4__.ConvexError && typeof result.data === \"object\" && result.data?.isConvexSystemError === true && result.data?.paginationError === \"InvalidCursor\") {\n            logger.warn(\"usePaginatedQuery hit error, resetting pagination state: \" + result.message);\n            setState(createInitialState);\n            return {\n                results: [],\n                loadMore: ()=>false,\n                isLoading: true,\n                status: \"LoadingFirstPage\"\n            };\n        } else {\n            throw result;\n        }\n    }\n    return {\n        ...result,\n        loadMore: (num)=>{\n            return result.loadMore(num);\n        },\n        isLoading: result.status === \"LoadingFirstPage\" ? true : result.status === \"LoadingMore\" ? true : false\n    };\n}\nlet paginationId = 0;\nfunction nextPaginationId() {\n    paginationId++;\n    return paginationId;\n}\nfunction resetPaginationId() {\n    paginationId = 0;\n} //# sourceMappingURL=use_paginated_query2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9wYWdpbmF0ZWRfcXVlcnkyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF5QjtBQUUwQjtBQU1mO0FBQ1Q7QUFHQztBQUNGO0FBMERuQixTQUFTLCtCQUdkLE9BQ0EsTUFLQSxTQUNvQztJQUNwQyxJQUNFLE9BQU8sU0FBUyxvQkFBb0IsWUFDcEMsUUFBUSxrQkFBa0IsR0FDMUI7UUFDQSxNQUFNLElBQUksTUFDUixxRUFBcUUsU0FBUyxlQUFlO0lBRWpHO0lBQ0EsTUFBTSxPQUFPLFNBQVM7SUFDdEIsTUFBTSxhQUFhLE9BQU8sQ0FBQyxJQUFJO0lBRS9CLE1BQU0sZUFBZSxxREFBUyxDQUFDO0lBQy9CLE1BQU0sU0FBUyxhQUFhO0lBRzVCLE1BQU0scUJBQW1EO1FBQ3ZELE1BQU0sS0FBSyxpQkFBaUI7UUFDNUIsT0FBTztZQUNMO1lBQ0EsTUFBTTtZQUNOO1lBQUE7WUFFQSxTQUFTLE9BQ0osQ0FBQyxJQUNGO2dCQUNFLGdCQUFnQjtvQkFDZDtvQkFDQSxNQUFNO3dCQUNKLEdBQUc7b0JBQ0w7b0JBQ0EsbUJBQW1CO3dCQUNqQixpQkFBaUIsUUFBUTt3QkFDekI7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUNKO1FBQ0Y7SUFDRjtJQUVBLE1BQU0sQ0FBQyxPQUFPLFFBQVEsSUFDcEIsK0NBQVEsQ0FBeUIsa0JBQWtCO0lBR3JELElBQUksWUFBWTtJQUVoQixJQUNFLCtEQUFlLENBQUMsS0FBSyxNQUFNLCtEQUFlLENBQUMsTUFBTSxLQUFLLEtBQ3RELEtBQUssVUFBVSw4REFBWSxDQUFDLFVBQW1CLENBQUMsTUFDOUMsS0FBSyxVQUFVLDhEQUFZLENBQUMsTUFBTSxJQUFJLENBQUMsS0FDekMsU0FBUyxNQUFNLE1BQ2Y7UUFDQSxZQUFZLG1CQUFtQjtRQUMvQixTQUFTLFNBQVM7SUFDcEI7SUFHQSxNQUFNLGdCQUFnQiwyREFBVSxDQUFDLFVBQVUsT0FBTztJQUdsRCxJQUFJLEVBQUUsb0JBQW9CLGdCQUFnQjtRQUN4QyxJQUFJLENBQUMsTUFBTTtZQUNULE1BQU0sSUFBSSxNQUFNLG9CQUFvQjtRQUN0QztRQUNBLE9BQU87WUFDTCxTQUFTLENBQUM7WUFDVixRQUFRO1lBQ1IsV0FBVztZQUNYLFVBQVUsU0FBUyxRQUFRLFdBQW1CO2dCQUM1QyxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0lBQ0EsTUFBTSxTQUFTLGNBQWM7SUFRN0IsSUFBSSxXQUFXLFFBQVc7UUFDeEIsT0FBTztZQUNMLFNBQVMsQ0FBQztZQUNWLFVBQVUsSUFBTTtZQUNoQixXQUFXO1lBQ1gsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxJQUFJLGtCQUFrQixPQUFPO1FBQzNCLElBQ0UsT0FBTyxRQUFRLFNBQVMsZUFBZSxLQUN0QyxrQkFBa0IsMERBQVcsSUFDNUIsT0FBTyxPQUFPLFNBQVMsWUFDdkIsT0FBTyxNQUFNLHdCQUF3QixRQUNyQyxPQUFPLE1BQU0sb0JBQW9CLGlCQUNuQztZQVFBLE9BQU8sS0FDTCw4REFDRSxPQUFPO1lBRVgsU0FBUyxrQkFBa0I7WUFDM0IsT0FBTztnQkFDTCxTQUFTLENBQUM7Z0JBQ1YsVUFBVSxJQUFNO2dCQUNoQixXQUFXO2dCQUNYLFFBQVE7WUFDVjtRQUNGLE9BQU87WUFDTCxNQUFNO1FBQ1I7SUFDRjtJQUVBLE9BQU87UUFDTCxHQUFHO1FBQ0gsVUFBVSxDQUFDO1lBQ1QsT0FBTyxPQUFPLFNBQVMsR0FBRztRQUM1QjtRQUNBLFdBQ0UsT0FBTyxXQUFXLHFCQUNkLE9BQ0EsT0FBTyxXQUFXLGdCQUNoQixPQUNBO0lBQ1Y7QUFDRjtBQUVBLElBQUksZUFBZTtBQU1uQixTQUFTLG1CQUEyQjtJQUNsQztJQUNBLE9BQU87QUFDVDtBQUtPLFNBQVMsb0JBQW9CO0lBQ2xDLGVBQWU7QUFDakIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvcmVhY3QvdXNlX3BhZ2luYXRlZF9xdWVyeTIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IHsgRnVuY3Rpb25SZWZlcmVuY2UsIGdldEZ1bmN0aW9uTmFtZSB9IGZyb20gXCIuLi9zZXJ2ZXIvYXBpLmpzXCI7XG5pbXBvcnQge1xuICBQYWdpbmF0ZWRRdWVyeVJlZmVyZW5jZSxcbiAgUGFnaW5hdGVkUXVlcnlBcmdzLFxuICBVc2VQYWdpbmF0ZWRRdWVyeVJldHVyblR5cGUsXG59IGZyb20gXCIuL3VzZV9wYWdpbmF0ZWRfcXVlcnkuanNcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiwgVmFsdWUgfSBmcm9tIFwiLi4vdmFsdWVzL3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyB1c2VRdWVyaWVzIH0gZnJvbSBcIi4vdXNlX3F1ZXJpZXMuanNcIjtcbmltcG9ydCB7IFBhZ2luYXRlZFF1ZXJ5UmVzdWx0IH0gZnJvbSBcIi4uL2Jyb3dzZXIvc3luYy9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBTdWJzY3JpYmVUb1BhZ2luYXRlZFF1ZXJ5T3B0aW9ucyB9IGZyb20gXCIuLi9icm93c2VyL3N5bmMvcGFnaW5hdGVkX3F1ZXJ5X2NsaWVudC5qc1wiO1xuaW1wb3J0IHsgQ29udmV4RXJyb3IgfSBmcm9tIFwiLi4vdmFsdWVzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgdXNlQ29udmV4IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5cbnR5cGUgVXNlUGFnaW5hdGVkUXVlcnlTdGF0ZSA9IHtcbiAgcXVlcnk6IEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj47XG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIFZhbHVlPjtcbiAgaWQ6IG51bWJlcjtcbiAgcXVlcmllczoge1xuICAgIHBhZ2luYXRlZFF1ZXJ5Pzoge1xuICAgICAgcXVlcnk6IEZ1bmN0aW9uUmVmZXJlbmNlPFwicXVlcnlcIj47XG4gICAgICBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT47XG4gICAgICBwYWdpbmF0aW9uT3B0aW9uczogU3Vic2NyaWJlVG9QYWdpbmF0ZWRRdWVyeU9wdGlvbnM7XG4gICAgfTtcbiAgfTtcbiAgc2tpcDogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogRXhwZXJpbWVudGFsIG5ldyB1c2VQYWdpbmF0ZWRRdWVyeSBpbXBsZW1lbnRhdGlvbiB0aGF0IHdpbGwgcmVwbGFjZSB0aGUgY3VycmVudCBvbmVcbiAqIGluIHRoZSBmdXR1cmUuXG4gKlxuICogTG9hZCBkYXRhIHJlYWN0aXZlbHkgZnJvbSBhIHBhZ2luYXRlZCBxdWVyeSB0byBhIGNyZWF0ZSBhIGdyb3dpbmcgbGlzdC5cbiAqXG4gKiBUaGlzIGlzIGFuIGFsdGVybmF0ZSBpbXBsZW1lbnRhdGlvbiB0aGF0IHJlbGllcyBvbiBuZXcgY2xpZW50IHBhZ2luYXRpb24gbG9naWMuXG4gKlxuICogVGhpcyBjYW4gYmUgdXNlZCB0byBwb3dlciBcImluZmluaXRlIHNjcm9sbFwiIFVJcy5cbiAqXG4gKiBUaGlzIGhvb2sgbXVzdCBiZSB1c2VkIHdpdGggcHVibGljIHF1ZXJ5IHJlZmVyZW5jZXMgdGhhdCBtYXRjaFxuICoge0BsaW5rIFBhZ2luYXRlZFF1ZXJ5UmVmZXJlbmNlfS5cbiAqXG4gKiBgdXNlUGFnaW5hdGVkUXVlcnlgIGNvbmNhdGVuYXRlcyBhbGwgdGhlIHBhZ2VzIG9mIHJlc3VsdHMgaW50byBhIHNpbmdsZSBsaXN0XG4gKiBhbmQgbWFuYWdlcyB0aGUgY29udGludWF0aW9uIGN1cnNvcnMgd2hlbiByZXF1ZXN0aW5nIG1vcmUgaXRlbXMuXG4gKlxuICogRXhhbXBsZSB1c2FnZTpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHsgcmVzdWx0cywgc3RhdHVzLCBpc0xvYWRpbmcsIGxvYWRNb3JlIH0gPSB1c2VQYWdpbmF0ZWRRdWVyeShcbiAqICAgYXBpLm1lc3NhZ2VzLmxpc3QsXG4gKiAgIHsgY2hhbm5lbDogXCIjZ2VuZXJhbFwiIH0sXG4gKiAgIHsgaW5pdGlhbE51bUl0ZW1zOiA1IH1cbiAqICk7XG4gKiBgYGBcbiAqXG4gKiBJZiB0aGUgcXVlcnkgcmVmZXJlbmNlIG9yIGFyZ3VtZW50cyBjaGFuZ2UsIHRoZSBwYWdpbmF0aW9uIHN0YXRlIHdpbGwgYmUgcmVzZXRcbiAqIHRvIHRoZSBmaXJzdCBwYWdlLiBTaW1pbGFybHksIGlmIGFueSBvZiB0aGUgcGFnZXMgcmVzdWx0IGluIGFuIEludmFsaWRDdXJzb3JcbiAqIGVycm9yIG9yIGFuIGVycm9yIGFzc29jaWF0ZWQgd2l0aCB0b28gbXVjaCBkYXRhLCB0aGUgcGFnaW5hdGlvbiBzdGF0ZSB3aWxsIGFsc29cbiAqIHJlc2V0IHRvIHRoZSBmaXJzdCBwYWdlLlxuICpcbiAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgcGFnaW5hdGlvbiwgc2VlIFtQYWdpbmF0ZWQgUXVlcmllc10oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvZGF0YWJhc2UvcGFnaW5hdGlvbikuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gQSBGdW5jdGlvblJlZmVyZW5jZSB0byB0aGUgcHVibGljIHF1ZXJ5IGZ1bmN0aW9uIHRvIHJ1bi5cbiAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyBvYmplY3QgZm9yIHRoZSBxdWVyeSBmdW5jdGlvbiwgZXhjbHVkaW5nXG4gKiB0aGUgYHBhZ2luYXRpb25PcHRzYCBwcm9wZXJ0eS4gVGhhdCBwcm9wZXJ0eSBpcyBpbmplY3RlZCBieSB0aGlzIGhvb2suXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9iamVjdCBzcGVjaWZ5aW5nIHRoZSBgaW5pdGlhbE51bUl0ZW1zYCB0byBiZSBsb2FkZWQgaW5cbiAqIHRoZSBmaXJzdCBwYWdlLlxuICogQHJldHVybnMgQSB7QGxpbmsgVXNlUGFnaW5hdGVkUXVlcnlSZXN1bHR9IHRoYXQgaW5jbHVkZXMgdGhlIGN1cnJlbnRseSBsb2FkZWRcbiAqIGl0ZW1zLCB0aGUgc3RhdHVzIG9mIHRoZSBwYWdpbmF0aW9uLCBhbmQgYSBgbG9hZE1vcmVgIGZ1bmN0aW9uLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVBhZ2luYXRlZFF1ZXJ5X2V4cGVyaW1lbnRhbDxcbiAgUXVlcnkgZXh0ZW5kcyBQYWdpbmF0ZWRRdWVyeVJlZmVyZW5jZSxcbj4oXG4gIHF1ZXJ5OiBRdWVyeSxcbiAgYXJnczogUGFnaW5hdGVkUXVlcnlBcmdzPFF1ZXJ5PiB8IFwic2tpcFwiLFxuICAvLyBGdXR1cmUgb3B0aW9ucyB0aGlzIGhvb2sgbWlnaHQgYWNjZXB0OlxuICAvLyAtIG1heGltdW1Sb3dzUmVhZFxuICAvLyAtIG1heGltdW1CeXRlc1JlYWRcbiAgLy8gLSBhIGN1cnNvciBmb3Igd2hlcmUgdG8gc3RhcnQ/IGFsdGhvdWdoIHByb2JhYmx5IG5vIGVuZEN1cnNvclxuICBvcHRpb25zOiB7IGluaXRpYWxOdW1JdGVtczogbnVtYmVyIH0sXG4pOiBVc2VQYWdpbmF0ZWRRdWVyeVJldHVyblR5cGU8UXVlcnk+IHtcbiAgaWYgKFxuICAgIHR5cGVvZiBvcHRpb25zPy5pbml0aWFsTnVtSXRlbXMgIT09IFwibnVtYmVyXCIgfHxcbiAgICBvcHRpb25zLmluaXRpYWxOdW1JdGVtcyA8IDBcbiAgKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFxcYG9wdGlvbnMuaW5pdGlhbE51bUl0ZW1zXFxgIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuIFJlY2VpdmVkIFxcYCR7b3B0aW9ucz8uaW5pdGlhbE51bUl0ZW1zfVxcYC5gLFxuICAgICk7XG4gIH1cbiAgY29uc3Qgc2tpcCA9IGFyZ3MgPT09IFwic2tpcFwiO1xuICBjb25zdCBhcmdzT2JqZWN0ID0gc2tpcCA/IHt9IDogYXJncztcblxuICBjb25zdCBjb252ZXhDbGllbnQgPSB1c2VDb252ZXgoKTtcbiAgY29uc3QgbG9nZ2VyID0gY29udmV4Q2xpZW50LmxvZ2dlcjtcblxuICAvLyBUaGUgaWRlbnRpdHkgb2YgY3JlYXRlSW5pdGlhbFN0YXRlIGNoYW5nZXMgZWFjaCB0aW1lIVxuICBjb25zdCBjcmVhdGVJbml0aWFsU3RhdGU6ICgpID0+IFVzZVBhZ2luYXRlZFF1ZXJ5U3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc3QgaWQgPSBuZXh0UGFnaW5hdGlvbklkKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgYXJnczogYXJnc09iamVjdCBhcyBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgICBpZCxcbiAgICAgIC8vIFF1ZXJpZXMgd2lsbCBjb250YWluIHplcm8gb3Igb25lIHF1ZXJpZXMgZm9yZXZlci5cbiAgICAgIHF1ZXJpZXM6IHNraXBcbiAgICAgICAgPyAoe30gYXMgVXNlUGFnaW5hdGVkUXVlcnlTdGF0ZVtcInF1ZXJpZXNcIl0pXG4gICAgICAgIDoge1xuICAgICAgICAgICAgcGFnaW5hdGVkUXVlcnk6IHtcbiAgICAgICAgICAgICAgcXVlcnksXG4gICAgICAgICAgICAgIGFyZ3M6IHtcbiAgICAgICAgICAgICAgICAuLi5hcmdzT2JqZWN0LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwYWdpbmF0aW9uT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGluaXRpYWxOdW1JdGVtczogb3B0aW9ucy5pbml0aWFsTnVtSXRlbXMsXG4gICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICBza2lwLFxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgW3N0YXRlLCBzZXRTdGF0ZV0gPVxuICAgIHVzZVN0YXRlPFVzZVBhZ2luYXRlZFF1ZXJ5U3RhdGU+KGNyZWF0ZUluaXRpYWxTdGF0ZSk7XG5cbiAgLy8gYGN1cnJTdGF0ZWAgaXMgdGhlIHN0YXRlIHRoYXQgd2UnbGwgcmVuZGVyIGJhc2VkIG9uLlxuICBsZXQgY3VyclN0YXRlID0gc3RhdGU7XG4gIC8vIE5ldyBmdW5jdGlvbiwgYXJncywgb3Igc2tpcD8gTmV3IHBhZ2luYXRlZCBxdWVyeSFcbiAgaWYgKFxuICAgIGdldEZ1bmN0aW9uTmFtZShxdWVyeSkgIT09IGdldEZ1bmN0aW9uTmFtZShzdGF0ZS5xdWVyeSkgfHxcbiAgICBKU09OLnN0cmluZ2lmeShjb252ZXhUb0pzb24oYXJnc09iamVjdCBhcyBWYWx1ZSkpICE9PVxuICAgICAgSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKHN0YXRlLmFyZ3MpKSB8fFxuICAgIHNraXAgIT09IHN0YXRlLnNraXBcbiAgKSB7XG4gICAgY3VyclN0YXRlID0gY3JlYXRlSW5pdGlhbFN0YXRlKCk7XG4gICAgc2V0U3RhdGUoY3VyclN0YXRlKTtcbiAgfVxuICAvLyBjdXJyU3RhdGUucXVlcmllcyBpcyBqdXN0IGEgc2luZ2xlIHF1ZXJ5OyB3ZSB1c2UgdXNlUXVlcmllc1xuICAvLyBiZWNhdXNlIGl0J3MgdGhlIGxvd2VyLWxldmVsIG9vayBzdGhhdCBzdXBwb3J0cyBwYWdpbmF0aW9uIG9wdGlvbnMuXG4gIGNvbnN0IHJlc3VsdHNPYmplY3QgPSB1c2VRdWVyaWVzKGN1cnJTdGF0ZS5xdWVyaWVzKTtcblxuICAvLyBza2lwXG4gIGlmICghKFwicGFnaW5hdGVkUXVlcnlcIiBpbiByZXN1bHRzT2JqZWN0KSkge1xuICAgIGlmICghc2tpcCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2h5IGlzIGl0IG1pc3Npbmc/XCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0czogW10sXG4gICAgICBzdGF0dXM6IFwiTG9hZGluZ0ZpcnN0UGFnZVwiLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgbG9hZE1vcmU6IGZ1bmN0aW9uIHNraXBOT1AoX251bUl0ZW1zOiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IHJlc3VsdHNPYmplY3QucGFnaW5hdGVkUXVlcnkgYXNcbiAgICB8IFBhZ2luYXRlZFF1ZXJ5UmVzdWx0PFF1ZXJ5W1wiX3JldHVyblR5cGVcIl1bXCJwYWdlXCJdW251bWJlcl0+XG4gICAgfCBFcnJvcjtcblxuICAvLyBUT0RPIHRoaXMgaXMgYSB3ZWlyZCBtaXggb2YgcmVzcG9uc2liaWxpdGllczpcbiAgLy8gLSBpcyBpdCB0aGUgaG9vaydzIGpvYiB0byByZW5kZXIgdGhlIGluaXRpYWwgbG9hZGluZyBzdGF0ZT9cbiAgLy8gLSBvciBpcyBpdCB0aGUgcGFnaW5hdGVkIHF1ZXJ5J3Mgam9iIHRvIHJlbmRlciB0aGUgYXBwcm9wcm9hdGUgbG9hZGluZyBzdGF0ZT9cbiAgLy8gSXQgY29tZXMgYmFjayB0byB3aHkgd2UnZCBldmVyIGdldCB1bmRlZmluZWQgd2hlbiBhc2tpbmcgYWJvdXQgYSBxdWVyeTsgaGF2ZSB3ZSBub3QgeWV0IGNhbGxlZCBzdWJzY3JpYmUgZm9yIGl0P1xuICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0czogW10sXG4gICAgICBsb2FkTW9yZTogKCkgPT4gZmFsc2UsXG4gICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICBzdGF0dXM6IFwiTG9hZGluZ0ZpcnN0UGFnZVwiLFxuICAgIH07XG4gIH1cblxuICBpZiAocmVzdWx0IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICBpZiAoXG4gICAgICByZXN1bHQubWVzc2FnZS5pbmNsdWRlcyhcIkludmFsaWRDdXJzb3JcIikgfHxcbiAgICAgIChyZXN1bHQgaW5zdGFuY2VvZiBDb252ZXhFcnJvciAmJlxuICAgICAgICB0eXBlb2YgcmVzdWx0LmRhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgcmVzdWx0LmRhdGE/LmlzQ29udmV4U3lzdGVtRXJyb3IgPT09IHRydWUgJiZcbiAgICAgICAgcmVzdWx0LmRhdGE/LnBhZ2luYXRpb25FcnJvciA9PT0gXCJJbnZhbGlkQ3Vyc29yXCIpXG4gICAgKSB7XG4gICAgICAvLyAtIEludmFsaWRDdXJzb3I6IElmIHRoZSBjdXJzb3IgaXMgaW52YWxpZCwgcHJvYmFibHkgdGhlIHBhZ2luYXRlZFxuICAgICAgLy8gZGF0YWJhc2UgcXVlcnkgd2FzIGRhdGEtZGVwZW5kZW50IGFuZCBjaGFuZ2VkIHVuZGVybmVhdGggdXMuIFRoZVxuICAgICAgLy8gY3Vyc29yIGluIHRoZSBwYXJhbXMgb3Igam91cm5hbCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgY3VycmVudFxuICAgICAgLy8gZGF0YWJhc2UgcXVlcnkuXG5cbiAgICAgIC8vIEluIGFsbCBjYXNlcywgd2Ugd2FudCB0byByZXN0YXJ0IHBhZ2luYXRpb24gdG8gdGhyb3cgYXdheSBhbGwgb3VyXG4gICAgICAvLyBleGlzdGluZyBjdXJzb3JzLlxuICAgICAgbG9nZ2VyLndhcm4oXG4gICAgICAgIFwidXNlUGFnaW5hdGVkUXVlcnkgaGl0IGVycm9yLCByZXNldHRpbmcgcGFnaW5hdGlvbiBzdGF0ZTogXCIgK1xuICAgICAgICAgIHJlc3VsdC5tZXNzYWdlLFxuICAgICAgKTtcbiAgICAgIHNldFN0YXRlKGNyZWF0ZUluaXRpYWxTdGF0ZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgbG9hZE1vcmU6ICgpID0+IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICAgIHN0YXR1czogXCJMb2FkaW5nRmlyc3RQYWdlXCIsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyByZXN1bHQ7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5yZXN1bHQsXG4gICAgbG9hZE1vcmU6IChudW0pID0+IHtcbiAgICAgIHJldHVybiByZXN1bHQubG9hZE1vcmUobnVtKTtcbiAgICB9LFxuICAgIGlzTG9hZGluZzpcbiAgICAgIHJlc3VsdC5zdGF0dXMgPT09IFwiTG9hZGluZ0ZpcnN0UGFnZVwiXG4gICAgICAgID8gdHJ1ZVxuICAgICAgICA6IHJlc3VsdC5zdGF0dXMgPT09IFwiTG9hZGluZ01vcmVcIlxuICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgIDogZmFsc2UsXG4gIH0gYXMgVXNlUGFnaW5hdGVkUXVlcnlSZXR1cm5UeXBlPFF1ZXJ5Pjtcbn1cblxubGV0IHBhZ2luYXRpb25JZCA9IDA7XG4vKipcbiAqIFNlZSAuL3VzZV9wYWdpbmF0ZWRfcXVlcnkgZm9yIHRoZSBwdXJwb3NlLCBidXQgd2UgbWF5IGJlIGFibGUgdG8gZ2V0IHJpZCBvZiB0aGlzIHNvb24uXG4gKlxuICogQHJldHVybnMgVGhlIHBhZ2luYXRpb24gSUQuXG4gKi9cbmZ1bmN0aW9uIG5leHRQYWdpbmF0aW9uSWQoKTogbnVtYmVyIHtcbiAgcGFnaW5hdGlvbklkKys7XG4gIHJldHVybiBwYWdpbmF0aW9uSWQ7XG59XG5cbi8qKlxuICogUmVzZXQgcGFnaW5hdGlvbiBpZCBmb3IgdGVzdHMgb25seSwgc28gdGVzdHMga25vdyB3aGF0IGl0IGlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRQYWdpbmF0aW9uSWQoKSB7XG4gIHBhZ2luYXRpb25JZCA9IDA7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_paginated_query2.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_queries.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_queries.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useQueries: () => (/* binding */ useQueries),\n/* harmony export */   useQueriesHelper: () => (/* binding */ useQueriesHelper)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client.js */ \"(ssr)/./node_modules/convex/dist/esm/react/client.js\");\n/* harmony import */ var _queries_observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queries_observer.js */ \"(ssr)/./node_modules/convex/dist/esm/react/queries_observer.js\");\n/* harmony import */ var _use_subscription_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./use_subscription.js */ \"(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\");\n\n\n\n\n\nfunction useQueries(queries) {\n    const convex = (0,_client_js__WEBPACK_IMPORTED_MODULE_1__.useConvex)();\n    if (convex === void 0) {\n        throw new Error(\"Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\");\n    }\n    const createWatch = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useQueries.useMemo[createWatch]\": ()=>{\n            return ({\n                \"useQueries.useMemo[createWatch]\": (query, args, { journal, paginationOptions })=>{\n                    if (paginationOptions) {\n                        return convex.watchPaginatedQuery(query, args, paginationOptions);\n                    } else {\n                        return convex.watchQuery(query, args, journal ? {\n                            journal\n                        } : {});\n                    }\n                }\n            })[\"useQueries.useMemo[createWatch]\"];\n        }\n    }[\"useQueries.useMemo[createWatch]\"], [\n        convex\n    ]);\n    return useQueriesHelper(queries, createWatch);\n}\nfunction useQueriesHelper(queries, createWatch) {\n    const [observer] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        \"useQueriesHelper.useState\": ()=>new _queries_observer_js__WEBPACK_IMPORTED_MODULE_2__.QueriesObserver(createWatch)\n    }[\"useQueriesHelper.useState\"]);\n    if (observer.createWatch !== createWatch) {\n        observer.setCreateWatch(createWatch);\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useQueriesHelper.useEffect\": ()=>({\n                \"useQueriesHelper.useEffect\": ()=>observer.destroy()\n            })[\"useQueriesHelper.useEffect\"]\n    }[\"useQueriesHelper.useEffect\"], [\n        observer\n    ]);\n    const subscription = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)({\n        \"useQueriesHelper.useMemo[subscription]\": ()=>({\n                getCurrentValue: ({\n                    \"useQueriesHelper.useMemo[subscription]\": ()=>{\n                        return observer.getLocalResults(queries);\n                    }\n                })[\"useQueriesHelper.useMemo[subscription]\"],\n                subscribe: ({\n                    \"useQueriesHelper.useMemo[subscription]\": (callback)=>{\n                        observer.setQueries(queries);\n                        return observer.subscribe(callback);\n                    }\n                })[\"useQueriesHelper.useMemo[subscription]\"]\n            })\n    }[\"useQueriesHelper.useMemo[subscription]\"], [\n        observer,\n        queries\n    ]);\n    return (0,_use_subscription_js__WEBPACK_IMPORTED_MODULE_3__.useSubscription)(subscription);\n} //# sourceMappingURL=use_queries.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9xdWVyaWVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDNkM7QUFDbkI7QUFDbUI7QUFDYjtBQXdEekIsU0FBUyxXQUNkLFNBQ3lDO0lBQ3pDLE1BQU0sU0FBUyxxREFBUyxDQUFDO0lBQ3pCLElBQUksV0FBVyxRQUFXO1FBR3hCLE1BQU0sSUFBSSxNQUNSO0lBSUo7SUFDQSxNQUFNLGNBQWMsOENBQU87MkNBQUM7WUFDMUI7bURBQU8sQ0FDTCxPQUNBLE1BQ0EsRUFDRSxTQUNBLG1CQUNGO29CQUtBLElBQUksbUJBQW1CO3dCQUNyQixPQUFPLE9BQU8sb0JBQW9CLE9BQU8sTUFBTSxpQkFBaUI7b0JBQ2xFLE9BQU87d0JBQ0wsT0FBTyxPQUFPLFdBQVcsT0FBTyxNQUFNLFVBQVU7NEJBQUU7d0JBQVEsSUFBSSxDQUFDLENBQUM7b0JBQ2xFO2dCQUNGOztRQUNGOzBDQUFHO1FBQUMsTUFBTTtLQUFDO0lBQ1gsT0FBTyxpQkFBaUIsU0FBUyxXQUFXO0FBQzlDO0FBS08sU0FBUyxpQkFDZCxTQUNBLGFBQ3lDO0lBQ3pDLE1BQU0sQ0FBQyxRQUFRLElBQUksK0NBQVE7cUNBQUMsSUFBTSxJQUFJLGlFQUFlLENBQUMsV0FBVyxDQUFDOztJQUVsRSxJQUFJLFNBQVMsZ0JBQWdCLGFBQWE7UUFDeEMsU0FBUyxlQUFlLFdBQVc7SUFDckM7SUFHQSxnREFBUztzQ0FBQzs4Q0FBTSxJQUFNLFNBQVMsUUFBUTs7cUNBQUc7UUFBQyxRQUFRO0tBQUM7SUFFcEQsTUFBTSxlQUFlLDhDQUFPO2tEQUMxQixLQUFPO2dCQUNMOzhEQUFpQjt3QkFDZixPQUFPLFNBQVMsZ0JBQWdCLE9BQU87b0JBQ3pDOztnQkFDQTs4REFBVyxDQUFDO3dCQUNWLFNBQVMsV0FBVyxPQUFPO3dCQUMzQixPQUFPLFNBQVMsVUFBVSxRQUFRO29CQUNwQzs7YUFDRjtpREFDQTtRQUFDO1FBQVUsT0FBTztLQUFBO0lBR3BCLE9BQU8scUVBQWUsQ0FBQyxZQUFZO0FBQ3JDIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3JlYWN0L3VzZV9xdWVyaWVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbHVlIH0gZnJvbSBcIi4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlQ29udmV4IH0gZnJvbSBcIi4vY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBDcmVhdGVXYXRjaCwgUXVlcmllc09ic2VydmVyIH0gZnJvbSBcIi4vcXVlcmllc19vYnNlcnZlci5qc1wiO1xuaW1wb3J0IHsgdXNlU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4vdXNlX3N1YnNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgUXVlcnlKb3VybmFsIH0gZnJvbSBcIi4uL2Jyb3dzZXIvaW5kZXguanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVmZXJlbmNlIH0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IFN1YnNjcmliZVRvUGFnaW5hdGVkUXVlcnlPcHRpb25zIH0gZnJvbSBcIi4uL2Jyb3dzZXIvc3luYy9wYWdpbmF0ZWRfcXVlcnlfY2xpZW50LmpzXCI7XG5cbi8qKlxuICogTG9hZCBhIHZhcmlhYmxlIG51bWJlciBvZiByZWFjdGl2ZSBDb252ZXggcXVlcmllcy5cbiAqXG4gKiBgdXNlUXVlcmllc2AgaXMgc2ltaWxhciB0byB7QGxpbmsgdXNlUXVlcnl9IGJ1dCBpdCBhbGxvd3NcbiAqIGxvYWRpbmcgbXVsdGlwbGUgcXVlcmllcyB3aGljaCBjYW4gYmUgdXNlZnVsIGZvciBsb2FkaW5nIGEgZHluYW1pYyBudW1iZXJcbiAqIG9mIHF1ZXJpZXMgd2l0aG91dCB2aW9sYXRpbmcgdGhlIHJ1bGVzIG9mIFJlYWN0IGhvb2tzLlxuICpcbiAqIFRoaXMgaG9vayBhY2NlcHRzIGFuIG9iamVjdCB3aG9zZSBrZXlzIGFyZSBpZGVudGlmaWVycyBmb3IgZWFjaCBxdWVyeSBhbmQgdGhlXG4gKiB2YWx1ZXMgYXJlIG9iamVjdHMgb2YgYHsgcXVlcnk6IEZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzOiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4gfWAuIFRoZVxuICogYHF1ZXJ5YCBpcyBhIEZ1bmN0aW9uUmVmZXJlbmNlIGZvciB0aGUgQ29udmV4IHF1ZXJ5IGZ1bmN0aW9uIHRvIGxvYWQsIGFuZCB0aGUgYGFyZ3NgIGFyZVxuICogdGhlIGFyZ3VtZW50cyB0byB0aGF0IGZ1bmN0aW9uLlxuICpcbiAqIFRoZSBob29rIHJldHVybnMgYW4gb2JqZWN0IHRoYXQgbWFwcyBlYWNoIGlkZW50aWZpZXIgdG8gdGhlIHJlc3VsdCBvZiB0aGUgcXVlcnksXG4gKiBgdW5kZWZpbmVkYCBpZiB0aGUgcXVlcnkgaXMgc3RpbGwgbG9hZGluZywgb3IgYW4gaW5zdGFuY2Ugb2YgYEVycm9yYCBpZiB0aGUgcXVlcnlcbiAqIHRocmV3IGFuIGV4Y2VwdGlvbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSBpZiB5b3UgbG9hZGVkIGEgcXVlcnkgbGlrZTpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHJlc3VsdHMgPSB1c2VRdWVyaWVzKHtcbiAqICAgbWVzc2FnZXNJbkdlbmVyYWw6IHtcbiAqICAgICBxdWVyeTogXCJsaXN0TWVzc2FnZXNcIixcbiAqICAgICBhcmdzOiB7IGNoYW5uZWw6IFwiI2dlbmVyYWxcIiB9XG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKiB0aGVuIHRoZSByZXN1bHQgd291bGQgbG9vayBsaWtlOlxuICogYGBgdHlwZXNjcmlwdFxuICoge1xuICogICBtZXNzYWdlc0luR2VuZXJhbDogW3tcbiAqICAgICBjaGFubmVsOiBcIiNnZW5lcmFsXCIsXG4gKiAgICAgYm9keTogXCJoZWxsb1wiXG4gKiAgICAgX2lkOiAuLi4sXG4gKiAgICAgX2NyZWF0aW9uVGltZTogLi4uXG4gKiAgIH1dXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIFJlYWN0IGhvb2sgY29udGFpbnMgaW50ZXJuYWwgc3RhdGUgdGhhdCB3aWxsIGNhdXNlIGEgcmVyZW5kZXJcbiAqIHdoZW5ldmVyIGFueSBvZiB0aGUgcXVlcnkgcmVzdWx0cyBjaGFuZ2UuXG4gKlxuICogVGhyb3dzIGFuIGVycm9yIGlmIG5vdCB1c2VkIHVuZGVyIHtAbGluayBDb252ZXhQcm92aWRlcn0uXG4gKlxuICogQHBhcmFtIHF1ZXJpZXMgLSBBbiBvYmplY3QgbWFwcGluZyBpZGVudGlmaWVycyB0byBvYmplY3RzIG9mXG4gKiBge3F1ZXJ5OiBzdHJpbmcsIGFyZ3M6IFJlY29yZDxzdHJpbmcsIFZhbHVlPiB9YCBkZXNjcmliaW5nIHdoaWNoIHF1ZXJ5XG4gKiBmdW5jdGlvbnMgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBbiBvYmplY3Qgd2l0aCB0aGUgc2FtZSBrZXlzIGFzIHRoZSBpbnB1dC4gVGhlIHZhbHVlcyBhcmUgdGhlIHJlc3VsdFxuICogb2YgdGhlIHF1ZXJ5IGZ1bmN0aW9uLCBgdW5kZWZpbmVkYCBpZiBpdCdzIHN0aWxsIGxvYWRpbmcsIG9yIGFuIGBFcnJvcmAgaWZcbiAqIGl0IHRocmV3IGFuIGV4Y2VwdGlvbi5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VRdWVyaWVzKFxuICBxdWVyaWVzOiBSZXF1ZXN0Rm9yUXVlcmllcyxcbik6IFJlY29yZDxzdHJpbmcsIGFueSB8IHVuZGVmaW5lZCB8IEVycm9yPiB7XG4gIGNvbnN0IGNvbnZleCA9IHVzZUNvbnZleCgpO1xuICBpZiAoY29udmV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBFcnJvciBtZXNzYWdlIGluY2x1ZGVzIGB1c2VRdWVyeWAgYmVjYXVzZSB0aGlzIGhvb2sgaXMgY2FsbGVkIGJ5IGB1c2VRdWVyeWBcbiAgICAvLyBtb3JlIG9mdGVuIHRoYW4gaXQncyBjYWxsZWQgZGlyZWN0bHkuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb3VsZCBub3QgZmluZCBDb252ZXggY2xpZW50ISBgdXNlUXVlcnlgIG11c3QgYmUgdXNlZCBpbiB0aGUgUmVhY3QgY29tcG9uZW50IFwiICtcbiAgICAgICAgXCJ0cmVlIHVuZGVyIGBDb252ZXhQcm92aWRlcmAuIERpZCB5b3UgZm9yZ2V0IGl0PyBcIiArXG4gICAgICAgIFwiU2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3F1aWNrLXN0YXJ0I3NldC11cC1jb252ZXgtaW4teW91ci1yZWFjdC1hcHBcIixcbiAgICApO1xuICB9XG4gIGNvbnN0IGNyZWF0ZVdhdGNoID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHF1ZXJ5OiBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+LFxuICAgICAgYXJnczogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgICAge1xuICAgICAgICBqb3VybmFsLFxuICAgICAgICBwYWdpbmF0aW9uT3B0aW9ucyxcbiAgICAgIH06IHtcbiAgICAgICAgam91cm5hbD86IFF1ZXJ5Sm91cm5hbDtcbiAgICAgICAgcGFnaW5hdGlvbk9wdGlvbnM/OiBTdWJzY3JpYmVUb1BhZ2luYXRlZFF1ZXJ5T3B0aW9ucztcbiAgICAgIH0sXG4gICAgKSA9PiB7XG4gICAgICBpZiAocGFnaW5hdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnZleC53YXRjaFBhZ2luYXRlZFF1ZXJ5KHF1ZXJ5LCBhcmdzLCBwYWdpbmF0aW9uT3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gY29udmV4LndhdGNoUXVlcnkocXVlcnksIGFyZ3MsIGpvdXJuYWwgPyB7IGpvdXJuYWwgfSA6IHt9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbY29udmV4XSk7XG4gIHJldHVybiB1c2VRdWVyaWVzSGVscGVyKHF1ZXJpZXMsIGNyZWF0ZVdhdGNoKTtcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCB2ZXJzaW9uIG9mIGB1c2VRdWVyaWVzYCB0aGF0IGlzIGV4cG9ydGVkIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlUXVlcmllc0hlbHBlcihcbiAgcXVlcmllczogUmVxdWVzdEZvclF1ZXJpZXMsXG4gIGNyZWF0ZVdhdGNoOiBDcmVhdGVXYXRjaCxcbik6IFJlY29yZDxzdHJpbmcsIGFueSB8IHVuZGVmaW5lZCB8IEVycm9yPiB7XG4gIGNvbnN0IFtvYnNlcnZlcl0gPSB1c2VTdGF0ZSgoKSA9PiBuZXcgUXVlcmllc09ic2VydmVyKGNyZWF0ZVdhdGNoKSk7XG5cbiAgaWYgKG9ic2VydmVyLmNyZWF0ZVdhdGNoICE9PSBjcmVhdGVXYXRjaCkge1xuICAgIG9ic2VydmVyLnNldENyZWF0ZVdhdGNoKGNyZWF0ZVdhdGNoKTtcbiAgfVxuXG4gIC8vIFVuc3Vic2NyaWJlIGZyb20gYWxsIHF1ZXJpZXMgb24gdW5tb3VudC5cbiAgdXNlRWZmZWN0KCgpID0+ICgpID0+IG9ic2VydmVyLmRlc3Ryb3koKSwgW29ic2VydmVyXSk7XG5cbiAgY29uc3Qgc3Vic2NyaXB0aW9uID0gdXNlTWVtbyhcbiAgICAoKSA9PiAoe1xuICAgICAgZ2V0Q3VycmVudFZhbHVlOiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBvYnNlcnZlci5nZXRMb2NhbFJlc3VsdHMocXVlcmllcyk7XG4gICAgICB9LFxuICAgICAgc3Vic2NyaWJlOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IHtcbiAgICAgICAgb2JzZXJ2ZXIuc2V0UXVlcmllcyhxdWVyaWVzKTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgICB9LFxuICAgIH0pLFxuICAgIFtvYnNlcnZlciwgcXVlcmllc10sXG4gICk7XG5cbiAgcmV0dXJuIHVzZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xufVxuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYSByZXF1ZXN0IHRvIGxvYWQgbXVsdGlwbGUgcXVlcmllcy5cbiAqXG4gKiBUaGUga2V5cyBvZiB0aGlzIG9iamVjdCBhcmUgaWRlbnRpZmllcnMgYW5kIHRoZSB2YWx1ZXMgYXJlIG9iamVjdHMgY29udGFpbmluZ1xuICogdGhlIHF1ZXJ5IGZ1bmN0aW9uIGFuZCB0aGUgYXJndW1lbnRzIHRvIHBhc3MgdG8gaXQuXG4gKlxuICogVGhpcyBpcyB1c2VkIGFzIGFuIGFyZ3VtZW50IHRvIHtAbGluayB1c2VRdWVyaWVzfS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgUmVxdWVzdEZvclF1ZXJpZXMgPSBSZWNvcmQ8XG4gIHN0cmluZyxcbiAge1xuICAgIHF1ZXJ5OiBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCI+O1xuICAgIGFyZ3M6IFJlY29yZDxzdHJpbmcsIFZhbHVlPjtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgcGFnaW5hdGlvbk9wdGlvbnM/OiBTdWJzY3JpYmVUb1BhZ2luYXRlZFF1ZXJ5T3B0aW9ucztcbiAgfVxuPjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_queries.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js":
/*!****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/react/use_subscription.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSubscription: () => (/* binding */ useSubscription)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\nfunction useSubscription({ // (Synchronously) returns the current value of our subscription.\ngetCurrentValue, // This function is passed an event handler to attach to the subscription.\n// It should return an unsubscribe function that removes the handler.\nsubscribe }) {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        \"useSubscription.useState\": ()=>({\n                getCurrentValue,\n                subscribe,\n                value: getCurrentValue()\n            })\n    }[\"useSubscription.useState\"]);\n    let valueToReturn = state.value;\n    if (state.getCurrentValue !== getCurrentValue || state.subscribe !== subscribe) {\n        valueToReturn = getCurrentValue();\n        setState({\n            getCurrentValue,\n            subscribe,\n            value: valueToReturn\n        });\n    }\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSubscription.useEffect\": ()=>{\n            let didUnsubscribe = false;\n            const checkForUpdates = {\n                \"useSubscription.useEffect.checkForUpdates\": ()=>{\n                    if (didUnsubscribe) {\n                        return;\n                    }\n                    setState({\n                        \"useSubscription.useEffect.checkForUpdates\": (prevState)=>{\n                            if (prevState.getCurrentValue !== getCurrentValue || prevState.subscribe !== subscribe) {\n                                return prevState;\n                            }\n                            const value = getCurrentValue();\n                            if (prevState.value === value) {\n                                return prevState;\n                            }\n                            return {\n                                ...prevState,\n                                value\n                            };\n                        }\n                    }[\"useSubscription.useEffect.checkForUpdates\"]);\n                }\n            }[\"useSubscription.useEffect.checkForUpdates\"];\n            const unsubscribe = subscribe(checkForUpdates);\n            checkForUpdates();\n            return ({\n                \"useSubscription.useEffect\": ()=>{\n                    didUnsubscribe = true;\n                    unsubscribe();\n                }\n            })[\"useSubscription.useEffect\"];\n        }\n    }[\"useSubscription.useEffect\"], [\n        getCurrentValue,\n        subscribe\n    ]);\n    return valueToReturn;\n} //# sourceMappingURL=use_subscription.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3JlYWN0L3VzZV9zdWJzY3JpcHRpb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9DO0FBd0M3QixTQUFTLGdCQUF1QjtBQUVyQztBQUFBO0FBSUEsV0FDRixFQUdVO0lBS1IsTUFBTSxDQUFDLE9BQU8sUUFBUSxJQUFJLCtDQUFRO29DQUFDLEtBQU87Z0JBQ3hDO2dCQUNBO2dCQUNBLE9BQU8sZ0JBQWdCO2FBQ3pCOztJQUVBLElBQUksZ0JBQWdCLE1BQU07SUFHMUIsSUFDRSxNQUFNLG9CQUFvQixtQkFDMUIsTUFBTSxjQUFjLFdBQ3BCO1FBSUEsZ0JBQWdCLGdCQUFnQjtRQUVoQyxTQUFTO1lBQ1A7WUFDQTtZQUNBLE9BQU87UUFDVCxDQUFDO0lBQ0g7SUFXQSxnREFBUztxQ0FBQztZQUNSLElBQUksaUJBQWlCO1lBRXJCLE1BQU07NkRBQWtCO29CQUt0QixJQUFJLGdCQUFnQjt3QkFDbEI7b0JBQ0Y7b0JBRUE7cUVBQVMsQ0FBQzs0QkFLUixJQUNFLFVBQVUsb0JBQW9CLG1CQUM5QixVQUFVLGNBQWMsV0FDeEI7Z0NBQ0EsT0FBTzs0QkFDVDs0QkFLQSxNQUFNLFFBQVEsZ0JBQWdCOzRCQUM5QixJQUFJLFVBQVUsVUFBVSxPQUFPO2dDQUM3QixPQUFPOzRCQUNUOzRCQUVBLE9BQU87Z0NBQUUsR0FBRztnQ0FBVzs0QkFBTTt3QkFDL0IsQ0FBQzs7Z0JBQ0g7O1lBQ0EsTUFBTSxjQUFjLFVBQVUsZUFBZTtZQUs3QyxnQkFBZ0I7WUFFaEI7NkNBQU87b0JBQ0wsaUJBQWlCO29CQUNqQixZQUFZO2dCQUNkOztRQUNGO29DQUFHO1FBQUM7UUFBaUIsU0FBUztLQUFDO0lBRy9CLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9yZWFjdC91c2Vfc3Vic2NyaXB0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxuLypcblRoaXMgY29kZSBpcyB0YWtlbiBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2J2YXVnaG4vZTI1Mzk3ZjcwZThjNjViMGFlMGQ3YzkwYjczMWIxODlcbmJlY2F1c2UgY29ycmVjdCBzdWJzY3JpcHRpb25zIGluIGFzeW5jIFJlYWN0IGlzIGNvbXBsZXghXG5cbkl0IGNvdWxkIHByb2JhYmx5IGJlIHJlcGxhY2VkIHdpdGggYHVzZVN5bmNFeHRlcm5hbFN0b3JlKClgLlxuXG5UaGUgTUlUIExpY2Vuc2UgKE1JVClcbkNvcHlyaWdodCDCqSAyMDIzIEJyaWFuIFZhdWdoblxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSDigJxTb2Z0d2FyZeKAnSksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQg4oCcQVMgSVPigJ0sIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcblNPRlRXQVJFLlxuKi9cblxuLyoqXG4gKiBIb29rIHVzZWQgZm9yIHNhZmVseSBtYW5hZ2luZyBzdWJzY3JpcHRpb25zIGluIGNvbmN1cnJlbnQgbW9kZS5cbiAqXG4gKiBJbiBvcmRlciB0byBhdm9pZCByZW1vdmluZyBhbmQgcmUtYWRkaW5nIHN1YnNjcmlwdGlvbnMgZWFjaCB0aW1lIHRoaXMgaG9vayBpcyBjYWxsZWQsXG4gKiB0aGUgcGFyYW1ldGVycyBwYXNzZWQgdG8gdGhpcyBob29rIHNob3VsZCBiZSBtZW1vaXplZCBpbiBzb21lIHdheeKAk1xuICogZWl0aGVyIGJ5IHdyYXBwaW5nIHRoZSBlbnRpcmUgcGFyYW1zIG9iamVjdCB3aXRoIHVzZU1lbW8oKVxuICogb3IgYnkgd3JhcHBpbmcgdGhlIGluZGl2aWR1YWwgY2FsbGJhY2tzIHdpdGggdXNlQ2FsbGJhY2soKS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVN1YnNjcmlwdGlvbjxWYWx1ZT4oe1xuICAvLyAoU3luY2hyb25vdXNseSkgcmV0dXJucyB0aGUgY3VycmVudCB2YWx1ZSBvZiBvdXIgc3Vic2NyaXB0aW9uLlxuICBnZXRDdXJyZW50VmFsdWUsXG5cbiAgLy8gVGhpcyBmdW5jdGlvbiBpcyBwYXNzZWQgYW4gZXZlbnQgaGFuZGxlciB0byBhdHRhY2ggdG8gdGhlIHN1YnNjcmlwdGlvbi5cbiAgLy8gSXQgc2hvdWxkIHJldHVybiBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IHJlbW92ZXMgdGhlIGhhbmRsZXIuXG4gIHN1YnNjcmliZSxcbn06IHtcbiAgZ2V0Q3VycmVudFZhbHVlOiAoKSA9PiBWYWx1ZTtcbiAgc3Vic2NyaWJlOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+ICgpID0+IHZvaWQ7XG59KTogVmFsdWUge1xuICAvLyBSZWFkIHRoZSBjdXJyZW50IHZhbHVlIGZyb20gb3VyIHN1YnNjcmlwdGlvbi5cbiAgLy8gV2hlbiB0aGlzIHZhbHVlIGNoYW5nZXMsIHdlJ2xsIHNjaGVkdWxlIGFuIHVwZGF0ZSB3aXRoIFJlYWN0LlxuICAvLyBJdCdzIGltcG9ydGFudCB0byBhbHNvIHN0b3JlIHRoZSBob29rIHBhcmFtcyBzbyB0aGF0IHdlIGNhbiBjaGVjayBmb3Igc3RhbGVuZXNzLlxuICAvLyAoU2VlIHRoZSBjb21tZW50IGluIGNoZWNrRm9yVXBkYXRlcygpIGJlbG93IGZvciBtb3JlIGluZm8uKVxuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlKCgpID0+ICh7XG4gICAgZ2V0Q3VycmVudFZhbHVlLFxuICAgIHN1YnNjcmliZSxcbiAgICB2YWx1ZTogZ2V0Q3VycmVudFZhbHVlKCksXG4gIH0pKTtcblxuICBsZXQgdmFsdWVUb1JldHVybiA9IHN0YXRlLnZhbHVlO1xuXG4gIC8vIElmIHBhcmFtZXRlcnMgaGF2ZSBjaGFuZ2VkIHNpbmNlIG91ciBsYXN0IHJlbmRlciwgc2NoZWR1bGUgYW4gdXBkYXRlIHdpdGggaXRzIGN1cnJlbnQgdmFsdWUuXG4gIGlmIChcbiAgICBzdGF0ZS5nZXRDdXJyZW50VmFsdWUgIT09IGdldEN1cnJlbnRWYWx1ZSB8fFxuICAgIHN0YXRlLnN1YnNjcmliZSAhPT0gc3Vic2NyaWJlXG4gICkge1xuICAgIC8vIElmIHRoZSBzdWJzY3JpcHRpb24gaGFzIGJlZW4gdXBkYXRlZCwgd2UnbGwgc2NoZWR1bGUgYW5vdGhlciB1cGRhdGUgd2l0aCBSZWFjdC5cbiAgICAvLyBSZWFjdCB3aWxsIHByb2Nlc3MgdGhpcyB1cGRhdGUgaW1tZWRpYXRlbHksIHNvIHRoZSBvbGQgc3Vic2NyaXB0aW9uIHZhbHVlIHdvbid0IGJlIGNvbW1pdHRlZC5cbiAgICAvLyBJdCBpcyBzdGlsbCBuaWNlIHRvIGF2b2lkIHJldHVybmluZyBhIG1pc21hdGNoZWQgdmFsdWUgdGhvdWdoLCBzbyBsZXQncyBvdmVycmlkZSB0aGUgcmV0dXJuIHZhbHVlLlxuICAgIHZhbHVlVG9SZXR1cm4gPSBnZXRDdXJyZW50VmFsdWUoKTtcblxuICAgIHNldFN0YXRlKHtcbiAgICAgIGdldEN1cnJlbnRWYWx1ZSxcbiAgICAgIHN1YnNjcmliZSxcbiAgICAgIHZhbHVlOiB2YWx1ZVRvUmV0dXJuLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gSXQgaXMgaW1wb3J0YW50IG5vdCB0byBzdWJzY3JpYmUgd2hpbGUgcmVuZGVyaW5nIGJlY2F1c2UgdGhpcyBjYW4gbGVhZCB0byBtZW1vcnkgbGVha3MuXG4gIC8vIChMZWFybiBtb3JlIGF0IHJlYWN0anMub3JnL2RvY3Mvc3RyaWN0LW1vZGUuaHRtbCNkZXRlY3RpbmctdW5leHBlY3RlZC1zaWRlLWVmZmVjdHMpXG4gIC8vIEluc3RlYWQsIHdlIHdhaXQgdW50aWwgdGhlIGNvbW1pdCBwaGFzZSB0byBhdHRhY2ggb3VyIGhhbmRsZXIuXG4gIC8vXG4gIC8vIFdlIGludGVudGlvbmFsbHkgdXNlIGEgcGFzc2l2ZSBlZmZlY3QgKHVzZUVmZmVjdCkgcmF0aGVyIHRoYW4gYSBzeW5jaHJvbm91cyBvbmUgKHVzZUxheW91dEVmZmVjdClcbiAgLy8gc28gdGhhdCB3ZSBkb24ndCBzdHJldGNoIHRoZSBjb21taXQgcGhhc2UuXG4gIC8vIFRoaXMgYWxzbyBoYXMgYW4gYWRkZWQgYmVuZWZpdCB3aGVuIG11bHRpcGxlIGNvbXBvbmVudHMgYXJlIHN1YnNjcmliZWQgdG8gdGhlIHNhbWUgc291cmNlOlxuICAvLyBJdCBhbGxvd3MgZWFjaCBvZiB0aGUgZXZlbnQgaGFuZGxlcnMgdG8gc2FmZWx5IHNjaGVkdWxlIHdvcmsgd2l0aG91dCBwb3RlbnRpYWxseSByZW1vdmluZyBhbiBhbm90aGVyIGhhbmRsZXIuXG4gIC8vIChMZWFybiBtb3JlIGF0IGh0dHBzOi8vY29kZXNhbmRib3guaW8vcy9rMHl2cjU5NzBvKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBkaWRVbnN1YnNjcmliZSA9IGZhbHNlO1xuXG4gICAgY29uc3QgY2hlY2tGb3JVcGRhdGVzID0gKCkgPT4ge1xuICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoaXMgY2FsbGJhY2sgd2lsbCBiZSBpbnZva2VkIGV2ZW4gYWZ0ZXIgYmVpbmcgdW5zdWJzY3JpYmVkLFxuICAgICAgLy8gaWYgaXQncyByZW1vdmVkIGFzIGEgcmVzdWx0IG9mIGEgc3Vic2NyaXB0aW9uIGV2ZW50L3VwZGF0ZS5cbiAgICAgIC8vIEluIHRoaXMgY2FzZSwgUmVhY3Qgd2lsbCBsb2cgYSBERVYgd2FybmluZyBhYm91dCBhbiB1cGRhdGUgZnJvbSBhbiB1bm1vdW50ZWQgY29tcG9uZW50LlxuICAgICAgLy8gV2UgY2FuIGF2b2lkIHRyaWdnZXJpbmcgdGhhdCB3YXJuaW5nIHdpdGggdGhpcyBjaGVjay5cbiAgICAgIGlmIChkaWRVbnN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXRlKChwcmV2U3RhdGUpID0+IHtcbiAgICAgICAgLy8gSWdub3JlIHZhbHVlcyBmcm9tIHN0YWxlIHNvdXJjZXMhXG4gICAgICAgIC8vIFNpbmNlIHdlIHN1YnNjcmliZSBhbiB1bnN1YnNjcmliZSBpbiBhIHBhc3NpdmUgZWZmZWN0LFxuICAgICAgICAvLyBpdCdzIHBvc3NpYmxlIHRoYXQgdGhpcyBjYWxsYmFjayB3aWxsIGJlIGludm9rZWQgZm9yIGEgc3RhbGUgKHByZXZpb3VzKSBzdWJzY3JpcHRpb24uXG4gICAgICAgIC8vIFRoaXMgY2hlY2sgYXZvaWRzIHNjaGVkdWxpbmcgYW4gdXBkYXRlIGZvciB0aGF0IHN0YWxlIHN1YnNjcmlwdGlvbi5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHByZXZTdGF0ZS5nZXRDdXJyZW50VmFsdWUgIT09IGdldEN1cnJlbnRWYWx1ZSB8fFxuICAgICAgICAgIHByZXZTdGF0ZS5zdWJzY3JpYmUgIT09IHN1YnNjcmliZVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gcHJldlN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU29tZSBzdWJzY3JpcHRpb25zIHdpbGwgYXV0by1pbnZva2UgdGhlIGhhbmRsZXIsIGV2ZW4gaWYgdGhlIHZhbHVlIGhhc24ndCBjaGFuZ2VkLlxuICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaGFzbid0IGNoYW5nZWQsIG5vIHVwZGF0ZSBpcyBuZWVkZWQuXG4gICAgICAgIC8vIFJldHVybiBzdGF0ZSBhcy1pcyBzbyBSZWFjdCBjYW4gYmFpbCBvdXQgYW5kIGF2b2lkIGFuIHVubmVjZXNzYXJ5IHJlbmRlci5cbiAgICAgICAgY29uc3QgdmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICAgICAgaWYgKHByZXZTdGF0ZS52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gcHJldlN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgLi4ucHJldlN0YXRlLCB2YWx1ZSB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCB1bnN1YnNjcmliZSA9IHN1YnNjcmliZShjaGVja0ZvclVwZGF0ZXMpO1xuXG4gICAgLy8gQmVjYXVzZSB3ZSdyZSBzdWJzY3JpYmluZyBpbiBhIHBhc3NpdmUgZWZmZWN0LFxuICAgIC8vIGl0J3MgcG9zc2libGUgdGhhdCBhbiB1cGRhdGUgaGFzIG9jY3VycmVkIGJldHdlZW4gcmVuZGVyIGFuZCBvdXIgZWZmZWN0IGhhbmRsZXIuXG4gICAgLy8gQ2hlY2sgZm9yIHRoaXMgYW5kIHNjaGVkdWxlIGFuIHVwZGF0ZSBpZiB3b3JrIGhhcyBvY2N1cnJlZC5cbiAgICBjaGVja0ZvclVwZGF0ZXMoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkaWRVbnN1YnNjcmliZSA9IHRydWU7XG4gICAgICB1bnN1YnNjcmliZSgpO1xuICAgIH07XG4gIH0sIFtnZXRDdXJyZW50VmFsdWUsIHN1YnNjcmliZV0pO1xuXG4gIC8vIFJldHVybiB0aGUgY3VycmVudCB2YWx1ZSBmb3Igb3VyIGNhbGxlciB0byB1c2Ugd2hpbGUgcmVuZGVyaW5nLlxuICByZXR1cm4gdmFsdWVUb1JldHVybjtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/react/use_subscription.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/api.js":
/*!****************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/api.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anyApi: () => (/* binding */ anyApi),\n/* harmony export */   filterApi: () => (/* binding */ filterApi),\n/* harmony export */   getFunctionName: () => (/* binding */ getFunctionName),\n/* harmony export */   justActions: () => (/* binding */ justActions),\n/* harmony export */   justInternal: () => (/* binding */ justInternal),\n/* harmony export */   justMutations: () => (/* binding */ justMutations),\n/* harmony export */   justPaginatedQueries: () => (/* binding */ justPaginatedQueries),\n/* harmony export */   justPublic: () => (/* binding */ justPublic),\n/* harmony export */   justQueries: () => (/* binding */ justQueries),\n/* harmony export */   justSchedulable: () => (/* binding */ justSchedulable),\n/* harmony export */   makeFunctionReference: () => (/* binding */ makeFunctionReference)\n/* harmony export */ });\n/* harmony import */ var _functionName_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./functionName.js */ \"(ssr)/./node_modules/convex/dist/esm/server/functionName.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\nfunction getFunctionName(functionReference) {\n    const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_1__.getFunctionAddress)(functionReference);\n    if (address.name === void 0) {\n        if (address.functionHandle !== void 0) {\n            throw new Error(`Expected function reference like \"api.file.func\" or \"internal.file.func\", but received function handle ${address.functionHandle}`);\n        } else if (address.reference !== void 0) {\n            throw new Error(`Expected function reference in the current component like \"api.file.func\" or \"internal.file.func\", but received reference ${address.reference}`);\n        }\n        throw new Error(`Expected function reference like \"api.file.func\" or \"internal.file.func\", but received ${JSON.stringify(address)}`);\n    }\n    if (typeof functionReference === \"string\") return functionReference;\n    const name = functionReference[_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName];\n    if (!name) {\n        throw new Error(`${functionReference} is not a functionReference`);\n    }\n    return name;\n}\nfunction makeFunctionReference(name) {\n    return {\n        [_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName]: name\n    };\n}\nfunction createApi(pathParts = []) {\n    const handler = {\n        get (_, prop) {\n            if (typeof prop === \"string\") {\n                const newParts = [\n                    ...pathParts,\n                    prop\n                ];\n                return createApi(newParts);\n            } else if (prop === _functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName) {\n                if (pathParts.length < 2) {\n                    const found = [\n                        \"api\",\n                        ...pathParts\n                    ].join(\".\");\n                    throw new Error(`API path is expected to be of the form \\`api.moduleName.functionName\\`. Found: \\`${found}\\``);\n                }\n                const path = pathParts.slice(0, -1).join(\"/\");\n                const exportName = pathParts[pathParts.length - 1];\n                if (exportName === \"default\") {\n                    return path;\n                } else {\n                    return path + \":\" + exportName;\n                }\n            } else if (prop === Symbol.toStringTag) {\n                return \"FunctionReference\";\n            } else {\n                return void 0;\n            }\n        }\n    };\n    return new Proxy({}, handler);\n}\nfunction filterApi(api) {\n    return api;\n}\nfunction justInternal(api) {\n    return api;\n}\nfunction justPublic(api) {\n    return api;\n}\nfunction justQueries(api) {\n    return api;\n}\nfunction justMutations(api) {\n    return api;\n}\nfunction justActions(api) {\n    return api;\n}\nfunction justPaginatedQueries(api) {\n    return api;\n}\nfunction justSchedulable(api) {\n    return api;\n}\nconst anyApi = createApi(); //# sourceMappingURL=api.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9hcGkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFVNkI7QUFDTTtBQWtFNUIsU0FBUyxnQkFDZCxtQkFDUTtJQUNSLE1BQU0sVUFBVSx3RUFBa0IsQ0FBQyxpQkFBaUI7SUFFcEQsSUFBSSxRQUFRLFNBQVMsUUFBVztRQUM5QixJQUFJLFFBQVEsbUJBQW1CLFFBQVc7WUFDeEMsTUFBTSxJQUFJLE1BQ1IsMEdBQTBHLFFBQVEsY0FBYztRQUVwSSxXQUFXLFFBQVEsY0FBYyxRQUFXO1lBQzFDLE1BQU0sSUFBSSxNQUNSLDZIQUE2SCxRQUFRLFNBQVM7UUFFbEo7UUFDQSxNQUFNLElBQUksTUFDUiwwRkFBMEYsS0FBSyxVQUFVLE9BQU8sQ0FBQztJQUVySDtJQUdBLElBQUksT0FBTyxzQkFBc0IsU0FBVSxRQUFPO0lBS2xELE1BQU0sT0FBUSxrQkFBMEIsMERBQVk7SUFDcEQsSUFBSSxDQUFDLE1BQU07UUFDVCxNQUFNLElBQUksTUFBTSxHQUFHLGlCQUF3Qiw2QkFBNkI7SUFDMUU7SUFDQSxPQUFPO0FBQ1Q7QUFhTyxTQUFTLHNCQUlkLE1BQTREO0lBQzVELE9BQU87UUFBRSxDQUFDLDBEQUFZLEdBQUc7SUFBSztBQU1oQztBQVlBLFNBQVMsVUFBVSxZQUFzQixDQUFDLEdBQVc7SUFDbkQsTUFBTSxVQUFnQztRQUNwQyxLQUFJLEdBQUcsTUFBdUI7WUFDNUIsSUFBSSxPQUFPLFNBQVMsVUFBVTtnQkFDNUIsTUFBTSxXQUFXLENBQUM7dUJBQUc7b0JBQVcsSUFBSTtpQkFBQTtnQkFDcEMsT0FBTyxVQUFVLFFBQVE7WUFDM0IsV0FBVyxTQUFTLDBEQUFZLEVBQUU7Z0JBQ2hDLElBQUksVUFBVSxTQUFTLEdBQUc7b0JBQ3hCLE1BQU0sUUFBUTt3QkFBQzsyQkFBVSxTQUFTO3FCQUFBLENBQUUsS0FBSyxHQUFHO29CQUM1QyxNQUFNLElBQUksTUFDUixvRkFBb0YsS0FBSztnQkFFN0Y7Z0JBQ0EsTUFBTSxPQUFPLFVBQVUsTUFBTSxHQUFHLEVBQUUsRUFBRSxLQUFLLEdBQUc7Z0JBQzVDLE1BQU0sYUFBYSxVQUFVLFVBQVUsU0FBUyxDQUFDO2dCQUNqRCxJQUFJLGVBQWUsV0FBVztvQkFDNUIsT0FBTztnQkFDVCxPQUFPO29CQUNMLE9BQU8sT0FBTyxNQUFNO2dCQUN0QjtZQUNGLFdBQVcsU0FBUyxPQUFPLGFBQWE7Z0JBQ3RDLE9BQU87WUFDVCxPQUFPO2dCQUNMLE9BQU87WUFDVDtRQUNGO0lBQ0Y7SUFFQSxPQUFPLElBQUksTUFBTSxDQUFDLEdBQUcsT0FBTztBQUM5QjtBQStITyxTQUFTLFVBQTBCLEtBQXFDO0lBQzdFLE9BQU87QUFDVDtBQUlPLFNBQVMsYUFDZCxLQUM4RDtJQUM5RCxPQUFPO0FBQ1Q7QUFHTyxTQUFTLFdBQ2QsS0FDNEQ7SUFDNUQsT0FBTztBQUNUO0FBR08sU0FBUyxZQUNkLEtBQzJEO0lBQzNELE9BQU87QUFDVDtBQUdPLFNBQVMsY0FDZCxLQUM4RDtJQUM5RCxPQUFPO0FBQ1Q7QUFHTyxTQUFTLFlBQ2QsS0FDNEQ7SUFDNUQsT0FBTztBQUNUO0FBR08sU0FBUyxxQkFDZCxLQVNBO0lBQ0EsT0FBTztBQUNUO0FBR08sU0FBUyxnQkFDZCxLQUN5RTtJQUN6RSxPQUFPO0FBQ1Q7QUFrRU8sTUFBTSxTQUFpQixVQUFVIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NlcnZlci9hcGkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW1wdHlPYmplY3QsXG4gIERlZmF1bHRGdW5jdGlvbkFyZ3MsXG4gIEZ1bmN0aW9uVmlzaWJpbGl0eSxcbiAgUmVnaXN0ZXJlZEFjdGlvbixcbiAgUmVnaXN0ZXJlZE11dGF0aW9uLFxuICBSZWdpc3RlcmVkUXVlcnksXG59IGZyb20gXCIuL3JlZ2lzdHJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgRXhwYW5kLCBVbmlvblRvSW50ZXJzZWN0aW9uIH0gZnJvbSBcIi4uL3R5cGVfdXRpbHMuanNcIjtcbmltcG9ydCB7IFBhZ2luYXRpb25PcHRpb25zLCBQYWdpbmF0aW9uUmVzdWx0IH0gZnJvbSBcIi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgZnVuY3Rpb25OYW1lIH0gZnJvbSBcIi4vZnVuY3Rpb25OYW1lLmpzXCI7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbkFkZHJlc3MgfSBmcm9tIFwiLi9jb21wb25lbnRzL3BhdGhzLmpzXCI7XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgYSBDb252ZXggZnVuY3Rpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBGdW5jdGlvblR5cGUgPSBcInF1ZXJ5XCIgfCBcIm11dGF0aW9uXCIgfCBcImFjdGlvblwiO1xuXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgcmVnaXN0ZXJlZCBDb252ZXggZnVuY3Rpb24uXG4gKlxuICogWW91IGNhbiBjcmVhdGUgYSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IHVzaW5nIHRoZSBnZW5lcmF0ZWQgYGFwaWAgdXRpbGl0eTpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi4vY29udmV4L19nZW5lcmF0ZWQvYXBpXCI7XG4gKlxuICogY29uc3QgcmVmZXJlbmNlID0gYXBpLm15TW9kdWxlLm15RnVuY3Rpb247XG4gKiBgYGBcbiAqXG4gKiBJZiB5b3UgYXJlbid0IHVzaW5nIGNvZGUgZ2VuZXJhdGlvbiwgeW91IGNhbiBjcmVhdGUgcmVmZXJlbmNlcyB1c2luZ1xuICoge0BsaW5rIGFueUFwaX06XG4gKiBgYGBqc1xuICogaW1wb3J0IHsgYW55QXBpIH0gZnJvbSBcImNvbnZleC9zZXJ2ZXJcIjtcbiAqXG4gKiBjb25zdCByZWZlcmVuY2UgPSBhbnlBcGkubXlNb2R1bGUubXlGdW5jdGlvbjtcbiAqIGBgYFxuICpcbiAqIEZ1bmN0aW9uIHJlZmVyZW5jZXMgY2FuIGJlIHVzZWQgdG8gaW52b2tlIGZ1bmN0aW9ucyBmcm9tIHRoZSBjbGllbnQuIEZvclxuICogZXhhbXBsZSwgaW4gUmVhY3QgeW91IGNhbiBwYXNzIHJlZmVyZW5jZXMgdG8gdGhlIHtAbGluayByZWFjdC51c2VRdWVyeX0gaG9vazpcbiAqIGBgYGpzXG4gKiBjb25zdCByZXN1bHQgPSB1c2VRdWVyeShhcGkubXlNb2R1bGUubXlGdW5jdGlvbik7XG4gKiBgYGBcbiAqXG4gKiBAdHlwZVBhcmFtIFR5cGUgLSBUaGUgdHlwZSBvZiB0aGUgZnVuY3Rpb24gKFwicXVlcnlcIiwgXCJtdXRhdGlvblwiLCBvciBcImFjdGlvblwiKS5cbiAqIEB0eXBlUGFyYW0gVmlzaWJpbGl0eSAtIFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBmdW5jdGlvbiAoXCJwdWJsaWNcIiBvciBcImludGVybmFsXCIpLlxuICogQHR5cGVQYXJhbSBBcmdzIC0gVGhlIGFyZ3VtZW50cyB0byB0aGlzIGZ1bmN0aW9uLiBUaGlzIGlzIGFuIG9iamVjdCBtYXBwaW5nXG4gKiBhcmd1bWVudCBuYW1lcyB0byB0aGVpciB0eXBlcy5cbiAqIEB0eXBlUGFyYW0gUmV0dXJuVHlwZSAtIFRoZSByZXR1cm4gdHlwZSBvZiB0aGlzIGZ1bmN0aW9uLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBGdW5jdGlvblJlZmVyZW5jZTxcbiAgVHlwZSBleHRlbmRzIEZ1bmN0aW9uVHlwZSxcbiAgVmlzaWJpbGl0eSBleHRlbmRzIEZ1bmN0aW9uVmlzaWJpbGl0eSA9IFwicHVibGljXCIsXG4gIEFyZ3MgZXh0ZW5kcyBEZWZhdWx0RnVuY3Rpb25BcmdzID0gYW55LFxuICBSZXR1cm5UeXBlID0gYW55LFxuICBDb21wb25lbnRQYXRoID0gc3RyaW5nIHwgdW5kZWZpbmVkLFxuPiA9IHtcbiAgX3R5cGU6IFR5cGU7XG4gIF92aXNpYmlsaXR5OiBWaXNpYmlsaXR5O1xuICBfYXJnczogQXJncztcbiAgX3JldHVyblR5cGU6IFJldHVyblR5cGU7XG4gIF9jb21wb25lbnRQYXRoOiBDb21wb25lbnRQYXRoO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIG5hbWUgb2YgYSBmdW5jdGlvbiBmcm9tIGEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfS5cbiAqXG4gKiBUaGUgbmFtZSBpcyBhIHN0cmluZyBsaWtlIFwibXlEaXIvbXlNb2R1bGU6bXlGdW5jdGlvblwiLiBJZiB0aGUgZXhwb3J0ZWQgbmFtZVxuICogb2YgdGhlIGZ1bmN0aW9uIGlzIGBcImRlZmF1bHRcImAsIHRoZSBmdW5jdGlvbiBuYW1lIGlzIG9taXR0ZWRcbiAqIChlLmcuIFwibXlEaXIvbXlNb2R1bGVcIikuXG4gKlxuICogQHBhcmFtIGZ1bmN0aW9uUmVmZXJlbmNlIC0gQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IHRvIGdldCB0aGUgbmFtZSBvZi5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIHRoZSBmdW5jdGlvbidzIG5hbWUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVuY3Rpb25OYW1lKFxuICBmdW5jdGlvblJlZmVyZW5jZTogQW55RnVuY3Rpb25SZWZlcmVuY2UsXG4pOiBzdHJpbmcge1xuICBjb25zdCBhZGRyZXNzID0gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlKTtcblxuICBpZiAoYWRkcmVzcy5uYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoYWRkcmVzcy5mdW5jdGlvbkhhbmRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBFeHBlY3RlZCBmdW5jdGlvbiByZWZlcmVuY2UgbGlrZSBcImFwaS5maWxlLmZ1bmNcIiBvciBcImludGVybmFsLmZpbGUuZnVuY1wiLCBidXQgcmVjZWl2ZWQgZnVuY3Rpb24gaGFuZGxlICR7YWRkcmVzcy5mdW5jdGlvbkhhbmRsZX1gLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGFkZHJlc3MucmVmZXJlbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEV4cGVjdGVkIGZ1bmN0aW9uIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBjb21wb25lbnQgbGlrZSBcImFwaS5maWxlLmZ1bmNcIiBvciBcImludGVybmFsLmZpbGUuZnVuY1wiLCBidXQgcmVjZWl2ZWQgcmVmZXJlbmNlICR7YWRkcmVzcy5yZWZlcmVuY2V9YCxcbiAgICAgICk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBFeHBlY3RlZCBmdW5jdGlvbiByZWZlcmVuY2UgbGlrZSBcImFwaS5maWxlLmZ1bmNcIiBvciBcImludGVybmFsLmZpbGUuZnVuY1wiLCBidXQgcmVjZWl2ZWQgJHtKU09OLnN0cmluZ2lmeShhZGRyZXNzKX1gLFxuICAgICk7XG4gIH1cbiAgLy8gQm90aCBhIGxlZ2FjeSB0aGluZyBhbmQgYWxzbyBhIGNvbnZlbmllbmNlIGZvciBpbnRlcmFjdGl2ZSB1c2U6XG4gIC8vIHRoZSB0eXBlcyB3b24ndCBjaGVjayBidXQgYSBzdHJpbmcgaXMgYWx3YXlzIGFsbG93ZWQgYXQgcnVudGltZS5cbiAgaWYgKHR5cGVvZiBmdW5jdGlvblJlZmVyZW5jZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGZ1bmN0aW9uUmVmZXJlbmNlO1xuXG4gIC8vIFR3byBkaWZmZXJlbnQgcnVudGltZSB2YWx1ZXMgZm9yIEZ1bmN0aW9uUmVmZXJlbmNlIGltcGxlbWVudCB0aGlzXG4gIC8vIGludGVyZmFjZTogYXBpIG9iamVjdHMgcmV0dXJuZWQgZnJvbSBgY3JlYXRlQXBpKClgIGFuZCBzdGFuZGFsb25lXG4gIC8vIGZ1bmN0aW9uIHJlZmVyZW5jZSBvYmplY3RzIHJldHVybmVkIGZyb20gbWFrZUZ1bmN0aW9uUmVmZXJlbmNlLlxuICBjb25zdCBuYW1lID0gKGZ1bmN0aW9uUmVmZXJlbmNlIGFzIGFueSlbZnVuY3Rpb25OYW1lXTtcbiAgaWYgKCFuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2Z1bmN0aW9uUmVmZXJlbmNlIGFzIGFueX0gaXMgbm90IGEgZnVuY3Rpb25SZWZlcmVuY2VgKTtcbiAgfVxuICByZXR1cm4gbmFtZTtcbn1cblxuLyoqXG4gKiBGdW5jdGlvblJlZmVyZW5jZXMgZ2VuZXJhbGx5IGNvbWUgZnJvbSBnZW5lcmF0ZWQgY29kZSwgYnV0IGluIGN1c3RvbSBjbGllbnRzXG4gKiBpdCBtYXkgYmUgdXNlZnVsIHRvIGJlIGFibGUgdG8gYnVpbGQgb25lIG1hbnVhbGx5LlxuICpcbiAqIFJlYWwgZnVuY3Rpb24gcmVmZXJlbmNlcyBhcmUgZW1wdHkgb2JqZWN0cyBhdCBydW50aW1lLCBidXQgdGhlIHNhbWUgaW50ZXJmYWNlXG4gKiBjYW4gYmUgaW1wbGVtZW50ZWQgd2l0aCBhbiBvYmplY3QgZm9yIHRlc3RzIGFuZCBjbGllbnRzIHdoaWNoIGRvbid0IHVzZVxuICogY29kZSBnZW5lcmF0aW9uLlxuICpcbiAqIEBwYXJhbSBuYW1lIC0gVGhlIGlkZW50aWZpZXIgb2YgdGhlIGZ1bmN0aW9uLiBFLmcuIGBwYXRoL3RvL2ZpbGU6ZnVuY3Rpb25OYW1lYFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUZ1bmN0aW9uUmVmZXJlbmNlPFxuICB0eXBlIGV4dGVuZHMgRnVuY3Rpb25UeXBlLFxuICBhcmdzIGV4dGVuZHMgRGVmYXVsdEZ1bmN0aW9uQXJncyA9IGFueSxcbiAgcmV0ID0gYW55LFxuPihuYW1lOiBzdHJpbmcpOiBGdW5jdGlvblJlZmVyZW5jZTx0eXBlLCBcInB1YmxpY1wiLCBhcmdzLCByZXQ+IHtcbiAgcmV0dXJuIHsgW2Z1bmN0aW9uTmFtZV06IG5hbWUgfSBhcyB1bmtub3duIGFzIEZ1bmN0aW9uUmVmZXJlbmNlPFxuICAgIHR5cGUsXG4gICAgXCJwdWJsaWNcIixcbiAgICBhcmdzLFxuICAgIHJldFxuICA+O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJ1bnRpbWUgQVBJIG9iamVjdCB0aGF0IGltcGxlbWVudHMge0BsaW5rIEFueUFwaX0uXG4gKlxuICogVGhpcyBhbGxvd3MgYWNjZXNzaW5nIGFueSBwYXRoIHJlZ2FyZGxlc3Mgb2Ygd2hhdCBkaXJlY3RvcmllcywgbW9kdWxlcyxcbiAqIG9yIGZ1bmN0aW9ucyBhcmUgZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0gcGF0aFBhcnRzIC0gVGhlIHBhdGggdG8gdGhlIGN1cnJlbnQgbm9kZSBpbiB0aGUgQVBJLlxuICogQHJldHVybnMgQW4ge0BsaW5rIEFueUFwaX1cbiAqIEBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQXBpKHBhdGhQYXJ0czogc3RyaW5nW10gPSBbXSk6IEFueUFwaSB7XG4gIGNvbnN0IGhhbmRsZXI6IFByb3h5SGFuZGxlcjxvYmplY3Q+ID0ge1xuICAgIGdldChfLCBwcm9wOiBzdHJpbmcgfCBzeW1ib2wpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IFsuLi5wYXRoUGFydHMsIHByb3BdO1xuICAgICAgICByZXR1cm4gY3JlYXRlQXBpKG5ld1BhcnRzKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gZnVuY3Rpb25OYW1lKSB7XG4gICAgICAgIGlmIChwYXRoUGFydHMubGVuZ3RoIDwgMikge1xuICAgICAgICAgIGNvbnN0IGZvdW5kID0gW1wiYXBpXCIsIC4uLnBhdGhQYXJ0c10uam9pbihcIi5cIik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEFQSSBwYXRoIGlzIGV4cGVjdGVkIHRvIGJlIG9mIHRoZSBmb3JtIFxcYGFwaS5tb2R1bGVOYW1lLmZ1bmN0aW9uTmFtZVxcYC4gRm91bmQ6IFxcYCR7Zm91bmR9XFxgYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoUGFydHMuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBjb25zdCBleHBvcnROYW1lID0gcGF0aFBhcnRzW3BhdGhQYXJ0cy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGV4cG9ydE5hbWUgPT09IFwiZGVmYXVsdFwiKSB7XG4gICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHBhdGggKyBcIjpcIiArIGV4cG9ydE5hbWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gICAgICAgIHJldHVybiBcIkZ1bmN0aW9uUmVmZXJlbmNlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIG5ldyBQcm94eSh7fSwgaGFuZGxlcik7XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gZXhwb3J0IGZyb20gYSBtb2R1bGUsIGNvbnZlcnQgaXQgdG8gYSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9XG4gKiBpZiBpdCBpcyBhIENvbnZleCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IHR5cGUgRnVuY3Rpb25SZWZlcmVuY2VGcm9tRXhwb3J0PEV4cG9ydD4gPVxuICBFeHBvcnQgZXh0ZW5kcyBSZWdpc3RlcmVkUXVlcnk8XG4gICAgaW5mZXIgVmlzaWJpbGl0eSxcbiAgICBpbmZlciBBcmdzLFxuICAgIGluZmVyIFJldHVyblZhbHVlXG4gID5cbiAgICA/IEZ1bmN0aW9uUmVmZXJlbmNlPFxuICAgICAgICBcInF1ZXJ5XCIsXG4gICAgICAgIFZpc2liaWxpdHksXG4gICAgICAgIEFyZ3MsXG4gICAgICAgIENvbnZlcnRSZXR1cm5UeXBlPFJldHVyblZhbHVlPlxuICAgICAgPlxuICAgIDogRXhwb3J0IGV4dGVuZHMgUmVnaXN0ZXJlZE11dGF0aW9uPFxuICAgICAgICAgIGluZmVyIFZpc2liaWxpdHksXG4gICAgICAgICAgaW5mZXIgQXJncyxcbiAgICAgICAgICBpbmZlciBSZXR1cm5WYWx1ZVxuICAgICAgICA+XG4gICAgICA/IEZ1bmN0aW9uUmVmZXJlbmNlPFxuICAgICAgICAgIFwibXV0YXRpb25cIixcbiAgICAgICAgICBWaXNpYmlsaXR5LFxuICAgICAgICAgIEFyZ3MsXG4gICAgICAgICAgQ29udmVydFJldHVyblR5cGU8UmV0dXJuVmFsdWU+XG4gICAgICAgID5cbiAgICAgIDogRXhwb3J0IGV4dGVuZHMgUmVnaXN0ZXJlZEFjdGlvbjxcbiAgICAgICAgICAgIGluZmVyIFZpc2liaWxpdHksXG4gICAgICAgICAgICBpbmZlciBBcmdzLFxuICAgICAgICAgICAgaW5mZXIgUmV0dXJuVmFsdWVcbiAgICAgICAgICA+XG4gICAgICAgID8gRnVuY3Rpb25SZWZlcmVuY2U8XG4gICAgICAgICAgICBcImFjdGlvblwiLFxuICAgICAgICAgICAgVmlzaWJpbGl0eSxcbiAgICAgICAgICAgIEFyZ3MsXG4gICAgICAgICAgICBDb252ZXJ0UmV0dXJuVHlwZTxSZXR1cm5WYWx1ZT5cbiAgICAgICAgICA+XG4gICAgICAgIDogbmV2ZXI7XG5cbi8qKlxuICogR2l2ZW4gYSBtb2R1bGUsIGNvbnZlcnQgYWxsIHRoZSBDb252ZXggZnVuY3Rpb25zIGludG9cbiAqIHtAbGluayBGdW5jdGlvblJlZmVyZW5jZX1zIGFuZCByZW1vdmUgdGhlIG90aGVyIGV4cG9ydHMuXG4gKlxuICogQkUgQ0FSRUZVTCBXSEVOIEVESVRJTkcgVEhJUyFcbiAqXG4gKiBUaGlzIGlzIHdyaXR0ZW4gY2FyZWZ1bGx5IHRvIHByZXNlcnZlIGp1bXBpbmcgdG8gZnVuY3Rpb24gZGVmaW5pdGlvbnMgdXNpbmdcbiAqIGNtZCtjbGljay4gSWYgeW91IGVkaXQgaXQsIHBsZWFzZSB0ZXN0IHRoYXQgY21kK2NsaWNrIHN0aWxsIHdvcmtzLlxuICovXG50eXBlIEZ1bmN0aW9uUmVmZXJlbmNlc0luTW9kdWxlPE1vZHVsZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4+ID0ge1xuICAtcmVhZG9ubHkgW0V4cG9ydE5hbWUgaW4ga2V5b2YgTW9kdWxlIGFzIE1vZHVsZVtFeHBvcnROYW1lXVtcImlzQ29udmV4RnVuY3Rpb25cIl0gZXh0ZW5kcyB0cnVlXG4gICAgPyBFeHBvcnROYW1lXG4gICAgOiBuZXZlcl06IEZ1bmN0aW9uUmVmZXJlbmNlRnJvbUV4cG9ydDxNb2R1bGVbRXhwb3J0TmFtZV0+O1xufTtcblxuLyoqXG4gKiBHaXZlbiBhIHBhdGggdG8gYSBtb2R1bGUgYW5kIGl0J3MgdHlwZSwgZ2VuZXJhdGUgYW4gQVBJIHR5cGUgZm9yIHRoaXMgbW9kdWxlLlxuICpcbiAqIFRoaXMgaXMgYSBuZXN0ZWQgb2JqZWN0IGFjY29yZGluZyB0byB0aGUgbW9kdWxlJ3MgcGF0aC5cbiAqL1xudHlwZSBBcGlGb3JNb2R1bGU8XG4gIE1vZHVsZVBhdGggZXh0ZW5kcyBzdHJpbmcsXG4gIE1vZHVsZSBleHRlbmRzIG9iamVjdCxcbj4gPSBNb2R1bGVQYXRoIGV4dGVuZHMgYCR7aW5mZXIgRmlyc3R9LyR7aW5mZXIgU2Vjb25kfWBcbiAgPyB7XG4gICAgICBbXyBpbiBGaXJzdF06IEFwaUZvck1vZHVsZTxTZWNvbmQsIE1vZHVsZT47XG4gICAgfVxuICA6IHsgW18gaW4gTW9kdWxlUGF0aF06IEZ1bmN0aW9uUmVmZXJlbmNlc0luTW9kdWxlPE1vZHVsZT4gfTtcblxuLyoqXG4gKiBHaXZlbiB0aGUgdHlwZXMgb2YgYWxsIG1vZHVsZXMgaW4gdGhlIGBjb252ZXgvYCBkaXJlY3RvcnksIGNvbnN0cnVjdCB0aGUgdHlwZVxuICogb2YgYGFwaWAuXG4gKlxuICogYGFwaWAgaXMgYSB1dGlsaXR5IGZvciBjb25zdHJ1Y3Rpbmcge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfXMuXG4gKlxuICogQHR5cGVQYXJhbSBBbGxNb2R1bGVzIC0gQSB0eXBlIG1hcHBpbmcgbW9kdWxlIHBhdGhzIChsaWtlIGBcImRpci9teU1vZHVsZVwiYCkgdG9cbiAqIHRoZSB0eXBlcyBvZiB0aGUgbW9kdWxlcy5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgQXBpRnJvbU1vZHVsZXM8QWxsTW9kdWxlcyBleHRlbmRzIFJlY29yZDxzdHJpbmcsIG9iamVjdD4+ID1cbiAgRmlsdGVyQXBpPFxuICAgIEFwaUZyb21Nb2R1bGVzQWxsb3dFbXB0eU5vZGVzPEFsbE1vZHVsZXM+LFxuICAgIEZ1bmN0aW9uUmVmZXJlbmNlPGFueSwgYW55LCBhbnksIGFueT5cbiAgPjtcblxudHlwZSBBcGlGcm9tTW9kdWxlc0FsbG93RW1wdHlOb2RlczxBbGxNb2R1bGVzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgb2JqZWN0Pj4gPVxuICBFeHBhbmRNb2R1bGVzQW5kRGlyczxcbiAgICBVbmlvblRvSW50ZXJzZWN0aW9uPFxuICAgICAge1xuICAgICAgICBbTW9kdWxlUGF0aCBpbiBrZXlvZiBBbGxNb2R1bGVzXTogQXBpRm9yTW9kdWxlPFxuICAgICAgICAgIE1vZHVsZVBhdGggJiBzdHJpbmcsXG4gICAgICAgICAgQWxsTW9kdWxlc1tNb2R1bGVQYXRoXVxuICAgICAgICA+O1xuICAgICAgfVtrZXlvZiBBbGxNb2R1bGVzXVxuICAgID5cbiAgPjtcblxuLyoqXG4gKiBAcHVibGljXG4gKlxuICogRmlsdGVyIGEgQ29udmV4IGRlcGxveW1lbnQgYXBpIG9iamVjdCBmb3IgZnVuY3Rpb25zIHdoaWNoIG1lZXQgY3JpdGVyaWEsXG4gKiBmb3IgZXhhbXBsZSBhbGwgcHVibGljIHF1ZXJpZXMuXG4gKi9cbmV4cG9ydCB0eXBlIEZpbHRlckFwaTxBUEksIFByZWRpY2F0ZT4gPSBFeHBhbmQ8e1xuICBbbW9kIGluIGtleW9mIEFQSSBhcyBBUElbbW9kXSBleHRlbmRzIFByZWRpY2F0ZVxuICAgID8gbW9kXG4gICAgOiBBUElbbW9kXSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPGFueSwgYW55LCBhbnksIGFueT5cbiAgICAgID8gbmV2ZXJcbiAgICAgIDogRmlsdGVyQXBpPEFQSVttb2RdLCBQcmVkaWNhdGU+IGV4dGVuZHMgUmVjb3JkPHN0cmluZywgbmV2ZXI+XG4gICAgICAgID8gbmV2ZXJcbiAgICAgICAgOiBtb2RdOiBBUElbbW9kXSBleHRlbmRzIFByZWRpY2F0ZVxuICAgID8gQVBJW21vZF1cbiAgICA6IEZpbHRlckFwaTxBUElbbW9kXSwgUHJlZGljYXRlPjtcbn0+O1xuXG4vKipcbiAqIEdpdmVuIGFuIGFwaSBvZiB0eXBlIEFQSSBhbmQgYSBGdW5jdGlvblJlZmVyZW5jZSBzdWJ0eXBlLCByZXR1cm4gYW4gYXBpIG9iamVjdFxuICogY29udGFpbmluZyBvbmx5IHRoZSBmdW5jdGlvbiByZWZlcmVuY2VzIHRoYXQgbWF0Y2guXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHEgPSBmaWx0ZXJBcGk8dHlwZW9mIGFwaSwgRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiPj4oYXBpKVxuICogYGBgXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyQXBpPEFQSSwgUHJlZGljYXRlPihhcGk6IEFQSSk6IEZpbHRlckFwaTxBUEksIFByZWRpY2F0ZT4ge1xuICByZXR1cm4gYXBpIGFzIGFueTtcbn1cblxuLy8gVGhlc2UganVzdCogQVBJIGZpbHRlciBoZWxwZXJzIHJlcXVpcmUgbm8gdHlwZSBwYXJhbWV0ZXJzIHNvIGFyZSB1c2VhYmxlIGZyb20gSmF2YVNjcmlwdC5cbi8qKiBAcHVibGljICovXG5leHBvcnQgZnVuY3Rpb24ganVzdEludGVybmFsPEFQST4oXG4gIGFwaTogQVBJLFxuKTogRmlsdGVyQXBpPEFQSSwgRnVuY3Rpb25SZWZlcmVuY2U8YW55LCBcImludGVybmFsXCIsIGFueSwgYW55Pj4ge1xuICByZXR1cm4gYXBpIGFzIGFueTtcbn1cblxuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCBmdW5jdGlvbiBqdXN0UHVibGljPEFQST4oXG4gIGFwaTogQVBJLFxuKTogRmlsdGVyQXBpPEFQSSwgRnVuY3Rpb25SZWZlcmVuY2U8YW55LCBcInB1YmxpY1wiLCBhbnksIGFueT4+IHtcbiAgcmV0dXJuIGFwaSBhcyBhbnk7XG59XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgZnVuY3Rpb24ganVzdFF1ZXJpZXM8QVBJPihcbiAgYXBpOiBBUEksXG4pOiBGaWx0ZXJBcGk8QVBJLCBGdW5jdGlvblJlZmVyZW5jZTxcInF1ZXJ5XCIsIGFueSwgYW55LCBhbnk+PiB7XG4gIHJldHVybiBhcGkgYXMgYW55O1xufVxuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGp1c3RNdXRhdGlvbnM8QVBJPihcbiAgYXBpOiBBUEksXG4pOiBGaWx0ZXJBcGk8QVBJLCBGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCIsIGFueSwgYW55LCBhbnk+PiB7XG4gIHJldHVybiBhcGkgYXMgYW55O1xufVxuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGp1c3RBY3Rpb25zPEFQST4oXG4gIGFwaTogQVBJLFxuKTogRmlsdGVyQXBpPEFQSSwgRnVuY3Rpb25SZWZlcmVuY2U8XCJhY3Rpb25cIiwgYW55LCBhbnksIGFueT4+IHtcbiAgcmV0dXJuIGFwaSBhcyBhbnk7XG59XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgZnVuY3Rpb24ganVzdFBhZ2luYXRlZFF1ZXJpZXM8QVBJPihcbiAgYXBpOiBBUEksXG4pOiBGaWx0ZXJBcGk8XG4gIEFQSSxcbiAgRnVuY3Rpb25SZWZlcmVuY2U8XG4gICAgXCJxdWVyeVwiLFxuICAgIGFueSxcbiAgICB7IHBhZ2luYXRpb25PcHRzOiBQYWdpbmF0aW9uT3B0aW9ucyB9LFxuICAgIFBhZ2luYXRpb25SZXN1bHQ8YW55PlxuICA+XG4+IHtcbiAgcmV0dXJuIGFwaSBhcyBhbnk7XG59XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgZnVuY3Rpb24ganVzdFNjaGVkdWxhYmxlPEFQST4oXG4gIGFwaTogQVBJLFxuKTogRmlsdGVyQXBpPEFQSSwgRnVuY3Rpb25SZWZlcmVuY2U8XCJtdXRhdGlvblwiIHwgXCJhY3Rpb25cIiwgYW55LCBhbnksIGFueT4+IHtcbiAgcmV0dXJuIGFwaSBhcyBhbnk7XG59XG5cbi8qKlxuICogTGlrZSB7QGxpbmsgRXhwYW5kfSwgdGhpcyBzaW1wbGlmaWVzIGhvdyBUeXBlU2NyaXB0IGRpc3BsYXlzIG9iamVjdCB0eXBlcy5cbiAqIFRoZSBkaWZmZXJlbmNlcyBhcmU6XG4gKiAxLiBUaGlzIHZlcnNpb24gaXMgcmVjdXJzaXZlLlxuICogMi4gVGhpcyBzdG9wcyByZWN1cnNpbmcgd2hlbiBpdCBoaXRzIGEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfS5cbiAqL1xudHlwZSBFeHBhbmRNb2R1bGVzQW5kRGlyczxPYmplY3RUeXBlPiA9IE9iamVjdFR5cGUgZXh0ZW5kcyBBbnlGdW5jdGlvblJlZmVyZW5jZVxuICA/IE9iamVjdFR5cGVcbiAgOiB7XG4gICAgICBbS2V5IGluIGtleW9mIE9iamVjdFR5cGVdOiBFeHBhbmRNb2R1bGVzQW5kRGlyczxPYmplY3RUeXBlW0tleV0+O1xuICAgIH07XG5cbi8qKlxuICogQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IG9mIGFueSB0eXBlIGFuZCBhbnkgdmlzaWJpbGl0eSB3aXRoIGFueVxuICogYXJndW1lbnRzIGFuZCBhbnkgcmV0dXJuIHR5cGUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBBbnlGdW5jdGlvblJlZmVyZW5jZSA9IEZ1bmN0aW9uUmVmZXJlbmNlPGFueSwgYW55PjtcblxudHlwZSBBbnlNb2R1bGVEaXJPckZ1bmMgPSB7XG4gIFtrZXk6IHN0cmluZ106IEFueU1vZHVsZURpck9yRnVuYztcbn0gJiBBbnlGdW5jdGlvblJlZmVyZW5jZTtcblxuLyoqXG4gKiBUaGUgdHlwZSB0aGF0IENvbnZleCBhcGkgb2JqZWN0cyBleHRlbmQuIElmIHlvdSB3ZXJlIHdyaXRpbmcgYW4gYXBpIGZyb21cbiAqIHNjcmF0Y2ggaXQgc2hvdWxkIGV4dGVuZCB0aGlzIHR5cGUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBBbnlBcGkgPSBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBBbnlNb2R1bGVEaXJPckZ1bmM+PjtcblxuLyoqXG4gKiBSZWN1cnNpdmUgcGFydGlhbCBBUEksIHVzZWZ1bCBmb3IgZGVmaW5pbmcgYSBzdWJzZXQgb2YgYW4gQVBJIHdoZW4gbW9ja2luZ1xuICogb3IgYnVpbGRpbmcgY3VzdG9tIGFwaSBvYmplY3RzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgUGFydGlhbEFwaTxBUEk+ID0ge1xuICBbbW9kIGluIGtleW9mIEFQSV0/OiBBUElbbW9kXSBleHRlbmRzIEZ1bmN0aW9uUmVmZXJlbmNlPGFueSwgYW55LCBhbnksIGFueT5cbiAgICA/IEFQSVttb2RdXG4gICAgOiBQYXJ0aWFsQXBpPEFQSVttb2RdPjtcbn07XG5cbi8qKlxuICogQSB1dGlsaXR5IGZvciBjb25zdHJ1Y3Rpbmcge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfXMgaW4gcHJvamVjdHMgdGhhdFxuICogYXJlIG5vdCB1c2luZyBjb2RlIGdlbmVyYXRpb24uXG4gKlxuICogWW91IGNhbiBjcmVhdGUgYSByZWZlcmVuY2UgdG8gYSBmdW5jdGlvbiBsaWtlOlxuICogYGBganNcbiAqIGNvbnN0IHJlZmVyZW5jZSA9IGFueUFwaS5teU1vZHVsZS5teUZ1bmN0aW9uO1xuICogYGBgXG4gKlxuICogVGhpcyBzdXBwb3J0cyBhY2Nlc3NpbmcgYW55IHBhdGggcmVnYXJkbGVzcyBvZiB3aGF0IGRpcmVjdG9yaWVzIGFuZCBtb2R1bGVzXG4gKiBhcmUgaW4geW91ciBwcm9qZWN0LiBBbGwgZnVuY3Rpb24gcmVmZXJlbmNlcyBhcmUgdHlwZWQgYXNcbiAqIHtAbGluayBBbnlGdW5jdGlvblJlZmVyZW5jZX0uXG4gKlxuICpcbiAqIElmIHlvdSdyZSB1c2luZyBjb2RlIGdlbmVyYXRpb24sIHVzZSBgYXBpYCBmcm9tIGBjb252ZXgvX2dlbmVyYXRlZC9hcGlgXG4gKiBpbnN0ZWFkLiBJdCB3aWxsIGJlIG1vcmUgdHlwZS1zYWZlIGFuZCBwcm9kdWNlIGJldHRlciBhdXRvLWNvbXBsZXRlXG4gKiBpbiB5b3VyIGVkaXRvci5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBhbnlBcGk6IEFueUFwaSA9IGNyZWF0ZUFwaSgpIGFzIGFueTtcblxuLyoqXG4gKiBHaXZlbiBhIHtAbGluayBGdW5jdGlvblJlZmVyZW5jZX0sIGdldCB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIFRoaXMgaXMgcmVwcmVzZW50ZWQgYXMgYW4gb2JqZWN0IG1hcHBpbmcgYXJndW1lbnQgbmFtZXMgdG8gdmFsdWVzLlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBGdW5jdGlvbkFyZ3M8RnVuY1JlZiBleHRlbmRzIEFueUZ1bmN0aW9uUmVmZXJlbmNlPiA9XG4gIEZ1bmNSZWZbXCJfYXJnc1wiXTtcblxuLyoqXG4gKiBBIHR1cGxlIHR5cGUgb2YgdGhlIChtYXliZSBvcHRpb25hbCkgYXJndW1lbnRzIHRvIGBGdW5jUmVmYC5cbiAqXG4gKiBUaGlzIHR5cGUgaXMgdXNlZCB0byBtYWtlIG1ldGhvZHMgaW52b2x2aW5nIGFyZ3VtZW50cyB0eXBlIHNhZmUgd2hpbGUgYWxsb3dpbmdcbiAqIHNraXBwaW5nIHRoZSBhcmd1bWVudHMgZm9yIGZ1bmN0aW9ucyB0aGF0IGRvbid0IHJlcXVpcmUgYXJndW1lbnRzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgT3B0aW9uYWxSZXN0QXJnczxGdW5jUmVmIGV4dGVuZHMgQW55RnVuY3Rpb25SZWZlcmVuY2U+ID1cbiAgRnVuY1JlZltcIl9hcmdzXCJdIGV4dGVuZHMgRW1wdHlPYmplY3RcbiAgICA/IFthcmdzPzogRW1wdHlPYmplY3RdXG4gICAgOiBbYXJnczogRnVuY1JlZltcIl9hcmdzXCJdXTtcblxuLyoqXG4gKiBBIHR1cGxlIHR5cGUgb2YgdGhlIChtYXliZSBvcHRpb25hbCkgYXJndW1lbnRzIHRvIGBGdW5jUmVmYCwgZm9sbG93ZWQgYnkgYW4gb3B0aW9uc1xuICogb2JqZWN0IG9mIHR5cGUgYE9wdGlvbnNgLlxuICpcbiAqIFRoaXMgdHlwZSBpcyB1c2VkIHRvIG1ha2UgbWV0aG9kcyBsaWtlIGB1c2VRdWVyeWAgdHlwZS1zYWZlIHdoaWxlIGFsbG93aW5nXG4gKiAxLiBTa2lwcGluZyBhcmd1bWVudHMgZm9yIGZ1bmN0aW9ucyB0aGF0IGRvbid0IHJlcXVpcmUgYXJndW1lbnRzLlxuICogMi4gU2tpcHBpbmcgdGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBBcmdzQW5kT3B0aW9uczxcbiAgRnVuY1JlZiBleHRlbmRzIEFueUZ1bmN0aW9uUmVmZXJlbmNlLFxuICBPcHRpb25zLFxuPiA9IEZ1bmNSZWZbXCJfYXJnc1wiXSBleHRlbmRzIEVtcHR5T2JqZWN0XG4gID8gW2FyZ3M/OiBFbXB0eU9iamVjdCwgb3B0aW9ucz86IE9wdGlvbnNdXG4gIDogW2FyZ3M6IEZ1bmNSZWZbXCJfYXJnc1wiXSwgb3B0aW9ucz86IE9wdGlvbnNdO1xuXG4vKipcbiAqIEdpdmVuIGEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfSwgZ2V0IHRoZSByZXR1cm4gdHlwZSBvZiB0aGUgZnVuY3Rpb24uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBGdW5jdGlvblJldHVyblR5cGU8RnVuY1JlZiBleHRlbmRzIEFueUZ1bmN0aW9uUmVmZXJlbmNlPiA9XG4gIEZ1bmNSZWZbXCJfcmV0dXJuVHlwZVwiXTtcblxudHlwZSBVbmRlZmluZWRUb051bGw8VD4gPSBUIGV4dGVuZHMgdm9pZCA/IG51bGwgOiBUO1xuXG50eXBlIE51bGxUb1VuZGVmaW5lZE9yTnVsbDxUPiA9IFQgZXh0ZW5kcyBudWxsID8gVCB8IHVuZGVmaW5lZCB8IHZvaWQgOiBUO1xuXG4vKipcbiAqIENvbnZlcnQgdGhlIHJldHVybiB0eXBlIG9mIGEgZnVuY3Rpb24gdG8gaXQncyBjbGllbnQtZmFjaW5nIGZvcm1hdC5cbiAqXG4gKiBUaGlzIG1lYW5zOlxuICogLSBDb252ZXJ0aW5nIGB1bmRlZmluZWRgIGFuZCBgdm9pZGAgdG8gYG51bGxgXG4gKiAtIFJlbW92aW5nIGFsbCBgUHJvbWlzZWAgd3JhcHBlcnNcbiAqL1xuZXhwb3J0IHR5cGUgQ29udmVydFJldHVyblR5cGU8VD4gPSBVbmRlZmluZWRUb051bGw8QXdhaXRlZDxUPj47XG5cbmV4cG9ydCB0eXBlIFZhbGlkYXRvclR5cGVUb1JldHVyblR5cGU8VD4gPVxuICB8IFByb21pc2U8TnVsbFRvVW5kZWZpbmVkT3JOdWxsPFQ+PlxuICB8IE51bGxUb1VuZGVmaW5lZE9yTnVsbDxUPjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/api.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/components/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/components/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   componentsGeneric: () => (/* binding */ componentsGeneric),\n/* harmony export */   createFunctionHandle: () => (/* binding */ createFunctionHandle),\n/* harmony export */   currentSystemUdfInComponent: () => (/* binding */ currentSystemUdfInComponent),\n/* harmony export */   defineApp: () => (/* binding */ defineApp),\n/* harmony export */   defineComponent: () => (/* binding */ defineComponent),\n/* harmony export */   getFunctionAddress: () => (/* reexport safe */ _paths_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionAddress)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _impl_syscall_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../impl/syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _paths_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nasync function createFunctionHandle(functionReference) {\n    const address = (0,_paths_js__WEBPACK_IMPORTED_MODULE_3__.getFunctionAddress)(functionReference);\n    return await (0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/createFunctionHandle\", {\n        ...address,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version\n    });\n}\nclass InstalledComponent {\n    constructor(definition, name){\n        /**\n     * @internal\n     */ __publicField(this, \"_definition\");\n        /**\n     * @internal\n     */ __publicField(this, \"_name\");\n        this._definition = definition;\n        this._name = name;\n        (0,_paths_js__WEBPACK_IMPORTED_MODULE_3__.setReferencePath)(this, `_reference/childComponent/${name}`);\n    }\n    get exports() {\n        return createExports(this._name, []);\n    }\n}\nfunction createExports(name, pathParts) {\n    const handler = {\n        get (_, prop) {\n            if (typeof prop === \"string\") {\n                const newParts = [\n                    ...pathParts,\n                    prop\n                ];\n                return createExports(name, newParts);\n            } else if (prop === _paths_js__WEBPACK_IMPORTED_MODULE_3__.toReferencePath) {\n                let reference = `_reference/childComponent/${name}`;\n                for (const part of pathParts){\n                    reference += `/${part}`;\n                }\n                return reference;\n            } else {\n                return void 0;\n            }\n        }\n    };\n    return new Proxy({}, handler);\n}\nfunction use(definition, options) {\n    const importedComponentDefinition = definition;\n    if (typeof importedComponentDefinition.componentDefinitionPath !== \"string\") {\n        throw new Error(\"Component definition does not have the required componentDefinitionPath property. This code only works in Convex runtime.\");\n    }\n    const name = options?.name || // added recently\n    importedComponentDefinition.defaultName || // can be removed once backend is out\n    importedComponentDefinition.componentDefinitionPath.split(\"/\").pop();\n    this._childComponents.push([\n        name,\n        importedComponentDefinition,\n        {}\n    ]);\n    return new InstalledComponent(definition, name);\n}\nfunction exportAppForAnalysis() {\n    const definitionType = {\n        type: \"app\"\n    };\n    const childComponents = serializeChildComponents(this._childComponents);\n    return {\n        definitionType,\n        childComponents,\n        httpMounts: {},\n        exports: serializeExportTree(this._exportTree)\n    };\n}\nfunction serializeExportTree(tree) {\n    const branch = [];\n    for (const [key, child] of Object.entries(tree)){\n        let node;\n        if (typeof child === \"string\") {\n            node = {\n                type: \"leaf\",\n                leaf: child\n            };\n        } else {\n            node = serializeExportTree(child);\n        }\n        branch.push([\n            key,\n            node\n        ]);\n    }\n    return {\n        type: \"branch\",\n        branch\n    };\n}\nfunction serializeChildComponents(childComponents) {\n    return childComponents.map(([name, definition, p])=>{\n        let args = null;\n        if (p !== null) {\n            args = [];\n            for (const [name2, value] of Object.entries(p)){\n                if (value !== void 0) {\n                    args.push([\n                        name2,\n                        {\n                            type: \"value\",\n                            value: JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(value))\n                        }\n                    ]);\n                }\n            }\n        }\n        const path = definition.componentDefinitionPath;\n        if (!path) throw new Error(\"no .componentPath for component definition \" + JSON.stringify(definition, null, 2));\n        return {\n            name,\n            path,\n            args\n        };\n    });\n}\nfunction exportComponentForAnalysis() {\n    const args = Object.entries(this._args).map(([name, validator])=>[\n            name,\n            {\n                type: \"value\",\n                value: JSON.stringify(validator.json)\n            }\n        ]);\n    const definitionType = {\n        type: \"childComponent\",\n        name: this._name,\n        args\n    };\n    const childComponents = serializeChildComponents(this._childComponents);\n    return {\n        name: this._name,\n        definitionType,\n        childComponents,\n        httpMounts: {},\n        exports: serializeExportTree(this._exportTree)\n    };\n}\nfunction defineComponent(name) {\n    const ret = {\n        _isRoot: false,\n        _name: name,\n        _args: {},\n        _childComponents: [],\n        _exportTree: {},\n        _onInitCallbacks: {},\n        export: exportComponentForAnalysis,\n        use,\n        // pretend to conform to ComponentDefinition, which temporarily expects __args\n        ...{}\n    };\n    return ret;\n}\nfunction defineApp() {\n    const ret = {\n        _isRoot: true,\n        _childComponents: [],\n        _exportTree: {},\n        export: exportAppForAnalysis,\n        use\n    };\n    return ret;\n}\nfunction currentSystemUdfInComponent(componentId) {\n    return {\n        [_paths_js__WEBPACK_IMPORTED_MODULE_3__.toReferencePath]: `_reference/currentSystemUdfInComponent/${componentId}`\n    };\n}\nfunction createChildComponents(root, pathParts) {\n    const handler = {\n        get (_, prop) {\n            if (typeof prop === \"string\") {\n                const newParts = [\n                    ...pathParts,\n                    prop\n                ];\n                return createChildComponents(root, newParts);\n            } else if (prop === _paths_js__WEBPACK_IMPORTED_MODULE_3__.toReferencePath) {\n                if (pathParts.length < 1) {\n                    const found = [\n                        root,\n                        ...pathParts\n                    ].join(\".\");\n                    throw new Error(`API path is expected to be of the form \\`${root}.childComponent.functionName\\`. Found: \\`${found}\\``);\n                }\n                return `_reference/childComponent/` + pathParts.join(\"/\");\n            } else {\n                return void 0;\n            }\n        }\n    };\n    return new Proxy({}, handler);\n}\nconst componentsGeneric = ()=>createChildComponents(\"components\", []); //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9jb21wb25lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDekI7QUFNWTtBQVc3QjtBQUM0QjtBQWtDbkMsZUFBc0IscUJBS3BCLG1CQU1pRDtJQUNqRCxNQUFNLFVBQVUsNkRBQWtCLENBQUMsaUJBQWlCO0lBQ3BELE9BQU8sTUFBTSxxRUFBbUIsQ0FBQyw0QkFBNEI7UUFDM0QsR0FBRztRQUNILE9BQU87SUFDVCxDQUFDO0FBQ0g7QUF5RkEsTUFBTSxtQkFBZ0U7SUFXcEUsWUFBWSxZQUF3QixLQUFjO1FBUGxEOztLQUFBO1FBS0E7O0tBQUE7UUFHRSxLQUFLLGNBQWM7UUFDbkIsS0FBSyxRQUFRO1FBQ2IsMkRBQWdCLENBQUMsTUFBTSw2QkFBNkIsSUFBSSxFQUFFO0lBQzVEO0lBRUEsSUFBSSxVQUFrRDtRQUNwRCxPQUFPLGNBQWMsS0FBSyxPQUFPLENBQUMsQ0FBQztJQUNyQztBQUNGO0FBRUEsU0FBUyxjQUFjLE1BQWMsV0FBMEI7SUFDN0QsTUFBTSxVQUE2QjtRQUNqQyxLQUFJLEdBQUcsTUFBdUI7WUFDNUIsSUFBSSxPQUFPLFNBQVMsVUFBVTtnQkFDNUIsTUFBTSxXQUFXLENBQUM7dUJBQUc7b0JBQVcsSUFBSTtpQkFBQTtnQkFDcEMsT0FBTyxjQUFjLE1BQU0sUUFBUTtZQUNyQyxXQUFXLFNBQVMsc0RBQWUsRUFBRTtnQkFDbkMsSUFBSSxZQUFZLDZCQUE2QixJQUFJO2dCQUNqRCxXQUFXLFFBQVEsVUFBVztvQkFDNUIsYUFBYSxJQUFJLElBQUk7Z0JBQ3ZCO2dCQUNBLE9BQU87WUFDVCxPQUFPO2dCQUNMLE9BQU87WUFDVDtRQUNGO0lBQ0Y7SUFDQSxPQUFPLElBQUksTUFBTSxDQUFDLEdBQUcsT0FBTztBQUM5QjtBQUVBLFNBQVMsSUFFUCxZQUNBLFNBR2dDO0lBRWhDLE1BQU0sOEJBQ0o7SUFDRixJQUFJLE9BQU8s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LFNBQVMsc0JBQ1AsTUFDQSxXQUNvQjtJQUNwQixNQUFNLFVBQWdDO1FBQ3BDLEtBQUksR0FBRyxNQUF1QjtZQUM1QixJQUFJLE9BQU8sU0FBUyxVQUFVO2dCQUM1QixNQUFNLFdBQVcsQ0FBQzt1QkFBRztvQkFBVyxJQUFJO2lCQUFBO2dCQUNwQyxPQUFPLHNCQUFzQixNQUFNLFFBQVE7WUFDN0MsV0FBVyxTQUFTLHNEQUFlLEVBQUU7Z0JBQ25DLElBQUksVUFBVSxTQUFTLEdBQUc7b0JBQ3hCLE1BQU0sUUFBUTt3QkFBQzsyQkFBUyxTQUFTO3FCQUFBLENBQUUsS0FBSyxHQUFHO29CQUMzQyxNQUFNLElBQUksTUFDUiw0Q0FBNEMsSUFBSSw0Q0FBNEMsS0FBSztnQkFFckc7Z0JBQ0EsT0FBTywrQkFBK0IsVUFBVSxLQUFLLEdBQUc7WUFDMUQsT0FBTztnQkFDTCxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0lBQ0EsT0FBTyxJQUFJLE1BQU0sQ0FBQyxHQUFHLE9BQU87QUFDOUI7QUFFTyxNQUFNLG9CQUFvQixJQUFNLHNCQUFzQixjQUFjLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsiL3NyYy9zZXJ2ZXIvY29tcG9uZW50cy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm9wZXJ0eVZhbGlkYXRvcnMsIGNvbnZleFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIEFueUZ1bmN0aW9uUmVmZXJlbmNlLFxuICBGdW5jdGlvblJlZmVyZW5jZSxcbiAgRnVuY3Rpb25UeXBlLFxufSBmcm9tIFwiLi4vYXBpLmpzXCI7XG5pbXBvcnQgeyBwZXJmb3JtQXN5bmNTeXNjYWxsIH0gZnJvbSBcIi4uL2ltcGwvc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHsgRGVmYXVsdEZ1bmN0aW9uQXJncyB9IGZyb20gXCIuLi9yZWdpc3RyYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIEFwcERlZmluaXRpb25BbmFseXNpcyxcbiAgQ29tcG9uZW50RGVmaW5pdGlvbkFuYWx5c2lzLFxuICBDb21wb25lbnREZWZpbml0aW9uVHlwZSxcbn0gZnJvbSBcIi4vZGVmaW5pdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgZ2V0RnVuY3Rpb25BZGRyZXNzLFxuICBzZXRSZWZlcmVuY2VQYXRoLFxuICB0b1JlZmVyZW5jZVBhdGgsXG59IGZyb20gXCIuL3BhdGhzLmpzXCI7XG5leHBvcnQgeyBnZXRGdW5jdGlvbkFkZHJlc3MgfSBmcm9tIFwiLi9wYXRocy5qc1wiO1xuXG4vKipcbiAqIEEgc2VyaWFsaXphYmxlIHJlZmVyZW5jZSB0byBhIENvbnZleCBmdW5jdGlvbi5cbiAqIFBhc3NpbmcgYSB0aGlzIHJlZmVyZW5jZSB0byBhbm90aGVyIGNvbXBvbmVudCBhbGxvd3MgdGhhdCBjb21wb25lbnQgdG8gY2FsbCB0aGlzXG4gKiBmdW5jdGlvbiBkdXJpbmcgdGhlIGN1cnJlbnQgZnVuY3Rpb24gZXhlY3V0aW9uIG9yIGF0IGFueSBsYXRlciB0aW1lLlxuICogRnVuY3Rpb24gaGFuZGxlcyBhcmUgdXNlZCBsaWtlIGBhcGkuZm9sZGVyLmZ1bmN0aW9uYCBGdW5jdGlvblJlZmVyZW5jZXMsXG4gKiBlLmcuIGBjdHguc2NoZWR1bGVyLnJ1bkFmdGVyKDAsIGZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzKWAuXG4gKlxuICogQSBmdW5jdGlvbiByZWZlcmVuY2UgaXMgc3RhYmxlIGFjcm9zcyBjb2RlIHB1c2hlcyBidXQgaXQncyBwb3NzaWJsZVxuICogdGhlIENvbnZleCBmdW5jdGlvbiBpdCByZWZlcnMgdG8gbWlnaHQgbm8gbG9uZ2VyIGV4aXN0LlxuICpcbiAqIFRoaXMgaXMgYSBmZWF0dXJlIG9mIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBpbiBiZXRhLlxuICogVGhpcyBBUEkgaXMgdW5zdGFibGUgYW5kIG1heSBjaGFuZ2UgaW4gc3Vic2VxdWVudCByZWxlYXNlcy5cbiAqL1xuZXhwb3J0IHR5cGUgRnVuY3Rpb25IYW5kbGU8XG4gIFR5cGUgZXh0ZW5kcyBGdW5jdGlvblR5cGUsXG4gIEFyZ3MgZXh0ZW5kcyBEZWZhdWx0RnVuY3Rpb25BcmdzID0gYW55LFxuICBSZXR1cm5UeXBlID0gYW55LFxuPiA9IHN0cmluZyAmIEZ1bmN0aW9uUmVmZXJlbmNlPFR5cGUsIFwiaW50ZXJuYWxcIiwgQXJncywgUmV0dXJuVHlwZT47XG5cbi8qKlxuICogQ3JlYXRlIGEgc2VyaWFsaXphYmxlIHJlZmVyZW5jZSB0byBhIENvbnZleCBmdW5jdGlvbi5cbiAqIFBhc3NpbmcgYSB0aGlzIHJlZmVyZW5jZSB0byBhbm90aGVyIGNvbXBvbmVudCBhbGxvd3MgdGhhdCBjb21wb25lbnQgdG8gY2FsbCB0aGlzXG4gKiBmdW5jdGlvbiBkdXJpbmcgdGhlIGN1cnJlbnQgZnVuY3Rpb24gZXhlY3V0aW9uIG9yIGF0IGFueSBsYXRlciB0aW1lLlxuICogRnVuY3Rpb24gaGFuZGxlcyBhcmUgdXNlZCBsaWtlIGBhcGkuZm9sZGVyLmZ1bmN0aW9uYCBGdW5jdGlvblJlZmVyZW5jZXMsXG4gKiBlLmcuIGBjdHguc2NoZWR1bGVyLnJ1bkFmdGVyKDAsIGZ1bmN0aW9uUmVmZXJlbmNlLCBhcmdzKWAuXG4gKlxuICogQSBmdW5jdGlvbiByZWZlcmVuY2UgaXMgc3RhYmxlIGFjcm9zcyBjb2RlIHB1c2hlcyBidXQgaXQncyBwb3NzaWJsZVxuICogdGhlIENvbnZleCBmdW5jdGlvbiBpdCByZWZlcnMgdG8gbWlnaHQgbm8gbG9uZ2VyIGV4aXN0LlxuICpcbiAqIFRoaXMgaXMgYSBmZWF0dXJlIG9mIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBpbiBiZXRhLlxuICogVGhpcyBBUEkgaXMgdW5zdGFibGUgYW5kIG1heSBjaGFuZ2UgaW4gc3Vic2VxdWVudCByZWxlYXNlcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uSGFuZGxlPFxuICBUeXBlIGV4dGVuZHMgRnVuY3Rpb25UeXBlLFxuICBBcmdzIGV4dGVuZHMgRGVmYXVsdEZ1bmN0aW9uQXJncyxcbiAgUmV0dXJuVHlwZSxcbj4oXG4gIGZ1bmN0aW9uUmVmZXJlbmNlOiBGdW5jdGlvblJlZmVyZW5jZTxcbiAgICBUeXBlLFxuICAgIFwicHVibGljXCIgfCBcImludGVybmFsXCIsXG4gICAgQXJncyxcbiAgICBSZXR1cm5UeXBlXG4gID4sXG4pOiBQcm9taXNlPEZ1bmN0aW9uSGFuZGxlPFR5cGUsIEFyZ3MsIFJldHVyblR5cGU+PiB7XG4gIGNvbnN0IGFkZHJlc3MgPSBnZXRGdW5jdGlvbkFkZHJlc3MoZnVuY3Rpb25SZWZlcmVuY2UpO1xuICByZXR1cm4gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9jcmVhdGVGdW5jdGlvbkhhbmRsZVwiLCB7XG4gICAgLi4uYWRkcmVzcyxcbiAgICB2ZXJzaW9uLFxuICB9KTtcbn1cblxuaW50ZXJmYWNlIENvbXBvbmVudEV4cG9ydHMge1xuICBba2V5OiBzdHJpbmddOiBGdW5jdGlvblJlZmVyZW5jZTxhbnksIGFueSwgYW55LCBhbnk+IHwgQ29tcG9uZW50RXhwb3J0cztcbn1cblxuLyoqXG4gKiBBbiBvYmplY3Qgb2YgdGhpcyB0eXBlIHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQgb2YgYVxuICogY29udmV4LmNvbmZpZy50cyBmaWxlIGluIGEgY29tcG9uZW50IGRlZmluaXRpb24gZGlyZWN0b3J5LlxuICpcbiAqIFRoaXMgaXMgYSBmZWF0dXJlIG9mIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBpbiBiZXRhLlxuICogVGhpcyBBUEkgaXMgdW5zdGFibGUgYW5kIG1heSBjaGFuZ2UgaW4gc3Vic2VxdWVudCByZWxlYXNlcy5cbiAqL1xuZXhwb3J0IHR5cGUgQ29tcG9uZW50RGVmaW5pdGlvbjxFeHBvcnRzIGV4dGVuZHMgQ29tcG9uZW50RXhwb3J0cyA9IGFueT4gPSB7XG4gIC8qKlxuICAgKiBJbnN0YWxsIGEgY29tcG9uZW50IHdpdGggdGhlIGdpdmVuIGRlZmluaXRpb24gaW4gdGhpcyBjb21wb25lbnQgZGVmaW5pdGlvbi5cbiAgICpcbiAgICogVGFrZXMgYSBjb21wb25lbnQgZGVmaW5pdGlvbiBhbmQgYW4gb3B0aW9uYWwgbmFtZS5cbiAgICpcbiAgICogRm9yIGVkaXRvciB0b29saW5nIHRoaXMgbWV0aG9kIGV4cGVjdHMgYSB7QGxpbmsgQ29tcG9uZW50RGVmaW5pdGlvbn1cbiAgICogYnV0IGF0IHJ1bnRpbWUgdGhlIG9iamVjdCB0aGF0IGlzIGltcG9ydGVkIHdpbGwgYmUgYSB7QGxpbmsgSW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9ufVxuICAgKi9cbiAgdXNlPERlZmluaXRpb24gZXh0ZW5kcyBDb21wb25lbnREZWZpbml0aW9uPGFueT4+KFxuICAgIGRlZmluaXRpb246IERlZmluaXRpb24sXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgfSxcbiAgKTogSW5zdGFsbGVkQ29tcG9uZW50PERlZmluaXRpb24+O1xuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCB0eXBlLW9ubHkgcHJvcGVydHkgdHJhY2tpbmcgZXhwb3J0cyBwcm92aWRlZC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBhIHR5cGUtb25seSBwcm9wZXJ0eSwgZG9uJ3QgdXNlIGl0LlxuICAgKi9cbiAgX19leHBvcnRzOiBFeHBvcnRzO1xufTtcblxudHlwZSBDb21wb25lbnREZWZpbml0aW9uRXhwb3J0czxUIGV4dGVuZHMgQ29tcG9uZW50RGVmaW5pdGlvbjxhbnk+PiA9XG4gIFRbXCJfX2V4cG9ydHNcIl07XG5cbi8qKlxuICogQW4gb2JqZWN0IG9mIHRoaXMgdHlwZSBzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0IG9mIGFcbiAqIGNvbnZleC5jb25maWcudHMgZmlsZSBpbiBhIGNvbXBvbmVudC1hd2FyZSBjb252ZXggZGlyZWN0b3J5LlxuICpcbiAqIFRoaXMgaXMgYSBmZWF0dXJlIG9mIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBpbiBiZXRhLlxuICogVGhpcyBBUEkgaXMgdW5zdGFibGUgYW5kIG1heSBjaGFuZ2UgaW4gc3Vic2VxdWVudCByZWxlYXNlcy5cbiAqL1xuZXhwb3J0IHR5cGUgQXBwRGVmaW5pdGlvbiA9IHtcbiAgLyoqXG4gICAqIEluc3RhbGwgYSBjb21wb25lbnQgd2l0aCB0aGUgZ2l2ZW4gZGVmaW5pdGlvbiBpbiB0aGlzIGNvbXBvbmVudCBkZWZpbml0aW9uLlxuICAgKlxuICAgKiBUYWtlcyBhIGNvbXBvbmVudCBkZWZpbml0aW9uIGFuZCBhbiBvcHRpb25hbCBuYW1lLlxuICAgKlxuICAgKiBGb3IgZWRpdG9yIHRvb2xpbmcgdGhpcyBtZXRob2QgZXhwZWN0cyBhIHtAbGluayBDb21wb25lbnREZWZpbml0aW9ufVxuICAgKiBidXQgYXQgcnVudGltZSB0aGUgb2JqZWN0IHRoYXQgaXMgaW1wb3J0ZWQgd2lsbCBiZSBhIHtAbGluayBJbXBvcnRlZENvbXBvbmVudERlZmluaXRpb259XG4gICAqL1xuICB1c2U8RGVmaW5pdGlvbiBleHRlbmRzIENvbXBvbmVudERlZmluaXRpb248YW55Pj4oXG4gICAgZGVmaW5pdGlvbjogRGVmaW5pdGlvbixcbiAgICBvcHRpb25zPzoge1xuICAgICAgbmFtZT86IHN0cmluZztcbiAgICB9LFxuICApOiBJbnN0YWxsZWRDb21wb25lbnQ8RGVmaW5pdGlvbj47XG59O1xuXG5pbnRlcmZhY2UgRXhwb3J0VHJlZSB7XG4gIC8vIFRyZWUgd2l0aCBzZXJpYWxpemVkIGBSZWZlcmVuY2VgcyBhcyBsZWF2ZXMuXG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IEV4cG9ydFRyZWU7XG59XG5cbnR5cGUgQ29tbW9uRGVmaW5pdGlvbkRhdGEgPSB7XG4gIF9pc1Jvb3Q6IGJvb2xlYW47XG4gIF9jaGlsZENvbXBvbmVudHM6IFtcbiAgICBzdHJpbmcsXG4gICAgSW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uLFxuICAgIFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLFxuICBdW107XG4gIF9leHBvcnRUcmVlOiBFeHBvcnRUcmVlO1xufTtcblxudHlwZSBDb21wb25lbnREZWZpbml0aW9uRGF0YSA9IENvbW1vbkRlZmluaXRpb25EYXRhICYge1xuICBfYXJnczogUHJvcGVydHlWYWxpZGF0b3JzO1xuICBfbmFtZTogc3RyaW5nO1xuICBfb25Jbml0Q2FsbGJhY2tzOiBSZWNvcmQ8c3RyaW5nLCAoYXJnc1N0cjogc3RyaW5nKSA9PiBzdHJpbmc+O1xufTtcbnR5cGUgQXBwRGVmaW5pdGlvbkRhdGEgPSBDb21tb25EZWZpbml0aW9uRGF0YTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlZmVyIHRvIGFuIGFscmVhZHktaW5zdGFsbGVkIGNvbXBvbmVudC5cbiAqL1xuY2xhc3MgSW5zdGFsbGVkQ29tcG9uZW50PERlZmluaXRpb24gZXh0ZW5kcyBDb21wb25lbnREZWZpbml0aW9uPGFueT4+IHtcbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX2RlZmluaXRpb246IERlZmluaXRpb247XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgX25hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihkZWZpbml0aW9uOiBEZWZpbml0aW9uLCBuYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9kZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICBzZXRSZWZlcmVuY2VQYXRoKHRoaXMsIGBfcmVmZXJlbmNlL2NoaWxkQ29tcG9uZW50LyR7bmFtZX1gKTtcbiAgfVxuXG4gIGdldCBleHBvcnRzKCk6IENvbXBvbmVudERlZmluaXRpb25FeHBvcnRzPERlZmluaXRpb24+IHtcbiAgICByZXR1cm4gY3JlYXRlRXhwb3J0cyh0aGlzLl9uYW1lLCBbXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRXhwb3J0cyhuYW1lOiBzdHJpbmcsIHBhdGhQYXJ0czogc3RyaW5nW10pOiBhbnkge1xuICBjb25zdCBoYW5kbGVyOiBQcm94eUhhbmRsZXI8YW55PiA9IHtcbiAgICBnZXQoXywgcHJvcDogc3RyaW5nIHwgc3ltYm9sKSB7XG4gICAgICBpZiAodHlwZW9mIHByb3AgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgbmV3UGFydHMgPSBbLi4ucGF0aFBhcnRzLCBwcm9wXTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUV4cG9ydHMobmFtZSwgbmV3UGFydHMpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wID09PSB0b1JlZmVyZW5jZVBhdGgpIHtcbiAgICAgICAgbGV0IHJlZmVyZW5jZSA9IGBfcmVmZXJlbmNlL2NoaWxkQ29tcG9uZW50LyR7bmFtZX1gO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGF0aFBhcnRzKSB7XG4gICAgICAgICAgcmVmZXJlbmNlICs9IGAvJHtwYXJ0fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlZmVyZW5jZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbiAgcmV0dXJuIG5ldyBQcm94eSh7fSwgaGFuZGxlcik7XG59XG5cbmZ1bmN0aW9uIHVzZTxEZWZpbml0aW9uIGV4dGVuZHMgQ29tcG9uZW50RGVmaW5pdGlvbjxhbnk+PihcbiAgdGhpczogQ29tbW9uRGVmaW5pdGlvbkRhdGEsXG4gIGRlZmluaXRpb246IERlZmluaXRpb24sXG4gIG9wdGlvbnM/OiB7XG4gICAgbmFtZT86IHN0cmluZztcbiAgfSxcbik6IEluc3RhbGxlZENvbXBvbmVudDxEZWZpbml0aW9uPiB7XG4gIC8vIEF0IHJ1bnRpbWUgYW4gaW1wb3J0ZWQgY29tcG9uZW50IHdpbGwgaGF2ZSB0aGlzIHNoYXBlLlxuICBjb25zdCBpbXBvcnRlZENvbXBvbmVudERlZmluaXRpb24gPVxuICAgIGRlZmluaXRpb24gYXMgdW5rbm93biBhcyBJbXBvcnRlZENvbXBvbmVudERlZmluaXRpb247XG4gIGlmICh0eXBlb2YgaW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uLmNvbXBvbmVudERlZmluaXRpb25QYXRoICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJDb21wb25lbnQgZGVmaW5pdGlvbiBkb2VzIG5vdCBoYXZlIHRoZSByZXF1aXJlZCBjb21wb25lbnREZWZpbml0aW9uUGF0aCBwcm9wZXJ0eS4gVGhpcyBjb2RlIG9ubHkgd29ya3MgaW4gQ29udmV4IHJ1bnRpbWUuXCIsXG4gICAgKTtcbiAgfVxuICBjb25zdCBuYW1lID1cbiAgICBvcHRpb25zPy5uYW1lIHx8XG4gICAgLy8gYWRkZWQgcmVjZW50bHlcbiAgICBpbXBvcnRlZENvbXBvbmVudERlZmluaXRpb24uZGVmYXVsdE5hbWUgfHxcbiAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIGJhY2tlbmQgaXMgb3V0XG4gICAgaW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uLmNvbXBvbmVudERlZmluaXRpb25QYXRoLnNwbGl0KFwiL1wiKS5wb3AoKSE7XG4gIHRoaXMuX2NoaWxkQ29tcG9uZW50cy5wdXNoKFtuYW1lLCBpbXBvcnRlZENvbXBvbmVudERlZmluaXRpb24sIHt9XSk7XG4gIHJldHVybiBuZXcgSW5zdGFsbGVkQ29tcG9uZW50KGRlZmluaXRpb24sIG5hbWUpO1xufVxuXG4vKipcbiAqIFRoZSBydW50aW1lIHR5cGUgb2YgYSBDb21wb25lbnREZWZpbml0aW9uLiBUeXBlU2NyaXB0IHdpbGwgY2xhaW1cbiAqIHRoZSBkZWZhdWx0IGV4cG9ydCBvZiBhIG1vZHVsZSBsaWtlIFwiY29vbC1jb21wb25lbnQvY29udmV4LmNvbmZpZy5qc1wiXG4gKiBpcyBhIGBAbGluayBDb21wb25lbnREZWZpbml0aW9ufSwgYnV0IGR1cmluZyBjb21wb25lbnQgZGVmaW5pdGlvbiBldmFsdWF0aW9uXG4gKiB0aGlzIGlzIGl0cyB0eXBlIGluc3RlYWQuXG4gKlxuICogVGhpcyBpcyBhIGZlYXR1cmUgb2YgY29tcG9uZW50cywgd2hpY2ggYXJlIGluIGJldGEuXG4gKiBUaGlzIEFQSSBpcyB1bnN0YWJsZSBhbmQgbWF5IGNoYW5nZSBpbiBzdWJzZXF1ZW50IHJlbGVhc2VzLlxuICovXG5leHBvcnQgdHlwZSBJbXBvcnRlZENvbXBvbmVudERlZmluaXRpb24gPSB7XG4gIGNvbXBvbmVudERlZmluaXRpb25QYXRoOiBzdHJpbmc7XG4gIGRlZmF1bHROYW1lOiBzdHJpbmc7XG59O1xuXG5mdW5jdGlvbiBleHBvcnRBcHBGb3JBbmFseXNpcyhcbiAgdGhpczogQ29tcG9uZW50RGVmaW5pdGlvbjxhbnk+ICYgQXBwRGVmaW5pdGlvbkRhdGEsXG4pOiBBcHBEZWZpbml0aW9uQW5hbHlzaXMge1xuICBjb25zdCBkZWZpbml0aW9uVHlwZSA9IHsgdHlwZTogXCJhcHBcIiBhcyBjb25zdCB9O1xuICBjb25zdCBjaGlsZENvbXBvbmVudHMgPSBzZXJpYWxpemVDaGlsZENvbXBvbmVudHModGhpcy5fY2hpbGRDb21wb25lbnRzKTtcbiAgcmV0dXJuIHtcbiAgICBkZWZpbml0aW9uVHlwZSxcbiAgICBjaGlsZENvbXBvbmVudHM6IGNoaWxkQ29tcG9uZW50cyBhcyBhbnksXG4gICAgaHR0cE1vdW50czoge30sXG4gICAgZXhwb3J0czogc2VyaWFsaXplRXhwb3J0VHJlZSh0aGlzLl9leHBvcnRUcmVlKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplRXhwb3J0VHJlZSh0cmVlOiBFeHBvcnRUcmVlKTogYW55IHtcbiAgY29uc3QgYnJhbmNoOiBhbnlbXSA9IFtdO1xuICBmb3IgKGNvbnN0IFtrZXksIGNoaWxkXSBvZiBPYmplY3QuZW50cmllcyh0cmVlKSkge1xuICAgIGxldCBub2RlO1xuICAgIGlmICh0eXBlb2YgY2hpbGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG5vZGUgPSB7IHR5cGU6IFwibGVhZlwiLCBsZWFmOiBjaGlsZCB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBub2RlID0gc2VyaWFsaXplRXhwb3J0VHJlZShjaGlsZCk7XG4gICAgfVxuICAgIGJyYW5jaC5wdXNoKFtrZXksIG5vZGVdKTtcbiAgfVxuICByZXR1cm4geyB0eXBlOiBcImJyYW5jaFwiLCBicmFuY2ggfTtcbn1cblxuZnVuY3Rpb24gc2VyaWFsaXplQ2hpbGRDb21wb25lbnRzKFxuICBjaGlsZENvbXBvbmVudHM6IFtcbiAgICBzdHJpbmcsXG4gICAgSW1wb3J0ZWRDb21wb25lbnREZWZpbml0aW9uLFxuICAgIFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsLFxuICBdW10sXG4pOiB7XG4gIG5hbWU6IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICBhcmdzOiBbc3RyaW5nLCB7IHR5cGU6IFwidmFsdWVcIjsgdmFsdWU6IHN0cmluZyB9XVtdIHwgbnVsbDtcbn1bXSB7XG4gIHJldHVybiBjaGlsZENvbXBvbmVudHMubWFwKChbbmFtZSwgZGVmaW5pdGlvbiwgcF0pID0+IHtcbiAgICBsZXQgYXJnczogW3N0cmluZywgeyB0eXBlOiBcInZhbHVlXCI7IHZhbHVlOiBzdHJpbmcgfV1bXSB8IG51bGwgPSBudWxsO1xuICAgIGlmIChwICE9PSBudWxsKSB7XG4gICAgICBhcmdzID0gW107XG4gICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocCkpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBhcmdzLnB1c2goW1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKHZhbHVlKSkgfSxcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyB3ZSBrbm93IHRoYXQgY29tcG9uZW50cyBjYXJyeSB0aGlzIGV4dHJhIGluZm9ybWF0aW9uXG4gICAgY29uc3QgcGF0aCA9IGRlZmluaXRpb24uY29tcG9uZW50RGVmaW5pdGlvblBhdGg7XG4gICAgaWYgKCFwYXRoKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIm5vIC5jb21wb25lbnRQYXRoIGZvciBjb21wb25lbnQgZGVmaW5pdGlvbiBcIiArXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZGVmaW5pdGlvbiwgbnVsbCwgMiksXG4gICAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IG5hbWUhLFxuICAgICAgcGF0aDogcGF0aCEsXG4gICAgICBhcmdzLFxuICAgIH07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBleHBvcnRDb21wb25lbnRGb3JBbmFseXNpcyhcbiAgdGhpczogQ29tcG9uZW50RGVmaW5pdGlvbjxhbnk+ICYgQ29tcG9uZW50RGVmaW5pdGlvbkRhdGEsXG4pOiBDb21wb25lbnREZWZpbml0aW9uQW5hbHlzaXMge1xuICBjb25zdCBhcmdzOiBbc3RyaW5nLCB7IHR5cGU6IFwidmFsdWVcIjsgdmFsdWU6IHN0cmluZyB9XVtdID0gT2JqZWN0LmVudHJpZXMoXG4gICAgdGhpcy5fYXJncyxcbiAgKS5tYXAoKFtuYW1lLCB2YWxpZGF0b3JdKSA9PiBbXG4gICAgbmFtZSxcbiAgICB7XG4gICAgICB0eXBlOiBcInZhbHVlXCIsXG4gICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkodmFsaWRhdG9yLmpzb24pLFxuICAgIH0sXG4gIF0pO1xuICBjb25zdCBkZWZpbml0aW9uVHlwZTogQ29tcG9uZW50RGVmaW5pdGlvblR5cGUgPSB7XG4gICAgdHlwZTogXCJjaGlsZENvbXBvbmVudFwiIGFzIGNvbnN0LFxuICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgYXJncyxcbiAgfTtcbiAgY29uc3QgY2hpbGRDb21wb25lbnRzID0gc2VyaWFsaXplQ2hpbGRDb21wb25lbnRzKHRoaXMuX2NoaWxkQ29tcG9uZW50cyk7XG4gIHJldHVybiB7XG4gICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICBkZWZpbml0aW9uVHlwZSxcbiAgICBjaGlsZENvbXBvbmVudHM6IGNoaWxkQ29tcG9uZW50cyBhcyBhbnksXG4gICAgaHR0cE1vdW50czoge30sXG4gICAgZXhwb3J0czogc2VyaWFsaXplRXhwb3J0VHJlZSh0aGlzLl9leHBvcnRUcmVlKSxcbiAgfTtcbn1cblxuLy8gVGhpcyBpcyB3aGF0IGlzIGFjdHVhbGx5IGNvbnRhaW5lZCBpbiBhIENvbXBvbmVudERlZmluaXRpb24uXG50eXBlIFJ1bnRpbWVDb21wb25lbnREZWZpbml0aW9uID0gT21pdDxDb21wb25lbnREZWZpbml0aW9uPGFueT4sIFwiX19leHBvcnRzXCI+ICZcbiAgQ29tcG9uZW50RGVmaW5pdGlvbkRhdGEgJiB7XG4gICAgZXhwb3J0OiAoKSA9PiBDb21wb25lbnREZWZpbml0aW9uQW5hbHlzaXM7XG4gIH07XG50eXBlIFJ1bnRpbWVBcHBEZWZpbml0aW9uID0gQXBwRGVmaW5pdGlvbiAmXG4gIEFwcERlZmluaXRpb25EYXRhICYge1xuICAgIGV4cG9ydDogKCkgPT4gQXBwRGVmaW5pdGlvbkFuYWx5c2lzO1xuICB9O1xuXG4vKipcbiAqIERlZmluZSBhIGNvbXBvbmVudCwgYSBwaWVjZSBvZiBhIENvbnZleCBkZXBsb3ltZW50IHdpdGggbmFtZXNwYWNlZCByZXNvdXJjZXMuXG4gKlxuICogVGhlIGRlZmF1bHRcbiAqIHRoZSBkZWZhdWx0IGV4cG9ydCBvZiBhIG1vZHVsZSBsaWtlIFwiY29vbC1jb21wb25lbnQvY29udmV4LmNvbmZpZy5qc1wiXG4gKiBpcyBhIGBAbGluayBDb21wb25lbnREZWZpbml0aW9ufSwgYnV0IGR1cmluZyBjb21wb25lbnQgZGVmaW5pdGlvbiBldmFsdWF0aW9uXG4gKiB0aGlzIGlzIGl0cyB0eXBlIGluc3RlYWQuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBtdXN0IGJlIGFscGhhbnVtZXJpYyBwbHVzIHVuZGVyc2NvcmVzLiBUeXBpY2FsbHkgdGhlc2UgYXJlXG4gKiBsb3dlcmNhc2Ugd2l0aCB1bmRlcnNjb3JlcyBsaWtlIGBcIm9uYm9hcmRpbmdfZmxvd190cmFja2VyXCJgLlxuICpcbiAqIFRoaXMgaXMgYSBmZWF0dXJlIG9mIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBpbiBiZXRhLlxuICogVGhpcyBBUEkgaXMgdW5zdGFibGUgYW5kIG1heSBjaGFuZ2UgaW4gc3Vic2VxdWVudCByZWxlYXNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudDxFeHBvcnRzIGV4dGVuZHMgQ29tcG9uZW50RXhwb3J0cyA9IGFueT4oXG4gIG5hbWU6IHN0cmluZyxcbik6IENvbXBvbmVudERlZmluaXRpb248RXhwb3J0cz4ge1xuICBjb25zdCByZXQ6IFJ1bnRpbWVDb21wb25lbnREZWZpbml0aW9uID0ge1xuICAgIF9pc1Jvb3Q6IGZhbHNlLFxuICAgIF9uYW1lOiBuYW1lLFxuICAgIF9hcmdzOiB7fSxcbiAgICBfY2hpbGRDb21wb25lbnRzOiBbXSxcbiAgICBfZXhwb3J0VHJlZToge30sXG4gICAgX29uSW5pdENhbGxiYWNrczoge30sXG5cbiAgICBleHBvcnQ6IGV4cG9ydENvbXBvbmVudEZvckFuYWx5c2lzLFxuICAgIHVzZSxcblxuICAgIC8vIHByZXRlbmQgdG8gY29uZm9ybSB0byBDb21wb25lbnREZWZpbml0aW9uLCB3aGljaCB0ZW1wb3JhcmlseSBleHBlY3RzIF9fYXJnc1xuICAgIC4uLih7fSBhcyB7IF9fYXJnczogYW55OyBfX2V4cG9ydHM6IGFueSB9KSxcbiAgfTtcbiAgcmV0dXJuIHJldCBhcyBhbnkgYXMgQ29tcG9uZW50RGVmaW5pdGlvbjxFeHBvcnRzPjtcbn1cblxuLyoqXG4gKiBBdHRhY2ggY29tcG9uZW50cywgcmV1c2VhYmxlIHBpZWNlcyBvZiBhIENvbnZleCBkZXBsb3ltZW50LCB0byB0aGlzIENvbnZleCBhcHAuXG4gKlxuICogVGhpcyBpcyBhIGZlYXR1cmUgb2YgY29tcG9uZW50cywgd2hpY2ggYXJlIGluIGJldGEuXG4gKiBUaGlzIEFQSSBpcyB1bnN0YWJsZSBhbmQgbWF5IGNoYW5nZSBpbiBzdWJzZXF1ZW50IHJlbGVhc2VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lQXBwKCk6IEFwcERlZmluaXRpb24ge1xuICBjb25zdCByZXQ6IFJ1bnRpbWVBcHBEZWZpbml0aW9uID0ge1xuICAgIF9pc1Jvb3Q6IHRydWUsXG4gICAgX2NoaWxkQ29tcG9uZW50czogW10sXG4gICAgX2V4cG9ydFRyZWU6IHt9LFxuXG4gICAgZXhwb3J0OiBleHBvcnRBcHBGb3JBbmFseXNpcyxcbiAgICB1c2UsXG4gIH07XG4gIHJldHVybiByZXQgYXMgQXBwRGVmaW5pdGlvbjtcbn1cblxudHlwZSBBbnlJbnRlcmZhY2VUeXBlID0ge1xuICBba2V5OiBzdHJpbmddOiBBbnlJbnRlcmZhY2VUeXBlO1xufSAmIEFueUZ1bmN0aW9uUmVmZXJlbmNlO1xuZXhwb3J0IHR5cGUgQW55Q29tcG9uZW50UmVmZXJlbmNlID0gUmVjb3JkPHN0cmluZywgQW55SW50ZXJmYWNlVHlwZT47XG5cbmV4cG9ydCB0eXBlIEFueUNoaWxkQ29tcG9uZW50cyA9IFJlY29yZDxzdHJpbmcsIEFueUNvbXBvbmVudFJlZmVyZW5jZT47XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjdXJyZW50U3lzdGVtVWRmSW5Db21wb25lbnQoXG4gIGNvbXBvbmVudElkOiBzdHJpbmcsXG4pOiBBbnlDb21wb25lbnRSZWZlcmVuY2Uge1xuICByZXR1cm4ge1xuICAgIFt0b1JlZmVyZW5jZVBhdGhdOiBgX3JlZmVyZW5jZS9jdXJyZW50U3lzdGVtVWRmSW5Db21wb25lbnQvJHtjb21wb25lbnRJZH1gLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDaGlsZENvbXBvbmVudHMoXG4gIHJvb3Q6IHN0cmluZyxcbiAgcGF0aFBhcnRzOiBzdHJpbmdbXSxcbik6IEFueUNoaWxkQ29tcG9uZW50cyB7XG4gIGNvbnN0IGhhbmRsZXI6IFByb3h5SGFuZGxlcjxvYmplY3Q+ID0ge1xuICAgIGdldChfLCBwcm9wOiBzdHJpbmcgfCBzeW1ib2wpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBuZXdQYXJ0cyA9IFsuLi5wYXRoUGFydHMsIHByb3BdO1xuICAgICAgICByZXR1cm4gY3JlYXRlQ2hpbGRDb21wb25lbnRzKHJvb3QsIG5ld1BhcnRzKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcCA9PT0gdG9SZWZlcmVuY2VQYXRoKSB7XG4gICAgICAgIGlmIChwYXRoUGFydHMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgIGNvbnN0IGZvdW5kID0gW3Jvb3QsIC4uLnBhdGhQYXJ0c10uam9pbihcIi5cIik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEFQSSBwYXRoIGlzIGV4cGVjdGVkIHRvIGJlIG9mIHRoZSBmb3JtIFxcYCR7cm9vdH0uY2hpbGRDb21wb25lbnQuZnVuY3Rpb25OYW1lXFxgLiBGb3VuZDogXFxgJHtmb3VuZH1cXGBgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGBfcmVmZXJlbmNlL2NoaWxkQ29tcG9uZW50L2AgKyBwYXRoUGFydHMuam9pbihcIi9cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG4gIHJldHVybiBuZXcgUHJveHkoe30sIGhhbmRsZXIpO1xufVxuXG5leHBvcnQgY29uc3QgY29tcG9uZW50c0dlbmVyaWMgPSAoKSA9PiBjcmVhdGVDaGlsZENvbXBvbmVudHMoXCJjb21wb25lbnRzXCIsIFtdKTtcblxuZXhwb3J0IHR5cGUgQW55Q29tcG9uZW50cyA9IEFueUNoaWxkQ29tcG9uZW50cztcbiJdLCJuYW1lcyI6WyJuYW1lIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/components/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/components/paths.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/components/paths.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractReferencePath: () => (/* binding */ extractReferencePath),\n/* harmony export */   getFunctionAddress: () => (/* binding */ getFunctionAddress),\n/* harmony export */   isFunctionHandle: () => (/* binding */ isFunctionHandle),\n/* harmony export */   setReferencePath: () => (/* binding */ setReferencePath),\n/* harmony export */   toReferencePath: () => (/* binding */ toReferencePath)\n/* harmony export */ });\n/* harmony import */ var _functionName_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../functionName.js */ \"(ssr)/./node_modules/convex/dist/esm/server/functionName.js\");\n\n\nconst toReferencePath = Symbol.for(\"toReferencePath\");\nfunction setReferencePath(obj, value) {\n    obj[toReferencePath] = value;\n}\nfunction extractReferencePath(reference) {\n    return reference[toReferencePath] ?? null;\n}\nfunction isFunctionHandle(s) {\n    return s.startsWith(\"function://\");\n}\nfunction getFunctionAddress(functionReference) {\n    let functionAddress;\n    if (typeof functionReference === \"string\") {\n        if (isFunctionHandle(functionReference)) {\n            functionAddress = {\n                functionHandle: functionReference\n            };\n        } else {\n            functionAddress = {\n                name: functionReference\n            };\n        }\n    } else if (functionReference[_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName]) {\n        functionAddress = {\n            name: functionReference[_functionName_js__WEBPACK_IMPORTED_MODULE_0__.functionName]\n        };\n    } else {\n        const referencePath = extractReferencePath(functionReference);\n        if (!referencePath) {\n            throw new Error(`${functionReference} is not a functionReference`);\n        }\n        functionAddress = {\n            reference: referencePath\n        };\n    }\n    return functionAddress;\n} //# sourceMappingURL=paths.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9jb21wb25lbnRzL3BhdGhzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNkI7QUFFdEIsTUFBTSxrQkFBa0IsT0FBTyxJQUFJLGlCQUFpQjtBQUtwRCxTQUFTLGlCQUFvQixLQUFRLE9BQWU7SUFDeEQsSUFBWSxlQUFlLElBQUk7QUFDbEM7QUFFTyxTQUFTLHFCQUFxQixXQUErQjtJQUNsRSxPQUFPLFVBQVUsZUFBZSxLQUFLO0FBQ3ZDO0FBRU8sU0FBUyxpQkFBaUIsR0FBb0I7SUFDbkQsT0FBTyxFQUFFLFdBQVcsYUFBYTtBQUNuQztBQUVPLFNBQVMsbUJBQW1CLG1CQUF3QjtJQUl6RCxJQUFJO0lBR0osSUFBSSxPQUFPLHNCQUFzQixVQUFVO1FBQ3pDLElBQUksaUJBQWlCLGlCQUFpQixHQUFHO1lBQ3ZDLGtCQUFrQjtnQkFBRSxnQkFBZ0I7WUFBa0I7UUFDeEQsT0FBTztZQUNMLGtCQUFrQjtnQkFBRSxNQUFNO1lBQWtCO1FBQzlDO0lBQ0YsV0FHUyxrQkFBa0IsMERBQVksR0FBRztRQUN4QyxrQkFBa0I7WUFBRSxNQUFNLGtCQUFrQiwwREFBWTtRQUFFO0lBQzVELE9BRUs7UUFDSCxNQUFNLGdCQUFnQixxQkFBcUIsaUJBQWlCO1FBQzVELElBQUksQ0FBQyxlQUFlO1lBQ2xCLE1BQU0sSUFBSSxNQUFNLEdBQUcsaUJBQWlCLDZCQUE2QjtRQUNuRTtRQUNBLGtCQUFrQjtZQUFFLFdBQVc7UUFBYztJQUMvQztJQUNBLE9BQU87QUFDVCIsInNvdXJjZXMiOlsiL3NyYy9zZXJ2ZXIvY29tcG9uZW50cy9wYXRocy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmdW5jdGlvbk5hbWUgfSBmcm9tIFwiLi4vZnVuY3Rpb25OYW1lLmpzXCI7XG5cbmV4cG9ydCBjb25zdCB0b1JlZmVyZW5jZVBhdGggPSBTeW1ib2wuZm9yKFwidG9SZWZlcmVuY2VQYXRoXCIpO1xuXG4vLyBNdWx0aXBsZSBpbnN0YW5jZXMgb2YgdGhlIHNhbWUgU3ltYm9sLmZvcigpIGFyZSBlcXVhbCBhdCBydW50aW1lIGJ1dCBub3Rcbi8vIGF0IHR5cGUtdGltZSwgc28gYFt0b1JlZmVyZW5jZVBhdGhdYCBwcm9wZXJ0aWVzIGFyZW4ndCB1c2VkIGluIHR5cGVzLlxuLy8gVXNlIHRoaXMgZnVuY3Rpb24gdG8gc2V0IHRoZSBwcm9wZXJ0eSBpbnZpc2libHkuXG5leHBvcnQgZnVuY3Rpb24gc2V0UmVmZXJlbmNlUGF0aDxUPihvYmo6IFQsIHZhbHVlOiBzdHJpbmcpIHtcbiAgKG9iaiBhcyBhbnkpW3RvUmVmZXJlbmNlUGF0aF0gPSB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RSZWZlcmVuY2VQYXRoKHJlZmVyZW5jZTogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiByZWZlcmVuY2VbdG9SZWZlcmVuY2VQYXRoXSA/PyBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbkhhbmRsZShzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIHMuc3RhcnRzV2l0aChcImZ1bmN0aW9uOi8vXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlOiBhbnkpIHtcbiAgLy8gVGhlIGBydW4qYCBzeXNjYWxscyBleHBlY3QgZWl0aGVyIGEgVURGIHBhdGggYXQgXCJuYW1lXCIgb3IgYSBzZXJpYWxpemVkXG4gIC8vIHJlZmVyZW5jZSBhdCBcInJlZmVyZW5jZVwiLiBEaXNwYXRjaCBvbiBgZnVuY3Rpb25SZWZlcmVuY2VgIHRvIGNvZXJjZVxuICAvLyBpdCB0byBvbmUgb3IgdGhlIG90aGVyLlxuICBsZXQgZnVuY3Rpb25BZGRyZXNzO1xuXG4gIC8vIExlZ2FjeSBwYXRoIGZvciBwYXNzaW5nIGluIFVERiBwYXRocyBkaXJlY3RseSBhcyBmdW5jdGlvbiByZWZlcmVuY2VzLlxuICBpZiAodHlwZW9mIGZ1bmN0aW9uUmVmZXJlbmNlID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGlzRnVuY3Rpb25IYW5kbGUoZnVuY3Rpb25SZWZlcmVuY2UpKSB7XG4gICAgICBmdW5jdGlvbkFkZHJlc3MgPSB7IGZ1bmN0aW9uSGFuZGxlOiBmdW5jdGlvblJlZmVyZW5jZSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBmdW5jdGlvbkFkZHJlc3MgPSB7IG5hbWU6IGZ1bmN0aW9uUmVmZXJlbmNlIH07XG4gICAgfVxuICB9XG4gIC8vIFBhdGggZm9yIHBhc3NpbmcgaW4gYSBgRnVuY3Rpb25SZWZlcmVuY2VgLCBlaXRoZXIgZnJvbSBgYXBpYCBvciBkaXJlY3RseVxuICAvLyBjcmVhdGVkIGZyb20gYSBVREYgcGF0aCB3aXRoIGBtYWtlRnVuY3Rpb25SZWZlcmVuY2VgLlxuICBlbHNlIGlmIChmdW5jdGlvblJlZmVyZW5jZVtmdW5jdGlvbk5hbWVdKSB7XG4gICAgZnVuY3Rpb25BZGRyZXNzID0geyBuYW1lOiBmdW5jdGlvblJlZmVyZW5jZVtmdW5jdGlvbk5hbWVdIH07XG4gIH1cbiAgLy8gUmVmZXJlbmNlIHRvIGEgY29tcG9uZW50J3MgZnVuY3Rpb24gZGVyaXZlZCBmcm9tIGBhcHBgIG9yIGBjb21wb25lbnRgLlxuICBlbHNlIHtcbiAgICBjb25zdCByZWZlcmVuY2VQYXRoID0gZXh0cmFjdFJlZmVyZW5jZVBhdGgoZnVuY3Rpb25SZWZlcmVuY2UpO1xuICAgIGlmICghcmVmZXJlbmNlUGF0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2Z1bmN0aW9uUmVmZXJlbmNlfSBpcyBub3QgYSBmdW5jdGlvblJlZmVyZW5jZWApO1xuICAgIH1cbiAgICBmdW5jdGlvbkFkZHJlc3MgPSB7IHJlZmVyZW5jZTogcmVmZXJlbmNlUGF0aCB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbkFkZHJlc3M7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/cron.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/cron.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Crons: () => (/* binding */ Crons),\n/* harmony export */   cronJobs: () => (/* binding */ cronJobs)\n/* harmony export */ });\n/* harmony import */ var _server_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../server/api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nconst DAYS_OF_WEEK = [\n    \"sunday\",\n    \"monday\",\n    \"tuesday\",\n    \"wednesday\",\n    \"thursday\",\n    \"friday\",\n    \"saturday\"\n];\nconst cronJobs = ()=>new Crons();\nfunction validateIntervalNumber(n) {\n    if (!Number.isInteger(n) || n <= 0) {\n        throw new Error(\"Interval must be an integer greater than 0\");\n    }\n}\nfunction validatedDayOfMonth(n) {\n    if (!Number.isInteger(n) || n < 1 || n > 31) {\n        throw new Error(\"Day of month must be an integer from 1 to 31\");\n    }\n    return n;\n}\nfunction validatedDayOfWeek(s) {\n    if (!DAYS_OF_WEEK.includes(s)) {\n        throw new Error('Day of week must be a string like \"monday\".');\n    }\n    return s;\n}\nfunction validatedHourOfDay(n) {\n    if (!Number.isInteger(n) || n < 0 || n > 23) {\n        throw new Error(\"Hour of day must be an integer from 0 to 23\");\n    }\n    return n;\n}\nfunction validatedMinuteOfHour(n) {\n    if (!Number.isInteger(n) || n < 0 || n > 59) {\n        throw new Error(\"Minute of hour must be an integer from 0 to 59\");\n    }\n    return n;\n}\nfunction validatedCronString(s) {\n    return s;\n}\nfunction validatedCronIdentifier(s) {\n    if (!s.match(/^[ -~]*$/)) {\n        throw new Error(`Invalid cron identifier ${s}: use ASCII letters that are not control characters`);\n    }\n    return s;\n}\nclass Crons {\n    constructor(){\n        __publicField(this, \"crons\");\n        __publicField(this, \"isCrons\");\n        this.isCrons = true;\n        this.crons = {};\n    }\n    /** @internal */ schedule(cronIdentifier, schedule, functionReference, args) {\n        const cronArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.parseArgs)(args);\n        validatedCronIdentifier(cronIdentifier);\n        if (cronIdentifier in this.crons) {\n            throw new Error(`Cron identifier registered twice: ${cronIdentifier}`);\n        }\n        this.crons[cronIdentifier] = {\n            name: (0,_server_api_js__WEBPACK_IMPORTED_MODULE_0__.getFunctionName)(functionReference),\n            args: [\n                (0,_values_index_js__WEBPACK_IMPORTED_MODULE_2__.convexToJson)(cronArgs)\n            ],\n            schedule\n        };\n    }\n    /**\n   * Schedule a mutation or action to run at some interval.\n   *\n   * ```js\n   * crons.interval(\"Clear presence data\", {seconds: 30}, api.presence.clear);\n   * ```\n   *\n   * @param identifier - A unique name for this scheduled job.\n   * @param schedule - The time between runs for this scheduled job.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */ interval(cronIdentifier, schedule, functionReference, ...args) {\n        const s = schedule;\n        const hasSeconds = +(\"seconds\" in s && s.seconds !== void 0);\n        const hasMinutes = +(\"minutes\" in s && s.minutes !== void 0);\n        const hasHours = +(\"hours\" in s && s.hours !== void 0);\n        const total = hasSeconds + hasMinutes + hasHours;\n        if (total !== 1) {\n            throw new Error(\"Must specify one of seconds, minutes, or hours\");\n        }\n        if (hasSeconds) {\n            validateIntervalNumber(schedule.seconds);\n        } else if (hasMinutes) {\n            validateIntervalNumber(schedule.minutes);\n        } else if (hasHours) {\n            validateIntervalNumber(schedule.hours);\n        }\n        this.schedule(cronIdentifier, {\n            ...schedule,\n            type: \"interval\"\n        }, functionReference, ...args);\n    }\n    /**\n   * Schedule a mutation or action to run on an hourly basis.\n   *\n   * ```js\n   * crons.hourly(\n   *   \"Reset high scores\",\n   *   {\n   *     minuteUTC: 30,\n   *   },\n   *   api.scores.reset\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What time (UTC) each day to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */ hourly(cronIdentifier, schedule, functionReference, ...args) {\n        const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n        this.schedule(cronIdentifier, {\n            minuteUTC,\n            type: \"hourly\"\n        }, functionReference, ...args);\n    }\n    /**\n   * Schedule a mutation or action to run on a daily basis.\n   *\n   * ```js\n   * crons.daily(\n   *   \"Reset high scores\",\n   *   {\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *   },\n   *   api.scores.reset\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What time (UTC) each day to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */ daily(cronIdentifier, schedule, functionReference, ...args) {\n        const hourUTC = validatedHourOfDay(schedule.hourUTC);\n        const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n        this.schedule(cronIdentifier, {\n            hourUTC,\n            minuteUTC,\n            type: \"daily\"\n        }, functionReference, ...args);\n    }\n    /**\n   * Schedule a mutation or action to run on a weekly basis.\n   *\n   * ```js\n   * crons.weekly(\n   *   \"Weekly re-engagement email\",\n   *   {\n   *     dayOfWeek: \"Tuesday\",\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *   },\n   *   api.emails.send\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What day and time (UTC) each week to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   */ weekly(cronIdentifier, schedule, functionReference, ...args) {\n        const dayOfWeek = validatedDayOfWeek(schedule.dayOfWeek);\n        const hourUTC = validatedHourOfDay(schedule.hourUTC);\n        const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n        this.schedule(cronIdentifier, {\n            dayOfWeek,\n            hourUTC,\n            minuteUTC,\n            type: \"weekly\"\n        }, functionReference, ...args);\n    }\n    /**\n   * Schedule a mutation or action to run on a monthly basis.\n   *\n   * Note that some months have fewer days than others, so e.g. a function\n   * scheduled to run on the 30th will not run in February.\n   *\n   * ```js\n   * crons.monthly(\n   *   \"Bill customers at \",\n   *   {\n   *     hourUTC: 17, // (9:30am Pacific/10:30am Daylight Savings Pacific)\n   *     minuteUTC: 30,\n   *     day: 1,\n   *   },\n   *   api.billing.billCustomers\n   * )\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param schedule - What day and time (UTC) each month to run this function.\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */ monthly(cronIdentifier, schedule, functionReference, ...args) {\n        const day = validatedDayOfMonth(schedule.day);\n        const hourUTC = validatedHourOfDay(schedule.hourUTC);\n        const minuteUTC = validatedMinuteOfHour(schedule.minuteUTC);\n        this.schedule(cronIdentifier, {\n            day,\n            hourUTC,\n            minuteUTC,\n            type: \"monthly\"\n        }, functionReference, ...args);\n    }\n    /**\n   * Schedule a mutation or action to run on a recurring basis.\n   *\n   * Like the unix command `cron`, Sunday is 0, Monday is 1, etc.\n   *\n   * ```\n   *   minute (0 - 59)\n   *    hour (0 - 23)\n   *     day of the month (1 - 31)\n   *      month (1 - 12)\n   *       day of the week (0 - 6) (Sunday to Saturday)\n   * \"* * * * *\"\n   * ```\n   *\n   * @param cronIdentifier - A unique name for this scheduled job.\n   * @param cron - Cron string like `\"15 7 * * *\"` (Every day at 7:15 UTC)\n   * @param functionReference - A {@link FunctionReference} for the function\n   * to schedule.\n   * @param args - The arguments to the function.\n   */ cron(cronIdentifier, cron, functionReference, ...args) {\n        const c = validatedCronString(cron);\n        this.schedule(cronIdentifier, {\n            cron: c,\n            type: \"cron\"\n        }, functionReference, ...args);\n    }\n    /** @internal */ export() {\n        return JSON.stringify(this.crons);\n    }\n} //# sourceMappingURL=cron.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9jcm9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWtEO0FBQ3hCO0FBQ3FCO0FBdUIvQyxNQUFNLGVBQWU7SUFDbkI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDRjtBQWtKTyxNQUFNLFdBQVcsSUFBTSxJQUFJLE1BQU07QUFTeEMsU0FBUyx1QkFBdUIsR0FBVztJQUN6QyxJQUFJLENBQUMsT0FBTyxVQUFVLENBQUMsS0FBSyxLQUFLLEdBQUc7UUFDbEMsTUFBTSxJQUFJLE1BQU0sNENBQTRDO0lBQzlEO0FBQ0Y7QUFFQSxTQUFTLG9CQUFvQixHQUFXO0lBQ3RDLElBQUksQ0FBQyxPQUFPLFVBQVUsQ0FBQyxLQUFLLElBQUksS0FBSyxJQUFJLElBQUk7UUFDM0MsTUFBTSxJQUFJLE1BQU0sOENBQThDO0lBQ2hFO0lBQ0EsT0FBTztBQUNUO0FBRUEsU0FBUyxtQkFBbUIsR0FBVztJQUNyQyxJQUFJLENBQUMsYUFBYSxTQUFTLENBQWMsR0FBRztRQUMxQyxNQUFNLElBQUksTUFBTSw2Q0FBNkM7SUFDL0Q7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxTQUFTLG1CQUFtQixHQUFXO0lBQ3JDLElBQUksQ0FBQyxPQUFPLFVBQVUsQ0FBQyxLQUFLLElBQUksS0FBSyxJQUFJLElBQUk7UUFDM0MsTUFBTSxJQUFJLE1BQU0sNkNBQTZDO0lBQy9EO0lBQ0EsT0FBTztBQUNUO0FBRUEsU0FBUyxzQkFBc0IsR0FBVztJQUN4QyxJQUFJLENBQUMsT0FBTyxVQUFVLENBQUMsS0FBSyxJQUFJLEtBQUssSUFBSSxJQUFJO1FBQzNDLE1BQU0sSUFBSSxNQUFNLGdEQUFnRDtJQUNsRTtJQUNBLE9BQU87QUFDVDtBQUVBLFNBQVMsb0JBQW9CLEdBQVc7SUFDdEMsT0FBTztBQUNUO0FBRUEsU0FBUyx3QkFBd0IsR0FBVztJQUMxQyxJQUFJLENBQUMsRUFBRSxNQUFNLFVBQVUsR0FB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LHNCQUNHO0lBRVA7SUFBQSxpQkFHQSxTQUFTO1FBQ1AsT0FBTyxLQUFLLFVBQVUsS0FBSyxLQUFLO0lBQ2xDO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2VydmVyL2Nyb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RnVuY3Rpb25OYW1lLCBPcHRpb25hbFJlc3RBcmdzIH0gZnJvbSBcIi4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IHBhcnNlQXJncyB9IGZyb20gXCIuLi9jb21tb24vaW5kZXguanNcIjtcbmltcG9ydCB7IGNvbnZleFRvSnNvbiwgSlNPTlZhbHVlLCBWYWx1ZSB9IGZyb20gXCIuLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFNjaGVkdWxhYmxlRnVuY3Rpb25SZWZlcmVuY2UgfSBmcm9tIFwiLi9zY2hlZHVsZXIuanNcIjtcblxudHlwZSBDcm9uU2NoZWR1bGUgPSB7XG4gIHR5cGU6IFwiY3JvblwiO1xuICBjcm9uOiBzdHJpbmc7XG59O1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCB0eXBlIEludGVydmFsU2NoZWR1bGUgPVxuICB8IHsgdHlwZTogXCJpbnRlcnZhbFwiOyBzZWNvbmRzOiBudW1iZXIgfVxuICB8IHsgdHlwZTogXCJpbnRlcnZhbFwiOyBtaW51dGVzOiBudW1iZXIgfVxuICB8IHsgdHlwZTogXCJpbnRlcnZhbFwiOyBob3VyczogbnVtYmVyIH07XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgSG91cmx5U2NoZWR1bGUgPSB7XG4gIHR5cGU6IFwiaG91cmx5XCI7XG4gIG1pbnV0ZVVUQzogbnVtYmVyO1xufTtcbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBEYWlseVNjaGVkdWxlID0ge1xuICB0eXBlOiBcImRhaWx5XCI7XG4gIGhvdXJVVEM6IG51bWJlcjtcbiAgbWludXRlVVRDOiBudW1iZXI7XG59O1xuY29uc3QgREFZU19PRl9XRUVLID0gW1xuICBcInN1bmRheVwiLFxuICBcIm1vbmRheVwiLFxuICBcInR1ZXNkYXlcIixcbiAgXCJ3ZWRuZXNkYXlcIixcbiAgXCJ0aHVyc2RheVwiLFxuICBcImZyaWRheVwiLFxuICBcInNhdHVyZGF5XCIsXG5dIGFzIGNvbnN0O1xudHlwZSBEYXlPZldlZWsgPSAodHlwZW9mIERBWVNfT0ZfV0VFSylbbnVtYmVyXTtcbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBXZWVrbHlTY2hlZHVsZSA9IHtcbiAgdHlwZTogXCJ3ZWVrbHlcIjtcbiAgZGF5T2ZXZWVrOiBEYXlPZldlZWs7XG4gIGhvdXJVVEM6IG51bWJlcjtcbiAgbWludXRlVVRDOiBudW1iZXI7XG59O1xuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCB0eXBlIE1vbnRobHlTY2hlZHVsZSA9IHtcbiAgdHlwZTogXCJtb250aGx5XCI7XG4gIGRheTogbnVtYmVyO1xuICBob3VyVVRDOiBudW1iZXI7XG4gIG1pbnV0ZVVUQzogbnVtYmVyO1xufTtcblxuLy8gRHVwbGljYXRpbmcgdHlwZXMgc28gZG9jc3RyaW5ncyBhcmUgdmlzaWJsZSBpbiBzaWduYXR1cmVzOlxuLy8gYEV4cGFuZDxPbWl0PE1vbnRobHlTY2hlZHVsZSwgXCJ0eXBlXCI+PmAgZG9lc24ndCBwcmVzZXJ2ZSBkb2NzdHJpbmdzLlxuLy8gV2hlbiB3ZSBnZXQgdG8gVHlwZVNjcmlwdCA0LjksIGBzYXRpc2ZpZXNgIHdvdWxkIGdvIG5pY2VseSBoZXJlLlxuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgSW50ZXJ2YWwgPVxuICB8IHtcbiAgICAgIC8qKlxuICAgICAgICogUnVuIGEgam9iIGV2ZXJ5IGBzZWNvbmRzYCBzZWNvbmRzLCBiZWdpbm5pbmdcbiAgICAgICAqIHdoZW4gdGhlIGpvYiBpcyBmaXJzdCBkZXBsb3llZCB0byBDb252ZXguXG4gICAgICAgKi9cbiAgICAgIHNlY29uZHM6IG51bWJlcjtcbiAgICAgIG1pbnV0ZXM/OiB1bmRlZmluZWQ7XG4gICAgICBob3Vycz86IHVuZGVmaW5lZDtcbiAgICB9XG4gIHwge1xuICAgICAgLyoqXG4gICAgICAgKiBSdW4gYSBqb2IgZXZlcnkgYG1pbnV0ZXNgIG1pbnV0ZXMsIGJlZ2lubmluZ1xuICAgICAgICogd2hlbiB0aGUgam9iIGlzIGZpcnN0IGRlcGxveWVkIHRvIENvbnZleC5cbiAgICAgICAqL1xuICAgICAgbWludXRlczogbnVtYmVyO1xuICAgICAgc2Vjb25kcz86IHVuZGVmaW5lZDtcbiAgICAgIGhvdXJzPzogdW5kZWZpbmVkO1xuICAgIH1cbiAgfCB7XG4gICAgICAvKipcbiAgICAgICAqIFJ1biBhIGpvYiBldmVyeSBgaG91cnNgIGhvdXJzLCBiZWdpbm5pbmcgd2hlblxuICAgICAgICogd2hlbiB0aGUgam9iIGlzIGZpcnN0IGRlcGxveWVkIHRvIENvbnZleC5cbiAgICAgICAqL1xuICAgICAgaG91cnM6IG51bWJlcjtcbiAgICAgIHNlY29uZHM/OiB1bmRlZmluZWQ7XG4gICAgICBtaW51dGVzPzogdW5kZWZpbmVkO1xuICAgIH07XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBIb3VybHkgPSB7XG4gIC8qKlxuICAgKiBNaW51dGVzIHBhc3QgdGhlIGhvdXIsIDAtNTkuXG4gICAqL1xuICBtaW51dGVVVEM6IG51bWJlcjtcbn07XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgdHlwZSBEYWlseSA9IHtcbiAgLyoqXG4gICAqIDAtMjMsIGhvdXIgb2YgZGF5LiBSZW1lbWJlciwgdGhpcyBpcyBVVEMuXG4gICAqL1xuICBob3VyVVRDOiBudW1iZXI7XG4gIC8qKlxuICAgKiAwLTU5LCBtaW51dGUgb2YgaG91ci4gUmVtZW1iZXIsIHRoaXMgaXMgVVRDLlxuICAgKi9cbiAgbWludXRlVVRDOiBudW1iZXI7XG59O1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgTW9udGhseSA9IHtcbiAgLyoqXG4gICAqIDEtMzEsIGRheSBvZiBtb250aC4gRGF5cyBncmVhdGVyIHRoYXQgMjggd2lsbCBub3QgcnVuIGV2ZXJ5IG1vbnRoLlxuICAgKi9cbiAgZGF5OiBudW1iZXI7XG4gIC8qKlxuICAgKiAwLTIzLCBob3VyIG9mIGRheS4gUmVtZW1iZXIgdG8gY29udmVydCBmcm9tIHlvdXIgb3duIHRpbWUgem9uZSB0byBVVEMuXG4gICAqL1xuICBob3VyVVRDOiBudW1iZXI7XG4gIC8qKlxuICAgKiAwLTU5LCBtaW51dGUgb2YgaG91ci4gUmVtZW1iZXIgdG8gY29udmVydCBmcm9tIHlvdXIgb3duIHRpbWUgem9uZSB0byBVVEMuXG4gICAqL1xuICBtaW51dGVVVEM6IG51bWJlcjtcbn07XG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgV2Vla2x5ID0ge1xuICAvKipcbiAgICogXCJtb25kYXlcIiwgXCJ0dWVzZGF5XCIsIGV0Yy5cbiAgICovXG4gIGRheU9mV2VlazogRGF5T2ZXZWVrO1xuICAvKipcbiAgICogMC0yMywgaG91ciBvZiBkYXkuIFJlbWVtYmVyIHRvIGNvbnZlcnQgZnJvbSB5b3VyIG93biB0aW1lIHpvbmUgdG8gVVRDLlxuICAgKi9cbiAgaG91clVUQzogbnVtYmVyO1xuICAvKipcbiAgICogMC01OSwgbWludXRlIG9mIGhvdXIuIFJlbWVtYmVyIHRvIGNvbnZlcnQgZnJvbSB5b3VyIG93biB0aW1lIHpvbmUgdG8gVVRDLlxuICAgKi9cbiAgbWludXRlVVRDOiBudW1iZXI7XG59O1xuXG4vKiogQHB1YmxpYyAqL1xuZXhwb3J0IHR5cGUgU2NoZWR1bGUgPVxuICB8IENyb25TY2hlZHVsZVxuICB8IEludGVydmFsU2NoZWR1bGVcbiAgfCBIb3VybHlTY2hlZHVsZVxuICB8IERhaWx5U2NoZWR1bGVcbiAgfCBXZWVrbHlTY2hlZHVsZVxuICB8IE1vbnRobHlTY2hlZHVsZTtcblxuLyoqXG4gKiBBIHNjaGVkdWxlIHRvIHJ1biBhIENvbnZleCBtdXRhdGlvbiBvciBhY3Rpb24gb24uXG4gKiBZb3UgY2FuIHNjaGVkdWxlIENvbnZleCBmdW5jdGlvbnMgdG8gcnVuIHJlZ3VsYXJseSB3aXRoXG4gKiB7QGxpbmsgaW50ZXJ2YWx9IGFuZCBleHBvcnRpbmcgaXQuXG4gKlxuICogQHB1YmxpY1xuICoqL1xuZXhwb3J0IGludGVyZmFjZSBDcm9uSm9iIHtcbiAgbmFtZTogc3RyaW5nO1xuICBhcmdzOiBKU09OVmFsdWU7XG4gIHNjaGVkdWxlOiBTY2hlZHVsZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBDcm9uSm9icyBvYmplY3QgdG8gc2NoZWR1bGUgcmVjdXJyaW5nIHRhc2tzLlxuICpcbiAqIGBgYGpzXG4gKiAvLyBjb252ZXgvY3JvbnMuanNcbiAqIGltcG9ydCB7IGNyb25Kb2JzIH0gZnJvbSAnY29udmV4L3NlcnZlcic7XG4gKiBpbXBvcnQgeyBhcGkgfSBmcm9tIFwiLi9fZ2VuZXJhdGVkL2FwaVwiO1xuICpcbiAqIGNvbnN0IGNyb25zID0gY3JvbkpvYnMoKTtcbiAqIGNyb25zLndlZWtseShcbiAqICAgXCJ3ZWVrbHkgcmUtZW5nYWdlbWVudCBlbWFpbFwiLFxuICogICB7XG4gKiAgICAgaG91clVUQzogMTcsIC8vICg5OjMwYW0gUGFjaWZpYy8xMDozMGFtIERheWxpZ2h0IFNhdmluZ3MgUGFjaWZpYylcbiAqICAgICBtaW51dGVVVEM6IDMwLFxuICogICB9LFxuICogICBhcGkuZW1haWxzLnNlbmRcbiAqIClcbiAqIGV4cG9ydCBkZWZhdWx0IGNyb25zO1xuICogYGBgXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgY3JvbkpvYnMgPSAoKSA9PiBuZXcgQ3JvbnMoKTtcblxuLyoqXG4gKiBAcHVibGljXG4gKlxuICogVGhpcyBpcyBhIGNyb24gc3RyaW5nLiBUaGV5J3JlIGNvbXBsaWNhdGVkIVxuICovXG50eXBlIENyb25TdHJpbmcgPSBzdHJpbmc7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW50ZXJ2YWxOdW1iZXIobjogbnVtYmVyKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihuKSB8fCBuIDw9IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcnZhbCBtdXN0IGJlIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIDBcIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVkRGF5T2ZNb250aChuOiBudW1iZXIpIHtcbiAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG4pIHx8IG4gPCAxIHx8IG4gPiAzMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkRheSBvZiBtb250aCBtdXN0IGJlIGFuIGludGVnZXIgZnJvbSAxIHRvIDMxXCIpO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZWREYXlPZldlZWsoczogc3RyaW5nKSB7XG4gIGlmICghREFZU19PRl9XRUVLLmluY2x1ZGVzKHMgYXMgRGF5T2ZXZWVrKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGF5IG9mIHdlZWsgbXVzdCBiZSBhIHN0cmluZyBsaWtlIFwibW9uZGF5XCIuJyk7XG4gIH1cbiAgcmV0dXJuIHMgYXMgRGF5T2ZXZWVrO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZWRIb3VyT2ZEYXkobjogbnVtYmVyKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihuKSB8fCBuIDwgMCB8fCBuID4gMjMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJIb3VyIG9mIGRheSBtdXN0IGJlIGFuIGludGVnZXIgZnJvbSAwIHRvIDIzXCIpO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZWRNaW51dGVPZkhvdXIobjogbnVtYmVyKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihuKSB8fCBuIDwgMCB8fCBuID4gNTkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaW51dGUgb2YgaG91ciBtdXN0IGJlIGFuIGludGVnZXIgZnJvbSAwIHRvIDU5XCIpO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZWRDcm9uU3RyaW5nKHM6IHN0cmluZykge1xuICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVkQ3JvbklkZW50aWZpZXIoczogc3RyaW5nKSB7XG4gIGlmICghcy5tYXRjaCgvXlsgLX5dKiQvKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBJbnZhbGlkIGNyb24gaWRlbnRpZmllciAke3N9OiB1c2UgQVNDSUkgbGV0dGVycyB0aGF0IGFyZSBub3QgY29udHJvbCBjaGFyYWN0ZXJzYCxcbiAgICApO1xuICB9XG4gIHJldHVybiBzO1xufVxuXG4vKipcbiAqIEEgY2xhc3MgZm9yIHNjaGVkdWxpbmcgY3JvbiBqb2JzLlxuICpcbiAqIFRvIGxlYXJuIG1vcmUgc2VlIHRoZSBkb2N1bWVudGF0aW9uIGF0IGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3NjaGVkdWxpbmcvY3Jvbi1qb2JzXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ3JvbnMge1xuICBjcm9uczogUmVjb3JkPHN0cmluZywgQ3JvbkpvYj47XG4gIGlzQ3JvbnM6IHRydWU7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaXNDcm9ucyA9IHRydWU7XG4gICAgdGhpcy5jcm9ucyA9IHt9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBzY2hlZHVsZShcbiAgICBjcm9uSWRlbnRpZmllcjogc3RyaW5nLFxuICAgIHNjaGVkdWxlOiBTY2hlZHVsZSxcbiAgICBmdW5jdGlvblJlZmVyZW5jZTogU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZSxcbiAgICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICApIHtcbiAgICBjb25zdCBjcm9uQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcbiAgICB2YWxpZGF0ZWRDcm9uSWRlbnRpZmllcihjcm9uSWRlbnRpZmllcik7XG4gICAgaWYgKGNyb25JZGVudGlmaWVyIGluIHRoaXMuY3JvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ3JvbiBpZGVudGlmaWVyIHJlZ2lzdGVyZWQgdHdpY2U6ICR7Y3JvbklkZW50aWZpZXJ9YCk7XG4gICAgfVxuICAgIHRoaXMuY3JvbnNbY3JvbklkZW50aWZpZXJdID0ge1xuICAgICAgbmFtZTogZ2V0RnVuY3Rpb25OYW1lKGZ1bmN0aW9uUmVmZXJlbmNlKSxcbiAgICAgIGFyZ3M6IFtjb252ZXhUb0pzb24oY3JvbkFyZ3MpXSxcbiAgICAgIHNjaGVkdWxlOiBzY2hlZHVsZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGEgbXV0YXRpb24gb3IgYWN0aW9uIHRvIHJ1biBhdCBzb21lIGludGVydmFsLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBjcm9ucy5pbnRlcnZhbChcIkNsZWFyIHByZXNlbmNlIGRhdGFcIiwge3NlY29uZHM6IDMwfSwgYXBpLnByZXNlbmNlLmNsZWFyKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBpZGVudGlmaWVyIC0gQSB1bmlxdWUgbmFtZSBmb3IgdGhpcyBzY2hlZHVsZWQgam9iLlxuICAgKiBAcGFyYW0gc2NoZWR1bGUgLSBUaGUgdGltZSBiZXR3ZWVuIHJ1bnMgZm9yIHRoaXMgc2NoZWR1bGVkIGpvYi5cbiAgICogQHBhcmFtIGZ1bmN0aW9uUmVmZXJlbmNlIC0gQSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IGZvciB0aGUgZnVuY3Rpb25cbiAgICogdG8gc2NoZWR1bGUuXG4gICAqIEBwYXJhbSBhcmdzIC0gVGhlIGFyZ3VtZW50cyB0byB0aGUgZnVuY3Rpb24uXG4gICAqL1xuICBpbnRlcnZhbDxGdW5jUmVmIGV4dGVuZHMgU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZT4oXG4gICAgY3JvbklkZW50aWZpZXI6IHN0cmluZyxcbiAgICBzY2hlZHVsZTogSW50ZXJ2YWwsXG4gICAgZnVuY3Rpb25SZWZlcmVuY2U6IEZ1bmNSZWYsXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxGdW5jUmVmPlxuICApIHtcbiAgICBjb25zdCBzID0gc2NoZWR1bGU7XG4gICAgY29uc3QgaGFzU2Vjb25kcyA9ICsoXCJzZWNvbmRzXCIgaW4gcyAmJiBzLnNlY29uZHMgIT09IHVuZGVmaW5lZCk7XG4gICAgY29uc3QgaGFzTWludXRlcyA9ICsoXCJtaW51dGVzXCIgaW4gcyAmJiBzLm1pbnV0ZXMgIT09IHVuZGVmaW5lZCk7XG4gICAgY29uc3QgaGFzSG91cnMgPSArKFwiaG91cnNcIiBpbiBzICYmIHMuaG91cnMgIT09IHVuZGVmaW5lZCk7XG4gICAgY29uc3QgdG90YWwgPSBoYXNTZWNvbmRzICsgaGFzTWludXRlcyArIGhhc0hvdXJzO1xuICAgIGlmICh0b3RhbCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBzcGVjaWZ5IG9uZSBvZiBzZWNvbmRzLCBtaW51dGVzLCBvciBob3Vyc1wiKTtcbiAgICB9XG4gICAgaWYgKGhhc1NlY29uZHMpIHtcbiAgICAgIHZhbGlkYXRlSW50ZXJ2YWxOdW1iZXIoc2NoZWR1bGUuc2Vjb25kcyEpO1xuICAgIH0gZWxzZSBpZiAoaGFzTWludXRlcykge1xuICAgICAgdmFsaWRhdGVJbnRlcnZhbE51bWJlcihzY2hlZHVsZS5taW51dGVzISk7XG4gICAgfSBlbHNlIGlmIChoYXNIb3Vycykge1xuICAgICAgdmFsaWRhdGVJbnRlcnZhbE51bWJlcihzY2hlZHVsZS5ob3VycyEpO1xuICAgIH1cbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IC4uLnNjaGVkdWxlLCB0eXBlOiBcImludGVydmFsXCIgfSxcbiAgICAgIGZ1bmN0aW9uUmVmZXJlbmNlLFxuICAgICAgLi4uYXJncyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlIGEgbXV0YXRpb24gb3IgYWN0aW9uIHRvIHJ1biBvbiBhbiBob3VybHkgYmFzaXMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNyb25zLmhvdXJseShcbiAgICogICBcIlJlc2V0IGhpZ2ggc2NvcmVzXCIsXG4gICAqICAge1xuICAgKiAgICAgbWludXRlVVRDOiAzMCxcbiAgICogICB9LFxuICAgKiAgIGFwaS5zY29yZXMucmVzZXRcbiAgICogKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGNyb25JZGVudGlmaWVyIC0gQSB1bmlxdWUgbmFtZSBmb3IgdGhpcyBzY2hlZHVsZWQgam9iLlxuICAgKiBAcGFyYW0gc2NoZWR1bGUgLSBXaGF0IHRpbWUgKFVUQykgZWFjaCBkYXkgdG8gcnVuIHRoaXMgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSBmdW5jdGlvblJlZmVyZW5jZSAtIEEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIHRvIHNjaGVkdWxlLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uLlxuICAgKi9cbiAgaG91cmx5PEZ1bmNSZWYgZXh0ZW5kcyBTY2hlZHVsYWJsZUZ1bmN0aW9uUmVmZXJlbmNlPihcbiAgICBjcm9uSWRlbnRpZmllcjogc3RyaW5nLFxuICAgIHNjaGVkdWxlOiBIb3VybHksXG4gICAgZnVuY3Rpb25SZWZlcmVuY2U6IEZ1bmNSZWYsXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxGdW5jUmVmPlxuICApIHtcbiAgICBjb25zdCBtaW51dGVVVEMgPSB2YWxpZGF0ZWRNaW51dGVPZkhvdXIoc2NoZWR1bGUubWludXRlVVRDKTtcbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IG1pbnV0ZVVUQywgdHlwZTogXCJob3VybHlcIiB9LFxuICAgICAgZnVuY3Rpb25SZWZlcmVuY2UsXG4gICAgICAuLi5hcmdzLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGUgYSBtdXRhdGlvbiBvciBhY3Rpb24gdG8gcnVuIG9uIGEgZGFpbHkgYmFzaXMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNyb25zLmRhaWx5KFxuICAgKiAgIFwiUmVzZXQgaGlnaCBzY29yZXNcIixcbiAgICogICB7XG4gICAqICAgICBob3VyVVRDOiAxNywgLy8gKDk6MzBhbSBQYWNpZmljLzEwOjMwYW0gRGF5bGlnaHQgU2F2aW5ncyBQYWNpZmljKVxuICAgKiAgICAgbWludXRlVVRDOiAzMCxcbiAgICogICB9LFxuICAgKiAgIGFwaS5zY29yZXMucmVzZXRcbiAgICogKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGNyb25JZGVudGlmaWVyIC0gQSB1bmlxdWUgbmFtZSBmb3IgdGhpcyBzY2hlZHVsZWQgam9iLlxuICAgKiBAcGFyYW0gc2NoZWR1bGUgLSBXaGF0IHRpbWUgKFVUQykgZWFjaCBkYXkgdG8gcnVuIHRoaXMgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSBmdW5jdGlvblJlZmVyZW5jZSAtIEEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIHRvIHNjaGVkdWxlLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uLlxuICAgKi9cbiAgZGFpbHk8RnVuY1JlZiBleHRlbmRzIFNjaGVkdWxhYmxlRnVuY3Rpb25SZWZlcmVuY2U+KFxuICAgIGNyb25JZGVudGlmaWVyOiBzdHJpbmcsXG4gICAgc2NoZWR1bGU6IERhaWx5LFxuICAgIGZ1bmN0aW9uUmVmZXJlbmNlOiBGdW5jUmVmLFxuICAgIC4uLmFyZ3M6IE9wdGlvbmFsUmVzdEFyZ3M8RnVuY1JlZj5cbiAgKSB7XG4gICAgY29uc3QgaG91clVUQyA9IHZhbGlkYXRlZEhvdXJPZkRheShzY2hlZHVsZS5ob3VyVVRDKTtcbiAgICBjb25zdCBtaW51dGVVVEMgPSB2YWxpZGF0ZWRNaW51dGVPZkhvdXIoc2NoZWR1bGUubWludXRlVVRDKTtcbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IGhvdXJVVEMsIG1pbnV0ZVVUQywgdHlwZTogXCJkYWlseVwiIH0sXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIC4uLmFyZ3MsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gb24gYSB3ZWVrbHkgYmFzaXMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNyb25zLndlZWtseShcbiAgICogICBcIldlZWtseSByZS1lbmdhZ2VtZW50IGVtYWlsXCIsXG4gICAqICAge1xuICAgKiAgICAgZGF5T2ZXZWVrOiBcIlR1ZXNkYXlcIixcbiAgICogICAgIGhvdXJVVEM6IDE3LCAvLyAoOTozMGFtIFBhY2lmaWMvMTA6MzBhbSBEYXlsaWdodCBTYXZpbmdzIFBhY2lmaWMpXG4gICAqICAgICBtaW51dGVVVEM6IDMwLFxuICAgKiAgIH0sXG4gICAqICAgYXBpLmVtYWlscy5zZW5kXG4gICAqIClcbiAgICogYGBgXG4gICAqXG4gICAqIEBwYXJhbSBjcm9uSWRlbnRpZmllciAtIEEgdW5pcXVlIG5hbWUgZm9yIHRoaXMgc2NoZWR1bGVkIGpvYi5cbiAgICogQHBhcmFtIHNjaGVkdWxlIC0gV2hhdCBkYXkgYW5kIHRpbWUgKFVUQykgZWFjaCB3ZWVrIHRvIHJ1biB0aGlzIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gZnVuY3Rpb25SZWZlcmVuY2UgLSBBIHtAbGluayBGdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBmdW5jdGlvblxuICAgKiB0byBzY2hlZHVsZS5cbiAgICovXG4gIHdlZWtseTxGdW5jUmVmIGV4dGVuZHMgU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZT4oXG4gICAgY3JvbklkZW50aWZpZXI6IHN0cmluZyxcbiAgICBzY2hlZHVsZTogV2Vla2x5LFxuICAgIGZ1bmN0aW9uUmVmZXJlbmNlOiBGdW5jUmVmLFxuICAgIC4uLmFyZ3M6IE9wdGlvbmFsUmVzdEFyZ3M8RnVuY1JlZj5cbiAgKSB7XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gdmFsaWRhdGVkRGF5T2ZXZWVrKHNjaGVkdWxlLmRheU9mV2Vlayk7XG4gICAgY29uc3QgaG91clVUQyA9IHZhbGlkYXRlZEhvdXJPZkRheShzY2hlZHVsZS5ob3VyVVRDKTtcbiAgICBjb25zdCBtaW51dGVVVEMgPSB2YWxpZGF0ZWRNaW51dGVPZkhvdXIoc2NoZWR1bGUubWludXRlVVRDKTtcbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IGRheU9mV2VlaywgaG91clVUQywgbWludXRlVVRDLCB0eXBlOiBcIndlZWtseVwiIH0sXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIC4uLmFyZ3MsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2hlZHVsZSBhIG11dGF0aW9uIG9yIGFjdGlvbiB0byBydW4gb24gYSBtb250aGx5IGJhc2lzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgc29tZSBtb250aHMgaGF2ZSBmZXdlciBkYXlzIHRoYW4gb3RoZXJzLCBzbyBlLmcuIGEgZnVuY3Rpb25cbiAgICogc2NoZWR1bGVkIHRvIHJ1biBvbiB0aGUgMzB0aCB3aWxsIG5vdCBydW4gaW4gRmVicnVhcnkuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGNyb25zLm1vbnRobHkoXG4gICAqICAgXCJCaWxsIGN1c3RvbWVycyBhdCBcIixcbiAgICogICB7XG4gICAqICAgICBob3VyVVRDOiAxNywgLy8gKDk6MzBhbSBQYWNpZmljLzEwOjMwYW0gRGF5bGlnaHQgU2F2aW5ncyBQYWNpZmljKVxuICAgKiAgICAgbWludXRlVVRDOiAzMCxcbiAgICogICAgIGRheTogMSxcbiAgICogICB9LFxuICAgKiAgIGFwaS5iaWxsaW5nLmJpbGxDdXN0b21lcnNcbiAgICogKVxuICAgKiBgYGBcbiAgICpcbiAgICogQHBhcmFtIGNyb25JZGVudGlmaWVyIC0gQSB1bmlxdWUgbmFtZSBmb3IgdGhpcyBzY2hlZHVsZWQgam9iLlxuICAgKiBAcGFyYW0gc2NoZWR1bGUgLSBXaGF0IGRheSBhbmQgdGltZSAoVVRDKSBlYWNoIG1vbnRoIHRvIHJ1biB0aGlzIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0gZnVuY3Rpb25SZWZlcmVuY2UgLSBBIHtAbGluayBGdW5jdGlvblJlZmVyZW5jZX0gZm9yIHRoZSBmdW5jdGlvblxuICAgKiB0byBzY2hlZHVsZS5cbiAgICogQHBhcmFtIGFyZ3MgLSBUaGUgYXJndW1lbnRzIHRvIHRoZSBmdW5jdGlvbi5cbiAgICovXG4gIG1vbnRobHk8RnVuY1JlZiBleHRlbmRzIFNjaGVkdWxhYmxlRnVuY3Rpb25SZWZlcmVuY2U+KFxuICAgIGNyb25JZGVudGlmaWVyOiBzdHJpbmcsXG4gICAgc2NoZWR1bGU6IE1vbnRobHksXG4gICAgZnVuY3Rpb25SZWZlcmVuY2U6IEZ1bmNSZWYsXG4gICAgLi4uYXJnczogT3B0aW9uYWxSZXN0QXJnczxGdW5jUmVmPlxuICApIHtcbiAgICBjb25zdCBkYXkgPSB2YWxpZGF0ZWREYXlPZk1vbnRoKHNjaGVkdWxlLmRheSk7XG4gICAgY29uc3QgaG91clVUQyA9IHZhbGlkYXRlZEhvdXJPZkRheShzY2hlZHVsZS5ob3VyVVRDKTtcbiAgICBjb25zdCBtaW51dGVVVEMgPSB2YWxpZGF0ZWRNaW51dGVPZkhvdXIoc2NoZWR1bGUubWludXRlVVRDKTtcbiAgICB0aGlzLnNjaGVkdWxlKFxuICAgICAgY3JvbklkZW50aWZpZXIsXG4gICAgICB7IGRheSwgaG91clVUQywgbWludXRlVVRDLCB0eXBlOiBcIm1vbnRobHlcIiB9LFxuICAgICAgZnVuY3Rpb25SZWZlcmVuY2UsXG4gICAgICAuLi5hcmdzLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGUgYSBtdXRhdGlvbiBvciBhY3Rpb24gdG8gcnVuIG9uIGEgcmVjdXJyaW5nIGJhc2lzLlxuICAgKlxuICAgKiBMaWtlIHRoZSB1bml4IGNvbW1hbmQgYGNyb25gLCBTdW5kYXkgaXMgMCwgTW9uZGF5IGlzIDEsIGV0Yy5cbiAgICpcbiAgICogYGBgXG4gICAqICDilIzilIAgbWludXRlICgwIC0gNTkpXG4gICAqICDilIIg4pSM4pSAIGhvdXIgKDAgLSAyMylcbiAgICogIOKUgiDilIIg4pSM4pSAIGRheSBvZiB0aGUgbW9udGggKDEgLSAzMSlcbiAgICogIOKUgiDilIIg4pSCIOKUjOKUgCBtb250aCAoMSAtIDEyKVxuICAgKiAg4pSCIOKUgiDilIIg4pSCIOKUjOKUgCBkYXkgb2YgdGhlIHdlZWsgKDAgLSA2KSAoU3VuZGF5IHRvIFNhdHVyZGF5KVxuICAgKiBcIiogKiAqICogKlwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBAcGFyYW0gY3JvbklkZW50aWZpZXIgLSBBIHVuaXF1ZSBuYW1lIGZvciB0aGlzIHNjaGVkdWxlZCBqb2IuXG4gICAqIEBwYXJhbSBjcm9uIC0gQ3JvbiBzdHJpbmcgbGlrZSBgXCIxNSA3ICogKiAqXCJgIChFdmVyeSBkYXkgYXQgNzoxNSBVVEMpXG4gICAqIEBwYXJhbSBmdW5jdGlvblJlZmVyZW5jZSAtIEEge0BsaW5rIEZ1bmN0aW9uUmVmZXJlbmNlfSBmb3IgdGhlIGZ1bmN0aW9uXG4gICAqIHRvIHNjaGVkdWxlLlxuICAgKiBAcGFyYW0gYXJncyAtIFRoZSBhcmd1bWVudHMgdG8gdGhlIGZ1bmN0aW9uLlxuICAgKi9cbiAgY3JvbjxGdW5jUmVmIGV4dGVuZHMgU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZT4oXG4gICAgY3JvbklkZW50aWZpZXI6IHN0cmluZyxcbiAgICBjcm9uOiBDcm9uU3RyaW5nLFxuICAgIGZ1bmN0aW9uUmVmZXJlbmNlOiBGdW5jUmVmLFxuICAgIC4uLmFyZ3M6IE9wdGlvbmFsUmVzdEFyZ3M8RnVuY1JlZj5cbiAgKSB7XG4gICAgY29uc3QgYyA9IHZhbGlkYXRlZENyb25TdHJpbmcoY3Jvbik7XG4gICAgdGhpcy5zY2hlZHVsZShcbiAgICAgIGNyb25JZGVudGlmaWVyLFxuICAgICAgeyBjcm9uOiBjLCB0eXBlOiBcImNyb25cIiB9LFxuICAgICAgZnVuY3Rpb25SZWZlcmVuY2UsXG4gICAgICAuLi5hcmdzLFxuICAgICk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIGV4cG9ydCgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5jcm9ucyk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/cron.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/database.js":
/*!*********************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/database.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
 //# sourceMappingURL=database.js.map


/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/filter_builder.js":
/*!***************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/filter_builder.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Expression: () => (/* binding */ Expression)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass Expression {\n    /**\n   * @internal\n   */ constructor(){\n        // Property for nominal type support.\n        __publicField(this, \"_isExpression\");\n        // Property to distinguish expressions by the type they resolve to.\n        __publicField(this, \"_value\");\n    }\n} //# sourceMappingURL=filter_builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9maWx0ZXJfYnVpbGRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBaUJPLE1BQWUsV0FBd0M7SUFBQTs7R0FBQSxHQVU1RCxhQUFjO1FBUmQ7UUFBQSxvQkFBUTtRQUdSO1FBQUEsb0JBQVE7SUFRUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NlcnZlci9maWx0ZXJfYnVpbGRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWx1ZSwgTnVtZXJpY1ZhbHVlIH0gZnJvbSBcIi4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnRCeUluZm8sXG4gIEZpZWxkUGF0aHMsXG4gIEZpZWxkVHlwZUZyb21GaWVsZFBhdGgsXG4gIEdlbmVyaWNUYWJsZUluZm8sXG59IGZyb20gXCIuL2RhdGFfbW9kZWwuanNcIjtcblxuLyoqXG4gKiBFeHByZXNzaW9ucyBhcmUgZXZhbHVhdGVkIHRvIHByb2R1Y2UgYSB7QGxpbmsgdmFsdWVzLlZhbHVlfSBpbiB0aGUgY291cnNlIG9mIGV4ZWN1dGluZyBhIHF1ZXJ5LlxuICpcbiAqIFRvIGNvbnN0cnVjdCBhbiBleHByZXNzaW9uLCB1c2UgdGhlIHtAbGluayBGaWx0ZXJCdWlsZGVyfSBwcm92aWRlZCB3aXRoaW5cbiAqIHtAbGluayBPcmRlcmVkUXVlcnkuZmlsdGVyfS5cbiAqXG4gKiBAdHlwZVBhcmFtIFQgLSBUaGUgdHlwZSB0aGF0IHRoaXMgZXhwcmVzc2lvbiBldmFsdWF0ZXMgdG8uXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFeHByZXNzaW9uPFQgZXh0ZW5kcyBWYWx1ZSB8IHVuZGVmaW5lZD4ge1xuICAvLyBQcm9wZXJ0eSBmb3Igbm9taW5hbCB0eXBlIHN1cHBvcnQuXG4gIHByaXZhdGUgX2lzRXhwcmVzc2lvbjogdW5kZWZpbmVkO1xuXG4gIC8vIFByb3BlcnR5IHRvIGRpc3Rpbmd1aXNoIGV4cHJlc3Npb25zIGJ5IHRoZSB0eXBlIHRoZXkgcmVzb2x2ZSB0by5cbiAgcHJpdmF0ZSBfdmFsdWUhOiBUO1xuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIG9ubHkgZGVmaW5pbmcgdGhlIGNvbnN0cnVjdG9yIHNvIHdlIGNhbiBtYXJrIGl0IGFzIGludGVybmFsIGFuZCBrZWVwXG4gICAgLy8gaXQgb3V0IG9mIHRoZSBkb2NzLlxuICB9XG59XG4vKipcbiAqIEFuIHtAbGluayBFeHByZXNzaW9ufSBvciBhIGNvbnN0YW50IHtAbGluayB2YWx1ZXMuVmFsdWV9XG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBFeHByZXNzaW9uT3JWYWx1ZTxUIGV4dGVuZHMgVmFsdWUgfCB1bmRlZmluZWQ+ID0gRXhwcmVzc2lvbjxUPiB8IFQ7XG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIGZvciBkZWZpbmluZyBmaWx0ZXJzIGluIHF1ZXJpZXMuXG4gKlxuICogYEZpbHRlckJ1aWxkZXJgIGhhcyB2YXJpb3VzIG1ldGhvZHMgdGhhdCBwcm9kdWNlIHtAbGluayBFeHByZXNzaW9ufXMuXG4gKiBUaGVzZSBleHByZXNzaW9ucyBjYW4gYmUgbmVzdGVkIHRvZ2V0aGVyIGFsb25nIHdpdGggY29uc3RhbnRzIHRvIGV4cHJlc3NcbiAqIGEgZmlsdGVyIHByZWRpY2F0ZS5cbiAqXG4gKiBgRmlsdGVyQnVpbGRlcmAgaXMgdXNlZCB3aXRoaW4ge0BsaW5rIE9yZGVyZWRRdWVyeS5maWx0ZXJ9IHRvIGNyZWF0ZSBxdWVyeVxuICogZmlsdGVycy5cbiAqXG4gKiBIZXJlIGFyZSB0aGUgYXZhaWxhYmxlIG1ldGhvZHM6XG4gKlxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAqIHwgKipDb21wYXJpc29ucyoqICAgICAgICAgICAgICAgfCBFcnJvciB3aGVuIGBsYCBhbmQgYHJgIGFyZSBub3QgdGhlIHNhbWUgdHlwZS4gfFxuICogfCBbYGVxKGwsIHIpYF0oI2VxKSAgICAgICAgICAgICB8IGBsID09PSByYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IFtgbmVxKGwsIHIpYF0oI25lcSkgICAgICAgICAgIHwgYGwgIT09IHJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgW2BsdChsLCByKWBdKCNsdCkgICAgICAgICAgICAgfCBgbCA8IHJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBbYGx0ZShsLCByKWBdKCNsdGUpICAgICAgICAgICB8IGBsIDw9IHJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IFtgZ3QobCwgcilgXSgjZ3QpICAgICAgICAgICAgIHwgYGwgPiByYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgW2BndGUobCwgcilgXSgjZ3RlKSAgICAgICAgICAgfCBgbCA+PSByYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICoqQXJpdGhtZXRpYyoqICAgICAgICAgICAgICAgIHwgRXJyb3Igd2hlbiBgbGAgYW5kIGByYCBhcmUgbm90IHRoZSBzYW1lIHR5cGUuIHxcbiAqIHwgW2BhZGQobCwgcilgXSgjYWRkKSAgICAgICAgICAgfCBgbCArIHJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBbYHN1YihsLCByKWBdKCNzdWIpICAgICAgICAgICB8IGBsIC0gcmAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IFtgbXVsKGwsIHIpYF0oI211bCkgICAgICAgICAgIHwgYGwgKiByYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgW2BkaXYobCwgcilgXSgjZGl2KSAgICAgICAgICAgfCBgbCAvIHJgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBbYG1vZChsLCByKWBdKCNtb2QpICAgICAgICAgICB8IGBsICUgcmAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8IFtgbmVnKHgpYF0oI25lZykgICAgICAgICAgICAgIHwgYC14YCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAqKkxvZ2ljKiogICAgICAgICAgICAgICAgICAgICB8IEVycm9yIGlmIGFueSBwYXJhbSBpcyBub3QgYSBgYm9vbGAuICAgICAgICAgICB8XG4gKiB8IFtgbm90KHgpYF0oI25vdCkgICAgICAgICAgICAgIHwgYCF4YCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgW2BhbmQoYSwgYiwgLi4uLCB6KWBdKCNhbmQpICAgfCBgYSAmJiBiICYmIC4uLiAmJiB6YCAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBbYG9yKGEsIGIsIC4uLiwgeilgXSgjb3IpICAgICB8IDxjb2RlPmEgJiMxMjQ7JiMxMjQ7IGIgJiMxMjQ7JiMxMjQ7IC4uLiAmIzEyNDsmIzEyNDsgejwvY29kZT4gfFxuICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICoqT3RoZXIqKiAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgW2BmaWVsZChmaWVsZFBhdGgpYF0oI2ZpZWxkKSAgfCBFdmFsdWF0ZXMgdG8gdGhlIGZpZWxkIGF0IGBmaWVsZFBhdGhgLiAgICAgICAgfFxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbHRlckJ1aWxkZXI8VGFibGVJbmZvIGV4dGVuZHMgR2VuZXJpY1RhYmxlSW5mbz4ge1xuICAvLyAgQ29tcGFyaXNvbnMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKipcbiAgICogYGwgPT09IHJgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogKi9cbiAgZXE8VCBleHRlbmRzIFZhbHVlIHwgdW5kZWZpbmVkPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxib29sZWFuPjtcblxuICAvKipcbiAgICogYGwgIT09IHJgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogKi9cbiAgbmVxPFQgZXh0ZW5kcyBWYWx1ZSB8IHVuZGVmaW5lZD4oXG4gICAgbDogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICAgcjogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICk6IEV4cHJlc3Npb248Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIGBsIDwgcmBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgbHQ8VCBleHRlbmRzIFZhbHVlPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxib29sZWFuPjtcblxuICAvKipcbiAgICogYGwgPD0gcmBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgbHRlPFQgZXh0ZW5kcyBWYWx1ZT4oXG4gICAgbDogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICAgcjogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICk6IEV4cHJlc3Npb248Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIGBsID4gcmBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ3Q8VCBleHRlbmRzIFZhbHVlPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxib29sZWFuPjtcblxuICAvKipcbiAgICogYGwgPj0gcmBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZ3RlPFQgZXh0ZW5kcyBWYWx1ZT4oXG4gICAgbDogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICAgcjogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICk6IEV4cHJlc3Npb248Ym9vbGVhbj47XG5cbiAgLy8gIEFyaXRobWV0aWMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIGBsICsgcmBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgYWRkPFQgZXh0ZW5kcyBOdW1lcmljVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPFQ+O1xuXG4gIC8qKlxuICAgKiBgbCAtIHJgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN1YjxUIGV4dGVuZHMgTnVtZXJpY1ZhbHVlPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxUPjtcblxuICAvKipcbiAgICogYGwgKiByYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBtdWw8VCBleHRlbmRzIE51bWVyaWNWYWx1ZT4oXG4gICAgbDogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICAgcjogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICk6IEV4cHJlc3Npb248VD47XG5cbiAgLyoqXG4gICAqIGBsIC8gcmBcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGl2PFQgZXh0ZW5kcyBOdW1lcmljVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPFQ+O1xuXG4gIC8qKlxuICAgKiBgbCAlIHJgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG1vZDxUIGV4dGVuZHMgTnVtZXJpY1ZhbHVlPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxUPjtcblxuICAvKipcbiAgICogYC14YFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBuZWc8VCBleHRlbmRzIE51bWVyaWNWYWx1ZT4oeDogRXhwcmVzc2lvbk9yVmFsdWU8VD4pOiBFeHByZXNzaW9uPFQ+O1xuXG4gIC8vICBMb2dpYyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8qKlxuICAgKiBgZXhwcnNbMF0gJiYgZXhwcnNbMV0gJiYgLi4uICYmIGV4cHJzW25dYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBhbmQoLi4uZXhwcnM6IEFycmF5PEV4cHJlc3Npb25PclZhbHVlPGJvb2xlYW4+Pik6IEV4cHJlc3Npb248Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIGBleHByc1swXSB8fCBleHByc1sxXSB8fCAuLi4gfHwgZXhwcnNbbl1gXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG9yKC4uLmV4cHJzOiBBcnJheTxFeHByZXNzaW9uT3JWYWx1ZTxib29sZWFuPj4pOiBFeHByZXNzaW9uPGJvb2xlYW4+O1xuXG4gIC8qKlxuICAgKiBgIXhgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIG5vdCh4OiBFeHByZXNzaW9uT3JWYWx1ZTxib29sZWFuPik6IEV4cHJlc3Npb248Ym9vbGVhbj47XG5cbiAgLy8gIE90aGVyICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlcyB0byB0aGUgZmllbGQgYXQgdGhlIGdpdmVuIGBmaWVsZFBhdGhgLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaW4ge0BsaW5rIE9yZGVyZWRRdWVyeS5maWx0ZXJ9IHRoaXMgY2FuIGJlIHVzZWQgdG8gZXhhbWluZSB0aGUgdmFsdWVzIGJlaW5nIGZpbHRlcmVkLlxuICAgKlxuICAgKiAjIyMjIEV4YW1wbGVcbiAgICpcbiAgICogT24gdGhpcyBvYmplY3Q6XG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJ1c2VyXCI6IHtcbiAgICogICAgIFwiaXNBY3RpdmVcIjogdHJ1ZVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGZpZWxkKFwidXNlci5pc0FjdGl2ZVwiKWAgZXZhbHVhdGVzIHRvIGB0cnVlYC5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZmllbGQ8RmllbGRQYXRoIGV4dGVuZHMgRmllbGRQYXRoczxUYWJsZUluZm8+PihcbiAgICBmaWVsZFBhdGg6IEZpZWxkUGF0aCxcbiAgKTogRXhwcmVzc2lvbjxGaWVsZFR5cGVGcm9tRmllbGRQYXRoPERvY3VtZW50QnlJbmZvPFRhYmxlSW5mbz4sIEZpZWxkUGF0aD4+O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/filter_builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/functionName.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/functionName.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   functionName: () => (/* binding */ functionName)\n/* harmony export */ });\n\nconst functionName = Symbol.for(\"functionName\"); //# sourceMappingURL=functionName.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9mdW5jdGlvbk5hbWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFHTyxNQUFNLGVBQWUsT0FBTyxJQUFJLGNBQWMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2VydmVyL2Z1bmN0aW9uTmFtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEEgc3ltYm9sIGZvciBhY2Nlc3NpbmcgdGhlIG5hbWUgb2YgYSB7QGxpbmsgRnVuY3Rpb25SZWZlcmVuY2V9IGF0IHJ1bnRpbWUuXG4gKi9cbmV4cG9ydCBjb25zdCBmdW5jdGlvbk5hbWUgPSBTeW1ib2wuZm9yKFwiZnVuY3Rpb25OYW1lXCIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/functionName.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/actions_impl.js":
/*!******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/actions_impl.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupActionCalls: () => (/* binding */ setupActionCalls)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\n\n\n\nfunction syscallArgs(requestId, functionReference, args) {\n    const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_4__.getFunctionAddress)(functionReference);\n    return {\n        ...address,\n        args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)((0,_common_index_js__WEBPACK_IMPORTED_MODULE_3__.parseArgs)(args)),\n        version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version,\n        requestId\n    };\n}\nfunction setupActionCalls(requestId) {\n    return {\n        runQuery: async (query, args)=>{\n            const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/query\", syscallArgs(requestId, query, args));\n            return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n        },\n        runMutation: async (mutation, args)=>{\n            const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/mutation\", syscallArgs(requestId, mutation, args));\n            return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n        },\n        runAction: async (action, args)=>{\n            const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/action\", syscallArgs(requestId, action, args));\n            return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n        }\n    };\n} //# sourceMappingURL=actions_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2FjdGlvbnNfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQzFCO0FBQ1k7QUFDVjtBQUVTO0FBRW5DLFNBQVMsWUFDUCxXQUNBLG1CQUNBLE1BQ0E7SUFDQSxNQUFNLFVBQVUsd0VBQWtCLENBQUMsaUJBQWlCO0lBQ3BELE9BQU87UUFDTCxHQUFHO1FBQ0gsTUFBTSw4REFBWSxDQUFDLDJEQUFTLENBQUMsSUFBSSxDQUFDO1FBQ2xDLE9BQU87UUFDUDtJQUNGO0FBQ0Y7QUFFTyxTQUFTLGlCQUFpQixXQUFtQjtJQUNsRCxPQUFPO1FBQ0wsVUFBVSxPQUNSLE9BQ0E7WUFFQSxNQUFNLFNBQVMsTUFBTSxnRUFBbUIsQ0FDdEMscUJBQ0EsWUFBWSxXQUFXLE9BQU8sSUFBSTtZQUVwQyxPQUFPLDhEQUFZLENBQUMsTUFBTTtRQUM1QjtRQUNBLGFBQWEsT0FDWCxVQUNBO1lBRUEsTUFBTSxTQUFTLE1BQU0sZ0VBQW1CLENBQ3RDLHdCQUNBLFlBQVksV0FBVyxVQUFVLElBQUk7WUFFdkMsT0FBTyw4REFBWSxDQUFDLE1BQU07UUFDNUI7UUFDQSxXQUFXLE9BQ1QsUUFDQTtZQUVBLE1BQU0sU0FBUyxNQUFNLGdFQUFtQixDQUN0QyxzQkFDQSxZQUFZLFdBQVcsUUFBUSxJQUFJO1lBRXJDLE9BQU8sOERBQVksQ0FBQyxNQUFNO1FBQzVCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiL3NyYy9zZXJ2ZXIvaW1wbC9hY3Rpb25zX2ltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29udmV4VG9Kc29uLCBqc29uVG9Db252ZXgsIFZhbHVlIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi8uLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGVyZm9ybUFzeW5jU3lzY2FsbCB9IGZyb20gXCIuL3N5c2NhbGwuanNcIjtcbmltcG9ydCB7IHBhcnNlQXJncyB9IGZyb20gXCIuLi8uLi9jb21tb24vaW5kZXguanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUmVmZXJlbmNlIH0gZnJvbSBcIi4uLy4uL3NlcnZlci9hcGkuanNcIjtcbmltcG9ydCB7IGdldEZ1bmN0aW9uQWRkcmVzcyB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BhdGhzLmpzXCI7XG5cbmZ1bmN0aW9uIHN5c2NhbGxBcmdzKFxuICByZXF1ZXN0SWQ6IHN0cmluZyxcbiAgZnVuY3Rpb25SZWZlcmVuY2U6IGFueSxcbiAgYXJncz86IFJlY29yZDxzdHJpbmcsIFZhbHVlPixcbikge1xuICBjb25zdCBhZGRyZXNzID0gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRyZXNzLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihwYXJzZUFyZ3MoYXJncykpLFxuICAgIHZlcnNpb24sXG4gICAgcmVxdWVzdElkLFxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBBY3Rpb25DYWxscyhyZXF1ZXN0SWQ6IHN0cmluZykge1xuICByZXR1cm4ge1xuICAgIHJ1blF1ZXJ5OiBhc3luYyAoXG4gICAgICBxdWVyeTogRnVuY3Rpb25SZWZlcmVuY2U8XCJxdWVyeVwiLCBcInB1YmxpY1wiIHwgXCJpbnRlcm5hbFwiPixcbiAgICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgKTogUHJvbWlzZTxhbnk+ID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXG4gICAgICAgIFwiMS4wL2FjdGlvbnMvcXVlcnlcIixcbiAgICAgICAgc3lzY2FsbEFyZ3MocmVxdWVzdElkLCBxdWVyeSwgYXJncyksXG4gICAgICApO1xuICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXN1bHQpO1xuICAgIH0sXG4gICAgcnVuTXV0YXRpb246IGFzeW5jIChcbiAgICAgIG11dGF0aW9uOiBGdW5jdGlvblJlZmVyZW5jZTxcIm11dGF0aW9uXCIsIFwicHVibGljXCIgfCBcImludGVybmFsXCI+LFxuICAgICAgYXJncz86IFJlY29yZDxzdHJpbmcsIFZhbHVlPixcbiAgICApOiBQcm9taXNlPGFueT4gPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcbiAgICAgICAgXCIxLjAvYWN0aW9ucy9tdXRhdGlvblwiLFxuICAgICAgICBzeXNjYWxsQXJncyhyZXF1ZXN0SWQsIG11dGF0aW9uLCBhcmdzKSxcbiAgICAgICk7XG4gICAgICByZXR1cm4ganNvblRvQ29udmV4KHJlc3VsdCk7XG4gICAgfSxcbiAgICBydW5BY3Rpb246IGFzeW5jIChcbiAgICAgIGFjdGlvbjogRnVuY3Rpb25SZWZlcmVuY2U8XCJhY3Rpb25cIiwgXCJwdWJsaWNcIiB8IFwiaW50ZXJuYWxcIj4sXG4gICAgICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgICk6IFByb21pc2U8YW55PiA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFxuICAgICAgICBcIjEuMC9hY3Rpb25zL2FjdGlvblwiLFxuICAgICAgICBzeXNjYWxsQXJncyhyZXF1ZXN0SWQsIGFjdGlvbiwgYXJncyksXG4gICAgICApO1xuICAgICAgcmV0dXJuIGpzb25Ub0NvbnZleChyZXN1bHQpO1xuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/actions_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/authentication_impl.js":
/*!*************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/authentication_impl.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupAuth: () => (/* binding */ setupAuth)\n/* harmony export */ });\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n\n\nfunction setupAuth(requestId) {\n    return {\n        getUserIdentity: async ()=>{\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performAsyncSyscall)(\"1.0/getUserIdentity\", {\n                requestId\n            });\n        }\n    };\n} //# sourceMappingURL=authentication_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2F1dGhlbnRpY2F0aW9uX2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ29DO0FBRTdCLFNBQVMsVUFBVSxXQUF5QjtJQUNqRCxPQUFPO1FBQ0wsaUJBQWlCO1lBQ2YsT0FBTyxNQUFNLGdFQUFtQixDQUFDLHVCQUF1QjtnQkFDdEQ7WUFDRixDQUFDO1FBQ0g7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvc3JjL3NlcnZlci9pbXBsL2F1dGhlbnRpY2F0aW9uX2ltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXV0aCB9IGZyb20gXCIuLi9hdXRoZW50aWNhdGlvbi5qc1wiO1xuaW1wb3J0IHsgcGVyZm9ybUFzeW5jU3lzY2FsbCB9IGZyb20gXCIuL3N5c2NhbGwuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQXV0aChyZXF1ZXN0SWQ6IHN0cmluZyk6IEF1dGgge1xuICByZXR1cm4ge1xuICAgIGdldFVzZXJJZGVudGl0eTogYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvZ2V0VXNlcklkZW50aXR5XCIsIHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/authentication_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/database_impl.js":
/*!*******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/database_impl.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupReader: () => (/* binding */ setupReader),\n/* harmony export */   setupWriter: () => (/* binding */ setupWriter)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _query_impl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\n\n\n\n\n\n\nasync function get(table, id, isSystem) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"get\", \"id\");\n    if (typeof id !== \"string\") {\n        throw new Error(`Invalid argument \\`id\\` for \\`db.get\\`, expected string but got '${typeof id}': ${id}`);\n    }\n    const args = {\n        id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n        isSystem,\n        version: _index_js__WEBPACK_IMPORTED_MODULE_4__.version,\n        table\n    };\n    const syscallJSON = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/get\", args);\n    return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n}\nfunction setupReader() {\n    const reader = (isSystem = false)=>{\n        return {\n            get: async (arg0, arg1)=>{\n                return arg1 !== void 0 ? await get(arg0, arg1, isSystem) : await get(void 0, arg0, isSystem);\n            },\n            query: (tableName)=>{\n                return new TableReader(tableName, isSystem).query();\n            },\n            normalizeId: (tableName, id)=>{\n                (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(tableName, 1, \"normalizeId\", \"tableName\");\n                (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 2, \"normalizeId\", \"id\");\n                const accessingSystemTable = tableName.startsWith(\"_\");\n                if (accessingSystemTable !== isSystem) {\n                    throw new Error(`${accessingSystemTable ? \"System\" : \"User\"} tables can only be accessed from db.${isSystem ? \"\" : \"system.\"}normalizeId().`);\n                }\n                const syscallJSON = (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performSyscall)(\"1.0/db/normalizeId\", {\n                    table: tableName,\n                    idString: id\n                });\n                const syscallResult = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n                return syscallResult.id;\n            },\n            // We set the system reader on the next line\n            system: null,\n            table: (tableName)=>{\n                return new TableReader(tableName, isSystem);\n            }\n        };\n    };\n    const { system: _, ...rest } = reader(true);\n    const r = reader();\n    r.system = rest;\n    return r;\n}\nasync function insert(tableName, value) {\n    if (tableName.startsWith(\"_\")) {\n        throw new Error(\"System tables (prefixed with `_`) are read-only.\");\n    }\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(tableName, 1, \"insert\", \"table\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(value, 2, \"insert\", \"value\");\n    const syscallJSON = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/insert\", {\n        table: tableName,\n        value: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(value)\n    });\n    const syscallResult = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n    return syscallResult._id;\n}\nasync function patch(table, id, value) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"patch\", \"id\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(value, 2, \"patch\", \"value\");\n    await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/shallowMerge\", {\n        id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n        value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_5__.patchValueToJson)(value),\n        table\n    });\n}\nasync function replace(table, id, value) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"replace\", \"id\");\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(value, 2, \"replace\", \"value\");\n    await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/replace\", {\n        id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n        value: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(value),\n        table\n    });\n}\nasync function delete_(table, id) {\n    (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(id, 1, \"delete\", \"id\");\n    await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/remove\", {\n        id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id),\n        table\n    });\n}\nfunction setupWriter() {\n    const reader = setupReader();\n    return {\n        get: reader.get,\n        query: reader.query,\n        normalizeId: reader.normalizeId,\n        system: reader.system,\n        insert: async (table, value)=>{\n            return await insert(table, value);\n        },\n        patch: async (arg0, arg1, arg2)=>{\n            return arg2 !== void 0 ? await patch(arg0, arg1, arg2) : await patch(void 0, arg0, arg1);\n        },\n        replace: async (arg0, arg1, arg2)=>{\n            return arg2 !== void 0 ? await replace(arg0, arg1, arg2) : await replace(void 0, arg0, arg1);\n        },\n        delete: async (arg0, arg1)=>{\n            return arg1 !== void 0 ? await delete_(arg0, arg1) : await delete_(void 0, arg0);\n        },\n        table: (tableName)=>{\n            return new TableWriter(tableName, false);\n        }\n    };\n}\nclass TableReader {\n    constructor(tableName, isSystem){\n        this.tableName = tableName;\n        this.isSystem = isSystem;\n    }\n    async get(id) {\n        return get(this.tableName, id, this.isSystem);\n    }\n    query() {\n        const accessingSystemTable = this.tableName.startsWith(\"_\");\n        if (accessingSystemTable !== this.isSystem) {\n            throw new Error(`${accessingSystemTable ? \"System\" : \"User\"} tables can only be accessed from db.${this.isSystem ? \"\" : \"system.\"}query().`);\n        }\n        return new _query_impl_js__WEBPACK_IMPORTED_MODULE_2__.QueryInitializerImpl(this.tableName);\n    }\n}\nclass TableWriter extends TableReader {\n    async insert(value) {\n        return insert(this.tableName, value);\n    }\n    async patch(id, value) {\n        return patch(this.tableName, id, value);\n    }\n    async replace(id, value) {\n        return replace(this.tableName, id, value);\n    }\n    async delete(id) {\n        return delete_(this.tableName, id);\n    }\n} //# sourceMappingURL=database_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2RhdGFiYXNlX2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBS087QUFDNkM7QUFPZjtBQUVUO0FBQ0o7QUFDUztBQUVqQyxlQUFlLElBQ2IsT0FDQSxJQUNBLFVBQ0E7SUFHQSx5REFBVyxDQUFDLElBQUksR0FBRyxPQUFPLElBQUk7SUFDOUIsSUFBSSxPQUFPLE9BQU8sVUFBVTtRQUMxQixNQUFNLElBQUksTUFDUixvRUFBb0UsT0FBTyxFQUFFLE1BQzNFLEVBQ0Y7SUFFSjtJQUNBLE1BQU0sT0FBTztRQUNYLElBQUksOERBQVksQ0FBQyxFQUFFO1FBQ25CO1FBQ0EsT0FBTztRQUNQO0lBQ0Y7SUFDQSxNQUFNLGNBQWMsTUFBTSxnRUFBbUIsQ0FBQyxXQUFXLElBQUk7SUFFN0QsT0FBTyw4REFBWSxDQUFDLFdBQVc7QUFDakM7QUFFTyxTQUFTLGNBQXVEO0lBQ3JFLE1BQU0sU0FBUyxDQUNiLFdBQVc7UUFHWCxPQUFPO1lBQ0wsS0FBSyxPQUFPLE1BQVc7Z0JBQ3JCLE9BQU8sU0FBUyxTQUNaLE1BQU0sSUFBSSxNQUFNLE1BQU0sUUFBUSxJQUM5QixNQUFNLElBQUksUUFBVyxNQUFNLFFBQVE7WUFDekM7WUFDQSxPQUFPLENBQUM7Z0JBQ04sT0FBTyxJQUFJLFlBQVksV0FBVyxRQUFRLEVBQUUsTUFBTTtZQUNwRDtZQUNBLGFBQWEsQ0FDWCxXQUNBO2dCQUVBLHlEQUFXLENBQUMsV0FBVyxHQUFHLGVBQWUsV0FBVztnQkFDcEQseURBQVcsQ0FBQyxJQUFJLEdBQUcsZUFBZSxJQUFJO2dCQUN0QyxNQUFNLHVCQUF1QixVQUFVLFdBQVcsR0FBRztnQkFDckQsSUFBSSx5QkFBeUIsVUFBVTtvQkFDckMsTUFBTSxJQUFJLE1BQ1IsR0FDRSx1QkFBdUIsV0FBVyxNQUNwQyx3Q0FDRSxXQUFXLEtBQUssU0FDbEI7Z0JBRUo7Z0JBQ0EsTUFBTSxjQUFjLDJEQUFjLENB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QztJQUVBLFFBQVE7UUFDTixNQUFNLHVCQUF1QixLQUFLLFVBQVUsV0FBVyxHQUFHO1FBQzFELElBQUkseUJBQXlCLEtBQUssVUFBVTtZQUMxQyxNQUFNLElBQUksTUFDUixHQUNFLHVCQUF1QixXQUFXLE1BQ3BDLHdDQUNFLEtBQUssV0FBVyxLQUFLLFNBQ3ZCO1FBRUo7UUFDQSxPQUFPLElBQUksZ0VBQW9CLENBQUMsS0FBSyxTQUFTO0lBQ2hEO0FBQ0Y7QUFFQSxNQUFNLG9CQUFvQixZQUFZO0lBQ3BDLE1BQU0sT0FBTyxPQUFZO1FBQ3ZCLE9BQU8sT0FBTyxLQUFLLFdBQVcsS0FBSztJQUNyQztJQUNBLE1BQU0sTUFBTSxJQUFTLE9BQVk7UUFDL0IsT0FBTyxNQUFNLEtBQUssV0FBVyxJQUFJLEtBQUs7SUFDeEM7SUFDQSxNQUFNLFFBQVEsSUFBUyxPQUFZO1FBQ2pDLE9BQU8sUUFBUSxLQUFLLFdBQVcsSUFBSSxLQUFLO0lBQzFDO0lBQ0EsTUFBTSxPQUFPLElBQVM7UUFDcEIsT0FBTyxRQUFRLEtBQUssV0FBVyxFQUFFO0lBQ25DO0FBQ0YiLCJzb3VyY2VzIjpbIi9zcmMvc2VydmVyL2ltcGwvZGF0YWJhc2VfaW1wbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjb252ZXhUb0pzb24sXG4gIEdlbmVyaWNJZCxcbiAganNvblRvQ29udmV4LFxuICBWYWx1ZSxcbn0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGVyZm9ybUFzeW5jU3lzY2FsbCwgcGVyZm9ybVN5c2NhbGwgfSBmcm9tIFwiLi9zeXNjYWxsLmpzXCI7XG5pbXBvcnQge1xuICBHZW5lcmljRGF0YWJhc2VSZWFkZXIsXG4gIEdlbmVyaWNEYXRhYmFzZVJlYWRlcldpdGhUYWJsZSxcbiAgR2VuZXJpY0RhdGFiYXNlV3JpdGVyLFxuICBHZW5lcmljRGF0YWJhc2VXcml0ZXJXaXRoVGFibGUsXG59IGZyb20gXCIuLi9kYXRhYmFzZS5qc1wiO1xuaW1wb3J0IHsgUXVlcnlJbml0aWFsaXplckltcGwgfSBmcm9tIFwiLi9xdWVyeV9pbXBsLmpzXCI7XG5pbXBvcnQgeyBHZW5lcmljRGF0YU1vZGVsLCBHZW5lcmljRG9jdW1lbnQgfSBmcm9tIFwiLi4vZGF0YV9tb2RlbC5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVBcmcgfSBmcm9tIFwiLi92YWxpZGF0ZS5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi8uLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGF0Y2hWYWx1ZVRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0KFxuICB0YWJsZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBpZDogR2VuZXJpY0lkPHN0cmluZz4sXG4gIGlzU3lzdGVtOiBib29sZWFuLFxuKSB7XG4gIC8vIElmIHRoZSB1c2VyIGRvZXNu4oCZdCBwcm92aWRlIGFueSBhcmd1bWVudHMsIHdlIHVzZSB0aGUgbmV3IHNpZ25hdHVyZSBpbiB0aGUgZXJyb3IgbWVzc2FnZS5cbiAgLy8gV2UgZG9u4oCZdCBkbyBhcmd1bWVudCB2YWxpZGF0aW9uIG9uIHRoZSB0YWJsZSBhcmd1bWVudCBzaW5jZSBpdOKAmXMgbm90IHByb3ZpZGVkIHdoZW4gdXNpbmcgdGhlIG9sZCBzaWduYXR1cmUuXG4gIHZhbGlkYXRlQXJnKGlkLCAxLCBcImdldFwiLCBcImlkXCIpO1xuICBpZiAodHlwZW9mIGlkICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEludmFsaWQgYXJndW1lbnQgXFxgaWRcXGAgZm9yIFxcYGRiLmdldFxcYCwgZXhwZWN0ZWQgc3RyaW5nIGJ1dCBnb3QgJyR7dHlwZW9mIGlkfSc6ICR7XG4gICAgICAgIGlkIGFzIGFueVxuICAgICAgfWAsXG4gICAgKTtcbiAgfVxuICBjb25zdCBhcmdzID0ge1xuICAgIGlkOiBjb252ZXhUb0pzb24oaWQpLFxuICAgIGlzU3lzdGVtLFxuICAgIHZlcnNpb24sXG4gICAgdGFibGUsXG4gIH07XG4gIGNvbnN0IHN5c2NhbGxKU09OID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9nZXRcIiwgYXJncyk7XG5cbiAgcmV0dXJuIGpzb25Ub0NvbnZleChzeXNjYWxsSlNPTikgYXMgR2VuZXJpY0RvY3VtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBSZWFkZXIoKTogR2VuZXJpY0RhdGFiYXNlUmVhZGVyPEdlbmVyaWNEYXRhTW9kZWw+IHtcbiAgY29uc3QgcmVhZGVyID0gKFxuICAgIGlzU3lzdGVtID0gZmFsc2UsXG4gICk6IEdlbmVyaWNEYXRhYmFzZVJlYWRlcjxHZW5lcmljRGF0YU1vZGVsPiAmXG4gICAgR2VuZXJpY0RhdGFiYXNlUmVhZGVyV2l0aFRhYmxlPEdlbmVyaWNEYXRhTW9kZWw+ID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0OiBhc3luYyAoYXJnMDogYW55LCBhcmcxPzogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiBhcmcxICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IGF3YWl0IGdldChhcmcwLCBhcmcxLCBpc1N5c3RlbSlcbiAgICAgICAgICA6IGF3YWl0IGdldCh1bmRlZmluZWQsIGFyZzAsIGlzU3lzdGVtKTtcbiAgICAgIH0sXG4gICAgICBxdWVyeTogKHRhYmxlTmFtZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgVGFibGVSZWFkZXIodGFibGVOYW1lLCBpc1N5c3RlbSkucXVlcnkoKTtcbiAgICAgIH0sXG4gICAgICBub3JtYWxpemVJZDogPFRhYmxlTmFtZSBleHRlbmRzIHN0cmluZz4oXG4gICAgICAgIHRhYmxlTmFtZTogVGFibGVOYW1lLFxuICAgICAgICBpZDogc3RyaW5nLFxuICAgICAgKTogR2VuZXJpY0lkPFRhYmxlTmFtZT4gfCBudWxsID0+IHtcbiAgICAgICAgdmFsaWRhdGVBcmcodGFibGVOYW1lLCAxLCBcIm5vcm1hbGl6ZUlkXCIsIFwidGFibGVOYW1lXCIpO1xuICAgICAgICB2YWxpZGF0ZUFyZyhpZCwgMiwgXCJub3JtYWxpemVJZFwiLCBcImlkXCIpO1xuICAgICAgICBjb25zdCBhY2Nlc3NpbmdTeXN0ZW1UYWJsZSA9IHRhYmxlTmFtZS5zdGFydHNXaXRoKFwiX1wiKTtcbiAgICAgICAgaWYgKGFjY2Vzc2luZ1N5c3RlbVRhYmxlICE9PSBpc1N5c3RlbSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGAke1xuICAgICAgICAgICAgICBhY2Nlc3NpbmdTeXN0ZW1UYWJsZSA/IFwiU3lzdGVtXCIgOiBcIlVzZXJcIlxuICAgICAgICAgICAgfSB0YWJsZXMgY2FuIG9ubHkgYmUgYWNjZXNzZWQgZnJvbSBkYi4ke1xuICAgICAgICAgICAgICBpc1N5c3RlbSA/IFwiXCIgOiBcInN5c3RlbS5cIlxuICAgICAgICAgICAgfW5vcm1hbGl6ZUlkKCkuYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN5c2NhbGxKU09OID0gcGVyZm9ybVN5c2NhbGwoXCIxLjAvZGIvbm9ybWFsaXplSWRcIiwge1xuICAgICAgICAgIHRhYmxlOiB0YWJsZU5hbWUsXG4gICAgICAgICAgaWRTdHJpbmc6IGlkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc3lzY2FsbFJlc3VsdCA9IGpzb25Ub0NvbnZleChzeXNjYWxsSlNPTikgYXMgYW55O1xuICAgICAgICByZXR1cm4gc3lzY2FsbFJlc3VsdC5pZDtcbiAgICAgIH0sXG4gICAgICAvLyBXZSBzZXQgdGhlIHN5c3RlbSByZWFkZXIgb24gdGhlIG5leHQgbGluZVxuICAgICAgc3lzdGVtOiBudWxsIGFzIGFueSxcbiAgICAgIHRhYmxlOiAodGFibGVOYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgVGFibGVSZWFkZXIodGFibGVOYW1lLCBpc1N5c3RlbSk7XG4gICAgICB9LFxuICAgIH07XG4gIH07XG4gIGNvbnN0IHsgc3lzdGVtOiBfLCAuLi5yZXN0IH0gPSByZWFkZXIodHJ1ZSk7XG4gIGNvbnN0IHIgPSByZWFkZXIoKTtcbiAgci5zeXN0ZW0gPSByZXN0IGFzIGFueTtcbiAgcmV0dXJuIHI7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluc2VydCh0YWJsZU5hbWU6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICBpZiAodGFibGVOYW1lLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU3lzdGVtIHRhYmxlcyAocHJlZml4ZWQgd2l0aCBgX2ApIGFyZSByZWFkLW9ubHkuXCIpO1xuICB9XG4gIHZhbGlkYXRlQXJnKHRhYmxlTmFtZSwgMSwgXCJpbnNlcnRcIiwgXCJ0YWJsZVwiKTtcbiAgdmFsaWRhdGVBcmcodmFsdWUsIDIsIFwiaW5zZXJ0XCIsIFwidmFsdWVcIik7XG4gIGNvbnN0IHN5c2NhbGxKU09OID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9pbnNlcnRcIiwge1xuICAgIHRhYmxlOiB0YWJsZU5hbWUsXG4gICAgdmFsdWU6IGNvbnZleFRvSnNvbih2YWx1ZSksXG4gIH0pO1xuICBjb25zdCBzeXNjYWxsUmVzdWx0ID0ganNvblRvQ29udmV4KHN5c2NhbGxKU09OKSBhcyBhbnk7XG4gIHJldHVybiBzeXNjYWxsUmVzdWx0Ll9pZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcGF0Y2godGFibGU6IHN0cmluZyB8IHVuZGVmaW5lZCwgaWQ6IGFueSwgdmFsdWU6IGFueSkge1xuICB2YWxpZGF0ZUFyZyhpZCwgMSwgXCJwYXRjaFwiLCBcImlkXCIpO1xuICB2YWxpZGF0ZUFyZyh2YWx1ZSwgMiwgXCJwYXRjaFwiLCBcInZhbHVlXCIpO1xuICBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3NoYWxsb3dNZXJnZVwiLCB7XG4gICAgaWQ6IGNvbnZleFRvSnNvbihpZCksXG4gICAgdmFsdWU6IHBhdGNoVmFsdWVUb0pzb24odmFsdWUgYXMgVmFsdWUpLFxuICAgIHRhYmxlLFxuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcmVwbGFjZSh0YWJsZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBpZDogYW55LCB2YWx1ZTogYW55KSB7XG4gIHZhbGlkYXRlQXJnKGlkLCAxLCBcInJlcGxhY2VcIiwgXCJpZFwiKTtcbiAgdmFsaWRhdGVBcmcodmFsdWUsIDIsIFwicmVwbGFjZVwiLCBcInZhbHVlXCIpO1xuICBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3JlcGxhY2VcIiwge1xuICAgIGlkOiBjb252ZXhUb0pzb24oaWQpLFxuICAgIHZhbHVlOiBjb252ZXhUb0pzb24odmFsdWUpLFxuICAgIHRhYmxlLFxuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlXyh0YWJsZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBpZDogYW55KSB7XG4gIHZhbGlkYXRlQXJnKGlkLCAxLCBcImRlbGV0ZVwiLCBcImlkXCIpO1xuICBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3JlbW92ZVwiLCB7XG4gICAgaWQ6IGNvbnZleFRvSnNvbihpZCksXG4gICAgdGFibGUsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBXcml0ZXIoKTogR2VuZXJpY0RhdGFiYXNlV3JpdGVyPEdlbmVyaWNEYXRhTW9kZWw+ICZcbiAgR2VuZXJpY0RhdGFiYXNlV3JpdGVyV2l0aFRhYmxlPEdlbmVyaWNEYXRhTW9kZWw+IHtcbiAgY29uc3QgcmVhZGVyID0gc2V0dXBSZWFkZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXQ6IHJlYWRlci5nZXQsXG4gICAgcXVlcnk6IHJlYWRlci5xdWVyeSxcbiAgICBub3JtYWxpemVJZDogcmVhZGVyLm5vcm1hbGl6ZUlkLFxuICAgIHN5c3RlbTogcmVhZGVyLnN5c3RlbSBhcyBhbnksXG4gICAgaW5zZXJ0OiBhc3luYyAodGFibGUsIHZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgaW5zZXJ0KHRhYmxlLCB2YWx1ZSk7XG4gICAgfSxcbiAgICBwYXRjaDogYXN5bmMgKGFyZzA6IGFueSwgYXJnMTogYW55LCBhcmcyPzogYW55KSA9PiB7XG4gICAgICByZXR1cm4gYXJnMiAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gYXdhaXQgcGF0Y2goYXJnMCwgYXJnMSwgYXJnMilcbiAgICAgICAgOiBhd2FpdCBwYXRjaCh1bmRlZmluZWQsIGFyZzAsIGFyZzEpO1xuICAgIH0sXG4gICAgcmVwbGFjZTogYXN5bmMgKGFyZzA6IGFueSwgYXJnMTogYW55LCBhcmcyPzogYW55KSA9PiB7XG4gICAgICByZXR1cm4gYXJnMiAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gYXdhaXQgcmVwbGFjZShhcmcwLCBhcmcxLCBhcmcyKVxuICAgICAgICA6IGF3YWl0IHJlcGxhY2UodW5kZWZpbmVkLCBhcmcwLCBhcmcxKTtcbiAgICB9LFxuICAgIGRlbGV0ZTogYXN5bmMgKGFyZzA6IGFueSwgYXJnMT86IGFueSkgPT4ge1xuICAgICAgcmV0dXJuIGFyZzEgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IGF3YWl0IGRlbGV0ZV8oYXJnMCwgYXJnMSlcbiAgICAgICAgOiBhd2FpdCBkZWxldGVfKHVuZGVmaW5lZCwgYXJnMCk7XG4gICAgfSxcbiAgICB0YWJsZTogKHRhYmxlTmFtZSkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBUYWJsZVdyaXRlcih0YWJsZU5hbWUsIGZhbHNlKTtcbiAgICB9LFxuICB9O1xufVxuXG5jbGFzcyBUYWJsZVJlYWRlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCByZWFkb25seSB0YWJsZU5hbWU6IHN0cmluZyxcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgaXNTeXN0ZW06IGJvb2xlYW4sXG4gICkge31cblxuICBhc3luYyBnZXQoaWQ6IEdlbmVyaWNJZDxzdHJpbmc+KSB7XG4gICAgcmV0dXJuIGdldCh0aGlzLnRhYmxlTmFtZSwgaWQsIHRoaXMuaXNTeXN0ZW0pO1xuICB9XG5cbiAgcXVlcnkoKSB7XG4gICAgY29uc3QgYWNjZXNzaW5nU3lzdGVtVGFibGUgPSB0aGlzLnRhYmxlTmFtZS5zdGFydHNXaXRoKFwiX1wiKTtcbiAgICBpZiAoYWNjZXNzaW5nU3lzdGVtVGFibGUgIT09IHRoaXMuaXNTeXN0ZW0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYCR7XG4gICAgICAgICAgYWNjZXNzaW5nU3lzdGVtVGFibGUgPyBcIlN5c3RlbVwiIDogXCJVc2VyXCJcbiAgICAgICAgfSB0YWJsZXMgY2FuIG9ubHkgYmUgYWNjZXNzZWQgZnJvbSBkYi4ke1xuICAgICAgICAgIHRoaXMuaXNTeXN0ZW0gPyBcIlwiIDogXCJzeXN0ZW0uXCJcbiAgICAgICAgfXF1ZXJ5KCkuYCxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUXVlcnlJbml0aWFsaXplckltcGwodGhpcy50YWJsZU5hbWUpO1xuICB9XG59XG5cbmNsYXNzIFRhYmxlV3JpdGVyIGV4dGVuZHMgVGFibGVSZWFkZXIge1xuICBhc3luYyBpbnNlcnQodmFsdWU6IGFueSkge1xuICAgIHJldHVybiBpbnNlcnQodGhpcy50YWJsZU5hbWUsIHZhbHVlKTtcbiAgfVxuICBhc3luYyBwYXRjaChpZDogYW55LCB2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIHBhdGNoKHRoaXMudGFibGVOYW1lLCBpZCwgdmFsdWUpO1xuICB9XG4gIGFzeW5jIHJlcGxhY2UoaWQ6IGFueSwgdmFsdWU6IGFueSkge1xuICAgIHJldHVybiByZXBsYWNlKHRoaXMudGFibGVOYW1lLCBpZCwgdmFsdWUpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZShpZDogYW55KSB7XG4gICAgcmV0dXJuIGRlbGV0ZV8odGhpcy50YWJsZU5hbWUsIGlkKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/database_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js":
/*!*************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpressionImpl: () => (/* binding */ ExpressionImpl),\n/* harmony export */   filterBuilderImpl: () => (/* binding */ filterBuilderImpl),\n/* harmony export */   serializeExpression: () => (/* binding */ serializeExpression)\n/* harmony export */ });\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _filter_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/filter_builder.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass ExpressionImpl extends _filter_builder_js__WEBPACK_IMPORTED_MODULE_1__.Expression {\n    constructor(inner){\n        super();\n        __publicField(this, \"inner\");\n        this.inner = inner;\n    }\n    serialize() {\n        return this.inner;\n    }\n}\nfunction serializeExpression(expr) {\n    if (expr instanceof ExpressionImpl) {\n        return expr.serialize();\n    } else {\n        return {\n            $literal: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(expr)\n        };\n    }\n}\nconst filterBuilderImpl = {\n    //  Comparisons  /////////////////////////////////////////////////////////////\n    eq (l, r) {\n        return new ExpressionImpl({\n            $eq: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    neq (l, r) {\n        return new ExpressionImpl({\n            $neq: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    lt (l, r) {\n        return new ExpressionImpl({\n            $lt: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    lte (l, r) {\n        return new ExpressionImpl({\n            $lte: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    gt (l, r) {\n        return new ExpressionImpl({\n            $gt: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    gte (l, r) {\n        return new ExpressionImpl({\n            $gte: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    //  Arithmetic  //////////////////////////////////////////////////////////////\n    add (l, r) {\n        return new ExpressionImpl({\n            $add: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    sub (l, r) {\n        return new ExpressionImpl({\n            $sub: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    mul (l, r) {\n        return new ExpressionImpl({\n            $mul: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    div (l, r) {\n        return new ExpressionImpl({\n            $div: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    mod (l, r) {\n        return new ExpressionImpl({\n            $mod: [\n                serializeExpression(l),\n                serializeExpression(r)\n            ]\n        });\n    },\n    neg (x) {\n        return new ExpressionImpl({\n            $neg: serializeExpression(x)\n        });\n    },\n    //  Logic  ///////////////////////////////////////////////////////////////////\n    and (...exprs) {\n        return new ExpressionImpl({\n            $and: exprs.map(serializeExpression)\n        });\n    },\n    or (...exprs) {\n        return new ExpressionImpl({\n            $or: exprs.map(serializeExpression)\n        });\n    },\n    not (x) {\n        return new ExpressionImpl({\n            $not: serializeExpression(x)\n        });\n    },\n    //  Other  ///////////////////////////////////////////////////////////////////\n    field (fieldPath) {\n        return new ExpressionImpl({\n            $field: fieldPath\n        });\n    }\n}; //# sourceMappingURL=filter_builder_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2ZpbHRlcl9idWlsZGVyX2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDd0M7QUFNakM7QUFJQSxNQUFNLHVCQUF1QiwwREFBVSxDQUFNO0lBRWxELFlBQVksTUFBa0I7UUFDNUIsTUFBTTtRQUZSLG9CQUFRO1FBR04sS0FBSyxRQUFRO0lBQ2Y7SUFFQSxZQUF1QjtRQUNyQixPQUFPLEtBQUs7SUFDZDtBQUNGO0FBRU8sU0FBUyxvQkFDZCxNQUNXO0lBQ1gsSUFBSSxnQkFBZ0IsZ0JBQWdCO1FBQ2xDLE9BQU8sS0FBSyxVQUFVO0lBQ3hCLE9BQU87UUFHTCxPQUFPO1lBQUUsVUFBVSx5RUFBdUIsQ0FBQyxJQUF5QjtRQUFFO0lBQ3hFO0FBQ0Y7QUFFTyxNQUFNLG9CQUFxRDtJQUFBO0lBR2hFLElBQ0UsR0FDQSxHQUNxQjtRQUNyQixPQUFPLElBQUksZUFBZTtZQUN4QixLQUFLO2dCQUFDLG9CQUFvQixDQUFDO2dCQUFHLG9CQUFvQixDQUFDLENBQUM7YUFBQTtRQUN0RCxDQUFDO0lBQ0g7SUFFQSxLQUNFLEdBQ0EsR0FDcUI7UUFDckIsT0FBTyxJQUFJLGVBQWU7WUFDeEIsTUFBTTtnQkFBQyxvQkFBb0IsQ0FBQztnQkFBRyxvQkFBb0IsQ0FBQyxDQUFDO2FBQUE7UUFDdkQsQ0FBQztJQUNIO0lBRUEsSUFDRSxHQUNBLEdBQ3FCO1FBQ3JCLE9BQU8sSUFBSSxlQUFlO1lBQ3hCLEtBQUs7Z0JBQUMsb0JBQW9CLENBQUM7Z0JBQUcsb0JBQW9CLENBQUMsQ0FBQzthQUFBO1FBQ3RELENBQUM7SUFDSDtJQUVBLEtBQ0UsR0FDQSxHQUNxQjtRQUNyQixPQUFPLElBQUksZUFBZTtZQUN4QixNQUFNO2dCQUFDLG9CQUFvQixDQUFDO2dCQUFHLG9CQUFvQixDQUFDLENBQUM7YUFBQTtRQUN2RCxDQUFDO0lBQ0g7SUFFQSxJQUNFLEdBQ0EsR0FDcUI7UUFDckIsT0FBTyxJQUFJLGVBQWU7WUFDeEIsS0FBSztnQkFBQyxvQkFBb0IsQ0FBQztnQkFBRyxvQkFBb0IsQ0FBQyxDQUFDO2FBQUE7UUFDdEQsQ0FBQztJQUNIO0lBRUEsS0FDRSxHQUNBLEdBQ3FCO1FBQ3JCLE9BQU8sSUFBSSxlQUFlO1lBQ3hCLE1BQU07Z0JBQUMsb0JBQW9CLENBQUM7Z0JBQUcsb0JBQW9CLENBQUMsQ0FBQzthQUFBO1FBQ3ZELENBQUM7SUFDSDtJQUFBO0lBSUEsS0FDRSxHQUNBLEdBQ2U7UUFDZixPQUFPLElBQUksZUFBZTtZQUN4QixNQUFNO2dCQUFDLG9CQUFvQixDQUFDO2dCQUFHLG9CQUFvQixDQUFDLENBQUM7YUFBQTtRQUN2RCxDQUFDO0lBQ0g7SUFFQSxLQUNFLEdBQ0EsR0FDZTtRQUNmLE9BQU8sSUFBSSxlQUFlO1lBQ3hCLE1BQU07Z0JBQUMsb0JBQW9CLENBQUM7Z0JBQUcsb0JBQW9CLENBQUMsQ0FBQzthQUFBO1FBQ3ZELENBQUM7SUFDSDtJQUVBLEtBQ0UsR0FDQSxHQUNlO1FBQ2YsT0FBTyxJQUFJLGVBQWU7WUFDeEIsTUFBTTtnQkFBQyxvQkFBb0IsQ0FBQztnQkFBRyxvQkFBb0IsQ0FBQyxDQUFDO2FBQUE7UUFDdkQsQ0FBQztJQUNIO0lBRUEsS0FDRSxHQUNBLEdBQ2U7UUFDZixPQUFPLElBQUksZUFBZTtZQUN4QixNQUFNO2dCQUFDLG9CQUFvQixDQUFDO2dCQUFHLG9CQUFvQixDQUFDLENBQUM7YUFBQTtRQUN2RCxDQUFDO0lBQ0g7SUFFQSxLQUNFLEdBQ0EsR0FDZTtRQUNmLE9BQU8sSUFBSSxlQUFlO1lBQ3hCLE1BQU07Z0JBQUMsb0JBQW9CLENBQUM7Z0JBQUcsb0JBQW9CLENBQUMsQ0FBQzthQUFBO1FBQ3ZELENBQUM7SUFDSDtJQUVBLEtBQTRCLEdBQXdDO1FBQ2xFLE9BQU8sSUFBSSxlQUFlO1lBQUUsTUFBTSxvQkFBb0IsQ0FBQztRQUFFLENBQUM7SUFDNUQ7SUFBQTtJQUlBLFFBQU8sT0FBK0Q7UUFDcEUsT0FBTyxJQUFJLGVBQWU7WUFBRSxNQUFNLE1BQU0sSUFBSSxtQkFBbUI7UUFBRSxDQUFDO0lBQ3BFO0lBRUEsT0FBTSxPQUErRDtRQUNuRSxPQUFPLElBQUksZUFBZTtZQUFFLEtBQUssTUFBTSxJQUFJLG1CQUFtQjtRQUFFLENBQUM7SUFDbkU7SUFFQSxLQUFJLEdBQW9EO1FBQ3RELE9BQU8sSUFBSSxlQUFlO1lBQUUsTUFBTSxvQkFBb0IsQ0FBQztRQUFFLENBQUM7SUFDNUQ7SUFBQTtJQUdBLE9BQU0sV0FBb0M7UUFDeEMsT0FBTyxJQUFJLGVBQWU7WUFBRSxRQUFRO1FBQVUsQ0FBQztJQUNqRDtBQUNGIiwic291cmNlcyI6WyIvc3JjL3NlcnZlci9pbXBsL2ZpbHRlcl9idWlsZGVyX2ltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSlNPTlZhbHVlLCBWYWx1ZSwgTnVtZXJpY1ZhbHVlIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgY29udmV4T3JVbmRlZmluZWRUb0pzb24gfSBmcm9tIFwiLi4vLi4vdmFsdWVzL3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyBHZW5lcmljVGFibGVJbmZvIH0gZnJvbSBcIi4uL2RhdGFfbW9kZWwuanNcIjtcbmltcG9ydCB7XG4gIEV4cHJlc3Npb24sXG4gIEV4cHJlc3Npb25PclZhbHVlLFxuICBGaWx0ZXJCdWlsZGVyLFxufSBmcm9tIFwiLi4vZmlsdGVyX2J1aWxkZXIuanNcIjtcblxuLy8gVGhlIGBhbnlgIHR5cGUgcGFyYW1ldGVyIGluIGBFeHByZXNzaW9uPGFueT5gIGFsbG93cyB1cyB0byB1c2UgdGhpcyBjbGFzc1xuLy8gaW4gcGxhY2Ugb2YgYW55IGBFeHByZXNzaW9uYCB0eXBlIGluIGBmaWx0ZXJCdWlsZGVySW1wbGAuXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvbkltcGwgZXh0ZW5kcyBFeHByZXNzaW9uPGFueT4ge1xuICBwcml2YXRlIGlubmVyOiBKU09OVmFsdWU7XG4gIGNvbnN0cnVjdG9yKGlubmVyOiBKU09OVmFsdWUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaW5uZXIgPSBpbm5lcjtcbiAgfVxuXG4gIHNlcmlhbGl6ZSgpOiBKU09OVmFsdWUge1xuICAgIHJldHVybiB0aGlzLmlubmVyO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVFeHByZXNzaW9uKFxuICBleHByOiBFeHByZXNzaW9uT3JWYWx1ZTxWYWx1ZSB8IHVuZGVmaW5lZD4sXG4pOiBKU09OVmFsdWUge1xuICBpZiAoZXhwciBpbnN0YW5jZW9mIEV4cHJlc3Npb25JbXBsKSB7XG4gICAgcmV0dXJuIGV4cHIuc2VyaWFsaXplKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQXNzdW1lIHRoYXQgdGhlIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIENvbnZleCB2YWx1ZSwgd2hpY2ggd2UnbGwgc2VyaWFsaXplXG4gICAgLy8gdG8gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uXG4gICAgcmV0dXJuIHsgJGxpdGVyYWw6IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uKGV4cHIgYXMgVmFsdWUgfCB1bmRlZmluZWQpIH07XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGZpbHRlckJ1aWxkZXJJbXBsOiBGaWx0ZXJCdWlsZGVyPEdlbmVyaWNUYWJsZUluZm8+ID0ge1xuICAvLyAgQ29tcGFyaXNvbnMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBlcTxUIGV4dGVuZHMgVmFsdWUgfCB1bmRlZmluZWQ+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRlcTogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildLFxuICAgIH0pO1xuICB9LFxuXG4gIG5lcTxUIGV4dGVuZHMgVmFsdWUgfCB1bmRlZmluZWQ+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRuZXE6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXSxcbiAgICB9KTtcbiAgfSxcblxuICBsdDxUIGV4dGVuZHMgVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRsdDogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildLFxuICAgIH0pO1xuICB9LFxuXG4gIGx0ZTxUIGV4dGVuZHMgVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRsdGU6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXSxcbiAgICB9KTtcbiAgfSxcblxuICBndDxUIGV4dGVuZHMgVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRndDogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildLFxuICAgIH0pO1xuICB9LFxuXG4gIGd0ZTxUIGV4dGVuZHMgVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRndGU6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXSxcbiAgICB9KTtcbiAgfSxcblxuICAvLyAgQXJpdGhtZXRpYyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBhZGQ8VCBleHRlbmRzIE51bWVyaWNWYWx1ZT4oXG4gICAgbDogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICAgcjogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICk6IEV4cHJlc3Npb248VD4ge1xuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoe1xuICAgICAgJGFkZDogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildLFxuICAgIH0pO1xuICB9LFxuXG4gIHN1YjxUIGV4dGVuZHMgTnVtZXJpY1ZhbHVlPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxUPiB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7XG4gICAgICAkc3ViOiBbc2VyaWFsaXplRXhwcmVzc2lvbihsKSwgc2VyaWFsaXplRXhwcmVzc2lvbihyKV0sXG4gICAgfSk7XG4gIH0sXG5cbiAgbXVsPFQgZXh0ZW5kcyBOdW1lcmljVmFsdWU+KFxuICAgIGw6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICAgIHI6IEV4cHJlc3Npb25PclZhbHVlPFQ+LFxuICApOiBFeHByZXNzaW9uPFQ+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRtdWw6IFtzZXJpYWxpemVFeHByZXNzaW9uKGwpLCBzZXJpYWxpemVFeHByZXNzaW9uKHIpXSxcbiAgICB9KTtcbiAgfSxcblxuICBkaXY8VCBleHRlbmRzIE51bWVyaWNWYWx1ZT4oXG4gICAgbDogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICAgcjogRXhwcmVzc2lvbk9yVmFsdWU8VD4sXG4gICk6IEV4cHJlc3Npb248VD4ge1xuICAgIHJldHVybiBuZXcgRXhwcmVzc2lvbkltcGwoe1xuICAgICAgJGRpdjogW3NlcmlhbGl6ZUV4cHJlc3Npb24obCksIHNlcmlhbGl6ZUV4cHJlc3Npb24ocildLFxuICAgIH0pO1xuICB9LFxuXG4gIG1vZDxUIGV4dGVuZHMgTnVtZXJpY1ZhbHVlPihcbiAgICBsOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgICByOiBFeHByZXNzaW9uT3JWYWx1ZTxUPixcbiAgKTogRXhwcmVzc2lvbjxUPiB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7XG4gICAgICAkbW9kOiBbc2VyaWFsaXplRXhwcmVzc2lvbihsKSwgc2VyaWFsaXplRXhwcmVzc2lvbihyKV0sXG4gICAgfSk7XG4gIH0sXG5cbiAgbmVnPFQgZXh0ZW5kcyBOdW1lcmljVmFsdWU+KHg6IEV4cHJlc3Npb25PclZhbHVlPFQ+KTogRXhwcmVzc2lvbjxUPiB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7ICRuZWc6IHNlcmlhbGl6ZUV4cHJlc3Npb24oeCkgfSk7XG4gIH0sXG5cbiAgLy8gIExvZ2ljICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgYW5kKC4uLmV4cHJzOiBBcnJheTxFeHByZXNzaW9uT3JWYWx1ZTxib29sZWFuPj4pOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJGFuZDogZXhwcnMubWFwKHNlcmlhbGl6ZUV4cHJlc3Npb24pIH0pO1xuICB9LFxuXG4gIG9yKC4uLmV4cHJzOiBBcnJheTxFeHByZXNzaW9uT3JWYWx1ZTxib29sZWFuPj4pOiBFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJG9yOiBleHBycy5tYXAoc2VyaWFsaXplRXhwcmVzc2lvbikgfSk7XG4gIH0sXG5cbiAgbm90KHg6IEV4cHJlc3Npb25PclZhbHVlPGJvb2xlYW4+KTogRXhwcmVzc2lvbjxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBFeHByZXNzaW9uSW1wbCh7ICRub3Q6IHNlcmlhbGl6ZUV4cHJlc3Npb24oeCkgfSk7XG4gIH0sXG5cbiAgLy8gIE90aGVyICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIGZpZWxkKGZpZWxkUGF0aDogc3RyaW5nKTogRXhwcmVzc2lvbjxhbnk+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJGZpZWxkOiBmaWVsZFBhdGggfSk7XG4gIH0sXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js":
/*!******************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IndexRangeBuilderImpl: () => (/* binding */ IndexRangeBuilderImpl)\n/* harmony export */ });\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _index_range_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../index_range_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/index_range_builder.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\nclass IndexRangeBuilderImpl extends _index_range_builder_js__WEBPACK_IMPORTED_MODULE_1__.IndexRange {\n    constructor(rangeExpressions){\n        super();\n        __publicField(this, \"rangeExpressions\");\n        __publicField(this, \"isConsumed\");\n        this.rangeExpressions = rangeExpressions;\n        this.isConsumed = false;\n    }\n    static new() {\n        return new IndexRangeBuilderImpl([]);\n    }\n    consume() {\n        if (this.isConsumed) {\n            throw new Error(\"IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes\");\n        }\n        this.isConsumed = true;\n    }\n    eq(fieldName, value) {\n        this.consume();\n        return new IndexRangeBuilderImpl(this.rangeExpressions.concat({\n            type: \"Eq\",\n            fieldPath: fieldName,\n            value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n        }));\n    }\n    gt(fieldName, value) {\n        this.consume();\n        return new IndexRangeBuilderImpl(this.rangeExpressions.concat({\n            type: \"Gt\",\n            fieldPath: fieldName,\n            value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n        }));\n    }\n    gte(fieldName, value) {\n        this.consume();\n        return new IndexRangeBuilderImpl(this.rangeExpressions.concat({\n            type: \"Gte\",\n            fieldPath: fieldName,\n            value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n        }));\n    }\n    lt(fieldName, value) {\n        this.consume();\n        return new IndexRangeBuilderImpl(this.rangeExpressions.concat({\n            type: \"Lt\",\n            fieldPath: fieldName,\n            value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n        }));\n    }\n    lte(fieldName, value) {\n        this.consume();\n        return new IndexRangeBuilderImpl(this.rangeExpressions.concat({\n            type: \"Lte\",\n            fieldPath: fieldName,\n            value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n        }));\n    }\n    export() {\n        this.consume();\n        return this.rangeExpressions;\n    }\n} //# sourceMappingURL=index_range_builder_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL2luZGV4X3JhbmdlX2J1aWxkZXJfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFDd0M7QUFPakM7QUFRQSxNQUFNLDhCQUNILCtEQUFVLENBS3BCO0lBR1UsWUFDTixpQkFDQTtRQUNBLE1BQU07UUFMUixvQkFBUTtRQUNSLG9CQUFRO1FBS04sS0FBSyxtQkFBbUI7UUFDeEIsS0FBSyxhQUFhO0lBQ3BCO0lBRUEsT0FBTyxNQUE2QjtRQUNsQyxPQUFPLElBQUksc0JBQXNCLENBQUMsQ0FBQztJQUNyQztJQUVRLFVBQVU7UUFDaEIsSUFBSSxLQUFLLFlBQVk7WUFDbkIsTUFBTSxJQUFJLE1BQ1I7UUFFSjtRQUNBLEtBQUssYUFBYTtJQUNwQjtJQUVBLEdBQUcsV0FBbUIsT0FBYztRQUNsQyxLQUFLLFFBQVE7UUFDYixPQUFPLElBQUksc0JBQ1QsS0FBSyxpQkFBaUIsT0FBTztZQUMzQixNQUFNO1lBQ04sV0FBVztZQUNYLE9BQU8seUVBQXVCLENBQUMsS0FBSztRQUN0QyxDQUFDO0lBRUw7SUFFQSxHQUFHLFdBQW1CLE9BQWM7UUFDbEMsS0FBSyxRQUFRO1FBQ2IsT0FBTyxJQUFJLHNCQUNULEtBQUssaUJBQWlCLE9BQU87WUFDM0IsTUFBTTtZQUNOLFdBQVc7WUFDWCxPQUFPLHlFQUF1QixDQUFDLEtBQUs7UUFDdEMsQ0FBQztJQUVMO0lBQ0EsSUFBSSxXQUFtQixPQUFjO1FBQ25DLEtBQUssUUFBUTtRQUNiLE9BQU8sSUFBSSxzQkFDVCxLQUFLLGlCQUFpQixPQUFPO1lBQzNCLE1BQU07WUFDTixXQUFXO1lBQ1gsT0FBTyx5RUFBdUIsQ0FBQyxLQUFLO1FBQ3RDLENBQUM7SUFFTDtJQUNBLEdBQUcsV0FBbUIsT0FBYztRQUNsQyxLQUFLLFFBQVE7UUFDYixPQUFPLElBQUksc0JBQ1QsS0FBSyxpQkFBaUIsT0FBTztZQUMzQixNQUFNO1lBQ04sV0FBVztZQUNYLE9BQU8seUVBQXVCLENBQUMsS0FBSztRQUN0QyxDQUFDO0lBRUw7SUFDQSxJQUFJLFdBQW1CLE9BQWM7UUFDbkMsS0FBSyxRQUFRO1FBQ2IsT0FBTyxJQUFJLHNCQUNULEtBQUssaUJBQWlCLE9BQU87WUFDM0IsTUFBTTtZQUNOLFdBQVc7WUFDWCxPQUFPLHlFQUF1QixDQUFDLEtBQUs7UUFDdEMsQ0FBQztJQUVMO0lBRUEsU0FBUztRQUNQLEtBQUssUUFBUTtRQUNiLE9BQU8sS0FBSztJQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIi9zcmMvc2VydmVyL2ltcGwvaW5kZXhfcmFuZ2VfYnVpbGRlcl9pbXBsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEpTT05WYWx1ZSwgVmFsdWUgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBjb252ZXhPclVuZGVmaW5lZFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7IEdlbmVyaWNEb2N1bWVudCwgR2VuZXJpY0luZGV4RmllbGRzIH0gZnJvbSBcIi4uL2RhdGFfbW9kZWwuanNcIjtcbmltcG9ydCB7XG4gIEluZGV4UmFuZ2UsXG4gIEluZGV4UmFuZ2VCdWlsZGVyLFxuICBMb3dlckJvdW5kSW5kZXhSYW5nZUJ1aWxkZXIsXG4gIFVwcGVyQm91bmRJbmRleFJhbmdlQnVpbGRlcixcbn0gZnJvbSBcIi4uL2luZGV4X3JhbmdlX2J1aWxkZXIuanNcIjtcblxuZXhwb3J0IHR5cGUgU2VyaWFsaXplZFJhbmdlRXhwcmVzc2lvbiA9IHtcbiAgdHlwZTogXCJFcVwiIHwgXCJHdFwiIHwgXCJHdGVcIiB8IFwiTHRcIiB8IFwiTHRlXCI7XG4gIGZpZWxkUGF0aDogc3RyaW5nO1xuICB2YWx1ZTogSlNPTlZhbHVlO1xufTtcblxuZXhwb3J0IGNsYXNzIEluZGV4UmFuZ2VCdWlsZGVySW1wbFxuICBleHRlbmRzIEluZGV4UmFuZ2VcbiAgaW1wbGVtZW50c1xuICAgIEluZGV4UmFuZ2VCdWlsZGVyPEdlbmVyaWNEb2N1bWVudCwgR2VuZXJpY0luZGV4RmllbGRzPixcbiAgICBMb3dlckJvdW5kSW5kZXhSYW5nZUJ1aWxkZXI8R2VuZXJpY0RvY3VtZW50LCBzdHJpbmc+LFxuICAgIFVwcGVyQm91bmRJbmRleFJhbmdlQnVpbGRlcjxHZW5lcmljRG9jdW1lbnQsIHN0cmluZz5cbntcbiAgcHJpdmF0ZSByYW5nZUV4cHJlc3Npb25zOiBSZWFkb25seUFycmF5PFNlcmlhbGl6ZWRSYW5nZUV4cHJlc3Npb24+O1xuICBwcml2YXRlIGlzQ29uc3VtZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgY29uc3RydWN0b3IoXG4gICAgcmFuZ2VFeHByZXNzaW9uczogUmVhZG9ubHlBcnJheTxTZXJpYWxpemVkUmFuZ2VFeHByZXNzaW9uPixcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnJhbmdlRXhwcmVzc2lvbnMgPSByYW5nZUV4cHJlc3Npb25zO1xuICAgIHRoaXMuaXNDb25zdW1lZCA9IGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIG5ldygpOiBJbmRleFJhbmdlQnVpbGRlckltcGwge1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFtdKTtcbiAgfVxuXG4gIHByaXZhdGUgY29uc3VtZSgpIHtcbiAgICBpZiAodGhpcy5pc0NvbnN1bWVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiSW5kZXhSYW5nZUJ1aWxkZXIgaGFzIGFscmVhZHkgYmVlbiB1c2VkISBDaGFpbiB5b3VyIG1ldGhvZCBjYWxscyBsaWtlIGBxID0+IHEuZXEoLi4uKS5lcSguLi4pYC4gU2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL2luZGV4ZXNcIixcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuaXNDb25zdW1lZCA9IHRydWU7XG4gIH1cblxuICBlcShmaWVsZE5hbWU6IHN0cmluZywgdmFsdWU6IFZhbHVlKSB7XG4gICAgdGhpcy5jb25zdW1lKCk7XG4gICAgcmV0dXJuIG5ldyBJbmRleFJhbmdlQnVpbGRlckltcGwoXG4gICAgICB0aGlzLnJhbmdlRXhwcmVzc2lvbnMuY29uY2F0KHtcbiAgICAgICAgdHlwZTogXCJFcVwiLFxuICAgICAgICBmaWVsZFBhdGg6IGZpZWxkTmFtZSxcbiAgICAgICAgdmFsdWU6IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uKHZhbHVlKSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBndChmaWVsZE5hbWU6IHN0cmluZywgdmFsdWU6IFZhbHVlKSB7XG4gICAgdGhpcy5jb25zdW1lKCk7XG4gICAgcmV0dXJuIG5ldyBJbmRleFJhbmdlQnVpbGRlckltcGwoXG4gICAgICB0aGlzLnJhbmdlRXhwcmVzc2lvbnMuY29uY2F0KHtcbiAgICAgICAgdHlwZTogXCJHdFwiLFxuICAgICAgICBmaWVsZFBhdGg6IGZpZWxkTmFtZSxcbiAgICAgICAgdmFsdWU6IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uKHZhbHVlKSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cbiAgZ3RlKGZpZWxkTmFtZTogc3RyaW5nLCB2YWx1ZTogVmFsdWUpIHtcbiAgICB0aGlzLmNvbnN1bWUoKTtcbiAgICByZXR1cm4gbmV3IEluZGV4UmFuZ2VCdWlsZGVySW1wbChcbiAgICAgIHRoaXMucmFuZ2VFeHByZXNzaW9ucy5jb25jYXQoe1xuICAgICAgICB0eXBlOiBcIkd0ZVwiLFxuICAgICAgICBmaWVsZFBhdGg6IGZpZWxkTmFtZSxcbiAgICAgICAgdmFsdWU6IGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uKHZhbHVlKSxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cbiAgbHQoZmllbGROYW1lOiBzdHJpbmcsIHZhbHVlOiBWYWx1ZSkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiBuZXcgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKFxuICAgICAgdGhpcy5yYW5nZUV4cHJlc3Npb25zLmNvbmNhdCh7XG4gICAgICAgIHR5cGU6IFwiTHRcIixcbiAgICAgICAgZmllbGRQYXRoOiBmaWVsZE5hbWUsXG4gICAgICAgIHZhbHVlOiBjb252ZXhPclVuZGVmaW5lZFRvSnNvbih2YWx1ZSksXG4gICAgICB9KSxcbiAgICApO1xuICB9XG4gIGx0ZShmaWVsZE5hbWU6IHN0cmluZywgdmFsdWU6IFZhbHVlKSB7XG4gICAgdGhpcy5jb25zdW1lKCk7XG4gICAgcmV0dXJuIG5ldyBJbmRleFJhbmdlQnVpbGRlckltcGwoXG4gICAgICB0aGlzLnJhbmdlRXhwcmVzc2lvbnMuY29uY2F0KHtcbiAgICAgICAgdHlwZTogXCJMdGVcIixcbiAgICAgICAgZmllbGRQYXRoOiBmaWVsZE5hbWUsXG4gICAgICAgIHZhbHVlOiBjb252ZXhPclVuZGVmaW5lZFRvSnNvbih2YWx1ZSksXG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgZXhwb3J0KCkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiB0aGlzLnJhbmdlRXhwcmVzc2lvbnM7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js":
/*!****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/query_impl.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryImpl: () => (/* binding */ QueryImpl),\n/* harmony export */   QueryInitializerImpl: () => (/* binding */ QueryInitializerImpl)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filter_builder_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/filter_builder_impl.js\");\n/* harmony import */ var _index_range_builder_impl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index_range_builder_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/index_range_builder_impl.js\");\n/* harmony import */ var _search_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./search_filter_builder_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\n\n\nconst MAX_QUERY_OPERATORS = 256;\nclass QueryInitializerImpl {\n    constructor(tableName){\n        __publicField(this, \"tableName\");\n        this.tableName = tableName;\n    }\n    withIndex(indexName, indexRange) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(indexName, 1, \"withIndex\", \"indexName\");\n        let rangeBuilder = _index_range_builder_impl_js__WEBPACK_IMPORTED_MODULE_3__.IndexRangeBuilderImpl.new();\n        if (indexRange !== void 0) {\n            rangeBuilder = indexRange(rangeBuilder);\n        }\n        return new QueryImpl({\n            source: {\n                type: \"IndexRange\",\n                indexName: this.tableName + \".\" + indexName,\n                range: rangeBuilder.export(),\n                order: null\n            },\n            operators: []\n        });\n    }\n    withSearchIndex(indexName, searchFilter) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(indexName, 1, \"withSearchIndex\", \"indexName\");\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(searchFilter, 2, \"withSearchIndex\", \"searchFilter\");\n        const searchFilterBuilder = _search_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_4__.SearchFilterBuilderImpl.new();\n        return new QueryImpl({\n            source: {\n                type: \"Search\",\n                indexName: this.tableName + \".\" + indexName,\n                filters: searchFilter(searchFilterBuilder).export()\n            },\n            operators: []\n        });\n    }\n    fullTableScan() {\n        return new QueryImpl({\n            source: {\n                type: \"FullTableScan\",\n                tableName: this.tableName,\n                order: null\n            },\n            operators: []\n        });\n    }\n    order(order) {\n        return this.fullTableScan().order(order);\n    }\n    // This is internal API and should not be exposed to developers yet.\n    async count() {\n        const syscallJSON = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/count\", {\n            table: this.tableName\n        });\n        const syscallResult = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(syscallJSON);\n        return syscallResult;\n    }\n    filter(predicate) {\n        return this.fullTableScan().filter(predicate);\n    }\n    limit(n) {\n        return this.fullTableScan().limit(n);\n    }\n    collect() {\n        return this.fullTableScan().collect();\n    }\n    take(n) {\n        return this.fullTableScan().take(n);\n    }\n    paginate(paginationOpts) {\n        return this.fullTableScan().paginate(paginationOpts);\n    }\n    first() {\n        return this.fullTableScan().first();\n    }\n    unique() {\n        return this.fullTableScan().unique();\n    }\n    [Symbol.asyncIterator]() {\n        return this.fullTableScan()[Symbol.asyncIterator]();\n    }\n}\nfunction throwClosedError(type) {\n    throw new Error(type === \"consumed\" ? \"This query is closed and can't emit any more values.\" : \"This query has been chained with another operator and can't be reused.\");\n}\nclass QueryImpl {\n    constructor(query){\n        __publicField(this, \"state\");\n        __publicField(this, \"tableNameForErrorMessages\");\n        this.state = {\n            type: \"preparing\",\n            query\n        };\n        if (query.source.type === \"FullTableScan\") {\n            this.tableNameForErrorMessages = query.source.tableName;\n        } else {\n            this.tableNameForErrorMessages = query.source.indexName.split(\".\")[0];\n        }\n    }\n    takeQuery() {\n        if (this.state.type !== \"preparing\") {\n            throw new Error(\"A query can only be chained once and can't be chained after iteration begins.\");\n        }\n        const query = this.state.query;\n        this.state = {\n            type: \"closed\"\n        };\n        return query;\n    }\n    startQuery() {\n        if (this.state.type === \"executing\") {\n            throw new Error(\"Iteration can only begin on a query once.\");\n        }\n        if (this.state.type === \"closed\" || this.state.type === \"consumed\") {\n            throwClosedError(this.state.type);\n        }\n        const query = this.state.query;\n        const { queryId } = (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performSyscall)(\"1.0/queryStream\", {\n            query,\n            version: _index_js__WEBPACK_IMPORTED_MODULE_6__.version\n        });\n        this.state = {\n            type: \"executing\",\n            queryId\n        };\n        return queryId;\n    }\n    closeQuery() {\n        if (this.state.type === \"executing\") {\n            const queryId = this.state.queryId;\n            (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performSyscall)(\"1.0/queryCleanup\", {\n                queryId\n            });\n        }\n        this.state = {\n            type: \"consumed\"\n        };\n    }\n    order(order) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(order, 1, \"order\", \"order\");\n        const query = this.takeQuery();\n        if (query.source.type === \"Search\") {\n            throw new Error(\"Search queries must always be in relevance order. Can not set order manually.\");\n        }\n        if (query.source.order !== null) {\n            throw new Error(\"Queries may only specify order at most once\");\n        }\n        query.source.order = order;\n        return new QueryImpl(query);\n    }\n    filter(predicate) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(predicate, 1, \"filter\", \"predicate\");\n        const query = this.takeQuery();\n        if (query.operators.length >= MAX_QUERY_OPERATORS) {\n            throw new Error(`Can't construct query with more than ${MAX_QUERY_OPERATORS} operators`);\n        }\n        query.operators.push({\n            filter: (0,_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_2__.serializeExpression)(predicate(_filter_builder_impl_js__WEBPACK_IMPORTED_MODULE_2__.filterBuilderImpl))\n        });\n        return new QueryImpl(query);\n    }\n    limit(n) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(n, 1, \"limit\", \"n\");\n        const query = this.takeQuery();\n        query.operators.push({\n            limit: n\n        });\n        return new QueryImpl(query);\n    }\n    [Symbol.asyncIterator]() {\n        this.startQuery();\n        return this;\n    }\n    async next() {\n        if (this.state.type === \"closed\" || this.state.type === \"consumed\") {\n            throwClosedError(this.state.type);\n        }\n        const queryId = this.state.type === \"preparing\" ? this.startQuery() : this.state.queryId;\n        const { value, done } = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/queryStreamNext\", {\n            queryId\n        });\n        if (done) {\n            this.closeQuery();\n        }\n        const convexValue = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(value);\n        return {\n            value: convexValue,\n            done\n        };\n    }\n    return() {\n        this.closeQuery();\n        return Promise.resolve({\n            done: true,\n            value: void 0\n        });\n    }\n    async paginate(paginationOpts) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(paginationOpts, 1, \"paginate\", \"options\");\n        if (typeof paginationOpts?.numItems !== \"number\" || paginationOpts.numItems < 0) {\n            throw new Error(`\\`options.numItems\\` must be a positive number. Received \\`${paginationOpts?.numItems}\\`.`);\n        }\n        const query = this.takeQuery();\n        const pageSize = paginationOpts.numItems;\n        const cursor = paginationOpts.cursor;\n        const endCursor = paginationOpts?.endCursor ?? null;\n        const maximumRowsRead = paginationOpts.maximumRowsRead ?? null;\n        const { page, isDone, continueCursor, splitCursor, pageStatus } = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/queryPage\", {\n            query,\n            cursor,\n            endCursor,\n            pageSize,\n            maximumRowsRead,\n            maximumBytesRead: paginationOpts.maximumBytesRead,\n            version: _index_js__WEBPACK_IMPORTED_MODULE_6__.version\n        });\n        return {\n            page: page.map((json)=>(0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(json)),\n            isDone,\n            continueCursor,\n            splitCursor,\n            pageStatus\n        };\n    }\n    async collect() {\n        const out = [];\n        for await (const item of this){\n            out.push(item);\n        }\n        return out;\n    }\n    async take(n) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArg)(n, 1, \"take\", \"n\");\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_5__.validateArgIsNonNegativeInteger)(n, 1, \"take\", \"n\");\n        return this.limit(n).collect();\n    }\n    async first() {\n        const first_array = await this.take(1);\n        return first_array.length === 0 ? null : first_array[0];\n    }\n    async unique() {\n        const first_two_array = await this.take(2);\n        if (first_two_array.length === 0) {\n            return null;\n        }\n        if (first_two_array.length === 2) {\n            throw new Error(`unique() query returned more than one result from table ${this.tableNameForErrorMessages}:\n [${first_two_array[0]._id}, ${first_two_array[1]._id}, ...]`);\n        }\n        return first_two_array[0];\n    }\n} //# sourceMappingURL=query_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3F1ZXJ5X2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBRUs7QUFJN0M7QUFPQTtBQUlBO0FBQ3NEO0FBQ3JDO0FBRXhCLE1BQU0sc0JBQXNCO0FBc0JyQixNQUFNLHFCQUViO0lBR0UsWUFBWSxVQUFtQjtRQUYvQixvQkFBUTtRQUdOLEtBQUssWUFBWTtJQUNuQjtJQUVBLFVBQ0UsV0FDQSxZQUNXO1FBQ1gseURBQVcsQ0FBQyxXQUFXLEdBQUcsYUFBYSxXQUFXO1FBQ2xELElBQUksZUFBZSwrRUFBcUIsQ0FBQyxJQUFJO1FBQzdDLElBQUksZUFBZSxRQUFXO1lBQzVCLGVBQWUsV0FBVyxZQUFZO1FBQ3hDO1FBQ0EsT0FBTyxJQUFJLFVBQVU7WUFDbkIsUUFBUTtnQkFDTixNQUFNO2dCQUNOLFdBQVcsS0FBSyxZQUFZLE1BQU07Z0JBQ2xDLE9BQU8sYUFBYSxPQUFPO2dCQUMzQixPQUFPO1lBQ1Q7WUFDQSxXQUFXLENBQUM7UUFDZCxDQUFDO0lBQ0g7SUFFQSxnQkFDRSxXQUNBLGNBQ1c7UUFDWCx5REFBVyxDQUFDLFdBQVcsR0FBRyxtQkFBbUIsV0FBVztRQUN4RCx5REFBVyxDQUFDLGNBQWMsR0FBRyxtQkFBbUIsY0FBYztRQUM5RCxNQUFNLHNCQUFzQixtRkFBdUIsQ0FBQyxJQUFJO1FBQ3hELE9BQU8sSUFBSSxVQUFVO1lBQ25CLFFBQVE7Z0JBQ04sTUFBTTtnQkFDTixXQUFXLEtBQUssWUFBWSxNQUFNO2dCQUNsQyxTQUFTLGFBQWEsbUJBQW1CLEVBQUUsT0FBTztZQUNwRDtZQUNBLFdBQVcsQ0FBQztRQUNkLENBQUM7SUFDSDtJQUVBLGdCQUEyQjtRQUN6QixPQUFPLElBQUksVUFBVTtZQUNuQixRQUFRO2dCQUNOLE1BQU07Z0JBQ04sV0FBVyxLQUFLO2dCQUNoQixPQUFPO1lBQ1Q7WUFDQSxXQUFXLENBQUM7UUFDZCxDQUFD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QUNoQyxPQUFPO1FBQ1Q7UUFDQSxJQUFJLGdCQUFnQixXQUFXLEdBQUc7WUFDaEMsTUFBTSxJQUFJLE1BQU0sMkRBQTJELEtBQUsseUJBQXlCO0VBQUEsRUFDM0csZ0JBQWdCLENBQUMsRUFBRSxHQUFHLEtBQUssZ0JBQWdCLENBQUMsRUFBRSxHQUFHLFFBQVE7UUFDekQ7UUFDQSxPQUFPLGdCQUFnQixDQUFDO0lBQzFCO0FBQ0YiLCJzb3VyY2VzIjpbIi9zcmMvc2VydmVyL2ltcGwvcXVlcnlfaW1wbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWx1ZSwgSlNPTlZhbHVlLCBqc29uVG9Db252ZXggfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBQYWdpbmF0aW9uUmVzdWx0LCBQYWdpbmF0aW9uT3B0aW9ucyB9IGZyb20gXCIuLi9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBwZXJmb3JtQXN5bmNTeXNjYWxsLCBwZXJmb3JtU3lzY2FsbCB9IGZyb20gXCIuL3N5c2NhbGwuanNcIjtcbmltcG9ydCB7XG4gIGZpbHRlckJ1aWxkZXJJbXBsLFxuICBzZXJpYWxpemVFeHByZXNzaW9uLFxufSBmcm9tIFwiLi9maWx0ZXJfYnVpbGRlcl9pbXBsLmpzXCI7XG5pbXBvcnQgeyBRdWVyeSwgUXVlcnlJbml0aWFsaXplciB9IGZyb20gXCIuLi9xdWVyeS5qc1wiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbk9yVmFsdWUsIEZpbHRlckJ1aWxkZXIgfSBmcm9tIFwiLi4vZmlsdGVyX2J1aWxkZXIuanNcIjtcbmltcG9ydCB7IEdlbmVyaWNUYWJsZUluZm8gfSBmcm9tIFwiLi4vZGF0YV9tb2RlbC5qc1wiO1xuaW1wb3J0IHtcbiAgSW5kZXhSYW5nZUJ1aWxkZXJJbXBsLFxuICBTZXJpYWxpemVkUmFuZ2VFeHByZXNzaW9uLFxufSBmcm9tIFwiLi9pbmRleF9yYW5nZV9idWlsZGVyX2ltcGwuanNcIjtcbmltcG9ydCB7XG4gIFNlYXJjaEZpbHRlckJ1aWxkZXJJbXBsLFxuICBTZXJpYWxpemVkU2VhcmNoRmlsdGVyLFxufSBmcm9tIFwiLi9zZWFyY2hfZmlsdGVyX2J1aWxkZXJfaW1wbC5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVBcmcsIHZhbGlkYXRlQXJnSXNOb25OZWdhdGl2ZUludGVnZXIgfSBmcm9tIFwiLi92YWxpZGF0ZS5qc1wiO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuLi8uLi9pbmRleC5qc1wiO1xuXG5jb25zdCBNQVhfUVVFUllfT1BFUkFUT1JTID0gMjU2O1xuXG50eXBlIFF1ZXJ5T3BlcmF0b3IgPSB7IGZpbHRlcjogSlNPTlZhbHVlIH0gfCB7IGxpbWl0OiBudW1iZXIgfTtcbnR5cGUgU291cmNlID1cbiAgfCB7IHR5cGU6IFwiRnVsbFRhYmxlU2NhblwiOyB0YWJsZU5hbWU6IHN0cmluZzsgb3JkZXI6IFwiYXNjXCIgfCBcImRlc2NcIiB8IG51bGwgfVxuICB8IHtcbiAgICAgIHR5cGU6IFwiSW5kZXhSYW5nZVwiO1xuICAgICAgaW5kZXhOYW1lOiBzdHJpbmc7XG4gICAgICByYW5nZTogUmVhZG9ubHlBcnJheTxTZXJpYWxpemVkUmFuZ2VFeHByZXNzaW9uPjtcbiAgICAgIG9yZGVyOiBcImFzY1wiIHwgXCJkZXNjXCIgfCBudWxsO1xuICAgIH1cbiAgfCB7XG4gICAgICB0eXBlOiBcIlNlYXJjaFwiO1xuICAgICAgaW5kZXhOYW1lOiBzdHJpbmc7XG4gICAgICBmaWx0ZXJzOiBSZWFkb25seUFycmF5PFNlcmlhbGl6ZWRTZWFyY2hGaWx0ZXI+O1xuICAgIH07XG5cbnR5cGUgU2VyaWFsaXplZFF1ZXJ5ID0ge1xuICBzb3VyY2U6IFNvdXJjZTtcbiAgb3BlcmF0b3JzOiBBcnJheTxRdWVyeU9wZXJhdG9yPjtcbn07XG5cbmV4cG9ydCBjbGFzcyBRdWVyeUluaXRpYWxpemVySW1wbFxuICBpbXBsZW1lbnRzIFF1ZXJ5SW5pdGlhbGl6ZXI8R2VuZXJpY1RhYmxlSW5mbz5cbntcbiAgcHJpdmF0ZSB0YWJsZU5hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih0YWJsZU5hbWU6IHN0cmluZykge1xuICAgIHRoaXMudGFibGVOYW1lID0gdGFibGVOYW1lO1xuICB9XG5cbiAgd2l0aEluZGV4KFxuICAgIGluZGV4TmFtZTogc3RyaW5nLFxuICAgIGluZGV4UmFuZ2U/OiAocTogSW5kZXhSYW5nZUJ1aWxkZXJJbXBsKSA9PiBJbmRleFJhbmdlQnVpbGRlckltcGwsXG4gICk6IFF1ZXJ5SW1wbCB7XG4gICAgdmFsaWRhdGVBcmcoaW5kZXhOYW1lLCAxLCBcIndpdGhJbmRleFwiLCBcImluZGV4TmFtZVwiKTtcbiAgICBsZXQgcmFuZ2VCdWlsZGVyID0gSW5kZXhSYW5nZUJ1aWxkZXJJbXBsLm5ldygpO1xuICAgIGlmIChpbmRleFJhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJhbmdlQnVpbGRlciA9IGluZGV4UmFuZ2UocmFuZ2VCdWlsZGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBRdWVyeUltcGwoe1xuICAgICAgc291cmNlOiB7XG4gICAgICAgIHR5cGU6IFwiSW5kZXhSYW5nZVwiLFxuICAgICAgICBpbmRleE5hbWU6IHRoaXMudGFibGVOYW1lICsgXCIuXCIgKyBpbmRleE5hbWUsXG4gICAgICAgIHJhbmdlOiByYW5nZUJ1aWxkZXIuZXhwb3J0KCksXG4gICAgICAgIG9yZGVyOiBudWxsLFxuICAgICAgfSxcbiAgICAgIG9wZXJhdG9yczogW10sXG4gICAgfSk7XG4gIH1cblxuICB3aXRoU2VhcmNoSW5kZXgoXG4gICAgaW5kZXhOYW1lOiBzdHJpbmcsXG4gICAgc2VhcmNoRmlsdGVyOiAocTogU2VhcmNoRmlsdGVyQnVpbGRlckltcGwpID0+IFNlYXJjaEZpbHRlckJ1aWxkZXJJbXBsLFxuICApOiBRdWVyeUltcGwge1xuICAgIHZhbGlkYXRlQXJnKGluZGV4TmFtZSwgMSwgXCJ3aXRoU2VhcmNoSW5kZXhcIiwgXCJpbmRleE5hbWVcIik7XG4gICAgdmFsaWRhdGVBcmcoc2VhcmNoRmlsdGVyLCAyLCBcIndpdGhTZWFyY2hJbmRleFwiLCBcInNlYXJjaEZpbHRlclwiKTtcbiAgICBjb25zdCBzZWFyY2hGaWx0ZXJCdWlsZGVyID0gU2VhcmNoRmlsdGVyQnVpbGRlckltcGwubmV3KCk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUltcGwoe1xuICAgICAgc291cmNlOiB7XG4gICAgICAgIHR5cGU6IFwiU2VhcmNoXCIsXG4gICAgICAgIGluZGV4TmFtZTogdGhpcy50YWJsZU5hbWUgKyBcIi5cIiArIGluZGV4TmFtZSxcbiAgICAgICAgZmlsdGVyczogc2VhcmNoRmlsdGVyKHNlYXJjaEZpbHRlckJ1aWxkZXIpLmV4cG9ydCgpLFxuICAgICAgfSxcbiAgICAgIG9wZXJhdG9yczogW10sXG4gICAgfSk7XG4gIH1cblxuICBmdWxsVGFibGVTY2FuKCk6IFF1ZXJ5SW1wbCB7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUltcGwoe1xuICAgICAgc291cmNlOiB7XG4gICAgICAgIHR5cGU6IFwiRnVsbFRhYmxlU2NhblwiLFxuICAgICAgICB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lLFxuICAgICAgICBvcmRlcjogbnVsbCxcbiAgICAgIH0sXG4gICAgICBvcGVyYXRvcnM6IFtdLFxuICAgIH0pO1xuICB9XG5cbiAgb3JkZXIob3JkZXI6IFwiYXNjXCIgfCBcImRlc2NcIik6IFF1ZXJ5SW1wbCB7XG4gICAgcmV0dXJuIHRoaXMuZnVsbFRhYmxlU2NhbigpLm9yZGVyKG9yZGVyKTtcbiAgfVxuXG4gIC8vIFRoaXMgaXMgaW50ZXJuYWwgQVBJIGFuZCBzaG91bGQgbm90IGJlIGV4cG9zZWQgdG8gZGV2ZWxvcGVycyB5ZXQuXG4gIGFzeW5jIGNvdW50KCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgY29uc3Qgc3lzY2FsbEpTT04gPSBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2NvdW50XCIsIHtcbiAgICAgIHRhYmxlOiB0aGlzLnRhYmxlTmFtZSxcbiAgICB9KTtcbiAgICBjb25zdCBzeXNjYWxsUmVzdWx0ID0ganNvblRvQ29udmV4KHN5c2NhbGxKU09OKSBhcyBudW1iZXI7XG4gICAgcmV0dXJuIHN5c2NhbGxSZXN1bHQ7XG4gIH1cblxuICBmaWx0ZXIoXG4gICAgcHJlZGljYXRlOiAoXG4gICAgICBxOiBGaWx0ZXJCdWlsZGVyPEdlbmVyaWNUYWJsZUluZm8+LFxuICAgICkgPT4gRXhwcmVzc2lvbk9yVmFsdWU8Ym9vbGVhbj4sXG4gICkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS5maWx0ZXIocHJlZGljYXRlKTtcbiAgfVxuXG4gIGxpbWl0KG46IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS5saW1pdChuKTtcbiAgfVxuXG4gIGNvbGxlY3QoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS5jb2xsZWN0KCk7XG4gIH1cblxuICB0YWtlKG46IG51bWJlcik6IFByb21pc2U8QXJyYXk8YW55Pj4ge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS50YWtlKG4pO1xuICB9XG5cbiAgcGFnaW5hdGUocGFnaW5hdGlvbk9wdHM6IFBhZ2luYXRpb25PcHRpb25zKTogUHJvbWlzZTxQYWdpbmF0aW9uUmVzdWx0PGFueT4+IHtcbiAgICByZXR1cm4gdGhpcy5mdWxsVGFibGVTY2FuKCkucGFnaW5hdGUocGFnaW5hdGlvbk9wdHMpO1xuICB9XG5cbiAgZmlyc3QoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5mdWxsVGFibGVTY2FuKCkuZmlyc3QoKTtcbiAgfVxuXG4gIHVuaXF1ZSgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKS51bmlxdWUoKTtcbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmZ1bGxUYWJsZVNjYW4oKVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB0eXBlIFdoZXRoZXIgdGhlIHF1ZXJ5IHdhcyBjb25zdW1lZCBvciBjbG9zZWQuXG4gKiBAdGhyb3dzIEFuIGVycm9yIGluZGljYXRpbmcgdGhlIHF1ZXJ5IGhhcyBiZWVuIGNsb3NlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dDbG9zZWRFcnJvcih0eXBlOiBcImNsb3NlZFwiIHwgXCJjb25zdW1lZFwiKTogbmV2ZXIge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgdHlwZSA9PT0gXCJjb25zdW1lZFwiXG4gICAgICA/IFwiVGhpcyBxdWVyeSBpcyBjbG9zZWQgYW5kIGNhbid0IGVtaXQgYW55IG1vcmUgdmFsdWVzLlwiXG4gICAgICA6IFwiVGhpcyBxdWVyeSBoYXMgYmVlbiBjaGFpbmVkIHdpdGggYW5vdGhlciBvcGVyYXRvciBhbmQgY2FuJ3QgYmUgcmV1c2VkLlwiLFxuICApO1xufVxuXG5leHBvcnQgY2xhc3MgUXVlcnlJbXBsIGltcGxlbWVudHMgUXVlcnk8R2VuZXJpY1RhYmxlSW5mbz4ge1xuICBwcml2YXRlIHN0YXRlOlxuICAgIHwgeyB0eXBlOiBcInByZXBhcmluZ1wiOyBxdWVyeTogU2VyaWFsaXplZFF1ZXJ5IH1cbiAgICB8IHsgdHlwZTogXCJleGVjdXRpbmdcIjsgcXVlcnlJZDogbnVtYmVyIH1cbiAgICB8IHsgdHlwZTogXCJjbG9zZWRcIiB9XG4gICAgfCB7IHR5cGU6IFwiY29uc3VtZWRcIiB9O1xuICBwcml2YXRlIHRhYmxlTmFtZUZvckVycm9yTWVzc2FnZXM6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihxdWVyeTogU2VyaWFsaXplZFF1ZXJ5KSB7XG4gICAgdGhpcy5zdGF0ZSA9IHsgdHlwZTogXCJwcmVwYXJpbmdcIiwgcXVlcnkgfTtcbiAgICBpZiAocXVlcnkuc291cmNlLnR5cGUgPT09IFwiRnVsbFRhYmxlU2NhblwiKSB7XG4gICAgICB0aGlzLnRhYmxlTmFtZUZvckVycm9yTWVzc2FnZXMgPSBxdWVyeS5zb3VyY2UudGFibGVOYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhYmxlTmFtZUZvckVycm9yTWVzc2FnZXMgPSBxdWVyeS5zb3VyY2UuaW5kZXhOYW1lLnNwbGl0KFwiLlwiKVswXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRha2VRdWVyeSgpOiBTZXJpYWxpemVkUXVlcnkge1xuICAgIGlmICh0aGlzLnN0YXRlLnR5cGUgIT09IFwicHJlcGFyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJBIHF1ZXJ5IGNhbiBvbmx5IGJlIGNoYWluZWQgb25jZSBhbmQgY2FuJ3QgYmUgY2hhaW5lZCBhZnRlciBpdGVyYXRpb24gYmVnaW5zLlwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnN0YXRlLnF1ZXJ5O1xuICAgIHRoaXMuc3RhdGUgPSB7IHR5cGU6IFwiY2xvc2VkXCIgfTtcbiAgICByZXR1cm4gcXVlcnk7XG4gIH1cblxuICBwcml2YXRlIHN0YXJ0UXVlcnkoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5zdGF0ZS50eXBlID09PSBcImV4ZWN1dGluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdGVyYXRpb24gY2FuIG9ubHkgYmVnaW4gb24gYSBxdWVyeSBvbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUudHlwZSA9PT0gXCJjbG9zZWRcIiB8fCB0aGlzLnN0YXRlLnR5cGUgPT09IFwiY29uc3VtZWRcIikge1xuICAgICAgdGhyb3dDbG9zZWRFcnJvcih0aGlzLnN0YXRlLnR5cGUpO1xuICAgIH1cbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuc3RhdGUucXVlcnk7XG4gICAgY29uc3QgeyBxdWVyeUlkIH0gPSBwZXJmb3JtU3lzY2FsbChcIjEuMC9xdWVyeVN0cmVhbVwiLCB7IHF1ZXJ5LCB2ZXJzaW9uIH0pO1xuICAgIHRoaXMuc3RhdGUgPSB7IHR5cGU6IFwiZXhlY3V0aW5nXCIsIHF1ZXJ5SWQgfTtcbiAgICByZXR1cm4gcXVlcnlJZDtcbiAgfVxuXG4gIHByaXZhdGUgY2xvc2VRdWVyeSgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS50eXBlID09PSBcImV4ZWN1dGluZ1wiKSB7XG4gICAgICBjb25zdCBxdWVyeUlkID0gdGhpcy5zdGF0ZS5xdWVyeUlkO1xuICAgICAgcGVyZm9ybVN5c2NhbGwoXCIxLjAvcXVlcnlDbGVhbnVwXCIsIHsgcXVlcnlJZCB9KTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZSA9IHsgdHlwZTogXCJjb25zdW1lZFwiIH07XG4gIH1cblxuICBvcmRlcihvcmRlcjogXCJhc2NcIiB8IFwiZGVzY1wiKTogUXVlcnlJbXBsIHtcbiAgICB2YWxpZGF0ZUFyZyhvcmRlciwgMSwgXCJvcmRlclwiLCBcIm9yZGVyXCIpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy50YWtlUXVlcnkoKTtcbiAgICBpZiAocXVlcnkuc291cmNlLnR5cGUgPT09IFwiU2VhcmNoXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJTZWFyY2ggcXVlcmllcyBtdXN0IGFsd2F5cyBiZSBpbiByZWxldmFuY2Ugb3JkZXIuIENhbiBub3Qgc2V0IG9yZGVyIG1hbnVhbGx5LlwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHF1ZXJ5LnNvdXJjZS5vcmRlciAhPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUXVlcmllcyBtYXkgb25seSBzcGVjaWZ5IG9yZGVyIGF0IG1vc3Qgb25jZVwiKTtcbiAgICB9XG4gICAgcXVlcnkuc291cmNlLm9yZGVyID0gb3JkZXI7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkpO1xuICB9XG5cbiAgZmlsdGVyKFxuICAgIHByZWRpY2F0ZTogKFxuICAgICAgcTogRmlsdGVyQnVpbGRlcjxHZW5lcmljVGFibGVJbmZvPixcbiAgICApID0+IEV4cHJlc3Npb25PclZhbHVlPGJvb2xlYW4+LFxuICApOiBhbnkge1xuICAgIHZhbGlkYXRlQXJnKHByZWRpY2F0ZSwgMSwgXCJmaWx0ZXJcIiwgXCJwcmVkaWNhdGVcIik7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnRha2VRdWVyeSgpO1xuICAgIGlmIChxdWVyeS5vcGVyYXRvcnMubGVuZ3RoID49IE1BWF9RVUVSWV9PUEVSQVRPUlMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYENhbid0IGNvbnN0cnVjdCBxdWVyeSB3aXRoIG1vcmUgdGhhbiAke01BWF9RVUVSWV9PUEVSQVRPUlN9IG9wZXJhdG9yc2AsXG4gICAgICApO1xuICAgIH1cbiAgICBxdWVyeS5vcGVyYXRvcnMucHVzaCh7XG4gICAgICBmaWx0ZXI6IHNlcmlhbGl6ZUV4cHJlc3Npb24ocHJlZGljYXRlKGZpbHRlckJ1aWxkZXJJbXBsKSksXG4gICAgfSk7XG4gICAgcmV0dXJuIG5ldyBRdWVyeUltcGwocXVlcnkpO1xuICB9XG5cbiAgbGltaXQobjogbnVtYmVyKTogYW55IHtcbiAgICB2YWxpZGF0ZUFyZyhuLCAxLCBcImxpbWl0XCIsIFwiblwiKTtcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMudGFrZVF1ZXJ5KCk7XG4gICAgcXVlcnkub3BlcmF0b3JzLnB1c2goeyBsaW1pdDogbiB9KTtcbiAgICByZXR1cm4gbmV3IFF1ZXJ5SW1wbChxdWVyeSk7XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxhbnk+IHtcbiAgICB0aGlzLnN0YXJ0UXVlcnkoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGFzeW5jIG5leHQoKTogUHJvbWlzZTxJdGVyYXRvclJlc3VsdDxhbnk+PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUudHlwZSA9PT0gXCJjbG9zZWRcIiB8fCB0aGlzLnN0YXRlLnR5cGUgPT09IFwiY29uc3VtZWRcIikge1xuICAgICAgdGhyb3dDbG9zZWRFcnJvcih0aGlzLnN0YXRlLnR5cGUpO1xuICAgIH1cbiAgICAvLyBBbGxvdyBjYWxsaW5nIGAubmV4dCgpYCB3aGVuIHRoZSBxdWVyeSBpcyBpbiBcInByZXBhcmluZ1wiIHN0YXRlIHRvIGltcGxpY2l0bHkgc3RhcnQgdGhlXG4gICAgLy8gcXVlcnkuIFRoaXMgYWxsb3dzIHRoZSBkZXZlbG9wZXIgdG8gY2FsbCBgLm5leHQoKWAgb24gdGhlIHF1ZXJ5IHdpdGhvdXQgaGF2aW5nIHRvIHVzZVxuICAgIC8vIGEgYGZvciBhd2FpdGAgc3RhdGVtZW50LlxuICAgIGNvbnN0IHF1ZXJ5SWQgPVxuICAgICAgdGhpcy5zdGF0ZS50eXBlID09PSBcInByZXBhcmluZ1wiID8gdGhpcy5zdGFydFF1ZXJ5KCkgOiB0aGlzLnN0YXRlLnF1ZXJ5SWQ7XG4gICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9xdWVyeVN0cmVhbU5leHRcIiwge1xuICAgICAgcXVlcnlJZCxcbiAgICB9KTtcbiAgICBpZiAoZG9uZSkge1xuICAgICAgdGhpcy5jbG9zZVF1ZXJ5KCk7XG4gICAgfVxuICAgIGNvbnN0IGNvbnZleFZhbHVlID0ganNvblRvQ29udmV4KHZhbHVlKTtcbiAgICByZXR1cm4geyB2YWx1ZTogY29udmV4VmFsdWUsIGRvbmUgfTtcbiAgfVxuXG4gIHJldHVybigpIHtcbiAgICB0aGlzLmNsb3NlUXVlcnkoKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9KTtcbiAgfVxuXG4gIGFzeW5jIHBhZ2luYXRlKFxuICAgIHBhZ2luYXRpb25PcHRzOiBQYWdpbmF0aW9uT3B0aW9ucyxcbiAgKTogUHJvbWlzZTxQYWdpbmF0aW9uUmVzdWx0PGFueT4+IHtcbiAgICB2YWxpZGF0ZUFyZyhwYWdpbmF0aW9uT3B0cywgMSwgXCJwYWdpbmF0ZVwiLCBcIm9wdGlvbnNcIik7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHBhZ2luYXRpb25PcHRzPy5udW1JdGVtcyAhPT0gXCJudW1iZXJcIiB8fFxuICAgICAgcGFnaW5hdGlvbk9wdHMubnVtSXRlbXMgPCAwXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBcXGBvcHRpb25zLm51bUl0ZW1zXFxgIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXIuIFJlY2VpdmVkIFxcYCR7cGFnaW5hdGlvbk9wdHM/Lm51bUl0ZW1zfVxcYC5gLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnRha2VRdWVyeSgpO1xuICAgIGNvbnN0IHBhZ2VTaXplID0gcGFnaW5hdGlvbk9wdHMubnVtSXRlbXM7XG4gICAgY29uc3QgY3Vyc29yID0gcGFnaW5hdGlvbk9wdHMuY3Vyc29yO1xuICAgIGNvbnN0IGVuZEN1cnNvciA9IHBhZ2luYXRpb25PcHRzPy5lbmRDdXJzb3IgPz8gbnVsbDtcbiAgICBjb25zdCBtYXhpbXVtUm93c1JlYWQgPSBwYWdpbmF0aW9uT3B0cy5tYXhpbXVtUm93c1JlYWQgPz8gbnVsbDtcbiAgICBjb25zdCB7IHBhZ2UsIGlzRG9uZSwgY29udGludWVDdXJzb3IsIHNwbGl0Q3Vyc29yLCBwYWdlU3RhdHVzIH0gPVxuICAgICAgYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9xdWVyeVBhZ2VcIiwge1xuICAgICAgICBxdWVyeSxcbiAgICAgICAgY3Vyc29yLFxuICAgICAgICBlbmRDdXJzb3IsXG4gICAgICAgIHBhZ2VTaXplLFxuICAgICAgICBtYXhpbXVtUm93c1JlYWQsXG4gICAgICAgIG1heGltdW1CeXRlc1JlYWQ6IHBhZ2luYXRpb25PcHRzLm1heGltdW1CeXRlc1JlYWQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgcGFnZTogcGFnZS5tYXAoKGpzb246IHN0cmluZykgPT4ganNvblRvQ29udmV4KGpzb24pKSxcbiAgICAgIGlzRG9uZSxcbiAgICAgIGNvbnRpbnVlQ3Vyc29yLFxuICAgICAgc3BsaXRDdXJzb3IsXG4gICAgICBwYWdlU3RhdHVzLFxuICAgIH07XG4gIH1cblxuICBhc3luYyBjb2xsZWN0KCk6IFByb21pc2U8QXJyYXk8YW55Pj4ge1xuICAgIGNvbnN0IG91dDogVmFsdWVbXSA9IFtdO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiB0aGlzKSB7XG4gICAgICBvdXQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIGFzeW5jIHRha2UobjogbnVtYmVyKTogUHJvbWlzZTxBcnJheTxhbnk+PiB7XG4gICAgdmFsaWRhdGVBcmcobiwgMSwgXCJ0YWtlXCIsIFwiblwiKTtcbiAgICB2YWxpZGF0ZUFyZ0lzTm9uTmVnYXRpdmVJbnRlZ2VyKG4sIDEsIFwidGFrZVwiLCBcIm5cIik7XG4gICAgcmV0dXJuIHRoaXMubGltaXQobikuY29sbGVjdCgpO1xuICB9XG5cbiAgYXN5bmMgZmlyc3QoKTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gICAgY29uc3QgZmlyc3RfYXJyYXkgPSBhd2FpdCB0aGlzLnRha2UoMSk7XG4gICAgcmV0dXJuIGZpcnN0X2FycmF5Lmxlbmd0aCA9PT0gMCA/IG51bGwgOiBmaXJzdF9hcnJheVswXTtcbiAgfVxuXG4gIGFzeW5jIHVuaXF1ZSgpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgICBjb25zdCBmaXJzdF90d29fYXJyYXkgPSBhd2FpdCB0aGlzLnRha2UoMik7XG4gICAgaWYgKGZpcnN0X3R3b19hcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoZmlyc3RfdHdvX2FycmF5Lmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGB1bmlxdWUoKSBxdWVyeSByZXR1cm5lZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBmcm9tIHRhYmxlICR7dGhpcy50YWJsZU5hbWVGb3JFcnJvck1lc3NhZ2VzfTpcbiBbJHtmaXJzdF90d29fYXJyYXlbMF0uX2lkfSwgJHtmaXJzdF90d29fYXJyYXlbMV0uX2lkfSwgLi4uXWApO1xuICAgIH1cbiAgICByZXR1cm4gZmlyc3RfdHdvX2FycmF5WzBdO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/registration_impl.js":
/*!***********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/registration_impl.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   actionGeneric: () => (/* binding */ actionGeneric),\n/* harmony export */   httpActionGeneric: () => (/* binding */ httpActionGeneric),\n/* harmony export */   internalActionGeneric: () => (/* binding */ internalActionGeneric),\n/* harmony export */   internalMutationGeneric: () => (/* binding */ internalMutationGeneric),\n/* harmony export */   internalQueryGeneric: () => (/* binding */ internalQueryGeneric),\n/* harmony export */   invokeFunction: () => (/* binding */ invokeFunction),\n/* harmony export */   mutationGeneric: () => (/* binding */ mutationGeneric),\n/* harmony export */   queryGeneric: () => (/* binding */ queryGeneric),\n/* harmony export */   validateReturnValue: () => (/* binding */ validateReturnValue)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _actions_impl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./actions_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/actions_impl.js\");\n/* harmony import */ var _vector_search_impl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vector_search_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/vector_search_impl.js\");\n/* harmony import */ var _authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./authentication_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/authentication_impl.js\");\n/* harmony import */ var _database_impl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./database_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/database_impl.js\");\n/* harmony import */ var _query_impl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./query_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/query_impl.js\");\n/* harmony import */ var _scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scheduler_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/scheduler_impl.js\");\n/* harmony import */ var _storage_impl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./storage_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/storage_impl.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _values_validator_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../values/validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nasync function invokeMutation(func, argsStr) {\n    const requestId = \"\";\n    const args = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(JSON.parse(argsStr));\n    const mutationCtx = {\n        db: (0,_database_impl_js__WEBPACK_IMPORTED_MODULE_4__.setupWriter)(),\n        auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n        storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageWriter)(requestId),\n        scheduler: (0,_scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__.setupMutationScheduler)(),\n        runQuery: (reference, args2)=>runUdf(\"query\", reference, args2),\n        runMutation: (reference, args2)=>runUdf(\"mutation\", reference, args2)\n    };\n    const result = await invokeFunction(func, mutationCtx, args);\n    validateReturnValue(result);\n    return JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(result === void 0 ? null : result));\n}\nfunction validateReturnValue(v2) {\n    if (v2 instanceof _query_impl_js__WEBPACK_IMPORTED_MODULE_5__.QueryInitializerImpl || v2 instanceof _query_impl_js__WEBPACK_IMPORTED_MODULE_5__.QueryImpl) {\n        throw new Error(\"Return value is a Query. Results must be retrieved with `.collect()`, `.take(n), `.unique()`, or `.first()`.\");\n    }\n}\nasync function invokeFunction(func, ctx, args) {\n    let result;\n    try {\n        result = await Promise.resolve(func(ctx, ...args));\n    } catch (thrown) {\n        throw serializeConvexErrorData(thrown);\n    }\n    return result;\n}\nfunction dontCallDirectly(funcType, handler) {\n    return (ctx, args)=>{\n        globalThis.console.warn(`Convex functions should not directly call other Convex functions. Consider calling a helper function instead. e.g. \\`export const foo = ${funcType}(...); await foo(ctx);\\` is not supported. See https://docs.convex.dev/production/best-practices/#use-helper-functions-to-write-shared-code`);\n        return handler(ctx, args);\n    };\n}\nfunction serializeConvexErrorData(thrown) {\n    if (typeof thrown === \"object\" && thrown !== null && Symbol.for(\"ConvexError\") in thrown) {\n        const error = thrown;\n        error.data = JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(error.data === void 0 ? null : error.data));\n        error.ConvexErrorSymbol = Symbol.for(\"ConvexError\");\n        return error;\n    } else {\n        return thrown;\n    }\n}\nfunction assertNotBrowser() {\n    if (true) {\n        return;\n    }\n    const isRealBrowser = Object.getOwnPropertyDescriptor(globalThis, \"window\")?.get?.toString().includes(\"[native code]\") ?? false;\n    if (isRealBrowser) {\n        console.error(\"Convex functions should not be imported in the browser. This will throw an error in future versions of `convex`. If this is a false negative, please report it to Convex support.\");\n    }\n}\nfunction strictReplacer(key, value) {\n    if (value === void 0) {\n        throw new Error(`Cannot serialize validator value \\`undefined\\` for ${key}`);\n    }\n    return value;\n}\nfunction exportArgs(functionDefinition) {\n    return ()=>{\n        let args = _values_index_js__WEBPACK_IMPORTED_MODULE_0__.v.any();\n        if (typeof functionDefinition === \"object\" && functionDefinition.args !== void 0) {\n            args = (0,_values_validator_js__WEBPACK_IMPORTED_MODULE_10__.asObjectValidator)(functionDefinition.args);\n        }\n        return JSON.stringify(args.json, strictReplacer);\n    };\n}\nfunction exportReturns(functionDefinition) {\n    return ()=>{\n        let returns;\n        if (typeof functionDefinition === \"object\" && functionDefinition.returns !== void 0) {\n            returns = (0,_values_validator_js__WEBPACK_IMPORTED_MODULE_10__.asObjectValidator)(functionDefinition.returns);\n        }\n        return JSON.stringify(returns ? returns.json : null, strictReplacer);\n    };\n}\nconst mutationGeneric = (functionDefinition)=>{\n    const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n    const func = dontCallDirectly(\"mutation\", handler);\n    assertNotBrowser();\n    func.isMutation = true;\n    func.isPublic = true;\n    func.invokeMutation = (argsStr)=>invokeMutation(handler, argsStr);\n    func.exportArgs = exportArgs(functionDefinition);\n    func.exportReturns = exportReturns(functionDefinition);\n    func._handler = handler;\n    return func;\n};\nconst internalMutationGeneric = (functionDefinition)=>{\n    const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n    const func = dontCallDirectly(\"internalMutation\", handler);\n    assertNotBrowser();\n    func.isMutation = true;\n    func.isInternal = true;\n    func.invokeMutation = (argsStr)=>invokeMutation(handler, argsStr);\n    func.exportArgs = exportArgs(functionDefinition);\n    func.exportReturns = exportReturns(functionDefinition);\n    func._handler = handler;\n    return func;\n};\nasync function invokeQuery(func, argsStr) {\n    const requestId = \"\";\n    const args = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(JSON.parse(argsStr));\n    const queryCtx = {\n        db: (0,_database_impl_js__WEBPACK_IMPORTED_MODULE_4__.setupReader)(),\n        auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n        storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageReader)(requestId),\n        runQuery: (reference, args2)=>runUdf(\"query\", reference, args2)\n    };\n    const result = await invokeFunction(func, queryCtx, args);\n    validateReturnValue(result);\n    return JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(result === void 0 ? null : result));\n}\nconst queryGeneric = (functionDefinition)=>{\n    const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n    const func = dontCallDirectly(\"query\", handler);\n    assertNotBrowser();\n    func.isQuery = true;\n    func.isPublic = true;\n    func.invokeQuery = (argsStr)=>invokeQuery(handler, argsStr);\n    func.exportArgs = exportArgs(functionDefinition);\n    func.exportReturns = exportReturns(functionDefinition);\n    func._handler = handler;\n    return func;\n};\nconst internalQueryGeneric = (functionDefinition)=>{\n    const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n    const func = dontCallDirectly(\"internalQuery\", handler);\n    assertNotBrowser();\n    func.isQuery = true;\n    func.isInternal = true;\n    func.invokeQuery = (argsStr)=>invokeQuery(handler, argsStr);\n    func.exportArgs = exportArgs(functionDefinition);\n    func.exportReturns = exportReturns(functionDefinition);\n    func._handler = handler;\n    return func;\n};\nasync function invokeAction(func, requestId, argsStr) {\n    const args = (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(JSON.parse(argsStr));\n    const calls = (0,_actions_impl_js__WEBPACK_IMPORTED_MODULE_1__.setupActionCalls)(requestId);\n    const ctx = {\n        ...calls,\n        auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n        scheduler: (0,_scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__.setupActionScheduler)(requestId),\n        storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageActionWriter)(requestId),\n        vectorSearch: (0,_vector_search_impl_js__WEBPACK_IMPORTED_MODULE_2__.setupActionVectorSearch)(requestId)\n    };\n    const result = await invokeFunction(func, ctx, args);\n    return JSON.stringify((0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(result === void 0 ? null : result));\n}\nconst actionGeneric = (functionDefinition)=>{\n    const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n    const func = dontCallDirectly(\"action\", handler);\n    assertNotBrowser();\n    func.isAction = true;\n    func.isPublic = true;\n    func.invokeAction = (requestId, argsStr)=>invokeAction(handler, requestId, argsStr);\n    func.exportArgs = exportArgs(functionDefinition);\n    func.exportReturns = exportReturns(functionDefinition);\n    func._handler = handler;\n    return func;\n};\nconst internalActionGeneric = (functionDefinition)=>{\n    const handler = typeof functionDefinition === \"function\" ? functionDefinition : functionDefinition.handler;\n    const func = dontCallDirectly(\"internalAction\", handler);\n    assertNotBrowser();\n    func.isAction = true;\n    func.isInternal = true;\n    func.invokeAction = (requestId, argsStr)=>invokeAction(handler, requestId, argsStr);\n    func.exportArgs = exportArgs(functionDefinition);\n    func.exportReturns = exportReturns(functionDefinition);\n    func._handler = handler;\n    return func;\n};\nasync function invokeHttpAction(func, request) {\n    const requestId = \"\";\n    const calls = (0,_actions_impl_js__WEBPACK_IMPORTED_MODULE_1__.setupActionCalls)(requestId);\n    const ctx = {\n        ...calls,\n        auth: (0,_authentication_impl_js__WEBPACK_IMPORTED_MODULE_3__.setupAuth)(requestId),\n        storage: (0,_storage_impl_js__WEBPACK_IMPORTED_MODULE_7__.setupStorageActionWriter)(requestId),\n        scheduler: (0,_scheduler_impl_js__WEBPACK_IMPORTED_MODULE_6__.setupActionScheduler)(requestId),\n        vectorSearch: (0,_vector_search_impl_js__WEBPACK_IMPORTED_MODULE_2__.setupActionVectorSearch)(requestId)\n    };\n    return await invokeFunction(func, ctx, [\n        request\n    ]);\n}\nconst httpActionGeneric = (func)=>{\n    const q = dontCallDirectly(\"httpAction\", func);\n    assertNotBrowser();\n    q.isHttp = true;\n    q.invokeHttpAction = (request)=>invokeHttpAction(func, request);\n    q._handler = func;\n    return q;\n};\nasync function runUdf(udfType, f, args) {\n    const queryArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_8__.parseArgs)(args);\n    const syscallArgs = {\n        udfType,\n        args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(queryArgs),\n        ...(0,_components_paths_js__WEBPACK_IMPORTED_MODULE_11__.getFunctionAddress)(f)\n    };\n    const result = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_9__.performAsyncSyscall)(\"1.0/runUdf\", syscallArgs);\n    return (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex)(result);\n} //# sourceMappingURL=registration_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3JlZ2lzdHJhdGlvbl9pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRTztBQWUwQjtBQUNPO0FBQ2Q7QUFDZTtBQUNPO0FBSXpDO0FBS0E7QUFDbUI7QUFDVTtBQUNGO0FBQ0M7QUFFbkMsZUFBZSxlQUViLE1BQVMsU0FBaUI7SUFHMUIsTUFBTSxZQUFZO0lBQ2xCLE1BQU0sT0FBTyw4REFBWSxDQUFDLEtBQUssTUFBTSxPQUFPLENBQUM7SUFDN0MsTUFBTSxjQUFjO1FBQ2xCLElBQUksOERBQVcsQ0FBQztRQUNoQixNQUFNLGtFQUFTLENBQUMsU0FBUztRQUN6QixTQUFTLG9FQUFrQixDQUFDLFNBQVM7UUFDckMsV0FBVywwRUFBc0IsQ0FBQztRQUVsQyxVQUFVLENBQUMsV0FBZ0JBLFFBQWUsT0FBTyxTQUFTLFdBQVdBLEtBQUk7UUFDekUsYUFBYSxDQUFDLFdBQWdCQSxRQUM1QixPQUFPLFlBQVksV0FBV0EsS0FBSTtJQUN0QztJQUNBLE1BQU0sU0FBUyxNQUFNLGVBQWUsTUFBTSxhQUFhLElBQVc7SUFDbEUsb0JBQW9CLE1BQU07SUFDMUIsT0FBTyxLQUFLLFVBQVUsOERBQVksQ0FBQyxXQUFXLFNBQVksT0FBTyxNQUFNLENBQUM7QUFDMUU7QUFFTyxTQUFTLG9CQUFvQkMsRUFBQUEsRUFBUTtJQUMxQyxJQUFJQSxjQUFhLGdFQUFvQixJQUFJQSxjQUFhLHFEQUFTLEVBQUU7UUFDL0QsTUFBTSxJQUFJLE1BQ1I7SUFFSjtBQUNGO0FBRUEsZUFBc0IsZUFJcEIsTUFBUyxLQUFVLE1BQVk7SUFDL0IsSUFBSTtJQUNKLElBQUk7UUFDRixTQUFTLE1BQU0sUUFBUSxRQUFRLEtBQUssS0FBSyxHQUFHLElBQUksQ0FBQztJQUNuRCxTQUFTLFFBQWlCO1FBQ3hCLE1BQU0seUJBQXlCLE1BQU07SUFDdkM7SUFDQSxPQUFPO0FBQ1Q7QUFFQSxT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LCtFQUF1QixDQUFDLFNBQVM7SUFDakQ7SUFDQSxPQUFPLE1BQU0sZUFBZSxNQUFNLEtBQUs7UUFBQyxPQUFPO0tBQUM7QUFDbEQ7QUFXTyxNQUFNLG9CQUFvQixDQUMvQjtJQUtBLE1BQU0sSUFBSSxpQkFBaUIsY0FBYyxJQUFJO0lBQzdDLGlCQUFpQjtJQUNqQixFQUFFLFNBQVM7SUFDWCxFQUFFLG1CQUFtQixDQUFDLFVBQVksaUJBQWlCLE1BQWEsT0FBTztJQUN2RSxFQUFFLFdBQVc7SUFDYixPQUFPO0FBQ1Q7QUFFQSxlQUFlLE9BQ2IsU0FDQSxHQUNBLE1BQ2M7SUFDZCxNQUFNLFlBQVksMkRBQVMsQ0FBQyxJQUFJO0lBQ2hDLE1BQU0sY0FBYztRQUNsQjtRQUNBLE1BQU0sOERBQVksQ0FBQyxTQUFTO1FBQzVCLEdBQUcseUVBQWtCLENBQUMsQ0FBQztJQUN6QjtJQUNBLE1BQU0sU0FBUyxNQUFNLGdFQUFtQixDQUFDLGNBQWMsV0FBVztJQUNsRSxPQUFPLDhEQUFZLENBQUMsTUFBTTtBQUM1QiIsInNvdXJjZXMiOlsiL3NyYy9zZXJ2ZXIvaW1wbC9yZWdpc3RyYXRpb25faW1wbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb252ZXhFcnJvcixcbiAgY29udmV4VG9Kc29uLFxuICBHZW5lcmljVmFsaWRhdG9yLFxuICBqc29uVG9Db252ZXgsXG4gIHYsXG4gIFZhbGlkYXRvcixcbiAgVmFsdWUsXG59IGZyb20gXCIuLi8uLi92YWx1ZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IEdlbmVyaWNEYXRhTW9kZWwgfSBmcm9tIFwiLi4vZGF0YV9tb2RlbC5qc1wiO1xuaW1wb3J0IHtcbiAgQWN0aW9uQnVpbGRlcixcbiAgRGVmYXVsdEZ1bmN0aW9uQXJncyxcbiAgR2VuZXJpY0FjdGlvbkN0eCxcbiAgR2VuZXJpY011dGF0aW9uQ3R4LFxuICBHZW5lcmljUXVlcnlDdHgsXG4gIE11dGF0aW9uQnVpbGRlcixcbiAgUHVibGljSHR0cEFjdGlvbixcbiAgUXVlcnlCdWlsZGVyLFxuICBSZWdpc3RlcmVkQWN0aW9uLFxuICBSZWdpc3RlcmVkTXV0YXRpb24sXG4gIFJlZ2lzdGVyZWRRdWVyeSxcbn0gZnJvbSBcIi4uL3JlZ2lzdHJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgc2V0dXBBY3Rpb25DYWxscyB9IGZyb20gXCIuL2FjdGlvbnNfaW1wbC5qc1wiO1xuaW1wb3J0IHsgc2V0dXBBY3Rpb25WZWN0b3JTZWFyY2ggfSBmcm9tIFwiLi92ZWN0b3Jfc2VhcmNoX2ltcGwuanNcIjtcbmltcG9ydCB7IHNldHVwQXV0aCB9IGZyb20gXCIuL2F1dGhlbnRpY2F0aW9uX2ltcGwuanNcIjtcbmltcG9ydCB7IHNldHVwUmVhZGVyLCBzZXR1cFdyaXRlciB9IGZyb20gXCIuL2RhdGFiYXNlX2ltcGwuanNcIjtcbmltcG9ydCB7IFF1ZXJ5SW1wbCwgUXVlcnlJbml0aWFsaXplckltcGwgfSBmcm9tIFwiLi9xdWVyeV9pbXBsLmpzXCI7XG5pbXBvcnQge1xuICBzZXR1cEFjdGlvblNjaGVkdWxlcixcbiAgc2V0dXBNdXRhdGlvblNjaGVkdWxlcixcbn0gZnJvbSBcIi4vc2NoZWR1bGVyX2ltcGwuanNcIjtcbmltcG9ydCB7XG4gIHNldHVwU3RvcmFnZUFjdGlvbldyaXRlcixcbiAgc2V0dXBTdG9yYWdlUmVhZGVyLFxuICBzZXR1cFN0b3JhZ2VXcml0ZXIsXG59IGZyb20gXCIuL3N0b3JhZ2VfaW1wbC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VBcmdzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGVyZm9ybUFzeW5jU3lzY2FsbCB9IGZyb20gXCIuL3N5c2NhbGwuanNcIjtcbmltcG9ydCB7IGFzT2JqZWN0VmFsaWRhdG9yIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy92YWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IGdldEZ1bmN0aW9uQWRkcmVzcyB9IGZyb20gXCIuLi9jb21wb25lbnRzL3BhdGhzLmpzXCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGludm9rZU11dGF0aW9uPFxuICBGIGV4dGVuZHMgKGN0eDogR2VuZXJpY011dGF0aW9uQ3R4PEdlbmVyaWNEYXRhTW9kZWw+LCAuLi5hcmdzOiBhbnkpID0+IGFueSxcbj4oZnVuYzogRiwgYXJnc1N0cjogc3RyaW5nKSB7XG4gIC8vIFRPRE8ocHJlc2xleSk6IENoYW5nZSB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCBwcm9wYWdhdGUgdGhlIHJlcXVlc3RJZCBmcm9tIFJ1c3QuXG4gIC8vIE9rLCB0byBtb2NrIGl0IG91dCBmb3Igbm93LCBzaW5jZSBxdWVyaWVzIGFyZSBvbmx5IHJ1bm5pbmcgaW4gVjguXG4gIGNvbnN0IHJlcXVlc3RJZCA9IFwiXCI7XG4gIGNvbnN0IGFyZ3MgPSBqc29uVG9Db252ZXgoSlNPTi5wYXJzZShhcmdzU3RyKSk7XG4gIGNvbnN0IG11dGF0aW9uQ3R4ID0ge1xuICAgIGRiOiBzZXR1cFdyaXRlcigpLFxuICAgIGF1dGg6IHNldHVwQXV0aChyZXF1ZXN0SWQpLFxuICAgIHN0b3JhZ2U6IHNldHVwU3RvcmFnZVdyaXRlcihyZXF1ZXN0SWQpLFxuICAgIHNjaGVkdWxlcjogc2V0dXBNdXRhdGlvblNjaGVkdWxlcigpLFxuXG4gICAgcnVuUXVlcnk6IChyZWZlcmVuY2U6IGFueSwgYXJncz86IGFueSkgPT4gcnVuVWRmKFwicXVlcnlcIiwgcmVmZXJlbmNlLCBhcmdzKSxcbiAgICBydW5NdXRhdGlvbjogKHJlZmVyZW5jZTogYW55LCBhcmdzPzogYW55KSA9PlxuICAgICAgcnVuVWRmKFwibXV0YXRpb25cIiwgcmVmZXJlbmNlLCBhcmdzKSxcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW52b2tlRnVuY3Rpb24oZnVuYywgbXV0YXRpb25DdHgsIGFyZ3MgYXMgYW55KTtcbiAgdmFsaWRhdGVSZXR1cm5WYWx1ZShyZXN1bHQpO1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29udmV4VG9Kc29uKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHJlc3VsdCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSZXR1cm5WYWx1ZSh2OiBhbnkpIHtcbiAgaWYgKHYgaW5zdGFuY2VvZiBRdWVyeUluaXRpYWxpemVySW1wbCB8fCB2IGluc3RhbmNlb2YgUXVlcnlJbXBsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJSZXR1cm4gdmFsdWUgaXMgYSBRdWVyeS4gUmVzdWx0cyBtdXN0IGJlIHJldHJpZXZlZCB3aXRoIGAuY29sbGVjdCgpYCwgYC50YWtlKG4pLCBgLnVuaXF1ZSgpYCwgb3IgYC5maXJzdCgpYC5cIixcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnZva2VGdW5jdGlvbjxcbiAgQ3R4LFxuICBBcmdzIGV4dGVuZHMgYW55W10sXG4gIEYgZXh0ZW5kcyAoY3R4OiBDdHgsIC4uLmFyZ3M6IEFyZ3MpID0+IGFueSxcbj4oZnVuYzogRiwgY3R4OiBDdHgsIGFyZ3M6IEFyZ3MpIHtcbiAgbGV0IHJlc3VsdDtcbiAgdHJ5IHtcbiAgICByZXN1bHQgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoZnVuYyhjdHgsIC4uLmFyZ3MpKTtcbiAgfSBjYXRjaCAodGhyb3duOiB1bmtub3duKSB7XG4gICAgdGhyb3cgc2VyaWFsaXplQ29udmV4RXJyb3JEYXRhKHRocm93bik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZG9udENhbGxEaXJlY3RseShcbiAgZnVuY1R5cGU6IHN0cmluZyxcbiAgaGFuZGxlcjogKGN0eDogYW55LCBhcmdzOiBhbnkpID0+IGFueSxcbik6IHVua25vd24ge1xuICByZXR1cm4gKGN0eDogYW55LCBhcmdzOiBhbnkpID0+IHtcbiAgICBnbG9iYWxUaGlzLmNvbnNvbGUud2FybihcbiAgICAgIFwiQ29udmV4IGZ1bmN0aW9ucyBzaG91bGQgbm90IGRpcmVjdGx5IGNhbGwgb3RoZXIgQ29udmV4IGZ1bmN0aW9ucy4gQ29uc2lkZXIgY2FsbGluZyBhIGhlbHBlciBmdW5jdGlvbiBpbnN0ZWFkLiBcIiArXG4gICAgICAgIGBlLmcuIFxcYGV4cG9ydCBjb25zdCBmb28gPSAke2Z1bmNUeXBlfSguLi4pOyBhd2FpdCBmb28oY3R4KTtcXGAgaXMgbm90IHN1cHBvcnRlZC4gYCArXG4gICAgICAgIFwiU2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3Byb2R1Y3Rpb24vYmVzdC1wcmFjdGljZXMvI3VzZS1oZWxwZXItZnVuY3Rpb25zLXRvLXdyaXRlLXNoYXJlZC1jb2RlXCIsXG4gICAgKTtcbiAgICByZXR1cm4gaGFuZGxlcihjdHgsIGFyZ3MpO1xuICB9O1xufVxuXG4vLyBLZWVwIGluIHN5bmMgd2l0aCBub2RlIGV4ZWN1dG9yXG5mdW5jdGlvbiBzZXJpYWxpemVDb252ZXhFcnJvckRhdGEodGhyb3duOiB1bmtub3duKSB7XG4gIGlmIChcbiAgICB0eXBlb2YgdGhyb3duID09PSBcIm9iamVjdFwiICYmXG4gICAgdGhyb3duICE9PSBudWxsICYmXG4gICAgU3ltYm9sLmZvcihcIkNvbnZleEVycm9yXCIpIGluIHRocm93blxuICApIHtcbiAgICBjb25zdCBlcnJvciA9IHRocm93biBhcyBDb252ZXhFcnJvcjxhbnk+O1xuICAgIGVycm9yLmRhdGEgPSBKU09OLnN0cmluZ2lmeShcbiAgICAgIGNvbnZleFRvSnNvbihlcnJvci5kYXRhID09PSB1bmRlZmluZWQgPyBudWxsIDogZXJyb3IuZGF0YSksXG4gICAgKTtcbiAgICAoZXJyb3IgYXMgYW55KS5Db252ZXhFcnJvclN5bWJvbCA9IFN5bWJvbC5mb3IoXCJDb252ZXhFcnJvclwiKTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRocm93bjtcbiAgfVxufVxuXG4vKipcbiAqIEd1YXJkIGFnYWluc3QgQ29udmV4IGZ1bmN0aW9ucyBhY2NpZGVudGFsbHkgZ2V0dGluZyBpbmNsdWRlZCBpbiBhIGJyb3dzZXIgYnVuZGxlLlxuICogQ29udmV4IGZ1bmN0aW9ucyBtYXkgaW5jbHVkZSBzZWNyZXQgbG9naWMgb3IgY3JlZGVudGlhbHMgdGhhdCBzaG91bGQgbm90IGJlXG4gKiBzZW5kIHRvIHVudHJ1c3RlZCBjbGllbnRzIChicm93c2VycykuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydE5vdEJyb3dzZXIoKSB7XG4gIGlmIChcbiAgICB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiIHx8XG4gICAgKHdpbmRvdyBhcyBhbnkpLl9fY29udmV4QWxsb3dGdW5jdGlvbnNJbkJyb3dzZXJcbiAgKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIEpTRG9tIGRvZXNuJ3QgY291bnQsIGRldmVsb3BlcnMgYXJlIGFsbG93ZWQgdG8gdXNlIEpTRG9tIGluIENvbnZleCBmdW5jdGlvbnMuXG4gIGNvbnN0IGlzUmVhbEJyb3dzZXIgPVxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZ2xvYmFsVGhpcywgXCJ3aW5kb3dcIilcbiAgICAgID8uZ2V0Py50b1N0cmluZygpXG4gICAgICAuaW5jbHVkZXMoXCJbbmF0aXZlIGNvZGVdXCIpID8/IGZhbHNlO1xuICBpZiAoaXNSZWFsQnJvd3Nlcikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiQ29udmV4IGZ1bmN0aW9ucyBzaG91bGQgbm90IGJlIGltcG9ydGVkIGluIHRoZSBicm93c2VyLiBUaGlzIHdpbGwgdGhyb3cgYW4gZXJyb3IgaW4gZnV0dXJlIHZlcnNpb25zIG9mIGBjb252ZXhgLiBJZiB0aGlzIGlzIGEgZmFsc2UgbmVnYXRpdmUsIHBsZWFzZSByZXBvcnQgaXQgdG8gQ29udmV4IHN1cHBvcnQuXCIsXG4gICAgKTtcbiAgfVxufVxuXG50eXBlIEZ1bmN0aW9uRGVmaW5pdGlvbiA9XG4gIHwgKChjdHg6IGFueSwgYXJnczogRGVmYXVsdEZ1bmN0aW9uQXJncykgPT4gYW55KVxuICB8IHtcbiAgICAgIGFyZ3M/OiBHZW5lcmljVmFsaWRhdG9yIHwgUmVjb3JkPHN0cmluZywgR2VuZXJpY1ZhbGlkYXRvcj47XG4gICAgICByZXR1cm5zPzogR2VuZXJpY1ZhbGlkYXRvciB8IFJlY29yZDxzdHJpbmcsIEdlbmVyaWNWYWxpZGF0b3I+O1xuICAgICAgaGFuZGxlcjogKGN0eDogYW55LCBhcmdzOiBEZWZhdWx0RnVuY3Rpb25BcmdzKSA9PiBhbnk7XG4gICAgfTtcblxuZnVuY3Rpb24gc3RyaWN0UmVwbGFjZXIoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQ2Fubm90IHNlcmlhbGl6ZSB2YWxpZGF0b3IgdmFsdWUgXFxgdW5kZWZpbmVkXFxgIGZvciAke2tleX1gLFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gZXhwb3J0QXJncyhmdW5jdGlvbkRlZmluaXRpb246IEZ1bmN0aW9uRGVmaW5pdGlvbikge1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGxldCBhcmdzOiBHZW5lcmljVmFsaWRhdG9yID0gdi5hbnkoKTtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgZnVuY3Rpb25EZWZpbml0aW9uID09PSBcIm9iamVjdFwiICYmXG4gICAgICBmdW5jdGlvbkRlZmluaXRpb24uYXJncyAhPT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICBhcmdzID0gYXNPYmplY3RWYWxpZGF0b3IoZnVuY3Rpb25EZWZpbml0aW9uLmFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJncy5qc29uLCBzdHJpY3RSZXBsYWNlcik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGV4cG9ydFJldHVybnMoZnVuY3Rpb25EZWZpbml0aW9uOiBGdW5jdGlvbkRlZmluaXRpb24pIHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBsZXQgcmV0dXJuczogVmFsaWRhdG9yPGFueSwgYW55LCBhbnk+IHwgdW5kZWZpbmVkO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwib2JqZWN0XCIgJiZcbiAgICAgIGZ1bmN0aW9uRGVmaW5pdGlvbi5yZXR1cm5zICE9PSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIHJldHVybnMgPSBhc09iamVjdFZhbGlkYXRvcihmdW5jdGlvbkRlZmluaXRpb24ucmV0dXJucyk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShyZXR1cm5zID8gcmV0dXJucy5qc29uIDogbnVsbCwgc3RyaWN0UmVwbGFjZXIpO1xuICB9O1xufVxuXG4vKipcbiAqIERlZmluZSBhIG11dGF0aW9uIGluIHRoaXMgQ29udmV4IGFwcCdzIHB1YmxpYyBBUEkuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGFsbG93ZWQgdG8gbW9kaWZ5IHlvdXIgQ29udmV4IGRhdGFiYXNlIGFuZCB3aWxsIGJlIGFjY2Vzc2libGUgZnJvbSB0aGUgY2xpZW50LlxuICpcbiAqIElmIHlvdSdyZSB1c2luZyBjb2RlIGdlbmVyYXRpb24sIHVzZSB0aGUgYG11dGF0aW9uYCBmdW5jdGlvbiBpblxuICogYGNvbnZleC9fZ2VuZXJhdGVkL3NlcnZlci5kLnRzYCB3aGljaCBpcyB0eXBlZCBmb3IgeW91ciBkYXRhIG1vZGVsLlxuICpcbiAqIEBwYXJhbSBmdW5jIC0gVGhlIG11dGF0aW9uIGZ1bmN0aW9uLiBJdCByZWNlaXZlcyBhIHtAbGluayBHZW5lcmljTXV0YXRpb25DdHh9IGFzIGl0cyBmaXJzdCBhcmd1bWVudC5cbiAqIEByZXR1cm5zIFRoZSB3cmFwcGVkIG11dGF0aW9uLiBJbmNsdWRlIHRoaXMgYXMgYW4gYGV4cG9ydGAgdG8gbmFtZSBpdCBhbmQgbWFrZSBpdCBhY2Nlc3NpYmxlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IG11dGF0aW9uR2VuZXJpYzogTXV0YXRpb25CdWlsZGVyPGFueSwgXCJwdWJsaWNcIj4gPSAoKFxuICBmdW5jdGlvbkRlZmluaXRpb246IEZ1bmN0aW9uRGVmaW5pdGlvbixcbikgPT4ge1xuICBjb25zdCBoYW5kbGVyID0gKFxuICAgIHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBmdW5jdGlvbkRlZmluaXRpb25cbiAgICAgIDogZnVuY3Rpb25EZWZpbml0aW9uLmhhbmRsZXJcbiAgKSBhcyAoY3R4OiBHZW5lcmljTXV0YXRpb25DdHg8YW55PiwgYXJnczogYW55KSA9PiBhbnk7XG4gIGNvbnN0IGZ1bmMgPSBkb250Q2FsbERpcmVjdGx5KFwibXV0YXRpb25cIiwgaGFuZGxlcikgYXMgUmVnaXN0ZXJlZE11dGF0aW9uPFxuICAgIFwicHVibGljXCIsXG4gICAgYW55LFxuICAgIGFueVxuICA+O1xuXG4gIGFzc2VydE5vdEJyb3dzZXIoKTtcbiAgZnVuYy5pc011dGF0aW9uID0gdHJ1ZTtcbiAgZnVuYy5pc1B1YmxpYyA9IHRydWU7XG4gIGZ1bmMuaW52b2tlTXV0YXRpb24gPSAoYXJnc1N0cikgPT4gaW52b2tlTXV0YXRpb24oaGFuZGxlciwgYXJnc1N0cik7XG4gIGZ1bmMuZXhwb3J0QXJncyA9IGV4cG9ydEFyZ3MoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5leHBvcnRSZXR1cm5zID0gZXhwb3J0UmV0dXJucyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLl9oYW5kbGVyID0gaGFuZGxlcjtcbiAgcmV0dXJuIGZ1bmM7XG59KSBhcyBNdXRhdGlvbkJ1aWxkZXI8YW55LCBcInB1YmxpY1wiPjtcblxuLyoqXG4gKiBEZWZpbmUgYSBtdXRhdGlvbiB0aGF0IGlzIG9ubHkgYWNjZXNzaWJsZSBmcm9tIG90aGVyIENvbnZleCBmdW5jdGlvbnMgKGJ1dCBub3QgZnJvbSB0aGUgY2xpZW50KS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgYWxsb3dlZCB0byBtb2RpZnkgeW91ciBDb252ZXggZGF0YWJhc2UuIEl0IHdpbGwgbm90IGJlIGFjY2Vzc2libGUgZnJvbSB0aGUgY2xpZW50LlxuICpcbiAqIElmIHlvdSdyZSB1c2luZyBjb2RlIGdlbmVyYXRpb24sIHVzZSB0aGUgYGludGVybmFsTXV0YXRpb25gIGZ1bmN0aW9uIGluXG4gKiBgY29udmV4L19nZW5lcmF0ZWQvc2VydmVyLmQudHNgIHdoaWNoIGlzIHR5cGVkIGZvciB5b3VyIGRhdGEgbW9kZWwuXG4gKlxuICogQHBhcmFtIGZ1bmMgLSBUaGUgbXV0YXRpb24gZnVuY3Rpb24uIEl0IHJlY2VpdmVzIGEge0BsaW5rIEdlbmVyaWNNdXRhdGlvbkN0eH0gYXMgaXRzIGZpcnN0IGFyZ3VtZW50LlxuICogQHJldHVybnMgVGhlIHdyYXBwZWQgbXV0YXRpb24uIEluY2x1ZGUgdGhpcyBhcyBhbiBgZXhwb3J0YCB0byBuYW1lIGl0IGFuZCBtYWtlIGl0IGFjY2Vzc2libGUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgaW50ZXJuYWxNdXRhdGlvbkdlbmVyaWM6IE11dGF0aW9uQnVpbGRlcjxhbnksIFwiaW50ZXJuYWxcIj4gPSAoKFxuICBmdW5jdGlvbkRlZmluaXRpb246IEZ1bmN0aW9uRGVmaW5pdGlvbixcbikgPT4ge1xuICBjb25zdCBoYW5kbGVyID0gKFxuICAgIHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBmdW5jdGlvbkRlZmluaXRpb25cbiAgICAgIDogZnVuY3Rpb25EZWZpbml0aW9uLmhhbmRsZXJcbiAgKSBhcyAoY3R4OiBHZW5lcmljTXV0YXRpb25DdHg8YW55PiwgYXJnczogYW55KSA9PiBhbnk7XG4gIGNvbnN0IGZ1bmMgPSBkb250Q2FsbERpcmVjdGx5KFxuICAgIFwiaW50ZXJuYWxNdXRhdGlvblwiLFxuICAgIGhhbmRsZXIsXG4gICkgYXMgUmVnaXN0ZXJlZE11dGF0aW9uPFwiaW50ZXJuYWxcIiwgYW55LCBhbnk+O1xuXG4gIGFzc2VydE5vdEJyb3dzZXIoKTtcbiAgZnVuYy5pc011dGF0aW9uID0gdHJ1ZTtcbiAgZnVuYy5pc0ludGVybmFsID0gdHJ1ZTtcbiAgZnVuYy5pbnZva2VNdXRhdGlvbiA9IChhcmdzU3RyKSA9PiBpbnZva2VNdXRhdGlvbihoYW5kbGVyLCBhcmdzU3RyKTtcbiAgZnVuYy5leHBvcnRBcmdzID0gZXhwb3J0QXJncyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLmV4cG9ydFJldHVybnMgPSBleHBvcnRSZXR1cm5zKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICByZXR1cm4gZnVuYztcbn0pIGFzIE11dGF0aW9uQnVpbGRlcjxhbnksIFwiaW50ZXJuYWxcIj47XG5cbmFzeW5jIGZ1bmN0aW9uIGludm9rZVF1ZXJ5PFxuICBGIGV4dGVuZHMgKGN0eDogR2VuZXJpY1F1ZXJ5Q3R4PEdlbmVyaWNEYXRhTW9kZWw+LCAuLi5hcmdzOiBhbnkpID0+IGFueSxcbj4oZnVuYzogRiwgYXJnc1N0cjogc3RyaW5nKSB7XG4gIC8vIFRPRE8ocHJlc2xleSk6IENoYW5nZSB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCBwcm9wYWdhdGUgdGhlIHJlcXVlc3RJZCBmcm9tIFJ1c3QuXG4gIC8vIE9rLCB0byBtb2NrIGl0IG91dCBmb3Igbm93LCBzaW5jZSBxdWVyaWVzIGFyZSBvbmx5IHJ1bm5pbmcgaW4gVjguXG4gIGNvbnN0IHJlcXVlc3RJZCA9IFwiXCI7XG4gIGNvbnN0IGFyZ3MgPSBqc29uVG9Db252ZXgoSlNPTi5wYXJzZShhcmdzU3RyKSk7XG4gIGNvbnN0IHF1ZXJ5Q3R4ID0ge1xuICAgIGRiOiBzZXR1cFJlYWRlcigpLFxuICAgIGF1dGg6IHNldHVwQXV0aChyZXF1ZXN0SWQpLFxuICAgIHN0b3JhZ2U6IHNldHVwU3RvcmFnZVJlYWRlcihyZXF1ZXN0SWQpLFxuICAgIHJ1blF1ZXJ5OiAocmVmZXJlbmNlOiBhbnksIGFyZ3M/OiBhbnkpID0+IHJ1blVkZihcInF1ZXJ5XCIsIHJlZmVyZW5jZSwgYXJncyksXG4gIH07XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGludm9rZUZ1bmN0aW9uKGZ1bmMsIHF1ZXJ5Q3R4LCBhcmdzIGFzIGFueSk7XG4gIHZhbGlkYXRlUmV0dXJuVmFsdWUocmVzdWx0KTtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihyZXN1bHQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiByZXN1bHQpKTtcbn1cblxuLyoqXG4gKiBEZWZpbmUgYSBxdWVyeSBpbiB0aGlzIENvbnZleCBhcHAncyBwdWJsaWMgQVBJLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhbGxvd2VkIHRvIHJlYWQgeW91ciBDb252ZXggZGF0YWJhc2UgYW5kIHdpbGwgYmUgYWNjZXNzaWJsZSBmcm9tIHRoZSBjbGllbnQuXG4gKlxuICogSWYgeW91J3JlIHVzaW5nIGNvZGUgZ2VuZXJhdGlvbiwgdXNlIHRoZSBgcXVlcnlgIGZ1bmN0aW9uIGluXG4gKiBgY29udmV4L19nZW5lcmF0ZWQvc2VydmVyLmQudHNgIHdoaWNoIGlzIHR5cGVkIGZvciB5b3VyIGRhdGEgbW9kZWwuXG4gKlxuICogQHBhcmFtIGZ1bmMgLSBUaGUgcXVlcnkgZnVuY3Rpb24uIEl0IHJlY2VpdmVzIGEge0BsaW5rIEdlbmVyaWNRdWVyeUN0eH0gYXMgaXRzIGZpcnN0IGFyZ3VtZW50LlxuICogQHJldHVybnMgVGhlIHdyYXBwZWQgcXVlcnkuIEluY2x1ZGUgdGhpcyBhcyBhbiBgZXhwb3J0YCB0byBuYW1lIGl0IGFuZCBtYWtlIGl0IGFjY2Vzc2libGUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcXVlcnlHZW5lcmljOiBRdWVyeUJ1aWxkZXI8YW55LCBcInB1YmxpY1wiPiA9ICgoXG4gIGZ1bmN0aW9uRGVmaW5pdGlvbjogRnVuY3Rpb25EZWZpbml0aW9uLFxuKSA9PiB7XG4gIGNvbnN0IGhhbmRsZXIgPSAoXG4gICAgdHlwZW9mIGZ1bmN0aW9uRGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGZ1bmN0aW9uRGVmaW5pdGlvblxuICAgICAgOiBmdW5jdGlvbkRlZmluaXRpb24uaGFuZGxlclxuICApIGFzIChjdHg6IEdlbmVyaWNRdWVyeUN0eDxhbnk+LCBhcmdzOiBhbnkpID0+IGFueTtcbiAgY29uc3QgZnVuYyA9IGRvbnRDYWxsRGlyZWN0bHkoXCJxdWVyeVwiLCBoYW5kbGVyKSBhcyBSZWdpc3RlcmVkUXVlcnk8XG4gICAgXCJwdWJsaWNcIixcbiAgICBhbnksXG4gICAgYW55XG4gID47XG5cbiAgYXNzZXJ0Tm90QnJvd3NlcigpO1xuICBmdW5jLmlzUXVlcnkgPSB0cnVlO1xuICBmdW5jLmlzUHVibGljID0gdHJ1ZTtcbiAgZnVuYy5pbnZva2VRdWVyeSA9IChhcmdzU3RyKSA9PiBpbnZva2VRdWVyeShoYW5kbGVyLCBhcmdzU3RyKTtcbiAgZnVuYy5leHBvcnRBcmdzID0gZXhwb3J0QXJncyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLmV4cG9ydFJldHVybnMgPSBleHBvcnRSZXR1cm5zKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICByZXR1cm4gZnVuYztcbn0pIGFzIFF1ZXJ5QnVpbGRlcjxhbnksIFwicHVibGljXCI+O1xuXG4vKipcbiAqIERlZmluZSBhIHF1ZXJ5IHRoYXQgaXMgb25seSBhY2Nlc3NpYmxlIGZyb20gb3RoZXIgQ29udmV4IGZ1bmN0aW9ucyAoYnV0IG5vdCBmcm9tIHRoZSBjbGllbnQpLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhbGxvd2VkIHRvIHJlYWQgZnJvbSB5b3VyIENvbnZleCBkYXRhYmFzZS4gSXQgd2lsbCBub3QgYmUgYWNjZXNzaWJsZSBmcm9tIHRoZSBjbGllbnQuXG4gKlxuICogSWYgeW91J3JlIHVzaW5nIGNvZGUgZ2VuZXJhdGlvbiwgdXNlIHRoZSBgaW50ZXJuYWxRdWVyeWAgZnVuY3Rpb24gaW5cbiAqIGBjb252ZXgvX2dlbmVyYXRlZC9zZXJ2ZXIuZC50c2Agd2hpY2ggaXMgdHlwZWQgZm9yIHlvdXIgZGF0YSBtb2RlbC5cbiAqXG4gKiBAcGFyYW0gZnVuYyAtIFRoZSBxdWVyeSBmdW5jdGlvbi4gSXQgcmVjZWl2ZXMgYSB7QGxpbmsgR2VuZXJpY1F1ZXJ5Q3R4fSBhcyBpdHMgZmlyc3QgYXJndW1lbnQuXG4gKiBAcmV0dXJucyBUaGUgd3JhcHBlZCBxdWVyeS4gSW5jbHVkZSB0aGlzIGFzIGFuIGBleHBvcnRgIHRvIG5hbWUgaXQgYW5kIG1ha2UgaXQgYWNjZXNzaWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBpbnRlcm5hbFF1ZXJ5R2VuZXJpYzogUXVlcnlCdWlsZGVyPGFueSwgXCJpbnRlcm5hbFwiPiA9ICgoXG4gIGZ1bmN0aW9uRGVmaW5pdGlvbjogRnVuY3Rpb25EZWZpbml0aW9uLFxuKSA9PiB7XG4gIGNvbnN0IGhhbmRsZXIgPSAoXG4gICAgdHlwZW9mIGZ1bmN0aW9uRGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGZ1bmN0aW9uRGVmaW5pdGlvblxuICAgICAgOiBmdW5jdGlvbkRlZmluaXRpb24uaGFuZGxlclxuICApIGFzIChjdHg6IEdlbmVyaWNRdWVyeUN0eDxhbnk+LCBhcmdzOiBhbnkpID0+IGFueTtcbiAgY29uc3QgZnVuYyA9IGRvbnRDYWxsRGlyZWN0bHkoXCJpbnRlcm5hbFF1ZXJ5XCIsIGhhbmRsZXIpIGFzIFJlZ2lzdGVyZWRRdWVyeTxcbiAgICBcImludGVybmFsXCIsXG4gICAgYW55LFxuICAgIGFueVxuICA+O1xuXG4gIGFzc2VydE5vdEJyb3dzZXIoKTtcbiAgZnVuYy5pc1F1ZXJ5ID0gdHJ1ZTtcbiAgZnVuYy5pc0ludGVybmFsID0gdHJ1ZTtcbiAgZnVuYy5pbnZva2VRdWVyeSA9IChhcmdzU3RyKSA9PiBpbnZva2VRdWVyeShoYW5kbGVyIGFzIGFueSwgYXJnc1N0cik7XG4gIGZ1bmMuZXhwb3J0QXJncyA9IGV4cG9ydEFyZ3MoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5leHBvcnRSZXR1cm5zID0gZXhwb3J0UmV0dXJucyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLl9oYW5kbGVyID0gaGFuZGxlcjtcbiAgcmV0dXJuIGZ1bmM7XG59KSBhcyBRdWVyeUJ1aWxkZXI8YW55LCBcImludGVybmFsXCI+O1xuXG5hc3luYyBmdW5jdGlvbiBpbnZva2VBY3Rpb248XG4gIEYgZXh0ZW5kcyAoY3R4OiBHZW5lcmljQWN0aW9uQ3R4PEdlbmVyaWNEYXRhTW9kZWw+LCAuLi5hcmdzOiBhbnkpID0+IGFueSxcbj4oZnVuYzogRiwgcmVxdWVzdElkOiBzdHJpbmcsIGFyZ3NTdHI6IHN0cmluZykge1xuICBjb25zdCBhcmdzID0ganNvblRvQ29udmV4KEpTT04ucGFyc2UoYXJnc1N0cikpO1xuICBjb25zdCBjYWxscyA9IHNldHVwQWN0aW9uQ2FsbHMocmVxdWVzdElkKTtcbiAgY29uc3QgY3R4ID0ge1xuICAgIC4uLmNhbGxzLFxuICAgIGF1dGg6IHNldHVwQXV0aChyZXF1ZXN0SWQpLFxuICAgIHNjaGVkdWxlcjogc2V0dXBBY3Rpb25TY2hlZHVsZXIocmVxdWVzdElkKSxcbiAgICBzdG9yYWdlOiBzZXR1cFN0b3JhZ2VBY3Rpb25Xcml0ZXIocmVxdWVzdElkKSxcbiAgICB2ZWN0b3JTZWFyY2g6IHNldHVwQWN0aW9uVmVjdG9yU2VhcmNoKHJlcXVlc3RJZCkgYXMgYW55LFxuICB9O1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnZva2VGdW5jdGlvbihmdW5jLCBjdHgsIGFyZ3MgYXMgYW55KTtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGNvbnZleFRvSnNvbihyZXN1bHQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiByZXN1bHQpKTtcbn1cblxuLyoqXG4gKiBEZWZpbmUgYW4gYWN0aW9uIGluIHRoaXMgQ29udmV4IGFwcCdzIHB1YmxpYyBBUEkuXG4gKlxuICogSWYgeW91J3JlIHVzaW5nIGNvZGUgZ2VuZXJhdGlvbiwgdXNlIHRoZSBgYWN0aW9uYCBmdW5jdGlvbiBpblxuICogYGNvbnZleC9fZ2VuZXJhdGVkL3NlcnZlci5kLnRzYCB3aGljaCBpcyB0eXBlZCBmb3IgeW91ciBkYXRhIG1vZGVsLlxuICpcbiAqIEBwYXJhbSBmdW5jIC0gVGhlIGZ1bmN0aW9uLiBJdCByZWNlaXZlcyBhIHtAbGluayBHZW5lcmljQWN0aW9uQ3R4fSBhcyBpdHMgZmlyc3QgYXJndW1lbnQuXG4gKiBAcmV0dXJucyBUaGUgd3JhcHBlZCBmdW5jdGlvbi4gSW5jbHVkZSB0aGlzIGFzIGFuIGBleHBvcnRgIHRvIG5hbWUgaXQgYW5kIG1ha2UgaXQgYWNjZXNzaWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBhY3Rpb25HZW5lcmljOiBBY3Rpb25CdWlsZGVyPGFueSwgXCJwdWJsaWNcIj4gPSAoKFxuICBmdW5jdGlvbkRlZmluaXRpb246IEZ1bmN0aW9uRGVmaW5pdGlvbixcbikgPT4ge1xuICBjb25zdCBoYW5kbGVyID0gKFxuICAgIHR5cGVvZiBmdW5jdGlvbkRlZmluaXRpb24gPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBmdW5jdGlvbkRlZmluaXRpb25cbiAgICAgIDogZnVuY3Rpb25EZWZpbml0aW9uLmhhbmRsZXJcbiAgKSBhcyAoY3R4OiBHZW5lcmljQWN0aW9uQ3R4PGFueT4sIGFyZ3M6IGFueSkgPT4gYW55O1xuICBjb25zdCBmdW5jID0gZG9udENhbGxEaXJlY3RseShcImFjdGlvblwiLCBoYW5kbGVyKSBhcyBSZWdpc3RlcmVkQWN0aW9uPFxuICAgIFwicHVibGljXCIsXG4gICAgYW55LFxuICAgIGFueVxuICA+O1xuXG4gIGFzc2VydE5vdEJyb3dzZXIoKTtcbiAgZnVuYy5pc0FjdGlvbiA9IHRydWU7XG4gIGZ1bmMuaXNQdWJsaWMgPSB0cnVlO1xuICBmdW5jLmludm9rZUFjdGlvbiA9IChyZXF1ZXN0SWQsIGFyZ3NTdHIpID0+XG4gICAgaW52b2tlQWN0aW9uKGhhbmRsZXIsIHJlcXVlc3RJZCwgYXJnc1N0cik7XG4gIGZ1bmMuZXhwb3J0QXJncyA9IGV4cG9ydEFyZ3MoZnVuY3Rpb25EZWZpbml0aW9uKTtcbiAgZnVuYy5leHBvcnRSZXR1cm5zID0gZXhwb3J0UmV0dXJucyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLl9oYW5kbGVyID0gaGFuZGxlcjtcbiAgcmV0dXJuIGZ1bmM7XG59KSBhcyBBY3Rpb25CdWlsZGVyPGFueSwgXCJwdWJsaWNcIj47XG5cbi8qKlxuICogRGVmaW5lIGFuIGFjdGlvbiB0aGF0IGlzIG9ubHkgYWNjZXNzaWJsZSBmcm9tIG90aGVyIENvbnZleCBmdW5jdGlvbnMgKGJ1dCBub3QgZnJvbSB0aGUgY2xpZW50KS5cbiAqXG4gKiBJZiB5b3UncmUgdXNpbmcgY29kZSBnZW5lcmF0aW9uLCB1c2UgdGhlIGBpbnRlcm5hbEFjdGlvbmAgZnVuY3Rpb24gaW5cbiAqIGBjb252ZXgvX2dlbmVyYXRlZC9zZXJ2ZXIuZC50c2Agd2hpY2ggaXMgdHlwZWQgZm9yIHlvdXIgZGF0YSBtb2RlbC5cbiAqXG4gKiBAcGFyYW0gZnVuYyAtIFRoZSBmdW5jdGlvbi4gSXQgcmVjZWl2ZXMgYSB7QGxpbmsgR2VuZXJpY0FjdGlvbkN0eH0gYXMgaXRzIGZpcnN0IGFyZ3VtZW50LlxuICogQHJldHVybnMgVGhlIHdyYXBwZWQgZnVuY3Rpb24uIEluY2x1ZGUgdGhpcyBhcyBhbiBgZXhwb3J0YCB0byBuYW1lIGl0IGFuZCBtYWtlIGl0IGFjY2Vzc2libGUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgaW50ZXJuYWxBY3Rpb25HZW5lcmljOiBBY3Rpb25CdWlsZGVyPGFueSwgXCJpbnRlcm5hbFwiPiA9ICgoXG4gIGZ1bmN0aW9uRGVmaW5pdGlvbjogRnVuY3Rpb25EZWZpbml0aW9uLFxuKSA9PiB7XG4gIGNvbnN0IGhhbmRsZXIgPSAoXG4gICAgdHlwZW9mIGZ1bmN0aW9uRGVmaW5pdGlvbiA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IGZ1bmN0aW9uRGVmaW5pdGlvblxuICAgICAgOiBmdW5jdGlvbkRlZmluaXRpb24uaGFuZGxlclxuICApIGFzIChjdHg6IEdlbmVyaWNBY3Rpb25DdHg8YW55PiwgYXJnczogYW55KSA9PiBhbnk7XG4gIGNvbnN0IGZ1bmMgPSBkb250Q2FsbERpcmVjdGx5KFwiaW50ZXJuYWxBY3Rpb25cIiwgaGFuZGxlcikgYXMgUmVnaXN0ZXJlZEFjdGlvbjxcbiAgICBcImludGVybmFsXCIsXG4gICAgYW55LFxuICAgIGFueVxuICA+O1xuXG4gIGFzc2VydE5vdEJyb3dzZXIoKTtcbiAgZnVuYy5pc0FjdGlvbiA9IHRydWU7XG4gIGZ1bmMuaXNJbnRlcm5hbCA9IHRydWU7XG4gIGZ1bmMuaW52b2tlQWN0aW9uID0gKHJlcXVlc3RJZCwgYXJnc1N0cikgPT5cbiAgICBpbnZva2VBY3Rpb24oaGFuZGxlciwgcmVxdWVzdElkLCBhcmdzU3RyKTtcbiAgZnVuYy5leHBvcnRBcmdzID0gZXhwb3J0QXJncyhmdW5jdGlvbkRlZmluaXRpb24pO1xuICBmdW5jLmV4cG9ydFJldHVybnMgPSBleHBvcnRSZXR1cm5zKGZ1bmN0aW9uRGVmaW5pdGlvbik7XG4gIGZ1bmMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICByZXR1cm4gZnVuYztcbn0pIGFzIEFjdGlvbkJ1aWxkZXI8YW55LCBcImludGVybmFsXCI+O1xuXG5hc3luYyBmdW5jdGlvbiBpbnZva2VIdHRwQWN0aW9uPFxuICBGIGV4dGVuZHMgKGN0eDogR2VuZXJpY0FjdGlvbkN0eDxHZW5lcmljRGF0YU1vZGVsPiwgcmVxdWVzdDogUmVxdWVzdCkgPT4gYW55LFxuPihmdW5jOiBGLCByZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIC8vIFRPRE8ocHJlc2xleSk6IENoYW5nZSB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCBwcm9wYWdhdGUgdGhlIHJlcXVlc3RJZCBmcm9tIFJ1c3QuXG4gIC8vIE9rLCB0byBtb2NrIGl0IG91dCBmb3Igbm93LCBzaW5jZSBodHRwIGVuZHBvaW50cyBhcmUgb25seSBydW5uaW5nIGluIFY4LlxuICBjb25zdCByZXF1ZXN0SWQgPSBcIlwiO1xuICBjb25zdCBjYWxscyA9IHNldHVwQWN0aW9uQ2FsbHMocmVxdWVzdElkKTtcbiAgY29uc3QgY3R4ID0ge1xuICAgIC4uLmNhbGxzLFxuICAgIGF1dGg6IHNldHVwQXV0aChyZXF1ZXN0SWQpLFxuICAgIHN0b3JhZ2U6IHNldHVwU3RvcmFnZUFjdGlvbldyaXRlcihyZXF1ZXN0SWQpLFxuICAgIHNjaGVkdWxlcjogc2V0dXBBY3Rpb25TY2hlZHVsZXIocmVxdWVzdElkKSxcbiAgICB2ZWN0b3JTZWFyY2g6IHNldHVwQWN0aW9uVmVjdG9yU2VhcmNoKHJlcXVlc3RJZCkgYXMgYW55LFxuICB9O1xuICByZXR1cm4gYXdhaXQgaW52b2tlRnVuY3Rpb24oZnVuYywgY3R4LCBbcmVxdWVzdF0pO1xufVxuXG4vKipcbiAqIERlZmluZSBhIENvbnZleCBIVFRQIGFjdGlvbi5cbiAqXG4gKiBAcGFyYW0gZnVuYyAtIFRoZSBmdW5jdGlvbi4gSXQgcmVjZWl2ZXMgYW4ge0BsaW5rIEdlbmVyaWNBY3Rpb25DdHh9IGFzIGl0cyBmaXJzdCBhcmd1bWVudCwgYW5kIGEgYFJlcXVlc3RgIG9iamVjdFxuICogYXMgaXRzIHNlY29uZC5cbiAqIEByZXR1cm5zIFRoZSB3cmFwcGVkIGZ1bmN0aW9uLiBSb3V0ZSBhIFVSTCBwYXRoIHRvIHRoaXMgZnVuY3Rpb24gaW4gYGNvbnZleC9odHRwLmpzYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBodHRwQWN0aW9uR2VuZXJpYyA9IChcbiAgZnVuYzogKFxuICAgIGN0eDogR2VuZXJpY0FjdGlvbkN0eDxHZW5lcmljRGF0YU1vZGVsPixcbiAgICByZXF1ZXN0OiBSZXF1ZXN0LFxuICApID0+IFByb21pc2U8UmVzcG9uc2U+LFxuKTogUHVibGljSHR0cEFjdGlvbiA9PiB7XG4gIGNvbnN0IHEgPSBkb250Q2FsbERpcmVjdGx5KFwiaHR0cEFjdGlvblwiLCBmdW5jKSBhcyBQdWJsaWNIdHRwQWN0aW9uO1xuICBhc3NlcnROb3RCcm93c2VyKCk7XG4gIHEuaXNIdHRwID0gdHJ1ZTtcbiAgcS5pbnZva2VIdHRwQWN0aW9uID0gKHJlcXVlc3QpID0+IGludm9rZUh0dHBBY3Rpb24oZnVuYyBhcyBhbnksIHJlcXVlc3QpO1xuICBxLl9oYW5kbGVyID0gZnVuYztcbiAgcmV0dXJuIHE7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBydW5VZGYoXG4gIHVkZlR5cGU6IFwicXVlcnlcIiB8IFwibXV0YXRpb25cIixcbiAgZjogYW55LFxuICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgcXVlcnlBcmdzID0gcGFyc2VBcmdzKGFyZ3MpO1xuICBjb25zdCBzeXNjYWxsQXJncyA9IHtcbiAgICB1ZGZUeXBlLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihxdWVyeUFyZ3MpLFxuICAgIC4uLmdldEZ1bmN0aW9uQWRkcmVzcyhmKSxcbiAgfTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9ydW5VZGZcIiwgc3lzY2FsbEFyZ3MpO1xuICByZXR1cm4ganNvblRvQ29udmV4KHJlc3VsdCk7XG59XG4iXSwibmFtZXMiOlsiYXJncyIsInYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/registration_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/scheduler_impl.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/scheduler_impl.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupActionScheduler: () => (/* binding */ setupActionScheduler),\n/* harmony export */   setupMutationScheduler: () => (/* binding */ setupMutationScheduler)\n/* harmony export */ });\n/* harmony import */ var _values_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/index.js */ \"(ssr)/./node_modules/convex/dist/esm/values/index.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _components_paths_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/paths.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/paths.js\");\n\n\n\n\n\n\n\nfunction setupMutationScheduler() {\n    return {\n        runAfter: async (delayMs, functionReference, args)=>{\n            const syscallArgs = runAfterSyscallArgs(delayMs, functionReference, args);\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/schedule\", syscallArgs);\n        },\n        runAt: async (ms_since_epoch_or_date, functionReference, args)=>{\n            const syscallArgs = runAtSyscallArgs(ms_since_epoch_or_date, functionReference, args);\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/schedule\", syscallArgs);\n        },\n        cancel: async (id)=>{\n            (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateArg)(id, 1, \"cancel\", \"id\");\n            const args = {\n                id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id)\n            };\n            await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/cancel_job\", args);\n        }\n    };\n}\nfunction setupActionScheduler(requestId) {\n    return {\n        runAfter: async (delayMs, functionReference, args)=>{\n            const syscallArgs = {\n                requestId,\n                ...runAfterSyscallArgs(delayMs, functionReference, args)\n            };\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/schedule\", syscallArgs);\n        },\n        runAt: async (ms_since_epoch_or_date, functionReference, args)=>{\n            const syscallArgs = {\n                requestId,\n                ...runAtSyscallArgs(ms_since_epoch_or_date, functionReference, args)\n            };\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/schedule\", syscallArgs);\n        },\n        cancel: async (id)=>{\n            (0,_validate_js__WEBPACK_IMPORTED_MODULE_4__.validateArg)(id, 1, \"cancel\", \"id\");\n            const syscallArgs = {\n                id: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(id)\n            };\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_2__.performAsyncSyscall)(\"1.0/actions/cancel_job\", syscallArgs);\n        }\n    };\n}\nfunction runAfterSyscallArgs(delayMs, functionReference, args) {\n    if (typeof delayMs !== \"number\") {\n        throw new Error(\"`delayMs` must be a number\");\n    }\n    if (!isFinite(delayMs)) {\n        throw new Error(\"`delayMs` must be a finite number\");\n    }\n    if (delayMs < 0) {\n        throw new Error(\"`delayMs` must be non-negative\");\n    }\n    const functionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_3__.parseArgs)(args);\n    const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_5__.getFunctionAddress)(functionReference);\n    const ts = (Date.now() + delayMs) / 1e3;\n    return {\n        ...address,\n        ts,\n        args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(functionArgs),\n        version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version\n    };\n}\nfunction runAtSyscallArgs(ms_since_epoch_or_date, functionReference, args) {\n    let ts;\n    if (ms_since_epoch_or_date instanceof Date) {\n        ts = ms_since_epoch_or_date.valueOf() / 1e3;\n    } else if (typeof ms_since_epoch_or_date === \"number\") {\n        ts = ms_since_epoch_or_date / 1e3;\n    } else {\n        throw new Error(\"The invoke time must a Date or a timestamp\");\n    }\n    const address = (0,_components_paths_js__WEBPACK_IMPORTED_MODULE_5__.getFunctionAddress)(functionReference);\n    const functionArgs = (0,_common_index_js__WEBPACK_IMPORTED_MODULE_3__.parseArgs)(args);\n    return {\n        ...address,\n        ts,\n        args: (0,_values_index_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(functionArgs),\n        version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version\n    };\n} //# sourceMappingURL=scheduler_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3NjaGVkdWxlcl9pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFvQztBQUNaO0FBQ1k7QUFDVjtBQUdFO0FBQ087QUFFNUIsU0FBUyx5QkFBb0M7SUFDbEQsT0FBTztRQUNMLFVBQVUsT0FDUixTQUNBLG1CQUNBO1lBRUEsTUFBTSxjQUFjLG9CQUFvQixTQUFTLG1CQUFtQixJQUFJO1lBQ3hFLE9BQU8sTUFBTSxnRUFBbUIsQ0FBQyxnQkFBZ0IsV0FBVztRQUM5RDtRQUNBLE9BQU8sT0FDTCx3QkFDQSxtQkFDQTtZQUVBLE1BQU0sY0FBYyxpQkFDbEIsd0JBQ0EsbUJBQ0E7WUFFRixPQUFPLE1BQU0sZ0VBQW1CLENBQUMsZ0JBQWdCLFdBQVc7UUFDOUQ7UUFDQSxRQUFRLE9BQU87WUFDYix5REFBVyxDQUFDLElBQUksR0FBRyxVQUFVLElBQUk7WUFDakMsTUFBTSxPQUFPO2dCQUFFLElBQUksOERBQVksQ0FBQyxFQUFFO1lBQUU7WUFDcEMsTUFBTSxnRUFBbUIsQ0FBQyxrQkFBa0IsSUFBSTtRQUNsRDtJQUNGO0FBQ0Y7QUFFTyxTQUFTLHFCQUFxQixXQUE4QjtJQUNqRSxPQUFPO1FBQ0wsVUFBVSxPQUNSLFNBQ0EsbUJBQ0E7WUFFQSxNQUFNLGNBQWM7Z0JBQ2xCO2dCQUNBLEdBQUcsb0JBQW9CLFNBQVMsbUJBQW1CLElBQUk7WUFDekQ7WUFDQSxPQUFPLE1BQU0sZ0VBQW1CLENBQUMsd0JBQXdCLFdBQVc7UUFDdEU7UUFDQSxPQUFPLE9BQ0wsd0JBQ0EsbUJBQ0E7WUFFQSxNQUFNLGNBQWM7Z0JBQ2xCO2dCQUNBLEdBQUcsaUJBQWlCLHdCQUF3QixtQkFBbUIsSUFBSTtZQUNyRTtZQUNBLE9BQU8sTUFBTSxnRUFBbUIsQ0FBQyx3QkFBd0IsV0FBVztRQUN0RTtRQUNBLFFBQVEsT0FBTztZQUNiLHlEQUFXLENBQUMsSUFBSSxHQUFHLFVBQVUsSUFBSTtZQUNqQyxNQUFNLGNBQWM7Z0JBQUUsSUFBSSw4REFBWSxDQUFDLEVBQUU7WUFBRTtZQUMzQyxPQUFPLE1BQU0sZ0VBQW1CLENBQUMsMEJBQTBCLFdBQVc7UUFDeEU7SUFDRjtBQUNGO0FBRUEsU0FBUyxvQkFDUCxTQUNBLG1CQUNBLE1BQ0E7SUFDQSxJQUFJLE9BQU8sWUFBWSxVQUFVO1FBQy9CLE1BQU0sSUFBSSxNQUFNLDRCQUE0QjtJQUM5QztJQUNBLElBQUksQ0FBQyxTQUFTLE9BQU8sR0FBRztRQUN0QixNQUFNLElBQUksTUFBTSxtQ0FBbUM7SUFDckQ7SUFDQSxJQUFJLFVBQVUsR0FBRztRQUNmLE1BQU0sSUFBSSxNQUFNLGdDQUFnQztJQUNsRDtJQUNBLE1BQU0sZUFBZSwyREFBUyxDQUFDLElBQUk7SUFDbkMsTUFBTSxVQUFVLHdFQUFrQixDQUFDLGlCQUFpQjtJQUVwRCxNQUFNLE1BQU0sS0FBSyxJQUFJLElBQUksV0FBVztJQUNwQyxPQUFPO1FBQ0wsR0FBRztRQUNIO1FBQ0EsTUFBTSw4REFBWSxDQUFDLFlBQVk7UUFDL0IsT0FBTztJQUNUO0FBQ0Y7QUFFQSxTQUFTLGlCQUNQLHdCQUNBLG1CQUNBLE1BQ0E7SUFDQSxJQUFJO0lBQ0osSUFBSSxrQ0FBa0MsTUFBTTtRQUMxQyxLQUFLLHVCQUF1QixRQUFRLElBQUk7SUFDMUMsV0FBVyxPQUFPLDJCQUEyQixVQUFVO1FBR3JELEtBQUsseUJBQXlCO0lBQ2hDLE9BQU87UUFDTCxNQUFNLElBQUksTUFBTSw0Q0FBNEM7SUFDOUQ7SUFDQSxNQUFNLFVBQVUsd0VBQWtCLENBQUMsaUJBQWlCO0lBQ3BELE1BQU0sZUFBZSwyREFBUyxDQUFDLElBQUk7SUFDbkMsT0FBTztRQUNMLEdBQUc7UUFDSDtRQUNBLE1BQU0sOERBQVksQ0FBQyxZQUFZO1FBQy9CLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvc3JjL3NlcnZlci9pbXBsL3NjaGVkdWxlcl9pbXBsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnZleFRvSnNvbiwgVmFsdWUgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBwZXJmb3JtQXN5bmNTeXNjYWxsIH0gZnJvbSBcIi4vc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHsgcGFyc2VBcmdzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZSwgU2NoZWR1bGVyIH0gZnJvbSBcIi4uL3NjaGVkdWxlci5qc1wiO1xuaW1wb3J0IHsgSWQgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5pbXBvcnQgeyBnZXRGdW5jdGlvbkFkZHJlc3MgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9wYXRocy5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBNdXRhdGlvblNjaGVkdWxlcigpOiBTY2hlZHVsZXIge1xuICByZXR1cm4ge1xuICAgIHJ1bkFmdGVyOiBhc3luYyAoXG4gICAgICBkZWxheU1zOiBudW1iZXIsXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZTogU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBzeXNjYWxsQXJncyA9IHJ1bkFmdGVyU3lzY2FsbEFyZ3MoZGVsYXlNcywgZnVuY3Rpb25SZWZlcmVuY2UsIGFyZ3MpO1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvc2NoZWR1bGVcIiwgc3lzY2FsbEFyZ3MpO1xuICAgIH0sXG4gICAgcnVuQXQ6IGFzeW5jIChcbiAgICAgIG1zX3NpbmNlX2Vwb2NoX29yX2RhdGU6IG51bWJlciB8IERhdGUsXG4gICAgICBmdW5jdGlvblJlZmVyZW5jZTogU2NoZWR1bGFibGVGdW5jdGlvblJlZmVyZW5jZSxcbiAgICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4gICAgKSA9PiB7XG4gICAgICBjb25zdCBzeXNjYWxsQXJncyA9IHJ1bkF0U3lzY2FsbEFyZ3MoXG4gICAgICAgIG1zX3NpbmNlX2Vwb2NoX29yX2RhdGUsXG4gICAgICAgIGZ1bmN0aW9uUmVmZXJlbmNlLFxuICAgICAgICBhcmdzLFxuICAgICAgKTtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3NjaGVkdWxlXCIsIHN5c2NhbGxBcmdzKTtcbiAgICB9LFxuICAgIGNhbmNlbDogYXN5bmMgKGlkOiBJZDxcIl9zY2hlZHVsZWRfZnVuY3Rpb25zXCI+KSA9PiB7XG4gICAgICB2YWxpZGF0ZUFyZyhpZCwgMSwgXCJjYW5jZWxcIiwgXCJpZFwiKTtcbiAgICAgIGNvbnN0IGFyZ3MgPSB7IGlkOiBjb252ZXhUb0pzb24oaWQpIH07XG4gICAgICBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2NhbmNlbF9qb2JcIiwgYXJncyk7XG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQWN0aW9uU2NoZWR1bGVyKHJlcXVlc3RJZDogc3RyaW5nKTogU2NoZWR1bGVyIHtcbiAgcmV0dXJuIHtcbiAgICBydW5BZnRlcjogYXN5bmMgKFxuICAgICAgZGVsYXlNczogbnVtYmVyLFxuICAgICAgZnVuY3Rpb25SZWZlcmVuY2U6IFNjaGVkdWxhYmxlRnVuY3Rpb25SZWZlcmVuY2UsXG4gICAgICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuICAgICkgPT4ge1xuICAgICAgY29uc3Qgc3lzY2FsbEFyZ3MgPSB7XG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgLi4ucnVuQWZ0ZXJTeXNjYWxsQXJncyhkZWxheU1zLCBmdW5jdGlvblJlZmVyZW5jZSwgYXJncyksXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvYWN0aW9ucy9zY2hlZHVsZVwiLCBzeXNjYWxsQXJncyk7XG4gICAgfSxcbiAgICBydW5BdDogYXN5bmMgKFxuICAgICAgbXNfc2luY2VfZXBvY2hfb3JfZGF0ZTogbnVtYmVyIHwgRGF0ZSxcbiAgICAgIGZ1bmN0aW9uUmVmZXJlbmNlOiBTY2hlZHVsYWJsZUZ1bmN0aW9uUmVmZXJlbmNlLFxuICAgICAgYXJncz86IFJlY29yZDxzdHJpbmcsIFZhbHVlPixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHN5c2NhbGxBcmdzID0ge1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIC4uLnJ1bkF0U3lzY2FsbEFyZ3MobXNfc2luY2VfZXBvY2hfb3JfZGF0ZSwgZnVuY3Rpb25SZWZlcmVuY2UsIGFyZ3MpLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL2FjdGlvbnMvc2NoZWR1bGVcIiwgc3lzY2FsbEFyZ3MpO1xuICAgIH0sXG4gICAgY2FuY2VsOiBhc3luYyAoaWQ6IElkPFwiX3NjaGVkdWxlZF9mdW5jdGlvbnNcIj4pID0+IHtcbiAgICAgIHZhbGlkYXRlQXJnKGlkLCAxLCBcImNhbmNlbFwiLCBcImlkXCIpO1xuICAgICAgY29uc3Qgc3lzY2FsbEFyZ3MgPSB7IGlkOiBjb252ZXhUb0pzb24oaWQpIH07XG4gICAgICByZXR1cm4gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9hY3Rpb25zL2NhbmNlbF9qb2JcIiwgc3lzY2FsbEFyZ3MpO1xuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIHJ1bkFmdGVyU3lzY2FsbEFyZ3MoXG4gIGRlbGF5TXM6IG51bWJlcixcbiAgZnVuY3Rpb25SZWZlcmVuY2U6IFNjaGVkdWxhYmxlRnVuY3Rpb25SZWZlcmVuY2UsXG4gIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4sXG4pIHtcbiAgaWYgKHR5cGVvZiBkZWxheU1zICE9PSBcIm51bWJlclwiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYGRlbGF5TXNgIG11c3QgYmUgYSBudW1iZXJcIik7XG4gIH1cbiAgaWYgKCFpc0Zpbml0ZShkZWxheU1zKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImBkZWxheU1zYCBtdXN0IGJlIGEgZmluaXRlIG51bWJlclwiKTtcbiAgfVxuICBpZiAoZGVsYXlNcyA8IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJgZGVsYXlNc2AgbXVzdCBiZSBub24tbmVnYXRpdmVcIik7XG4gIH1cbiAgY29uc3QgZnVuY3Rpb25BcmdzID0gcGFyc2VBcmdzKGFyZ3MpO1xuICBjb25zdCBhZGRyZXNzID0gZ2V0RnVuY3Rpb25BZGRyZXNzKGZ1bmN0aW9uUmVmZXJlbmNlKTtcbiAgLy8gTm90ZSB0aGUgc3lzY2FsbCBleHBlY3RzIGEgdW5peCB0aW1lc3RhbXAsIG1lYXN1cmVkIGluIHNlY29uZHMuXG4gIGNvbnN0IHRzID0gKERhdGUubm93KCkgKyBkZWxheU1zKSAvIDEwMDAuMDtcbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRyZXNzLFxuICAgIHRzLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihmdW5jdGlvbkFyZ3MpLFxuICAgIHZlcnNpb24sXG4gIH07XG59XG5cbmZ1bmN0aW9uIHJ1bkF0U3lzY2FsbEFyZ3MoXG4gIG1zX3NpbmNlX2Vwb2NoX29yX2RhdGU6IG51bWJlciB8IERhdGUsXG4gIGZ1bmN0aW9uUmVmZXJlbmNlOiBTY2hlZHVsYWJsZUZ1bmN0aW9uUmVmZXJlbmNlLFxuICBhcmdzPzogUmVjb3JkPHN0cmluZywgVmFsdWU+LFxuKSB7XG4gIGxldCB0cztcbiAgaWYgKG1zX3NpbmNlX2Vwb2NoX29yX2RhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgdHMgPSBtc19zaW5jZV9lcG9jaF9vcl9kYXRlLnZhbHVlT2YoKSAvIDEwMDAuMDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbXNfc2luY2VfZXBvY2hfb3JfZGF0ZSA9PT0gXCJudW1iZXJcIikge1xuICAgIC8vIFRoZSB0aW1lc3RhbXAgdGhlIGRldmVsb3BlciBwYXNzZXMgaXMgaW4gbWlsbGlzZWNvbmRzLCB3aGlsZSB0aGUgc3lzY2FsbFxuICAgIC8vIGFjY2VwdHMgc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2guXG4gICAgdHMgPSBtc19zaW5jZV9lcG9jaF9vcl9kYXRlIC8gMTAwMDtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgaW52b2tlIHRpbWUgbXVzdCBhIERhdGUgb3IgYSB0aW1lc3RhbXBcIik7XG4gIH1cbiAgY29uc3QgYWRkcmVzcyA9IGdldEZ1bmN0aW9uQWRkcmVzcyhmdW5jdGlvblJlZmVyZW5jZSk7XG4gIGNvbnN0IGZ1bmN0aW9uQXJncyA9IHBhcnNlQXJncyhhcmdzKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRyZXNzLFxuICAgIHRzLFxuICAgIGFyZ3M6IGNvbnZleFRvSnNvbihmdW5jdGlvbkFyZ3MpLFxuICAgIHZlcnNpb24sXG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/scheduler_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js":
/*!********************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SearchFilterBuilderImpl: () => (/* binding */ SearchFilterBuilderImpl)\n/* harmony export */ });\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../search_filter_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\nclass SearchFilterBuilderImpl extends _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_1__.SearchFilter {\n    constructor(filters){\n        super();\n        __publicField(this, \"filters\");\n        __publicField(this, \"isConsumed\");\n        this.filters = filters;\n        this.isConsumed = false;\n    }\n    static new() {\n        return new SearchFilterBuilderImpl([]);\n    }\n    consume() {\n        if (this.isConsumed) {\n            throw new Error(\"SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.\");\n        }\n        this.isConsumed = true;\n    }\n    search(fieldName, query) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(fieldName, 1, \"search\", \"fieldName\");\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(query, 2, \"search\", \"query\");\n        this.consume();\n        return new SearchFilterBuilderImpl(this.filters.concat({\n            type: \"Search\",\n            fieldPath: fieldName,\n            value: query\n        }));\n    }\n    eq(fieldName, value) {\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(fieldName, 1, \"eq\", \"fieldName\");\n        if (arguments.length !== 2) {\n            (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(value, 2, \"search\", \"value\");\n        }\n        this.consume();\n        return new SearchFilterBuilderImpl(this.filters.concat({\n            type: \"Eq\",\n            fieldPath: fieldName,\n            value: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_0__.convexOrUndefinedToJson)(value)\n        }));\n    }\n    export() {\n        this.consume();\n        return this.filters;\n    }\n} //# sourceMappingURL=search_filter_builder_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3NlYXJjaF9maWx0ZXJfYnVpbGRlcl9pbXBsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBbUQ7QUFVNUM7QUFDcUI7QUFjckIsTUFBTSxnQ0FDSCxtRUFBWSxDQUl0QjtJQUdVLFlBQVksUUFBZ0Q7UUFDbEUsTUFBTTtRQUhSLG9CQUFRO1FBQ1Isb0JBQVE7UUFHTixLQUFLLFVBQVU7UUFDZixLQUFLLGFBQWE7SUFDcEI7SUFFQSxPQUFPLE1BQStCO1FBQ3BDLE9BQU8sSUFBSSx3QkFBd0IsQ0FBQyxDQUFDO0lBQ3ZDO0lBRVEsVUFBVTtRQUNoQixJQUFJLEtBQUssWUFBWTtZQUNuQixNQUFNLElBQUksTUFDUjtRQUVKO1FBQ0EsS0FBSyxhQUFhO0lBQ3BCO0lBRUEsT0FDRSxXQUNBLE9BQ2tFO1FBQ2xFLHlEQUFXLENBQUMsV0FBVyxHQUFHLFVBQVUsV0FBVztRQUMvQyx5REFBVyxDQUFDLE9BQU8sR0FBRyxVQUFVLE9BQU87UUFDdkMsS0FBSyxRQUFRO1FBQ2IsT0FBTyxJQUFJLHdCQUNULEtBQUssUUFBUSxPQUFPO1lBQ2xCLE1BQU07WUFDTixXQUFXO1lBQ1gsT0FBTztRQUNULENBQUM7SUFFTDtJQUNBLEdBQ0UsV0FDQSxPQUNrRTtRQUNsRSx5REFBVyxDQUFDLFdBQVcsR0FBRyxNQUFNLFdBQVc7UUFFM0MsSUFBSSxVQUFVLFdBQVcsR0FBRztZQUMxQix5REFBVyxDQUFDLE9BQU8sR0FBRyxVQUFVLE9BQU87UUFDekM7UUFDQSxLQUFLLFFBQVE7UUFDYixPQUFPLElBQUksd0JBQ1QsS0FBSyxRQUFRLE9BQU87WUFDbEIsTUFBTTtZQUNOLFdBQVc7WUFDWCxPQUFPLHlFQUF1QixDQUFDLEtBQUs7UUFDdEMsQ0FBQztJQUVMO0lBRUEsU0FBUztRQUNQLEtBQUssUUFBUTtRQUNiLE9BQU8sS0FBSztJQUNkO0FBQ0YiLCJzb3VyY2VzIjpbIi9zcmMvc2VydmVyL2ltcGwvc2VhcmNoX2ZpbHRlcl9idWlsZGVyX2ltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSlNPTlZhbHVlLCBjb252ZXhPclVuZGVmaW5lZFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7XG4gIEZpZWxkVHlwZUZyb21GaWVsZFBhdGgsXG4gIEdlbmVyaWNEb2N1bWVudCxcbiAgR2VuZXJpY1NlYXJjaEluZGV4Q29uZmlnLFxufSBmcm9tIFwiLi4vZGF0YV9tb2RlbC5qc1wiO1xuaW1wb3J0IHtcbiAgU2VhcmNoRmlsdGVyLFxuICBTZWFyY2hGaWx0ZXJCdWlsZGVyLFxuICBTZWFyY2hGaWx0ZXJGaW5hbGl6ZXIsXG59IGZyb20gXCIuLi9zZWFyY2hfZmlsdGVyX2J1aWxkZXIuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlQXJnIH0gZnJvbSBcIi4vdmFsaWRhdGUuanNcIjtcblxuZXhwb3J0IHR5cGUgU2VyaWFsaXplZFNlYXJjaEZpbHRlciA9XG4gIHwge1xuICAgICAgdHlwZTogXCJTZWFyY2hcIjtcbiAgICAgIGZpZWxkUGF0aDogc3RyaW5nO1xuICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogXCJFcVwiO1xuICAgICAgZmllbGRQYXRoOiBzdHJpbmc7XG4gICAgICB2YWx1ZTogSlNPTlZhbHVlO1xuICAgIH07XG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbFxuICBleHRlbmRzIFNlYXJjaEZpbHRlclxuICBpbXBsZW1lbnRzXG4gICAgU2VhcmNoRmlsdGVyQnVpbGRlcjxHZW5lcmljRG9jdW1lbnQsIEdlbmVyaWNTZWFyY2hJbmRleENvbmZpZz4sXG4gICAgU2VhcmNoRmlsdGVyRmluYWxpemVyPEdlbmVyaWNEb2N1bWVudCwgR2VuZXJpY1NlYXJjaEluZGV4Q29uZmlnPlxue1xuICBwcml2YXRlIGZpbHRlcnM6IFJlYWRvbmx5QXJyYXk8U2VyaWFsaXplZFNlYXJjaEZpbHRlcj47XG4gIHByaXZhdGUgaXNDb25zdW1lZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihmaWx0ZXJzOiBSZWFkb25seUFycmF5PFNlcmlhbGl6ZWRTZWFyY2hGaWx0ZXI+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZpbHRlcnMgPSBmaWx0ZXJzO1xuICAgIHRoaXMuaXNDb25zdW1lZCA9IGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIG5ldygpOiBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbCB7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbChbXSk7XG4gIH1cblxuICBwcml2YXRlIGNvbnN1bWUoKSB7XG4gICAgaWYgKHRoaXMuaXNDb25zdW1lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlNlYXJjaEZpbHRlckJ1aWxkZXIgaGFzIGFscmVhZHkgYmVlbiB1c2VkISBDaGFpbiB5b3VyIG1ldGhvZCBjYWxscyBsaWtlIGBxID0+IHEuc2VhcmNoKC4uLikuZXEoLi4uKWAuXCIsXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLmlzQ29uc3VtZWQgPSB0cnVlO1xuICB9XG5cbiAgc2VhcmNoKFxuICAgIGZpZWxkTmFtZTogc3RyaW5nLFxuICAgIHF1ZXJ5OiBzdHJpbmcsXG4gICk6IFNlYXJjaEZpbHRlckZpbmFsaXplcjxHZW5lcmljRG9jdW1lbnQsIEdlbmVyaWNTZWFyY2hJbmRleENvbmZpZz4ge1xuICAgIHZhbGlkYXRlQXJnKGZpZWxkTmFtZSwgMSwgXCJzZWFyY2hcIiwgXCJmaWVsZE5hbWVcIik7XG4gICAgdmFsaWRhdGVBcmcocXVlcnksIDIsIFwic2VhcmNoXCIsIFwicXVlcnlcIik7XG4gICAgdGhpcy5jb25zdW1lKCk7XG4gICAgcmV0dXJuIG5ldyBTZWFyY2hGaWx0ZXJCdWlsZGVySW1wbChcbiAgICAgIHRoaXMuZmlsdGVycy5jb25jYXQoe1xuICAgICAgICB0eXBlOiBcIlNlYXJjaFwiLFxuICAgICAgICBmaWVsZFBhdGg6IGZpZWxkTmFtZSxcbiAgICAgICAgdmFsdWU6IHF1ZXJ5LFxuICAgICAgfSksXG4gICAgKTtcbiAgfVxuICBlcTxGaWVsZE5hbWUgZXh0ZW5kcyBzdHJpbmc+KFxuICAgIGZpZWxkTmFtZTogRmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPEdlbmVyaWNEb2N1bWVudCwgRmllbGROYW1lPixcbiAgKTogU2VhcmNoRmlsdGVyRmluYWxpemVyPEdlbmVyaWNEb2N1bWVudCwgR2VuZXJpY1NlYXJjaEluZGV4Q29uZmlnPiB7XG4gICAgdmFsaWRhdGVBcmcoZmllbGROYW1lLCAxLCBcImVxXCIsIFwiZmllbGROYW1lXCIpO1xuICAgIC8vIHdoZW4gYHVuZGVmaW5lZGAgaXMgcGFzc2VkIGV4cGxpY2l0bHksIGl0IGlzIGFsbG93ZWQuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDIpIHtcbiAgICAgIHZhbGlkYXRlQXJnKHZhbHVlLCAyLCBcInNlYXJjaFwiLCBcInZhbHVlXCIpO1xuICAgIH1cbiAgICB0aGlzLmNvbnN1bWUoKTtcbiAgICByZXR1cm4gbmV3IFNlYXJjaEZpbHRlckJ1aWxkZXJJbXBsKFxuICAgICAgdGhpcy5maWx0ZXJzLmNvbmNhdCh7XG4gICAgICAgIHR5cGU6IFwiRXFcIixcbiAgICAgICAgZmllbGRQYXRoOiBmaWVsZE5hbWUsXG4gICAgICAgIHZhbHVlOiBjb252ZXhPclVuZGVmaW5lZFRvSnNvbih2YWx1ZSksXG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgZXhwb3J0KCkge1xuICAgIHRoaXMuY29uc3VtZSgpO1xuICAgIHJldHVybiB0aGlzLmZpbHRlcnM7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/search_filter_builder_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/storage_impl.js":
/*!******************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/storage_impl.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupStorageActionWriter: () => (/* binding */ setupStorageActionWriter),\n/* harmony export */   setupStorageReader: () => (/* binding */ setupStorageReader),\n/* harmony export */   setupStorageWriter: () => (/* binding */ setupStorageWriter)\n/* harmony export */ });\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n\n\n\n\nfunction setupStorageReader(requestId) {\n    return {\n        getUrl: async (storageId)=>{\n            (0,_validate_js__WEBPACK_IMPORTED_MODULE_2__.validateArg)(storageId, 1, \"getUrl\", \"storageId\");\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageGetUrl\", {\n                requestId,\n                version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n                storageId\n            });\n        },\n        getMetadata: async (storageId)=>{\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageGetMetadata\", {\n                requestId,\n                version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n                storageId\n            });\n        }\n    };\n}\nfunction setupStorageWriter(requestId) {\n    const reader = setupStorageReader(requestId);\n    return {\n        generateUploadUrl: async ()=>{\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageGenerateUploadUrl\", {\n                requestId,\n                version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version\n            });\n        },\n        delete: async (storageId)=>{\n            await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performAsyncSyscall)(\"1.0/storageDelete\", {\n                requestId,\n                version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n                storageId\n            });\n        },\n        getUrl: reader.getUrl,\n        getMetadata: reader.getMetadata\n    };\n}\nfunction setupStorageActionWriter(requestId) {\n    const writer = setupStorageWriter(requestId);\n    return {\n        ...writer,\n        store: async (blob, options)=>{\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performJsSyscall)(\"storage/storeBlob\", {\n                requestId,\n                version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n                blob,\n                options\n            });\n        },\n        get: async (storageId)=>{\n            return await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_1__.performJsSyscall)(\"storage/getBlob\", {\n                requestId,\n                version: _index_js__WEBPACK_IMPORTED_MODULE_0__.version,\n                storageId\n            });\n        }\n    };\n} //# sourceMappingURL=storage_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3N0b3JhZ2VfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBT3dCO0FBQzhCO0FBQzFCO0FBRXJCLFNBQVMsbUJBQW1CLFdBQWtDO0lBQ25FLE9BQU87UUFDTCxRQUFRLE9BQU87WUFDYix5REFBVyxDQUFDLFdBQVcsR0FBRyxVQUFVLFdBQVc7WUFDL0MsT0FBTyxNQUFNLGdFQUFtQixDQUFDLHFCQUFxQjtnQkFDcEQ7Z0JBQ0EsT0FBTztnQkFDUDtZQUNGLENBQUM7UUFDSDtRQUNBLGFBQWEsT0FBTztZQUNsQixPQUFPLE1BQU0sZ0VBQW1CLENBQUMsMEJBQTBCO2dCQUN6RDtnQkFDQSxPQUFPO2dCQUNQO1lBQ0YsQ0FBQztRQUNIO0lBQ0Y7QUFDRjtBQUVPLFNBQVMsbUJBQW1CLFdBQWtDO0lBQ25FLE1BQU0sU0FBUyxtQkFBbUIsU0FBUztJQUMzQyxPQUFPO1FBQ0wsbUJBQW1CO1lBQ2pCLE9BQU8sTUFBTSxnRUFBbUIsQ0FBQyxnQ0FBZ0M7Z0JBQy9EO2dCQUNBLE9BQU87WUFDVCxDQUFDO1FBQ0g7UUFDQSxRQUFRLE9BQU87WUFDYixNQUFNLGdFQUFtQixDQUFDLHFCQUFxQjtnQkFDN0M7Z0JBQ0EsT0FBTztnQkFDUDtZQUNGLENBQUM7UUFDSDtRQUNBLFFBQVEsT0FBTztRQUNmLGFBQWEsT0FBTztJQUN0QjtBQUNGO0FBRU8sU0FBUyx5QkFDZCxXQUNxQjtJQUNyQixNQUFNLFNBQVMsbUJBQW1CLFNBQVM7SUFDM0MsT0FBTztRQUNMLEdBQUc7UUFDSCxPQUFPLE9BQU8sTUFBWTtZQUN4QixPQUFPLE1BQU0sNkRBQWdCLENBQUMscUJBQXFCO2dCQUNqRDtnQkFDQSxPQUFPO2dCQUNQO2dCQUNBO1lBQ0YsQ0FBQztRQUNIO1FBQ0EsS0FBSyxPQUFPO1lBQ1YsT0FBTyxNQUFNLDZEQUFnQixDQUFDLG1CQUFtQjtnQkFDL0M7Z0JBQ0EsT0FBTztnQkFDUDtZQUNGLENBQUM7UUFDSDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9zcmMvc2VydmVyL2ltcGwvc3RvcmFnZV9pbXBsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEZpbGVNZXRhZGF0YSxcbiAgU3RvcmFnZUFjdGlvbldyaXRlcixcbiAgRmlsZVN0b3JhZ2VJZCxcbiAgU3RvcmFnZVJlYWRlcixcbiAgU3RvcmFnZVdyaXRlcixcbn0gZnJvbSBcIi4uL3N0b3JhZ2UuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7IHBlcmZvcm1Bc3luY1N5c2NhbGwsIHBlcmZvcm1Kc1N5c2NhbGwgfSBmcm9tIFwiLi9zeXNjYWxsLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZUFyZyB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFN0b3JhZ2VSZWFkZXIocmVxdWVzdElkOiBzdHJpbmcpOiBTdG9yYWdlUmVhZGVyIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRVcmw6IGFzeW5jIChzdG9yYWdlSWQ6IEZpbGVTdG9yYWdlSWQpID0+IHtcbiAgICAgIHZhbGlkYXRlQXJnKHN0b3JhZ2VJZCwgMSwgXCJnZXRVcmxcIiwgXCJzdG9yYWdlSWRcIik7XG4gICAgICByZXR1cm4gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9zdG9yYWdlR2V0VXJsXCIsIHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICBzdG9yYWdlSWQsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldE1ldGFkYXRhOiBhc3luYyAoc3RvcmFnZUlkOiBGaWxlU3RvcmFnZUlkKTogUHJvbWlzZTxGaWxlTWV0YWRhdGE+ID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtQXN5bmNTeXNjYWxsKFwiMS4wL3N0b3JhZ2VHZXRNZXRhZGF0YVwiLCB7XG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgICAgc3RvcmFnZUlkLFxuICAgICAgfSk7XG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU3RvcmFnZVdyaXRlcihyZXF1ZXN0SWQ6IHN0cmluZyk6IFN0b3JhZ2VXcml0ZXIge1xuICBjb25zdCByZWFkZXIgPSBzZXR1cFN0b3JhZ2VSZWFkZXIocmVxdWVzdElkKTtcbiAgcmV0dXJuIHtcbiAgICBnZW5lcmF0ZVVwbG9hZFVybDogYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvc3RvcmFnZUdlbmVyYXRlVXBsb2FkVXJsXCIsIHtcbiAgICAgICAgcmVxdWVzdElkLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBkZWxldGU6IGFzeW5jIChzdG9yYWdlSWQ6IEZpbGVTdG9yYWdlSWQpID0+IHtcbiAgICAgIGF3YWl0IHBlcmZvcm1Bc3luY1N5c2NhbGwoXCIxLjAvc3RvcmFnZURlbGV0ZVwiLCB7XG4gICAgICAgIHJlcXVlc3RJZCxcbiAgICAgICAgdmVyc2lvbixcbiAgICAgICAgc3RvcmFnZUlkLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRVcmw6IHJlYWRlci5nZXRVcmwsXG4gICAgZ2V0TWV0YWRhdGE6IHJlYWRlci5nZXRNZXRhZGF0YSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwU3RvcmFnZUFjdGlvbldyaXRlcihcbiAgcmVxdWVzdElkOiBzdHJpbmcsXG4pOiBTdG9yYWdlQWN0aW9uV3JpdGVyIHtcbiAgY29uc3Qgd3JpdGVyID0gc2V0dXBTdG9yYWdlV3JpdGVyKHJlcXVlc3RJZCk7XG4gIHJldHVybiB7XG4gICAgLi4ud3JpdGVyLFxuICAgIHN0b3JlOiBhc3luYyAoYmxvYjogQmxvYiwgb3B0aW9ucz86IHsgc2hhMjU2Pzogc3RyaW5nIH0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCBwZXJmb3JtSnNTeXNjYWxsKFwic3RvcmFnZS9zdG9yZUJsb2JcIiwge1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICAgIGJsb2IsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldDogYXN5bmMgKHN0b3JhZ2VJZDogRmlsZVN0b3JhZ2VJZCkgPT4ge1xuICAgICAgcmV0dXJuIGF3YWl0IHBlcmZvcm1Kc1N5c2NhbGwoXCJzdG9yYWdlL2dldEJsb2JcIiwge1xuICAgICAgICByZXF1ZXN0SWQsXG4gICAgICAgIHZlcnNpb24sXG4gICAgICAgIHN0b3JhZ2VJZCxcbiAgICAgIH0pO1xuICAgIH0sXG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/storage_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/syscall.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   performAsyncSyscall: () => (/* binding */ performAsyncSyscall),\n/* harmony export */   performJsSyscall: () => (/* binding */ performJsSyscall),\n/* harmony export */   performSyscall: () => (/* binding */ performSyscall)\n/* harmony export */ });\n/* harmony import */ var _values_errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../values/errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\n\n\nfunction performSyscall(op, arg) {\n    if (typeof Convex === \"undefined\" || Convex.syscall === void 0) {\n        throw new Error(\"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\");\n    }\n    const resultStr = Convex.syscall(op, JSON.stringify(arg));\n    return JSON.parse(resultStr);\n}\nasync function performAsyncSyscall(op, arg) {\n    if (typeof Convex === \"undefined\" || Convex.asyncSyscall === void 0) {\n        throw new Error(\"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\");\n    }\n    let resultStr;\n    try {\n        resultStr = await Convex.asyncSyscall(op, JSON.stringify(arg));\n    } catch (e) {\n        if (e.data !== void 0) {\n            const rethrown = new _values_errors_js__WEBPACK_IMPORTED_MODULE_0__.ConvexError(e.message);\n            rethrown.data = (0,_values_value_js__WEBPACK_IMPORTED_MODULE_1__.jsonToConvex)(e.data);\n            throw rethrown;\n        }\n        throw new Error(e.message);\n    }\n    return JSON.parse(resultStr);\n}\nfunction performJsSyscall(op, arg) {\n    if (typeof Convex === \"undefined\" || Convex.jsSyscall === void 0) {\n        throw new Error(\"The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?\");\n    }\n    return Convex.jsSyscall(op, arg);\n} //# sourceMappingURL=syscall.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3N5c2NhbGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTRCO0FBQ0M7QUFldEIsU0FBUyxlQUFlLElBQVksS0FBK0I7SUFDeEUsSUFBSSxPQUFPLFdBQVcsZUFBZSxPQUFPLFlBQVksUUFBVztRQUNqRSxNQUFNLElBQUksTUFDUjtJQUdKO0lBQ0EsTUFBTSxZQUFZLE9BQU8sUUFBUSxJQUFJLEtBQUssVUFBVSxHQUFHLENBQUM7SUFDeEQsT0FBTyxLQUFLLE1BQU0sU0FBUztBQUM3QjtBQUVBLGVBQXNCLG9CQUNwQixJQUNBLEtBQ2M7SUFDZCxJQUFJLE9BQU8sV0FBVyxlQUFlLE9BQU8saUJBQWlCLFFBQVc7UUFDdEUsTUFBTSxJQUFJLE1BQ1I7SUFHSjtJQUNBLElBQUk7SUFDSixJQUFJO1FBQ0YsWUFBWSxNQUFNLE9BQU8sYUFBYSxJQUFJLEtBQUssVUFBVSxHQUFHLENBQUM7SUFDL0QsU0FBUyxHQUFRO1FBTWYsSUFBSSxFQUFFLFNBQVMsUUFBVztZQUN4QixNQUFNLFdBQVcsSUFBSSwwREFBVyxDQUFDLEVBQUUsT0FBTztZQUMxQyxTQUFTLE9BQU8sOERBQVksQ0FBQyxFQUFFLElBQUk7WUFDbkMsTUFBTTtRQUNSO1FBQ0EsTUFBTSxJQUFJLE1BQU0sRUFBRSxPQUFPO0lBQzNCO0lBQ0EsT0FBTyxLQUFLLE1BQU0sU0FBUztBQUM3QjtBQVdPLFNBQVMsaUJBQWlCLElBQVksS0FBK0I7SUFDMUUsSUFBSSxPQUFPLFdBQVcsZUFBZSxPQUFPLGNBQWMsUUFBVztRQUNuRSxNQUFNLElBQUksTUFDUjtJQUdKO0lBQ0EsT0FBTyxPQUFPLFVBQVUsSUFBSSxHQUFHO0FBQ2pDIiwic291cmNlcyI6WyIvc3JjL3NlcnZlci9pbXBsL3N5c2NhbGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udmV4RXJyb3IgfSBmcm9tIFwiLi4vLi4vdmFsdWVzL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsganNvblRvQ29udmV4IH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy92YWx1ZS5qc1wiO1xuXG5kZWNsYXJlIGNvbnN0IENvbnZleDoge1xuICBzeXNjYWxsOiAob3A6IHN0cmluZywganNvbkFyZ3M6IHN0cmluZykgPT4gc3RyaW5nO1xuICBhc3luY1N5c2NhbGw6IChvcDogc3RyaW5nLCBqc29uQXJnczogc3RyaW5nKSA9PiBQcm9taXNlPHN0cmluZz47XG4gIGpzU3lzY2FsbDogKG9wOiBzdHJpbmcsIGFyZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IGFueTtcbn07XG4vKipcbiAqIFBlcmZvcm0gYSBzeXNjYWxsLCB0YWtpbmcgaW4gYSBKU09OLWVuY29kYWJsZSBvYmplY3QgYXMgYW4gYXJndW1lbnQsIHNlcmlhbGl6aW5nIHdpdGhcbiAqIEpTT04uc3RyaW5naWZ5LCBjYWxsaW5nIGludG8gUnVzdCwgYW5kIHRoZW4gcGFyc2luZyB0aGUgcmVzcG9uc2UgYXMgYSBKU09OLWVuY29kYWJsZVxuICogdmFsdWUuIElmIG9uZSBvZiB5b3VyIGFyZ3VtZW50cyBpcyBhIENvbnZleCB2YWx1ZSwgeW91IG11c3QgY2FsbCBgY29udmV4VG9Kc29uYCBvbiBpdFxuICogYmVmb3JlIHBhc3NpbmcgaXQgdG8gdGhpcyBmdW5jdGlvbiwgYW5kIGlmIHRoZSByZXR1cm4gdmFsdWUgaGFzIGEgQ29udmV4IHZhbHVlLCB5b3UncmVcbiAqIGFsc28gcmVzcG9uc2libGUgZm9yIGNhbGxpbmcgYGpzb25Ub0NvbnZleGA6IFRoaXMgbGF5ZXIgb25seSBkZWFscyBpbiBKU09OLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwZXJmb3JtU3lzY2FsbChvcDogc3RyaW5nLCBhcmc6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBhbnkge1xuICBpZiAodHlwZW9mIENvbnZleCA9PT0gXCJ1bmRlZmluZWRcIiB8fCBDb252ZXguc3lzY2FsbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJUaGUgQ29udmV4IGRhdGFiYXNlIGFuZCBhdXRoIG9iamVjdHMgYXJlIGJlaW5nIHVzZWQgb3V0c2lkZSBvZiBhIENvbnZleCBiYWNrZW5kLiBcIiArXG4gICAgICAgIFwiRGlkIHlvdSBtZWFuIHRvIHVzZSBgdXNlUXVlcnlgIG9yIGB1c2VNdXRhdGlvbmAgdG8gY2FsbCBhIENvbnZleCBmdW5jdGlvbj9cIixcbiAgICApO1xuICB9XG4gIGNvbnN0IHJlc3VsdFN0ciA9IENvbnZleC5zeXNjYWxsKG9wLCBKU09OLnN0cmluZ2lmeShhcmcpKTtcbiAgcmV0dXJuIEpTT04ucGFyc2UocmVzdWx0U3RyKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1Bc3luY1N5c2NhbGwoXG4gIG9wOiBzdHJpbmcsXG4gIGFyZzogUmVjb3JkPHN0cmluZywgYW55Pixcbik6IFByb21pc2U8YW55PiB7XG4gIGlmICh0eXBlb2YgQ29udmV4ID09PSBcInVuZGVmaW5lZFwiIHx8IENvbnZleC5hc3luY1N5c2NhbGwgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiVGhlIENvbnZleCBkYXRhYmFzZSBhbmQgYXV0aCBvYmplY3RzIGFyZSBiZWluZyB1c2VkIG91dHNpZGUgb2YgYSBDb252ZXggYmFja2VuZC4gXCIgK1xuICAgICAgICBcIkRpZCB5b3UgbWVhbiB0byB1c2UgYHVzZVF1ZXJ5YCBvciBgdXNlTXV0YXRpb25gIHRvIGNhbGwgYSBDb252ZXggZnVuY3Rpb24/XCIsXG4gICAgKTtcbiAgfVxuICBsZXQgcmVzdWx0U3RyO1xuICB0cnkge1xuICAgIHJlc3VsdFN0ciA9IGF3YWl0IENvbnZleC5hc3luY1N5c2NhbGwob3AsIEpTT04uc3RyaW5naWZ5KGFyZykpO1xuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAvLyBSZXRocm93IHRoZSBleGNlcHRpb24gdG8gYXR0YWNoIHN0YWNrIHRyYWNlIHN0YXJ0aW5nIGZyb20gaGVyZS5cbiAgICAvLyBJZiB0aGUgZXJyb3IgY2FtZSBmcm9tIEpTIGl0IHdpbGwgaW5jbHVkZSBpdHMgb3duIHN0YWNrIHRyYWNlIGluIHRoZSBtZXNzYWdlLlxuICAgIC8vIElmIGl0IGNhbWUgZnJvbSBSdXN0IGl0IHdvbid0LlxuXG4gICAgLy8gVGhpcyBvbmx5IGhhcHBlbnMgaWYgd2UncmUgcHJvcGFnYXRpbmcgQ29udmV4RXJyb3JzXG4gICAgaWYgKGUuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCByZXRocm93biA9IG5ldyBDb252ZXhFcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgcmV0aHJvd24uZGF0YSA9IGpzb25Ub0NvbnZleChlLmRhdGEpO1xuICAgICAgdGhyb3cgcmV0aHJvd247XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihlLm1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBKU09OLnBhcnNlKHJlc3VsdFN0cik7XG59XG5cbi8qKlxuICogQ2FsbCBpbnRvIGEgXCJKU1wiIHN5c2NhbGwuIExpa2UgYHBlcmZvcm1TeXNjYWxsYCwgdGhpcyBjYWxscyBhIGR5bmFtaWNhbGx5IGxpbmtlZFxuICogZnVuY3Rpb24gc2V0IHVwIGluIHRoZSBDb252ZXggZnVuY3Rpb24gZXhlY3V0aW9uLiBVbmxpa2UgYHBlcmZvcm1TeXNjYWxsYCwgdGhlXG4gKiBhcmd1bWVudHMgZG8gbm90IG5lZWQgdG8gYmUgSlNPTi1lbmNvZGFibGUgYW5kIG5laXRoZXIgZG9lcyB0aGUgcmV0dXJuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBvcFxuICogQHBhcmFtIGFyZ1xuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBlcmZvcm1Kc1N5c2NhbGwob3A6IHN0cmluZywgYXJnOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogYW55IHtcbiAgaWYgKHR5cGVvZiBDb252ZXggPT09IFwidW5kZWZpbmVkXCIgfHwgQ29udmV4LmpzU3lzY2FsbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJUaGUgQ29udmV4IGRhdGFiYXNlIGFuZCBhdXRoIG9iamVjdHMgYXJlIGJlaW5nIHVzZWQgb3V0c2lkZSBvZiBhIENvbnZleCBiYWNrZW5kLiBcIiArXG4gICAgICAgIFwiRGlkIHlvdSBtZWFuIHRvIHVzZSBgdXNlUXVlcnlgIG9yIGB1c2VNdXRhdGlvbmAgdG8gY2FsbCBhIENvbnZleCBmdW5jdGlvbj9cIixcbiAgICApO1xuICB9XG4gIHJldHVybiBDb252ZXguanNTeXNjYWxsKG9wLCBhcmcpO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/validate.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateArg: () => (/* binding */ validateArg),\n/* harmony export */   validateArgIsInteger: () => (/* binding */ validateArgIsInteger),\n/* harmony export */   validateArgIsNonNegativeInteger: () => (/* binding */ validateArgIsNonNegativeInteger)\n/* harmony export */ });\n\nfunction validateArg(arg, idx, method, argName) {\n    if (arg === void 0) {\n        throw new TypeError(`Must provide arg ${idx} \\`${argName}\\` to \\`${method}\\``);\n    }\n}\nfunction validateArgIsInteger(arg, idx, method, argName) {\n    if (!Number.isInteger(arg)) {\n        throw new TypeError(`Arg ${idx} \\`${argName}\\` to \\`${method}\\` must be an integer`);\n    }\n}\nfunction validateArgIsNonNegativeInteger(arg, idx, method, argName) {\n    if (!Number.isInteger(arg) || arg < 0) {\n        throw new TypeError(`Arg ${idx} \\`${argName}\\` to \\`${method}\\` must be a non-negative integer`);\n    }\n} //# sourceMappingURL=validate.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3ZhbGlkYXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTyxTQUFTLFlBQ2QsS0FDQSxLQUNBLFFBQ0EsU0FDQTtJQUNBLElBQUksUUFBUSxRQUFXO1FBQ3JCLE1BQU0sSUFBSSxVQUNSLG9CQUFvQixHQUFHLE1BQU0sT0FBTyxXQUFXLE1BQU07SUFFekQ7QUFDRjtBQUVPLFNBQVMscUJBQ2QsS0FDQSxLQUNBLFFBQ0EsU0FDQTtJQUNBLElBQUksQ0FBQyxPQUFPLFVBQVUsR0FBRyxHQUFHO1FBQzFCLE1BQU0sSUFBSSxVQUNSLE9BQU8sR0FBRyxNQUFNLE9BQU8sV0FBVyxNQUFNO0lBRTVDO0FBQ0Y7QUFFTyxTQUFTLGdDQUNkLEtBQ0EsS0FDQSxRQUNBLFNBQ0E7SUFDQSxJQUFJLENBQUMsT0FBTyxVQUFVLEdBQUcsS0FBSyxNQUFNLEdBQUc7UUFDckMsTUFBTSxJQUFJLFVBQ1IsT0FBTyxHQUFHLE1BQU0sT0FBTyxXQUFXLE1BQU07SUFFNUM7QUFDRiIsInNvdXJjZXMiOlsiL3NyYy9zZXJ2ZXIvaW1wbC92YWxpZGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBcmcoXG4gIGFyZzogYW55LFxuICBpZHg6IG51bWJlcixcbiAgbWV0aG9kOiBzdHJpbmcsXG4gIGFyZ05hbWU6IHN0cmluZyxcbikge1xuICBpZiAoYXJnID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYE11c3QgcHJvdmlkZSBhcmcgJHtpZHh9IFxcYCR7YXJnTmFtZX1cXGAgdG8gXFxgJHttZXRob2R9XFxgYCxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFyZ0lzSW50ZWdlcihcbiAgYXJnOiBhbnksXG4gIGlkeDogbnVtYmVyLFxuICBtZXRob2Q6IHN0cmluZyxcbiAgYXJnTmFtZTogc3RyaW5nLFxuKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihhcmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBBcmcgJHtpZHh9IFxcYCR7YXJnTmFtZX1cXGAgdG8gXFxgJHttZXRob2R9XFxgIG11c3QgYmUgYW4gaW50ZWdlcmAsXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBcmdJc05vbk5lZ2F0aXZlSW50ZWdlcihcbiAgYXJnOiBhbnksXG4gIGlkeDogbnVtYmVyLFxuICBtZXRob2Q6IHN0cmluZyxcbiAgYXJnTmFtZTogc3RyaW5nLFxuKSB7XG4gIGlmICghTnVtYmVyLmlzSW50ZWdlcihhcmcpIHx8IGFyZyA8IDApIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYEFyZyAke2lkeH0gXFxgJHthcmdOYW1lfVxcYCB0byBcXGAke21ldGhvZH1cXGAgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyYCxcbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/impl/vector_search_impl.js":
/*!************************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/impl/vector_search_impl.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExpressionImpl: () => (/* binding */ ExpressionImpl),\n/* harmony export */   VectorQueryImpl: () => (/* binding */ VectorQueryImpl),\n/* harmony export */   filterBuilderImpl: () => (/* binding */ filterBuilderImpl),\n/* harmony export */   serializeExpression: () => (/* binding */ serializeExpression),\n/* harmony export */   setupActionVectorSearch: () => (/* binding */ setupActionVectorSearch)\n/* harmony export */ });\n/* harmony import */ var _syscall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../index.js */ \"(ssr)/./node_modules/convex/dist/esm/index.js\");\n/* harmony import */ var _vector_search_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../vector_search.js */ \"(ssr)/./node_modules/convex/dist/esm/server/vector_search.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./validate.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/validate.js\");\n/* harmony import */ var _values_value_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../values/value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n\n\n\n\nfunction setupActionVectorSearch(requestId) {\n    return async (tableName, indexName, query)=>{\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(tableName, 1, \"vectorSearch\", \"tableName\");\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(indexName, 2, \"vectorSearch\", \"indexName\");\n        (0,_validate_js__WEBPACK_IMPORTED_MODULE_3__.validateArg)(query, 3, \"vectorSearch\", \"query\");\n        if (!query.vector || !Array.isArray(query.vector) || query.vector.length === 0) {\n            throw Error(\"`vector` must be a non-empty Array in vectorSearch\");\n        }\n        return await new VectorQueryImpl(requestId, tableName + \".\" + indexName, query).collect();\n    };\n}\nclass VectorQueryImpl {\n    constructor(requestId, indexName, query){\n        __publicField(this, \"requestId\");\n        __publicField(this, \"state\");\n        this.requestId = requestId;\n        const filters = query.filter ? serializeExpression(query.filter(filterBuilderImpl)) : null;\n        this.state = {\n            type: \"preparing\",\n            query: {\n                indexName,\n                limit: query.limit,\n                vector: query.vector,\n                expressions: filters\n            }\n        };\n    }\n    async collect() {\n        if (this.state.type === \"consumed\") {\n            throw new Error(\"This query is closed and can't emit any more values.\");\n        }\n        const query = this.state.query;\n        this.state = {\n            type: \"consumed\"\n        };\n        const { results } = await (0,_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performAsyncSyscall)(\"1.0/actions/vectorSearch\", {\n            requestId: this.requestId,\n            version: _index_js__WEBPACK_IMPORTED_MODULE_1__.version,\n            query\n        });\n        return results;\n    }\n}\nclass ExpressionImpl extends _vector_search_js__WEBPACK_IMPORTED_MODULE_2__.FilterExpression {\n    constructor(inner){\n        super();\n        __publicField(this, \"inner\");\n        this.inner = inner;\n    }\n    serialize() {\n        return this.inner;\n    }\n}\nfunction serializeExpression(expr) {\n    if (expr instanceof ExpressionImpl) {\n        return expr.serialize();\n    } else {\n        return {\n            $literal: (0,_values_value_js__WEBPACK_IMPORTED_MODULE_4__.convexOrUndefinedToJson)(expr)\n        };\n    }\n}\nconst filterBuilderImpl = {\n    //  Comparisons  /////////////////////////////////////////////////////////////\n    eq (fieldName, value) {\n        if (typeof fieldName !== \"string\") {\n            throw new Error(\"The first argument to `q.eq` must be a field name.\");\n        }\n        return new ExpressionImpl({\n            $eq: [\n                serializeExpression(new ExpressionImpl({\n                    $field: fieldName\n                })),\n                serializeExpression(value)\n            ]\n        });\n    },\n    //  Logic  ///////////////////////////////////////////////////////////////////\n    or (...exprs) {\n        return new ExpressionImpl({\n            $or: exprs.map(serializeExpression)\n        });\n    }\n}; //# sourceMappingURL=vector_search_impl.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbXBsL3ZlY3Rvcl9zZWFyY2hfaW1wbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ29DO0FBQ1o7QUFNakI7QUFRcUI7QUFDbUI7QUFFeEMsU0FBUyx3QkFDZCxXQUNnRDtJQUNoRCxPQUFPLE9BQ0wsV0FDQSxXQUNBO1FBRUEseURBQVcsQ0FBQyxXQUFXLEdBQUcsZ0JBQWdCLFdBQVc7UUFDckQseURBQVcsQ0FBQyxXQUFXLEdBQUcsZ0JBQWdCLFdBQVc7UUFDckQseURBQVcsQ0FBQyxPQUFPLEdBQUcsZ0JBQWdCLE9BQU87UUFDN0MsSUFDRSxDQUFDLE1BQU0sVUFDUCxDQUFDLE1BQU0sUUFBUSxNQUFNLE1BQU0sS0FDM0IsTUFBTSxPQUFPLFdBQVcsR0FDeEI7WUFDQSxNQUFNLE1BQU0sb0RBQW9EO1FBQ2xFO1FBRUEsT0FBTyxNQUFNLElBQUksZ0JBQ2YsV0FDQSxZQUFZLE1BQU0sV0FDbEIsT0FDQSxRQUFRO0lBQ1o7QUFDRjtBQUVPLE1BQU0sZ0JBQWdCO0lBTTNCLFlBQ0UsV0FDQSxXQUNBLE1BQ0E7UUFURixvQkFBUTtRQUNSLG9CQUFRO1FBU04sS0FBSyxZQUFZO1FBQ2pCLE1BQU0sVUFBVSxNQUFNLFNBQ2xCLG9CQUFvQixNQUFNLE9BQU8saUJBQWlCLENBQUMsSUFDbkQ7UUFFSixLQUFLLFFBQVE7WUFDWCxNQUFNO1lBQ04sT0FBTztnQkFDTDtnQkFDQSxPQUFPLE1BQU07Z0JBQ2IsUUFBUSxNQUFNO2dCQUNkLGFBQWE7WUFDZjtRQUNGO0lBQ0Y7SUFFQSxNQUFNLFVBQStCO1FBQ25DLElBQUksS0FBSyxNQUFNLFNBQVMsWUFBWTtZQUNsQyxNQUFNLElBQUksTUFBTSxzREFBc0Q7UUFDeEU7UUFDQSxNQUFNLFFBQVEsS0FBSyxNQUFNO1FBQ3pCLEtBQUssUUFBUTtZQUFFLE1BQU07UUFBVztRQUVoQyxNQUFNLEVBQUUsUUFBUSxJQUFJLE1BQU0sZ0VBQW1CLENBQUMsNEJBQTRCO1lBQ3hFLFdBQVcsS0FBSztZQUNoQixPQUFPO1lBQ1A7UUFDRixDQUFDO1FBQ0QsT0FBTztJQUNUO0FBQ0Y7QUFhTyxNQUFNLHVCQUF1QiwrREFBZ0IsQ0FBTTtJQUV4RCxZQUFZLE1BQWtCO1FBQzVCLE1BQU07UUFGUixvQkFBUTtRQUdOLEtBQUssUUFBUTtJQUNmO0lBRUEsWUFBdUI7UUFDckIsT0FBTyxLQUFLO0lBQ2Q7QUFDRjtBQUVPLFNBQVMsb0JBQ2QsTUFDVztJQUNYLElBQUksZ0JBQWdCLGdCQUFnQjtRQUNsQyxPQUFPLEtBQUssVUFBVTtJQUN4QixPQUFPO1FBR0wsT0FBTztZQUFFLFVBQVUseUVBQXVCLENBQUMsSUFBeUI7UUFBRTtJQUN4RTtBQUNGO0FBRU8sTUFBTSxvQkFHVDtJQUFBO0lBR0YsSUFDRSxXQUNBLE9BQzJCO1FBQzNCLElBQUksT0FBTyxjQUFjLFVBQVU7WUFDakMsTUFBTSxJQUFJLE1BQU0sb0RBQW9EO1FBQ3RFO1FBQ0EsT0FBTyxJQUFJLGVBQWU7WUFDeEIsS0FBSztnQkFDSCxvQkFBb0IsSUFBSSxlQUFlO29CQUFFLFFBQVE7Z0JBQVUsQ0FBQyxDQUFDO2dCQUM3RCxvQkFBb0IsS0FBSzthQUMzQjtRQUNGLENBQUM7SUFDSDtJQUFBO0lBSUEsT0FBTSxPQUFxRTtRQUN6RSxPQUFPLElBQUksZUFBZTtZQUFFLEtBQUssTUFBTSxJQUFJLG1CQUFtQjtRQUFFLENBQUM7SUFDbkU7QUFDRiIsInNvdXJjZXMiOlsiL3NyYy9zZXJ2ZXIvaW1wbC92ZWN0b3Jfc2VhcmNoX2ltcGwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSlNPTlZhbHVlIH0gZnJvbSBcIi4uLy4uL3ZhbHVlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgcGVyZm9ybUFzeW5jU3lzY2FsbCB9IGZyb20gXCIuL3N5c2NhbGwuanNcIjtcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vLi4vaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIEZpbHRlckV4cHJlc3Npb24sXG4gIFZlY3RvckZpbHRlckJ1aWxkZXIsXG4gIFZlY3RvclNlYXJjaCxcbiAgVmVjdG9yU2VhcmNoUXVlcnksXG59IGZyb20gXCIuLi92ZWN0b3Jfc2VhcmNoLmpzXCI7XG5pbXBvcnQge1xuICBGaWVsZFR5cGVGcm9tRmllbGRQYXRoLFxuICBHZW5lcmljRGF0YU1vZGVsLFxuICBHZW5lcmljRG9jdW1lbnQsXG4gIEdlbmVyaWNUYWJsZUluZm8sXG4gIEdlbmVyaWNWZWN0b3JJbmRleENvbmZpZyxcbn0gZnJvbSBcIi4uL2RhdGFfbW9kZWwuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlQXJnIH0gZnJvbSBcIi4vdmFsaWRhdGUuanNcIjtcbmltcG9ydCB7IFZhbHVlLCBjb252ZXhPclVuZGVmaW5lZFRvSnNvbiB9IGZyb20gXCIuLi8uLi92YWx1ZXMvdmFsdWUuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwQWN0aW9uVmVjdG9yU2VhcmNoKFxuICByZXF1ZXN0SWQ6IHN0cmluZyxcbik6IFZlY3RvclNlYXJjaDxHZW5lcmljRGF0YU1vZGVsLCBzdHJpbmcsIHN0cmluZz4ge1xuICByZXR1cm4gYXN5bmMgKFxuICAgIHRhYmxlTmFtZTogc3RyaW5nLFxuICAgIGluZGV4TmFtZTogc3RyaW5nLFxuICAgIHF1ZXJ5OiBWZWN0b3JTZWFyY2hRdWVyeTxHZW5lcmljVGFibGVJbmZvLCBzdHJpbmc+LFxuICApID0+IHtcbiAgICB2YWxpZGF0ZUFyZyh0YWJsZU5hbWUsIDEsIFwidmVjdG9yU2VhcmNoXCIsIFwidGFibGVOYW1lXCIpO1xuICAgIHZhbGlkYXRlQXJnKGluZGV4TmFtZSwgMiwgXCJ2ZWN0b3JTZWFyY2hcIiwgXCJpbmRleE5hbWVcIik7XG4gICAgdmFsaWRhdGVBcmcocXVlcnksIDMsIFwidmVjdG9yU2VhcmNoXCIsIFwicXVlcnlcIik7XG4gICAgaWYgKFxuICAgICAgIXF1ZXJ5LnZlY3RvciB8fFxuICAgICAgIUFycmF5LmlzQXJyYXkocXVlcnkudmVjdG9yKSB8fFxuICAgICAgcXVlcnkudmVjdG9yLmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgdGhyb3cgRXJyb3IoXCJgdmVjdG9yYCBtdXN0IGJlIGEgbm9uLWVtcHR5IEFycmF5IGluIHZlY3RvclNlYXJjaFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IFZlY3RvclF1ZXJ5SW1wbChcbiAgICAgIHJlcXVlc3RJZCxcbiAgICAgIHRhYmxlTmFtZSArIFwiLlwiICsgaW5kZXhOYW1lLFxuICAgICAgcXVlcnksXG4gICAgKS5jb2xsZWN0KCk7XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBWZWN0b3JRdWVyeUltcGwge1xuICBwcml2YXRlIHJlcXVlc3RJZDogc3RyaW5nO1xuICBwcml2YXRlIHN0YXRlOlxuICAgIHwgeyB0eXBlOiBcInByZXBhcmluZ1wiOyBxdWVyeTogU2VyaWFsaXplZFZlY3RvclF1ZXJ5IH1cbiAgICB8IHsgdHlwZTogXCJjb25zdW1lZFwiIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcmVxdWVzdElkOiBzdHJpbmcsXG4gICAgaW5kZXhOYW1lOiBzdHJpbmcsXG4gICAgcXVlcnk6IFZlY3RvclNlYXJjaFF1ZXJ5PEdlbmVyaWNUYWJsZUluZm8sIHN0cmluZz4sXG4gICkge1xuICAgIHRoaXMucmVxdWVzdElkID0gcmVxdWVzdElkO1xuICAgIGNvbnN0IGZpbHRlcnMgPSBxdWVyeS5maWx0ZXJcbiAgICAgID8gc2VyaWFsaXplRXhwcmVzc2lvbihxdWVyeS5maWx0ZXIoZmlsdGVyQnVpbGRlckltcGwpKVxuICAgICAgOiBudWxsO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHR5cGU6IFwicHJlcGFyaW5nXCIsXG4gICAgICBxdWVyeToge1xuICAgICAgICBpbmRleE5hbWUsXG4gICAgICAgIGxpbWl0OiBxdWVyeS5saW1pdCxcbiAgICAgICAgdmVjdG9yOiBxdWVyeS52ZWN0b3IsXG4gICAgICAgIGV4cHJlc3Npb25zOiBmaWx0ZXJzLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgY29sbGVjdCgpOiBQcm9taXNlPEFycmF5PGFueT4+IHtcbiAgICBpZiAodGhpcy5zdGF0ZS50eXBlID09PSBcImNvbnN1bWVkXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgcXVlcnkgaXMgY2xvc2VkIGFuZCBjYW4ndCBlbWl0IGFueSBtb3JlIHZhbHVlcy5cIik7XG4gICAgfVxuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5zdGF0ZS5xdWVyeTtcbiAgICB0aGlzLnN0YXRlID0geyB0eXBlOiBcImNvbnN1bWVkXCIgfTtcblxuICAgIGNvbnN0IHsgcmVzdWx0cyB9ID0gYXdhaXQgcGVyZm9ybUFzeW5jU3lzY2FsbChcIjEuMC9hY3Rpb25zL3ZlY3RvclNlYXJjaFwiLCB7XG4gICAgICByZXF1ZXN0SWQ6IHRoaXMucmVxdWVzdElkLFxuICAgICAgdmVyc2lvbixcbiAgICAgIHF1ZXJ5LFxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG59XG5cbnR5cGUgU2VyaWFsaXplZFZlY3RvclF1ZXJ5ID0ge1xuICBpbmRleE5hbWU6IHN0cmluZztcbiAgbGltaXQ/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHZlY3RvcjogQXJyYXk8bnVtYmVyPjtcbiAgZXhwcmVzc2lvbnM6IEpTT05WYWx1ZTtcbn07XG5cbnR5cGUgRXhwcmVzc2lvbk9yVmFsdWU8VCBleHRlbmRzIFZhbHVlIHwgdW5kZWZpbmVkPiA9IEZpbHRlckV4cHJlc3Npb248VD4gfCBUO1xuXG4vLyBUaGUgYGFueWAgdHlwZSBwYXJhbWV0ZXIgaW4gYEV4cHJlc3Npb248YW55PmAgYWxsb3dzIHVzIHRvIHVzZSB0aGlzIGNsYXNzXG4vLyBpbiBwbGFjZSBvZiBhbnkgYEV4cHJlc3Npb25gIHR5cGUgaW4gYGZpbHRlckJ1aWxkZXJJbXBsYC5cbmV4cG9ydCBjbGFzcyBFeHByZXNzaW9uSW1wbCBleHRlbmRzIEZpbHRlckV4cHJlc3Npb248YW55PiB7XG4gIHByaXZhdGUgaW5uZXI6IEpTT05WYWx1ZTtcbiAgY29uc3RydWN0b3IoaW5uZXI6IEpTT05WYWx1ZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICB9XG5cbiAgc2VyaWFsaXplKCk6IEpTT05WYWx1ZSB7XG4gICAgcmV0dXJuIHRoaXMuaW5uZXI7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUV4cHJlc3Npb24oXG4gIGV4cHI6IEV4cHJlc3Npb25PclZhbHVlPFZhbHVlIHwgdW5kZWZpbmVkPixcbik6IEpTT05WYWx1ZSB7XG4gIGlmIChleHByIGluc3RhbmNlb2YgRXhwcmVzc2lvbkltcGwpIHtcbiAgICByZXR1cm4gZXhwci5zZXJpYWxpemUoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBBc3N1bWUgdGhhdCB0aGUgZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgQ29udmV4IHZhbHVlLCB3aGljaCB3ZSdsbCBzZXJpYWxpemVcbiAgICAvLyB0byBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi5cbiAgICByZXR1cm4geyAkbGl0ZXJhbDogY29udmV4T3JVbmRlZmluZWRUb0pzb24oZXhwciBhcyBWYWx1ZSB8IHVuZGVmaW5lZCkgfTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZmlsdGVyQnVpbGRlckltcGw6IFZlY3RvckZpbHRlckJ1aWxkZXI8XG4gIEdlbmVyaWNEb2N1bWVudCxcbiAgR2VuZXJpY1ZlY3RvckluZGV4Q29uZmlnXG4+ID0ge1xuICAvLyAgQ29tcGFyaXNvbnMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBlcTxGaWVsZE5hbWUgZXh0ZW5kcyBHZW5lcmljVmVjdG9ySW5kZXhDb25maWdbXCJmaWx0ZXJGaWVsZHNcIl0+KFxuICAgIGZpZWxkTmFtZTogRmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPEdlbmVyaWNEb2N1bWVudCwgRmllbGROYW1lPixcbiAgKTogRmlsdGVyRXhwcmVzc2lvbjxib29sZWFuPiB7XG4gICAgaWYgKHR5cGVvZiBmaWVsZE5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBmaXJzdCBhcmd1bWVudCB0byBgcS5lcWAgbXVzdCBiZSBhIGZpZWxkIG5hbWUuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHtcbiAgICAgICRlcTogW1xuICAgICAgICBzZXJpYWxpemVFeHByZXNzaW9uKG5ldyBFeHByZXNzaW9uSW1wbCh7ICRmaWVsZDogZmllbGROYW1lIH0pKSxcbiAgICAgICAgc2VyaWFsaXplRXhwcmVzc2lvbih2YWx1ZSksXG4gICAgICBdLFxuICAgIH0pO1xuICB9LFxuXG4gIC8vICBMb2dpYyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIG9yKC4uLmV4cHJzOiBBcnJheTxFeHByZXNzaW9uT3JWYWx1ZTxib29sZWFuPj4pOiBGaWx0ZXJFeHByZXNzaW9uPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IEV4cHJlc3Npb25JbXBsKHsgJG9yOiBleHBycy5tYXAoc2VyaWFsaXplRXhwcmVzc2lvbikgfSk7XG4gIH0sXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/impl/vector_search_impl.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/index.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HttpRouter: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_6__.HttpRouter),\n/* harmony export */   ROUTABLE_HTTP_METHODS: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_6__.ROUTABLE_HTTP_METHODS),\n/* harmony export */   SearchFilter: () => (/* reexport safe */ _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_3__.SearchFilter),\n/* harmony export */   actionGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.actionGeneric),\n/* harmony export */   anyApi: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.anyApi),\n/* harmony export */   componentsGeneric: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.componentsGeneric),\n/* harmony export */   createFunctionHandle: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.createFunctionHandle),\n/* harmony export */   cronJobs: () => (/* reexport safe */ _cron_js__WEBPACK_IMPORTED_MODULE_5__.cronJobs),\n/* harmony export */   currentSystemUdfInComponent: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.currentSystemUdfInComponent),\n/* harmony export */   defineApp: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.defineApp),\n/* harmony export */   defineComponent: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.defineComponent),\n/* harmony export */   defineSchema: () => (/* reexport safe */ _schema_js__WEBPACK_IMPORTED_MODULE_9__.defineSchema),\n/* harmony export */   defineTable: () => (/* reexport safe */ _schema_js__WEBPACK_IMPORTED_MODULE_9__.defineTable),\n/* harmony export */   filterApi: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.filterApi),\n/* harmony export */   getFunctionAddress: () => (/* reexport safe */ _components_index_js__WEBPACK_IMPORTED_MODULE_8__.getFunctionAddress),\n/* harmony export */   getFunctionName: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.getFunctionName),\n/* harmony export */   httpActionGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.httpActionGeneric),\n/* harmony export */   httpRouter: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_6__.httpRouter),\n/* harmony export */   internalActionGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.internalActionGeneric),\n/* harmony export */   internalMutationGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.internalMutationGeneric),\n/* harmony export */   internalQueryGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.internalQueryGeneric),\n/* harmony export */   makeFunctionReference: () => (/* reexport safe */ _api_js__WEBPACK_IMPORTED_MODULE_7__.makeFunctionReference),\n/* harmony export */   mutationGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.mutationGeneric),\n/* harmony export */   paginationOptsValidator: () => (/* reexport safe */ _pagination_js__WEBPACK_IMPORTED_MODULE_2__.paginationOptsValidator),\n/* harmony export */   paginationResultValidator: () => (/* reexport safe */ _pagination_js__WEBPACK_IMPORTED_MODULE_2__.paginationResultValidator),\n/* harmony export */   queryGeneric: () => (/* reexport safe */ _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__.queryGeneric)\n/* harmony export */ });\n/* harmony import */ var _database_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./database.js */ \"(ssr)/./node_modules/convex/dist/esm/server/database.js\");\n/* harmony import */ var _impl_registration_impl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./impl/registration_impl.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/registration_impl.js\");\n/* harmony import */ var _pagination_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pagination.js */ \"(ssr)/./node_modules/convex/dist/esm/server/pagination.js\");\n/* harmony import */ var _search_filter_builder_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./search_filter_builder.js */ \"(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js\");\n/* harmony import */ var _storage_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./storage.js */ \"(ssr)/./node_modules/convex/dist/esm/server/storage.js\");\n/* harmony import */ var _cron_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cron.js */ \"(ssr)/./node_modules/convex/dist/esm/server/cron.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./router.js */ \"(ssr)/./node_modules/convex/dist/esm/server/router.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./api.js */ \"(ssr)/./node_modules/convex/dist/esm/server/api.js\");\n/* harmony import */ var _components_index_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/index.js */ \"(ssr)/./node_modules/convex/dist/esm/server/components/index.js\");\n/* harmony import */ var _schema_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./schema.js */ \"(ssr)/./node_modules/convex/dist/esm/server/schema.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNERjO0FBNENQO0FBRU87QUE0QkE7QUFDQTtBQUVXO0FBVXFDO0FBWXZEO0FBbUJBO0FBSXFDO0FBQ1Q7QUF1Qk8iLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2VydmVyL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXRpbGl0aWVzIGZvciBpbXBsZW1lbnRpbmcgc2VydmVyLXNpZGUgQ29udmV4IHF1ZXJ5IGFuZCBtdXRhdGlvbiBmdW5jdGlvbnMuXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiAjIyMgQ29kZSBHZW5lcmF0aW9uXG4gKlxuICogVGhpcyBtb2R1bGUgaXMgdHlwaWNhbGx5IHVzZWQgYWxvbmdzaWRlIGdlbmVyYXRlZCBzZXJ2ZXIgY29kZS5cbiAqXG4gKiBUbyBnZW5lcmF0ZSB0aGUgc2VydmVyIGNvZGUsIHJ1biBgbnB4IGNvbnZleCBkZXZgIGluIHlvdXIgQ29udmV4IHByb2plY3QuXG4gKiBUaGlzIHdpbGwgY3JlYXRlIGEgYGNvbnZleC9fZ2VuZXJhdGVkL3NlcnZlci5qc2AgZmlsZSB3aXRoIHRoZSBmb2xsb3dpbmdcbiAqIGZ1bmN0aW9ucywgdHlwZWQgZm9yIHlvdXIgc2NoZW1hOlxuICogLSBbcXVlcnldKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L2dlbmVyYXRlZC1hcGkvc2VydmVyI3F1ZXJ5KVxuICogLSBbbXV0YXRpb25dKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L2dlbmVyYXRlZC1hcGkvc2VydmVyI211dGF0aW9uKVxuICpcbiAqIElmIHlvdSBhcmVuJ3QgdXNpbmcgVHlwZVNjcmlwdCBhbmQgY29kZSBnZW5lcmF0aW9uLCB5b3UgY2FuIHVzZSB0aGVzZSB1bnR5cGVkXG4gKiBmdW5jdGlvbnMgaW5zdGVhZDpcbiAqIC0ge0BsaW5rIHF1ZXJ5R2VuZXJpY31cbiAqIC0ge0BsaW5rIG11dGF0aW9uR2VuZXJpY31cbiAqXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIENvbnZleCBmdW5jdGlvbnMgYXJlIGRlZmluZWQgYnkgdXNpbmcgZWl0aGVyIHRoZSBgcXVlcnlgIG9yXG4gKiBgbXV0YXRpb25gIHdyYXBwZXJzLlxuICpcbiAqIFF1ZXJpZXMgcmVjZWl2ZSBhIGBkYmAgdGhhdCBpbXBsZW1lbnRzIHRoZSB7QGxpbmsgR2VuZXJpY0RhdGFiYXNlUmVhZGVyfSBpbnRlcmZhY2UuXG4gKlxuICogYGBganNcbiAqIGltcG9ydCB7IHF1ZXJ5IH0gZnJvbSBcIi4vX2dlbmVyYXRlZC9zZXJ2ZXJcIjtcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCBxdWVyeSh7XG4gKiAgIGhhbmRsZXI6IGFzeW5jICh7IGRiIH0sIHsgYXJnMSwgYXJnMiB9KSA9PiB7XG4gKiAgICAgLy8gWW91ciAocmVhZC1vbmx5KSBjb2RlIGhlcmUhXG4gKiAgIH0sXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIElmIHlvdXIgZnVuY3Rpb24gbmVlZHMgdG8gd3JpdGUgdG8gdGhlIGRhdGFiYXNlLCBzdWNoIGFzIGluc2VydGluZywgdXBkYXRpbmcsXG4gKiBvciBkZWxldGluZyBkb2N1bWVudHMsIHVzZSBgbXV0YXRpb25gIGluc3RlYWQgd2hpY2ggcHJvdmlkZXMgYSBgZGJgIHRoYXRcbiAqIGltcGxlbWVudHMgdGhlIHtAbGluayBHZW5lcmljRGF0YWJhc2VXcml0ZXJ9IGludGVyZmFjZS5cbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHsgbXV0YXRpb24gfSBmcm9tIFwiLi9fZ2VuZXJhdGVkL3NlcnZlclwiO1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IG11dGF0aW9uKHtcbiAqICAgaGFuZGxlcjogYXN5bmMgKHsgZGIgfSwgeyBhcmcxLCBhcmcyIH0pID0+IHtcbiAqICAgICAvLyBZb3VyIG11dGF0aW9uIGNvZGUgaGVyZSFcbiAqICAgfSxcbiAqIH0pO1xuICogYGBgXG4gKiBAbW9kdWxlXG4gKi9cblxuZXhwb3J0IHR5cGUge1xuICBBdXRoLFxuICBBdXRoQ29uZmlnLFxuICBBdXRoUHJvdmlkZXIsXG4gIFVzZXJJZGVudGl0eSxcbiAgVXNlcklkZW50aXR5QXR0cmlidXRlcyxcbn0gZnJvbSBcIi4vYXV0aGVudGljYXRpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RhdGFiYXNlLmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIEdlbmVyaWNEb2N1bWVudCxcbiAgR2VuZXJpY0ZpZWxkUGF0aHMsXG4gIEdlbmVyaWNJbmRleEZpZWxkcyxcbiAgR2VuZXJpY1RhYmxlSW5kZXhlcyxcbiAgR2VuZXJpY1NlYXJjaEluZGV4Q29uZmlnLFxuICBHZW5lcmljVGFibGVTZWFyY2hJbmRleGVzLFxuICBHZW5lcmljVmVjdG9ySW5kZXhDb25maWcsXG4gIEdlbmVyaWNUYWJsZVZlY3RvckluZGV4ZXMsXG4gIEZpZWxkVHlwZUZyb21GaWVsZFBhdGgsXG4gIEZpZWxkVHlwZUZyb21GaWVsZFBhdGhJbm5lcixcbiAgR2VuZXJpY1RhYmxlSW5mbyxcbiAgRG9jdW1lbnRCeUluZm8sXG4gIEZpZWxkUGF0aHMsXG4gIEluZGV4ZXMsXG4gIEluZGV4TmFtZXMsXG4gIE5hbWVkSW5kZXgsXG4gIFNlYXJjaEluZGV4ZXMsXG4gIFNlYXJjaEluZGV4TmFtZXMsXG4gIE5hbWVkU2VhcmNoSW5kZXgsXG4gIFZlY3RvckluZGV4ZXMsXG4gIFZlY3RvckluZGV4TmFtZXMsXG4gIE5hbWVkVmVjdG9ySW5kZXgsXG4gIEdlbmVyaWNEYXRhTW9kZWwsXG4gIEFueURhdGFNb2RlbCxcbiAgVGFibGVOYW1lc0luRGF0YU1vZGVsLFxuICBOYW1lZFRhYmxlSW5mbyxcbiAgRG9jdW1lbnRCeU5hbWUsXG59IGZyb20gXCIuL2RhdGFfbW9kZWwuanNcIjtcblxuZXhwb3J0IHR5cGUge1xuICBFeHByZXNzaW9uLFxuICBFeHByZXNzaW9uT3JWYWx1ZSxcbiAgRmlsdGVyQnVpbGRlcixcbn0gZnJvbSBcIi4vZmlsdGVyX2J1aWxkZXIuanNcIjtcbmV4cG9ydCB7XG4gIGFjdGlvbkdlbmVyaWMsXG4gIGh0dHBBY3Rpb25HZW5lcmljLFxuICBtdXRhdGlvbkdlbmVyaWMsXG4gIHF1ZXJ5R2VuZXJpYyxcbiAgaW50ZXJuYWxBY3Rpb25HZW5lcmljLFxuICBpbnRlcm5hbE11dGF0aW9uR2VuZXJpYyxcbiAgaW50ZXJuYWxRdWVyeUdlbmVyaWMsXG59IGZyb20gXCIuL2ltcGwvcmVnaXN0cmF0aW9uX2ltcGwuanNcIjtcbmV4cG9ydCB0eXBlIHsgSW5kZXhSYW5nZSwgSW5kZXhSYW5nZUJ1aWxkZXIgfSBmcm9tIFwiLi9pbmRleF9yYW5nZV9idWlsZGVyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9wYWdpbmF0aW9uLmpzXCI7XG5leHBvcnQgdHlwZSB7IE9yZGVyZWRRdWVyeSwgUXVlcnksIFF1ZXJ5SW5pdGlhbGl6ZXIgfSBmcm9tIFwiLi9xdWVyeS5qc1wiO1xuZXhwb3J0IHR5cGUge1xuICBBcmdzQXJyYXksXG4gIERlZmF1bHRGdW5jdGlvbkFyZ3MsXG4gIEZ1bmN0aW9uVmlzaWJpbGl0eSxcbiAgQWN0aW9uQnVpbGRlcixcbiAgTXV0YXRpb25CdWlsZGVyLFxuICBNdXRhdGlvbkJ1aWxkZXJXaXRoVGFibGUsXG4gIFF1ZXJ5QnVpbGRlcixcbiAgUXVlcnlCdWlsZGVyV2l0aFRhYmxlLFxuICBIdHRwQWN0aW9uQnVpbGRlcixcbiAgR2VuZXJpY0FjdGlvbkN0eCxcbiAgR2VuZXJpY011dGF0aW9uQ3R4LFxuICBHZW5lcmljTXV0YXRpb25DdHhXaXRoVGFibGUsXG4gIEdlbmVyaWNRdWVyeUN0eCxcbiAgR2VuZXJpY1F1ZXJ5Q3R4V2l0aFRhYmxlLFxuICBSZWdpc3RlcmVkQWN0aW9uLFxuICBSZWdpc3RlcmVkTXV0YXRpb24sXG4gIFJlZ2lzdGVyZWRRdWVyeSxcbiAgUHVibGljSHR0cEFjdGlvbixcbiAgVW52YWxpZGF0ZWRGdW5jdGlvbixcbiAgVmFsaWRhdGVkRnVuY3Rpb24sXG4gIFJldHVyblZhbHVlRm9yT3B0aW9uYWxWYWxpZGF0b3IsXG4gIEFyZ3NBcnJheUZvck9wdGlvbmFsVmFsaWRhdG9yLFxuICBBcmdzQXJyYXlUb09iamVjdCxcbiAgRGVmYXVsdEFyZ3NGb3JPcHRpb25hbFZhbGlkYXRvcixcbn0gZnJvbSBcIi4vcmVnaXN0cmF0aW9uLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zZWFyY2hfZmlsdGVyX2J1aWxkZXIuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0b3JhZ2UuanNcIjtcbmV4cG9ydCB0eXBlIHsgU2NoZWR1bGVyLCBTY2hlZHVsYWJsZUZ1bmN0aW9uUmVmZXJlbmNlIH0gZnJvbSBcIi4vc2NoZWR1bGVyLmpzXCI7XG5leHBvcnQgeyBjcm9uSm9icyB9IGZyb20gXCIuL2Nyb24uanNcIjtcbmV4cG9ydCB0eXBlIHsgQ3JvbkpvYiwgQ3JvbnMgfSBmcm9tIFwiLi9jcm9uLmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIFN5c3RlbUZpZWxkcyxcbiAgSWRGaWVsZCxcbiAgV2l0aG91dFN5c3RlbUZpZWxkcyxcbiAgV2l0aE9wdGlvbmFsU3lzdGVtRmllbGRzLFxuICBTeXN0ZW1JbmRleGVzLFxuICBJbmRleFRpZWJyZWFrZXJGaWVsZCxcbn0gZnJvbSBcIi4vc3lzdGVtX2ZpZWxkcy5qc1wiO1xuZXhwb3J0IHsgaHR0cFJvdXRlciwgSHR0cFJvdXRlciwgUk9VVEFCTEVfSFRUUF9NRVRIT0RTIH0gZnJvbSBcIi4vcm91dGVyLmpzXCI7XG5leHBvcnQgdHlwZSB7XG4gIFJvdXRhYmxlTWV0aG9kLFxuICBSb3V0ZVNwZWMsXG4gIFJvdXRlU3BlY1dpdGhQYXRoLFxuICBSb3V0ZVNwZWNXaXRoUGF0aFByZWZpeCxcbn0gZnJvbSBcIi4vcm91dGVyLmpzXCI7XG5leHBvcnQge1xuICBhbnlBcGksXG4gIGdldEZ1bmN0aW9uTmFtZSxcbiAgbWFrZUZ1bmN0aW9uUmVmZXJlbmNlLFxuICBmaWx0ZXJBcGksXG59IGZyb20gXCIuL2FwaS5qc1wiO1xuZXhwb3J0IHR5cGUge1xuICBBcGlGcm9tTW9kdWxlcyxcbiAgQW55QXBpLFxuICBGaWx0ZXJBcGksXG4gIEZ1bmN0aW9uVHlwZSxcbiAgRnVuY3Rpb25SZWZlcmVuY2UsXG4gIEZ1bmN0aW9uQXJncyxcbiAgT3B0aW9uYWxSZXN0QXJncyxcbiAgUGFydGlhbEFwaSxcbiAgQXJnc0FuZE9wdGlvbnMsXG4gIEZ1bmN0aW9uUmV0dXJuVHlwZSxcbn0gZnJvbSBcIi4vYXBpLmpzXCI7XG5leHBvcnQge1xuICBkZWZpbmVBcHAsXG4gIGRlZmluZUNvbXBvbmVudCxcbiAgY29tcG9uZW50c0dlbmVyaWMsXG4gIGNyZWF0ZUZ1bmN0aW9uSGFuZGxlLFxuICB0eXBlIEFueUNoaWxkQ29tcG9uZW50cyxcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHsgY3VycmVudFN5c3RlbVVkZkluQ29tcG9uZW50IH0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgZ2V0RnVuY3Rpb25BZGRyZXNzIH0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuZXhwb3J0IHR5cGUge1xuICBDb21wb25lbnREZWZpbml0aW9uLFxuICBBbnlDb21wb25lbnRzLFxuICBGdW5jdGlvbkhhbmRsZSxcbn0gZnJvbSBcIi4vY29tcG9uZW50cy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgdHlwZSB7IEluZGV4LCBTZWFyY2hJbmRleCwgVmVjdG9ySW5kZXggfSBmcm9tIFwiLi9zY2hlbWEuanNcIjtcblxuZXhwb3J0IHR5cGUge1xuICBTZWFyY2hJbmRleENvbmZpZyxcbiAgVmVjdG9ySW5kZXhDb25maWcsXG4gIFRhYmxlRGVmaW5pdGlvbixcbiAgU2NoZW1hRGVmaW5pdGlvbixcbiAgRGVmaW5lU2NoZW1hT3B0aW9ucyxcbiAgR2VuZXJpY1NjaGVtYSxcbiAgRGF0YU1vZGVsRnJvbVNjaGVtYURlZmluaXRpb24sXG4gIFN5c3RlbURhdGFNb2RlbCxcbiAgU3lzdGVtVGFibGVOYW1lcyxcbn0gZnJvbSBcIi4vc2NoZW1hLmpzXCI7XG5leHBvcnQgeyBkZWZpbmVUYWJsZSwgZGVmaW5lU2NoZW1hIH0gZnJvbSBcIi4vc2NoZW1hLmpzXCI7XG5cbmV4cG9ydCB0eXBlIHtcbiAgVmVjdG9yU2VhcmNoLFxuICBWZWN0b3JTZWFyY2hRdWVyeSxcbiAgVmVjdG9yRmlsdGVyQnVpbGRlcixcbiAgRmlsdGVyRXhwcmVzc2lvbixcbn0gZnJvbSBcIi4vdmVjdG9yX3NlYXJjaC5qc1wiO1xuXG4vKipcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgeyBCZXR0ZXJPbWl0LCBFeHBhbmQgfSBmcm9tIFwiLi4vdHlwZV91dGlscy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/index_range_builder.js":
/*!********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/index_range_builder.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IndexRange: () => (/* binding */ IndexRange)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass IndexRange {\n    /**\n   * @internal\n   */ constructor(){\n        // Property for nominal type support.\n        __publicField(this, \"_isIndexRange\");\n    }\n} //# sourceMappingURL=index_range_builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9pbmRleF9yYW5nZV9idWlsZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUE4S08sTUFBZSxXQUFXO0lBQUE7O0dBQUEsR0FPL0IsYUFBYztRQUxkO1FBQUEsb0JBQVE7SUFRUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NlcnZlci9pbmRleF9yYW5nZV9idWlsZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEdlbmVyaWNJbmRleEZpZWxkcyxcbiAgR2VuZXJpY0RvY3VtZW50LFxuICBGaWVsZFR5cGVGcm9tRmllbGRQYXRoLFxufSBmcm9tIFwiLi9kYXRhX21vZGVsLmpzXCI7XG5cbi8qKlxuICogQSB0eXBlIHRoYXQgYWRkcyAxIHRvIGEgbnVtYmVyIGxpdGVyYWwgdHlwZSAodXAgdG8gMTQpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHN0ZXAgdGhyb3VnaCB0aGUgZmllbGRzIGluIGFuIGluZGV4LlxuICovXG50eXBlIFBsdXNPbmU8TiBleHRlbmRzIG51bWJlcj4gPSBbXG4gIDEsXG4gIDIsXG4gIDMsXG4gIDQsXG4gIDUsXG4gIDYsXG4gIDcsXG4gIDgsXG4gIDksXG4gIDEwLFxuICAxMSxcbiAgMTIsXG4gIDEzLFxuICAxNCxcbiAgMTUsXG5dW05dO1xuXG4vKipcbiAqIEJ1aWxkZXIgdG8gZGVmaW5lIGFuIGluZGV4IHJhbmdlIHRvIHF1ZXJ5LlxuICpcbiAqIEFuIGluZGV4IHJhbmdlIGlzIGEgZGVzY3JpcHRpb24gb2Ygd2hpY2ggZG9jdW1lbnRzIENvbnZleCBzaG91bGQgY29uc2lkZXJcbiAqIHdoZW4gcnVubmluZyB0aGUgcXVlcnkuXG4gKlxuICogQW4gaW5kZXggcmFuZ2UgaXMgYWx3YXlzIGEgY2hhaW5lZCBsaXN0IG9mOlxuICogMS4gMCBvciBtb3JlIGVxdWFsaXR5IGV4cHJlc3Npb25zIGRlZmluZWQgd2l0aCBgLmVxYC5cbiAqIDIuIFtPcHRpb25hbGx5XSBBIGxvd2VyIGJvdW5kIGV4cHJlc3Npb24gZGVmaW5lZCB3aXRoIGAuZ3RgIG9yIGAuZ3RlYC5cbiAqIDMuIFtPcHRpb25hbGx5XSBBbiB1cHBlciBib3VuZCBleHByZXNzaW9uIGRlZmluZWQgd2l0aCBgLmx0YCBvciBgLmx0ZWAuXG4gKlxuICogKipZb3UgbXVzdCBzdGVwIHRocm91Z2ggZmllbGRzIGluIGluZGV4IG9yZGVyLioqXG4gKlxuICogRWFjaCBlcXVhbGl0eSBleHByZXNzaW9uIG11c3QgY29tcGFyZSBhIGRpZmZlcmVudCBpbmRleCBmaWVsZCwgc3RhcnRpbmcgZnJvbVxuICogdGhlIGJlZ2lubmluZyBhbmQgaW4gb3JkZXIuIFRoZSB1cHBlciBhbmQgbG93ZXIgYm91bmRzIG11c3QgZm9sbG93IHRoZVxuICogZXF1YWxpdHkgZXhwcmVzc2lvbnMgYW5kIGNvbXBhcmUgdGhlIG5leHQgZmllbGQuXG4gKlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZXJlIGlzIGFuIGluZGV4IG9mIG1lc3NhZ2VzIG9uXG4gKiBgW1wicHJvamVjdElkXCIsIFwicHJpb3JpdHlcIl1gLCBhIHJhbmdlIHNlYXJjaGluZyBmb3IgXCJtZXNzYWdlcyBpbiAnbXlQcm9qZWN0SWQnXG4gKiB3aXRoIHByaW9yaXR5IGF0IGxlYXN0IDEwMFwiIHdvdWxkIGxvb2sgbGlrZTpcbiAqIGBgYHRzXG4gKiBxLmVxKFwicHJvamVjdElkXCIsIG15UHJvamVjdElkKVxuICogIC5ndGUoXCJwcmlvcml0eVwiLCAxMDApXG4gKiBgYGBcbiAqXG4gKiAqKlRoZSBwZXJmb3JtYW5jZSBvZiB5b3VyIHF1ZXJ5IGlzIGJhc2VkIG9uIHRoZSBzcGVjaWZpY2l0eSBvZiB0aGUgcmFuZ2UuKipcbiAqXG4gKiBUaGlzIGNsYXNzIGlzIGRlc2lnbmVkIHRvIG9ubHkgYWxsb3cgeW91IHRvIHNwZWNpZnkgcmFuZ2VzIHRoYXQgQ29udmV4IGNhblxuICogZWZmaWNpZW50bHkgdXNlIHlvdXIgaW5kZXggdG8gZmluZC4gRm9yIGFsbCBvdGhlciBmaWx0ZXJpbmcgdXNlXG4gKiB7QGxpbmsgT3JkZXJlZFF1ZXJ5LmZpbHRlcn0uXG4gKlxuICogVG8gbGVhcm4gYWJvdXQgaW5kZXhlcywgc2VlIFtJbmRleGVzXShodHRwczovL2RvY3MuY29udmV4LmRldi91c2luZy9pbmRleGVzKS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbmRleFJhbmdlQnVpbGRlcjxcbiAgRG9jdW1lbnQgZXh0ZW5kcyBHZW5lcmljRG9jdW1lbnQsXG4gIEluZGV4RmllbGRzIGV4dGVuZHMgR2VuZXJpY0luZGV4RmllbGRzLFxuICBGaWVsZE51bSBleHRlbmRzIG51bWJlciA9IDAsXG4+IGV4dGVuZHMgTG93ZXJCb3VuZEluZGV4UmFuZ2VCdWlsZGVyPERvY3VtZW50LCBJbmRleEZpZWxkc1tGaWVsZE51bV0+IHtcbiAgLyoqXG4gICAqIFJlc3RyaWN0IHRoaXMgcmFuZ2UgdG8gZG9jdW1lbnRzIHdoZXJlIGBkb2NbZmllbGROYW1lXSA9PT0gdmFsdWVgLlxuICAgKlxuICAgKiBAcGFyYW0gZmllbGROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRvIGNvbXBhcmUuIE11c3QgYmUgdGhlIG5leHQgZmllbGRcbiAgICogaW4gdGhlIGluZGV4LlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgKi9cbiAgZXEoXG4gICAgZmllbGROYW1lOiBJbmRleEZpZWxkc1tGaWVsZE51bV0sXG4gICAgdmFsdWU6IEZpZWxkVHlwZUZyb21GaWVsZFBhdGg8RG9jdW1lbnQsIEluZGV4RmllbGRzW0ZpZWxkTnVtXT4sXG4gICk6IE5leHRJbmRleFJhbmdlQnVpbGRlcjxEb2N1bWVudCwgSW5kZXhGaWVsZHMsIEZpZWxkTnVtPjtcbn1cblxuLyoqXG4gKiBBbiB7QGxpbmsgSW5kZXhSYW5nZUJ1aWxkZXJ9IGZvciB0aGUgbmV4dCBmaWVsZCBvZiB0aGUgaW5kZXguXG4gKlxuICogVGhpcyB0eXBlIGlzIGNhcmVmdWwgdG8gY2hlY2sgaWYgYWRkaW5nIG9uZSB0byB0aGUgYEZpZWxkTnVtYCB3aWxsIGV4Y2VlZFxuICogdGhlIGxlbmd0aCBvZiB0aGUgYEluZGV4RmllbGRzYC5cbiAqL1xudHlwZSBOZXh0SW5kZXhSYW5nZUJ1aWxkZXI8XG4gIERvY3VtZW50IGV4dGVuZHMgR2VuZXJpY0RvY3VtZW50LFxuICBJbmRleEZpZWxkcyBleHRlbmRzIEdlbmVyaWNJbmRleEZpZWxkcyxcbiAgRmllbGROdW0gZXh0ZW5kcyBudW1iZXIsXG4+ID1cbiAgUGx1c09uZTxGaWVsZE51bT4gZXh0ZW5kcyBJbmRleEZpZWxkc1tcImxlbmd0aFwiXVxuICAgID8gSW5kZXhSYW5nZVxuICAgIDogSW5kZXhSYW5nZUJ1aWxkZXI8RG9jdW1lbnQsIEluZGV4RmllbGRzLCBQbHVzT25lPEZpZWxkTnVtPj47XG5cbi8qKlxuICogQnVpbGRlciB0byBkZWZpbmUgdGhlIGxvd2VyIGJvdW5kIG9mIGFuIGluZGV4IHJhbmdlLlxuICpcbiAqIFNlZSB7QGxpbmsgSW5kZXhSYW5nZUJ1aWxkZXJ9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb3dlckJvdW5kSW5kZXhSYW5nZUJ1aWxkZXI8XG4gIERvY3VtZW50IGV4dGVuZHMgR2VuZXJpY0RvY3VtZW50LFxuICBJbmRleEZpZWxkTmFtZSBleHRlbmRzIHN0cmluZyxcbj4gZXh0ZW5kcyBVcHBlckJvdW5kSW5kZXhSYW5nZUJ1aWxkZXI8RG9jdW1lbnQsIEluZGV4RmllbGROYW1lPiB7XG4gIC8qKlxuICAgKiBSZXN0cmljdCB0aGlzIHJhbmdlIHRvIGRvY3VtZW50cyB3aGVyZSBgZG9jW2ZpZWxkTmFtZV0gPiB2YWx1ZWAuXG4gICAqXG4gICAqIEBwYXJhbSBmaWVsZE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmllbGQgdG8gY29tcGFyZS4gTXVzdCBiZSB0aGUgbmV4dCBmaWVsZFxuICAgKiBpbiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAqL1xuICBndChcbiAgICBmaWVsZE5hbWU6IEluZGV4RmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPERvY3VtZW50LCBJbmRleEZpZWxkTmFtZT4sXG4gICk6IFVwcGVyQm91bmRJbmRleFJhbmdlQnVpbGRlcjxEb2N1bWVudCwgSW5kZXhGaWVsZE5hbWU+O1xuICAvKipcbiAgICogUmVzdHJpY3QgdGhpcyByYW5nZSB0byBkb2N1bWVudHMgd2hlcmUgYGRvY1tmaWVsZE5hbWVdID49IHZhbHVlYC5cbiAgICpcbiAgICogQHBhcmFtIGZpZWxkTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0byBjb21wYXJlLiBNdXN0IGJlIHRoZSBuZXh0IGZpZWxkXG4gICAqIGluIHRoZSBpbmRleC5cbiAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICovXG4gIGd0ZShcbiAgICBmaWVsZE5hbWU6IEluZGV4RmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPERvY3VtZW50LCBJbmRleEZpZWxkTmFtZT4sXG4gICk6IFVwcGVyQm91bmRJbmRleFJhbmdlQnVpbGRlcjxEb2N1bWVudCwgSW5kZXhGaWVsZE5hbWU+O1xufVxuXG4vKipcbiAqIEJ1aWxkZXIgdG8gZGVmaW5lIHRoZSB1cHBlciBib3VuZCBvZiBhbiBpbmRleCByYW5nZS5cbiAqXG4gKiBTZWUge0BsaW5rIEluZGV4UmFuZ2VCdWlsZGVyfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBwZXJCb3VuZEluZGV4UmFuZ2VCdWlsZGVyPFxuICBEb2N1bWVudCBleHRlbmRzIEdlbmVyaWNEb2N1bWVudCxcbiAgSW5kZXhGaWVsZE5hbWUgZXh0ZW5kcyBzdHJpbmcsXG4+IGV4dGVuZHMgSW5kZXhSYW5nZSB7XG4gIC8qKlxuICAgKiBSZXN0cmljdCB0aGlzIHJhbmdlIHRvIGRvY3VtZW50cyB3aGVyZSBgZG9jW2ZpZWxkTmFtZV0gPCB2YWx1ZWAuXG4gICAqXG4gICAqIEBwYXJhbSBmaWVsZE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmllbGQgdG8gY29tcGFyZS4gTXVzdCBiZSB0aGUgc2FtZSBpbmRleFxuICAgKiBmaWVsZCB1c2VkIGluIHRoZSBsb3dlciBib3VuZCAoYC5ndGAgb3IgYC5ndGVgKSBvciB0aGUgbmV4dCBmaWVsZCBpZiBub1xuICAgKiBsb3dlciBib3VuZCB3YXMgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgKi9cbiAgbHQoXG4gICAgZmllbGROYW1lOiBJbmRleEZpZWxkTmFtZSxcbiAgICB2YWx1ZTogRmllbGRUeXBlRnJvbUZpZWxkUGF0aDxEb2N1bWVudCwgSW5kZXhGaWVsZE5hbWU+LFxuICApOiBJbmRleFJhbmdlO1xuXG4gIC8qKlxuICAgKiBSZXN0cmljdCB0aGlzIHJhbmdlIHRvIGRvY3VtZW50cyB3aGVyZSBgZG9jW2ZpZWxkTmFtZV0gPD0gdmFsdWVgLlxuICAgKlxuICAgKiBAcGFyYW0gZmllbGROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRvIGNvbXBhcmUuIE11c3QgYmUgdGhlIHNhbWUgaW5kZXhcbiAgICogZmllbGQgdXNlZCBpbiB0aGUgbG93ZXIgYm91bmQgKGAuZ3RgIG9yIGAuZ3RlYCkgb3IgdGhlIG5leHQgZmllbGQgaWYgbm9cbiAgICogbG93ZXIgYm91bmQgd2FzIHNwZWNpZmllZC5cbiAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICovXG4gIGx0ZShcbiAgICBmaWVsZE5hbWU6IEluZGV4RmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPERvY3VtZW50LCBJbmRleEZpZWxkTmFtZT4sXG4gICk6IEluZGV4UmFuZ2U7XG59XG5cbi8qKlxuICogQW4gZXhwcmVzc2lvbiByZXByZXNlbnRpbmcgYW4gaW5kZXggcmFuZ2UgY3JlYXRlZCBieVxuICoge0BsaW5rIEluZGV4UmFuZ2VCdWlsZGVyfS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEluZGV4UmFuZ2Uge1xuICAvLyBQcm9wZXJ0eSBmb3Igbm9taW5hbCB0eXBlIHN1cHBvcnQuXG4gIHByaXZhdGUgX2lzSW5kZXhSYW5nZTogdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIG9ubHkgZGVmaW5pbmcgdGhlIGNvbnN0cnVjdG9yIHNvIHdlIGNhbiBtYXJrIGl0IGFzIGludGVybmFsIGFuZCBrZWVwXG4gICAgLy8gaXQgb3V0IG9mIHRoZSBkb2NzLlxuICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/index_range_builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/pagination.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/pagination.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   paginationOptsValidator: () => (/* binding */ paginationOptsValidator),\n/* harmony export */   paginationResultValidator: () => (/* binding */ paginationResultValidator)\n/* harmony export */ });\n/* harmony import */ var _values_validator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../values/validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n\n\nconst paginationOptsValidator = _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n    numItems: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number(),\n    cursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null()),\n    endCursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null())),\n    id: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number()),\n    maximumRowsRead: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number()),\n    maximumBytesRead: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.number())\n});\nfunction paginationResultValidator(itemValidator) {\n    return _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n        page: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.array(itemValidator),\n        continueCursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(),\n        isDone: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.boolean(),\n        splitCursor: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null())),\n        pageStatus: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"SplitRecommended\"), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"SplitRequired\"), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.null()))\n    });\n} //# sourceMappingURL=pagination.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9wYWdpbmF0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBa0I7QUFvSVgsTUFBTSwwQkFBMEIsbURBQUMsQ0FBQyxPQUFPO0lBQzlDLFVBQVUsbURBQUMsQ0FBQyxPQUFPO0lBQ25CLFFBQVEsbURBQUMsQ0FBQyxNQUFNLG1EQUFDLENBQUMsT0FBTyxHQUFHLG1EQUFDLENBQUMsS0FBSyxDQUFDO0lBQ3BDLFdBQVcsbURBQUMsQ0FBQyxTQUFTLG1EQUFDLENBQUMsTUFBTSxtREFBQyxDQUFDLE9BQU8sR0FBRyxtREFBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25ELElBQUksbURBQUMsQ0FBQyxTQUFTLG1EQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3pCLGlCQUFpQixtREFBQyxDQUFDLFNBQVMsbURBQUMsQ0FBQyxPQUFPLENBQUM7SUFDdEMsa0JBQWtCLG1EQUFDLENBQUMsU0FBUyxtREFBQyxDQUFDLE9BQU8sQ0FBQztBQUN6QyxDQUFDO0FBc0JNLFNBQVMsMEJBRWQsZUFBa0I7SUFDbEIsT0FBTyxtREFBQyxDQUFDLE9BQU87UUFDZCxNQUFNLG1EQUFDLENBQUMsTUFBTSxhQUFhO1FBQzNCLGdCQUFnQixtREFBQyxDQUFDLE9BQU87UUFDekIsUUFBUSxtREFBQyxDQUFDLFFBQVE7UUFDbEIsYUFBYSxtREFBQyxDQUFDLFNBQVMsbURBQUMsQ0FBQyxNQUFNLG1EQUFDLENBQUMsT0FBTyxHQUFHLG1EQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckQsWUFBWSxtREFBQyxDQUFDLFNBQ1osbURBQUMsQ0FBQyxNQUNBLG1EQUFDLENBQUMsUUFBUSxrQkFBa0IsR0FDNUIsbURBQUMsQ0FBQyxRQUFRLGVBQWUsR0FDekIsbURBQUMsQ0FBQyxLQUFLO0lBR2IsQ0FBQztBQUNIIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NlcnZlci9wYWdpbmF0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHYgfSBmcm9tIFwiLi4vdmFsdWVzL3ZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHR5cGUgeyBWYWxpZGF0b3IgfSBmcm9tIFwiLi4vdmFsdWVzL3ZhbGlkYXRvcnMuanNcIjtcbmltcG9ydCB0eXBlIHsgVmFsdWUgfSBmcm9tIFwiLi4vdmFsdWVzL3ZhbHVlLmpzXCI7XG5cbi8qKlxuICogQW4gb3BhcXVlIGlkZW50aWZpZXIgdXNlZCBmb3IgcGFnaW5hdGluZyBhIGRhdGFiYXNlIHF1ZXJ5LlxuICpcbiAqIEN1cnNvcnMgYXJlIHJldHVybmVkIGZyb20ge0BsaW5rIE9yZGVyZWRRdWVyeS5wYWdpbmF0ZX0gYW5kIHJlcHJlc2VudCB0aGVcbiAqIHBvaW50IG9mIHRoZSBxdWVyeSB3aGVyZSB0aGUgcGFnZSBvZiByZXN1bHRzIGVuZGVkLlxuICpcbiAqIFRvIGNvbnRpbnVlIHBhZ2luYXRpbmcsIHBhc3MgdGhlIGN1cnNvciBiYWNrIGludG9cbiAqIHtAbGluayBPcmRlcmVkUXVlcnkucGFnaW5hdGV9IGluIHRoZSB7QGxpbmsgUGFnaW5hdGlvbk9wdGlvbnN9IG9iamVjdCB0b1xuICogZmV0Y2ggYW5vdGhlciBwYWdlIG9mIHJlc3VsdHMuXG4gKlxuICogTm90ZTogQ3Vyc29ycyBjYW4gb25seSBiZSBwYXNzZWQgdG8gX2V4YWN0bHlfIHRoZSBzYW1lIGRhdGFiYXNlIHF1ZXJ5IHRoYXRcbiAqIHRoZXkgd2VyZSBnZW5lcmF0ZWQgZnJvbS4gWW91IG1heSBub3QgcmV1c2UgYSBjdXJzb3IgYmV0d2VlbiBkaWZmZXJlbnRcbiAqIGRhdGFiYXNlIHF1ZXJpZXMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBDdXJzb3IgPSBzdHJpbmc7XG5cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBwYWdpbmF0aW5nIHVzaW5nIHtAbGluayBPcmRlcmVkUXVlcnkucGFnaW5hdGV9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYWdpbmF0aW9uUmVzdWx0PFQ+IHtcbiAgLyoqXG4gICAqIFRoZSBwYWdlIG9mIHJlc3VsdHMuXG4gICAqL1xuICBwYWdlOiBUW107XG5cbiAgLyoqXG4gICAqIEhhdmUgd2UgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSByZXN1bHRzP1xuICAgKi9cbiAgaXNEb25lOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBIHtAbGluayBDdXJzb3J9IHRvIGNvbnRpbnVlIGxvYWRpbmcgbW9yZSByZXN1bHRzLlxuICAgKi9cbiAgY29udGludWVDdXJzb3I6IEN1cnNvcjtcblxuICAvKipcbiAgICogQSB7QGxpbmsgQ3Vyc29yfSB0byBzcGxpdCB0aGUgcGFnZSBpbnRvIHR3bywgc28gdGhlIHBhZ2UgZnJvbVxuICAgKiAoY3Vyc29yLCBjb250aW51ZUN1cnNvcl0gY2FuIGJlIHJlcGxhY2VkIGJ5IHR3byBwYWdlcyAoY3Vyc29yLCBzcGxpdEN1cnNvcl1cbiAgICogYW5kIChzcGxpdEN1cnNvciwgY29udGludWVDdXJzb3JdLlxuICAgKi9cbiAgc3BsaXRDdXJzb3I/OiBDdXJzb3IgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGVuIGEgcXVlcnkgcmVhZHMgdG9vIG11Y2ggZGF0YSwgaXQgbWF5IHJldHVybiAnU3BsaXRSZWNvbW1lbmRlZCcgdG9cbiAgICogaW5kaWNhdGUgdGhhdCB0aGUgcGFnZSBzaG91bGQgYmUgc3BsaXQgaW50byB0d28gd2l0aCBgc3BsaXRDdXJzb3JgLlxuICAgKiBXaGVuIGEgcXVlcnkgcmVhZHMgc28gbXVjaCBkYXRhIHRoYXQgYHBhZ2VgIG1pZ2h0IGJlIGluY29tcGxldGUsIGl0cyBzdGF0dXNcbiAgICogYmVjb21lcyAnU3BsaXRSZXF1aXJlZCcuXG4gICAqL1xuICBwYWdlU3RhdHVzPzogXCJTcGxpdFJlY29tbWVuZGVkXCIgfCBcIlNwbGl0UmVxdWlyZWRcIiB8IG51bGw7XG59XG5cbi8qKlxuICogVGhlIG9wdGlvbnMgcGFzc2VkIHRvIHtAbGluayBPcmRlcmVkUXVlcnkucGFnaW5hdGV9LlxuICpcbiAqIFRvIHVzZSB0aGlzIHR5cGUgaW4gW2FyZ3VtZW50IHZhbGlkYXRpb25dKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L2Z1bmN0aW9ucy92YWxpZGF0aW9uKSxcbiAqIHVzZSB0aGUge0BsaW5rIHBhZ2luYXRpb25PcHRzVmFsaWRhdG9yfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFnaW5hdGlvbk9wdGlvbnMge1xuICAvKipcbiAgICogTnVtYmVyIG9mIGl0ZW1zIHRvIGxvYWQgaW4gdGhpcyBwYWdlIG9mIHJlc3VsdHMuXG4gICAqXG4gICAqIE5vdGU6IFRoaXMgaXMgb25seSBhbiBpbml0aWFsIHZhbHVlIVxuICAgKlxuICAgKiBJZiB5b3UgYXJlIHJ1bm5pbmcgdGhpcyBwYWdpbmF0ZWQgcXVlcnkgaW4gYSByZWFjdGl2ZSBxdWVyeSBmdW5jdGlvbiwgeW91XG4gICAqIG1heSByZWNlaXZlIG1vcmUgb3IgbGVzcyBpdGVtcyB0aGFuIHRoaXMgaWYgaXRlbXMgd2VyZSBhZGRlZCB0byBvciByZW1vdmVkXG4gICAqIGZyb20gdGhlIHF1ZXJ5IHJhbmdlLlxuICAgKi9cbiAgbnVtSXRlbXM6IG51bWJlcjtcblxuICAvKipcbiAgICogQSB7QGxpbmsgQ3Vyc29yfSByZXByZXNlbnRpbmcgdGhlIHN0YXJ0IG9mIHRoaXMgcGFnZSBvciBgbnVsbGAgdG8gc3RhcnRcbiAgICogYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgcXVlcnkgcmVzdWx0cy5cbiAgICovXG4gIGN1cnNvcjogQ3Vyc29yIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB7QGxpbmsgQ3Vyc29yfSByZXByZXNlbnRpbmcgdGhlIGVuZCBvZiB0aGlzIHBhZ2Ugb3IgYG51bGwgfCB1bmRlZmluZWRgIHRvXG4gICAqIHVzZSBgbnVtSXRlbXNgIGluc3RlYWQuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5kQ3Vyc29yPzogQ3Vyc29yIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgdGhhdCBzaG91bGQgYmUgcmVhZCBmcm9tIHRoZSBkYXRhYmFzZS5cbiAgICpcbiAgICogVGhpcyBvcHRpb24gaXMgZGlmZmVyZW50IGZyb20gYG51bUl0ZW1zYCBpbiB0aGF0IGl0IGNvbnRyb2xzIHRoZSBudW1iZXIgb2Ygcm93cyBlbnRlcmluZyBhIHF1ZXJ5J3NcbiAgICogcGlwZWxpbmUsIHdoZXJlIGBudW1JdGVtc2AgY29udHJvbHMgdGhlIG51bWJlciBvZiByb3dzIGNvbWluZyBvdXQuIEZvciBleGFtcGxlLCBhIGBmaWx0ZXJgXG4gICAqIG1heSBkaXNxdWFsaWZ5IG1vc3Qgb2YgdGhlIHJvd3MgY29taW5nIGluLCBzbyBzZXR0aW5nIGEgbG93IGBudW1JdGVtc2Agd291bGQgbm90IGhlbHBcbiAgICogYm91bmQgaXRzIGV4ZWN1dGlvbiB0aW1lLiBJbnN0ZWFkLCBzZXQgYSBsb3cgYG1heGltdW1Sb3dzUmVhZGAgdG8gZWZmaWNpZW50bHkgcGFnaW5hdGVcbiAgICogdGhyb3VnaCB0aGUgZmlsdGVyLlxuICAgKlxuICAgKiBDdXJyZW50bHkgdGhpcyBpcyBub3QgZW5mb3JjZWQgZm9yIHNlYXJjaCBxdWVyaWVzLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1heGltdW1Sb3dzUmVhZD86IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIGJ5dGVzIHRoYXQgc2hvdWxkIGJlIHJlYWQgZnJvbSB0aGUgZGF0YWJhc2UuXG4gICAqXG4gICAqIEFzIHdpdGgge0BsaW5rIFBhZ2luYXRpb25PcHRpb25zLm1heGltdW1Sb3dzUmVhZH0sIHRoaXMgYWZmZWN0cyB0aGUgbnVtYmVyXG4gICAqIG9mIHJvd3MgZW50ZXJpbmcgYSBxdWVyeSdzIHBpcGVsaW5lLlxuICAgKlxuICAgKiBPbmNlIGEgcGFnaW5hdGVkIHF1ZXJ5IGhpdHMgaXRzIGJ5dGVzIHJlYWQgYnVkZ2V0LCBhbiBpbmNvbXBsZXRlIHBhZ2VcbiAgICogd2lsbCBiZSByZXR1cm5lZC5cbiAgICpcbiAgICogQ3VycmVudGx5IHRoaXMgaXMgbm90IGVuZm9yY2VkIGZvciBzZWFyY2ggcXVlcmllcy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtYXhpbXVtQnl0ZXNSZWFkPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIEEge0BsaW5rIHZhbHVlcy5WYWxpZGF0b3J9IGZvciB7QGxpbmsgUGFnaW5hdGlvbk9wdGlvbnN9LlxuICpcbiAqIFRoaXMgaW5jbHVkZXMgdGhlIHN0YW5kYXJkIHtAbGluayBQYWdpbmF0aW9uT3B0aW9uc30gcHJvcGVydGllcyBhbG9uZyB3aXRoXG4gKiBhbiBvcHRpb25hbCBjYWNoZS1idXN0aW5nIGBpZGAgcHJvcGVydHkgdXNlZCBieSB7QGxpbmsgcmVhY3QudXNlUGFnaW5hdGVkUXVlcnl9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHBhZ2luYXRpb25PcHRzVmFsaWRhdG9yID0gdi5vYmplY3Qoe1xuICBudW1JdGVtczogdi5udW1iZXIoKSxcbiAgY3Vyc29yOiB2LnVuaW9uKHYuc3RyaW5nKCksIHYubnVsbCgpKSxcbiAgZW5kQ3Vyc29yOiB2Lm9wdGlvbmFsKHYudW5pb24odi5zdHJpbmcoKSwgdi5udWxsKCkpKSxcbiAgaWQ6IHYub3B0aW9uYWwodi5udW1iZXIoKSksXG4gIG1heGltdW1Sb3dzUmVhZDogdi5vcHRpb25hbCh2Lm51bWJlcigpKSxcbiAgbWF4aW11bUJ5dGVzUmVhZDogdi5vcHRpb25hbCh2Lm51bWJlcigpKSxcbn0pO1xuXG4vKipcbiAqIEEge0BsaW5rIHZhbHVlcy5WYWxpZGF0b3J9IGZhY3RvcnkgZm9yIHtAbGluayBQYWdpbmF0aW9uUmVzdWx0fS5cbiAqXG4gKiBDcmVhdGUgYSB2YWxpZGF0b3IgZm9yIHRoZSByZXN1bHQgb2YgY2FsbGluZyB7QGxpbmsgT3JkZXJlZFF1ZXJ5LnBhZ2luYXRlfVxuICogd2l0aCBhIGdpdmVuIGl0ZW0gdmFsaWRhdG9yLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICogYGBgdHNcbiAqIGNvbnN0IHBhZ2luYXRpb25SZXN1bHRWYWxpZGF0b3IgPSBwYWdpbmF0aW9uUmVzdWx0VmFsaWRhdG9yKHYub2JqZWN0KHtcbiAqICAgX2lkOiB2LmlkKFwidXNlcnNcIiksXG4gKiAgIF9jcmVhdGlvblRpbWU6IHYubnVtYmVyKCksXG4gKiAgIG5hbWU6IHYuc3RyaW5nKCksXG4gKiB9KSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gaXRlbVZhbGlkYXRvciAtIEEgdmFsaWRhdG9yIGZvciB0aGUgaXRlbXMgaW4gdGhlIHBhZ2VcbiAqIEByZXR1cm5zIEEgdmFsaWRhdG9yIGZvciB0aGUgcGFnaW5hdGlvbiByZXN1bHRcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYWdpbmF0aW9uUmVzdWx0VmFsaWRhdG9yPFxuICBUIGV4dGVuZHMgVmFsaWRhdG9yPFZhbHVlLCBcInJlcXVpcmVkXCIsIHN0cmluZz4sXG4+KGl0ZW1WYWxpZGF0b3I6IFQpIHtcbiAgcmV0dXJuIHYub2JqZWN0KHtcbiAgICBwYWdlOiB2LmFycmF5KGl0ZW1WYWxpZGF0b3IpLFxuICAgIGNvbnRpbnVlQ3Vyc29yOiB2LnN0cmluZygpLFxuICAgIGlzRG9uZTogdi5ib29sZWFuKCksXG4gICAgc3BsaXRDdXJzb3I6IHYub3B0aW9uYWwodi51bmlvbih2LnN0cmluZygpLCB2Lm51bGwoKSkpLFxuICAgIHBhZ2VTdGF0dXM6IHYub3B0aW9uYWwoXG4gICAgICB2LnVuaW9uKFxuICAgICAgICB2LmxpdGVyYWwoXCJTcGxpdFJlY29tbWVuZGVkXCIpLFxuICAgICAgICB2LmxpdGVyYWwoXCJTcGxpdFJlcXVpcmVkXCIpLFxuICAgICAgICB2Lm51bGwoKSxcbiAgICAgICksXG4gICAgKSxcbiAgfSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/pagination.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/router.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/router.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HttpRouter: () => (/* binding */ HttpRouter),\n/* harmony export */   ROUTABLE_HTTP_METHODS: () => (/* binding */ ROUTABLE_HTTP_METHODS),\n/* harmony export */   httpRouter: () => (/* binding */ httpRouter),\n/* harmony export */   normalizeMethod: () => (/* binding */ normalizeMethod)\n/* harmony export */ });\n/* harmony import */ var _impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./impl/syscall.js */ \"(ssr)/./node_modules/convex/dist/esm/server/impl/syscall.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nconst ROUTABLE_HTTP_METHODS = [\n    \"GET\",\n    \"POST\",\n    \"PUT\",\n    \"DELETE\",\n    \"OPTIONS\",\n    \"PATCH\"\n];\nfunction normalizeMethod(method) {\n    if (method === \"HEAD\") return \"GET\";\n    return method;\n}\nconst httpRouter = ()=>new HttpRouter();\nclass HttpRouter {\n    constructor(){\n        __publicField(this, \"exactRoutes\", /* @__PURE__ */ new Map());\n        __publicField(this, \"prefixRoutes\", /* @__PURE__ */ new Map());\n        __publicField(this, \"isRouter\", true);\n        /**\n     * Specify an HttpAction to be used to respond to requests\n     * for an HTTP method (e.g. \"GET\") and a path or pathPrefix.\n     *\n     * Paths must begin with a slash. Path prefixes must also end in a slash.\n     *\n     * ```js\n     * // matches `/profile` (but not `/profile/`)\n     * http.route({ path: \"/profile\", method: \"GET\", handler: getProfile})\n     *\n     * // matches `/profiles/`, `/profiles/abc`, and `/profiles/a/c/b` (but not `/profile`)\n     * http.route({ pathPrefix: \"/profile/\", method: \"GET\", handler: getProfile})\n     * ```\n     */ __publicField(this, \"route\", (spec)=>{\n            if (!spec.handler) throw new Error(`route requires handler`);\n            if (!spec.method) throw new Error(`route requires method`);\n            const { method, handler } = spec;\n            if (!ROUTABLE_HTTP_METHODS.includes(method)) {\n                throw new Error(`'${method}' is not an allowed HTTP method (like GET, POST, PUT etc.)`);\n            }\n            if (\"path\" in spec) {\n                if (\"pathPrefix\" in spec) {\n                    throw new Error(`Invalid httpRouter route: cannot contain both 'path' and 'pathPrefix'`);\n                }\n                if (!spec.path.startsWith(\"/\")) {\n                    throw new Error(`path '${spec.path}' does not start with a /`);\n                }\n                if (spec.path.startsWith(\"/.files/\") || spec.path === \"/.files\") {\n                    throw new Error(`path '${spec.path}' is reserved`);\n                }\n                const methods = this.exactRoutes.has(spec.path) ? this.exactRoutes.get(spec.path) : /* @__PURE__ */ new Map();\n                if (methods.has(method)) {\n                    throw new Error(`Path '${spec.path}' for method ${method} already in use`);\n                }\n                methods.set(method, handler);\n                this.exactRoutes.set(spec.path, methods);\n            } else if (\"pathPrefix\" in spec) {\n                if (!spec.pathPrefix.startsWith(\"/\")) {\n                    throw new Error(`pathPrefix '${spec.pathPrefix}' does not start with a /`);\n                }\n                if (!spec.pathPrefix.endsWith(\"/\")) {\n                    throw new Error(`pathPrefix ${spec.pathPrefix} must end with a /`);\n                }\n                if (spec.pathPrefix.startsWith(\"/.files/\")) {\n                    throw new Error(`pathPrefix '${spec.pathPrefix}' is reserved`);\n                }\n                const prefixes = this.prefixRoutes.get(method) || /* @__PURE__ */ new Map();\n                if (prefixes.has(spec.pathPrefix)) {\n                    throw new Error(`${spec.method} pathPrefix ${spec.pathPrefix} is already defined`);\n                }\n                prefixes.set(spec.pathPrefix, handler);\n                this.prefixRoutes.set(method, prefixes);\n            } else {\n                throw new Error(`Invalid httpRouter route entry: must contain either field 'path' or 'pathPrefix'`);\n            }\n        });\n        /**\n     * Returns a list of routed HTTP actions.\n     *\n     * These are used to populate the list of routes shown in the Functions page of the Convex dashboard.\n     *\n     * @returns - an array of [path, method, endpoint] tuples.\n     */ __publicField(this, \"getRoutes\", ()=>{\n            const exactPaths = [\n                ...this.exactRoutes.keys()\n            ].sort();\n            const exact = exactPaths.flatMap((path)=>[\n                    ...this.exactRoutes.get(path).keys()\n                ].sort().map((method)=>[\n                        path,\n                        method,\n                        this.exactRoutes.get(path).get(method)\n                    ]));\n            const prefixPathMethods = [\n                ...this.prefixRoutes.keys()\n            ].sort();\n            const prefixes = prefixPathMethods.flatMap((method)=>[\n                    ...this.prefixRoutes.get(method).keys()\n                ].sort().map((pathPrefix)=>[\n                        `${pathPrefix}*`,\n                        method,\n                        this.prefixRoutes.get(method).get(pathPrefix)\n                    ]));\n            return [\n                ...exact,\n                ...prefixes\n            ];\n        });\n        /**\n     * Returns the appropriate HTTP action and its routed request path and method.\n     *\n     * The path and method returned are used for logging and metrics, and should\n     * match up with one of the routes returned by `getRoutes`.\n     *\n     * For example,\n     *\n     * ```js\n     * http.route({ pathPrefix: \"/profile/\", method: \"GET\", handler: getProfile});\n     *\n     * http.lookup(\"/profile/abc\", \"GET\") // returns [getProfile, \"GET\", \"/profile/*\"]\n     *```\n     *\n     * @returns - a tuple [{@link PublicHttpAction}, method, path] or null.\n     */ __publicField(this, \"lookup\", (path, method)=>{\n            method = normalizeMethod(method);\n            const exactMatch = this.exactRoutes.get(path)?.get(method);\n            if (exactMatch) return [\n                exactMatch,\n                method,\n                path\n            ];\n            const prefixes = this.prefixRoutes.get(method) || /* @__PURE__ */ new Map();\n            const prefixesSorted = [\n                ...prefixes.entries()\n            ].sort(([prefixA, _a], [prefixB, _b])=>prefixB.length - prefixA.length);\n            for (const [pathPrefix, endpoint] of prefixesSorted){\n                if (path.startsWith(pathPrefix)) {\n                    return [\n                        endpoint,\n                        method,\n                        `${pathPrefix}*`\n                    ];\n                }\n            }\n            return null;\n        });\n        /**\n     * Given a JSON string representation of a Request object, return a Response\n     * by routing the request and running the appropriate endpoint or returning\n     * a 404 Response.\n     *\n     * @param argsStr - a JSON string representing a Request object.\n     *\n     * @returns - a Response object.\n     */ __publicField(this, \"runRequest\", async (argsStr, requestRoute)=>{\n            const request = (0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performJsSyscall)(\"requestFromConvexJson\", {\n                convexJson: JSON.parse(argsStr)\n            });\n            let pathname = requestRoute;\n            if (!pathname || typeof pathname !== \"string\") {\n                pathname = new URL(request.url).pathname;\n            }\n            const method = request.method;\n            const match = this.lookup(pathname, method);\n            if (!match) {\n                const response2 = new Response(`No HttpAction routed for ${pathname}`, {\n                    status: 404\n                });\n                return JSON.stringify((0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performJsSyscall)(\"convexJsonFromResponse\", {\n                    response: response2\n                }));\n            }\n            const [endpoint, _method, _path] = match;\n            const response = await endpoint.invokeHttpAction(request);\n            return JSON.stringify((0,_impl_syscall_js__WEBPACK_IMPORTED_MODULE_0__.performJsSyscall)(\"convexJsonFromResponse\", {\n                response\n            }));\n        });\n    }\n} //# sourceMappingURL=router.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9yb3V0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFhMUIsTUFBTSx3QkFBd0I7SUFDbkM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0Y7QUFZTyxTQUFTLGdCQUNkLFFBQ2dCO0lBR2hCLElBQUksV0FBVyxPQUFRLFFBQU87SUFDOUIsT0FBTztBQUNUO0FBT08sTUFBTSxhQUFhLElBQU0sSUFBSSxXQUFXO0FBK0Z4QyxNQUFNLFdBQVc7SUFBakI7UUFDTCxtQ0FBa0Usb0JBQUksSUFBSTtRQUMxRSxvQ0FBbUUsb0JBQUksSUFBSTtRQUMzRSxnQ0FBaUI7UUFnQmpCOzs7Ozs7Ozs7Ozs7O0tBQUEsZ0NBQVEsQ0FBQztZQUNQLElBQUksQ0FBQyxLQUFLLFFBQVMsT0FBTSxJQUFJLE1BQU0sd0JBQXdCO1lBQzNELElBQUksQ0FBQyxLQUFLLE9BQVEsT0FBTSxJQUFJLE1BQU0sdUJBQXVCO1lBQ3pELE1BQU0sRUFBRSxRQUFRLFFBQVEsSUFBSTtZQUM1QixJQUFJLENBQUMsc0JBQXNCLFNBQVMsTUFBTSxHQUFHO2dCQUMzQyxNQUFNLElBQUksTUFDUixJQUFJLE1BQU07WUFFZDtZQUVBLElBQUksVUFBVSxNQUFNO2dCQUNsQixJQUFJLGdCQUFnQixNQUFNO29CQUN4QixNQUFNLElBQUksTUFDUjtnQkFFSjtnQkFDQSxJQUFJLENBQUMsS0FBSyxLQUFLLFdBQVcsR0FBRyxHQUFHO29CQUM5QixNQUFNLElBQUksTUFBTSxTQUFTLEtBQUssSUFBSSwyQkFBMkI7Z0JBQy9EO2dCQUNBLElBQUksS0FBSyxLQUFLLFdBQVcsVUFBVSxLQUFLLEtBQUssU0FBUyxXQUFXO29CQUMvRCxNQUFNLElBQUksTUFBTSxTQUFTLEtBQUssSUFBSSxlQUFlO2dCQUNuRDtnQkFDQSxNQUFNLFVBQ0osS0FBSyxZQUFZLElBQUksS0FBSyxJQUFJLElBQzFCLEtBQUssWUFBWSxJ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QTtZQUVBLE1BQU0sVUFBVSxrRUFBZ0IsQ0FBQyx5QkFBeUI7Z0JBQ3hELFlBQVksS0FBSyxNQUFNLE9BQU87WUFDaEMsQ0FBQztZQUVELElBQUksV0FBVztZQUNmLElBQUksQ0FBQyxZQUFZLE9BQU8sYUFBYSxVQUFVO2dCQUM3QyxXQUFXLElBQUksSUFBSSxRQUFRLEdBQUcsRUFBRTtZQUNsQztZQUVBLE1BQU0sU0FBUyxRQUFRO1lBQ3ZCLE1BQU0sUUFBUSxLQUFLLE9BQU8sVUFBVSxNQUF3QjtZQUM1RCxJQUFJLENBQUMsT0FBTztnQkFDVixNQUFNQSxZQUFXLElBQUksU0FBUyw0QkFBNEIsUUFBUSxJQUFJO29CQUNwRSxRQUFRO2dCQUNWLENBQUM7Z0JBQ0QsT0FBTyxLQUFLLFVBQ1Ysa0VBQWdCLENBQUMsMEJBQTBCO29CQUFFLFVBQUFBO2dCQUFTLENBQUM7WUFFM0Q7WUFDQSxNQUFNLENBQUMsVUFBVSxTQUFTLEtBQUssSUFBSTtZQUNuQyxNQUFNLFdBQVcsTUFBTSxTQUFTLGlCQUFpQixPQUFPO1lBQ3hELE9BQU8sS0FBSyxVQUNWLGtFQUFnQixDQUFDLDBCQUEwQjtnQkFBRTtZQUFTLENBQUM7UUFFM0Q7SUFBQTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NlcnZlci9yb3V0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGVyZm9ybUpzU3lzY2FsbCB9IGZyb20gXCIuL2ltcGwvc3lzY2FsbC5qc1wiO1xuaW1wb3J0IHsgUHVibGljSHR0cEFjdGlvbiB9IGZyb20gXCIuL3JlZ2lzdHJhdGlvbi5qc1wiO1xuXG4vLyBOb3RlOiB0aGlzIGxpc3QgaXMgZHVwbGljYXRlZCBpbiB0aGUgZGFzaGJvYXJkLlxuLyoqXG4gKiBBIGxpc3Qgb2YgdGhlIG1ldGhvZHMgc3VwcG9ydGVkIGJ5IENvbnZleCBIVFRQIGFjdGlvbnMuXG4gKlxuICogSEVBRCBpcyBoYW5kbGVkIGJ5IENvbnZleCBieSBydW5uaW5nIEdFVCBhbmQgc3RyaXBwaW5nIHRoZSBib2R5LlxuICogQ09OTkVDVCBpcyBub3Qgc3VwcG9ydGVkIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQuXG4gKiBUUkFDRSBpcyBub3Qgc3VwcG9ydGVkIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgUk9VVEFCTEVfSFRUUF9NRVRIT0RTID0gW1xuICBcIkdFVFwiLFxuICBcIlBPU1RcIixcbiAgXCJQVVRcIixcbiAgXCJERUxFVEVcIixcbiAgXCJPUFRJT05TXCIsXG4gIFwiUEFUQ0hcIixcbl0gYXMgY29uc3Q7XG4vKipcbiAqIEEgdHlwZSByZXByZXNlbnRpbmcgdGhlIG1ldGhvZHMgc3VwcG9ydGVkIGJ5IENvbnZleCBIVFRQIGFjdGlvbnMuXG4gKlxuICogSEVBRCBpcyBoYW5kbGVkIGJ5IENvbnZleCBieSBydW5uaW5nIEdFVCBhbmQgc3RyaXBwaW5nIHRoZSBib2R5LlxuICogQ09OTkVDVCBpcyBub3Qgc3VwcG9ydGVkIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQuXG4gKiBUUkFDRSBpcyBub3Qgc3VwcG9ydGVkIGFuZCB3aWxsIG5vdCBiZSBzdXBwb3J0ZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBSb3V0YWJsZU1ldGhvZCA9ICh0eXBlb2YgUk9VVEFCTEVfSFRUUF9NRVRIT0RTKVtudW1iZXJdO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKFxuICBtZXRob2Q6IFJvdXRhYmxlTWV0aG9kIHwgXCJIRUFEXCIsXG4pOiBSb3V0YWJsZU1ldGhvZCB7XG4gIC8vIFRoaXMgcm91dGVyIHJvdXRlcyBIRUFEIHJlcXVlc3RzIGFzIEdFVHMsIGxldHRpbmcgQXh1bSBzdHJpcCB0aGVlIHJlc3BvbnNlXG4gIC8vIGJvZGllcyBhcmUgcmVzcG9uc2UgYm9kaWVzIGFmdGVyd2FyZC5cbiAgaWYgKG1ldGhvZCA9PT0gXCJIRUFEXCIpIHJldHVybiBcIkdFVFwiO1xuICByZXR1cm4gbWV0aG9kO1xufVxuXG4vKipcbiAqIFJldHVybiBhIG5ldyB7QGxpbmsgSHR0cFJvdXRlcn0gb2JqZWN0LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGh0dHBSb3V0ZXIgPSAoKSA9PiBuZXcgSHR0cFJvdXRlcigpO1xuXG4vKipcbiAqIEEgdHlwZSByZXByZXNlbnRpbmcgYSByb3V0ZSB0byBhbiBIVFRQIGFjdGlvbiB1c2luZyBhbiBleGFjdCByZXF1ZXN0IFVSTCBwYXRoIG1hdGNoLlxuICpcbiAqIFVzZWQgYnkge0BsaW5rIEh0dHBSb3V0ZXJ9IHRvIHJvdXRlIHJlcXVlc3RzIHRvIEhUVFAgYWN0aW9ucy5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFJvdXRlU3BlY1dpdGhQYXRoID0ge1xuICAvKipcbiAgICogRXhhY3QgSFRUUCByZXF1ZXN0IHBhdGggdG8gcm91dGUuXG4gICAqL1xuICBwYXRoOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBIVFRQIG1ldGhvZCAoXCJHRVRcIiwgXCJQT1NUXCIsIC4uLikgdG8gcm91dGUuXG4gICAqL1xuICBtZXRob2Q6IFJvdXRhYmxlTWV0aG9kO1xuICAvKipcbiAgICogVGhlIEhUVFAgYWN0aW9uIHRvIGV4ZWN1dGUuXG4gICAqL1xuICBoYW5kbGVyOiBQdWJsaWNIdHRwQWN0aW9uO1xufTtcblxuLyoqXG4gKiBBIHR5cGUgcmVwcmVzZW50aW5nIGEgcm91dGUgdG8gYW4gSFRUUCBhY3Rpb24gdXNpbmcgYSByZXF1ZXN0IFVSTCBwYXRoIHByZWZpeCBtYXRjaC5cbiAqXG4gKiBVc2VkIGJ5IHtAbGluayBIdHRwUm91dGVyfSB0byByb3V0ZSByZXF1ZXN0cyB0byBIVFRQIGFjdGlvbnMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBSb3V0ZVNwZWNXaXRoUGF0aFByZWZpeCA9IHtcbiAgLyoqXG4gICAqIEFuIEhUVFAgcmVxdWVzdCBwYXRoIHByZWZpeCB0byByb3V0ZS4gUmVxdWVzdHMgd2l0aCBhIHBhdGggc3RhcnRpbmcgd2l0aCB0aGlzIHZhbHVlXG4gICAqIHdpbGwgYmUgcm91dGVkIHRvIHRoZSBIVFRQIGFjdGlvbi5cbiAgICovXG4gIHBhdGhQcmVmaXg6IHN0cmluZztcbiAgLyoqXG4gICAqIEhUVFAgbWV0aG9kIChcIkdFVFwiLCBcIlBPU1RcIiwgLi4uKSB0byByb3V0ZS5cbiAgICovXG4gIG1ldGhvZDogUm91dGFibGVNZXRob2Q7XG4gIC8qKlxuICAgKiBUaGUgSFRUUCBhY3Rpb24gdG8gZXhlY3V0ZS5cbiAgICovXG4gIGhhbmRsZXI6IFB1YmxpY0h0dHBBY3Rpb247XG59O1xuXG4vKipcbiAqIEEgdHlwZSByZXByZXNlbnRpbmcgYSByb3V0ZSB0byBhbiBIVFRQIGFjdGlvbi5cbiAqXG4gKiBVc2VkIGJ5IHtAbGluayBIdHRwUm91dGVyfSB0byByb3V0ZSByZXF1ZXN0cyB0byBIVFRQIGFjdGlvbnMuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBSb3V0ZVNwZWMgPSBSb3V0ZVNwZWNXaXRoUGF0aCB8IFJvdXRlU3BlY1dpdGhQYXRoUHJlZml4O1xuXG4vKipcbiAqIEhUVFAgcm91dGVyIGZvciBzcGVjaWZ5aW5nIHRoZSBwYXRocyBhbmQgbWV0aG9kcyBvZiB7QGxpbmsgaHR0cEFjdGlvbkdlbmVyaWN9c1xuICpcbiAqIEFuIGV4YW1wbGUgYGNvbnZleC9odHRwLmpzYCBmaWxlIG1pZ2h0IGxvb2sgbGlrZSB0aGlzLlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBodHRwUm91dGVyIH0gZnJvbSBcImNvbnZleC9zZXJ2ZXJcIjtcbiAqIGltcG9ydCB7IGdldE1lc3NhZ2VzQnlBdXRob3IgfSBmcm9tIFwiLi9nZXRNZXNzYWdlc0J5QXV0aG9yXCI7XG4gKiBpbXBvcnQgeyBodHRwQWN0aW9uIH0gZnJvbSBcIi4vX2dlbmVyYXRlZC9zZXJ2ZXJcIjtcbiAqXG4gKiBjb25zdCBodHRwID0gaHR0cFJvdXRlcigpO1xuICpcbiAqIC8vIEhUVFAgYWN0aW9ucyBjYW4gYmUgZGVmaW5lZCBpbmxpbmUuLi5cbiAqIGh0dHAucm91dGUoe1xuICogICBwYXRoOiBcIi9tZXNzYWdlXCIsXG4gKiAgIG1ldGhvZDogXCJQT1NUXCIsXG4gKiAgIGhhbmRsZXI6IGh0dHBBY3Rpb24oYXN5bmMgKHsgcnVuTXV0YXRpb24gfSwgcmVxdWVzdCkgPT4ge1xuICogICAgIGNvbnN0IHsgYXV0aG9yLCBib2R5IH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAqXG4gKiAgICAgYXdhaXQgcnVuTXV0YXRpb24oYXBpLnNlbmRNZXNzYWdlLmRlZmF1bHQsIHsgYm9keSwgYXV0aG9yIH0pO1xuICogICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuICogICAgICAgc3RhdHVzOiAyMDAsXG4gKiAgICAgfSk7XG4gKiAgIH0pXG4gKiB9KTtcbiAqXG4gKiAvLyAuLi5vciB0aGV5IGNhbiBiZSBpbXBvcnRlZCBmcm9tIG90aGVyIGZpbGVzLlxuICogaHR0cC5yb3V0ZSh7XG4gKiAgIHBhdGg6IFwiL2dldE1lc3NhZ2VzQnlBdXRob3JcIixcbiAqICAgbWV0aG9kOiBcIkdFVFwiLFxuICogICBoYW5kbGVyOiBnZXRNZXNzYWdlc0J5QXV0aG9yLFxuICogfSk7XG4gKlxuICogLy8gQ29udmV4IGV4cGVjdHMgdGhlIHJvdXRlciB0byBiZSB0aGUgZGVmYXVsdCBleHBvcnQgb2YgYGNvbnZleC9odHRwLmpzYC5cbiAqIGV4cG9ydCBkZWZhdWx0IGh0dHA7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBIdHRwUm91dGVyIHtcbiAgZXhhY3RSb3V0ZXM6IE1hcDxzdHJpbmcsIE1hcDxSb3V0YWJsZU1ldGhvZCwgUHVibGljSHR0cEFjdGlvbj4+ID0gbmV3IE1hcCgpO1xuICBwcmVmaXhSb3V0ZXM6IE1hcDxSb3V0YWJsZU1ldGhvZCwgTWFwPHN0cmluZywgUHVibGljSHR0cEFjdGlvbj4+ID0gbmV3IE1hcCgpO1xuICBpc1JvdXRlcjogdHJ1ZSA9IHRydWU7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYW4gSHR0cEFjdGlvbiB0byBiZSB1c2VkIHRvIHJlc3BvbmQgdG8gcmVxdWVzdHNcbiAgICogZm9yIGFuIEhUVFAgbWV0aG9kIChlLmcuIFwiR0VUXCIpIGFuZCBhIHBhdGggb3IgcGF0aFByZWZpeC5cbiAgICpcbiAgICogUGF0aHMgbXVzdCBiZWdpbiB3aXRoIGEgc2xhc2guIFBhdGggcHJlZml4ZXMgbXVzdCBhbHNvIGVuZCBpbiBhIHNsYXNoLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiAvLyBtYXRjaGVzIGAvcHJvZmlsZWAgKGJ1dCBub3QgYC9wcm9maWxlL2ApXG4gICAqIGh0dHAucm91dGUoeyBwYXRoOiBcIi9wcm9maWxlXCIsIG1ldGhvZDogXCJHRVRcIiwgaGFuZGxlcjogZ2V0UHJvZmlsZX0pXG4gICAqXG4gICAqIC8vIG1hdGNoZXMgYC9wcm9maWxlcy9gLCBgL3Byb2ZpbGVzL2FiY2AsIGFuZCBgL3Byb2ZpbGVzL2EvYy9iYCAoYnV0IG5vdCBgL3Byb2ZpbGVgKVxuICAgKiBodHRwLnJvdXRlKHsgcGF0aFByZWZpeDogXCIvcHJvZmlsZS9cIiwgbWV0aG9kOiBcIkdFVFwiLCBoYW5kbGVyOiBnZXRQcm9maWxlfSlcbiAgICogYGBgXG4gICAqL1xuICByb3V0ZSA9IChzcGVjOiBSb3V0ZVNwZWMpID0+IHtcbiAgICBpZiAoIXNwZWMuaGFuZGxlcikgdGhyb3cgbmV3IEVycm9yKGByb3V0ZSByZXF1aXJlcyBoYW5kbGVyYCk7XG4gICAgaWYgKCFzcGVjLm1ldGhvZCkgdGhyb3cgbmV3IEVycm9yKGByb3V0ZSByZXF1aXJlcyBtZXRob2RgKTtcbiAgICBjb25zdCB7IG1ldGhvZCwgaGFuZGxlciB9ID0gc3BlYztcbiAgICBpZiAoIVJPVVRBQkxFX0hUVFBfTUVUSE9EUy5pbmNsdWRlcyhtZXRob2QpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGAnJHttZXRob2R9JyBpcyBub3QgYW4gYWxsb3dlZCBIVFRQIG1ldGhvZCAobGlrZSBHRVQsIFBPU1QsIFBVVCBldGMuKWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChcInBhdGhcIiBpbiBzcGVjKSB7XG4gICAgICBpZiAoXCJwYXRoUHJlZml4XCIgaW4gc3BlYykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgaHR0cFJvdXRlciByb3V0ZTogY2Fubm90IGNvbnRhaW4gYm90aCAncGF0aCcgYW5kICdwYXRoUHJlZml4J2AsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoIXNwZWMucGF0aC5zdGFydHNXaXRoKFwiL1wiKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHBhdGggJyR7c3BlYy5wYXRofScgZG9lcyBub3Qgc3RhcnQgd2l0aCBhIC9gKTtcbiAgICAgIH1cbiAgICAgIGlmIChzcGVjLnBhdGguc3RhcnRzV2l0aChcIi8uZmlsZXMvXCIpIHx8IHNwZWMucGF0aCA9PT0gXCIvLmZpbGVzXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwYXRoICcke3NwZWMucGF0aH0nIGlzIHJlc2VydmVkYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBtZXRob2RzOiBNYXA8Um91dGFibGVNZXRob2QsIFB1YmxpY0h0dHBBY3Rpb24+ID1cbiAgICAgICAgdGhpcy5leGFjdFJvdXRlcy5oYXMoc3BlYy5wYXRoKVxuICAgICAgICAgID8gdGhpcy5leGFjdFJvdXRlcy5nZXQoc3BlYy5wYXRoKSFcbiAgICAgICAgICA6IG5ldyBNYXAoKTtcbiAgICAgIGlmIChtZXRob2RzLmhhcyhtZXRob2QpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgUGF0aCAnJHtzcGVjLnBhdGh9JyBmb3IgbWV0aG9kICR7bWV0aG9kfSBhbHJlYWR5IGluIHVzZWAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBtZXRob2RzLnNldChtZXRob2QsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5leGFjdFJvdXRlcy5zZXQoc3BlYy5wYXRoLCBtZXRob2RzKTtcbiAgICB9IGVsc2UgaWYgKFwicGF0aFByZWZpeFwiIGluIHNwZWMpIHtcbiAgICAgIGlmICghc3BlYy5wYXRoUHJlZml4LnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgcGF0aFByZWZpeCAnJHtzcGVjLnBhdGhQcmVmaXh9JyBkb2VzIG5vdCBzdGFydCB3aXRoIGEgL2AsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoIXNwZWMucGF0aFByZWZpeC5lbmRzV2l0aChcIi9cIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwYXRoUHJlZml4ICR7c3BlYy5wYXRoUHJlZml4fSBtdXN0IGVuZCB3aXRoIGEgL2ApO1xuICAgICAgfVxuICAgICAgaWYgKHNwZWMucGF0aFByZWZpeC5zdGFydHNXaXRoKFwiLy5maWxlcy9cIikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBwYXRoUHJlZml4ICcke3NwZWMucGF0aFByZWZpeH0nIGlzIHJlc2VydmVkYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBwcmVmaXhlcyA9XG4gICAgICAgIHRoaXMucHJlZml4Um91dGVzLmdldChtZXRob2QpIHx8IG5ldyBNYXA8c3RyaW5nLCBQdWJsaWNIdHRwQWN0aW9uPigpO1xuICAgICAgaWYgKHByZWZpeGVzLmhhcyhzcGVjLnBhdGhQcmVmaXgpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgJHtzcGVjLm1ldGhvZH0gcGF0aFByZWZpeCAke3NwZWMucGF0aFByZWZpeH0gaXMgYWxyZWFkeSBkZWZpbmVkYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHByZWZpeGVzLnNldChzcGVjLnBhdGhQcmVmaXgsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5wcmVmaXhSb3V0ZXMuc2V0KG1ldGhvZCwgcHJlZml4ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBJbnZhbGlkIGh0dHBSb3V0ZXIgcm91dGUgZW50cnk6IG11c3QgY29udGFpbiBlaXRoZXIgZmllbGQgJ3BhdGgnIG9yICdwYXRoUHJlZml4J2AsXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2Ygcm91dGVkIEhUVFAgYWN0aW9ucy5cbiAgICpcbiAgICogVGhlc2UgYXJlIHVzZWQgdG8gcG9wdWxhdGUgdGhlIGxpc3Qgb2Ygcm91dGVzIHNob3duIGluIHRoZSBGdW5jdGlvbnMgcGFnZSBvZiB0aGUgQ29udmV4IGRhc2hib2FyZC5cbiAgICpcbiAgICogQHJldHVybnMgLSBhbiBhcnJheSBvZiBbcGF0aCwgbWV0aG9kLCBlbmRwb2ludF0gdHVwbGVzLlxuICAgKi9cbiAgZ2V0Um91dGVzID0gKCk6IEFycmF5PFxuICAgIFJlYWRvbmx5PFtzdHJpbmcsIFJvdXRhYmxlTWV0aG9kLCBQdWJsaWNIdHRwQWN0aW9uXT5cbiAgPiA9PiB7XG4gICAgY29uc3QgZXhhY3RQYXRoczogc3RyaW5nW10gPSBbLi4udGhpcy5leGFjdFJvdXRlcy5rZXlzKCldLnNvcnQoKTtcbiAgICBjb25zdCBleGFjdCA9IGV4YWN0UGF0aHMuZmxhdE1hcCgocGF0aCkgPT5cbiAgICAgIFsuLi50aGlzLmV4YWN0Um91dGVzLmdldChwYXRoKSEua2V5cygpXVxuICAgICAgICAuc29ydCgpXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgKG1ldGhvZCkgPT5cbiAgICAgICAgICAgIFtwYXRoLCBtZXRob2QsIHRoaXMuZXhhY3RSb3V0ZXMuZ2V0KHBhdGgpIS5nZXQobWV0aG9kKSFdIGFzIGNvbnN0LFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICBjb25zdCBwcmVmaXhQYXRoTWV0aG9kcyA9IFsuLi50aGlzLnByZWZpeFJvdXRlcy5rZXlzKCldLnNvcnQoKTtcbiAgICBjb25zdCBwcmVmaXhlcyA9IHByZWZpeFBhdGhNZXRob2RzLmZsYXRNYXAoKG1ldGhvZCkgPT5cbiAgICAgIFsuLi50aGlzLnByZWZpeFJvdXRlcy5nZXQobWV0aG9kKSEua2V5cygpXVxuICAgICAgICAuc29ydCgpXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgKHBhdGhQcmVmaXgpID0+XG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIGAke3BhdGhQcmVmaXh9KmAsXG4gICAgICAgICAgICAgIG1ldGhvZCxcbiAgICAgICAgICAgICAgdGhpcy5wcmVmaXhSb3V0ZXMuZ2V0KG1ldGhvZCkhLmdldChwYXRoUHJlZml4KSEsXG4gICAgICAgICAgICBdIGFzIGNvbnN0LFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICByZXR1cm4gWy4uLmV4YWN0LCAuLi5wcmVmaXhlc107XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFwcHJvcHJpYXRlIEhUVFAgYWN0aW9uIGFuZCBpdHMgcm91dGVkIHJlcXVlc3QgcGF0aCBhbmQgbWV0aG9kLlxuICAgKlxuICAgKiBUaGUgcGF0aCBhbmQgbWV0aG9kIHJldHVybmVkIGFyZSB1c2VkIGZvciBsb2dnaW5nIGFuZCBtZXRyaWNzLCBhbmQgc2hvdWxkXG4gICAqIG1hdGNoIHVwIHdpdGggb25lIG9mIHRoZSByb3V0ZXMgcmV0dXJuZWQgYnkgYGdldFJvdXRlc2AuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLFxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBodHRwLnJvdXRlKHsgcGF0aFByZWZpeDogXCIvcHJvZmlsZS9cIiwgbWV0aG9kOiBcIkdFVFwiLCBoYW5kbGVyOiBnZXRQcm9maWxlfSk7XG4gICAqXG4gICAqIGh0dHAubG9va3VwKFwiL3Byb2ZpbGUvYWJjXCIsIFwiR0VUXCIpIC8vIHJldHVybnMgW2dldFByb2ZpbGUsIFwiR0VUXCIsIFwiL3Byb2ZpbGUvKlwiXVxuICAgKmBgYFxuICAgKlxuICAgKiBAcmV0dXJucyAtIGEgdHVwbGUgW3tAbGluayBQdWJsaWNIdHRwQWN0aW9ufSwgbWV0aG9kLCBwYXRoXSBvciBudWxsLlxuICAgKi9cbiAgbG9va3VwID0gKFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBtZXRob2Q6IFJvdXRhYmxlTWV0aG9kIHwgXCJIRUFEXCIsXG4gICk6IFJlYWRvbmx5PFtQdWJsaWNIdHRwQWN0aW9uLCBSb3V0YWJsZU1ldGhvZCwgc3RyaW5nXT4gfCBudWxsID0+IHtcbiAgICBtZXRob2QgPSBub3JtYWxpemVNZXRob2QobWV0aG9kKTtcbiAgICBjb25zdCBleGFjdE1hdGNoID0gdGhpcy5leGFjdFJvdXRlcy5nZXQocGF0aCk/LmdldChtZXRob2QpO1xuICAgIGlmIChleGFjdE1hdGNoKSByZXR1cm4gW2V4YWN0TWF0Y2gsIG1ldGhvZCwgcGF0aF07XG5cbiAgICBjb25zdCBwcmVmaXhlcyA9IHRoaXMucHJlZml4Um91dGVzLmdldChtZXRob2QpIHx8IG5ldyBNYXAoKTtcbiAgICBjb25zdCBwcmVmaXhlc1NvcnRlZCA9IFsuLi5wcmVmaXhlcy5lbnRyaWVzKCldLnNvcnQoXG4gICAgICAoW3ByZWZpeEEsIF9hXSwgW3ByZWZpeEIsIF9iXSkgPT4gcHJlZml4Qi5sZW5ndGggLSBwcmVmaXhBLmxlbmd0aCxcbiAgICApO1xuICAgIGZvciAoY29uc3QgW3BhdGhQcmVmaXgsIGVuZHBvaW50XSBvZiBwcmVmaXhlc1NvcnRlZCkge1xuICAgICAgaWYgKHBhdGguc3RhcnRzV2l0aChwYXRoUHJlZml4KSkge1xuICAgICAgICByZXR1cm4gW2VuZHBvaW50LCBtZXRob2QsIGAke3BhdGhQcmVmaXh9KmBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZW4gYSBKU09OIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIFJlcXVlc3Qgb2JqZWN0LCByZXR1cm4gYSBSZXNwb25zZVxuICAgKiBieSByb3V0aW5nIHRoZSByZXF1ZXN0IGFuZCBydW5uaW5nIHRoZSBhcHByb3ByaWF0ZSBlbmRwb2ludCBvciByZXR1cm5pbmdcbiAgICogYSA0MDQgUmVzcG9uc2UuXG4gICAqXG4gICAqIEBwYXJhbSBhcmdzU3RyIC0gYSBKU09OIHN0cmluZyByZXByZXNlbnRpbmcgYSBSZXF1ZXN0IG9iamVjdC5cbiAgICpcbiAgICogQHJldHVybnMgLSBhIFJlc3BvbnNlIG9iamVjdC5cbiAgICovXG4gIHJ1blJlcXVlc3QgPSBhc3luYyAoXG4gICAgYXJnc1N0cjogc3RyaW5nLFxuICAgIHJlcXVlc3RSb3V0ZTogc3RyaW5nLFxuICApOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBwZXJmb3JtSnNTeXNjYWxsKFwicmVxdWVzdEZyb21Db252ZXhKc29uXCIsIHtcbiAgICAgIGNvbnZleEpzb246IEpTT04ucGFyc2UoYXJnc1N0ciksXG4gICAgfSk7XG5cbiAgICBsZXQgcGF0aG5hbWUgPSByZXF1ZXN0Um91dGU7XG4gICAgaWYgKCFwYXRobmFtZSB8fCB0eXBlb2YgcGF0aG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHBhdGhuYW1lID0gbmV3IFVSTChyZXF1ZXN0LnVybCkucGF0aG5hbWU7XG4gICAgfVxuXG4gICAgY29uc3QgbWV0aG9kID0gcmVxdWVzdC5tZXRob2Q7XG4gICAgY29uc3QgbWF0Y2ggPSB0aGlzLmxvb2t1cChwYXRobmFtZSwgbWV0aG9kIGFzIFJvdXRhYmxlTWV0aG9kKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IG5ldyBSZXNwb25zZShgTm8gSHR0cEFjdGlvbiByb3V0ZWQgZm9yICR7cGF0aG5hbWV9YCwge1xuICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFxuICAgICAgICBwZXJmb3JtSnNTeXNjYWxsKFwiY29udmV4SnNvbkZyb21SZXNwb25zZVwiLCB7IHJlc3BvbnNlIH0pLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgW2VuZHBvaW50LCBfbWV0aG9kLCBfcGF0aF0gPSBtYXRjaDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVuZHBvaW50Lmludm9rZUh0dHBBY3Rpb24ocmVxdWVzdCk7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFxuICAgICAgcGVyZm9ybUpzU3lzY2FsbChcImNvbnZleEpzb25Gcm9tUmVzcG9uc2VcIiwgeyByZXNwb25zZSB9KSxcbiAgICApO1xuICB9O1xufVxuIl0sIm5hbWVzIjpbInJlc3BvbnNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/router.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/schema.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/schema.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SchemaDefinition: () => (/* binding */ SchemaDefinition),\n/* harmony export */   TableDefinition: () => (/* binding */ TableDefinition),\n/* harmony export */   defineSchema: () => (/* binding */ defineSchema),\n/* harmony export */   defineTable: () => (/* binding */ defineTable)\n/* harmony export */ });\n/* harmony import */ var _values_validator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../values/validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nclass TableDefinition {\n    /**\n   * @internal\n   */ constructor(documentType){\n        __publicField(this, \"indexes\");\n        __publicField(this, \"stagedDbIndexes\");\n        __publicField(this, \"searchIndexes\");\n        __publicField(this, \"stagedSearchIndexes\");\n        __publicField(this, \"vectorIndexes\");\n        __publicField(this, \"stagedVectorIndexes\");\n        // The type of documents stored in this table.\n        __publicField(this, \"validator\");\n        this.indexes = [];\n        this.stagedDbIndexes = [];\n        this.searchIndexes = [];\n        this.stagedSearchIndexes = [];\n        this.vectorIndexes = [];\n        this.stagedVectorIndexes = [];\n        this.validator = documentType;\n    }\n    /**\n   * This API is experimental: it may change or disappear.\n   *\n   * Returns indexes defined on this table.\n   * Intended for the advanced use cases of dynamically deciding which index to use for a query.\n   * If you think you need this, please chime in on ths issue in the Convex JS GitHub repo.\n   * https://github.com/get-convex/convex-js/issues/49\n   */ \" indexes\"() {\n        return this.indexes;\n    }\n    index(name, indexConfig) {\n        if (Array.isArray(indexConfig)) {\n            this.indexes.push({\n                indexDescriptor: name,\n                fields: indexConfig\n            });\n        } else if (indexConfig.staged) {\n            this.stagedDbIndexes.push({\n                indexDescriptor: name,\n                fields: indexConfig.fields\n            });\n        } else {\n            this.indexes.push({\n                indexDescriptor: name,\n                fields: indexConfig.fields\n            });\n        }\n        return this;\n    }\n    searchIndex(name, indexConfig) {\n        if (indexConfig.staged) {\n            this.stagedSearchIndexes.push({\n                indexDescriptor: name,\n                searchField: indexConfig.searchField,\n                filterFields: indexConfig.filterFields || []\n            });\n        } else {\n            this.searchIndexes.push({\n                indexDescriptor: name,\n                searchField: indexConfig.searchField,\n                filterFields: indexConfig.filterFields || []\n            });\n        }\n        return this;\n    }\n    vectorIndex(name, indexConfig) {\n        if (indexConfig.staged) {\n            this.stagedVectorIndexes.push({\n                indexDescriptor: name,\n                vectorField: indexConfig.vectorField,\n                dimensions: indexConfig.dimensions,\n                filterFields: indexConfig.filterFields || []\n            });\n        } else {\n            this.vectorIndexes.push({\n                indexDescriptor: name,\n                vectorField: indexConfig.vectorField,\n                dimensions: indexConfig.dimensions,\n                filterFields: indexConfig.filterFields || []\n            });\n        }\n        return this;\n    }\n    /**\n   * Work around for https://github.com/microsoft/TypeScript/issues/57035\n   */ self() {\n        return this;\n    }\n    /**\n   * Export the contents of this definition.\n   *\n   * This is called internally by the Convex framework.\n   * @internal\n   */ export() {\n        const documentType = this.validator.json;\n        if (typeof documentType !== \"object\") {\n            throw new Error(\"Invalid validator: please make sure that the parameter of `defineTable` is valid (see https://docs.convex.dev/database/schemas)\");\n        }\n        return {\n            indexes: this.indexes,\n            stagedDbIndexes: this.stagedDbIndexes,\n            searchIndexes: this.searchIndexes,\n            stagedSearchIndexes: this.stagedSearchIndexes,\n            vectorIndexes: this.vectorIndexes,\n            stagedVectorIndexes: this.stagedVectorIndexes,\n            documentType\n        };\n    }\n}\nfunction defineTable(documentSchema) {\n    if ((0,_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.isValidator)(documentSchema)) {\n        return new TableDefinition(documentSchema);\n    } else {\n        return new TableDefinition(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object(documentSchema));\n    }\n}\nclass SchemaDefinition {\n    /**\n   * @internal\n   */ constructor(tables, options){\n        __publicField(this, \"tables\");\n        __publicField(this, \"strictTableNameTypes\");\n        __publicField(this, \"schemaValidation\");\n        this.tables = tables;\n        this.schemaValidation = options?.schemaValidation === void 0 ? true : options.schemaValidation;\n    }\n    /**\n   * Export the contents of this definition.\n   *\n   * This is called internally by the Convex framework.\n   * @internal\n   */ export() {\n        return JSON.stringify({\n            tables: Object.entries(this.tables).map(([tableName, definition])=>{\n                const { indexes, stagedDbIndexes, searchIndexes, stagedSearchIndexes, vectorIndexes, stagedVectorIndexes, documentType } = definition.export();\n                return {\n                    tableName,\n                    indexes,\n                    stagedDbIndexes,\n                    searchIndexes,\n                    stagedSearchIndexes,\n                    vectorIndexes,\n                    stagedVectorIndexes,\n                    documentType\n                };\n            }),\n            schemaValidation: this.schemaValidation\n        });\n    }\n}\nfunction defineSchema(schema, options) {\n    return new SchemaDefinition(schema, options);\n}\nconst _systemSchema = defineSchema({\n    _scheduled_functions: defineTable({\n        name: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(),\n        args: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.array(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.any()),\n        scheduledTime: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.float64(),\n        completedTime: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.float64()),\n        state: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.union(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n            kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"pending\")\n        }), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n            kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"inProgress\")\n        }), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n            kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"success\")\n        }), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n            kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"failed\"),\n            error: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string()\n        }), _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.object({\n            kind: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.literal(\"canceled\")\n        }))\n    }),\n    _storage: defineTable({\n        sha256: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string(),\n        size: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.float64(),\n        contentType: _values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.optional(_values_validator_js__WEBPACK_IMPORTED_MODULE_0__.v.string())\n    })\n}); //# sourceMappingURL=schema.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9zY2hlbWEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpRE87QUF3SUEsTUFBTSxnQkFLWDtJQUFBOztHQUFBLEdBYUEsWUFBWSxhQUE0QjtRQVp4QyxvQkFBUTtRQUNSLG9CQUFRO1FBQ1Isb0JBQVE7UUFDUixvQkFBUTtRQUNSLG9CQUFRO1FBQ1Isb0JBQVE7UUFFUjtRQUFBO1FBTUUsS0FBSyxVQUFVLENBQUM7UUFDaEIsS0FBSyxrQkFBa0IsQ0FBQztRQUN4QixLQUFLLGdCQUFnQixDQUFDO1FBQ3RCLEtBQUssc0JBQXNCLENBQUM7UUFDNUIsS0FBSyxnQkFBZ0IsQ0FBQztRQUN0QixLQUFLLHNCQUFzQixDQUFDO1FBQzVCLEtBQUssWUFBWTtJQUNuQjtJQUFBOzs7Ozs7O0dBQUEsR0FVQSxhQUE4RDtRQUM1RCxPQUFPLEtBQUs7SUFDZDtJQTRGQSxNQUtFLE1BQ0EsYUFHQTtRQUNBLElBQUksTUFBTSxRQUFRLFdBQVcsR0FBRztZQUU5QixLQUFLLFFBQVEsS0FBSztnQkFDaEIsaUJBQWlCO2dCQUNqQixRQUFRO1lBQ1YsQ0FBQztRQUNILFdBQVcsWUFBWSxRQUFRO1lBRTdCLEtBQUssZ0JBQWdCLEtBQUs7Z0JBQ3hCLGlCQUFpQjtnQkFDakIsUUFBUSxZQUFZO1lBQ3RCLENBQUM7UUFDSCxPQUFPO1lBRUwsS0FBSyxRQUFRLEtBQUs7Z0JBQ2hCLGlCQUFpQjtnQkFDakIsUUFBUSxZQUFZO1lBQ3RCLENBQUM7UUFDSDtRQUNBLE9BQU87SUFDVDtJQW1FQSxZQUtFLE1BQ0EsYUFHQTtRQUNBLElBQUksWUFBWSxRQUFRO1lBQ3RCLEtBQUssb0JBQW9CLEtBQUs7Z0JBQzVCLGlCQUFpQjtnQkFDakIsYUFBYSxZQUFZO2dCQUN6QixjQUFjLFlBQVksZ0JBQWdCLENBQUM7WUFDN0MsQ0FBQztRQUNILE9BQU87WUFDTCxLQUFLLGNBQWMsS0FBSztnQkFDdEIsaUJBQWlC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QyxPQUFPO1lBQUUsTUFBTSxtREFBQyxDQUFDLFFBQVEsVUFBVTtRQUFFLENBQUM7SUFFNUMsQ0FBQztJQUNELFVBQVUsWUFBWTtRQUNwQixRQUFRLG1EQUFDLENBQUMsT0FBTztRQUNqQixNQUFNLG1EQUFDLENBQUMsUUFBUTtRQUNoQixhQUFhLG1EQUFDLENBQUMsU0FBUyxtREFBQyxDQUFDLE9BQU8sQ0FBQztJQUNwQyxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy9zZXJ2ZXIvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVXRpbGl0aWVzIGZvciBkZWZpbmluZyB0aGUgc2NoZW1hIG9mIHlvdXIgQ29udmV4IHByb2plY3QuXG4gKlxuICogIyMgVXNhZ2VcbiAqXG4gKiBTY2hlbWFzIHNob3VsZCBiZSBwbGFjZWQgaW4gYSBgc2NoZW1hLnRzYCBmaWxlIGluIHlvdXIgYGNvbnZleC9gIGRpcmVjdG9yeS5cbiAqXG4gKiBTY2hlbWEgZGVmaW5pdGlvbnMgc2hvdWxkIGJlIGJ1aWx0IHVzaW5nIHtAbGluayBkZWZpbmVTY2hlbWF9LFxuICoge0BsaW5rIGRlZmluZVRhYmxlfSwgYW5kIHtAbGluayB2YWx1ZXMudn0uIE1ha2Ugc3VyZSB0byBleHBvcnQgdGhlIHNjaGVtYSBhcyB0aGVcbiAqIGRlZmF1bHQgZXhwb3J0LlxuICpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBkZWZpbmVTY2hlbWEsIGRlZmluZVRhYmxlIH0gZnJvbSBcImNvbnZleC9zZXJ2ZXJcIjtcbiAqIGltcG9ydCB7IHYgfSBmcm9tIFwiY29udmV4L3ZhbHVlc1wiO1xuICpcbiAqICBleHBvcnQgZGVmYXVsdCBkZWZpbmVTY2hlbWEoe1xuICogICAgbWVzc2FnZXM6IGRlZmluZVRhYmxlKHtcbiAqICAgICAgYm9keTogdi5zdHJpbmcoKSxcbiAqICAgICAgdXNlcjogdi5pZChcInVzZXJzXCIpLFxuICogICAgfSksXG4gKiAgICB1c2VyczogZGVmaW5lVGFibGUoe1xuICogICAgICBuYW1lOiB2LnN0cmluZygpLFxuICogICAgfSksXG4gKiAgfSk7XG4gKiBgYGBcbiAqXG4gKiBUbyBsZWFybiBtb3JlIGFib3V0IHNjaGVtYXMsIHNlZSBbRGVmaW5pbmcgYSBTY2hlbWFdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3NjaGVtYXMpLlxuICogQG1vZHVsZVxuICovXG5pbXBvcnQge1xuICBBbnlEYXRhTW9kZWwsXG4gIEdlbmVyaWNEYXRhTW9kZWwsXG4gIEdlbmVyaWNUYWJsZUluZGV4ZXMsXG4gIEdlbmVyaWNUYWJsZVNlYXJjaEluZGV4ZXMsXG4gIEdlbmVyaWNUYWJsZVZlY3RvckluZGV4ZXMsXG4gIFRhYmxlTmFtZXNJbkRhdGFNb2RlbCxcbn0gZnJvbSBcIi4uL3NlcnZlci9kYXRhX21vZGVsLmpzXCI7XG5pbXBvcnQge1xuICBJZEZpZWxkLFxuICBJbmRleFRpZWJyZWFrZXJGaWVsZCxcbiAgU3lzdGVtRmllbGRzLFxuICBTeXN0ZW1JbmRleGVzLFxufSBmcm9tIFwiLi4vc2VydmVyL3N5c3RlbV9maWVsZHMuanNcIjtcbmltcG9ydCB7IEV4cGFuZCB9IGZyb20gXCIuLi90eXBlX3V0aWxzLmpzXCI7XG5pbXBvcnQge1xuICBHZW5lcmljVmFsaWRhdG9yLFxuICBPYmplY3RUeXBlLFxuICBpc1ZhbGlkYXRvcixcbiAgdixcbn0gZnJvbSBcIi4uL3ZhbHVlcy92YWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IFZPYmplY3QsIFZhbGlkYXRvciB9IGZyb20gXCIuLi92YWx1ZXMvdmFsaWRhdG9ycy5qc1wiO1xuXG4vKipcbiAqIEV4dHJhY3QgYWxsIG9mIHRoZSBpbmRleCBmaWVsZCBwYXRocyB3aXRoaW4gYSB7QGxpbmsgVmFsaWRhdG9yfS5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgd2l0aGluIHtAbGluayBkZWZpbmVUYWJsZX0uXG4gKiBAcHVibGljXG4gKi9cbnR5cGUgRXh0cmFjdEZpZWxkUGF0aHM8VCBleHRlbmRzIFZhbGlkYXRvcjxhbnksIGFueSwgYW55Pj4gPVxuICAvLyBBZGQgaW4gdGhlIHN5c3RlbSBmaWVsZHMgYXZhaWxhYmxlIGluIGluZGV4IGRlZmluaXRpb25zLlxuICAvLyBUaGlzIHNob3VsZCBiZSBldmVyeXRoaW5nIGV4Y2VwdCBmb3IgYF9pZGAgYmVjYXVzZSB0aGF0cyBhZGRlZCB0byBpbmRleGVzXG4gIC8vIGF1dG9tYXRpY2FsbHkuXG4gIFRbXCJmaWVsZFBhdGhzXCJdIHwga2V5b2YgU3lzdGVtRmllbGRzO1xuXG4vKipcbiAqIEV4dHJhY3QgdGhlIHtAbGluayBHZW5lcmljRG9jdW1lbnR9IHdpdGhpbiBhIHtAbGluayBWYWxpZGF0b3J9IGFuZFxuICogYWRkIG9uIHRoZSBzeXN0ZW0gZmllbGRzLlxuICpcbiAqIFRoaXMgaXMgdXNlZCB3aXRoaW4ge0BsaW5rIGRlZmluZVRhYmxlfS5cbiAqIEBwdWJsaWNcbiAqL1xudHlwZSBFeHRyYWN0RG9jdW1lbnQ8VCBleHRlbmRzIFZhbGlkYXRvcjxhbnksIGFueSwgYW55Pj4gPVxuICAvLyBBZGQgdGhlIHN5c3RlbSBmaWVsZHMgdG8gYFZhbHVlYCAoZXhjZXB0IGBfaWRgIGJlY2F1c2UgaXQgZGVwZW5kcyBvblxuICAvL3RoZSB0YWJsZSBuYW1lKSBhbmQgdHJpY2sgVHlwZVNjcmlwdCBpbnRvIGV4cGFuZGluZyB0aGVtLlxuICBFeHBhbmQ8U3lzdGVtRmllbGRzICYgVFtcInR5cGVcIl0+O1xuXG5leHBvcnQgaW50ZXJmYWNlIERiSW5kZXhDb25maWc8XG4gIEZpcnN0RmllbGRQYXRoIGV4dGVuZHMgc3RyaW5nLFxuICBSZXN0RmllbGRQYXRocyBleHRlbmRzIHN0cmluZ1tdLFxuPiB7XG4gIC8qKlxuICAgKiBUaGUgZmllbGRzIHRvIGluZGV4LCBpbiBvcmRlci4gTXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBmaWVsZC5cbiAgICovXG4gIGZpZWxkczogW0ZpcnN0RmllbGRQYXRoLCAuLi5SZXN0RmllbGRQYXRoc107XG59XG5cbi8qKlxuICogVGhlIGNvbmZpZ3VyYXRpb24gZm9yIGEgZnVsbCB0ZXh0IHNlYXJjaCBpbmRleC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoSW5kZXhDb25maWc8XG4gIFNlYXJjaEZpZWxkIGV4dGVuZHMgc3RyaW5nLFxuICBGaWx0ZXJGaWVsZHMgZXh0ZW5kcyBzdHJpbmcsXG4+IHtcbiAgLyoqXG4gICAqIFRoZSBmaWVsZCB0byBpbmRleCBmb3IgZnVsbCB0ZXh0IHNlYXJjaC5cbiAgICpcbiAgICogVGhpcyBtdXN0IGJlIGEgZmllbGQgb2YgdHlwZSBgc3RyaW5nYC5cbiAgICovXG4gIHNlYXJjaEZpZWxkOiBTZWFyY2hGaWVsZDtcblxuICAvKipcbiAgICogQWRkaXRpb25hbCBmaWVsZHMgdG8gaW5kZXggZm9yIGZhc3QgZmlsdGVyaW5nIHdoZW4gcnVubmluZyBzZWFyY2ggcXVlcmllcy5cbiAgICovXG4gIGZpbHRlckZpZWxkcz86IEZpbHRlckZpZWxkc1tdO1xufVxuXG4vKipcbiAqIFRoZSBjb25maWd1cmF0aW9uIGZvciBhIHZlY3RvciBpbmRleC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmVjdG9ySW5kZXhDb25maWc8XG4gIFZlY3RvckZpZWxkIGV4dGVuZHMgc3RyaW5nLFxuICBGaWx0ZXJGaWVsZHMgZXh0ZW5kcyBzdHJpbmcsXG4+IHtcbiAgLyoqXG4gICAqIFRoZSBmaWVsZCB0byBpbmRleCBmb3IgdmVjdG9yIHNlYXJjaC5cbiAgICpcbiAgICogVGhpcyBtdXN0IGJlIGEgZmllbGQgb2YgdHlwZSBgdi5hcnJheSh2LmZsb2F0NjQoKSlgIChvciBhIHVuaW9uKVxuICAgKi9cbiAgdmVjdG9yRmllbGQ6IFZlY3RvckZpZWxkO1xuICAvKipcbiAgICogVGhlIGxlbmd0aCBvZiB0aGUgdmVjdG9ycyBpbmRleGVkLiBUaGlzIG11c3QgYmUgYmV0d2VlbiAyIGFuZCAyMDQ4IGluY2x1c2l2ZS5cbiAgICovXG4gIGRpbWVuc2lvbnM6IG51bWJlcjtcbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgZmllbGRzIHRvIGluZGV4IGZvciBmYXN0IGZpbHRlcmluZyB3aGVuIHJ1bm5pbmcgdmVjdG9yIHNlYXJjaGVzLlxuICAgKi9cbiAgZmlsdGVyRmllbGRzPzogRmlsdGVyRmllbGRzW107XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB0eXBlIFZlY3RvckluZGV4ID0ge1xuICBpbmRleERlc2NyaXB0b3I6IHN0cmluZztcbiAgdmVjdG9yRmllbGQ6IHN0cmluZztcbiAgZGltZW5zaW9uczogbnVtYmVyO1xuICBmaWx0ZXJGaWVsZHM6IHN0cmluZ1tdO1xufTtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHR5cGUgSW5kZXggPSB7XG4gIGluZGV4RGVzY3JpcHRvcjogc3RyaW5nO1xuICBmaWVsZHM6IHN0cmluZ1tdO1xufTtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IHR5cGUgU2VhcmNoSW5kZXggPSB7XG4gIGluZGV4RGVzY3JpcHRvcjogc3RyaW5nO1xuICBzZWFyY2hGaWVsZDogc3RyaW5nO1xuICBmaWx0ZXJGaWVsZHM6IHN0cmluZ1tdO1xufTtcblxuLyoqXG4gKiBPcHRpb25zIGZvciBkZWZpbmluZyBhbiBpbmRleC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5kZXhPcHRpb25zIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGluZGV4IHNob3VsZCBiZSBzdGFnZWQuXG4gICAqXG4gICAqIEZvciBsYXJnZSB0YWJsZXMsIGluZGV4IGJhY2tmaWxsIGNhbiBiZSBzbG93LiBTdGFnaW5nIGFuIGluZGV4IGFsbG93cyB5b3VcbiAgICogdG8gcHVzaCB0aGUgc2NoZW1hIGFuZCBlbmFibGUgdGhlIGluZGV4IGxhdGVyLlxuICAgKlxuICAgKiBJZiBgc3RhZ2VkYCBpcyBgdHJ1ZWAsIHRoZSBpbmRleCB3aWxsIGJlIHN0YWdlZCBhbmQgd2lsbCBub3QgYmUgZW5hYmxlZFxuICAgKiB1bnRpbCB0aGUgc3RhZ2VkIGZsYWcgaXMgcmVtb3ZlZC4gU3RhZ2VkIGluZGV4ZXMgZG8gbm90IGJsb2NrIHB1c2hcbiAgICogY29tcGxldGlvbi4gU3RhZ2VkIGluZGV4ZXMgY2Fubm90IGJlIHVzZWQgaW4gcXVlcmllcy5cbiAgICovXG4gIHN0YWdlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIGRlZmluaXRpb24gb2YgYSB0YWJsZSB3aXRoaW4gYSBzY2hlbWEuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgcHJvZHVjZWQgYnkgdXNpbmcge0BsaW5rIGRlZmluZVRhYmxlfS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFRhYmxlRGVmaW5pdGlvbjxcbiAgRG9jdW1lbnRUeXBlIGV4dGVuZHMgVmFsaWRhdG9yPGFueSwgYW55LCBhbnk+ID0gVmFsaWRhdG9yPGFueSwgYW55LCBhbnk+LFxuICBJbmRleGVzIGV4dGVuZHMgR2VuZXJpY1RhYmxlSW5kZXhlcyA9IHt9LFxuICBTZWFyY2hJbmRleGVzIGV4dGVuZHMgR2VuZXJpY1RhYmxlU2VhcmNoSW5kZXhlcyA9IHt9LFxuICBWZWN0b3JJbmRleGVzIGV4dGVuZHMgR2VuZXJpY1RhYmxlVmVjdG9ySW5kZXhlcyA9IHt9LFxuPiB7XG4gIHByaXZhdGUgaW5kZXhlczogSW5kZXhbXTtcbiAgcHJpdmF0ZSBzdGFnZWREYkluZGV4ZXM6IEluZGV4W107XG4gIHByaXZhdGUgc2VhcmNoSW5kZXhlczogU2VhcmNoSW5kZXhbXTtcbiAgcHJpdmF0ZSBzdGFnZWRTZWFyY2hJbmRleGVzOiBTZWFyY2hJbmRleFtdO1xuICBwcml2YXRlIHZlY3RvckluZGV4ZXM6IFZlY3RvckluZGV4W107XG4gIHByaXZhdGUgc3RhZ2VkVmVjdG9ySW5kZXhlczogVmVjdG9ySW5kZXhbXTtcbiAgLy8gVGhlIHR5cGUgb2YgZG9jdW1lbnRzIHN0b3JlZCBpbiB0aGlzIHRhYmxlLlxuICB2YWxpZGF0b3I6IERvY3VtZW50VHlwZTtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2N1bWVudFR5cGU6IERvY3VtZW50VHlwZSkge1xuICAgIHRoaXMuaW5kZXhlcyA9IFtdO1xuICAgIHRoaXMuc3RhZ2VkRGJJbmRleGVzID0gW107XG4gICAgdGhpcy5zZWFyY2hJbmRleGVzID0gW107XG4gICAgdGhpcy5zdGFnZWRTZWFyY2hJbmRleGVzID0gW107XG4gICAgdGhpcy52ZWN0b3JJbmRleGVzID0gW107XG4gICAgdGhpcy5zdGFnZWRWZWN0b3JJbmRleGVzID0gW107XG4gICAgdGhpcy52YWxpZGF0b3IgPSBkb2N1bWVudFR5cGU7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBBUEkgaXMgZXhwZXJpbWVudGFsOiBpdCBtYXkgY2hhbmdlIG9yIGRpc2FwcGVhci5cbiAgICpcbiAgICogUmV0dXJucyBpbmRleGVzIGRlZmluZWQgb24gdGhpcyB0YWJsZS5cbiAgICogSW50ZW5kZWQgZm9yIHRoZSBhZHZhbmNlZCB1c2UgY2FzZXMgb2YgZHluYW1pY2FsbHkgZGVjaWRpbmcgd2hpY2ggaW5kZXggdG8gdXNlIGZvciBhIHF1ZXJ5LlxuICAgKiBJZiB5b3UgdGhpbmsgeW91IG5lZWQgdGhpcywgcGxlYXNlIGNoaW1lIGluIG9uIHRocyBpc3N1ZSBpbiB0aGUgQ29udmV4IEpTIEdpdEh1YiByZXBvLlxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vZ2V0LWNvbnZleC9jb252ZXgtanMvaXNzdWVzLzQ5XG4gICAqL1xuICBcIiBpbmRleGVzXCIoKTogeyBpbmRleERlc2NyaXB0b3I6IHN0cmluZzsgZmllbGRzOiBzdHJpbmdbXSB9W10ge1xuICAgIHJldHVybiB0aGlzLmluZGV4ZXM7XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lIGFuIGluZGV4IG9uIHRoaXMgdGFibGUuXG4gICAqXG4gICAqIFRvIGxlYXJuIGFib3V0IGluZGV4ZXMsIHNlZSBbRGVmaW5pbmcgSW5kZXhlc10oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvdXNpbmcvaW5kZXhlcykuXG4gICAqXG4gICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGluZGV4LlxuICAgKiBAcGFyYW0gaW5kZXhDb25maWcgLSBUaGUgaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRhYmxlRGVmaW5pdGlvbn0gd2l0aCB0aGlzIGluZGV4IGluY2x1ZGVkLlxuICAgKi9cbiAgaW5kZXg8XG4gICAgSW5kZXhOYW1lIGV4dGVuZHMgc3RyaW5nLFxuICAgIEZpcnN0RmllbGRQYXRoIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPixcbiAgICBSZXN0RmllbGRQYXRocyBleHRlbmRzIEV4dHJhY3RGaWVsZFBhdGhzPERvY3VtZW50VHlwZT5bXSxcbiAgPihcbiAgICBuYW1lOiBJbmRleE5hbWUsXG4gICAgaW5kZXhDb25maWc6IEV4cGFuZDxcbiAgICAgIERiSW5kZXhDb25maWc8Rmlyc3RGaWVsZFBhdGgsIFJlc3RGaWVsZFBhdGhzPiAmXG4gICAgICAgIEluZGV4T3B0aW9ucyAmIHsgc3RhZ2VkPzogZmFsc2UgfVxuICAgID4sXG4gICk6IFRhYmxlRGVmaW5pdGlvbjxcbiAgICBEb2N1bWVudFR5cGUsXG4gICAgRXhwYW5kPFxuICAgICAgSW5kZXhlcyAmXG4gICAgICAgIFJlY29yZDxcbiAgICAgICAgICBJbmRleE5hbWUsXG4gICAgICAgICAgW0ZpcnN0RmllbGRQYXRoLCAuLi5SZXN0RmllbGRQYXRocywgSW5kZXhUaWVicmVha2VyRmllbGRdXG4gICAgICAgID5cbiAgICA+LFxuICAgIFNlYXJjaEluZGV4ZXMsXG4gICAgVmVjdG9ySW5kZXhlc1xuICA+O1xuXG4gIC8qKlxuICAgKiBEZWZpbmUgYW4gaW5kZXggb24gdGhpcyB0YWJsZS5cbiAgICpcbiAgICogVG8gbGVhcm4gYWJvdXQgaW5kZXhlcywgc2VlIFtEZWZpbmluZyBJbmRleGVzXShodHRwczovL2RvY3MuY29udmV4LmRldi91c2luZy9pbmRleGVzKS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSBmaWVsZHMgLSBUaGUgZmllbGRzIHRvIGluZGV4LCBpbiBvcmRlci4gTXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZVxuICAgKiBmaWVsZC5cbiAgICogQHJldHVybnMgQSB7QGxpbmsgVGFibGVEZWZpbml0aW9ufSB3aXRoIHRoaXMgaW5kZXggaW5jbHVkZWQuXG4gICAqL1xuICBpbmRleDxcbiAgICBJbmRleE5hbWUgZXh0ZW5kcyBzdHJpbmcsXG4gICAgRmlyc3RGaWVsZFBhdGggZXh0ZW5kcyBFeHRyYWN0RmllbGRQYXRoczxEb2N1bWVudFR5cGU+LFxuICAgIFJlc3RGaWVsZFBhdGhzIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPltdLFxuICA+KFxuICAgIG5hbWU6IEluZGV4TmFtZSxcbiAgICBmaWVsZHM6IFtGaXJzdEZpZWxkUGF0aCwgLi4uUmVzdEZpZWxkUGF0aHNdLFxuICApOiBUYWJsZURlZmluaXRpb248XG4gICAgRG9jdW1lbnRUeXBlLFxuICAgIEV4cGFuZDxcbiAgICAgIEluZGV4ZXMgJlxuICAgICAgICBSZWNvcmQ8XG4gICAgICAgICAgSW5kZXhOYW1lLFxuICAgICAgICAgIFtGaXJzdEZpZWxkUGF0aCwgLi4uUmVzdEZpZWxkUGF0aHMsIEluZGV4VGllYnJlYWtlckZpZWxkXVxuICAgICAgICA+XG4gICAgPixcbiAgICBTZWFyY2hJbmRleGVzLFxuICAgIFZlY3RvckluZGV4ZXNcbiAgPjtcblxuICAvKipcbiAgICogRGVmaW5lIGEgc3RhZ2VkIGluZGV4IG9uIHRoaXMgdGFibGUuXG4gICAqXG4gICAqIEZvciBsYXJnZSB0YWJsZXMsIGluZGV4IGJhY2tmaWxsIGNhbiBiZSBzbG93LiBTdGFnaW5nIGFuIGluZGV4IGFsbG93cyB5b3VcbiAgICogdG8gcHVzaCB0aGUgc2NoZW1hIGFuZCBlbmFibGUgdGhlIGluZGV4IGxhdGVyLlxuICAgKlxuICAgKiBJZiBgc3RhZ2VkYCBpcyBgdHJ1ZWAsIHRoZSBpbmRleCB3aWxsIGJlIHN0YWdlZCBhbmQgd2lsbCBub3QgYmUgZW5hYmxlZFxuICAgKiB1bnRpbCB0aGUgc3RhZ2VkIGZsYWcgaXMgcmVtb3ZlZC4gU3RhZ2VkIGluZGV4ZXMgZG8gbm90IGJsb2NrIHB1c2hcbiAgICogY29tcGxldGlvbi4gU3RhZ2VkIGluZGV4ZXMgY2Fubm90IGJlIHVzZWQgaW4gcXVlcmllcy5cbiAgICpcbiAgICogVG8gbGVhcm4gYWJvdXQgaW5kZXhlcywgc2VlIFtEZWZpbmluZyBJbmRleGVzXShodHRwczovL2RvY3MuY29udmV4LmRldi91c2luZy9pbmRleGVzKS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleENvbmZpZyAtIFRoZSBpbmRleCBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICogQHJldHVybnMgQSB7QGxpbmsgVGFibGVEZWZpbml0aW9ufSB3aXRoIHRoaXMgaW5kZXggaW5jbHVkZWQuXG4gICAqL1xuICBpbmRleDxcbiAgICBJbmRleE5hbWUgZXh0ZW5kcyBzdHJpbmcsXG4gICAgRmlyc3RGaWVsZFBhdGggZXh0ZW5kcyBFeHRyYWN0RmllbGRQYXRoczxEb2N1bWVudFR5cGU+LFxuICAgIFJlc3RGaWVsZFBhdGhzIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPltdLFxuICA+KFxuICAgIG5hbWU6IEluZGV4TmFtZSxcbiAgICBpbmRleENvbmZpZzogRXhwYW5kPFxuICAgICAgRGJJbmRleENvbmZpZzxGaXJzdEZpZWxkUGF0aCwgUmVzdEZpZWxkUGF0aHM+ICZcbiAgICAgICAgSW5kZXhPcHRpb25zICYgeyBzdGFnZWQ6IHRydWUgfVxuICAgID4sXG4gICk6IFRhYmxlRGVmaW5pdGlvbjxEb2N1bWVudFR5cGUsIEluZGV4ZXMsIFNlYXJjaEluZGV4ZXMsIFZlY3RvckluZGV4ZXM+O1xuXG4gIGluZGV4PFxuICAgIEluZGV4TmFtZSBleHRlbmRzIHN0cmluZyxcbiAgICBGaXJzdEZpZWxkUGF0aCBleHRlbmRzIEV4dHJhY3RGaWVsZFBhdGhzPERvY3VtZW50VHlwZT4sXG4gICAgUmVzdEZpZWxkUGF0aHMgZXh0ZW5kcyBFeHRyYWN0RmllbGRQYXRoczxEb2N1bWVudFR5cGU+W10sXG4gID4oXG4gICAgbmFtZTogSW5kZXhOYW1lLFxuICAgIGluZGV4Q29uZmlnOlxuICAgICAgfCBFeHBhbmQ8RGJJbmRleENvbmZpZzxGaXJzdEZpZWxkUGF0aCwgUmVzdEZpZWxkUGF0aHM+ICYgSW5kZXhPcHRpb25zPlxuICAgICAgfCBbRmlyc3RGaWVsZFBhdGgsIC4uLlJlc3RGaWVsZFBhdGhzXSxcbiAgKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoaW5kZXhDb25maWcpKSB7XG4gICAgICAvLyBpbmRleENvbmZpZyBpcyBbRmlyc3RGaWVsZFBhdGgsIC4uLlJlc3RGaWVsZFBhdGhzXVxuICAgICAgdGhpcy5pbmRleGVzLnB1c2goe1xuICAgICAgICBpbmRleERlc2NyaXB0b3I6IG5hbWUsXG4gICAgICAgIGZpZWxkczogaW5kZXhDb25maWcsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluZGV4Q29uZmlnLnN0YWdlZCkge1xuICAgICAgLy8gaW5kZXhDb25maWcgaXMgb2JqZWN0IHdpdGggZmllbGRzIGFuZCBzdGFnZWQ6IHRydWVcbiAgICAgIHRoaXMuc3RhZ2VkRGJJbmRleGVzLnB1c2goe1xuICAgICAgICBpbmRleERlc2NyaXB0b3I6IG5hbWUsXG4gICAgICAgIGZpZWxkczogaW5kZXhDb25maWcuZmllbGRzLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluZGV4Q29uZmlnIGlzIG9iamVjdCB3aXRoIGZpZWxkcyAoYW5kIG1heWJlIHN0YWdlZDogZmFsc2UvdW5kZWZpbmVkKVxuICAgICAgdGhpcy5pbmRleGVzLnB1c2goe1xuICAgICAgICBpbmRleERlc2NyaXB0b3I6IG5hbWUsXG4gICAgICAgIGZpZWxkczogaW5kZXhDb25maWcuZmllbGRzLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIHNlYXJjaCBpbmRleCBvbiB0aGlzIHRhYmxlLlxuICAgKlxuICAgKiBUbyBsZWFybiBhYm91dCBzZWFyY2ggaW5kZXhlcywgc2VlIFtTZWFyY2hdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3RleHQtc2VhcmNoKS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleENvbmZpZyAtIFRoZSBzZWFyY2ggaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRhYmxlRGVmaW5pdGlvbn0gd2l0aCB0aGlzIHNlYXJjaCBpbmRleCBpbmNsdWRlZC5cbiAgICovXG4gIHNlYXJjaEluZGV4PFxuICAgIEluZGV4TmFtZSBleHRlbmRzIHN0cmluZyxcbiAgICBTZWFyY2hGaWVsZCBleHRlbmRzIEV4dHJhY3RGaWVsZFBhdGhzPERvY3VtZW50VHlwZT4sXG4gICAgRmlsdGVyRmllbGRzIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPiA9IG5ldmVyLFxuICA+KFxuICAgIG5hbWU6IEluZGV4TmFtZSxcbiAgICBpbmRleENvbmZpZzogRXhwYW5kPFxuICAgICAgU2VhcmNoSW5kZXhDb25maWc8U2VhcmNoRmllbGQsIEZpbHRlckZpZWxkcz4gJlxuICAgICAgICBJbmRleE9wdGlvbnMgJiB7IHN0YWdlZD86IGZhbHNlIH1cbiAgICA+LFxuICApOiBUYWJsZURlZmluaXRpb248XG4gICAgRG9jdW1lbnRUeXBlLFxuICAgIEluZGV4ZXMsXG4gICAgLy8gVXBkYXRlIGBTZWFyY2hJbmRleGVzYCB0byBpbmNsdWRlIHRoZSBuZXcgaW5kZXggYW5kIHVzZSBgRXhwYW5kYCB0byBtYWtlXG4gICAgLy8gdGhlIHR5cGVzIGxvb2sgcHJldHR5IGluIGVkaXRvcnMuXG4gICAgRXhwYW5kPFxuICAgICAgU2VhcmNoSW5kZXhlcyAmXG4gICAgICAgIFJlY29yZDxcbiAgICAgICAgICBJbmRleE5hbWUsXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2VhcmNoRmllbGQ6IFNlYXJjaEZpZWxkO1xuICAgICAgICAgICAgZmlsdGVyRmllbGRzOiBGaWx0ZXJGaWVsZHM7XG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgPixcbiAgICBWZWN0b3JJbmRleGVzXG4gID47XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIHN0YWdlZCBzZWFyY2ggaW5kZXggb24gdGhpcyB0YWJsZS5cbiAgICpcbiAgICogRm9yIGxhcmdlIHRhYmxlcywgaW5kZXggYmFja2ZpbGwgY2FuIGJlIHNsb3cuIFN0YWdpbmcgYW4gaW5kZXggYWxsb3dzIHlvdVxuICAgKiB0byBwdXNoIHRoZSBzY2hlbWEgYW5kIGVuYWJsZSB0aGUgaW5kZXggbGF0ZXIuXG4gICAqXG4gICAqIElmIGBzdGFnZWRgIGlzIGB0cnVlYCwgdGhlIGluZGV4IHdpbGwgYmUgc3RhZ2VkIGFuZCB3aWxsIG5vdCBiZSBlbmFibGVkXG4gICAqIHVudGlsIHRoZSBzdGFnZWQgZmxhZyBpcyByZW1vdmVkLiBTdGFnZWQgaW5kZXhlcyBkbyBub3QgYmxvY2sgcHVzaFxuICAgKiBjb21wbGV0aW9uLiBTdGFnZWQgaW5kZXhlcyBjYW5ub3QgYmUgdXNlZCBpbiBxdWVyaWVzLlxuICAgKlxuICAgKiBUbyBsZWFybiBhYm91dCBzZWFyY2ggaW5kZXhlcywgc2VlIFtTZWFyY2hdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3RleHQtc2VhcmNoKS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleENvbmZpZyAtIFRoZSBzZWFyY2ggaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRhYmxlRGVmaW5pdGlvbn0gd2l0aCB0aGlzIHNlYXJjaCBpbmRleCBpbmNsdWRlZC5cbiAgICovXG4gIHNlYXJjaEluZGV4PFxuICAgIEluZGV4TmFtZSBleHRlbmRzIHN0cmluZyxcbiAgICBTZWFyY2hGaWVsZCBleHRlbmRzIEV4dHJhY3RGaWVsZFBhdGhzPERvY3VtZW50VHlwZT4sXG4gICAgRmlsdGVyRmllbGRzIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPiA9IG5ldmVyLFxuICA+KFxuICAgIG5hbWU6IEluZGV4TmFtZSxcbiAgICBpbmRleENvbmZpZzogRXhwYW5kPFxuICAgICAgU2VhcmNoSW5kZXhDb25maWc8U2VhcmNoRmllbGQsIEZpbHRlckZpZWxkcz4gJlxuICAgICAgICBJbmRleE9wdGlvbnMgJiB7IHN0YWdlZDogdHJ1ZSB9XG4gICAgPixcbiAgKTogVGFibGVEZWZpbml0aW9uPERvY3VtZW50VHlwZSwgSW5kZXhlcywgU2VhcmNoSW5kZXhlcywgVmVjdG9ySW5kZXhlcz47XG5cbiAgc2VhcmNoSW5kZXg8XG4gICAgSW5kZXhOYW1lIGV4dGVuZHMgc3RyaW5nLFxuICAgIFNlYXJjaEZpZWxkIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPixcbiAgICBGaWx0ZXJGaWVsZHMgZXh0ZW5kcyBFeHRyYWN0RmllbGRQYXRoczxEb2N1bWVudFR5cGU+ID0gbmV2ZXIsXG4gID4oXG4gICAgbmFtZTogSW5kZXhOYW1lLFxuICAgIGluZGV4Q29uZmlnOiBFeHBhbmQ8XG4gICAgICBTZWFyY2hJbmRleENvbmZpZzxTZWFyY2hGaWVsZCwgRmlsdGVyRmllbGRzPiAmIEluZGV4T3B0aW9uc1xuICAgID4sXG4gICkge1xuICAgIGlmIChpbmRleENvbmZpZy5zdGFnZWQpIHtcbiAgICAgIHRoaXMuc3RhZ2VkU2VhcmNoSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICBzZWFyY2hGaWVsZDogaW5kZXhDb25maWcuc2VhcmNoRmllbGQsXG4gICAgICAgIGZpbHRlckZpZWxkczogaW5kZXhDb25maWcuZmlsdGVyRmllbGRzIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VhcmNoSW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICBzZWFyY2hGaWVsZDogaW5kZXhDb25maWcuc2VhcmNoRmllbGQsXG4gICAgICAgIGZpbHRlckZpZWxkczogaW5kZXhDb25maWcuZmlsdGVyRmllbGRzIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIHZlY3RvciBpbmRleCBvbiB0aGlzIHRhYmxlLlxuICAgKlxuICAgKiBUbyBsZWFybiBhYm91dCB2ZWN0b3IgaW5kZXhlcywgc2VlIFtWZWN0b3IgU2VhcmNoXShodHRwczovL2RvY3MuY29udmV4LmRldi92ZWN0b3Itc2VhcmNoKS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleENvbmZpZyAtIFRoZSB2ZWN0b3IgaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRhYmxlRGVmaW5pdGlvbn0gd2l0aCB0aGlzIHZlY3RvciBpbmRleCBpbmNsdWRlZC5cbiAgICovXG4gIHZlY3RvckluZGV4PFxuICAgIEluZGV4TmFtZSBleHRlbmRzIHN0cmluZyxcbiAgICBWZWN0b3JGaWVsZCBleHRlbmRzIEV4dHJhY3RGaWVsZFBhdGhzPERvY3VtZW50VHlwZT4sXG4gICAgRmlsdGVyRmllbGRzIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPiA9IG5ldmVyLFxuICA+KFxuICAgIG5hbWU6IEluZGV4TmFtZSxcbiAgICBpbmRleENvbmZpZzogRXhwYW5kPFxuICAgICAgVmVjdG9ySW5kZXhDb25maWc8VmVjdG9yRmllbGQsIEZpbHRlckZpZWxkcz4gJlxuICAgICAgICBJbmRleE9wdGlvbnMgJiB7IHN0YWdlZD86IGZhbHNlIH1cbiAgICA+LFxuICApOiBUYWJsZURlZmluaXRpb248XG4gICAgRG9jdW1lbnRUeXBlLFxuICAgIEluZGV4ZXMsXG4gICAgU2VhcmNoSW5kZXhlcyxcbiAgICBFeHBhbmQ8XG4gICAgICBWZWN0b3JJbmRleGVzICZcbiAgICAgICAgUmVjb3JkPFxuICAgICAgICAgIEluZGV4TmFtZSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2ZWN0b3JGaWVsZDogVmVjdG9yRmllbGQ7XG4gICAgICAgICAgICBkaW1lbnNpb25zOiBudW1iZXI7XG4gICAgICAgICAgICBmaWx0ZXJGaWVsZHM6IEZpbHRlckZpZWxkcztcbiAgICAgICAgICB9XG4gICAgICAgID5cbiAgICA+XG4gID47XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIHN0YWdlZCB2ZWN0b3IgaW5kZXggb24gdGhpcyB0YWJsZS5cbiAgICpcbiAgICogRm9yIGxhcmdlIHRhYmxlcywgaW5kZXggYmFja2ZpbGwgY2FuIGJlIHNsb3cuIFN0YWdpbmcgYW4gaW5kZXggYWxsb3dzIHlvdVxuICAgKiB0byBwdXNoIHRoZSBzY2hlbWEgYW5kIGVuYWJsZSB0aGUgaW5kZXggbGF0ZXIuXG4gICAqXG4gICAqIElmIGBzdGFnZWRgIGlzIGB0cnVlYCwgdGhlIGluZGV4IHdpbGwgYmUgc3RhZ2VkIGFuZCB3aWxsIG5vdCBiZSBlbmFibGVkXG4gICAqIHVudGlsIHRoZSBzdGFnZWQgZmxhZyBpcyByZW1vdmVkLiBTdGFnZWQgaW5kZXhlcyBkbyBub3QgYmxvY2sgcHVzaFxuICAgKiBjb21wbGV0aW9uLiBTdGFnZWQgaW5kZXhlcyBjYW5ub3QgYmUgdXNlZCBpbiBxdWVyaWVzLlxuICAgKlxuICAgKiBUbyBsZWFybiBhYm91dCB2ZWN0b3IgaW5kZXhlcywgc2VlIFtWZWN0b3IgU2VhcmNoXShodHRwczovL2RvY3MuY29udmV4LmRldi92ZWN0b3Itc2VhcmNoKS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleENvbmZpZyAtIFRoZSB2ZWN0b3IgaW5kZXggY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAqIEByZXR1cm5zIEEge0BsaW5rIFRhYmxlRGVmaW5pdGlvbn0gd2l0aCB0aGlzIHZlY3RvciBpbmRleCBpbmNsdWRlZC5cbiAgICovXG4gIHZlY3RvckluZGV4PFxuICAgIEluZGV4TmFtZSBleHRlbmRzIHN0cmluZyxcbiAgICBWZWN0b3JGaWVsZCBleHRlbmRzIEV4dHJhY3RGaWVsZFBhdGhzPERvY3VtZW50VHlwZT4sXG4gICAgRmlsdGVyRmllbGRzIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPiA9IG5ldmVyLFxuICA+KFxuICAgIG5hbWU6IEluZGV4TmFtZSxcbiAgICBpbmRleENvbmZpZzogRXhwYW5kPFxuICAgICAgVmVjdG9ySW5kZXhDb25maWc8VmVjdG9yRmllbGQsIEZpbHRlckZpZWxkcz4gJlxuICAgICAgICBJbmRleE9wdGlvbnMgJiB7IHN0YWdlZDogdHJ1ZSB9XG4gICAgPixcbiAgKTogVGFibGVEZWZpbml0aW9uPERvY3VtZW50VHlwZSwgSW5kZXhlcywgU2VhcmNoSW5kZXhlcywgVmVjdG9ySW5kZXhlcz47XG5cbiAgdmVjdG9ySW5kZXg8XG4gICAgSW5kZXhOYW1lIGV4dGVuZHMgc3RyaW5nLFxuICAgIFZlY3RvckZpZWxkIGV4dGVuZHMgRXh0cmFjdEZpZWxkUGF0aHM8RG9jdW1lbnRUeXBlPixcbiAgICBGaWx0ZXJGaWVsZHMgZXh0ZW5kcyBFeHRyYWN0RmllbGRQYXRoczxEb2N1bWVudFR5cGU+ID0gbmV2ZXIsXG4gID4oXG4gICAgbmFtZTogSW5kZXhOYW1lLFxuICAgIGluZGV4Q29uZmlnOiBFeHBhbmQ8XG4gICAgICBWZWN0b3JJbmRleENvbmZpZzxWZWN0b3JGaWVsZCwgRmlsdGVyRmllbGRzPiAmIEluZGV4T3B0aW9uc1xuICAgID4sXG4gICkge1xuICAgIGlmIChpbmRleENvbmZpZy5zdGFnZWQpIHtcbiAgICAgIHRoaXMuc3RhZ2VkVmVjdG9ySW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICB2ZWN0b3JGaWVsZDogaW5kZXhDb25maWcudmVjdG9yRmllbGQsXG4gICAgICAgIGRpbWVuc2lvbnM6IGluZGV4Q29uZmlnLmRpbWVuc2lvbnMsXG4gICAgICAgIGZpbHRlckZpZWxkczogaW5kZXhDb25maWcuZmlsdGVyRmllbGRzIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmVjdG9ySW5kZXhlcy5wdXNoKHtcbiAgICAgICAgaW5kZXhEZXNjcmlwdG9yOiBuYW1lLFxuICAgICAgICB2ZWN0b3JGaWVsZDogaW5kZXhDb25maWcudmVjdG9yRmllbGQsXG4gICAgICAgIGRpbWVuc2lvbnM6IGluZGV4Q29uZmlnLmRpbWVuc2lvbnMsXG4gICAgICAgIGZpbHRlckZpZWxkczogaW5kZXhDb25maWcuZmlsdGVyRmllbGRzIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFdvcmsgYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzU3MDM1XG4gICAqL1xuICBwcm90ZWN0ZWQgc2VsZigpOiBUYWJsZURlZmluaXRpb248XG4gICAgRG9jdW1lbnRUeXBlLFxuICAgIEluZGV4ZXMsXG4gICAgU2VhcmNoSW5kZXhlcyxcbiAgICBWZWN0b3JJbmRleGVzXG4gID4ge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBFeHBvcnQgdGhlIGNvbnRlbnRzIG9mIHRoaXMgZGVmaW5pdGlvbi5cbiAgICpcbiAgICogVGhpcyBpcyBjYWxsZWQgaW50ZXJuYWxseSBieSB0aGUgQ29udmV4IGZyYW1ld29yay5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBleHBvcnQoKSB7XG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gdGhpcy52YWxpZGF0b3IuanNvbjtcbiAgICBpZiAodHlwZW9mIGRvY3VtZW50VHlwZSAhPT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkludmFsaWQgdmFsaWRhdG9yOiBwbGVhc2UgbWFrZSBzdXJlIHRoYXQgdGhlIHBhcmFtZXRlciBvZiBgZGVmaW5lVGFibGVgIGlzIHZhbGlkIChzZWUgaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvZGF0YWJhc2Uvc2NoZW1hcylcIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGluZGV4ZXM6IHRoaXMuaW5kZXhlcyxcbiAgICAgIHN0YWdlZERiSW5kZXhlczogdGhpcy5zdGFnZWREYkluZGV4ZXMsXG4gICAgICBzZWFyY2hJbmRleGVzOiB0aGlzLnNlYXJjaEluZGV4ZXMsXG4gICAgICBzdGFnZWRTZWFyY2hJbmRleGVzOiB0aGlzLnN0YWdlZFNlYXJjaEluZGV4ZXMsXG4gICAgICB2ZWN0b3JJbmRleGVzOiB0aGlzLnZlY3RvckluZGV4ZXMsXG4gICAgICBzdGFnZWRWZWN0b3JJbmRleGVzOiB0aGlzLnN0YWdlZFZlY3RvckluZGV4ZXMsXG4gICAgICBkb2N1bWVudFR5cGUsXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIERlZmluZSBhIHRhYmxlIGluIGEgc2NoZW1hLlxuICpcbiAqIFlvdSBjYW4gZWl0aGVyIHNwZWNpZnkgdGhlIHNjaGVtYSBvZiB5b3VyIGRvY3VtZW50cyBhcyBhbiBvYmplY3QgbGlrZVxuICogYGBgdHNcbiAqIGRlZmluZVRhYmxlKHtcbiAqICAgZmllbGQ6IHYuc3RyaW5nKClcbiAqIH0pO1xuICogYGBgXG4gKlxuICogb3IgYXMgYSBzY2hlbWEgdHlwZSBsaWtlXG4gKiBgYGB0c1xuICogZGVmaW5lVGFibGUoXG4gKiAgdi51bmlvbihcbiAqICAgIHYub2JqZWN0KHsuLi59KSxcbiAqICAgIHYub2JqZWN0KHsuLi59KVxuICogIClcbiAqICk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnRTY2hlbWEgLSBUaGUgdHlwZSBvZiBkb2N1bWVudHMgc3RvcmVkIGluIHRoaXMgdGFibGUuXG4gKiBAcmV0dXJucyBBIHtAbGluayBUYWJsZURlZmluaXRpb259IGZvciB0aGUgdGFibGUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lVGFibGU8XG4gIERvY3VtZW50U2NoZW1hIGV4dGVuZHMgVmFsaWRhdG9yPFJlY29yZDxzdHJpbmcsIGFueT4sIFwicmVxdWlyZWRcIiwgYW55Pixcbj4oZG9jdW1lbnRTY2hlbWE6IERvY3VtZW50U2NoZW1hKTogVGFibGVEZWZpbml0aW9uPERvY3VtZW50U2NoZW1hPjtcbi8qKlxuICogRGVmaW5lIGEgdGFibGUgaW4gYSBzY2hlbWEuXG4gKlxuICogWW91IGNhbiBlaXRoZXIgc3BlY2lmeSB0aGUgc2NoZW1hIG9mIHlvdXIgZG9jdW1lbnRzIGFzIGFuIG9iamVjdCBsaWtlXG4gKiBgYGB0c1xuICogZGVmaW5lVGFibGUoe1xuICogICBmaWVsZDogdi5zdHJpbmcoKVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBvciBhcyBhIHNjaGVtYSB0eXBlIGxpa2VcbiAqIGBgYHRzXG4gKiBkZWZpbmVUYWJsZShcbiAqICB2LnVuaW9uKFxuICogICAgdi5vYmplY3Qoey4uLn0pLFxuICogICAgdi5vYmplY3Qoey4uLn0pXG4gKiAgKVxuICogKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBkb2N1bWVudFNjaGVtYSAtIFRoZSB0eXBlIG9mIGRvY3VtZW50cyBzdG9yZWQgaW4gdGhpcyB0YWJsZS5cbiAqIEByZXR1cm5zIEEge0BsaW5rIFRhYmxlRGVmaW5pdGlvbn0gZm9yIHRoZSB0YWJsZS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVUYWJsZTxcbiAgRG9jdW1lbnRTY2hlbWEgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBHZW5lcmljVmFsaWRhdG9yPixcbj4oXG4gIGRvY3VtZW50U2NoZW1hOiBEb2N1bWVudFNjaGVtYSxcbik6IFRhYmxlRGVmaW5pdGlvbjxWT2JqZWN0PE9iamVjdFR5cGU8RG9jdW1lbnRTY2hlbWE+LCBEb2N1bWVudFNjaGVtYT4+O1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVRhYmxlPFxuICBEb2N1bWVudFNjaGVtYSBleHRlbmRzXG4gICAgfCBWYWxpZGF0b3I8UmVjb3JkPHN0cmluZywgYW55PiwgXCJyZXF1aXJlZFwiLCBhbnk+XG4gICAgfCBSZWNvcmQ8c3RyaW5nLCBHZW5lcmljVmFsaWRhdG9yPixcbj4oZG9jdW1lbnRTY2hlbWE6IERvY3VtZW50U2NoZW1hKTogVGFibGVEZWZpbml0aW9uPGFueSwgYW55LCBhbnk+IHtcbiAgaWYgKGlzVmFsaWRhdG9yKGRvY3VtZW50U2NoZW1hKSkge1xuICAgIHJldHVybiBuZXcgVGFibGVEZWZpbml0aW9uKGRvY3VtZW50U2NoZW1hKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IFRhYmxlRGVmaW5pdGlvbih2Lm9iamVjdChkb2N1bWVudFNjaGVtYSkpO1xuICB9XG59XG5cbi8qKlxuICogQSB0eXBlIGRlc2NyaWJpbmcgdGhlIHNjaGVtYSBvZiBhIENvbnZleCBwcm9qZWN0LlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIGNvbnN0cnVjdGVkIHVzaW5nIHtAbGluayBkZWZpbmVTY2hlbWF9LCB7QGxpbmsgZGVmaW5lVGFibGV9LFxuICogYW5kIHtAbGluayB2fS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgR2VuZXJpY1NjaGVtYSA9IFJlY29yZDxzdHJpbmcsIFRhYmxlRGVmaW5pdGlvbj47XG5cbi8qKlxuICpcbiAqIFRoZSBkZWZpbml0aW9uIG9mIGEgQ29udmV4IHByb2plY3Qgc2NoZW1hLlxuICpcbiAqIFRoaXMgc2hvdWxkIGJlIHByb2R1Y2VkIGJ5IHVzaW5nIHtAbGluayBkZWZpbmVTY2hlbWF9LlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgU2NoZW1hRGVmaW5pdGlvbjxcbiAgU2NoZW1hIGV4dGVuZHMgR2VuZXJpY1NjaGVtYSxcbiAgU3RyaWN0VGFibGVUeXBlcyBleHRlbmRzIGJvb2xlYW4sXG4+IHtcbiAgcHVibGljIHRhYmxlczogU2NoZW1hO1xuICBwdWJsaWMgc3RyaWN0VGFibGVOYW1lVHlwZXMhOiBTdHJpY3RUYWJsZVR5cGVzO1xuICBwdWJsaWMgcmVhZG9ubHkgc2NoZW1hVmFsaWRhdGlvbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0YWJsZXM6IFNjaGVtYSwgb3B0aW9ucz86IERlZmluZVNjaGVtYU9wdGlvbnM8U3RyaWN0VGFibGVUeXBlcz4pIHtcbiAgICB0aGlzLnRhYmxlcyA9IHRhYmxlcztcbiAgICB0aGlzLnNjaGVtYVZhbGlkYXRpb24gPVxuICAgICAgb3B0aW9ucz8uc2NoZW1hVmFsaWRhdGlvbiA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMuc2NoZW1hVmFsaWRhdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvcnQgdGhlIGNvbnRlbnRzIG9mIHRoaXMgZGVmaW5pdGlvbi5cbiAgICpcbiAgICogVGhpcyBpcyBjYWxsZWQgaW50ZXJuYWxseSBieSB0aGUgQ29udmV4IGZyYW1ld29yay5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBleHBvcnQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgdGFibGVzOiBPYmplY3QuZW50cmllcyh0aGlzLnRhYmxlcykubWFwKChbdGFibGVOYW1lLCBkZWZpbml0aW9uXSkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgaW5kZXhlcyxcbiAgICAgICAgICBzdGFnZWREYkluZGV4ZXMsXG4gICAgICAgICAgc2VhcmNoSW5kZXhlcyxcbiAgICAgICAgICBzdGFnZWRTZWFyY2hJbmRleGVzLFxuICAgICAgICAgIHZlY3RvckluZGV4ZXMsXG4gICAgICAgICAgc3RhZ2VkVmVjdG9ySW5kZXhlcyxcbiAgICAgICAgICBkb2N1bWVudFR5cGUsXG4gICAgICAgIH0gPSBkZWZpbml0aW9uLmV4cG9ydCgpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRhYmxlTmFtZSxcbiAgICAgICAgICBpbmRleGVzLFxuICAgICAgICAgIHN0YWdlZERiSW5kZXhlcyxcbiAgICAgICAgICBzZWFyY2hJbmRleGVzLFxuICAgICAgICAgIHN0YWdlZFNlYXJjaEluZGV4ZXMsXG4gICAgICAgICAgdmVjdG9ySW5kZXhlcyxcbiAgICAgICAgICBzdGFnZWRWZWN0b3JJbmRleGVzLFxuICAgICAgICAgIGRvY3VtZW50VHlwZSxcbiAgICAgICAgfTtcbiAgICAgIH0pLFxuICAgICAgc2NoZW1hVmFsaWRhdGlvbjogdGhpcy5zY2hlbWFWYWxpZGF0aW9uLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogT3B0aW9ucyBmb3Ige0BsaW5rIGRlZmluZVNjaGVtYX0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgaW50ZXJmYWNlIERlZmluZVNjaGVtYU9wdGlvbnM8U3RyaWN0VGFibGVOYW1lVHlwZXMgZXh0ZW5kcyBib29sZWFuPiB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIENvbnZleCBzaG91bGQgdmFsaWRhdGUgYXQgcnVudGltZSB0aGF0IGFsbCBkb2N1bWVudHMgbWF0Y2hcbiAgICogeW91ciBzY2hlbWEuXG4gICAqXG4gICAqIElmIGBzY2hlbWFWYWxpZGF0aW9uYCBpcyBgdHJ1ZWAsIENvbnZleCB3aWxsOlxuICAgKiAxLiBDaGVjayB0aGF0IGFsbCBleGlzdGluZyBkb2N1bWVudHMgbWF0Y2ggeW91ciBzY2hlbWEgd2hlbiB5b3VyIHNjaGVtYVxuICAgKiBpcyBwdXNoZWQuXG4gICAqIDIuIENoZWNrIHRoYXQgYWxsIGluc2VydGlvbnMgYW5kIHVwZGF0ZXMgbWF0Y2ggeW91ciBzY2hlbWEgZHVyaW5nIG11dGF0aW9ucy5cbiAgICpcbiAgICogSWYgYHNjaGVtYVZhbGlkYXRpb25gIGlzIGBmYWxzZWAsIENvbnZleCB3aWxsIG5vdCB2YWxpZGF0ZSB0aGF0IG5ldyBvclxuICAgKiBleGlzdGluZyBkb2N1bWVudHMgbWF0Y2ggeW91ciBzY2hlbWEuIFlvdSdsbCBzdGlsbCBnZXQgc2NoZW1hLXNwZWNpZmljXG4gICAqIFR5cGVTY3JpcHQgdHlwZXMsIGJ1dCB0aGVyZSB3aWxsIGJlIG5vIHZhbGlkYXRpb24gYXQgcnVudGltZSB0aGF0IHlvdXJcbiAgICogZG9jdW1lbnRzIG1hdGNoIHRob3NlIHR5cGVzLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBgc2NoZW1hVmFsaWRhdGlvbmAgaXMgYHRydWVgLlxuICAgKi9cbiAgc2NoZW1hVmFsaWRhdGlvbj86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIFR5cGVTY3JpcHQgdHlwZXMgc2hvdWxkIGFsbG93IGFjY2Vzc2luZyB0YWJsZXMgbm90IGluIHRoZSBzY2hlbWEuXG4gICAqXG4gICAqIElmIGBzdHJpY3RUYWJsZU5hbWVUeXBlc2AgaXMgYHRydWVgLCB1c2luZyB0YWJsZXMgbm90IGxpc3RlZCBpbiB0aGUgc2NoZW1hXG4gICAqIHdpbGwgZ2VuZXJhdGUgYSBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGVycm9yLlxuICAgKlxuICAgKiBJZiBgc3RyaWN0VGFibGVOYW1lVHlwZXNgIGlzIGBmYWxzZWAsIHlvdSdsbCBiZSBhYmxlIHRvIGFjY2VzcyB0YWJsZXMgbm90XG4gICAqIGxpc3RlZCBpbiB0aGUgc2NoZW1hIGFuZCB0aGVpciBkb2N1bWVudCB0eXBlIHdpbGwgYmUgYGFueWAuXG4gICAqXG4gICAqIGBzdHJpY3RUYWJsZU5hbWVUeXBlczogZmFsc2VgIGlzIHVzZWZ1bCBmb3IgcmFwaWQgcHJvdG90eXBpbmcuXG4gICAqXG4gICAqIFJlZ2FyZGxlc3Mgb2YgdGhlIHZhbHVlIG9mIGBzdHJpY3RUYWJsZU5hbWVUeXBlc2AsIHlvdXIgc2NoZW1hIHdpbGwgb25seVxuICAgKiB2YWxpZGF0ZSBkb2N1bWVudHMgaW4gdGhlIHRhYmxlcyBsaXN0ZWQgaW4gdGhlIHNjaGVtYS4gWW91IGNhbiBzdGlsbCBjcmVhdGVcbiAgICogYW5kIG1vZGlmeSBvdGhlciB0YWJsZXMgb24gdGhlIGRhc2hib2FyZCBvciBpbiBKYXZhU2NyaXB0IG11dGF0aW9ucy5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgYHN0cmljdFRhYmxlTmFtZVR5cGVzYCBpcyBgdHJ1ZWAuXG4gICAqL1xuICBzdHJpY3RUYWJsZU5hbWVUeXBlcz86IFN0cmljdFRhYmxlTmFtZVR5cGVzO1xufVxuXG4vKipcbiAqIERlZmluZSB0aGUgc2NoZW1hIG9mIHRoaXMgQ29udmV4IHByb2plY3QuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgZXhwb3J0ZWQgZnJvbSBhIGBzY2hlbWEudHNgIGZpbGUgaW4geW91ciBgY29udmV4L2AgZGlyZWN0b3J5XG4gKiBsaWtlOlxuICpcbiAqIGBgYHRzXG4gKiBleHBvcnQgZGVmYXVsdCBkZWZpbmVTY2hlbWEoe1xuICogICAuLi5cbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHNjaGVtYSAtIEEgbWFwIGZyb20gdGFibGUgbmFtZSB0byB7QGxpbmsgVGFibGVEZWZpbml0aW9ufSBmb3IgYWxsIG9mXG4gKiB0aGUgdGFibGVzIGluIHRoaXMgcHJvamVjdC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvbi4gU2VlIHtAbGluayBEZWZpbmVTY2hlbWFPcHRpb25zfSBmb3JcbiAqIGEgZnVsbCBkZXNjcmlwdGlvbi5cbiAqIEByZXR1cm5zIFRoZSBzY2hlbWEuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lU2NoZW1hPFxuICBTY2hlbWEgZXh0ZW5kcyBHZW5lcmljU2NoZW1hLFxuICBTdHJpY3RUYWJsZU5hbWVUeXBlcyBleHRlbmRzIGJvb2xlYW4gPSB0cnVlLFxuPihcbiAgc2NoZW1hOiBTY2hlbWEsXG4gIG9wdGlvbnM/OiBEZWZpbmVTY2hlbWFPcHRpb25zPFN0cmljdFRhYmxlTmFtZVR5cGVzPixcbik6IFNjaGVtYURlZmluaXRpb248U2NoZW1hLCBTdHJpY3RUYWJsZU5hbWVUeXBlcz4ge1xuICByZXR1cm4gbmV3IFNjaGVtYURlZmluaXRpb24oc2NoZW1hLCBvcHRpb25zKTtcbn1cblxuLyoqXG4gKiBJbnRlcm5hbCB0eXBlIHVzZWQgaW4gQ29udmV4IGNvZGUgZ2VuZXJhdGlvbiFcbiAqXG4gKiBDb252ZXJ0IGEge0BsaW5rIFNjaGVtYURlZmluaXRpb259IGludG8gYSB7QGxpbmsgc2VydmVyLkdlbmVyaWNEYXRhTW9kZWx9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgRGF0YU1vZGVsRnJvbVNjaGVtYURlZmluaXRpb248XG4gIFNjaGVtYURlZiBleHRlbmRzIFNjaGVtYURlZmluaXRpb248YW55LCBib29sZWFuPixcbj4gPSBNYXliZU1ha2VMb29zZURhdGFNb2RlbDxcbiAge1xuICAgIFtUYWJsZU5hbWUgaW4ga2V5b2YgU2NoZW1hRGVmW1widGFibGVzXCJdICZcbiAgICAgIHN0cmluZ106IFNjaGVtYURlZltcInRhYmxlc1wiXVtUYWJsZU5hbWVdIGV4dGVuZHMgVGFibGVEZWZpbml0aW9uPFxuICAgICAgaW5mZXIgRG9jdW1lbnRUeXBlLFxuICAgICAgaW5mZXIgSW5kZXhlcyxcbiAgICAgIGluZmVyIFNlYXJjaEluZGV4ZXMsXG4gICAgICBpbmZlciBWZWN0b3JJbmRleGVzXG4gICAgPlxuICAgICAgPyB7XG4gICAgICAgICAgLy8gV2UndmUgYWxyZWFkeSBhZGRlZCBhbGwgb2YgdGhlIHN5c3RlbSBmaWVsZHMgZXhjZXB0IGZvciBgX2lkYC5cbiAgICAgICAgICAvLyBBZGQgdGhhdCBoZXJlLlxuICAgICAgICAgIGRvY3VtZW50OiBFeHBhbmQ8SWRGaWVsZDxUYWJsZU5hbWU+ICYgRXh0cmFjdERvY3VtZW50PERvY3VtZW50VHlwZT4+O1xuICAgICAgICAgIGZpZWxkUGF0aHM6XG4gICAgICAgICAgICB8IGtleW9mIElkRmllbGQ8VGFibGVOYW1lPlxuICAgICAgICAgICAgfCBFeHRyYWN0RmllbGRQYXRoczxEb2N1bWVudFR5cGU+O1xuICAgICAgICAgIGluZGV4ZXM6IEV4cGFuZDxJbmRleGVzICYgU3lzdGVtSW5kZXhlcz47XG4gICAgICAgICAgc2VhcmNoSW5kZXhlczogU2VhcmNoSW5kZXhlcztcbiAgICAgICAgICB2ZWN0b3JJbmRleGVzOiBWZWN0b3JJbmRleGVzO1xuICAgICAgICB9XG4gICAgICA6IG5ldmVyO1xuICB9LFxuICBTY2hlbWFEZWZbXCJzdHJpY3RUYWJsZU5hbWVUeXBlc1wiXVxuPjtcblxudHlwZSBNYXliZU1ha2VMb29zZURhdGFNb2RlbDxcbiAgRGF0YU1vZGVsIGV4dGVuZHMgR2VuZXJpY0RhdGFNb2RlbCxcbiAgU3RyaWN0VGFibGVOYW1lVHlwZXMgZXh0ZW5kcyBib29sZWFuLFxuPiA9IFN0cmljdFRhYmxlTmFtZVR5cGVzIGV4dGVuZHMgdHJ1ZVxuICA/IERhdGFNb2RlbFxuICA6IEV4cGFuZDxEYXRhTW9kZWwgJiBBbnlEYXRhTW9kZWw+O1xuXG5jb25zdCBfc3lzdGVtU2NoZW1hID0gZGVmaW5lU2NoZW1hKHtcbiAgX3NjaGVkdWxlZF9mdW5jdGlvbnM6IGRlZmluZVRhYmxlKHtcbiAgICBuYW1lOiB2LnN0cmluZygpLFxuICAgIGFyZ3M6IHYuYXJyYXkodi5hbnkoKSksXG4gICAgc2NoZWR1bGVkVGltZTogdi5mbG9hdDY0KCksXG4gICAgY29tcGxldGVkVGltZTogdi5vcHRpb25hbCh2LmZsb2F0NjQoKSksXG4gICAgc3RhdGU6IHYudW5pb24oXG4gICAgICB2Lm9iamVjdCh7IGtpbmQ6IHYubGl0ZXJhbChcInBlbmRpbmdcIikgfSksXG4gICAgICB2Lm9iamVjdCh7IGtpbmQ6IHYubGl0ZXJhbChcImluUHJvZ3Jlc3NcIikgfSksXG4gICAgICB2Lm9iamVjdCh7IGtpbmQ6IHYubGl0ZXJhbChcInN1Y2Nlc3NcIikgfSksXG4gICAgICB2Lm9iamVjdCh7IGtpbmQ6IHYubGl0ZXJhbChcImZhaWxlZFwiKSwgZXJyb3I6IHYuc3RyaW5nKCkgfSksXG4gICAgICB2Lm9iamVjdCh7IGtpbmQ6IHYubGl0ZXJhbChcImNhbmNlbGVkXCIpIH0pLFxuICAgICksXG4gIH0pLFxuICBfc3RvcmFnZTogZGVmaW5lVGFibGUoe1xuICAgIHNoYTI1Njogdi5zdHJpbmcoKSxcbiAgICBzaXplOiB2LmZsb2F0NjQoKSxcbiAgICBjb250ZW50VHlwZTogdi5vcHRpb25hbCh2LnN0cmluZygpKSxcbiAgfSksXG59KTtcblxuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1EYXRhTW9kZWxcbiAgZXh0ZW5kcyBEYXRhTW9kZWxGcm9tU2NoZW1hRGVmaW5pdGlvbjx0eXBlb2YgX3N5c3RlbVNjaGVtYT4ge31cblxuZXhwb3J0IHR5cGUgU3lzdGVtVGFibGVOYW1lcyA9IFRhYmxlTmFtZXNJbkRhdGFNb2RlbDxTeXN0ZW1EYXRhTW9kZWw+O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/schema.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js":
/*!**********************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/search_filter_builder.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SearchFilter: () => (/* binding */ SearchFilter)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass SearchFilter {\n    /**\n   * @internal\n   */ constructor(){\n        // Property for nominal type support.\n        __publicField(this, \"_isSearchFilter\");\n    }\n} //# sourceMappingURL=search_filter_builder.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci9zZWFyY2hfZmlsdGVyX2J1aWxkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQTZFTyxNQUFlLGFBQWE7SUFBQTs7R0FBQSxHQU9qQyxhQUFjO1FBTGQ7UUFBQSxvQkFBUTtJQVFSO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zcmMvc2VydmVyL3NlYXJjaF9maWx0ZXJfYnVpbGRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBGaWVsZFR5cGVGcm9tRmllbGRQYXRoLFxuICBHZW5lcmljRG9jdW1lbnQsXG4gIEdlbmVyaWNTZWFyY2hJbmRleENvbmZpZyxcbn0gZnJvbSBcIi4vZGF0YV9tb2RlbC5qc1wiO1xuXG4vKipcbiAqIEJ1aWxkZXIgZm9yIGRlZmluaW5nIHNlYXJjaCBmaWx0ZXJzLlxuICpcbiAqIEEgc2VhcmNoIGZpbHRlciBpcyBhIGNoYWluZWQgbGlzdCBvZjpcbiAqIDEuIE9uZSBzZWFyY2ggZXhwcmVzc2lvbiBjb25zdHJ1Y3RlZCB3aXRoIGAuc2VhcmNoYC5cbiAqIDIuIFplcm8gb3IgbW9yZSBlcXVhbGl0eSBleHByZXNzaW9ucyBjb25zdHJ1Y3RlZCB3aXRoIGAuZXFgLlxuICpcbiAqIFRoZSBzZWFyY2ggZXhwcmVzc2lvbiBtdXN0IHNlYXJjaCBmb3IgdGV4dCBpbiB0aGUgaW5kZXgncyBgc2VhcmNoRmllbGRgLiBUaGVcbiAqIGZpbHRlciBleHByZXNzaW9ucyBjYW4gdXNlIGFueSBvZiB0aGUgYGZpbHRlckZpZWxkc2AgZGVmaW5lZCBpbiB0aGUgaW5kZXguXG4gKlxuICogRm9yIGFsbCBvdGhlciBmaWx0ZXJpbmcgdXNlIHtAbGluayBPcmRlcmVkUXVlcnkuZmlsdGVyfS5cbiAqXG4gKiBUbyBsZWFybiBhYm91dCBmdWxsIHRleHQgc2VhcmNoLCBzZWUgW0luZGV4ZXNdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3RleHQtc2VhcmNoKS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZWFyY2hGaWx0ZXJCdWlsZGVyPFxuICBEb2N1bWVudCBleHRlbmRzIEdlbmVyaWNEb2N1bWVudCxcbiAgU2VhcmNoSW5kZXhDb25maWcgZXh0ZW5kcyBHZW5lcmljU2VhcmNoSW5kZXhDb25maWcsXG4+IHtcbiAgLyoqXG4gICAqIFNlYXJjaCBmb3IgdGhlIHRlcm1zIGluIGBxdWVyeWAgd2l0aGluIGBkb2NbZmllbGROYW1lXWAuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBkbyBhIGZ1bGwgdGV4dCBzZWFyY2ggdGhhdCByZXR1cm5zIHJlc3VsdHMgd2hlcmUgYW55IHdvcmQgb2Ygb2ZcbiAgICogYHF1ZXJ5YCBhcHBlYXJzIGluIHRoZSBmaWVsZC5cbiAgICpcbiAgICogRG9jdW1lbnRzIHdpbGwgYmUgcmV0dXJuZWQgYmFzZWQgb24gdGhlaXIgcmVsZXZhbmNlIHRvIHRoZSBxdWVyeS4gVGhpc1xuICAgKiB0YWtlcyBpbnRvIGFjY291bnQ6XG4gICAqIC0gSG93IG1hbnkgd29yZHMgaW4gdGhlIHF1ZXJ5IGFwcGVhciBpbiB0aGUgdGV4dD9cbiAgICogLSBIb3cgbWFueSB0aW1lcyBkbyB0aGV5IGFwcGVhcj9cbiAgICogLSBIb3cgbG9uZyBpcyB0aGUgdGV4dCBmaWVsZD9cbiAgICpcbiAgICogQHBhcmFtIGZpZWxkTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0byBzZWFyY2ggaW4uIFRoaXMgbXVzdCBiZSBsaXN0ZWRcbiAgICogYXMgdGhlIGluZGV4J3MgYHNlYXJjaEZpZWxkYC5cbiAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRleHQgdG8gc2VhcmNoIGZvci5cbiAgICovXG4gIHNlYXJjaChcbiAgICBmaWVsZE5hbWU6IFNlYXJjaEluZGV4Q29uZmlnW1wic2VhcmNoRmllbGRcIl0sXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgKTogU2VhcmNoRmlsdGVyRmluYWxpemVyPERvY3VtZW50LCBTZWFyY2hJbmRleENvbmZpZz47XG59XG5cbi8qKlxuICogQnVpbGRlciB0byBkZWZpbmUgZXF1YWxpdHkgZXhwcmVzc2lvbnMgYXMgcGFydCBvZiBhIHNlYXJjaCBmaWx0ZXIuXG4gKlxuICogU2VlIHtAbGluayBTZWFyY2hGaWx0ZXJCdWlsZGVyfS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2VhcmNoRmlsdGVyRmluYWxpemVyPFxuICBEb2N1bWVudCBleHRlbmRzIEdlbmVyaWNEb2N1bWVudCxcbiAgU2VhcmNoSW5kZXhDb25maWcgZXh0ZW5kcyBHZW5lcmljU2VhcmNoSW5kZXhDb25maWcsXG4+IGV4dGVuZHMgU2VhcmNoRmlsdGVyIHtcbiAgLyoqXG4gICAqIFJlc3RyaWN0IHRoaXMgcXVlcnkgdG8gZG9jdW1lbnRzIHdoZXJlIGBkb2NbZmllbGROYW1lXSA9PT0gdmFsdWVgLlxuICAgKlxuICAgKiBAcGFyYW0gZmllbGROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZpZWxkIHRvIGNvbXBhcmUuIFRoaXMgbXVzdCBiZSBsaXN0ZWQgaW5cbiAgICogdGhlIHNlYXJjaCBpbmRleCdzIGBmaWx0ZXJGaWVsZHNgLlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgKi9cbiAgZXE8RmllbGROYW1lIGV4dGVuZHMgU2VhcmNoSW5kZXhDb25maWdbXCJmaWx0ZXJGaWVsZHNcIl0+KFxuICAgIGZpZWxkTmFtZTogRmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPERvY3VtZW50LCBGaWVsZE5hbWU+LFxuICApOiBTZWFyY2hGaWx0ZXJGaW5hbGl6ZXI8RG9jdW1lbnQsIFNlYXJjaEluZGV4Q29uZmlnPjtcbn1cblxuLyoqXG4gKiBBbiBleHByZXNzaW9uIHJlcHJlc2VudGluZyBhIHNlYXJjaCBmaWx0ZXIgY3JlYXRlZCBieVxuICoge0BsaW5rIFNlYXJjaEZpbHRlckJ1aWxkZXJ9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNlYXJjaEZpbHRlciB7XG4gIC8vIFByb3BlcnR5IGZvciBub21pbmFsIHR5cGUgc3VwcG9ydC5cbiAgcHJpdmF0ZSBfaXNTZWFyY2hGaWx0ZXI6IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBvbmx5IGRlZmluaW5nIHRoZSBjb25zdHJ1Y3RvciBzbyB3ZSBjYW4gbWFyayBpdCBhcyBpbnRlcm5hbCBhbmQga2VlcFxuICAgIC8vIGl0IG91dCBvZiB0aGUgZG9jcy5cbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/search_filter_builder.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/storage.js":
/*!********************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/storage.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
 //# sourceMappingURL=storage.js.map


/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/server/vector_search.js":
/*!**************************************************************!*\
  !*** ./node_modules/convex/dist/esm/server/vector_search.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FilterExpression: () => (/* binding */ FilterExpression)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass FilterExpression {\n    /**\n   * @internal\n   */ constructor(){\n        // Property for nominal type support.\n        __publicField(this, \"_isExpression\");\n        // Property to distinguish expressions by the type they resolve to.\n        __publicField(this, \"_value\");\n    }\n} //# sourceMappingURL=vector_search.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3NlcnZlci92ZWN0b3Jfc2VhcmNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUF5RU8sTUFBZSxpQkFBOEM7SUFBQTs7R0FBQSxHQVVsRSxhQUFjO1FBUmQ7UUFBQSxvQkFBUTtRQUdSO1FBQUEsb0JBQVE7SUFRUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3NlcnZlci92ZWN0b3Jfc2VhcmNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElkLCBWYWx1ZSB9IGZyb20gXCIuLi92YWx1ZXMvdmFsdWUuanNcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50QnlJbmZvLFxuICBGaWVsZFR5cGVGcm9tRmllbGRQYXRoLFxuICBHZW5lcmljRGF0YU1vZGVsLFxuICBHZW5lcmljRG9jdW1lbnQsXG4gIEdlbmVyaWNUYWJsZUluZm8sXG4gIEdlbmVyaWNWZWN0b3JJbmRleENvbmZpZyxcbiAgTmFtZWRUYWJsZUluZm8sXG4gIE5hbWVkVmVjdG9ySW5kZXgsXG4gIFRhYmxlTmFtZXNJbkRhdGFNb2RlbCxcbiAgVmVjdG9ySW5kZXhOYW1lcyxcbn0gZnJvbSBcIi4vZGF0YV9tb2RlbC5qc1wiO1xuXG4vKipcbiAqIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlcnMgZm9yIHBlcmZvcm1pbmcgYSB2ZWN0b3Igc2VhcmNoIGFnYWluc3QgYSB2ZWN0b3IgaW5kZXguXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmVjdG9yU2VhcmNoUXVlcnk8XG4gIFRhYmxlSW5mbyBleHRlbmRzIEdlbmVyaWNUYWJsZUluZm8sXG4gIEluZGV4TmFtZSBleHRlbmRzIFZlY3RvckluZGV4TmFtZXM8VGFibGVJbmZvPixcbj4ge1xuICAvKipcbiAgICogVGhlIHF1ZXJ5IHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIHRoZSBgZGltZW5zaW9uc2Agb2YgdGhlIGluZGV4LlxuICAgKiBUaGlzIHZlY3RvciBzZWFyY2ggd2lsbCByZXR1cm4gdGhlIElEcyBvZiB0aGUgZG9jdW1lbnRzIG1vc3Qgc2ltaWxhciB0b1xuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHZlY3RvcjogbnVtYmVyW107XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuLiBJZiBzcGVjaWZpZWQsIG11c3QgYmUgYmV0d2VlbiAxIGFuZCAyNTZcbiAgICogaW5jbHVzaXZlLlxuICAgKlxuICAgKiBAZGVmYXVsdCAxMFxuICAgKi9cbiAgbGltaXQ/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBmaWx0ZXIgZXhwcmVzc2lvbiBtYWRlIHVwIG9mIGBxLm9yYCBhbmQgYHEuZXFgIG9wZXJhdGluZ1xuICAgKiBvdmVyIHRoZSBmaWx0ZXIgZmllbGRzIG9mIHRoZSBpbmRleC5cbiAgICpcbiAgICogZS5nLiBgZmlsdGVyOiBxID0+IHEub3IocS5lcShcImdlbnJlXCIsIFwiY29tZWR5XCIpLCBxLmVxKFwiZ2VucmVcIiwgXCJkcmFtYVwiKSlgXG4gICAqXG4gICAqIEBwYXJhbSBxXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBmaWx0ZXI/OiAoXG4gICAgcTogVmVjdG9yRmlsdGVyQnVpbGRlcjxcbiAgICAgIERvY3VtZW50QnlJbmZvPFRhYmxlSW5mbz4sXG4gICAgICBOYW1lZFZlY3RvckluZGV4PFRhYmxlSW5mbywgSW5kZXhOYW1lPlxuICAgID4sXG4gICkgPT4gRmlsdGVyRXhwcmVzc2lvbjxib29sZWFuPjtcbn1cblxuZXhwb3J0IHR5cGUgVmVjdG9yU2VhcmNoPFxuICBEYXRhTW9kZWwgZXh0ZW5kcyBHZW5lcmljRGF0YU1vZGVsLFxuICBUYWJsZU5hbWUgZXh0ZW5kcyBUYWJsZU5hbWVzSW5EYXRhTW9kZWw8RGF0YU1vZGVsPixcbiAgSW5kZXhOYW1lIGV4dGVuZHMgVmVjdG9ySW5kZXhOYW1lczxOYW1lZFRhYmxlSW5mbzxEYXRhTW9kZWwsIFRhYmxlTmFtZT4+LFxuPiA9IChcbiAgdGFibGVOYW1lOiBUYWJsZU5hbWUsXG4gIGluZGV4TmFtZTogSW5kZXhOYW1lLFxuICBxdWVyeTogVmVjdG9yU2VhcmNoUXVlcnk8TmFtZWRUYWJsZUluZm88RGF0YU1vZGVsLCBUYWJsZU5hbWU+LCBJbmRleE5hbWU+LFxuKSA9PiBQcm9taXNlPEFycmF5PHsgX2lkOiBJZDxUYWJsZU5hbWU+OyBfc2NvcmU6IG51bWJlciB9Pj47XG5cbi8qKlxuICogRXhwcmVzc2lvbnMgYXJlIGV2YWx1YXRlZCB0byBwcm9kdWNlIGEge0BsaW5rIHZhbHVlcy5WYWx1ZX0gaW4gdGhlIGNvdXJzZSBvZiBleGVjdXRpbmcgYSBxdWVyeS5cbiAqXG4gKiBUbyBjb25zdHJ1Y3QgYW4gZXhwcmVzc2lvbiwgdXNlIHRoZSB7QGxpbmsgVmVjdG9yRmlsdGVyQnVpbGRlcn0gcHJvdmlkZWQgd2l0aGluXG4gKiB7QGxpbmsgVmVjdG9yU2VhcmNoUXVlcnl9LlxuICpcbiAqIEB0eXBlUGFyYW0gVCAtIFRoZSB0eXBlIHRoYXQgdGhpcyBleHByZXNzaW9uIGV2YWx1YXRlcyB0by5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEZpbHRlckV4cHJlc3Npb248VCBleHRlbmRzIFZhbHVlIHwgdW5kZWZpbmVkPiB7XG4gIC8vIFByb3BlcnR5IGZvciBub21pbmFsIHR5cGUgc3VwcG9ydC5cbiAgcHJpdmF0ZSBfaXNFeHByZXNzaW9uOiB1bmRlZmluZWQ7XG5cbiAgLy8gUHJvcGVydHkgdG8gZGlzdGluZ3Vpc2ggZXhwcmVzc2lvbnMgYnkgdGhlIHR5cGUgdGhleSByZXNvbHZlIHRvLlxuICBwcml2YXRlIF92YWx1ZSE6IFQ7XG5cbiAgLyoqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gb25seSBkZWZpbmluZyB0aGUgY29uc3RydWN0b3Igc28gd2UgY2FuIG1hcmsgaXQgYXMgaW50ZXJuYWwgYW5kIGtlZXBcbiAgICAvLyBpdCBvdXQgb2YgdGhlIGRvY3MuXG4gIH1cbn1cblxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgZm9yIGRlZmluaW5nIGZpbHRlcnMgZm9yIHZlY3RvciBzZWFyY2hlcy5cbiAqXG4gKiBUaGlzIGhhcyBhIHNpbWlsYXIgaW50ZXJmYWNlIHRvIHtAbGluayBGaWx0ZXJCdWlsZGVyfSwgd2hpY2ggaXMgdXNlZCBpblxuICogZGF0YWJhc2UgcXVlcmllcywgYnV0IHN1cHBvcnRzIG9ubHkgdGhlIG1ldGhvZHMgdGhhdCBjYW4gYmUgZWZmaWNpZW50bHlcbiAqIGRvbmUgaW4gYSB2ZWN0b3Igc2VhcmNoLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBWZWN0b3JGaWx0ZXJCdWlsZGVyPFxuICBEb2N1bWVudCBleHRlbmRzIEdlbmVyaWNEb2N1bWVudCxcbiAgVmVjdG9ySW5kZXhDb25maWcgZXh0ZW5kcyBHZW5lcmljVmVjdG9ySW5kZXhDb25maWcsXG4+IHtcbiAgLy8gIENvbXBhcmlzb25zICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIElzIHRoZSBmaWVsZCBhdCBgZmllbGROYW1lYCBlcXVhbCB0byBgdmFsdWVgXG4gICAqXG4gICAqIEBwdWJsaWNcbiAgICogKi9cbiAgZXE8RmllbGROYW1lIGV4dGVuZHMgVmVjdG9ySW5kZXhDb25maWdbXCJmaWx0ZXJGaWVsZHNcIl0+KFxuICAgIGZpZWxkTmFtZTogRmllbGROYW1lLFxuICAgIHZhbHVlOiBGaWVsZFR5cGVGcm9tRmllbGRQYXRoPERvY3VtZW50LCBGaWVsZE5hbWU+LFxuICApOiBGaWx0ZXJFeHByZXNzaW9uPGJvb2xlYW4+O1xuXG4gIC8vICBMb2dpYyAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8qKlxuICAgKiBgZXhwcnNbMF0gfHwgZXhwcnNbMV0gfHwgLi4uIHx8IGV4cHJzW25dYFxuICAgKlxuICAgKiBAcHVibGljXG4gICAqL1xuICBvciguLi5leHByczogQXJyYXk8RmlsdGVyRXhwcmVzc2lvbjxib29sZWFuPj4pOiBGaWx0ZXJFeHByZXNzaW9uPGJvb2xlYW4+O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/server/vector_search.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/base64.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/base64.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   byteLength: () => (/* binding */ byteLength),\n/* harmony export */   fromByteArray: () => (/* binding */ fromByteArray),\n/* harmony export */   fromByteArrayUrlSafeNoPadding: () => (/* binding */ fromByteArrayUrlSafeNoPadding),\n/* harmony export */   toByteArray: () => (/* binding */ toByteArray)\n/* harmony export */ });\n\nvar lookup = [];\nvar revLookup = [];\nvar Arr = Uint8Array;\nvar code = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nfor(var i = 0, len = code.length; i < len; ++i){\n    lookup[i] = code[i];\n    revLookup[code.charCodeAt(i)] = i;\n}\nrevLookup[\"-\".charCodeAt(0)] = 62;\nrevLookup[\"_\".charCodeAt(0)] = 63;\nfunction getLens(b64) {\n    var len = b64.length;\n    if (len % 4 > 0) {\n        throw new Error(\"Invalid string. Length must be a multiple of 4\");\n    }\n    var validLen = b64.indexOf(\"=\");\n    if (validLen === -1) validLen = len;\n    var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n    return [\n        validLen,\n        placeHoldersLen\n    ];\n}\nfunction byteLength(b64) {\n    var lens = getLens(b64);\n    var validLen = lens[0];\n    var placeHoldersLen = lens[1];\n    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\nfunction _byteLength(_b64, validLen, placeHoldersLen) {\n    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\nfunction toByteArray(b64) {\n    var tmp;\n    var lens = getLens(b64);\n    var validLen = lens[0];\n    var placeHoldersLen = lens[1];\n    var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n    var curByte = 0;\n    var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n    var i;\n    for(i = 0; i < len; i += 4){\n        tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n        arr[curByte++] = tmp >> 16 & 255;\n        arr[curByte++] = tmp >> 8 & 255;\n        arr[curByte++] = tmp & 255;\n    }\n    if (placeHoldersLen === 2) {\n        tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n        arr[curByte++] = tmp & 255;\n    }\n    if (placeHoldersLen === 1) {\n        tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n        arr[curByte++] = tmp >> 8 & 255;\n        arr[curByte++] = tmp & 255;\n    }\n    return arr;\n}\nfunction tripletToBase64(num) {\n    return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];\n}\nfunction encodeChunk(uint8, start, end) {\n    var tmp;\n    var output = [];\n    for(var i = start; i < end; i += 3){\n        tmp = (uint8[i] << 16 & 16711680) + (uint8[i + 1] << 8 & 65280) + (uint8[i + 2] & 255);\n        output.push(tripletToBase64(tmp));\n    }\n    return output.join(\"\");\n}\nfunction fromByteArray(uint8) {\n    var tmp;\n    var len = uint8.length;\n    var extraBytes = len % 3;\n    var parts = [];\n    var maxChunkLength = 16383;\n    for(var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength){\n        parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n    }\n    if (extraBytes === 1) {\n        tmp = uint8[len - 1];\n        parts.push(lookup[tmp >> 2] + lookup[tmp << 4 & 63] + \"==\");\n    } else if (extraBytes === 2) {\n        tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n        parts.push(lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + \"=\");\n    }\n    return parts.join(\"\");\n}\nfunction fromByteArrayUrlSafeNoPadding(uint8) {\n    return fromByteArray(uint8).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n} //# sourceMappingURL=base64.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9iYXNlNjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQSxJQUFJLFNBQW1CLENBQUM7QUFDeEIsSUFBSSxZQUFzQixDQUFDO0FBQzNCLElBQUksTUFBTTtBQUVWLElBQUksT0FBTztBQUNYLFFBQVMsSUFBSSxHQUFHLE1BQU0sS0FBSyxRQUFRLElBQUksS0FBSyxFQUFFLEVBQUc7SUFDL0MsT0FBTyxDQUFDLElBQUksS0FBSyxDQUFDO0lBQ2xCLFVBQVUsS0FBSyxXQUFXLENBQUMsQ0FBQyxJQUFJO0FBQ2xDO0FBSUEsVUFBVSxJQUFJLFdBQVcsQ0FBQyxDQUFDLElBQUk7QUFDL0IsVUFBVSxJQUFJLFdBQVcsQ0FBQyxDQUFDLElBQUk7QUFFL0IsU0FBUyxRQUFRLEtBQWE7SUFDNUIsSUFBSSxNQUFNLElBQUk7SUFFZCxJQUFJLE1BQU0sSUFBSSxHQUFHO1FBQ2YsTUFBTSxJQUFJLE1BQU0sZ0RBQWdEO0lBQ2xFO0lBSUEsSUFBSSxXQUFXLElBQUksUUFBUSxHQUFHO0lBQzlCLElBQUksYUFBYSxHQUFJLFlBQVc7SUFFaEMsSUFBSSxrQkFBa0IsYUFBYSxNQUFNLElBQUksSUFBSyxXQUFXO0lBRTdELE9BQU87UUFBQztRQUFVLGVBQWU7S0FBQTtBQUNuQztBQUlPLFNBQVMsV0FBVyxLQUFxQjtJQUM5QyxJQUFJLE9BQU8sUUFBUSxHQUFHO0lBQ3RCLElBQUksV0FBVyxLQUFLLENBQUM7SUFDckIsSUFBSSxrQkFBa0IsS0FBSyxDQUFDO0lBQzVCLFFBQVMsV0FBVyxtQkFBbUIsSUFBSyxJQUFJO0FBQ2xEO0FBRUEsU0FBUyxZQUFZLE1BQWMsVUFBa0IsaUJBQXlCO0lBQzVFLFFBQVMsV0FBVyxtQkFBbUIsSUFBSyxJQUFJO0FBQ2xEO0FBR08sU0FBUyxZQUFZLEtBQXlCO0lBQ25ELElBQUk7SUFDSixJQUFJLE9BQU8sUUFBUSxHQUFHO0lBQ3RCLElBQUksV0FBVyxLQUFLLENBQUM7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QVEsT0FBTyxHQUFHLEVBQ2xCLFFBQVEsTUFBTSxFQUFFO0FBQ3JCIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3ZhbHVlcy9iYXNlNjQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbmh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9ibG9iLzg4OTU3Yzk5NDNjN2UyYTBmMDNjZGY3M2U3MWQ1NzllNDMzNjI3ZDMvaW5kZXguanNcbkNvcHlyaWdodCAoYykgMjAxNCBKYW1lc29uIExpdHRsZVxuVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4qL1xuXG4vLyBWZW5kb3JlZCBiZWNhdXNlIHRoaXMgbGlicmFyeSBoYXMgbm8gRVNNIGJ1aWxkLCBhbmQgc29tZSBlbnZpcm9ubWVudHNcbi8vIChTdmVsdGVLaXQpIGFyZSBoYXBwaWVzdCB3aGVuIGFsbCBkZXBlbmRlbmNpZXMgYXJlIEVTTS5cblxudmFyIGxvb2t1cDogc3RyaW5nW10gPSBbXTtcbnZhciByZXZMb29rdXA6IG51bWJlcltdID0gW107XG52YXIgQXJyID0gVWludDhBcnJheTtcblxudmFyIGNvZGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIjtcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV07XG4gIHJldkxvb2t1cFtjb2RlLmNoYXJDb2RlQXQoaSldID0gaTtcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwW1wiLVwiLmNoYXJDb2RlQXQoMCldID0gNjI7XG5yZXZMb29rdXBbXCJfXCIuY2hhckNvZGVBdCgwKV0gPSA2MztcblxuZnVuY3Rpb24gZ2V0TGVucyhiNjQ6IHN0cmluZykge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aDtcblxuICBpZiAobGVuICUgNCA+IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO1xuICB9XG5cbiAgLy8gVHJpbSBvZmYgZXh0cmEgYnl0ZXMgYWZ0ZXIgcGxhY2Vob2xkZXIgYnl0ZXMgYXJlIGZvdW5kXG4gIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2JlYXRnYW1taXQvYmFzZTY0LWpzL2lzc3Vlcy80MlxuICB2YXIgdmFsaWRMZW4gPSBiNjQuaW5kZXhPZihcIj1cIik7XG4gIGlmICh2YWxpZExlbiA9PT0gLTEpIHZhbGlkTGVuID0gbGVuO1xuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuID8gMCA6IDQgLSAodmFsaWRMZW4gJSA0KTtcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dO1xufVxuXG4vLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbi8qKiBAcHVibGljICovXG5leHBvcnQgZnVuY3Rpb24gYnl0ZUxlbmd0aChiNjQ6IHN0cmluZyk6IG51bWJlciB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpO1xuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdO1xuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXTtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMykgLyA0IC0gcGxhY2VIb2xkZXJzTGVuO1xufVxuXG5mdW5jdGlvbiBfYnl0ZUxlbmd0aChfYjY0OiBzdHJpbmcsIHZhbGlkTGVuOiBudW1iZXIsIHBsYWNlSG9sZGVyc0xlbjogbnVtYmVyKSB7XG4gIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMpIC8gNCAtIHBsYWNlSG9sZGVyc0xlbjtcbn1cblxuLyoqIEBwdWJsaWMgKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0J5dGVBcnJheShiNjQ6IHN0cmluZyk6IFVpbnQ4QXJyYXkge1xuICB2YXIgdG1wO1xuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KTtcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXTtcbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV07XG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSk7XG5cbiAgdmFyIGN1ckJ5dGUgPSAwO1xuXG4gIC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcbiAgdmFyIGxlbiA9IHBsYWNlSG9sZGVyc0xlbiA+IDAgPyB2YWxpZExlbiAtIDQgOiB2YWxpZExlbjtcblxuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG4gICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXTtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhmZjtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweGZmO1xuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhmZjtcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpO1xuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhmZjtcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMik7XG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhmZjtcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4ZmY7XG4gIH1cblxuICByZXR1cm4gYXJyO1xufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQobnVtOiBudW1iZXIpIHtcbiAgcmV0dXJuIChcbiAgICBsb29rdXBbKG51bSA+PiAxOCkgJiAweDNmXSArXG4gICAgbG9va3VwWyhudW0gPj4gMTIpICYgMHgzZl0gK1xuICAgIGxvb2t1cFsobnVtID4+IDYpICYgMHgzZl0gK1xuICAgIGxvb2t1cFtudW0gJiAweDNmXVxuICApO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayh1aW50ODogVWludDhBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpIHtcbiAgdmFyIHRtcDtcbiAgdmFyIG91dHB1dCA9IFtdO1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMykge1xuICAgIHRtcCA9XG4gICAgICAoKHVpbnQ4W2ldIDw8IDE2KSAmIDB4ZmYwMDAwKSArXG4gICAgICAoKHVpbnQ4W2kgKyAxXSA8PCA4KSAmIDB4ZmYwMCkgK1xuICAgICAgKHVpbnQ4W2kgKyAyXSAmIDB4ZmYpO1xuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKTtcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oXCJcIik7XG59XG5cbi8qKiBAcHVibGljICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSh1aW50ODogVWludDhBcnJheSk6IHN0cmluZyB7XG4gIHZhciB0bXA7XG4gIHZhciBsZW4gPSB1aW50OC5sZW5ndGg7XG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMzsgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIHBhcnRzID0gW107XG4gIHZhciBtYXhDaHVua0xlbmd0aCA9IDE2MzgzOyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKFxuICAgICAgZW5jb2RlQ2h1bmsoXG4gICAgICAgIHVpbnQ4LFxuICAgICAgICBpLFxuICAgICAgICBpICsgbWF4Q2h1bmtMZW5ndGggPiBsZW4yID8gbGVuMiA6IGkgKyBtYXhDaHVua0xlbmd0aCxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcbiAgaWYgKGV4dHJhQnl0ZXMgPT09IDEpIHtcbiAgICB0bXAgPSB1aW50OFtsZW4gLSAxXTtcbiAgICBwYXJ0cy5wdXNoKGxvb2t1cFt0bXAgPj4gMl0gKyBsb29rdXBbKHRtcCA8PCA0KSAmIDB4M2ZdICsgXCI9PVwiKTtcbiAgfSBlbHNlIGlmIChleHRyYUJ5dGVzID09PSAyKSB7XG4gICAgdG1wID0gKHVpbnQ4W2xlbiAtIDJdIDw8IDgpICsgdWludDhbbGVuIC0gMV07XG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMTBdICtcbiAgICAgICAgbG9va3VwWyh0bXAgPj4gNCkgJiAweDNmXSArXG4gICAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzZl0gK1xuICAgICAgICBcIj1cIixcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oXCJcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQnl0ZUFycmF5VXJsU2FmZU5vUGFkZGluZyh1aW50ODogVWludDhBcnJheSk6IHN0cmluZyB7XG4gIHJldHVybiBmcm9tQnl0ZUFycmF5KHVpbnQ4KVxuICAgIC5yZXBsYWNlKC9cXCsvZywgXCItXCIpXG4gICAgLnJlcGxhY2UoL1xcLy9nLCBcIl9cIilcbiAgICAucmVwbGFjZSgvPS9nLCBcIlwiKTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/base64.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/compare.js":
/*!********************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/compare.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compareValues: () => (/* binding */ compareValues)\n/* harmony export */ });\n/* harmony import */ var _compare_utf8_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./compare_utf8.js */ \"(ssr)/./node_modules/convex/dist/esm/values/compare_utf8.js\");\n\n\nfunction compareValues(k1, k2) {\n    return compareAsTuples(makeComparable(k1), makeComparable(k2));\n}\nfunction compareAsTuples(a, b) {\n    if (a[0] === b[0]) {\n        return compareSameTypeValues(a[1], b[1]);\n    } else if (a[0] < b[0]) {\n        return -1;\n    }\n    return 1;\n}\nfunction compareSameTypeValues(v1, v2) {\n    if (v1 === void 0 || v1 === null) {\n        return 0;\n    }\n    if (typeof v1 === \"number\") {\n        if (typeof v2 !== \"number\") {\n            throw new Error(`Unexpected type ${v2}`);\n        }\n        return compareNumbers(v1, v2);\n    }\n    if (typeof v1 === \"string\") {\n        if (typeof v2 !== \"string\") {\n            throw new Error(`Unexpected type ${v2}`);\n        }\n        return (0,_compare_utf8_js__WEBPACK_IMPORTED_MODULE_0__.compareUTF8)(v1, v2);\n    }\n    if (typeof v1 === \"bigint\" || typeof v1 === \"boolean\" || typeof v1 === \"string\") {\n        return v1 < v2 ? -1 : v1 === v2 ? 0 : 1;\n    }\n    if (!Array.isArray(v1) || !Array.isArray(v2)) {\n        throw new Error(`Unexpected type ${v1}`);\n    }\n    for(let i = 0; i < v1.length && i < v2.length; i++){\n        const cmp = compareAsTuples(v1[i], v2[i]);\n        if (cmp !== 0) {\n            return cmp;\n        }\n    }\n    if (v1.length < v2.length) {\n        return -1;\n    }\n    if (v1.length > v2.length) {\n        return 1;\n    }\n    return 0;\n}\nfunction compareNumbers(v1, v2) {\n    if (isNaN(v1) || isNaN(v2)) {\n        const buffer1 = new ArrayBuffer(8);\n        const buffer2 = new ArrayBuffer(8);\n        new DataView(buffer1).setFloat64(0, v1, /* little-endian */ true);\n        new DataView(buffer2).setFloat64(0, v2, /* little-endian */ true);\n        const v1Bits = BigInt(new DataView(buffer1).getBigInt64(0, /* little-endian */ true));\n        const v2Bits = BigInt(new DataView(buffer2).getBigInt64(0, /* little-endian */ true));\n        const v1Sign = (v1Bits & 0x8000000000000000n) !== 0n;\n        const v2Sign = (v2Bits & 0x8000000000000000n) !== 0n;\n        if (isNaN(v1) !== isNaN(v2)) {\n            if (isNaN(v1)) {\n                return v1Sign ? -1 : 1;\n            }\n            return v2Sign ? 1 : -1;\n        }\n        if (v1Sign !== v2Sign) {\n            return v1Sign ? -1 : 1;\n        }\n        return v1Bits < v2Bits ? -1 : v1Bits === v2Bits ? 0 : 1;\n    }\n    if (Object.is(v1, v2)) {\n        return 0;\n    }\n    if (Object.is(v1, -0)) {\n        return Object.is(v2, 0) ? -1 : -Math.sign(v2);\n    }\n    if (Object.is(v2, -0)) {\n        return Object.is(v1, 0) ? 1 : Math.sign(v1);\n    }\n    return v1 < v2 ? -1 : 1;\n}\nfunction makeComparable(v) {\n    if (v === void 0) {\n        return [\n            0,\n            void 0\n        ];\n    }\n    if (v === null) {\n        return [\n            1,\n            null\n        ];\n    }\n    if (typeof v === \"bigint\") {\n        return [\n            2,\n            v\n        ];\n    }\n    if (typeof v === \"number\") {\n        return [\n            3,\n            v\n        ];\n    }\n    if (typeof v === \"boolean\") {\n        return [\n            4,\n            v\n        ];\n    }\n    if (typeof v === \"string\") {\n        return [\n            5,\n            v\n        ];\n    }\n    if (v instanceof ArrayBuffer) {\n        return [\n            6,\n            Array.from(new Uint8Array(v)).map(makeComparable)\n        ];\n    }\n    if (Array.isArray(v)) {\n        return [\n            7,\n            v.map(makeComparable)\n        ];\n    }\n    const keys = Object.keys(v).sort();\n    const pojo = keys.map((k)=>[\n            k,\n            v[k]\n        ]);\n    return [\n        8,\n        pojo.map(makeComparable)\n    ];\n} //# sourceMappingURL=compare.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9jb21wYXJlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUM0QjtBQUVyQixTQUFTLGNBQWMsSUFBdUIsSUFBdUI7SUFDMUUsT0FBTyxnQkFBZ0IsZUFBZSxFQUFFLEdBQUcsZUFBZSxFQUFFLENBQUM7QUFDL0Q7QUFFQSxTQUFTLGdCQUFtQixHQUFnQixHQUF3QjtJQUNsRSxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHO1FBQ2pCLE9BQU8sc0JBQXNCLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3pDLFdBQVcsRUFBRSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUc7UUFDdEIsT0FBTztJQUNUO0lBQ0EsT0FBTztBQUNUO0FBRUEsU0FBUyxzQkFBeUIsSUFBTyxJQUFlO0lBQ3RELElBQUksT0FBTyxVQUFhLE9BQU8sTUFBTTtRQUNuQyxPQUFPO0lBQ1Q7SUFDQSxJQUFJLE9BQU8sT0FBTyxVQUFVO1FBQzFCLElBQUksT0FBTyxPQUFPLFVBQVU7WUFDMUIsTUFBTSxJQUFJLE1BQU0sbUJBQW1CLEVBQVMsRUFBRTtRQUNoRDtRQUNBLE9BQU8sZUFBZSxJQUFJLEVBQUU7SUFDOUI7SUFDQSxJQUFJLE9BQU8sT0FBTyxVQUFVO1FBQzFCLElBQUksT0FBTyxPQUFPLFVBQVU7WUFDMUIsTUFBTSxJQUFJLE1BQU0sbUJBQW1CLEVBQVMsRUFBRTtRQUNoRDtRQUNBLE9BQU8sNkRBQVcsQ0FBQyxJQUFJLEVBQUU7SUFDM0I7SUFDQSxJQUNFLE9BQU8sT0FBTyxZQUNkLE9BQU8sT0FBTyxhQUNkLE9BQU8sT0FBTyxVQUNkO1FBQ0EsT0FBTyxLQUFLLEtBQUssS0FBSyxPQUFPLEtBQUssSUFBSTtJQUN4QztJQUNBLElBQUksQ0FBQyxNQUFNLFFBQVEsRUFBRSxLQUFLLENBQUMsTUFBTSxRQUFRLEVBQUUsR0FBRztRQUM1QyxNQUFNLElBQUksTUFBTSxtQkFBbUIsRUFBUyxF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RTtTQUFDO0lBQ2hELE9BQU87UUFBQztRQUFHLEtBQUssSUFBSSxjQUFjLENBQUM7S0FBQTtBQUNyQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy92YWx1ZXMvY29tcGFyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBWYWx1ZSB9IGZyb20gXCIuL3ZhbHVlLmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlVVRGOCB9IGZyb20gXCIuL2NvbXBhcmVfdXRmOC5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVZhbHVlcyhrMTogVmFsdWUgfCB1bmRlZmluZWQsIGsyOiBWYWx1ZSB8IHVuZGVmaW5lZCkge1xuICByZXR1cm4gY29tcGFyZUFzVHVwbGVzKG1ha2VDb21wYXJhYmxlKGsxKSwgbWFrZUNvbXBhcmFibGUoazIpKTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZUFzVHVwbGVzPFQ+KGE6IFtudW1iZXIsIFRdLCBiOiBbbnVtYmVyLCBUXSk6IG51bWJlciB7XG4gIGlmIChhWzBdID09PSBiWzBdKSB7XG4gICAgcmV0dXJuIGNvbXBhcmVTYW1lVHlwZVZhbHVlcyhhWzFdLCBiWzFdKTtcbiAgfSBlbHNlIGlmIChhWzBdIDwgYlswXSkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICByZXR1cm4gMTtcbn1cblxuZnVuY3Rpb24gY29tcGFyZVNhbWVUeXBlVmFsdWVzPFQ+KHYxOiBULCB2MjogVCk6IG51bWJlciB7XG4gIGlmICh2MSA9PT0gdW5kZWZpbmVkIHx8IHYxID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgaWYgKHR5cGVvZiB2MSA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmICh0eXBlb2YgdjIgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0eXBlICR7djIgYXMgYW55fWApO1xuICAgIH1cbiAgICByZXR1cm4gY29tcGFyZU51bWJlcnModjEsIHYyKTtcbiAgfVxuICBpZiAodHlwZW9mIHYxID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKHR5cGVvZiB2MiAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIHR5cGUgJHt2MiBhcyBhbnl9YCk7XG4gICAgfVxuICAgIHJldHVybiBjb21wYXJlVVRGOCh2MSwgdjIpO1xuICB9XG4gIGlmIChcbiAgICB0eXBlb2YgdjEgPT09IFwiYmlnaW50XCIgfHxcbiAgICB0eXBlb2YgdjEgPT09IFwiYm9vbGVhblwiIHx8XG4gICAgdHlwZW9mIHYxID09PSBcInN0cmluZ1wiXG4gICkge1xuICAgIHJldHVybiB2MSA8IHYyID8gLTEgOiB2MSA9PT0gdjIgPyAwIDogMTtcbiAgfVxuICBpZiAoIUFycmF5LmlzQXJyYXkodjEpIHx8ICFBcnJheS5pc0FycmF5KHYyKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB0eXBlICR7djEgYXMgYW55fWApO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdjEubGVuZ3RoICYmIGkgPCB2Mi5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNtcCA9IGNvbXBhcmVBc1R1cGxlcyh2MVtpXSwgdjJbaV0pO1xuICAgIGlmIChjbXAgIT09IDApIHtcbiAgICAgIHJldHVybiBjbXA7XG4gICAgfVxuICB9XG4gIGlmICh2MS5sZW5ndGggPCB2Mi5sZW5ndGgpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgaWYgKHYxLmxlbmd0aCA+IHYyLmxlbmd0aCkge1xuICAgIHJldHVybiAxO1xuICB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlTnVtYmVycyh2MTogbnVtYmVyLCB2MjogbnVtYmVyKTogbnVtYmVyIHtcbiAgLy8gSGFuZGxlIE5hTiB2YWx1ZXNcbiAgaWYgKGlzTmFOKHYxKSB8fCBpc05hTih2MikpIHtcbiAgICAvLyBDcmVhdGUgRGF0YVZpZXdzIGZvciBiaXQtbGV2ZWwgY29tcGFyaXNvblxuICAgIGNvbnN0IGJ1ZmZlcjEgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gICAgY29uc3QgYnVmZmVyMiA9IG5ldyBBcnJheUJ1ZmZlcig4KTtcbiAgICBuZXcgRGF0YVZpZXcoYnVmZmVyMSkuc2V0RmxvYXQ2NCgwLCB2MSwgLyogbGl0dGxlLWVuZGlhbiAqLyB0cnVlKTtcbiAgICBuZXcgRGF0YVZpZXcoYnVmZmVyMikuc2V0RmxvYXQ2NCgwLCB2MiwgLyogbGl0dGxlLWVuZGlhbiAqLyB0cnVlKTtcblxuICAgIC8vIFJlYWQgYXMgQmlnSW50IHRvIGNvbXBhcmUgYml0c1xuICAgIGNvbnN0IHYxQml0cyA9IEJpZ0ludChcbiAgICAgIG5ldyBEYXRhVmlldyhidWZmZXIxKS5nZXRCaWdJbnQ2NCgwLCAvKiBsaXR0bGUtZW5kaWFuICovIHRydWUpLFxuICAgICk7XG4gICAgY29uc3QgdjJCaXRzID0gQmlnSW50KFxuICAgICAgbmV3IERhdGFWaWV3KGJ1ZmZlcjIpLmdldEJpZ0ludDY0KDAsIC8qIGxpdHRsZS1lbmRpYW4gKi8gdHJ1ZSksXG4gICAgKTtcblxuICAgIC8vIFRoZSBzaWduIGJpdCBpcyB0aGUgbW9zdCBzaWduaWZpY2FudCBiaXQgKGJpdCA2MylcbiAgICBjb25zdCB2MVNpZ24gPSAodjFCaXRzICYgMHg4MDAwMDAwMDAwMDAwMDAwbikgIT09IDBuO1xuICAgIGNvbnN0IHYyU2lnbiA9ICh2MkJpdHMgJiAweDgwMDAwMDAwMDAwMDAwMDBuKSAhPT0gMG47XG5cbiAgICAvLyBJZiBvbmUgdmFsdWUgaXMgTmFOIGFuZCB0aGUgb3RoZXIgaXNuJ3QsIHVzZSBzaWduIGJpdHMgZmlyc3RcbiAgICBpZiAoaXNOYU4odjEpICE9PSBpc05hTih2MikpIHtcbiAgICAgIC8vIElmIHYxIGlzIE5hTiwgY29tcGFyZSBiYXNlZCBvbiBzaWduIGJpdHNcbiAgICAgIGlmIChpc05hTih2MSkpIHtcbiAgICAgICAgcmV0dXJuIHYxU2lnbiA/IC0xIDogMTtcbiAgICAgIH1cbiAgICAgIC8vIElmIHYyIGlzIE5hTiwgY29tcGFyZSBiYXNlZCBvbiBzaWduIGJpdHNcbiAgICAgIHJldHVybiB2MlNpZ24gPyAxIDogLTE7XG4gICAgfVxuXG4gICAgLy8gSWYgYm90aCBhcmUgTmFOLCBjb21wYXJlIHRoZWlyIGJpbmFyeSByZXByZXNlbnRhdGlvbnNcbiAgICBpZiAodjFTaWduICE9PSB2MlNpZ24pIHtcbiAgICAgIHJldHVybiB2MVNpZ24gPyAtMSA6IDE7IC8vIHRydWUgbWVhbnMgbmVnYXRpdmVcbiAgICB9XG4gICAgcmV0dXJuIHYxQml0cyA8IHYyQml0cyA/IC0xIDogdjFCaXRzID09PSB2MkJpdHMgPyAwIDogMTtcbiAgfVxuXG4gIGlmIChPYmplY3QuaXModjEsIHYyKSkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaWYgKE9iamVjdC5pcyh2MSwgLTApKSB7XG4gICAgcmV0dXJuIE9iamVjdC5pcyh2MiwgMCkgPyAtMSA6IC1NYXRoLnNpZ24odjIpO1xuICB9XG4gIGlmIChPYmplY3QuaXModjIsIC0wKSkge1xuICAgIHJldHVybiBPYmplY3QuaXModjEsIDApID8gMSA6IE1hdGguc2lnbih2MSk7XG4gIH1cblxuICAvLyBIYW5kbGUgcmVndWxhciBudW1iZXIgY29tcGFyaXNvblxuICByZXR1cm4gdjEgPCB2MiA/IC0xIDogMTtcbn1cblxuLy8gUmV0dXJucyBhbiBhcnJheSB3aGljaCBjYW4gYmUgY29tcGFyZWQgdG8gb3RoZXIgYXJyYXlzIGFzIGlmIHRoZXkgd2VyZSB0dXBsZXMuXG4vLyBGb3IgZXhhbXBsZSwgWzEsIG51bGxdIDwgWzIsIDFuXSBtZWFucyBudWxsIHNvcnRzIGJlZm9yZSBhbGwgYmlnaW50c1xuLy8gQW5kIFszLCA1XSA8IFszLCA2XSBtZWFucyBmbG9hdHMgc29ydCBhcyBleHBlY3RlZFxuLy8gQW5kIFs3LCBbWzUsIFwiYVwiXV1dIDwgWzcsIFtbNSwgXCJhXCJdLCBbNSwgXCJiXCJdXV0gbWVhbnMgYXJyYXlzIHNvcnQgYXMgZXhwZWN0ZWRcbmZ1bmN0aW9uIG1ha2VDb21wYXJhYmxlKHY6IFZhbHVlIHwgdW5kZWZpbmVkKTogW251bWJlciwgYW55XSB7XG4gIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gWzAsIHVuZGVmaW5lZF07XG4gIH1cbiAgaWYgKHYgPT09IG51bGwpIHtcbiAgICByZXR1cm4gWzEsIG51bGxdO1xuICB9XG4gIGlmICh0eXBlb2YgdiA9PT0gXCJiaWdpbnRcIikge1xuICAgIHJldHVybiBbMiwgdl07XG4gIH1cbiAgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIFszLCB2XTtcbiAgfVxuICBpZiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgcmV0dXJuIFs0LCB2XTtcbiAgfVxuICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gWzUsIHZdO1xuICB9XG4gIGlmICh2IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICByZXR1cm4gWzYsIEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkodikpLm1hcChtYWtlQ29tcGFyYWJsZSldO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgcmV0dXJuIFs3LCB2Lm1hcChtYWtlQ29tcGFyYWJsZSldO1xuICB9XG4gIC8vIE90aGVyd2lzZSwgaXQncyBhbiBQT0pPLlxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModikuc29ydCgpO1xuICBjb25zdCBwb2pvOiBWYWx1ZVtdID0ga2V5cy5tYXAoKGspID0+IFtrLCB2W2tdIV0pO1xuICByZXR1cm4gWzgsIHBvam8ubWFwKG1ha2VDb21wYXJhYmxlKV07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/compare.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/compare_utf8.js":
/*!*************************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/compare_utf8.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compareUTF8: () => (/* binding */ compareUTF8),\n/* harmony export */   greaterThan: () => (/* binding */ greaterThan),\n/* harmony export */   greaterThanEq: () => (/* binding */ greaterThanEq),\n/* harmony export */   lessThan: () => (/* binding */ lessThan),\n/* harmony export */   lessThanEq: () => (/* binding */ lessThanEq),\n/* harmony export */   utf16LengthForCodePoint: () => (/* binding */ utf16LengthForCodePoint)\n/* harmony export */ });\n\nfunction compareUTF8(a, b) {\n    const aLength = a.length;\n    const bLength = b.length;\n    const length = Math.min(aLength, bLength);\n    for(let i = 0; i < length;){\n        const aCodePoint = a.codePointAt(i);\n        const bCodePoint = b.codePointAt(i);\n        if (aCodePoint !== bCodePoint) {\n            if (aCodePoint < 128 && bCodePoint < 128) {\n                return aCodePoint - bCodePoint;\n            }\n            const aLength2 = utf8Bytes(aCodePoint, aBytes);\n            const bLength2 = utf8Bytes(bCodePoint, bBytes);\n            return compareArrays(aBytes, aLength2, bBytes, bLength2);\n        }\n        i += utf16LengthForCodePoint(aCodePoint);\n    }\n    return aLength - bLength;\n}\nfunction compareArrays(a, aLength, b, bLength) {\n    const length = Math.min(aLength, bLength);\n    for(let i = 0; i < length; i++){\n        const aValue = a[i];\n        const bValue = b[i];\n        if (aValue !== bValue) {\n            return aValue - bValue;\n        }\n    }\n    return aLength - bLength;\n}\nfunction utf16LengthForCodePoint(aCodePoint) {\n    return aCodePoint > 65535 ? 2 : 1;\n}\nconst arr = ()=>Array.from({\n        length: 4\n    }, ()=>0);\nconst aBytes = arr();\nconst bBytes = arr();\nfunction utf8Bytes(codePoint, bytes) {\n    if (codePoint < 128) {\n        bytes[0] = codePoint;\n        return 1;\n    }\n    let count;\n    let offset;\n    if (codePoint <= 2047) {\n        count = 1;\n        offset = 192;\n    } else if (codePoint <= 65535) {\n        count = 2;\n        offset = 224;\n    } else if (codePoint <= 1114111) {\n        count = 3;\n        offset = 240;\n    } else {\n        throw new Error(\"Invalid code point\");\n    }\n    bytes[0] = (codePoint >> 6 * count) + offset;\n    let i = 1;\n    for(; count > 0; count--){\n        const temp = codePoint >> 6 * (count - 1);\n        bytes[i++] = 128 | temp & 63;\n    }\n    return i;\n}\nfunction greaterThan(a, b) {\n    return compareUTF8(a, b) > 0;\n}\nfunction greaterThanEq(a, b) {\n    return compareUTF8(a, b) >= 0;\n}\nfunction lessThan(a, b) {\n    return compareUTF8(a, b) < 0;\n}\nfunction lessThanEq(a, b) {\n    return compareUTF8(a, b) <= 0;\n} //# sourceMappingURL=compare_utf8.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9jb21wYXJlX3V0ZjguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQWVPLFNBQVMsWUFBWSxHQUFXLEdBQW1CO0lBQ3hELE1BQU0sVUFBVSxFQUFFO0lBQ2xCLE1BQU0sVUFBVSxFQUFFO0lBQ2xCLE1BQU0sU0FBUyxLQUFLLElBQUksU0FBUyxPQUFPO0lBQ3hDLFFBQVMsSUFBSSxHQUFHLElBQUksUUFBVTtRQUM1QixNQUFNLGFBQWEsRUFBRSxZQUFZLENBQUM7UUFDbEMsTUFBTSxhQUFhLEVBQUUsWUFBWSxDQUFDO1FBQ2xDLElBQUksZUFBZSxZQUFZO1lBRzdCLElBQUksYUFBYSxPQUFRLGFBQWEsS0FBTTtnQkFDMUMsT0FBTyxhQUFhO1lBQ3RCO1lBR0EsTUFBTUEsV0FBVSxVQUFVLFlBQVksTUFBTTtZQUM1QyxNQUFNQyxXQUFVLFVBQVUsWUFBWSxNQUFNO1lBQzVDLE9BQU8sY0FBYyxRQUFRRCxVQUFTLFFBQVFDLFFBQU87UUFDdkQ7UUFFQSxLQUFLLHdCQUF3QixVQUFVO0lBQ3pDO0lBRUEsT0FBTyxVQUFVO0FBQ25CO0FBU0EsU0FBUyxjQUNQLEdBQ0EsU0FDQSxHQUNBLFNBQ0E7SUFDQSxNQUFNLFNBQVMsS0FBSyxJQUFJLFNBQVMsT0FBTztJQUN4QyxRQUFTLElBQUksR0FBRyxJQUFJLFFBQVEsSUFBSztRQUMvQixNQUFNLFNBQVMsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sU0FBUyxFQUFFLENBQUM7UUFDbEIsSUFBSSxXQUFXLFFBQVE7WUFDckIsT0FBTyxTQUFTO1FBQ2xCO0lBQ0Y7SUFDQSxPQUFPLFVBQVU7QUFDbkI7QUFNTyxTQUFTLHdCQUF3QixZQUFvQjtJQUMxRCxPQUFPLGFBQWEsUUFBUyxJQUFJO0FBQ25DO0FBR0EsTUFBTSxNQUFNLElBQU0sTUFBTSxLQUFLO1FBQUUsUUFBUTtJQUFFLEdBQUcsSUFBTSxDQUFDO0FBQ25ELE1BQU0sU0FBUyxJQUFJO0FBQ25CLE1BQU0sU0FBUyxJQUFJO0FBT25CLFNBQVMsVUFBVSxXQUFtQixPQUFpQjtJQUNyRCxJQUFJLFlBQVksS0FBTTtRQUNwQixNQUFNLENBQUMsSUFBSTtRQUNYLE9BQU87SUFDVDtJQUVBLElBQUk7SUFDSixJQUFJO0lBRUosSUFBSSxhQUFhLE1BQVE7UUFDdkIsUUFBUTtRQUNSLFNBQVM7SUFDWCxXQUFXLGFBQWEsT0FBUTtRQUM5QixRQUFRO1FBQ1IsU0FBUztJQUNYLFdBQVcsYUFBYSxTQUFVO1FBQ2hDLFFBQVE7UUFDUixTQUFTO0lBQ1gsT0FBTztRQUNMLE1BQU0sSUFBSSxNQUFNLG9CQUFvQjtJQUN0QztJQUVBLE1BQU0sQ0FBQyxLQUFLLGFBQWMsSUFBSSxTQUFVO0lBQ3hDLElBQUksSUFBSTtJQUNSLE1BQU8sUUFBUSxHQUFHLFFBQVM7UUFDekIsTUFBTSxPQUFPLGFBQWMsS0FBSyxTQUFRO1FBQ3hDLE1BQU0sR0FBRyxJQUFJLE1BQVEsT0FBTztJQUM5QjtJQUNBLE9BQU87QUFDVDtBQU9PLFNBQVMsWUFBWSxHQUFXLEdBQVc7SUFDaEQsT0FBTyxZQUFZLEdBQUcsQ0FBQyxJQUFJO0FBQzdCO0FBT08sU0FBUyxjQUFjLEdBQVcsR0FBVztJQUNsRCxPQUFPLFlBQVksR0FBRyxDQUFDLEtBQUs7QUFDOUI7QUFPTyxTQUFTLFNBQVMsR0FBVyxHQUFXO0lBQzdDLE9BQU8sWUFBWSxHQUFHLENBQUMsSUFBSTtBQUM3QjtBQU9PLFNBQVMsV0FBVyxHQUFXLEdBQVc7SUFDL0MsT0FBTyxZQUFZLEdBQUcsQ0FBQyxLQUFLO0FBQzlCIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3ZhbHVlcy9jb21wYXJlX3V0ZjgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUYWtlbiBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2NpY29ycC9jb21wYXJlLXV0ZjgvYmxvYi9tYWluL0xJQ0VOU0VcbiAqIChBcGFjaGUgVmVyc2lvbiAyLjAsIEphbnVhcnkgMjAwNClcbiAqL1xuXG4vKipcbiAqIFRoaXMgaXMgY29waWVkIGhlcmUgaW5zdGVhZCBvZiBhZGRlZCBhcyBhIGRlcGVuZGVuY3kgdG8gYXZvaWQgYnVuZGxpbmcgaXNzdWVzLlxuICovXG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIEphdmFTY3JpcHQgc3RyaW5ncyBhcyBpZiB0aGV5IHdlcmUgVVRGLTggZW5jb2RlZCBieXRlIGFycmF5cy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gYlxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVVVEY4KGE6IHN0cmluZywgYjogc3RyaW5nKTogbnVtYmVyIHtcbiAgY29uc3QgYUxlbmd0aCA9IGEubGVuZ3RoO1xuICBjb25zdCBiTGVuZ3RoID0gYi5sZW5ndGg7XG4gIGNvbnN0IGxlbmd0aCA9IE1hdGgubWluKGFMZW5ndGgsIGJMZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKSB7XG4gICAgY29uc3QgYUNvZGVQb2ludCA9IGEuY29kZVBvaW50QXQoaSkhO1xuICAgIGNvbnN0IGJDb2RlUG9pbnQgPSBiLmNvZGVQb2ludEF0KGkpITtcbiAgICBpZiAoYUNvZGVQb2ludCAhPT0gYkNvZGVQb2ludCkge1xuICAgICAgLy8gQ29kZSBwb2ludHMgYmVsb3cgMHg4MCBhcmUgcmVwcmVzZW50ZWQgdGhlIHNhbWUgd2F5IGluIFVURi04IGFzIGluXG4gICAgICAvLyBVVEYtMTYuXG4gICAgICBpZiAoYUNvZGVQb2ludCA8IDB4ODAgJiYgYkNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgICAgcmV0dXJuIGFDb2RlUG9pbnQgLSBiQ29kZVBvaW50O1xuICAgICAgfVxuXG4gICAgICAvLyBnZXQgdGhlIFVURi04IGJ5dGVzIGZvciB0aGUgY29kZSBwb2ludHNcbiAgICAgIGNvbnN0IGFMZW5ndGggPSB1dGY4Qnl0ZXMoYUNvZGVQb2ludCwgYUJ5dGVzKTtcbiAgICAgIGNvbnN0IGJMZW5ndGggPSB1dGY4Qnl0ZXMoYkNvZGVQb2ludCwgYkJ5dGVzKTtcbiAgICAgIHJldHVybiBjb21wYXJlQXJyYXlzKGFCeXRlcywgYUxlbmd0aCwgYkJ5dGVzLCBiTGVuZ3RoKTtcbiAgICB9XG5cbiAgICBpICs9IHV0ZjE2TGVuZ3RoRm9yQ29kZVBvaW50KGFDb2RlUG9pbnQpO1xuICB9XG5cbiAgcmV0dXJuIGFMZW5ndGggLSBiTGVuZ3RoO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyW119IGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBhTGVuZ3RoXG4gKiBAcGFyYW0ge251bWJlcltdfSBiXG4gKiBAcGFyYW0ge251bWJlcn0gYkxlbmd0aFxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gY29tcGFyZUFycmF5cyhcbiAgYTogbnVtYmVyW10sXG4gIGFMZW5ndGg6IG51bWJlcixcbiAgYjogbnVtYmVyW10sXG4gIGJMZW5ndGg6IG51bWJlcixcbikge1xuICBjb25zdCBsZW5ndGggPSBNYXRoLm1pbihhTGVuZ3RoLCBiTGVuZ3RoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGFWYWx1ZSA9IGFbaV07XG4gICAgY29uc3QgYlZhbHVlID0gYltpXTtcbiAgICBpZiAoYVZhbHVlICE9PSBiVmFsdWUpIHtcbiAgICAgIHJldHVybiBhVmFsdWUgLSBiVmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBhTGVuZ3RoIC0gYkxlbmd0aDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gYUNvZGVQb2ludFxuICogQHJldHVybnMge251bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjE2TGVuZ3RoRm9yQ29kZVBvaW50KGFDb2RlUG9pbnQ6IG51bWJlcikge1xuICByZXR1cm4gYUNvZGVQb2ludCA+IDB4ZmZmZiA/IDIgOiAxO1xufVxuXG4vLyAyIHByZWFsbG9jYXRlZCBhcnJheXMgZm9yIHV0ZjhCeXRlcy5cbmNvbnN0IGFyciA9ICgpID0+IEFycmF5LmZyb20oeyBsZW5ndGg6IDQgfSwgKCkgPT4gMCk7XG5jb25zdCBhQnl0ZXMgPSBhcnIoKTtcbmNvbnN0IGJCeXRlcyA9IGFycigpO1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlUG9pbnRcbiAqIEBwYXJhbSB7bnVtYmVyW119IGJ5dGVzXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiB1dGY4Qnl0ZXMoY29kZVBvaW50OiBudW1iZXIsIGJ5dGVzOiBudW1iZXJbXSkge1xuICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgIGJ5dGVzWzBdID0gY29kZVBvaW50O1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgbGV0IGNvdW50O1xuICBsZXQgb2Zmc2V0O1xuXG4gIGlmIChjb2RlUG9pbnQgPD0gMHgwN2ZmKSB7XG4gICAgY291bnQgPSAxO1xuICAgIG9mZnNldCA9IDB4YzA7XG4gIH0gZWxzZSBpZiAoY29kZVBvaW50IDw9IDB4ZmZmZikge1xuICAgIGNvdW50ID0gMjtcbiAgICBvZmZzZXQgPSAweGUwO1xuICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8PSAweDEwZmZmZikge1xuICAgIGNvdW50ID0gMztcbiAgICBvZmZzZXQgPSAweGYwO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29kZSBwb2ludFwiKTtcbiAgfVxuXG4gIGJ5dGVzWzBdID0gKGNvZGVQb2ludCA+PiAoNiAqIGNvdW50KSkgKyBvZmZzZXQ7XG4gIGxldCBpID0gMTtcbiAgZm9yICg7IGNvdW50ID4gMDsgY291bnQtLSkge1xuICAgIGNvbnN0IHRlbXAgPSBjb2RlUG9pbnQgPj4gKDYgKiAoY291bnQgLSAxKSk7XG4gICAgYnl0ZXNbaSsrXSA9IDB4ODAgfCAodGVtcCAmIDB4M2YpO1xuICB9XG4gIHJldHVybiBpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gYlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncmVhdGVyVGhhbihhOiBzdHJpbmcsIGI6IHN0cmluZykge1xuICByZXR1cm4gY29tcGFyZVVURjgoYSwgYikgPiAwO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gYlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncmVhdGVyVGhhbkVxKGE6IHN0cmluZywgYjogc3RyaW5nKSB7XG4gIHJldHVybiBjb21wYXJlVVRGOChhLCBiKSA+PSAwO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gYlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXNzVGhhbihhOiBzdHJpbmcsIGI6IHN0cmluZykge1xuICByZXR1cm4gY29tcGFyZVVURjgoYSwgYikgPCAwO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gYlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXNzVGhhbkVxKGE6IHN0cmluZywgYjogc3RyaW5nKSB7XG4gIHJldHVybiBjb21wYXJlVVRGOChhLCBiKSA8PSAwO1xufVxuIl0sIm5hbWVzIjpbImFMZW5ndGgiLCJiTGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/compare_utf8.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/errors.js":
/*!*******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/errors.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConvexError: () => (/* binding */ ConvexError)\n/* harmony export */ });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nvar _a, _b;\n\nconst IDENTIFYING_FIELD = Symbol.for(\"ConvexError\");\nclass ConvexError extends (_b = Error, _a = IDENTIFYING_FIELD, _b) {\n    constructor(data){\n        super(typeof data === \"string\" ? data : (0,_value_js__WEBPACK_IMPORTED_MODULE_0__.stringifyValueForError)(data));\n        __publicField(this, \"name\", \"ConvexError\");\n        __publicField(this, \"data\");\n        __publicField(this, _a, true);\n        this.data = data;\n    }\n} //# sourceMappingURL=errors.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUE4QztBQUU5QyxNQUFNLG9CQUFvQixPQUFPLElBQUksYUFBYTtBQUUzQyxNQUFNLHFCQUF5QyxZQUduRCx3QkFIbUQsS0FBTTtJQUsxRCxZQUFZLEtBQWE7UUFDdkIsTUFBTSxPQUFPLFNBQVMsV0FBVyxPQUFPLGlFQUFzQixDQUFDLElBQUksQ0FBQztRQUx0RSw0QkFBTztRQUNQO1FBQ0Esb0JBQUMsSUFBcUI7UUFJcEIsS0FBSyxPQUFPO0lBQ2Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy92YWx1ZXMvZXJyb3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbHVlLCBzdHJpbmdpZnlWYWx1ZUZvckVycm9yIH0gZnJvbSBcIi4vdmFsdWUuanNcIjtcblxuY29uc3QgSURFTlRJRllJTkdfRklFTEQgPSBTeW1ib2wuZm9yKFwiQ29udmV4RXJyb3JcIik7XG5cbmV4cG9ydCBjbGFzcyBDb252ZXhFcnJvcjxURGF0YSBleHRlbmRzIFZhbHVlPiBleHRlbmRzIEVycm9yIHtcbiAgbmFtZSA9IFwiQ29udmV4RXJyb3JcIjtcbiAgZGF0YTogVERhdGE7XG4gIFtJREVOVElGWUlOR19GSUVMRF0gPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IFREYXRhKSB7XG4gICAgc3VwZXIodHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgPyBkYXRhIDogc3RyaW5naWZ5VmFsdWVGb3JFcnJvcihkYXRhKSk7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/errors.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/index.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Base64: () => (/* reexport module object */ _base64_js__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   ConvexError: () => (/* reexport safe */ _errors_js__WEBPACK_IMPORTED_MODULE_3__.ConvexError),\n/* harmony export */   asObjectValidator: () => (/* reexport safe */ _validator_js__WEBPACK_IMPORTED_MODULE_1__.asObjectValidator),\n/* harmony export */   compareValues: () => (/* reexport safe */ _compare_js__WEBPACK_IMPORTED_MODULE_4__.compareValues),\n/* harmony export */   convexToJson: () => (/* reexport safe */ _value_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson),\n/* harmony export */   jsonToConvex: () => (/* reexport safe */ _value_js__WEBPACK_IMPORTED_MODULE_0__.jsonToConvex),\n/* harmony export */   v: () => (/* reexport safe */ _validator_js__WEBPACK_IMPORTED_MODULE_1__.v)\n/* harmony export */ });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validator.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validator.js\");\n/* harmony import */ var _base64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base64.js */ \"(ssr)/./node_modules/convex/dist/esm/values/base64.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./errors.js */ \"(ssr)/./node_modules/convex/dist/esm/values/errors.js\");\n/* harmony import */ var _compare_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./compare.js */ \"(ssr)/./node_modules/convex/dist/esm/values/compare.js\");\n\n\n\n\n\n\n //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBUTJDO0FBT047QUE2QmI7QUFDZjtBQUVLO0FBQ2dCIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3ZhbHVlcy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFV0aWxpdGllcyBmb3Igd29ya2luZyB3aXRoIHZhbHVlcyBzdG9yZWQgaW4gQ29udmV4LlxuICpcbiAqIFlvdSBjYW4gc2VlIHRoZSBmdWxsIHNldCBvZiBzdXBwb3J0ZWQgdHlwZXMgYXRcbiAqIFtUeXBlc10oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvdXNpbmcvdHlwZXMpLlxuICogQG1vZHVsZVxuICovXG5cbmV4cG9ydCB7IGNvbnZleFRvSnNvbiwganNvblRvQ29udmV4IH0gZnJvbSBcIi4vdmFsdWUuanNcIjtcbmV4cG9ydCB0eXBlIHtcbiAgSWQgYXMgR2VuZXJpY0lkLFxuICBKU09OVmFsdWUsXG4gIFZhbHVlLFxuICBOdW1lcmljVmFsdWUsXG59IGZyb20gXCIuL3ZhbHVlLmpzXCI7XG5leHBvcnQgeyB2LCBhc09iamVjdFZhbGlkYXRvciB9IGZyb20gXCIuL3ZhbGlkYXRvci5qc1wiO1xuZXhwb3J0IHR5cGUge1xuICBBc09iamVjdFZhbGlkYXRvcixcbiAgR2VuZXJpY1ZhbGlkYXRvcixcbiAgT2JqZWN0VHlwZSxcbiAgUHJvcGVydHlWYWxpZGF0b3JzLFxufSBmcm9tIFwiLi92YWxpZGF0b3IuanNcIjtcbmV4cG9ydCB0eXBlIHtcbiAgVmFsaWRhdG9ySlNPTixcbiAgUmVjb3JkS2V5VmFsaWRhdG9ySlNPTixcbiAgUmVjb3JkVmFsdWVWYWxpZGF0b3JKU09OLFxuICBPYmplY3RGaWVsZFR5cGUsXG4gIFZhbGlkYXRvcixcbiAgT3B0aW9uYWxQcm9wZXJ0eSxcbiAgVklkLFxuICBWRmxvYXQ2NCxcbiAgVkludDY0LFxuICBWQm9vbGVhbixcbiAgVkJ5dGVzLFxuICBWU3RyaW5nLFxuICBWTnVsbCxcbiAgVkFueSxcbiAgVk9iamVjdCxcbiAgVkxpdGVyYWwsXG4gIFZBcnJheSxcbiAgVlJlY29yZCxcbiAgVlVuaW9uLFxuICBWT3B0aW9uYWwsXG59IGZyb20gXCIuL3ZhbGlkYXRvcnMuanNcIjtcbmltcG9ydCAqIGFzIEJhc2U2NCBmcm9tIFwiLi9iYXNlNjQuanNcIjtcbmV4cG9ydCB7IEJhc2U2NCB9O1xuZXhwb3J0IHR5cGUgeyBJbmZlciB9IGZyb20gXCIuL3ZhbGlkYXRvci5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5leHBvcnQgeyBjb21wYXJlVmFsdWVzIH0gZnJvbSBcIi4vY29tcGFyZS5qc1wiO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/validator.js":
/*!**********************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/validator.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   asObjectValidator: () => (/* binding */ asObjectValidator),\n/* harmony export */   isValidator: () => (/* binding */ isValidator),\n/* harmony export */   v: () => (/* binding */ v)\n/* harmony export */ });\n/* harmony import */ var _validators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./validators.js */ \"(ssr)/./node_modules/convex/dist/esm/values/validators.js\");\n\n\nfunction isValidator(v2) {\n    return !!v2.isConvexValidator;\n}\nfunction asObjectValidator(obj) {\n    if (isValidator(obj)) {\n        return obj;\n    } else {\n        return v.object(obj);\n    }\n}\nconst v = {\n    /**\n   * Validates that the value corresponds to an ID of a document in given table.\n   * @param tableName The name of the table.\n   */ id: (tableName)=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VId({\n            isOptional: \"required\",\n            tableName\n        });\n    },\n    /**\n   * Validates that the value is of type Null.\n   */ null: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VNull({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is of Convex type Float64 (Number in JS).\n   *\n   * Alias for `v.float64()`\n   */ number: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VFloat64({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is of Convex type Float64 (Number in JS).\n   */ float64: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VFloat64({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * @deprecated Use `v.int64()` instead\n   */ bigint: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VInt64({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is of Convex type Int64 (BigInt in JS).\n   */ int64: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VInt64({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is of type Boolean.\n   */ boolean: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VBoolean({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is of type String.\n   */ string: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VString({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is of Convex type Bytes (constructed in JS via `ArrayBuffer`).\n   */ bytes: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VBytes({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Validates that the value is equal to the given literal value.\n   * @param literal The literal value to compare against.\n   */ literal: (literal)=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VLiteral({\n            isOptional: \"required\",\n            value: literal\n        });\n    },\n    /**\n   * Validates that the value is an Array of the given element type.\n   * @param element The validator for the elements of the array.\n   */ array: (element)=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VArray({\n            isOptional: \"required\",\n            element\n        });\n    },\n    /**\n   * Validates that the value is an Object with the given properties.\n   * @param fields An object specifying the validator for each property.\n   */ object: (fields)=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VObject({\n            isOptional: \"required\",\n            fields\n        });\n    },\n    /**\n   * Validates that the value is a Record with keys and values that match the given types.\n   * @param keys The validator for the keys of the record. This cannot contain string literals.\n   * @param values The validator for the values of the record.\n   */ record: (keys, values)=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VRecord({\n            isOptional: \"required\",\n            key: keys,\n            value: values\n        });\n    },\n    /**\n   * Validates that the value matches one of the given validators.\n   * @param members The validators to match against.\n   */ union: (...members)=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VUnion({\n            isOptional: \"required\",\n            members\n        });\n    },\n    /**\n   * Does not validate the value.\n   */ any: ()=>{\n        return new _validators_js__WEBPACK_IMPORTED_MODULE_0__.VAny({\n            isOptional: \"required\"\n        });\n    },\n    /**\n   * Allows not specifying a value for a property in an Object.\n   * @param value The property value validator to make optional.\n   *\n   * ```typescript\n   * const objectWithOptionalFields = v.object({\n   *   requiredField: v.string(),\n   *   optionalField: v.optional(v.string()),\n   * });\n   * ```\n   */ optional: (value)=>{\n        return value.asOptional();\n    },\n    /**\n   * Allows specifying a value or null.\n   */ nullable: (value)=>{\n        return v.union(value, v.null());\n    }\n}; //# sourceMappingURL=validator.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy92YWxpZGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFtQk87QUFTQSxTQUFTLFlBQVlBLEVBQUFBLEVBQStCO0lBQ3pELE9BQU8sQ0FBQyxDQUFDQSxHQUFFO0FBQ2I7QUFRTyxTQUFTLGtCQUdkLEtBS1U7SUFDVixJQUFJLFlBQVksR0FBRyxHQUFHO1FBQ3BCLE9BQU87SUFDVCxPQUFPO1FBQ0wsT0FBTyxFQUFFLE9BQU8sR0FBeUI7SUFDM0M7QUFDRjtBQTJCTyxNQUFNLElBQUk7SUFBQTs7O0dBQUEsR0FLZixJQUFJLENBQTJCO1FBQzdCLE9BQU8sSUFBSSwrQ0FBRyxDQUF1QjtZQUNuQyxZQUFZO1lBQ1o7UUFDRixDQUFDO0lBQ0g7SUFBQTs7R0FBQSxHQUtBLE1BQU07UUFDSixPQUFPLElBQUksaURBQUssQ0FBQztZQUFFLFlBQVk7UUFBVyxDQUFDO0lBQzdDO0lBQUE7Ozs7R0FBQSxHQU9BLFFBQVE7UUFDTixPQUFPLElBQUksb0RBQVEsQ0FBQztZQUFFLFlBQVk7UUFBVyxDQUFDO0lBQ2hEO0lBQUE7O0dBQUEsR0FLQSxTQUFTO1FBQ1AsT0FBTyxJQUFJLG9EQUFRLENBQUM7WUFBRSxZQUFZO1FBQVcsQ0FBQztJQUNoRDtJQUFBOztHQUFBLEdBS0EsUUFBUTtRQUNOLE9BQU8sSUFBSSxrREFBTSxDQUFDO1lBQUUsWUFBWTtRQUFXLENBQUM7SUFDOUM7SUFBQTs7R0FBQSxHQUtBLE9BQU87UUFDTCxPQUFPLElBQUksa0RBQU0sQ0FBQztZQUFFLFlBQVk7UUFBVyxDQUFDO0lBQzlDO0lBQUE7O0dBQUEsR0FLQSxTQUFTO1FBQ1AsT0FBTyxJQUFJLG9EQUFRLENBQUM7WUFBRSxZQUFZO1FBQVcsQ0FBQztJQUNoRDtJQUFBOztHQUFBLEdBS0EsUUFBUTtRQUNOLE9BQU8sSUFBSSxtREFBTyxDQUFDO1lBQUUsWUFBWTtRQUFXLENBQUM7SUFDL0M7SUFBQTs7R0FBQSxHQUtBLE9BQU87UUFDTCxPQUFPLElBQUksa0RBQU0sQ0FBQztZQUFFLFlBQVk7UUFBVyxDQUFDO0lBQzlDO0lBQUE7OztHQUFBLEdBTUEsU0FBUyxDQUErQztRQUN0RCxPQUFPLElBQUksb0RBQVEsQ0FBSTtZQUFFLFlBQVk7WUFBWSxPQUFPO1FBQVEsQ0FBQztJQUNuRTtJQUFBOzs7R0FBQSxHQU1BLE9BQU8sQ0FBNEM7UUFDakQsT0FBTyxJQUFJLGtEQUFNLENBQWlCO1lBQUUsWUFBWTtZQUFZO1FBQVEsQ0FBQztJQUN2RTtJQUFBOzs7R0FBQSxHQU1BLFFBQVEsQ0FBK0I7UUFDckMsT0FBTyxJQUFJLG1EQUFPLENBQW1CO1lBQUUsWUFBWTtZQUFZO1FBQU8sQ0FBQztJQUN6RTtJQUFBOzs7O0dBQUEsR0FPQSxRQUFRLENBSU4sTUFDQTtRQUVBLE9BQU8sSUFBSSxtREFBTyxDQUFnRDtZQUNoRSxZQUFZO1lBQ1osS0FBSztZQUNMLE9BQU87UUFDVCxDQUFDO0lBQ0g7SUFBQTs7O0dBQUEsR0FNQSxPQUFPLElBQWlEO1FBQ3RELE9BQU8sSUFBSSxrREFBTSxDQUF1QjtZQUN0QyxZQUFZO1lBQ1o7UUFDRixDQUFDO0lBQ0g7SUFBQTs7R0FBQSxHQUtBLEtBQUs7UUFDSCxPQUFPLElBQUksZ0RBQUksQ0FBQztZQUFFLFlBQVk7UUFBVyxDQUFDO0lBQzVDO0lBQUE7Ozs7Ozs7Ozs7R0FBQSxHQWFBLFVBQVUsQ0FBNkI7UUFDckMsT0FBTyxNQUFNLFdBQVc7SUFDMUI7SUFBQTs7R0FBQSxHQUtBLFVBQVUsQ0FBNEM7UUFDcEQsT0FBTyxFQUFFLE1BQU0sT0FBTyxFQUFFLEtBQUssQ0FBQztJQUNoQztBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3ZhbHVlcy92YWxpZGF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhwYW5kIH0gZnJvbSBcIi4uL3R5cGVfdXRpbHMuanNcIjtcbmltcG9ydCB7IEdlbmVyaWNJZCB9IGZyb20gXCIuL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBPcHRpb25hbFByb3BlcnR5LFxuICBWQW55LFxuICBWQXJyYXksXG4gIFZCb29sZWFuLFxuICBWQnl0ZXMsXG4gIFZGbG9hdDY0LFxuICBWSWQsXG4gIFZJbnQ2NCxcbiAgVkxpdGVyYWwsXG4gIFZOdWxsLFxuICBWT2JqZWN0LFxuICBWT3B0aW9uYWwsXG4gIFZSZWNvcmQsXG4gIFZTdHJpbmcsXG4gIFZVbmlvbixcbiAgVmFsaWRhdG9yLFxufSBmcm9tIFwiLi92YWxpZGF0b3JzLmpzXCI7XG5cbi8qKlxuICogVGhlIHR5cGUgdGhhdCBhbGwgdmFsaWRhdG9ycyBtdXN0IGV4dGVuZC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIEdlbmVyaWNWYWxpZGF0b3IgPSBWYWxpZGF0b3I8YW55LCBhbnksIGFueT47XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkYXRvcih2OiBhbnkpOiB2IGlzIEdlbmVyaWNWYWxpZGF0b3Ige1xuICByZXR1cm4gISF2LmlzQ29udmV4VmFsaWRhdG9yO1xufVxuXG4vKipcbiAqIENvZXJjZSBhbiBvYmplY3Qgd2l0aCB2YWxpZGF0b3JzIGFzIHByb3BlcnRpZXMgdG8gYSB2YWxpZGF0b3IuXG4gKiBJZiBhIHZhbGlkYXRvciBpcyBwYXNzZWQsIHJldHVybiBpdC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc09iamVjdFZhbGlkYXRvcjxcbiAgViBleHRlbmRzIFZhbGlkYXRvcjxhbnksIGFueSwgYW55PiB8IFByb3BlcnR5VmFsaWRhdG9ycyxcbj4oXG4gIG9iajogVixcbik6IFYgZXh0ZW5kcyBWYWxpZGF0b3I8YW55LCBhbnksIGFueT5cbiAgPyBWXG4gIDogViBleHRlbmRzIFByb3BlcnR5VmFsaWRhdG9yc1xuICAgID8gVmFsaWRhdG9yPE9iamVjdFR5cGU8Vj4+XG4gICAgOiBuZXZlciB7XG4gIGlmIChpc1ZhbGlkYXRvcihvYmopKSB7XG4gICAgcmV0dXJuIG9iaiBhcyBhbnk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHYub2JqZWN0KG9iaiBhcyBQcm9wZXJ0eVZhbGlkYXRvcnMpIGFzIGFueTtcbiAgfVxufVxuXG4vKipcbiAqIENvZXJjZSBhbiBvYmplY3Qgd2l0aCB2YWxpZGF0b3JzIGFzIHByb3BlcnRpZXMgdG8gYSB2YWxpZGF0b3IuXG4gKiBJZiBhIHZhbGlkYXRvciBpcyBwYXNzZWQsIHJldHVybiBpdC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIEFzT2JqZWN0VmFsaWRhdG9yPFxuICBWIGV4dGVuZHMgVmFsaWRhdG9yPGFueSwgYW55LCBhbnk+IHwgUHJvcGVydHlWYWxpZGF0b3JzLFxuPiA9XG4gIFYgZXh0ZW5kcyBWYWxpZGF0b3I8YW55LCBhbnksIGFueT5cbiAgICA/IFZcbiAgICA6IFYgZXh0ZW5kcyBQcm9wZXJ0eVZhbGlkYXRvcnNcbiAgICAgID8gVmFsaWRhdG9yPE9iamVjdFR5cGU8Vj4+XG4gICAgICA6IG5ldmVyO1xuXG4vKipcbiAqIFRoZSB2YWxpZGF0b3IgYnVpbGRlci5cbiAqXG4gKiBUaGlzIGJ1aWxkZXIgYWxsb3dzIHlvdSB0byBidWlsZCB2YWxpZGF0b3JzIGZvciBDb252ZXggdmFsdWVzLlxuICpcbiAqIFZhbGlkYXRvcnMgY2FuIGJlIHVzZWQgaW4gW3NjaGVtYSBkZWZpbml0aW9uc10oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvZGF0YWJhc2Uvc2NoZW1hcylcbiAqIGFuZCBhcyBpbnB1dCB2YWxpZGF0b3JzIGZvciBDb252ZXggZnVuY3Rpb25zLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IHYgPSB7XG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgY29ycmVzcG9uZHMgdG8gYW4gSUQgb2YgYSBkb2N1bWVudCBpbiBnaXZlbiB0YWJsZS5cbiAgICogQHBhcmFtIHRhYmxlTmFtZSBUaGUgbmFtZSBvZiB0aGUgdGFibGUuXG4gICAqL1xuICBpZDogPFRhYmxlTmFtZSBleHRlbmRzIHN0cmluZz4odGFibGVOYW1lOiBUYWJsZU5hbWUpID0+IHtcbiAgICByZXR1cm4gbmV3IFZJZDxHZW5lcmljSWQ8VGFibGVOYW1lPj4oe1xuICAgICAgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiLFxuICAgICAgdGFibGVOYW1lLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgb2YgdHlwZSBOdWxsLlxuICAgKi9cbiAgbnVsbDogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVk51bGwoeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBvZiBDb252ZXggdHlwZSBGbG9hdDY0IChOdW1iZXIgaW4gSlMpLlxuICAgKlxuICAgKiBBbGlhcyBmb3IgYHYuZmxvYXQ2NCgpYFxuICAgKi9cbiAgbnVtYmVyOiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWRmxvYXQ2NCh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiB9KTtcbiAgfSxcblxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIG9mIENvbnZleCB0eXBlIEZsb2F0NjQgKE51bWJlciBpbiBKUykuXG4gICAqL1xuICBmbG9hdDY0OiAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWRmxvYXQ2NCh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGB2LmludDY0KClgIGluc3RlYWRcbiAgICovXG4gIGJpZ2ludDogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkludDY0KHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgb2YgQ29udmV4IHR5cGUgSW50NjQgKEJpZ0ludCBpbiBKUykuXG4gICAqL1xuICBpbnQ2NDogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkludDY0KHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgb2YgdHlwZSBCb29sZWFuLlxuICAgKi9cbiAgYm9vbGVhbjogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkJvb2xlYW4oeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBpcyBvZiB0eXBlIFN0cmluZy5cbiAgICovXG4gIHN0cmluZzogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVlN0cmluZyh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiB9KTtcbiAgfSxcblxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIGlzIG9mIENvbnZleCB0eXBlIEJ5dGVzIChjb25zdHJ1Y3RlZCBpbiBKUyB2aWEgYEFycmF5QnVmZmVyYCkuXG4gICAqL1xuICBieXRlczogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkJ5dGVzKHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgZXF1YWwgdG8gdGhlIGdpdmVuIGxpdGVyYWwgdmFsdWUuXG4gICAqIEBwYXJhbSBsaXRlcmFsIFRoZSBsaXRlcmFsIHZhbHVlIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICovXG4gIGxpdGVyYWw6IDxUIGV4dGVuZHMgc3RyaW5nIHwgbnVtYmVyIHwgYmlnaW50IHwgYm9vbGVhbj4obGl0ZXJhbDogVCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkxpdGVyYWw8VD4oeyBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIsIHZhbHVlOiBsaXRlcmFsIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgYW4gQXJyYXkgb2YgdGhlIGdpdmVuIGVsZW1lbnQgdHlwZS5cbiAgICogQHBhcmFtIGVsZW1lbnQgVGhlIHZhbGlkYXRvciBmb3IgdGhlIGVsZW1lbnRzIG9mIHRoZSBhcnJheS5cbiAgICovXG4gIGFycmF5OiA8VCBleHRlbmRzIFZhbGlkYXRvcjxhbnksIFwicmVxdWlyZWRcIiwgYW55Pj4oZWxlbWVudDogVCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkFycmF5PFRbXCJ0eXBlXCJdW10sIFQ+KHsgaXNPcHRpb25hbDogXCJyZXF1aXJlZFwiLCBlbGVtZW50IH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgYW4gT2JqZWN0IHdpdGggdGhlIGdpdmVuIHByb3BlcnRpZXMuXG4gICAqIEBwYXJhbSBmaWVsZHMgQW4gb2JqZWN0IHNwZWNpZnlpbmcgdGhlIHZhbGlkYXRvciBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICovXG4gIG9iamVjdDogPFQgZXh0ZW5kcyBQcm9wZXJ0eVZhbGlkYXRvcnM+KGZpZWxkczogVCkgPT4ge1xuICAgIHJldHVybiBuZXcgVk9iamVjdDxPYmplY3RUeXBlPFQ+LCBUPih7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiwgZmllbGRzIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgaXMgYSBSZWNvcmQgd2l0aCBrZXlzIGFuZCB2YWx1ZXMgdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gdHlwZXMuXG4gICAqIEBwYXJhbSBrZXlzIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSBrZXlzIG9mIHRoZSByZWNvcmQuIFRoaXMgY2Fubm90IGNvbnRhaW4gc3RyaW5nIGxpdGVyYWxzLlxuICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSB2YWx1ZXMgb2YgdGhlIHJlY29yZC5cbiAgICovXG4gIHJlY29yZDogPFxuICAgIEtleSBleHRlbmRzIFZhbGlkYXRvcjxzdHJpbmcsIFwicmVxdWlyZWRcIiwgYW55PixcbiAgICBWYWx1ZSBleHRlbmRzIFZhbGlkYXRvcjxhbnksIFwicmVxdWlyZWRcIiwgYW55PixcbiAgPihcbiAgICBrZXlzOiBLZXksXG4gICAgdmFsdWVzOiBWYWx1ZSxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBWUmVjb3JkPFJlY29yZDxJbmZlcjxLZXk+LCBWYWx1ZVtcInR5cGVcIl0+LCBLZXksIFZhbHVlPih7XG4gICAgICBpc09wdGlvbmFsOiBcInJlcXVpcmVkXCIsXG4gICAgICBrZXk6IGtleXMsXG4gICAgICB2YWx1ZTogdmFsdWVzLFxuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhhdCB0aGUgdmFsdWUgbWF0Y2hlcyBvbmUgb2YgdGhlIGdpdmVuIHZhbGlkYXRvcnMuXG4gICAqIEBwYXJhbSBtZW1iZXJzIFRoZSB2YWxpZGF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXG4gICAqL1xuICB1bmlvbjogPFQgZXh0ZW5kcyBWYWxpZGF0b3I8YW55LCBcInJlcXVpcmVkXCIsIGFueT5bXT4oLi4ubWVtYmVyczogVCkgPT4ge1xuICAgIHJldHVybiBuZXcgVlVuaW9uPFRbbnVtYmVyXVtcInR5cGVcIl0sIFQ+KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIixcbiAgICAgIG1lbWJlcnMsXG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERvZXMgbm90IHZhbGlkYXRlIHRoZSB2YWx1ZS5cbiAgICovXG4gIGFueTogKCkgPT4ge1xuICAgIHJldHVybiBuZXcgVkFueSh7IGlzT3B0aW9uYWw6IFwicmVxdWlyZWRcIiB9KTtcbiAgfSxcblxuICAvKipcbiAgICogQWxsb3dzIG5vdCBzcGVjaWZ5aW5nIGEgdmFsdWUgZm9yIGEgcHJvcGVydHkgaW4gYW4gT2JqZWN0LlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHByb3BlcnR5IHZhbHVlIHZhbGlkYXRvciB0byBtYWtlIG9wdGlvbmFsLlxuICAgKlxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IG9iamVjdFdpdGhPcHRpb25hbEZpZWxkcyA9IHYub2JqZWN0KHtcbiAgICogICByZXF1aXJlZEZpZWxkOiB2LnN0cmluZygpLFxuICAgKiAgIG9wdGlvbmFsRmllbGQ6IHYub3B0aW9uYWwodi5zdHJpbmcoKSksXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIG9wdGlvbmFsOiA8VCBleHRlbmRzIEdlbmVyaWNWYWxpZGF0b3I+KHZhbHVlOiBUKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlLmFzT3B0aW9uYWwoKSBhcyBWT3B0aW9uYWw8VD47XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFsbG93cyBzcGVjaWZ5aW5nIGEgdmFsdWUgb3IgbnVsbC5cbiAgICovXG4gIG51bGxhYmxlOiA8VCBleHRlbmRzIFZhbGlkYXRvcjxhbnksIFwicmVxdWlyZWRcIiwgYW55Pj4odmFsdWU6IFQpID0+IHtcbiAgICByZXR1cm4gdi51bmlvbih2YWx1ZSwgdi5udWxsKCkpO1xuICB9LFxufTtcblxuLyoqXG4gKiBWYWxpZGF0b3JzIGZvciBlYWNoIHByb3BlcnR5IG9mIGFuIG9iamVjdC5cbiAqXG4gKiBUaGlzIGlzIHJlcHJlc2VudGVkIGFzIGFuIG9iamVjdCBtYXBwaW5nIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIGl0c1xuICoge0BsaW5rIFZhbGlkYXRvcn0uXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBQcm9wZXJ0eVZhbGlkYXRvcnMgPSBSZWNvcmQ8XG4gIHN0cmluZyxcbiAgVmFsaWRhdG9yPGFueSwgT3B0aW9uYWxQcm9wZXJ0eSwgYW55PlxuPjtcblxuLyoqXG4gKiBDb21wdXRlIHRoZSB0eXBlIG9mIGFuIG9iamVjdCBmcm9tIHtAbGluayBQcm9wZXJ0eVZhbGlkYXRvcnN9LlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgT2JqZWN0VHlwZTxGaWVsZHMgZXh0ZW5kcyBQcm9wZXJ0eVZhbGlkYXRvcnM+ID0gRXhwYW5kPFxuICAvLyBNYXAgZWFjaCBrZXkgdG8gdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgdmFsaWRhdG9yJ3MgdHlwZSBtYWtpbmdcbiAgLy8gdGhlIG9wdGlvbmFsIG9uZXMgb3B0aW9uYWwuXG4gIHtcbiAgICAvLyBUaGlzIGBFeGNsdWRlPC4uLiwgdW5kZWZpbmVkPmAgZG9lcyBub3RoaW5nIHVubGVzc1xuICAgIC8vIHRoZSB0c2NvbmZpZy5qc29uIG9wdGlvbiBgXCJleGFjdE9wdGlvbmFsUHJvcGVydHlUeXBlc1wiOiB0cnVlLGBcbiAgICAvLyBpcyB1c2VkLiBXaGVuIGl0IGlzIGl0IHJlc3VsdHMgaW4gYSBtb3JlIGFjY3VyYXRlIHR5cGUuXG4gICAgLy8gV2hlbiBpdCBpcyBub3QgdGhlIGBFeGNsdWRlYCByZW1vdmVzIGB1bmRlZmluZWRgIGJ1dCBpdCBpc1xuICAgIC8vIGFkZGVkIGFnYWluIGJ5IHRoZSBvcHRpb25hbCBwcm9wZXJ0eS5cbiAgICBbUHJvcGVydHkgaW4gT3B0aW9uYWxLZXlzPEZpZWxkcz5dPzogRXhjbHVkZTxcbiAgICAgIEluZmVyPEZpZWxkc1tQcm9wZXJ0eV0+LFxuICAgICAgdW5kZWZpbmVkXG4gICAgPjtcbiAgfSAmIHtcbiAgICBbUHJvcGVydHkgaW4gUmVxdWlyZWRLZXlzPEZpZWxkcz5dOiBJbmZlcjxGaWVsZHNbUHJvcGVydHldPjtcbiAgfVxuPjtcblxudHlwZSBPcHRpb25hbEtleXM8UHJvcGVydHlWYWxpZGF0b3JzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgR2VuZXJpY1ZhbGlkYXRvcj4+ID1cbiAge1xuICAgIFtQcm9wZXJ0eSBpbiBrZXlvZiBQcm9wZXJ0eVZhbGlkYXRvcnNdOiBQcm9wZXJ0eVZhbGlkYXRvcnNbUHJvcGVydHldW1wiaXNPcHRpb25hbFwiXSBleHRlbmRzIFwib3B0aW9uYWxcIlxuICAgICAgPyBQcm9wZXJ0eVxuICAgICAgOiBuZXZlcjtcbiAgfVtrZXlvZiBQcm9wZXJ0eVZhbGlkYXRvcnNdO1xuXG50eXBlIFJlcXVpcmVkS2V5czxQcm9wZXJ0eVZhbGlkYXRvcnMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBHZW5lcmljVmFsaWRhdG9yPj4gPVxuICBFeGNsdWRlPGtleW9mIFByb3BlcnR5VmFsaWRhdG9ycywgT3B0aW9uYWxLZXlzPFByb3BlcnR5VmFsaWRhdG9ycz4+O1xuXG4vKipcbiAqIEV4dHJhY3QgYSBUeXBlU2NyaXB0IHR5cGUgZnJvbSBhIHZhbGlkYXRvci5cbiAqXG4gKiBFeGFtcGxlIHVzYWdlOlxuICogYGBgdHNcbiAqIGNvbnN0IG9iamVjdFNjaGVtYSA9IHYub2JqZWN0KHtcbiAqICAgcHJvcGVydHk6IHYuc3RyaW5nKCksXG4gKiB9KTtcbiAqIHR5cGUgTXlPYmplY3QgPSBJbmZlcjx0eXBlb2Ygb2JqZWN0U2NoZW1hPjsgLy8geyBwcm9wZXJ0eTogc3RyaW5nIH1cbiAqIGBgYFxuICogQHR5cGVQYXJhbSBWIC0gVGhlIHR5cGUgb2YgYSB7QGxpbmsgVmFsaWRhdG9yfSBjb25zdHJ1Y3RlZCB3aXRoIHtAbGluayB2fS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIEluZmVyPFQgZXh0ZW5kcyBWYWxpZGF0b3I8YW55LCBPcHRpb25hbFByb3BlcnR5LCBhbnk+PiA9IFRbXCJ0eXBlXCJdO1xuIl0sIm5hbWVzIjpbInYiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/validator.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/validators.js":
/*!***********************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/validators.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VAny: () => (/* binding */ VAny),\n/* harmony export */   VArray: () => (/* binding */ VArray),\n/* harmony export */   VBoolean: () => (/* binding */ VBoolean),\n/* harmony export */   VBytes: () => (/* binding */ VBytes),\n/* harmony export */   VFloat64: () => (/* binding */ VFloat64),\n/* harmony export */   VId: () => (/* binding */ VId),\n/* harmony export */   VInt64: () => (/* binding */ VInt64),\n/* harmony export */   VLiteral: () => (/* binding */ VLiteral),\n/* harmony export */   VNull: () => (/* binding */ VNull),\n/* harmony export */   VObject: () => (/* binding */ VObject),\n/* harmony export */   VRecord: () => (/* binding */ VRecord),\n/* harmony export */   VString: () => (/* binding */ VString),\n/* harmony export */   VUnion: () => (/* binding */ VUnion)\n/* harmony export */ });\n/* harmony import */ var _value_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./value.js */ \"(ssr)/./node_modules/convex/dist/esm/values/value.js\");\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\nclass BaseValidator {\n    constructor({ isOptional }){\n        /**\n     * Only for TypeScript, the TS type of the JS values validated\n     * by this validator.\n     */ __publicField(this, \"type\");\n        /**\n     * Only for TypeScript, if this an Object validator, then\n     * this is the TS type of its property names.\n     */ __publicField(this, \"fieldPaths\");\n        /**\n     * Whether this is an optional Object property value validator.\n     */ __publicField(this, \"isOptional\");\n        /**\n     * Always `\"true\"`.\n     */ __publicField(this, \"isConvexValidator\");\n        this.isOptional = isOptional;\n        this.isConvexValidator = true;\n    }\n}\nclass VId extends BaseValidator {\n    /**\n   * Usually you'd use `v.id(tableName)` instead.\n   */ constructor({ isOptional, tableName }){\n        super({\n            isOptional\n        });\n        /**\n     * The name of the table that the validated IDs must belong to.\n     */ __publicField(this, \"tableName\");\n        /**\n     * The kind of validator, `\"id\"`.\n     */ __publicField(this, \"kind\", \"id\");\n        if (typeof tableName !== \"string\") {\n            throw new Error(\"v.id(tableName) requires a string\");\n        }\n        this.tableName = tableName;\n    }\n    /** @internal */ get json() {\n        return {\n            type: \"id\",\n            tableName: this.tableName\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VId({\n            isOptional: \"optional\",\n            tableName: this.tableName\n        });\n    }\n}\nclass VFloat64 extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"float64\"`.\n     */ __publicField(this, \"kind\", \"float64\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: \"number\"\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VFloat64({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VInt64 extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"int64\"`.\n     */ __publicField(this, \"kind\", \"int64\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: \"bigint\"\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VInt64({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VBoolean extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"boolean\"`.\n     */ __publicField(this, \"kind\", \"boolean\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VBoolean({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VBytes extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"bytes\"`.\n     */ __publicField(this, \"kind\", \"bytes\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VBytes({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VString extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"string\"`.\n     */ __publicField(this, \"kind\", \"string\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VString({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VNull extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"null\"`.\n     */ __publicField(this, \"kind\", \"null\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VNull({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VAny extends BaseValidator {\n    constructor(){\n        super(...arguments);\n        /**\n     * The kind of validator, `\"any\"`.\n     */ __publicField(this, \"kind\", \"any\");\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VAny({\n            isOptional: \"optional\"\n        });\n    }\n}\nclass VObject extends BaseValidator {\n    /**\n   * Usually you'd use `v.object({ ... })` instead.\n   */ constructor({ isOptional, fields }){\n        super({\n            isOptional\n        });\n        /**\n     * An object with the validator for each property.\n     */ __publicField(this, \"fields\");\n        /**\n     * The kind of validator, `\"object\"`.\n     */ __publicField(this, \"kind\", \"object\");\n        globalThis.Object.values(fields).forEach((v)=>{\n            if (!v.isConvexValidator) {\n                throw new Error(\"v.object() entries must be validators\");\n            }\n        });\n        this.fields = fields;\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind,\n            value: globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([k, v])=>[\n                    k,\n                    {\n                        fieldType: v.json,\n                        optional: v.isOptional === \"optional\" ? true : false\n                    }\n                ]))\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VObject({\n            isOptional: \"optional\",\n            fields: this.fields\n        });\n    }\n    /**\n   * Create a new VObject with the specified fields omitted.\n   * @param fields The field names to omit from this VObject.\n   */ omit(...fields) {\n        const newFields = {\n            ...this.fields\n        };\n        for (const field of fields){\n            delete newFields[field];\n        }\n        return new VObject({\n            isOptional: this.isOptional,\n            fields: newFields\n        });\n    }\n    /**\n   * Create a new VObject with only the specified fields.\n   * @param fields The field names to pick from this VObject.\n   */ pick(...fields) {\n        const newFields = {};\n        for (const field of fields){\n            newFields[field] = this.fields[field];\n        }\n        return new VObject({\n            isOptional: this.isOptional,\n            fields: newFields\n        });\n    }\n    /**\n   * Create a new VObject with all fields marked as optional.\n   */ partial() {\n        const newFields = {};\n        for (const [key, validator] of globalThis.Object.entries(this.fields)){\n            newFields[key] = validator.asOptional();\n        }\n        return new VObject({\n            isOptional: this.isOptional,\n            fields: newFields\n        });\n    }\n    /**\n   * Create a new VObject with additional fields merged in.\n   * @param fields An object with additional validators to merge into this VObject.\n   */ extend(fields) {\n        return new VObject({\n            isOptional: this.isOptional,\n            fields: {\n                ...this.fields,\n                ...fields\n            }\n        });\n    }\n}\nclass VLiteral extends BaseValidator {\n    /**\n   * Usually you'd use `v.literal(value)` instead.\n   */ constructor({ isOptional, value }){\n        super({\n            isOptional\n        });\n        /**\n     * The value that the validated values must be equal to.\n     */ __publicField(this, \"value\");\n        /**\n     * The kind of validator, `\"literal\"`.\n     */ __publicField(this, \"kind\", \"literal\");\n        if (typeof value !== \"string\" && typeof value !== \"boolean\" && typeof value !== \"number\" && typeof value !== \"bigint\") {\n            throw new Error(\"v.literal(value) must be a string, number, or boolean\");\n        }\n        this.value = value;\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind,\n            value: (0,_value_js__WEBPACK_IMPORTED_MODULE_0__.convexToJson)(this.value)\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VLiteral({\n            isOptional: \"optional\",\n            value: this.value\n        });\n    }\n}\nclass VArray extends BaseValidator {\n    /**\n   * Usually you'd use `v.array(element)` instead.\n   */ constructor({ isOptional, element }){\n        super({\n            isOptional\n        });\n        /**\n     * The validator for the elements of the array.\n     */ __publicField(this, \"element\");\n        /**\n     * The kind of validator, `\"array\"`.\n     */ __publicField(this, \"kind\", \"array\");\n        this.element = element;\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind,\n            value: this.element.json\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VArray({\n            isOptional: \"optional\",\n            element: this.element\n        });\n    }\n}\nclass VRecord extends BaseValidator {\n    /**\n   * Usually you'd use `v.record(key, value)` instead.\n   */ constructor({ isOptional, key, value }){\n        super({\n            isOptional\n        });\n        /**\n     * The validator for the keys of the record.\n     */ __publicField(this, \"key\");\n        /**\n     * The validator for the values of the record.\n     */ __publicField(this, \"value\");\n        /**\n     * The kind of validator, `\"record\"`.\n     */ __publicField(this, \"kind\", \"record\");\n        if (key.isOptional === \"optional\") {\n            throw new Error(\"Record validator cannot have optional keys\");\n        }\n        if (value.isOptional === \"optional\") {\n            throw new Error(\"Record validator cannot have optional values\");\n        }\n        if (!key.isConvexValidator || !value.isConvexValidator) {\n            throw new Error(\"Key and value of v.record() but be validators\");\n        }\n        this.key = key;\n        this.value = value;\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind,\n            // This cast is needed because TypeScript thinks the key type is too wide\n            keys: this.key.json,\n            values: {\n                fieldType: this.value.json,\n                optional: false\n            }\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VRecord({\n            isOptional: \"optional\",\n            key: this.key,\n            value: this.value\n        });\n    }\n}\nclass VUnion extends BaseValidator {\n    /**\n   * Usually you'd use `v.union(...members)` instead.\n   */ constructor({ isOptional, members }){\n        super({\n            isOptional\n        });\n        /**\n     * The array of validators, one of which must match the value.\n     */ __publicField(this, \"members\");\n        /**\n     * The kind of validator, `\"union\"`.\n     */ __publicField(this, \"kind\", \"union\");\n        members.forEach((member)=>{\n            if (!member.isConvexValidator) {\n                throw new Error(\"All members of v.union() must be validators\");\n            }\n        });\n        this.members = members;\n    }\n    /** @internal */ get json() {\n        return {\n            type: this.kind,\n            value: this.members.map((v)=>v.json)\n        };\n    }\n    /** @internal */ asOptional() {\n        return new VUnion({\n            isOptional: \"optional\",\n            members: this.members\n        });\n    }\n} //# sourceMappingURL=validators.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy92YWxpZGF0b3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR3dDO0FBU3hDLE1BQWUsY0FJYjtJQXNCQSxZQUFZLEVBQUUsV0FBVyxFQUErQjtRQWpCeEQ7OztLQUFBLHVCQUFTO1FBS1Q7OztLQUFBLHVCQUFTO1FBS1Q7O0tBQUEsdUJBQVM7UUFLVDs7S0FBQSx1QkFBUztRQUdQLEtBQUssYUFBYTtRQUNsQixLQUFLLG9CQUFvQjtJQUMzQjtBQUtGO0FBS08sTUFBTSxZQUdILGNBQWdDO0lBQUE7O0dBQUEsR0FjeEMsWUFBWSxFQUNWLFlBQ0EsV0FDRixDQUdHO1FBQ0QsTUFBTTtZQUFFO1FBQVcsQ0FBQztRQWpCdEI7O0tBQUEsdUJBQVM7UUFLVDs7S0FBQSx1QkFBUyxRQUFPO1FBYWQsSUFBSSxPQUFPLGNBQWMsVUFBVTtZQUNqQyxNQUFNLElBQUksTUFBTSxtQ0FBbUM7UUFDckQ7UUFDQSxLQUFLLFlBQVk7SUFDbkI7SUFBQSxpQkFFQSxJQUFJLE9BQXNCO1FBQ3hCLE9BQU87WUFBRSxNQUFNO1lBQU0sV0FBVyxLQUFLO1FBQVU7SUFDakQ7SUFBQSxpQkFFQSxhQUFhO1FBQ1gsT0FBTyxJQUFJLElBQWtDO1lBQzNDLFlBQVk7WUFDWixXQUFXLEtBQUs7UUFDbEIsQ0FBQztJQUNIO0FBQ0Y7QUFLTyxNQUFNLGlCQUdILGNBQWdDO0lBSG5DO1FBQUE7UUFPTDs7S0FBQSx1QkFBUyxRQUFPO0lBQUE7SUFBQSxpQkFHaEIsSUFBSSxPQUFzQjtRQUV4QixPQUFPO1lBQUUsTUFBTTtRQUFTO0lBQzFCO0lBQUEsaUJBRUEsYUFBYTtRQUNYLE9BQU8sSUFBSSxTQUF1QztZQUNoRCxZQUFZO1FBQ2QsQ0FBQztJQUNIO0FBQ0Y7QUFLTyxNQUFNLGVBR0gsY0FBZ0M7SUFIbkM7UUFBQTtRQU9MOztLQUFBLHVCQUFTLFFBQU87SUFBQTtJQUFBLGlCQUdoQixJ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LEtBQUs7WUFDVixPQUFPLEtBQUs7UUFDZCxDQUFDO0lBQ0g7QUFDRjtBQUtPLE1BQU0sZUFLSCxjQUE0QztJQUFBOztHQUFBLEdBY3BELFlBQVksRUFBRSxZQUFZLFFBQVEsRUFBMkM7UUFDM0UsTUFBTTtZQUFFO1FBQVcsQ0FBQztRQVh0Qjs7S0FBQSx1QkFBUztRQUtUOztLQUFBLHVCQUFTLFFBQU87UUFPZCxRQUFRLFFBQVEsQ0FBQztZQUNmLElBQUksQ0FBQyxPQUFPLG1CQUFtQjtnQkFDN0IsTUFBTSxJQUFJLE1BQU0sNkNBQTZDO1lBQy9EO1FBQ0YsQ0FBQztRQUNELEtBQUssVUFBVTtJQUNqQjtJQUFBLGlCQUVBLElBQUksT0FBc0I7UUFDeEIsT0FBTztZQUNMLE1BQU0sS0FBSztZQUNYLE9BQU8sS0FBSyxRQUFRLElBQUksQ0FBQyxJQUFNLEVBQUUsSUFBSTtRQUN2QztJQUNGO0lBQUEsaUJBRUEsYUFBYTtRQUNYLE9BQU8sSUFBSSxPQUF3QztZQUNqRCxZQUFZO1lBQ1osU0FBUyxLQUFLO1FBQ2hCLENBQUM7SUFDSDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3ZhbHVlcy92YWxpZGF0b3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV4cGFuZCB9IGZyb20gXCIuLi90eXBlX3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBHZW5lcmljSWQgfSBmcm9tIFwiLi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgR2VuZXJpY1ZhbGlkYXRvciwgT2JqZWN0VHlwZSB9IGZyb20gXCIuL3ZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgSlNPTlZhbHVlLCBjb252ZXhUb0pzb24gfSBmcm9tIFwiLi92YWx1ZS5qc1wiO1xuXG50eXBlIFRhYmxlTmFtZUZyb21UeXBlPFQ+ID1cbiAgVCBleHRlbmRzIEdlbmVyaWNJZDxpbmZlciBUYWJsZU5hbWU+ID8gVGFibGVOYW1lIDogc3RyaW5nO1xuXG4vKipcbiAqIEF2b2lkIHVzaW5nIGBpbnN0YW5jZW9mIEJhc2VWYWxpZGF0b3JgOyB0aGlzIGlzIGluaGVyaXRlbmNlIGZvciBjb2RlIHJldXNlXG4gKiBub3QgdHlwZSBoZWlyYXJjaHkuXG4gKi9cbmFic3RyYWN0IGNsYXNzIEJhc2VWYWxpZGF0b3I8XG4gIFR5cGUsXG4gIElzT3B0aW9uYWwgZXh0ZW5kcyBPcHRpb25hbFByb3BlcnR5ID0gXCJyZXF1aXJlZFwiLFxuICBGaWVsZFBhdGhzIGV4dGVuZHMgc3RyaW5nID0gbmV2ZXIsXG4+IHtcbiAgLyoqXG4gICAqIE9ubHkgZm9yIFR5cGVTY3JpcHQsIHRoZSBUUyB0eXBlIG9mIHRoZSBKUyB2YWx1ZXMgdmFsaWRhdGVkXG4gICAqIGJ5IHRoaXMgdmFsaWRhdG9yLlxuICAgKi9cbiAgcmVhZG9ubHkgdHlwZSE6IFR5cGU7XG4gIC8qKlxuICAgKiBPbmx5IGZvciBUeXBlU2NyaXB0LCBpZiB0aGlzIGFuIE9iamVjdCB2YWxpZGF0b3IsIHRoZW5cbiAgICogdGhpcyBpcyB0aGUgVFMgdHlwZSBvZiBpdHMgcHJvcGVydHkgbmFtZXMuXG4gICAqL1xuICByZWFkb25seSBmaWVsZFBhdGhzITogRmllbGRQYXRocztcblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGlzIGFuIG9wdGlvbmFsIE9iamVjdCBwcm9wZXJ0eSB2YWx1ZSB2YWxpZGF0b3IuXG4gICAqL1xuICByZWFkb25seSBpc09wdGlvbmFsOiBJc09wdGlvbmFsO1xuXG4gIC8qKlxuICAgKiBBbHdheXMgYFwidHJ1ZVwiYC5cbiAgICovXG4gIHJlYWRvbmx5IGlzQ29udmV4VmFsaWRhdG9yOiB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHsgaXNPcHRpb25hbCB9OiB7IGlzT3B0aW9uYWw6IElzT3B0aW9uYWwgfSkge1xuICAgIHRoaXMuaXNPcHRpb25hbCA9IGlzT3B0aW9uYWw7XG4gICAgdGhpcy5pc0NvbnZleFZhbGlkYXRvciA9IHRydWU7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhYnN0cmFjdCBnZXQganNvbigpOiBWYWxpZGF0b3JKU09OO1xuICAvKiogQGludGVybmFsICovXG4gIGFic3RyYWN0IGFzT3B0aW9uYWwoKTogVmFsaWRhdG9yPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIiwgRmllbGRQYXRocz47XG59XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgdGhlIGB2LmlkKHRhYmxlTmFtZSlgIHZhbGlkYXRvci5cbiAqL1xuZXhwb3J0IGNsYXNzIFZJZDxcbiAgVHlwZSxcbiAgSXNPcHRpb25hbCBleHRlbmRzIE9wdGlvbmFsUHJvcGVydHkgPSBcInJlcXVpcmVkXCIsXG4+IGV4dGVuZHMgQmFzZVZhbGlkYXRvcjxUeXBlLCBJc09wdGlvbmFsPiB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgdGFibGUgdGhhdCB0aGUgdmFsaWRhdGVkIElEcyBtdXN0IGJlbG9uZyB0by5cbiAgICovXG4gIHJlYWRvbmx5IHRhYmxlTmFtZTogVGFibGVOYW1lRnJvbVR5cGU8VHlwZT47XG5cbiAgLyoqXG4gICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwiaWRcImAuXG4gICAqL1xuICByZWFkb25seSBraW5kID0gXCJpZFwiIGFzIGNvbnN0O1xuXG4gIC8qKlxuICAgKiBVc3VhbGx5IHlvdSdkIHVzZSBgdi5pZCh0YWJsZU5hbWUpYCBpbnN0ZWFkLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGlzT3B0aW9uYWwsXG4gICAgdGFibGVOYW1lLFxuICB9OiB7XG4gICAgaXNPcHRpb25hbDogSXNPcHRpb25hbDtcbiAgICB0YWJsZU5hbWU6IFRhYmxlTmFtZUZyb21UeXBlPFR5cGU+O1xuICB9KSB7XG4gICAgc3VwZXIoeyBpc09wdGlvbmFsIH0pO1xuICAgIGlmICh0eXBlb2YgdGFibGVOYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2LmlkKHRhYmxlTmFtZSkgcmVxdWlyZXMgYSBzdHJpbmdcIik7XG4gICAgfVxuICAgIHRoaXMudGFibGVOYW1lID0gdGFibGVOYW1lO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKTogVmFsaWRhdG9ySlNPTiB7XG4gICAgcmV0dXJuIHsgdHlwZTogXCJpZFwiLCB0YWJsZU5hbWU6IHRoaXMudGFibGVOYW1lIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVklkPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj4oe1xuICAgICAgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiLFxuICAgICAgdGFibGVOYW1lOiB0aGlzLnRhYmxlTmFtZSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSB0eXBlIG9mIHRoZSBgdi5mbG9hdDY0KClgIHZhbGlkYXRvci5cbiAqL1xuZXhwb3J0IGNsYXNzIFZGbG9hdDY0PFxuICBUeXBlID0gbnVtYmVyLFxuICBJc09wdGlvbmFsIGV4dGVuZHMgT3B0aW9uYWxQcm9wZXJ0eSA9IFwicmVxdWlyZWRcIixcbj4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yPFR5cGUsIElzT3B0aW9uYWw+IHtcbiAgLyoqXG4gICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwiZmxvYXQ2NFwiYC5cbiAgICovXG4gIHJlYWRvbmx5IGtpbmQgPSBcImZsb2F0NjRcIiBhcyBjb25zdDtcblxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCk6IFZhbGlkYXRvckpTT04ge1xuICAgIC8vIFNlcnZlciBleHBlY3RzIHRoZSBvbGQgbmFtZSBgbnVtYmVyYCBzdHJpbmcgaW5zdGVhZCBvZiBgZmxvYXQ2NGAuXG4gICAgcmV0dXJuIHsgdHlwZTogXCJudW1iZXJcIiB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXNPcHRpb25hbCgpIHtcbiAgICByZXR1cm4gbmV3IFZGbG9hdDY0PFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj4oe1xuICAgICAgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiLFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgdGhlIGB2LmludDY0KClgIHZhbGlkYXRvci5cbiAqL1xuZXhwb3J0IGNsYXNzIFZJbnQ2NDxcbiAgVHlwZSA9IGJpZ2ludCxcbiAgSXNPcHRpb25hbCBleHRlbmRzIE9wdGlvbmFsUHJvcGVydHkgPSBcInJlcXVpcmVkXCIsXG4+IGV4dGVuZHMgQmFzZVZhbGlkYXRvcjxUeXBlLCBJc09wdGlvbmFsPiB7XG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcImludDY0XCJgLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZCA9IFwiaW50NjRcIiBhcyBjb25zdDtcblxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCk6IFZhbGlkYXRvckpTT04ge1xuICAgIC8vIFNlcnZlciBleHBlY3RzIHRoZSBvbGQgbmFtZSBgYmlnaW50YC5cbiAgICByZXR1cm4geyB0eXBlOiBcImJpZ2ludFwiIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkludDY0PFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj4oeyBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgYHYuYm9vbGVhbigpYCB2YWxpZGF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBWQm9vbGVhbjxcbiAgVHlwZSA9IGJvb2xlYW4sXG4gIElzT3B0aW9uYWwgZXh0ZW5kcyBPcHRpb25hbFByb3BlcnR5ID0gXCJyZXF1aXJlZFwiLFxuPiBleHRlbmRzIEJhc2VWYWxpZGF0b3I8VHlwZSwgSXNPcHRpb25hbD4ge1xuICAvKipcbiAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJib29sZWFuXCJgLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZCA9IFwiYm9vbGVhblwiIGFzIGNvbnN0O1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKTogVmFsaWRhdG9ySlNPTiB7XG4gICAgcmV0dXJuIHsgdHlwZTogdGhpcy5raW5kIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkJvb2xlYW48VHlwZSB8IHVuZGVmaW5lZCwgXCJvcHRpb25hbFwiPih7XG4gICAgICBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIsXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgYHYuYnl0ZXMoKWAgdmFsaWRhdG9yLlxuICovXG5leHBvcnQgY2xhc3MgVkJ5dGVzPFxuICBUeXBlID0gQXJyYXlCdWZmZXIsXG4gIElzT3B0aW9uYWwgZXh0ZW5kcyBPcHRpb25hbFByb3BlcnR5ID0gXCJyZXF1aXJlZFwiLFxuPiBleHRlbmRzIEJhc2VWYWxpZGF0b3I8VHlwZSwgSXNPcHRpb25hbD4ge1xuICAvKipcbiAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJieXRlc1wiYC5cbiAgICovXG4gIHJlYWRvbmx5IGtpbmQgPSBcImJ5dGVzXCIgYXMgY29uc3Q7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpOiBWYWxpZGF0b3JKU09OIHtcbiAgICByZXR1cm4geyB0eXBlOiB0aGlzLmtpbmQgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWQnl0ZXM8VHlwZSB8IHVuZGVmaW5lZCwgXCJvcHRpb25hbFwiPih7IGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIiB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSB0eXBlIG9mIHRoZSBgdi5zdHJpbmcoKWAgdmFsaWRhdG9yLlxuICovXG5leHBvcnQgY2xhc3MgVlN0cmluZzxcbiAgVHlwZSA9IHN0cmluZyxcbiAgSXNPcHRpb25hbCBleHRlbmRzIE9wdGlvbmFsUHJvcGVydHkgPSBcInJlcXVpcmVkXCIsXG4+IGV4dGVuZHMgQmFzZVZhbGlkYXRvcjxUeXBlLCBJc09wdGlvbmFsPiB7XG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcInN0cmluZ1wiYC5cbiAgICovXG4gIHJlYWRvbmx5IGtpbmQgPSBcInN0cmluZ1wiIGFzIGNvbnN0O1xuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKTogVmFsaWRhdG9ySlNPTiB7XG4gICAgcmV0dXJuIHsgdHlwZTogdGhpcy5raW5kIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVlN0cmluZzxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCI+KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIixcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSB0eXBlIG9mIHRoZSBgdi5udWxsKClgIHZhbGlkYXRvci5cbiAqL1xuZXhwb3J0IGNsYXNzIFZOdWxsPFxuICBUeXBlID0gbnVsbCxcbiAgSXNPcHRpb25hbCBleHRlbmRzIE9wdGlvbmFsUHJvcGVydHkgPSBcInJlcXVpcmVkXCIsXG4+IGV4dGVuZHMgQmFzZVZhbGlkYXRvcjxUeXBlLCBJc09wdGlvbmFsPiB7XG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcIm51bGxcImAuXG4gICAqL1xuICByZWFkb25seSBraW5kID0gXCJudWxsXCIgYXMgY29uc3Q7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpOiBWYWxpZGF0b3JKU09OIHtcbiAgICByZXR1cm4geyB0eXBlOiB0aGlzLmtpbmQgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWTnVsbDxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCI+KHsgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiIH0pO1xuICB9XG59XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgdGhlIGB2LmFueSgpYCB2YWxpZGF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBWQW55PFxuICBUeXBlID0gYW55LFxuICBJc09wdGlvbmFsIGV4dGVuZHMgT3B0aW9uYWxQcm9wZXJ0eSA9IFwicmVxdWlyZWRcIixcbiAgRmllbGRQYXRocyBleHRlbmRzIHN0cmluZyA9IHN0cmluZyxcbj4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yPFR5cGUsIElzT3B0aW9uYWwsIEZpZWxkUGF0aHM+IHtcbiAgLyoqXG4gICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwiYW55XCJgLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZCA9IFwiYW55XCIgYXMgY29uc3Q7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpOiBWYWxpZGF0b3JKU09OIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdGhpcy5raW5kLFxuICAgIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkFueTxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCIsIEZpZWxkUGF0aHM+KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIixcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSB0eXBlIG9mIHRoZSBgdi5vYmplY3QoKWAgdmFsaWRhdG9yLlxuICovXG5leHBvcnQgY2xhc3MgVk9iamVjdDxcbiAgVHlwZSxcbiAgRmllbGRzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgR2VuZXJpY1ZhbGlkYXRvcj4sXG4gIElzT3B0aW9uYWwgZXh0ZW5kcyBPcHRpb25hbFByb3BlcnR5ID0gXCJyZXF1aXJlZFwiLFxuICBGaWVsZFBhdGhzIGV4dGVuZHMgc3RyaW5nID0ge1xuICAgIFtQcm9wZXJ0eSBpbiBrZXlvZiBGaWVsZHNdOlxuICAgICAgfCBKb2luRmllbGRQYXRoczxQcm9wZXJ0eSAmIHN0cmluZywgRmllbGRzW1Byb3BlcnR5XVtcImZpZWxkUGF0aHNcIl0+XG4gICAgICB8IFByb3BlcnR5O1xuICB9W2tleW9mIEZpZWxkc10gJlxuICAgIHN0cmluZyxcbj4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yPFR5cGUsIElzT3B0aW9uYWwsIEZpZWxkUGF0aHM+IHtcbiAgLyoqXG4gICAqIEFuIG9iamVjdCB3aXRoIHRoZSB2YWxpZGF0b3IgZm9yIGVhY2ggcHJvcGVydHkuXG4gICAqL1xuICByZWFkb25seSBmaWVsZHM6IEZpZWxkcztcblxuICAvKipcbiAgICogVGhlIGtpbmQgb2YgdmFsaWRhdG9yLCBgXCJvYmplY3RcImAuXG4gICAqL1xuICByZWFkb25seSBraW5kID0gXCJvYmplY3RcIiBhcyBjb25zdDtcblxuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYub2JqZWN0KHsgLi4uIH0pYCBpbnN0ZWFkLlxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGlzT3B0aW9uYWwsXG4gICAgZmllbGRzLFxuICB9OiB7XG4gICAgaXNPcHRpb25hbDogSXNPcHRpb25hbDtcbiAgICBmaWVsZHM6IEZpZWxkcztcbiAgfSkge1xuICAgIHN1cGVyKHsgaXNPcHRpb25hbCB9KTtcbiAgICBnbG9iYWxUaGlzLk9iamVjdC52YWx1ZXMoZmllbGRzKS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICBpZiAoIXYuaXNDb252ZXhWYWxpZGF0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidi5vYmplY3QoKSBlbnRyaWVzIG11c3QgYmUgdmFsaWRhdG9yc1wiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmZpZWxkcyA9IGZpZWxkcztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCk6IFZhbGlkYXRvckpTT04ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogZ2xvYmFsVGhpcy5PYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgIGdsb2JhbFRoaXMuT2JqZWN0LmVudHJpZXModGhpcy5maWVsZHMpLm1hcCgoW2ssIHZdKSA9PiBbXG4gICAgICAgICAgayxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmaWVsZFR5cGU6IHYuanNvbixcbiAgICAgICAgICAgIG9wdGlvbmFsOiB2LmlzT3B0aW9uYWwgPT09IFwib3B0aW9uYWxcIiA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKSxcbiAgICAgICksXG4gICAgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzT3B0aW9uYWwoKSB7XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0PFR5cGUgfCB1bmRlZmluZWQsIEZpZWxkcywgXCJvcHRpb25hbFwiLCBGaWVsZFBhdGhzPih7XG4gICAgICBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIsXG4gICAgICBmaWVsZHM6IHRoaXMuZmllbGRzLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBWT2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBmaWVsZHMgb21pdHRlZC5cbiAgICogQHBhcmFtIGZpZWxkcyBUaGUgZmllbGQgbmFtZXMgdG8gb21pdCBmcm9tIHRoaXMgVk9iamVjdC5cbiAgICovXG4gIG9taXQ8SyBleHRlbmRzIGtleW9mIEZpZWxkcyAmIHN0cmluZz4oXG4gICAgLi4uZmllbGRzOiBLW11cbiAgKTogVk9iamVjdDxFeHBhbmQ8T21pdDxUeXBlLCBLPj4sIEV4cGFuZDxPbWl0PEZpZWxkcywgSz4+LCBJc09wdGlvbmFsPiB7XG4gICAgY29uc3QgbmV3RmllbGRzID0geyAuLi50aGlzLmZpZWxkcyB9O1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICBkZWxldGUgbmV3RmllbGRzW2ZpZWxkXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0KHtcbiAgICAgIGlzT3B0aW9uYWw6IHRoaXMuaXNPcHRpb25hbCxcbiAgICAgIGZpZWxkczogbmV3RmllbGRzIGFzIGFueSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgVk9iamVjdCB3aXRoIG9ubHkgdGhlIHNwZWNpZmllZCBmaWVsZHMuXG4gICAqIEBwYXJhbSBmaWVsZHMgVGhlIGZpZWxkIG5hbWVzIHRvIHBpY2sgZnJvbSB0aGlzIFZPYmplY3QuXG4gICAqL1xuICBwaWNrPEsgZXh0ZW5kcyBrZXlvZiBGaWVsZHMgJiBzdHJpbmc+KFxuICAgIC4uLmZpZWxkczogS1tdXG4gICk6IFZPYmplY3Q8XG4gICAgRXhwYW5kPFBpY2s8VHlwZSwgRXh0cmFjdDxrZXlvZiBUeXBlLCBLPj4+LFxuICAgIEV4cGFuZDxQaWNrPEZpZWxkcywgSz4+LFxuICAgIElzT3B0aW9uYWxcbiAgPiB7XG4gICAgY29uc3QgbmV3RmllbGRzOiBSZWNvcmQ8c3RyaW5nLCBHZW5lcmljVmFsaWRhdG9yPiA9IHt9O1xuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XG4gICAgICBuZXdGaWVsZHNbZmllbGRdID0gdGhpcy5maWVsZHNbZmllbGRdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFZPYmplY3Qoe1xuICAgICAgaXNPcHRpb25hbDogdGhpcy5pc09wdGlvbmFsLFxuICAgICAgZmllbGRzOiBuZXdGaWVsZHMgYXMgRXhwYW5kPFBpY2s8RmllbGRzLCBLPj4sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFZPYmplY3Qgd2l0aCBhbGwgZmllbGRzIG1hcmtlZCBhcyBvcHRpb25hbC5cbiAgICovXG4gIHBhcnRpYWwoKTogVk9iamVjdDxcbiAgICB7IFtLIGluIGtleW9mIFR5cGVdPzogVHlwZVtLXSB9LFxuICAgIHsgW0sgaW4ga2V5b2YgRmllbGRzXTogVk9wdGlvbmFsPEZpZWxkc1tLXT4gfSxcbiAgICBJc09wdGlvbmFsXG4gID4ge1xuICAgIGNvbnN0IG5ld0ZpZWxkczogUmVjb3JkPHN0cmluZywgR2VuZXJpY1ZhbGlkYXRvcj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbGlkYXRvcl0gb2YgZ2xvYmFsVGhpcy5PYmplY3QuZW50cmllcyh0aGlzLmZpZWxkcykpIHtcbiAgICAgIG5ld0ZpZWxkc1trZXldID0gdmFsaWRhdG9yLmFzT3B0aW9uYWwoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0KHtcbiAgICAgIGlzT3B0aW9uYWw6IHRoaXMuaXNPcHRpb25hbCxcbiAgICAgIGZpZWxkczogbmV3RmllbGRzIGFzIHtcbiAgICAgICAgW0sgaW4ga2V5b2YgRmllbGRzXTogVk9wdGlvbmFsPEZpZWxkc1tLXT47XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBWT2JqZWN0IHdpdGggYWRkaXRpb25hbCBmaWVsZHMgbWVyZ2VkIGluLlxuICAgKiBAcGFyYW0gZmllbGRzIEFuIG9iamVjdCB3aXRoIGFkZGl0aW9uYWwgdmFsaWRhdG9ycyB0byBtZXJnZSBpbnRvIHRoaXMgVk9iamVjdC5cbiAgICovXG4gIGV4dGVuZDxOZXdGaWVsZHMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBHZW5lcmljVmFsaWRhdG9yPj4oXG4gICAgZmllbGRzOiBOZXdGaWVsZHMsXG4gICk6IFZPYmplY3Q8XG4gICAgRXhwYW5kPFR5cGUgJiBPYmplY3RUeXBlPE5ld0ZpZWxkcz4+LFxuICAgIEV4cGFuZDxGaWVsZHMgJiBOZXdGaWVsZHM+LFxuICAgIElzT3B0aW9uYWxcbiAgPiB7XG4gICAgcmV0dXJuIG5ldyBWT2JqZWN0KHtcbiAgICAgIGlzT3B0aW9uYWw6IHRoaXMuaXNPcHRpb25hbCxcbiAgICAgIGZpZWxkczogeyAuLi50aGlzLmZpZWxkcywgLi4uZmllbGRzIH0gYXMgRXhwYW5kPEZpZWxkcyAmIE5ld0ZpZWxkcz4sXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgYHYubGl0ZXJhbCgpYCB2YWxpZGF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBWTGl0ZXJhbDxcbiAgVHlwZSxcbiAgSXNPcHRpb25hbCBleHRlbmRzIE9wdGlvbmFsUHJvcGVydHkgPSBcInJlcXVpcmVkXCIsXG4+IGV4dGVuZHMgQmFzZVZhbGlkYXRvcjxUeXBlLCBJc09wdGlvbmFsPiB7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgdGhhdCB0aGUgdmFsaWRhdGVkIHZhbHVlcyBtdXN0IGJlIGVxdWFsIHRvLlxuICAgKi9cbiAgcmVhZG9ubHkgdmFsdWU6IFR5cGU7XG5cbiAgLyoqXG4gICAqIFRoZSBraW5kIG9mIHZhbGlkYXRvciwgYFwibGl0ZXJhbFwiYC5cbiAgICovXG4gIHJlYWRvbmx5IGtpbmQgPSBcImxpdGVyYWxcIiBhcyBjb25zdDtcblxuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYubGl0ZXJhbCh2YWx1ZSlgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGlzT3B0aW9uYWwsIHZhbHVlIH06IHsgaXNPcHRpb25hbDogSXNPcHRpb25hbDsgdmFsdWU6IFR5cGUgfSkge1xuICAgIHN1cGVyKHsgaXNPcHRpb25hbCB9KTtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIgJiZcbiAgICAgIHR5cGVvZiB2YWx1ZSAhPT0gXCJib29sZWFuXCIgJiZcbiAgICAgIHR5cGVvZiB2YWx1ZSAhPT0gXCJudW1iZXJcIiAmJlxuICAgICAgdHlwZW9mIHZhbHVlICE9PSBcImJpZ2ludFwiXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ2LmxpdGVyYWwodmFsdWUpIG11c3QgYmUgYSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhblwiKTtcbiAgICB9XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKTogVmFsaWRhdG9ySlNPTiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHRoaXMua2luZCxcbiAgICAgIHZhbHVlOiBjb252ZXhUb0pzb24odGhpcy52YWx1ZSBhcyBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyIHwgYmlnaW50KSxcbiAgICB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXNPcHRpb25hbCgpIHtcbiAgICByZXR1cm4gbmV3IFZMaXRlcmFsPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj4oe1xuICAgICAgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiLFxuICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgYHYuYXJyYXkoKWAgdmFsaWRhdG9yLlxuICovXG5leHBvcnQgY2xhc3MgVkFycmF5PFxuICBUeXBlLFxuICBFbGVtZW50IGV4dGVuZHMgVmFsaWRhdG9yPGFueSwgXCJyZXF1aXJlZFwiLCBhbnk+LFxuICBJc09wdGlvbmFsIGV4dGVuZHMgT3B0aW9uYWxQcm9wZXJ0eSA9IFwicmVxdWlyZWRcIixcbj4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yPFR5cGUsIElzT3B0aW9uYWw+IHtcbiAgLyoqXG4gICAqIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSBlbGVtZW50cyBvZiB0aGUgYXJyYXkuXG4gICAqL1xuICByZWFkb25seSBlbGVtZW50OiBFbGVtZW50O1xuXG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcImFycmF5XCJgLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZCA9IFwiYXJyYXlcIiBhcyBjb25zdDtcblxuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYuYXJyYXkoZWxlbWVudClgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgaXNPcHRpb25hbCxcbiAgICBlbGVtZW50LFxuICB9OiB7XG4gICAgaXNPcHRpb25hbDogSXNPcHRpb25hbDtcbiAgICBlbGVtZW50OiBFbGVtZW50O1xuICB9KSB7XG4gICAgc3VwZXIoeyBpc09wdGlvbmFsIH0pO1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBnZXQganNvbigpOiBWYWxpZGF0b3JKU09OIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogdGhpcy5raW5kLFxuICAgICAgdmFsdWU6IHRoaXMuZWxlbWVudC5qc29uLFxuICAgIH07XG4gIH1cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBhc09wdGlvbmFsKCkge1xuICAgIHJldHVybiBuZXcgVkFycmF5PFR5cGUgfCB1bmRlZmluZWQsIEVsZW1lbnQsIFwib3B0aW9uYWxcIj4oe1xuICAgICAgaXNPcHRpb25hbDogXCJvcHRpb25hbFwiLFxuICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogVGhlIHR5cGUgb2YgdGhlIGB2LnJlY29yZCgpYCB2YWxpZGF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBWUmVjb3JkPFxuICBUeXBlLFxuICBLZXkgZXh0ZW5kcyBWYWxpZGF0b3I8c3RyaW5nLCBcInJlcXVpcmVkXCIsIGFueT4sXG4gIFZhbHVlIGV4dGVuZHMgVmFsaWRhdG9yPGFueSwgXCJyZXF1aXJlZFwiLCBhbnk+LFxuICBJc09wdGlvbmFsIGV4dGVuZHMgT3B0aW9uYWxQcm9wZXJ0eSA9IFwicmVxdWlyZWRcIixcbiAgRmllbGRQYXRocyBleHRlbmRzIHN0cmluZyA9IHN0cmluZyxcbj4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yPFR5cGUsIElzT3B0aW9uYWwsIEZpZWxkUGF0aHM+IHtcbiAgLyoqXG4gICAqIFRoZSB2YWxpZGF0b3IgZm9yIHRoZSBrZXlzIG9mIHRoZSByZWNvcmQuXG4gICAqL1xuICByZWFkb25seSBrZXk6IEtleTtcblxuICAvKipcbiAgICogVGhlIHZhbGlkYXRvciBmb3IgdGhlIHZhbHVlcyBvZiB0aGUgcmVjb3JkLlxuICAgKi9cbiAgcmVhZG9ubHkgdmFsdWU6IFZhbHVlO1xuXG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcInJlY29yZFwiYC5cbiAgICovXG4gIHJlYWRvbmx5IGtpbmQgPSBcInJlY29yZFwiIGFzIGNvbnN0O1xuXG4gIC8qKlxuICAgKiBVc3VhbGx5IHlvdSdkIHVzZSBgdi5yZWNvcmQoa2V5LCB2YWx1ZSlgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgaXNPcHRpb25hbCxcbiAgICBrZXksXG4gICAgdmFsdWUsXG4gIH06IHtcbiAgICBpc09wdGlvbmFsOiBJc09wdGlvbmFsO1xuICAgIGtleTogS2V5O1xuICAgIHZhbHVlOiBWYWx1ZTtcbiAgfSkge1xuICAgIHN1cGVyKHsgaXNPcHRpb25hbCB9KTtcbiAgICBpZiAoKGtleS5pc09wdGlvbmFsIGFzIE9wdGlvbmFsUHJvcGVydHkpID09PSBcIm9wdGlvbmFsXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY29yZCB2YWxpZGF0b3IgY2Fubm90IGhhdmUgb3B0aW9uYWwga2V5c1wiKTtcbiAgICB9XG4gICAgaWYgKCh2YWx1ZS5pc09wdGlvbmFsIGFzIE9wdGlvbmFsUHJvcGVydHkpID09PSBcIm9wdGlvbmFsXCIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlY29yZCB2YWxpZGF0b3IgY2Fubm90IGhhdmUgb3B0aW9uYWwgdmFsdWVzXCIpO1xuICAgIH1cbiAgICBpZiAoIWtleS5pc0NvbnZleFZhbGlkYXRvciB8fCAhdmFsdWUuaXNDb252ZXhWYWxpZGF0b3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIktleSBhbmQgdmFsdWUgb2Ygdi5yZWNvcmQoKSBidXQgYmUgdmFsaWRhdG9yc1wiKTtcbiAgICB9XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgZ2V0IGpzb24oKTogVmFsaWRhdG9ySlNPTiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IHRoaXMua2luZCxcbiAgICAgIC8vIFRoaXMgY2FzdCBpcyBuZWVkZWQgYmVjYXVzZSBUeXBlU2NyaXB0IHRoaW5rcyB0aGUga2V5IHR5cGUgaXMgdG9vIHdpZGVcbiAgICAgIGtleXM6IHRoaXMua2V5Lmpzb24gYXMgUmVjb3JkS2V5VmFsaWRhdG9ySlNPTixcbiAgICAgIHZhbHVlczoge1xuICAgICAgICBmaWVsZFR5cGU6IHRoaXMudmFsdWUuanNvbixcbiAgICAgICAgb3B0aW9uYWw6IGZhbHNlLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXNPcHRpb25hbCgpIHtcbiAgICByZXR1cm4gbmV3IFZSZWNvcmQ8VHlwZSB8IHVuZGVmaW5lZCwgS2V5LCBWYWx1ZSwgXCJvcHRpb25hbFwiLCBGaWVsZFBhdGhzPih7XG4gICAgICBpc09wdGlvbmFsOiBcIm9wdGlvbmFsXCIsXG4gICAgICBrZXk6IHRoaXMua2V5LFxuICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgdHlwZSBvZiB0aGUgYHYudW5pb24oKWAgdmFsaWRhdG9yLlxuICovXG5leHBvcnQgY2xhc3MgVlVuaW9uPFxuICBUeXBlLFxuICBUIGV4dGVuZHMgVmFsaWRhdG9yPGFueSwgXCJyZXF1aXJlZFwiLCBhbnk+W10sXG4gIElzT3B0aW9uYWwgZXh0ZW5kcyBPcHRpb25hbFByb3BlcnR5ID0gXCJyZXF1aXJlZFwiLFxuICBGaWVsZFBhdGhzIGV4dGVuZHMgc3RyaW5nID0gVFtudW1iZXJdW1wiZmllbGRQYXRoc1wiXSxcbj4gZXh0ZW5kcyBCYXNlVmFsaWRhdG9yPFR5cGUsIElzT3B0aW9uYWwsIEZpZWxkUGF0aHM+IHtcbiAgLyoqXG4gICAqIFRoZSBhcnJheSBvZiB2YWxpZGF0b3JzLCBvbmUgb2Ygd2hpY2ggbXVzdCBtYXRjaCB0aGUgdmFsdWUuXG4gICAqL1xuICByZWFkb25seSBtZW1iZXJzOiBUO1xuXG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiB2YWxpZGF0b3IsIGBcInVuaW9uXCJgLlxuICAgKi9cbiAgcmVhZG9ubHkga2luZCA9IFwidW5pb25cIiBhcyBjb25zdDtcblxuICAvKipcbiAgICogVXN1YWxseSB5b3UnZCB1c2UgYHYudW5pb24oLi4ubWVtYmVycylgIGluc3RlYWQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7IGlzT3B0aW9uYWwsIG1lbWJlcnMgfTogeyBpc09wdGlvbmFsOiBJc09wdGlvbmFsOyBtZW1iZXJzOiBUIH0pIHtcbiAgICBzdXBlcih7IGlzT3B0aW9uYWwgfSk7XG4gICAgbWVtYmVycy5mb3JFYWNoKChtZW1iZXIpID0+IHtcbiAgICAgIGlmICghbWVtYmVyLmlzQ29udmV4VmFsaWRhdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFsbCBtZW1iZXJzIG9mIHYudW5pb24oKSBtdXN0IGJlIHZhbGlkYXRvcnNcIik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5tZW1iZXJzID0gbWVtYmVycztcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGdldCBqc29uKCk6IFZhbGlkYXRvckpTT04ge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogdGhpcy5tZW1iZXJzLm1hcCgodikgPT4gdi5qc29uKSxcbiAgICB9O1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXNPcHRpb25hbCgpIHtcbiAgICByZXR1cm4gbmV3IFZVbmlvbjxUeXBlIHwgdW5kZWZpbmVkLCBULCBcIm9wdGlvbmFsXCI+KHtcbiAgICAgIGlzT3B0aW9uYWw6IFwib3B0aW9uYWxcIixcbiAgICAgIG1lbWJlcnM6IHRoaXMubWVtYmVycyxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyBwcmV0dGllci1pZ25vcmVcbmV4cG9ydCB0eXBlIFZPcHRpb25hbDxUIGV4dGVuZHMgVmFsaWRhdG9yPGFueSwgT3B0aW9uYWxQcm9wZXJ0eSwgYW55Pj4gPVxuICBUIGV4dGVuZHMgVklkPGluZmVyIFR5cGUsIE9wdGlvbmFsUHJvcGVydHk+ID8gVklkPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj5cbiAgOiBUIGV4dGVuZHMgVlN0cmluZzxpbmZlciBUeXBlLCBPcHRpb25hbFByb3BlcnR5PlxuICAgID8gVlN0cmluZzxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCI+XG4gIDogVCBleHRlbmRzIFZGbG9hdDY0PGluZmVyIFR5cGUsIE9wdGlvbmFsUHJvcGVydHk+XG4gICAgPyBWRmxvYXQ2NDxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCI+XG4gIDogVCBleHRlbmRzIFZJbnQ2NDxpbmZlciBUeXBlLCBPcHRpb25hbFByb3BlcnR5PlxuICAgID8gVkludDY0PFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj5cbiAgOiBUIGV4dGVuZHMgVkJvb2xlYW48aW5mZXIgVHlwZSwgT3B0aW9uYWxQcm9wZXJ0eT5cbiAgICA/IFZCb29sZWFuPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj5cbiAgOiBUIGV4dGVuZHMgVk51bGw8aW5mZXIgVHlwZSwgT3B0aW9uYWxQcm9wZXJ0eT5cbiAgICA/IFZOdWxsPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj5cbiAgOiBUIGV4dGVuZHMgVkFueTxpbmZlciBUeXBlLCBPcHRpb25hbFByb3BlcnR5PlxuICAgID8gVkFueTxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCI+XG4gIDogVCBleHRlbmRzIFZMaXRlcmFsPGluZmVyIFR5cGUsIE9wdGlvbmFsUHJvcGVydHk+XG4gICAgPyBWTGl0ZXJhbDxUeXBlIHwgdW5kZWZpbmVkLCBcIm9wdGlvbmFsXCI+XG4gIDogVCBleHRlbmRzIFZCeXRlczxpbmZlciBUeXBlLCBPcHRpb25hbFByb3BlcnR5PlxuICAgID8gVkJ5dGVzPFR5cGUgfCB1bmRlZmluZWQsIFwib3B0aW9uYWxcIj5cbiAgOiBUIGV4dGVuZHMgVk9iamVjdDwgaW5mZXIgVHlwZSwgaW5mZXIgRmllbGRzLCBPcHRpb25hbFByb3BlcnR5LCBpbmZlciBGaWVsZFBhdGhzPlxuICAgID8gVk9iamVjdDxUeXBlIHwgdW5kZWZpbmVkLCBGaWVsZHMsIFwib3B0aW9uYWxcIiwgRmllbGRQYXRocz5cbiAgOiBUIGV4dGVuZHMgVkFycmF5PGluZmVyIFR5cGUsIGluZmVyIEVsZW1lbnQsIE9wdGlvbmFsUHJvcGVydHk+XG4gICAgPyBWQXJyYXk8VHlwZSB8IHVuZGVmaW5lZCwgRWxlbWVudCwgXCJvcHRpb25hbFwiPlxuICA6IFQgZXh0ZW5kcyBWUmVjb3JkPCBpbmZlciBUeXBlLCBpbmZlciBLZXksIGluZmVyIFZhbHVlLCBPcHRpb25hbFByb3BlcnR5LCBpbmZlciBGaWVsZFBhdGhzPlxuICAgID8gVlJlY29yZDxUeXBlIHwgdW5kZWZpbmVkLCBLZXksIFZhbHVlLCBcIm9wdGlvbmFsXCIsIEZpZWxkUGF0aHM+XG4gIDogVCBleHRlbmRzIFZVbmlvbjxpbmZlciBUeXBlLCBpbmZlciBNZW1iZXJzLCBPcHRpb25hbFByb3BlcnR5LCBpbmZlciBGaWVsZFBhdGhzPlxuICAgID8gVlVuaW9uPFR5cGUgfCB1bmRlZmluZWQsIE1lbWJlcnMsIFwib3B0aW9uYWxcIiwgRmllbGRQYXRocz5cbiAgOiBuZXZlclxuXG4vKipcbiAqIFR5cGUgcmVwcmVzZW50aW5nIHdoZXRoZXIgYSBwcm9wZXJ0eSBpbiBhbiBvYmplY3QgaXMgb3B0aW9uYWwgb3IgcmVxdWlyZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBPcHRpb25hbFByb3BlcnR5ID0gXCJvcHRpb25hbFwiIHwgXCJyZXF1aXJlZFwiO1xuXG4vKipcbiAqIEEgdmFsaWRhdG9yIGZvciBhIENvbnZleCB2YWx1ZS5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBjb25zdHJ1Y3RlZCB1c2luZyB0aGUgdmFsaWRhdG9yIGJ1aWxkZXIsIHtAbGluayB2fS5cbiAqXG4gKiBBIHZhbGlkYXRvciBlbmNhcHN1bGF0ZXM6XG4gKiAtIFRoZSBUeXBlU2NyaXB0IHR5cGUgb2YgdGhpcyB2YWx1ZS5cbiAqIC0gV2hldGhlciB0aGlzIGZpZWxkIHNob3VsZCBiZSBvcHRpb25hbCBpZiBpdCdzIGluY2x1ZGVkIGluIGFuIG9iamVjdC5cbiAqIC0gVGhlIFR5cGVTY3JpcHQgdHlwZSBmb3IgdGhlIHNldCBvZiBpbmRleCBmaWVsZCBwYXRocyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gKiBidWlsZCBpbmRleGVzIG9uIHRoaXMgdmFsdWUuXG4gKiAtIEEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmFsaWRhdG9yLlxuICpcbiAqIFNwZWNpZmljIHR5cGVzIG9mIHZhbGlkYXRvcnMgY29udGFpbiBhZGRpdGlvbmFsIGluZm9ybWF0aW9uOiBmb3IgZXhhbXBsZVxuICogYW4gYEFycmF5VmFsaWRhdG9yYCBjb250YWlucyBhbiBgZWxlbWVudGAgcHJvcGVydHkgd2l0aCB0aGUgdmFsaWRhdG9yXG4gKiB1c2VkIHRvIHZhbGlkYXRlIGVhY2ggZWxlbWVudCBvZiB0aGUgbGlzdC4gVXNlIHRoZSBzaGFyZWQgJ2tpbmQnIHByb3BlcnR5XG4gKiB0byBpZGVudGl0eSB0aGUgdHlwZSBvZiB2YWxpZGF0b3IuXG4gKlxuICogTW9yZSB2YWxpZGF0b3JzIGNhbiBiZSBhZGRlZCBpbiBmdXR1cmUgcmVsZWFzZXMgc28gYW4gZXhoYXVzdGl2ZVxuICogc3dpdGNoIHN0YXRlbWVudCBvbiB2YWxpZGF0b3IgYGtpbmRgIHNob3VsZCBiZSBleHBlY3RlZCB0byBicmVha1xuICogaW4gZnV0dXJlIHJlbGVhc2VzIG9mIENvbnZleC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFZhbGlkYXRvcjxcbiAgVHlwZSxcbiAgSXNPcHRpb25hbCBleHRlbmRzIE9wdGlvbmFsUHJvcGVydHkgPSBcInJlcXVpcmVkXCIsXG4gIEZpZWxkUGF0aHMgZXh0ZW5kcyBzdHJpbmcgPSBuZXZlcixcbj4gPVxuICB8IFZJZDxUeXBlLCBJc09wdGlvbmFsPlxuICB8IFZTdHJpbmc8VHlwZSwgSXNPcHRpb25hbD5cbiAgfCBWRmxvYXQ2NDxUeXBlLCBJc09wdGlvbmFsPlxuICB8IFZJbnQ2NDxUeXBlLCBJc09wdGlvbmFsPlxuICB8IFZCb29sZWFuPFR5cGUsIElzT3B0aW9uYWw+XG4gIHwgVk51bGw8VHlwZSwgSXNPcHRpb25hbD5cbiAgfCBWQW55PFR5cGUsIElzT3B0aW9uYWw+XG4gIHwgVkxpdGVyYWw8VHlwZSwgSXNPcHRpb25hbD5cbiAgfCBWQnl0ZXM8VHlwZSwgSXNPcHRpb25hbD5cbiAgfCBWT2JqZWN0PFxuICAgICAgVHlwZSxcbiAgICAgIFJlY29yZDxzdHJpbmcsIFZhbGlkYXRvcjxhbnksIE9wdGlvbmFsUHJvcGVydHksIGFueT4+LFxuICAgICAgSXNPcHRpb25hbCxcbiAgICAgIEZpZWxkUGF0aHNcbiAgICA+XG4gIHwgVkFycmF5PFR5cGUsIFZhbGlkYXRvcjxhbnksIFwicmVxdWlyZWRcIiwgYW55PiwgSXNPcHRpb25hbD5cbiAgfCBWUmVjb3JkPFxuICAgICAgVHlwZSxcbiAgICAgIFZhbGlkYXRvcjxzdHJpbmcsIFwicmVxdWlyZWRcIiwgYW55PixcbiAgICAgIFZhbGlkYXRvcjxhbnksIFwicmVxdWlyZWRcIiwgYW55PixcbiAgICAgIElzT3B0aW9uYWwsXG4gICAgICBGaWVsZFBhdGhzXG4gICAgPlxuICB8IFZVbmlvbjxUeXBlLCBWYWxpZGF0b3I8YW55LCBcInJlcXVpcmVkXCIsIGFueT5bXSwgSXNPcHRpb25hbCwgRmllbGRQYXRocz47XG5cbi8qKlxuICogSm9pbiB0b2dldGhlciB0d28gaW5kZXggZmllbGQgcGF0aHMuXG4gKlxuICogVGhpcyBpcyB1c2VkIHdpdGhpbiB0aGUgdmFsaWRhdG9yIGJ1aWxkZXIsIHtAbGluayB2fS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgSm9pbkZpZWxkUGF0aHM8XG4gIFN0YXJ0IGV4dGVuZHMgc3RyaW5nLFxuICBFbmQgZXh0ZW5kcyBzdHJpbmcsXG4+ID0gYCR7U3RhcnR9LiR7RW5kfWA7XG5cbmV4cG9ydCB0eXBlIE9iamVjdEZpZWxkVHlwZSA9IHsgZmllbGRUeXBlOiBWYWxpZGF0b3JKU09OOyBvcHRpb25hbDogYm9vbGVhbiB9O1xuXG5leHBvcnQgdHlwZSBWYWxpZGF0b3JKU09OID1cbiAgfCB7IHR5cGU6IFwibnVsbFwiIH1cbiAgfCB7IHR5cGU6IFwibnVtYmVyXCIgfVxuICB8IHsgdHlwZTogXCJiaWdpbnRcIiB9XG4gIHwgeyB0eXBlOiBcImJvb2xlYW5cIiB9XG4gIHwgeyB0eXBlOiBcInN0cmluZ1wiIH1cbiAgfCB7IHR5cGU6IFwiYnl0ZXNcIiB9XG4gIHwgeyB0eXBlOiBcImFueVwiIH1cbiAgfCB7IHR5cGU6IFwibGl0ZXJhbFwiOyB2YWx1ZTogSlNPTlZhbHVlIH1cbiAgfCB7IHR5cGU6IFwiaWRcIjsgdGFibGVOYW1lOiBzdHJpbmcgfVxuICB8IHsgdHlwZTogXCJhcnJheVwiOyB2YWx1ZTogVmFsaWRhdG9ySlNPTiB9XG4gIHwge1xuICAgICAgdHlwZTogXCJyZWNvcmRcIjtcbiAgICAgIGtleXM6IFJlY29yZEtleVZhbGlkYXRvckpTT047XG4gICAgICB2YWx1ZXM6IFJlY29yZFZhbHVlVmFsaWRhdG9ySlNPTjtcbiAgICB9XG4gIHwgeyB0eXBlOiBcIm9iamVjdFwiOyB2YWx1ZTogUmVjb3JkPHN0cmluZywgT2JqZWN0RmllbGRUeXBlPiB9XG4gIHwgeyB0eXBlOiBcInVuaW9uXCI7IHZhbHVlOiBWYWxpZGF0b3JKU09OW10gfTtcblxuZXhwb3J0IHR5cGUgUmVjb3JkS2V5VmFsaWRhdG9ySlNPTiA9XG4gIHwgeyB0eXBlOiBcInN0cmluZ1wiIH1cbiAgfCB7IHR5cGU6IFwiaWRcIjsgdGFibGVOYW1lOiBzdHJpbmcgfVxuICB8IHsgdHlwZTogXCJ1bmlvblwiOyB2YWx1ZTogUmVjb3JkS2V5VmFsaWRhdG9ySlNPTltdIH07XG5cbmV4cG9ydCB0eXBlIFJlY29yZFZhbHVlVmFsaWRhdG9ySlNPTiA9IE9iamVjdEZpZWxkVHlwZSAmIHsgb3B0aW9uYWw6IGZhbHNlIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/validators.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/values/value.js":
/*!******************************************************!*\
  !*** ./node_modules/convex/dist/esm/values/value.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   base64ToBigInt: () => (/* binding */ base64ToBigInt),\n/* harmony export */   bigIntToBase64: () => (/* binding */ bigIntToBase64),\n/* harmony export */   convexOrUndefinedToJson: () => (/* binding */ convexOrUndefinedToJson),\n/* harmony export */   convexToJson: () => (/* binding */ convexToJson),\n/* harmony export */   jsonToConvex: () => (/* binding */ jsonToConvex),\n/* harmony export */   modernBase64ToBigInt: () => (/* binding */ modernBase64ToBigInt),\n/* harmony export */   modernBigIntToBase64: () => (/* binding */ modernBigIntToBase64),\n/* harmony export */   patchValueToJson: () => (/* binding */ patchValueToJson),\n/* harmony export */   slowBase64ToBigInt: () => (/* binding */ slowBase64ToBigInt),\n/* harmony export */   slowBigIntToBase64: () => (/* binding */ slowBigIntToBase64),\n/* harmony export */   stringifyValueForError: () => (/* binding */ stringifyValueForError)\n/* harmony export */ });\n/* harmony import */ var _base64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64.js */ \"(ssr)/./node_modules/convex/dist/esm/values/base64.js\");\n/* harmony import */ var _common_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/index.js */ \"(ssr)/./node_modules/convex/dist/esm/common/index.js\");\n\n\n\nconst LITTLE_ENDIAN = true;\nconst MIN_INT64 = BigInt(\"-9223372036854775808\");\nconst MAX_INT64 = BigInt(\"9223372036854775807\");\nconst ZERO = BigInt(\"0\");\nconst EIGHT = BigInt(\"8\");\nconst TWOFIFTYSIX = BigInt(\"256\");\nfunction isSpecial(n) {\n    return Number.isNaN(n) || !Number.isFinite(n) || Object.is(n, -0);\n}\nfunction slowBigIntToBase64(value) {\n    if (value < ZERO) {\n        value -= MIN_INT64 + MIN_INT64;\n    }\n    let hex = value.toString(16);\n    if (hex.length % 2 === 1) hex = \"0\" + hex;\n    const bytes = new Uint8Array(new ArrayBuffer(8));\n    let i = 0;\n    for (const hexByte of hex.match(/.{2}/g).reverse()){\n        bytes.set([\n            parseInt(hexByte, 16)\n        ], i++);\n        value >>= EIGHT;\n    }\n    return _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(bytes);\n}\nfunction slowBase64ToBigInt(encoded) {\n    const integerBytes = _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(encoded);\n    if (integerBytes.byteLength !== 8) {\n        throw new Error(`Received ${integerBytes.byteLength} bytes, expected 8 for $integer`);\n    }\n    let value = ZERO;\n    let power = ZERO;\n    for (const byte of integerBytes){\n        value += BigInt(byte) * TWOFIFTYSIX ** power;\n        power++;\n    }\n    if (value > MAX_INT64) {\n        value += MIN_INT64 + MIN_INT64;\n    }\n    return value;\n}\nfunction modernBigIntToBase64(value) {\n    if (value < MIN_INT64 || MAX_INT64 < value) {\n        throw new Error(`BigInt ${value} does not fit into a 64-bit signed integer.`);\n    }\n    const buffer = new ArrayBuffer(8);\n    new DataView(buffer).setBigInt64(0, value, true);\n    return _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(new Uint8Array(buffer));\n}\nfunction modernBase64ToBigInt(encoded) {\n    const integerBytes = _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(encoded);\n    if (integerBytes.byteLength !== 8) {\n        throw new Error(`Received ${integerBytes.byteLength} bytes, expected 8 for $integer`);\n    }\n    const intBytesView = new DataView(integerBytes.buffer);\n    return intBytesView.getBigInt64(0, true);\n}\nconst bigIntToBase64 = DataView.prototype.setBigInt64 ? modernBigIntToBase64 : slowBigIntToBase64;\nconst base64ToBigInt = DataView.prototype.getBigInt64 ? modernBase64ToBigInt : slowBase64ToBigInt;\nconst MAX_IDENTIFIER_LEN = 1024;\nfunction validateObjectField(k) {\n    if (k.length > MAX_IDENTIFIER_LEN) {\n        throw new Error(`Field name ${k} exceeds maximum field name length ${MAX_IDENTIFIER_LEN}.`);\n    }\n    if (k.startsWith(\"$\")) {\n        throw new Error(`Field name ${k} starts with a '$', which is reserved.`);\n    }\n    for(let i = 0; i < k.length; i += 1){\n        const charCode = k.charCodeAt(i);\n        if (charCode < 32 || charCode >= 127) {\n            throw new Error(`Field name ${k} has invalid character '${k[i]}': Field names can only contain non-control ASCII characters`);\n        }\n    }\n}\nfunction jsonToConvex(value) {\n    if (value === null) {\n        return value;\n    }\n    if (typeof value === \"boolean\") {\n        return value;\n    }\n    if (typeof value === \"number\") {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        return value;\n    }\n    if (Array.isArray(value)) {\n        return value.map((value2)=>jsonToConvex(value2));\n    }\n    if (typeof value !== \"object\") {\n        throw new Error(`Unexpected type of ${value}`);\n    }\n    const entries = Object.entries(value);\n    if (entries.length === 1) {\n        const key = entries[0][0];\n        if (key === \"$bytes\") {\n            if (typeof value.$bytes !== \"string\") {\n                throw new Error(`Malformed $bytes field on ${value}`);\n            }\n            return _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(value.$bytes).buffer;\n        }\n        if (key === \"$integer\") {\n            if (typeof value.$integer !== \"string\") {\n                throw new Error(`Malformed $integer field on ${value}`);\n            }\n            return base64ToBigInt(value.$integer);\n        }\n        if (key === \"$float\") {\n            if (typeof value.$float !== \"string\") {\n                throw new Error(`Malformed $float field on ${value}`);\n            }\n            const floatBytes = _base64_js__WEBPACK_IMPORTED_MODULE_0__.toByteArray(value.$float);\n            if (floatBytes.byteLength !== 8) {\n                throw new Error(`Received ${floatBytes.byteLength} bytes, expected 8 for $float`);\n            }\n            const floatBytesView = new DataView(floatBytes.buffer);\n            const float = floatBytesView.getFloat64(0, LITTLE_ENDIAN);\n            if (!isSpecial(float)) {\n                throw new Error(`Float ${float} should be encoded as a number`);\n            }\n            return float;\n        }\n        if (key === \"$set\") {\n            throw new Error(`Received a Set which is no longer supported as a Convex type.`);\n        }\n        if (key === \"$map\") {\n            throw new Error(`Received a Map which is no longer supported as a Convex type.`);\n        }\n    }\n    const out = {};\n    for (const [k, v] of Object.entries(value)){\n        validateObjectField(k);\n        out[k] = jsonToConvex(v);\n    }\n    return out;\n}\nconst MAX_VALUE_FOR_ERROR_LEN = 16384;\nfunction stringifyValueForError(value) {\n    const str = JSON.stringify(value, (_key, value2)=>{\n        if (value2 === void 0) {\n            return \"undefined\";\n        }\n        if (typeof value2 === \"bigint\") {\n            return `${value2.toString()}n`;\n        }\n        return value2;\n    });\n    if (str.length > MAX_VALUE_FOR_ERROR_LEN) {\n        const rest = \"[...truncated]\";\n        let truncateAt = MAX_VALUE_FOR_ERROR_LEN - rest.length;\n        const codePoint = str.codePointAt(truncateAt - 1);\n        if (codePoint !== void 0 && codePoint > 65535) {\n            truncateAt -= 1;\n        }\n        return str.substring(0, truncateAt) + rest;\n    }\n    return str;\n}\nfunction convexToJsonInternal(value, originalValue, context, includeTopLevelUndefined) {\n    if (value === void 0) {\n        const contextText = context && ` (present at path ${context} in original object ${stringifyValueForError(originalValue)})`;\n        throw new Error(`undefined is not a valid Convex value${contextText}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`);\n    }\n    if (value === null) {\n        return value;\n    }\n    if (typeof value === \"bigint\") {\n        if (value < MIN_INT64 || MAX_INT64 < value) {\n            throw new Error(`BigInt ${value} does not fit into a 64-bit signed integer.`);\n        }\n        return {\n            $integer: bigIntToBase64(value)\n        };\n    }\n    if (typeof value === \"number\") {\n        if (isSpecial(value)) {\n            const buffer = new ArrayBuffer(8);\n            new DataView(buffer).setFloat64(0, value, LITTLE_ENDIAN);\n            return {\n                $float: _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(new Uint8Array(buffer))\n            };\n        } else {\n            return value;\n        }\n    }\n    if (typeof value === \"boolean\") {\n        return value;\n    }\n    if (typeof value === \"string\") {\n        return value;\n    }\n    if (value instanceof ArrayBuffer) {\n        return {\n            $bytes: _base64_js__WEBPACK_IMPORTED_MODULE_0__.fromByteArray(new Uint8Array(value))\n        };\n    }\n    if (Array.isArray(value)) {\n        return value.map((value2, i)=>convexToJsonInternal(value2, originalValue, context + `[${i}]`, false));\n    }\n    if (value instanceof Set) {\n        throw new Error(errorMessageForUnsupportedType(context, \"Set\", [\n            ...value\n        ], originalValue));\n    }\n    if (value instanceof Map) {\n        throw new Error(errorMessageForUnsupportedType(context, \"Map\", [\n            ...value\n        ], originalValue));\n    }\n    if (!(0,_common_index_js__WEBPACK_IMPORTED_MODULE_1__.isSimpleObject)(value)) {\n        const theType = value?.constructor?.name;\n        const typeName = theType ? `${theType} ` : \"\";\n        throw new Error(errorMessageForUnsupportedType(context, typeName, value, originalValue));\n    }\n    const out = {};\n    const entries = Object.entries(value);\n    entries.sort(([k1, _v1], [k2, _v2])=>k1 === k2 ? 0 : k1 < k2 ? -1 : 1);\n    for (const [k, v] of entries){\n        if (v !== void 0) {\n            validateObjectField(k);\n            out[k] = convexToJsonInternal(v, originalValue, context + `.${k}`, false);\n        } else if (includeTopLevelUndefined) {\n            validateObjectField(k);\n            out[k] = convexOrUndefinedToJsonInternal(v, originalValue, context + `.${k}`);\n        }\n    }\n    return out;\n}\nfunction errorMessageForUnsupportedType(context, typeName, value, originalValue) {\n    if (context) {\n        return `${typeName}${stringifyValueForError(value)} is not a supported Convex type (present at path ${context} in original object ${stringifyValueForError(originalValue)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`;\n    } else {\n        return `${typeName}${stringifyValueForError(value)} is not a supported Convex type.`;\n    }\n}\nfunction convexOrUndefinedToJsonInternal(value, originalValue, context) {\n    if (value === void 0) {\n        return {\n            $undefined: null\n        };\n    } else {\n        if (originalValue === void 0) {\n            throw new Error(`Programming error. Current value is ${stringifyValueForError(value)} but original value is undefined`);\n        }\n        return convexToJsonInternal(value, originalValue, context, false);\n    }\n}\nfunction convexToJson(value) {\n    return convexToJsonInternal(value, value, \"\", false);\n}\nfunction convexOrUndefinedToJson(value) {\n    return convexOrUndefinedToJsonInternal(value, value, \"\");\n}\nfunction patchValueToJson(value) {\n    return convexToJsonInternal(value, value, \"\", true);\n} //# sourceMappingURL=value.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZhbHVlcy92YWx1ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQU93QjtBQUNPO0FBRS9CLE1BQU0sZ0JBQWdCO0FBRXRCLE1BQU0sWUFBWSxPQUFPLHNCQUFzQjtBQUMvQyxNQUFNLFlBQVksT0FBTyxxQkFBcUI7QUFDOUMsTUFBTSxPQUFPLE9BQU8sR0FBRztBQUN2QixNQUFNLFFBQVEsT0FBTyxHQUFHO0FBQ3hCLE1BQU0sY0FBYyxPQUFPLEtBQUs7QUFrRWhDLFNBQVMsVUFBVSxHQUFXO0lBQzVCLE9BQU8sT0FBTyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sU0FBUyxDQUFDLEtBQUssT0FBTyxHQUFHLEdBQUcsRUFBRTtBQUNsRTtBQUVPLFNBQVMsbUJBQW1CLE9BQXVCO0lBRXhELElBQUksUUFBUSxNQUFNO1FBQ2hCLFNBQVMsWUFBWTtJQUN2QjtJQUNBLElBQUksTUFBTSxNQUFNLFNBQVMsRUFBRTtJQUMzQixJQUFJLElBQUksU0FBUyxNQUFNLEVBQUcsT0FBTSxNQUFNO0lBRXRDLE1BQU0sUUFBUSxJQUFJLFdBQVcsSUFBSSxZQUFZLENBQUMsQ0FBQztJQUMvQyxJQUFJLElBQUk7SUFDUixXQUFXLFdBQVcsSUFBSSxNQUFNLE9BQU8sRUFBRyxRQUFRLEVBQUc7UUFDbkQsTUFBTSxJQUFJO1lBQUMsU0FBUyxTQUFTLEVBQUUsQ0FBQztTQUFBLEVBQUcsR0FBRztRQUN0QyxVQUFVO0lBQ1o7SUFDQSxPQUFPLHFEQUFPLENBQWMsS0FBSztBQUNuQztBQUVPLFNBQVMsbUJBQW1CLFNBQXlCO0lBQzFELE1BQU0sZUFBZSxtREFBTyxDQUFZLE9BQU87SUFDL0MsSUFBSSxhQUFhLGVBQWUsR0FBRztRQUNqQyxNQUFNLElBQUksTUFDUixZQUFZLGFBQWEsVUFBVTtJQUV2QztJQUNBLElBQUksUUFBUTtJQUNaLElBQUksUUFBUTtJQUNaLFdBQVcsUUFBUSxhQUFjO1FBQy9CLFNB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QWtCLFFBQVc7WUFFL0IsTUFBTSxJQUFJLE1BQ1IsdUNBQXVDLHVCQUNyQyxPQUNEO1FBRUw7UUFDQSxPQUFPLHFCQUFxQixPQUFPLGVBQWUsU0FBUyxLQUFLO0lBQ2xFO0FBQ0Y7QUFjTyxTQUFTLGFBQWEsT0FBeUI7SUFDcEQsT0FBTyxxQkFBcUIsT0FBTyxPQUFPLElBQUksS0FBSztBQUNyRDtBQUlPLFNBQVMsd0JBQXdCLE9BQXFDO0lBQzNFLE9BQU8sZ0NBQWdDLE9BQU8sT0FBTyxFQUFFO0FBQ3pEO0FBU08sU0FBUyxpQkFBaUIsT0FBeUI7SUFDeEQsT0FBTyxxQkFBcUIsT0FBTyxPQUFPLElBQUksSUFBSTtBQUNwRCIsInNvdXJjZXMiOlsiL1VzZXJzL3NyYy92YWx1ZXMvdmFsdWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVdGlsaXRpZXMgZm9yIHdvcmtpbmcgd2l0aCB2YWx1ZXMgc3RvcmVkIGluIENvbnZleC5cbiAqXG4gKiBZb3UgY2FuIHNlZSB0aGUgZnVsbCBzZXQgb2Ygc3VwcG9ydGVkIHR5cGVzIGF0XG4gKiBbVHlwZXNdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3R5cGVzKS5cbiAqIEBtb2R1bGVcbiAqL1xuaW1wb3J0ICogYXMgQmFzZTY0IGZyb20gXCIuL2Jhc2U2NC5qc1wiO1xuaW1wb3J0IHsgaXNTaW1wbGVPYmplY3QgfSBmcm9tIFwiLi4vY29tbW9uL2luZGV4LmpzXCI7XG5cbmNvbnN0IExJVFRMRV9FTkRJQU4gPSB0cnVlO1xuLy8gVGhpcyBjb2RlIGlzIHVzZWQgYnkgY29kZSB0aGF0IG1heSBub3QgaGF2ZSBiaWdpbnQgbGl0ZXJhbHMuXG5jb25zdCBNSU5fSU5UNjQgPSBCaWdJbnQoXCItOTIyMzM3MjAzNjg1NDc3NTgwOFwiKTtcbmNvbnN0IE1BWF9JTlQ2NCA9IEJpZ0ludChcIjkyMjMzNzIwMzY4NTQ3NzU4MDdcIik7XG5jb25zdCBaRVJPID0gQmlnSW50KFwiMFwiKTtcbmNvbnN0IEVJR0hUID0gQmlnSW50KFwiOFwiKTtcbmNvbnN0IFRXT0ZJRlRZU0lYID0gQmlnSW50KFwiMjU2XCIpO1xuXG4vKipcbiAqIFRoZSB0eXBlIG9mIEphdmFTY3JpcHQgdmFsdWVzIHNlcmlhbGl6YWJsZSB0byBKU09OLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgSlNPTlZhbHVlID1cbiAgfCBudWxsXG4gIHwgYm9vbGVhblxuICB8IG51bWJlclxuICB8IHN0cmluZ1xuICB8IEpTT05WYWx1ZVtdXG4gIHwgeyBba2V5OiBzdHJpbmddOiBKU09OVmFsdWUgfTtcblxuLyoqXG4gKiBBbiBpZGVudGlmaWVyIGZvciBhIGRvY3VtZW50IGluIENvbnZleC5cbiAqXG4gKiBDb252ZXggZG9jdW1lbnRzIGFyZSB1bmlxdWVseSBpZGVudGlmaWVkIGJ5IHRoZWlyIGBJZGAsIHdoaWNoIGlzIGFjY2Vzc2libGVcbiAqIG9uIHRoZSBgX2lkYCBmaWVsZC4gVG8gbGVhcm4gbW9yZSwgc2VlIFtEb2N1bWVudCBJRHNdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L2RhdGFiYXNlL2RvY3VtZW50LWlkcykuXG4gKlxuICogRG9jdW1lbnRzIGNhbiBiZSBsb2FkZWQgdXNpbmcgYGRiLmdldChpZClgIGluIHF1ZXJ5IGFuZCBtdXRhdGlvbiBmdW5jdGlvbnMuXG4gKlxuICogSURzIGFyZSBiYXNlIDMyIGVuY29kZWQgc3RyaW5ncyB3aGljaCBhcmUgVVJMIHNhZmUuXG4gKlxuICogSURzIGFyZSBqdXN0IHN0cmluZ3MgYXQgcnVudGltZSwgYnV0IHRoaXMgdHlwZSBjYW4gYmUgdXNlZCB0byBkaXN0aW5ndWlzaCB0aGVtIGZyb20gb3RoZXJcbiAqIHN0cmluZ3MgYXQgY29tcGlsZSB0aW1lLlxuICpcbiAqIElmIHlvdSdyZSB1c2luZyBjb2RlIGdlbmVyYXRpb24sIHVzZSB0aGUgYElkYCB0eXBlIGdlbmVyYXRlZCBmb3IgeW91ciBkYXRhIG1vZGVsIGluXG4gKiBgY29udmV4L19nZW5lcmF0ZWQvZGF0YU1vZGVsLmQudHNgLlxuICpcbiAqIEB0eXBlUGFyYW0gVGFibGVOYW1lIC0gQSBzdHJpbmcgbGl0ZXJhbCB0eXBlIG9mIHRoZSB0YWJsZSBuYW1lIChsaWtlIFwidXNlcnNcIikuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgdHlwZSBJZDxUYWJsZU5hbWUgZXh0ZW5kcyBzdHJpbmc+ID0gc3RyaW5nICYgeyBfX3RhYmxlTmFtZTogVGFibGVOYW1lIH07XG5cbi8qKlxuICogQSB2YWx1ZSBzdXBwb3J0ZWQgYnkgQ29udmV4LlxuICpcbiAqIFZhbHVlcyBjYW4gYmU6XG4gKiAtIHN0b3JlZCBpbnNpZGUgb2YgZG9jdW1lbnRzLlxuICogLSB1c2VkIGFzIGFyZ3VtZW50cyBhbmQgcmV0dXJuIHR5cGVzIHRvIHF1ZXJpZXMgYW5kIG11dGF0aW9uIGZ1bmN0aW9ucy5cbiAqXG4gKiBZb3UgY2FuIHNlZSB0aGUgZnVsbCBzZXQgb2Ygc3VwcG9ydGVkIHR5cGVzIGF0XG4gKiBbVHlwZXNdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3R5cGVzKS5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCB0eXBlIFZhbHVlID1cbiAgfCBudWxsXG4gIHwgYmlnaW50XG4gIHwgbnVtYmVyXG4gIHwgYm9vbGVhblxuICB8IHN0cmluZ1xuICB8IEFycmF5QnVmZmVyXG4gIHwgVmFsdWVbXVxuICB8IHsgW2tleTogc3RyaW5nXTogdW5kZWZpbmVkIHwgVmFsdWUgfTtcblxuLyoqXG4gKiBUaGUgdHlwZXMgb2Yge0BsaW5rIFZhbHVlfSB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcHJlc2VudCBudW1iZXJzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IHR5cGUgTnVtZXJpY1ZhbHVlID0gYmlnaW50IHwgbnVtYmVyO1xuXG5mdW5jdGlvbiBpc1NwZWNpYWwobjogbnVtYmVyKSB7XG4gIHJldHVybiBOdW1iZXIuaXNOYU4obikgfHwgIU51bWJlci5pc0Zpbml0ZShuKSB8fCBPYmplY3QuaXMobiwgLTApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2xvd0JpZ0ludFRvQmFzZTY0KHZhbHVlOiBiaWdpbnQpOiBzdHJpbmcge1xuICAvLyB0aGUgY29udmVyc2lvbiBpcyBlYXN5IGlmIHdlIHByZXRlbmQgaXQncyB1bnNpZ25lZFxuICBpZiAodmFsdWUgPCBaRVJPKSB7XG4gICAgdmFsdWUgLT0gTUlOX0lOVDY0ICsgTUlOX0lOVDY0O1xuICB9XG4gIGxldCBoZXggPSB2YWx1ZS50b1N0cmluZygxNik7XG4gIGlmIChoZXgubGVuZ3RoICUgMiA9PT0gMSkgaGV4ID0gXCIwXCIgKyBoZXg7XG5cbiAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIoOCkpO1xuICBsZXQgaSA9IDA7XG4gIGZvciAoY29uc3QgaGV4Qnl0ZSBvZiBoZXgubWF0Y2goLy57Mn0vZykhLnJldmVyc2UoKSkge1xuICAgIGJ5dGVzLnNldChbcGFyc2VJbnQoaGV4Qnl0ZSwgMTYpXSwgaSsrKTtcbiAgICB2YWx1ZSA+Pj0gRUlHSFQ7XG4gIH1cbiAgcmV0dXJuIEJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ5dGVzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNsb3dCYXNlNjRUb0JpZ0ludChlbmNvZGVkOiBzdHJpbmcpOiBiaWdpbnQge1xuICBjb25zdCBpbnRlZ2VyQnl0ZXMgPSBCYXNlNjQudG9CeXRlQXJyYXkoZW5jb2RlZCk7XG4gIGlmIChpbnRlZ2VyQnl0ZXMuYnl0ZUxlbmd0aCAhPT0gOCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBSZWNlaXZlZCAke2ludGVnZXJCeXRlcy5ieXRlTGVuZ3RofSBieXRlcywgZXhwZWN0ZWQgOCBmb3IgJGludGVnZXJgLFxuICAgICk7XG4gIH1cbiAgbGV0IHZhbHVlID0gWkVSTztcbiAgbGV0IHBvd2VyID0gWkVSTztcbiAgZm9yIChjb25zdCBieXRlIG9mIGludGVnZXJCeXRlcykge1xuICAgIHZhbHVlICs9IEJpZ0ludChieXRlKSAqIFRXT0ZJRlRZU0lYICoqIHBvd2VyO1xuICAgIHBvd2VyKys7XG4gIH1cbiAgaWYgKHZhbHVlID4gTUFYX0lOVDY0KSB7XG4gICAgdmFsdWUgKz0gTUlOX0lOVDY0ICsgTUlOX0lOVDY0O1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vZGVybkJpZ0ludFRvQmFzZTY0KHZhbHVlOiBiaWdpbnQpOiBzdHJpbmcge1xuICBpZiAodmFsdWUgPCBNSU5fSU5UNjQgfHwgTUFYX0lOVDY0IDwgdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQmlnSW50ICR7dmFsdWV9IGRvZXMgbm90IGZpdCBpbnRvIGEgNjQtYml0IHNpZ25lZCBpbnRlZ2VyLmAsXG4gICAgKTtcbiAgfVxuICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gIG5ldyBEYXRhVmlldyhidWZmZXIpLnNldEJpZ0ludDY0KDAsIHZhbHVlLCB0cnVlKTtcbiAgcmV0dXJuIEJhc2U2NC5mcm9tQnl0ZUFycmF5KG5ldyBVaW50OEFycmF5KGJ1ZmZlcikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW9kZXJuQmFzZTY0VG9CaWdJbnQoZW5jb2RlZDogc3RyaW5nKTogYmlnaW50IHtcbiAgY29uc3QgaW50ZWdlckJ5dGVzID0gQmFzZTY0LnRvQnl0ZUFycmF5KGVuY29kZWQpO1xuICBpZiAoaW50ZWdlckJ5dGVzLmJ5dGVMZW5ndGggIT09IDgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgUmVjZWl2ZWQgJHtpbnRlZ2VyQnl0ZXMuYnl0ZUxlbmd0aH0gYnl0ZXMsIGV4cGVjdGVkIDggZm9yICRpbnRlZ2VyYCxcbiAgICApO1xuICB9XG4gIGNvbnN0IGludEJ5dGVzVmlldyA9IG5ldyBEYXRhVmlldyhpbnRlZ2VyQnl0ZXMuYnVmZmVyKTtcbiAgcmV0dXJuIGludEJ5dGVzVmlldy5nZXRCaWdJbnQ2NCgwLCB0cnVlKTtcbn1cblxuLy8gRmFsbCBiYWNrIHRvIGEgc2xvd2VyIHZlcnNpb24gb24gU2FmYXJpIDE0IHdoaWNoIGxhY2tzIHRoZXNlIEFQSXMuXG5leHBvcnQgY29uc3QgYmlnSW50VG9CYXNlNjQgPSAoRGF0YVZpZXcucHJvdG90eXBlIGFzIGFueSkuc2V0QmlnSW50NjRcbiAgPyBtb2Rlcm5CaWdJbnRUb0Jhc2U2NFxuICA6IHNsb3dCaWdJbnRUb0Jhc2U2NDtcbmV4cG9ydCBjb25zdCBiYXNlNjRUb0JpZ0ludCA9IChEYXRhVmlldy5wcm90b3R5cGUgYXMgYW55KS5nZXRCaWdJbnQ2NFxuICA/IG1vZGVybkJhc2U2NFRvQmlnSW50XG4gIDogc2xvd0Jhc2U2NFRvQmlnSW50O1xuXG5jb25zdCBNQVhfSURFTlRJRklFUl9MRU4gPSAxMDI0O1xuXG5mdW5jdGlvbiB2YWxpZGF0ZU9iamVjdEZpZWxkKGs6IHN0cmluZykge1xuICBpZiAoay5sZW5ndGggPiBNQVhfSURFTlRJRklFUl9MRU4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgRmllbGQgbmFtZSAke2t9IGV4Y2VlZHMgbWF4aW11bSBmaWVsZCBuYW1lIGxlbmd0aCAke01BWF9JREVOVElGSUVSX0xFTn0uYCxcbiAgICApO1xuICB9XG4gIGlmIChrLnN0YXJ0c1dpdGgoXCIkXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGaWVsZCBuYW1lICR7a30gc3RhcnRzIHdpdGggYSAnJCcsIHdoaWNoIGlzIHJlc2VydmVkLmApO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgay5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGNoYXJDb2RlID0gay5jaGFyQ29kZUF0KGkpO1xuICAgIC8vIE5vbi1jb250cm9sIEFTQ0lJIGNoYXJhY3RlcnNcbiAgICBpZiAoY2hhckNvZGUgPCAzMiB8fCBjaGFyQ29kZSA+PSAxMjcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEZpZWxkIG5hbWUgJHtrfSBoYXMgaW52YWxpZCBjaGFyYWN0ZXIgJyR7a1tpXX0nOiBGaWVsZCBuYW1lcyBjYW4gb25seSBjb250YWluIG5vbi1jb250cm9sIEFTQ0lJIGNoYXJhY3RlcnNgLFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIENvbnZleCB2YWx1ZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBkZXNlcmlhbGl6ZSBzZXJpYWxpemVkIEludDY0cyB0byBgQmlnSW50YHMsIEJ5dGVzIHRvIGBBcnJheUJ1ZmZlcmBzIGV0Yy5cbiAqXG4gKiBUbyBsZWFybiBtb3JlIGFib3V0IENvbnZleCB2YWx1ZXMsIHNlZSBbVHlwZXNdKGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3R5cGVzKS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIENvbnZleCB2YWx1ZSBwcmV2aW91c2x5IGNyZWF0ZWQgd2l0aCB7QGxpbmsgY29udmV4VG9Kc29ufS5cbiAqIEByZXR1cm5zIFRoZSBKYXZhU2NyaXB0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBDb252ZXggdmFsdWUuXG4gKlxuICogQHB1YmxpY1xuICovXG5leHBvcnQgZnVuY3Rpb24ganNvblRvQ29udmV4KHZhbHVlOiBKU09OVmFsdWUpOiBWYWx1ZSB7XG4gIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgodmFsdWUpID0+IGpzb25Ub0NvbnZleCh2YWx1ZSkpO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdHlwZSBvZiAke3ZhbHVlIGFzIGFueX1gKTtcbiAgfVxuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXModmFsdWUpO1xuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDEpIHtcbiAgICBjb25zdCBrZXkgPSBlbnRyaWVzWzBdWzBdO1xuICAgIGlmIChrZXkgPT09IFwiJGJ5dGVzXCIpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUuJGJ5dGVzICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWFsZm9ybWVkICRieXRlcyBmaWVsZCBvbiAke3ZhbHVlIGFzIGFueX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBCYXNlNjQudG9CeXRlQXJyYXkodmFsdWUuJGJ5dGVzKS5idWZmZXI7XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwiJGludGVnZXJcIikge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZS4kaW50ZWdlciAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1hbGZvcm1lZCAkaW50ZWdlciBmaWVsZCBvbiAke3ZhbHVlIGFzIGFueX1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiYXNlNjRUb0JpZ0ludCh2YWx1ZS4kaW50ZWdlcik7XG4gICAgfVxuICAgIGlmIChrZXkgPT09IFwiJGZsb2F0XCIpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUuJGZsb2F0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTWFsZm9ybWVkICRmbG9hdCBmaWVsZCBvbiAke3ZhbHVlIGFzIGFueX1gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGZsb2F0Qnl0ZXMgPSBCYXNlNjQudG9CeXRlQXJyYXkodmFsdWUuJGZsb2F0KTtcbiAgICAgIGlmIChmbG9hdEJ5dGVzLmJ5dGVMZW5ndGggIT09IDgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBSZWNlaXZlZCAke2Zsb2F0Qnl0ZXMuYnl0ZUxlbmd0aH0gYnl0ZXMsIGV4cGVjdGVkIDggZm9yICRmbG9hdGAsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjb25zdCBmbG9hdEJ5dGVzVmlldyA9IG5ldyBEYXRhVmlldyhmbG9hdEJ5dGVzLmJ1ZmZlcik7XG4gICAgICBjb25zdCBmbG9hdCA9IGZsb2F0Qnl0ZXNWaWV3LmdldEZsb2F0NjQoMCwgTElUVExFX0VORElBTik7XG4gICAgICBpZiAoIWlzU3BlY2lhbChmbG9hdCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGbG9hdCAke2Zsb2F0fSBzaG91bGQgYmUgZW5jb2RlZCBhcyBhIG51bWJlcmApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZsb2F0O1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcIiRzZXRcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgUmVjZWl2ZWQgYSBTZXQgd2hpY2ggaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBhcyBhIENvbnZleCB0eXBlLmAsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoa2V5ID09PSBcIiRtYXBcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgUmVjZWl2ZWQgYSBNYXAgd2hpY2ggaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCBhcyBhIENvbnZleCB0eXBlLmAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBjb25zdCBvdXQ6IHsgW2tleTogc3RyaW5nXTogVmFsdWUgfSA9IHt9O1xuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh2YWx1ZSkpIHtcbiAgICB2YWxpZGF0ZU9iamVjdEZpZWxkKGspO1xuICAgIG91dFtrXSA9IGpzb25Ub0NvbnZleCh2KTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG5jb25zdCBNQVhfVkFMVUVfRk9SX0VSUk9SX0xFTiA9IDE2Mzg0O1xuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5VmFsdWVGb3JFcnJvcih2YWx1ZTogYW55KSB7XG4gIGNvbnN0IHN0ciA9IEpTT04uc3RyaW5naWZ5KHZhbHVlLCAoX2tleSwgdmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQnkgZGVmYXVsdCBgSlNPTi5zdHJpbmdpZnlgIGNvbnZlcnRzIHVuZGVmaW5lZCwgZnVuY3Rpb25zLCBzeW1ib2xzLFxuICAgICAgLy8gSW5maW5pdHksIGFuZCBOYU4gdG8gbnVsbCB3aGljaCBwcm9kdWNlcyBhIGNvbmZ1c2luZyBlcnJvciBtZXNzYWdlLlxuICAgICAgLy8gV2UgZGVhbCB3aXRoIGB1bmRlZmluZWRgIHNwZWNpZmljYWxseSBiZWNhdXNlIGl0J3MgdGhlIG1vc3QgY29tbW9uLlxuICAgICAgLy8gSWRlYWxseSB3ZSdkIHVzZSBhIHByZXR0eS1wcmludGluZyBsaWJyYXJ5IHRoYXQgcHJpbnRzIGB1bmRlZmluZWRgXG4gICAgICAvLyAobm8gcXVvdGVzKSwgYnV0IGl0IG1pZ2h0IG5vdCBiZSB3b3J0aCB0aGUgYnVuZGxlIHNpemUgY29zdC5cbiAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAvLyBgSlNPTi5zdHJpbmdpZnlgIHRocm93cyBvbiBiaWdpbnRzIGJ5IGRlZmF1bHQuXG4gICAgICByZXR1cm4gYCR7dmFsdWUudG9TdHJpbmcoKX1uYDtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbiAgaWYgKHN0ci5sZW5ndGggPiBNQVhfVkFMVUVfRk9SX0VSUk9SX0xFTikge1xuICAgIGNvbnN0IHJlc3QgPSBcIlsuLi50cnVuY2F0ZWRdXCI7XG4gICAgbGV0IHRydW5jYXRlQXQgPSBNQVhfVkFMVUVfRk9SX0VSUk9SX0xFTiAtIHJlc3QubGVuZ3RoO1xuICAgIGNvbnN0IGNvZGVQb2ludCA9IHN0ci5jb2RlUG9pbnRBdCh0cnVuY2F0ZUF0IC0gMSk7XG4gICAgaWYgKGNvZGVQb2ludCAhPT0gdW5kZWZpbmVkICYmIGNvZGVQb2ludCA+IDB4ZmZmZikge1xuICAgICAgLy8gZG9uJ3Qgc3BsaXQgYSBzdXJyb2dhdGUgcGFpciBpbiBoYWxmXG4gICAgICB0cnVuY2F0ZUF0IC09IDE7XG4gICAgfVxuICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIHRydW5jYXRlQXQpICsgcmVzdDtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuXG5mdW5jdGlvbiBjb252ZXhUb0pzb25JbnRlcm5hbChcbiAgdmFsdWU6IFZhbHVlLFxuICBvcmlnaW5hbFZhbHVlOiBWYWx1ZSxcbiAgY29udGV4dDogc3RyaW5nLFxuICBpbmNsdWRlVG9wTGV2ZWxVbmRlZmluZWQ6IGJvb2xlYW4sXG4pOiBKU09OVmFsdWUge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGNvbnRleHRUZXh0ID1cbiAgICAgIGNvbnRleHQgJiZcbiAgICAgIGAgKHByZXNlbnQgYXQgcGF0aCAke2NvbnRleHR9IGluIG9yaWdpbmFsIG9iamVjdCAke3N0cmluZ2lmeVZhbHVlRm9yRXJyb3IoXG4gICAgICAgIG9yaWdpbmFsVmFsdWUsXG4gICAgICApfSlgO1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGB1bmRlZmluZWQgaXMgbm90IGEgdmFsaWQgQ29udmV4IHZhbHVlJHtjb250ZXh0VGV4dH0uIFRvIGxlYXJuIGFib3V0IENvbnZleCdzIHN1cHBvcnRlZCB0eXBlcywgc2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3R5cGVzLmAsXG4gICAgKTtcbiAgfVxuICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgIGlmICh2YWx1ZSA8IE1JTl9JTlQ2NCB8fCBNQVhfSU5UNjQgPCB2YWx1ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQmlnSW50ICR7dmFsdWV9IGRvZXMgbm90IGZpdCBpbnRvIGEgNjQtYml0IHNpZ25lZCBpbnRlZ2VyLmAsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4geyAkaW50ZWdlcjogYmlnSW50VG9CYXNlNjQodmFsdWUpIH07XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChpc1NwZWNpYWwodmFsdWUpKSB7XG4gICAgICBjb25zdCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoOCk7XG4gICAgICBuZXcgRGF0YVZpZXcoYnVmZmVyKS5zZXRGbG9hdDY0KDAsIHZhbHVlLCBMSVRUTEVfRU5ESUFOKTtcbiAgICAgIHJldHVybiB7ICRmbG9hdDogQmFzZTY0LmZyb21CeXRlQXJyYXkobmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSkgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIHsgJGJ5dGVzOiBCYXNlNjQuZnJvbUJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2YWx1ZSkpIH07XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgodmFsdWUsIGkpID0+XG4gICAgICBjb252ZXhUb0pzb25JbnRlcm5hbCh2YWx1ZSwgb3JpZ2luYWxWYWx1ZSwgY29udGV4dCArIGBbJHtpfV1gLCBmYWxzZSksXG4gICAgKTtcbiAgfVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvck1lc3NhZ2VGb3JVbnN1cHBvcnRlZFR5cGUoY29udGV4dCwgXCJTZXRcIiwgWy4uLnZhbHVlXSwgb3JpZ2luYWxWYWx1ZSksXG4gICAgKTtcbiAgfVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBNYXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvck1lc3NhZ2VGb3JVbnN1cHBvcnRlZFR5cGUoY29udGV4dCwgXCJNYXBcIiwgWy4uLnZhbHVlXSwgb3JpZ2luYWxWYWx1ZSksXG4gICAgKTtcbiAgfVxuXG4gIGlmICghaXNTaW1wbGVPYmplY3QodmFsdWUpKSB7XG4gICAgY29uc3QgdGhlVHlwZSA9IHZhbHVlPy5jb25zdHJ1Y3Rvcj8ubmFtZTtcbiAgICBjb25zdCB0eXBlTmFtZSA9IHRoZVR5cGUgPyBgJHt0aGVUeXBlfSBgIDogXCJcIjtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBlcnJvck1lc3NhZ2VGb3JVbnN1cHBvcnRlZFR5cGUoY29udGV4dCwgdHlwZU5hbWUsIHZhbHVlLCBvcmlnaW5hbFZhbHVlKSxcbiAgICApO1xuICB9XG5cbiAgY29uc3Qgb3V0OiB7IFtrZXk6IHN0cmluZ106IEpTT05WYWx1ZSB9ID0ge307XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh2YWx1ZSk7XG4gIGVudHJpZXMuc29ydCgoW2sxLCBfdjFdLCBbazIsIF92Ml0pID0+IChrMSA9PT0gazIgPyAwIDogazEgPCBrMiA/IC0xIDogMSkpO1xuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsaWRhdGVPYmplY3RGaWVsZChrKTtcbiAgICAgIG91dFtrXSA9IGNvbnZleFRvSnNvbkludGVybmFsKHYsIG9yaWdpbmFsVmFsdWUsIGNvbnRleHQgKyBgLiR7a31gLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChpbmNsdWRlVG9wTGV2ZWxVbmRlZmluZWQpIHtcbiAgICAgIHZhbGlkYXRlT2JqZWN0RmllbGQoayk7XG4gICAgICBvdXRba10gPSBjb252ZXhPclVuZGVmaW5lZFRvSnNvbkludGVybmFsKFxuICAgICAgICB2LFxuICAgICAgICBvcmlnaW5hbFZhbHVlLFxuICAgICAgICBjb250ZXh0ICsgYC4ke2t9YCxcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGVycm9yTWVzc2FnZUZvclVuc3VwcG9ydGVkVHlwZShcbiAgY29udGV4dDogc3RyaW5nLFxuICB0eXBlTmFtZTogc3RyaW5nLFxuICB2YWx1ZTogYW55LFxuICBvcmlnaW5hbFZhbHVlOiBhbnksXG4pIHtcbiAgaWYgKGNvbnRleHQpIHtcbiAgICByZXR1cm4gYCR7dHlwZU5hbWV9JHtzdHJpbmdpZnlWYWx1ZUZvckVycm9yKFxuICAgICAgdmFsdWUsXG4gICAgKX0gaXMgbm90IGEgc3VwcG9ydGVkIENvbnZleCB0eXBlIChwcmVzZW50IGF0IHBhdGggJHtjb250ZXh0fSBpbiBvcmlnaW5hbCBvYmplY3QgJHtzdHJpbmdpZnlWYWx1ZUZvckVycm9yKFxuICAgICAgb3JpZ2luYWxWYWx1ZSxcbiAgICApfSkuIFRvIGxlYXJuIGFib3V0IENvbnZleCdzIHN1cHBvcnRlZCB0eXBlcywgc2VlIGh0dHBzOi8vZG9jcy5jb252ZXguZGV2L3VzaW5nL3R5cGVzLmA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke3R5cGVOYW1lfSR7c3RyaW5naWZ5VmFsdWVGb3JFcnJvcihcbiAgICAgIHZhbHVlLFxuICAgICl9IGlzIG5vdCBhIHN1cHBvcnRlZCBDb252ZXggdHlwZS5gO1xuICB9XG59XG5cbi8vIGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uSW50ZXJuYWwgd3JhcHBlciBleGlzdHMgc28gd2UgY2FuIHBpcGUgdGhyb3VnaCB0aGVcbi8vIGBvcmlnaW5hbFZhbHVlYCBhbmQgYGNvbnRleHRgIHRocm91Z2ggZm9yIGJldHRlciBlcnJvciBtZXNzYWdpbmcuXG5mdW5jdGlvbiBjb252ZXhPclVuZGVmaW5lZFRvSnNvbkludGVybmFsKFxuICB2YWx1ZTogVmFsdWUgfCB1bmRlZmluZWQsXG4gIG9yaWdpbmFsVmFsdWU6IFZhbHVlIHwgdW5kZWZpbmVkLFxuICBjb250ZXh0OiBzdHJpbmcsXG4pOiBKU09OVmFsdWUge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB7ICR1bmRlZmluZWQ6IG51bGwgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAob3JpZ2luYWxWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBUaGlzIHNob3VsZCBub3QgaGFwcGVuLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgUHJvZ3JhbW1pbmcgZXJyb3IuIEN1cnJlbnQgdmFsdWUgaXMgJHtzdHJpbmdpZnlWYWx1ZUZvckVycm9yKFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICApfSBidXQgb3JpZ2luYWwgdmFsdWUgaXMgdW5kZWZpbmVkYCxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBjb252ZXhUb0pzb25JbnRlcm5hbCh2YWx1ZSwgb3JpZ2luYWxWYWx1ZSwgY29udGV4dCwgZmFsc2UpO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBhIENvbnZleCB2YWx1ZSB0byBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi5cbiAqXG4gKiBVc2Uge0BsaW5rIGpzb25Ub0NvbnZleH0gdG8gcmVjcmVhdGUgdGhlIG9yaWdpbmFsIHZhbHVlLlxuICpcbiAqIFRvIGxlYXJuIG1vcmUgYWJvdXQgQ29udmV4IHZhbHVlcywgc2VlIFtUeXBlc10oaHR0cHM6Ly9kb2NzLmNvbnZleC5kZXYvdXNpbmcvdHlwZXMpLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIEEgQ29udmV4IHZhbHVlIHRvIGNvbnZlcnQgaW50byBKU09OLlxuICogQHJldHVybnMgVGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYHZhbHVlYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXhUb0pzb24odmFsdWU6IFZhbHVlKTogSlNPTlZhbHVlIHtcbiAgcmV0dXJuIGNvbnZleFRvSnNvbkludGVybmFsKHZhbHVlLCB2YWx1ZSwgXCJcIiwgZmFsc2UpO1xufVxuXG4vLyBDb252ZXJ0IGEgQ29udmV4IHZhbHVlIG9yIGB1bmRlZmluZWRgIGludG8gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uXG4vLyBgdW5kZWZpbmVkYCBpcyB1c2VkIGluIGZpbHRlcnMgdG8gcmVwcmVzZW50IGEgbWlzc2luZyBvYmplY3QgZmllbGQuXG5leHBvcnQgZnVuY3Rpb24gY29udmV4T3JVbmRlZmluZWRUb0pzb24odmFsdWU6IFZhbHVlIHwgdW5kZWZpbmVkKTogSlNPTlZhbHVlIHtcbiAgcmV0dXJuIGNvbnZleE9yVW5kZWZpbmVkVG9Kc29uSW50ZXJuYWwodmFsdWUsIHZhbHVlLCBcIlwiKTtcbn1cblxuLyoqXG4gKiBTaW1pbGFyIHRvIGNvbnZleFRvSnNvbiBidXQgYWxzbyBzZXJpYWxpemVzIHRvcCBsZXZlbCB1bmRlZmluZWQgZmllbGRzXG4gKiB1c2luZyBjb252ZXhPclVuZGVmaW5lZFRvSnNvbigpLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSAtIEEgQ29udmV4IHZhbHVlIHRvIGNvbnZlcnQgaW50byBKU09OLlxuICogQHJldHVybnMgVGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYHZhbHVlYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoVmFsdWVUb0pzb24odmFsdWU6IFZhbHVlKTogSlNPTlZhbHVlIHtcbiAgcmV0dXJuIGNvbnZleFRvSnNvbkludGVybmFsKHZhbHVlLCB2YWx1ZSwgXCJcIiwgdHJ1ZSk7XG59XG4iXSwibmFtZXMiOlsidmFsdWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/values/value.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/convex/dist/esm/vendor/jwt-decode/index.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InvalidTokenError: () => (/* binding */ InvalidTokenError),\n/* harmony export */   jwtDecode: () => (/* binding */ jwtDecode)\n/* harmony export */ });\n\nclass InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (_m, p)=>{\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch(output.length % 4){\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    } catch  {\n        return atob(output);\n    }\n}\nfunction jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    } catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    } catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n} //# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZlbmRvci9qd3QtZGVjb2RlL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQW9CTyxNQUFNLDBCQUEwQixNQUFNO0FBQUM7QUFFOUMsa0JBQWtCLFVBQVUsT0FBTztBQUVuQyxTQUFTLGlCQUFpQixLQUFhO0lBQ3JDLE9BQU8sbUJBQ0wsS0FBSyxHQUFHLEVBQUUsUUFBUSxRQUFRLENBQUMsSUFBSTtRQUM3QixJQUFJLE9BQVEsRUFBYSxXQUFXLENBQUMsRUFBRSxTQUFTLEVBQUUsRUFBRSxZQUFZO1FBQ2hFLElBQUksS0FBSyxTQUFTLEdBQUc7WUFDbkIsT0FBTyxNQUFNO1FBQ2Y7UUFDQSxPQUFPLE1BQU07SUFDZixDQUFDO0FBRUw7QUFFQSxTQUFTLGdCQUFnQixLQUFhO0lBQ3BDLElBQUksU0FBUyxJQUFJLFFBQVEsTUFBTSxHQUFHLEVBQUUsUUFBUSxNQUFNLEdBQUc7SUFDckQsT0FBUSxPQUFPLFNBQVMsR0FBRztRQUN6QixLQUFLO1lBQ0g7UUFDRixLQUFLO1lBQ0gsVUFBVTtZQUNWO1FBQ0YsS0FBSztZQUNILFVBQVU7WUFDVjtRQUNGO1lBQ0UsTUFBTSxJQUFJLE1BQU0sNENBQTRDO0lBQ2hFO0lBRUEsSUFBSTtRQUNGLE9BQU8saUJBQWlCLE1BQU07SUFDaEMsU0FBUTtRQUNOLE9BQU8sS0FBSyxNQUFNO0lBQ3BCO0FBQ0Y7QUFVTyxTQUFTLFVBQ2QsT0FDQSxTQUNHO0lBQ0gsSUFBSSxPQUFPLFVBQVUsVUFBVTtRQUM3QixNQUFNLElBQUksa0JBQWtCLDJDQUEyQztJQUN6RTtJQUVBLHNCQUFZLEVBQUM7SUFFYixNQUFNLE1BQU0sUUFBUSxXQUFXLE9BQU8sSUFBSTtJQUMxQyxNQUFNLE9BQU8sTUFBTSxNQUFNLEdBQUcsRUFBRSxHQUFHO0lBRWpDLElBQUksT0FBTyxTQUFTLFVBQVU7UUFDNUIsTUFBTSxJQUFJLGtCQUNSLDBDQUEwQyxNQUFNLENBQUM7SUFFckQ7SUFFQSxJQUFJO0lBQ0osSUFBSTtRQUNGLFVBQVUsZ0JBQWdCLElBQUk7SUFDaEMsU0FBUyxHQUFHO1FBQ1YsTUFBTSxJQUFJLGtCQUNSLHFEQUFxRCxNQUFNLENBQUMsS0FBTSxFQUFZLE9BQU87SUFFekY7SUFFQSxJQUFJO1FBQ0YsT0FBTyxLQUFLLE1BQU0sT0FBTztJQUMzQixTQUFTLEdBQUc7UUFDVixNQUFNLElBQUksa0JBQ1IsbURBQW1ELE1BQU0sQ0FBQyxLQUFNLEVBQVksT0FBTztJQUV2RjtBQUNGIiwic291cmNlcyI6WyIvc3JjL3ZlbmRvci9qd3QtZGVjb2RlL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgSnd0RGVjb2RlT3B0aW9ucyB7XG4gIGhlYWRlcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSnd0SGVhZGVyIHtcbiAgdHlwPzogc3RyaW5nO1xuICBhbGc/OiBzdHJpbmc7XG4gIGtpZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBKd3RQYXlsb2FkIHtcbiAgaXNzPzogc3RyaW5nO1xuICBzdWI/OiBzdHJpbmc7XG4gIGF1ZD86IHN0cmluZ1tdIHwgc3RyaW5nO1xuICBleHA/OiBudW1iZXI7XG4gIG5iZj86IG51bWJlcjtcbiAgaWF0PzogbnVtYmVyO1xuICBqdGk/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBJbnZhbGlkVG9rZW5FcnJvciBleHRlbmRzIEVycm9yIHt9XG5cbkludmFsaWRUb2tlbkVycm9yLnByb3RvdHlwZS5uYW1lID0gXCJJbnZhbGlkVG9rZW5FcnJvclwiO1xuXG5mdW5jdGlvbiBiNjREZWNvZGVVbmljb2RlKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoXG4gICAgYXRvYihzdHIpLnJlcGxhY2UoLyguKS9nLCAoX20sIHApID0+IHtcbiAgICAgIGxldCBjb2RlID0gKHAgYXMgc3RyaW5nKS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgaWYgKGNvZGUubGVuZ3RoIDwgMikge1xuICAgICAgICBjb2RlID0gXCIwXCIgKyBjb2RlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFwiJVwiICsgY29kZTtcbiAgICB9KSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gYmFzZTY0VXJsRGVjb2RlKHN0cjogc3RyaW5nKSB7XG4gIGxldCBvdXRwdXQgPSBzdHIucmVwbGFjZSgvLS9nLCBcIitcIikucmVwbGFjZSgvXy9nLCBcIi9cIik7XG4gIHN3aXRjaCAob3V0cHV0Lmxlbmd0aCAlIDQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBvdXRwdXQgKz0gXCI9PVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgb3V0cHV0ICs9IFwiPVwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImJhc2U2NCBzdHJpbmcgaXMgbm90IG9mIHRoZSBjb3JyZWN0IGxlbmd0aFwiKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGI2NERlY29kZVVuaWNvZGUob3V0cHV0KTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGF0b2Iob3V0cHV0KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gand0RGVjb2RlPFQgPSBKd3RIZWFkZXI+KFxuICB0b2tlbjogc3RyaW5nLFxuICBvcHRpb25zOiBKd3REZWNvZGVPcHRpb25zICYgeyBoZWFkZXI6IHRydWUgfSxcbik6IFQ7XG5leHBvcnQgZnVuY3Rpb24gand0RGVjb2RlPFQgPSBKd3RQYXlsb2FkPihcbiAgdG9rZW46IHN0cmluZyxcbiAgb3B0aW9ucz86IEp3dERlY29kZU9wdGlvbnMsXG4pOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIGp3dERlY29kZTxUID0gSnd0SGVhZGVyIHwgSnd0UGF5bG9hZD4oXG4gIHRva2VuOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBKd3REZWNvZGVPcHRpb25zLFxuKTogVCB7XG4gIGlmICh0eXBlb2YgdG9rZW4gIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgSW52YWxpZFRva2VuRXJyb3IoXCJJbnZhbGlkIHRva2VuIHNwZWNpZmllZDogbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgfVxuXG4gIG9wdGlvbnMgfHw9IHt9O1xuXG4gIGNvbnN0IHBvcyA9IG9wdGlvbnMuaGVhZGVyID09PSB0cnVlID8gMCA6IDE7XG4gIGNvbnN0IHBhcnQgPSB0b2tlbi5zcGxpdChcIi5cIilbcG9zXTtcblxuICBpZiAodHlwZW9mIHBhcnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICB0aHJvdyBuZXcgSW52YWxpZFRva2VuRXJyb3IoXG4gICAgICBgSW52YWxpZCB0b2tlbiBzcGVjaWZpZWQ6IG1pc3NpbmcgcGFydCAjJHtwb3MgKyAxfWAsXG4gICAgKTtcbiAgfVxuXG4gIGxldCBkZWNvZGVkOiBzdHJpbmc7XG4gIHRyeSB7XG4gICAgZGVjb2RlZCA9IGJhc2U2NFVybERlY29kZShwYXJ0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBJbnZhbGlkVG9rZW5FcnJvcihcbiAgICAgIGBJbnZhbGlkIHRva2VuIHNwZWNpZmllZDogaW52YWxpZCBiYXNlNjQgZm9yIHBhcnQgIyR7cG9zICsgMX0gKCR7KGUgYXMgRXJyb3IpLm1lc3NhZ2V9KWAsXG4gICAgKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCkgYXMgVDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBJbnZhbGlkVG9rZW5FcnJvcihcbiAgICAgIGBJbnZhbGlkIHRva2VuIHNwZWNpZmllZDogaW52YWxpZCBqc29uIGZvciBwYXJ0ICMke3BvcyArIDF9ICgkeyhlIGFzIEVycm9yKS5tZXNzYWdlfSlgLFxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/vendor/jwt-decode/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/convex/dist/esm/vendor/long.js":
/*!*****************************************************!*\
  !*** ./node_modules/convex/dist/esm/vendor/long.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Long: () => (/* binding */ Long)\n/* harmony export */ });\n\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value)=>key in obj ? __defProp(obj, key, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value\n    }) : obj[key] = value;\nvar __publicField = (obj, key, value)=>__defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass Long {\n    constructor(low, high){\n        __publicField(this, \"low\");\n        __publicField(this, \"high\");\n        __publicField(this, \"__isUnsignedLong__\");\n        this.low = low | 0;\n        this.high = high | 0;\n        this.__isUnsignedLong__ = true;\n    }\n    static isLong(obj) {\n        return (obj && obj.__isUnsignedLong__) === true;\n    }\n    // prettier-ignore\n    static fromBytesLE(bytes) {\n        return new Long(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24);\n    }\n    // prettier-ignore\n    toBytesLE() {\n        const hi = this.high;\n        const lo = this.low;\n        return [\n            lo & 255,\n            lo >>> 8 & 255,\n            lo >>> 16 & 255,\n            lo >>> 24,\n            hi & 255,\n            hi >>> 8 & 255,\n            hi >>> 16 & 255,\n            hi >>> 24\n        ];\n    }\n    static fromNumber(value) {\n        if (isNaN(value)) return UZERO;\n        if (value < 0) return UZERO;\n        if (value >= TWO_PWR_64_DBL) return MAX_UNSIGNED_VALUE;\n        return new Long(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0);\n    }\n    toString() {\n        return (BigInt(this.high) * BigInt(TWO_PWR_32_DBL) + BigInt(this.low)).toString();\n    }\n    equals(other) {\n        if (!Long.isLong(other)) other = Long.fromValue(other);\n        if (this.high >>> 31 === 1 && other.high >>> 31 === 1) return false;\n        return this.high === other.high && this.low === other.low;\n    }\n    notEquals(other) {\n        return !this.equals(other);\n    }\n    comp(other) {\n        if (!Long.isLong(other)) other = Long.fromValue(other);\n        if (this.equals(other)) return 0;\n        return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;\n    }\n    lessThanOrEqual(other) {\n        return this.comp(/* validates */ other) <= 0;\n    }\n    static fromValue(val) {\n        if (typeof val === \"number\") return Long.fromNumber(val);\n        return new Long(val.low, val.high);\n    }\n}\nconst UZERO = new Long(0, 0);\nconst TWO_PWR_16_DBL = 1 << 16;\nconst TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;\nconst TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;\nconst MAX_UNSIGNED_VALUE = new Long(4294967295 | 0, 4294967295 | 0); //# sourceMappingURL=long.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvY29udmV4L2Rpc3QvZXNtL3ZlbmRvci9sb25nLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFxTk8sTUFBTSxLQUFLO0lBU2hCLFlBQVksS0FBYSxLQUFjO1FBUnZDO1FBQ0E7UUFDQTtRQU9FLEtBQUssTUFBTSxNQUFNO1FBQ2pCLEtBQUssT0FBTyxPQUFPO1FBQ25CLEtBQUsscUJBQXFCO0lBQzVCO0lBUkEsT0FBTyxPQUFPLEtBQVc7UUFDdkIsUUFBUSxPQUFPLElBQUksd0JBQXdCO0lBQzdDO0lBQUE7SUFTQSxPQUFPLFlBQVksT0FBdUI7UUFDeEMsT0FBTyxJQUFJLEtBQ1QsTUFBTSxDQUFDLElBQ1AsTUFBTSxDQUFDLEtBQUssSUFDWixNQUFNLENBQUMsS0FBSyxLQUNaLE1BQU0sQ0FBQyxLQUFLLElBQ1osTUFBTSxDQUFDLElBQ1AsTUFBTSxDQUFDLEtBQUssSUFDWixNQUFNLENBQUMsS0FBSyxLQUNaLE1BQU0sQ0FBQyxLQUFLO0lBRWhCO0lBQUE7SUFHQSxZQUFZO1FBQ1YsTUFBTSxLQUFLLEtBQUs7UUFDaEIsTUFBTSxLQUFLLEtBQUs7UUFDaEIsT0FBTztZQUNMLEtBQUs7WUFDTCxPQUFPLElBQUk7WUFDWCxPQUFPLEtBQUs7WUFDWixPQUFPO1lBQ1AsS0FBSztZQUNMLE9BQU8sSUFBSTtZQUNYLE9BQU8sS0FBSztZQUNaLE9BQU87U0FDVDtJQUNGO0lBRUEsT0FBTyxXQUFXLE9BQWU7UUFDL0IsSUFBSSxNQUFNLEtBQUssRUFBRyxRQUFPO1FBQ3pCLElBQUksUUFBUSxFQUFHLFFBQU87UUFDdEIsSUFBSSxTQUFTLGVBQWdCLFFBQU87UUFDcEMsT0FBTyxJQUFJLEtBQUssUUFBUSxpQkFBaUIsR0FBSSxRQUFRLGlCQUFrQixDQUFDO0lBQzFFO0lBRUEsV0FBVztRQUNULFFBQ0UsT0FBTyxLQUFLLElBQUksSUFBSSxPQUFPLGNBQWMsSUFDekMsT0FBTyxLQUFLLEdBQUcsR0FDZixTQUFTO0lBQ2I7SUFFQSxPQUFPLE9BQWE7UUFDbEIsSUFBSSxDQUFDLEtBQUssT0FBTyxLQUFLLEVBQUcsU0FBUSxLQUFLLFVBQVUsS0FBSztRQUNyRCxJQUFJLEtBQUssU0FBUyxPQUFPLEtBQUssTUFBTSxTQUFTLE9BQU8sRUFBRyxRQUFPO1FBQzlELE9BQU8sS0FBSyxTQUFTLE1BQU0sUUFBUSxLQUFLLFFBQVEsTUFBTTtJQUN4RDtJQUVBLFVBQVUsT0FBYTtRQUNyQixPQUFPLENBQUMsS0FBSyxPQUFPLEtBQUs7SUFDM0I7SUFFQSxLQUFLLE9BQWE7UUFDaEIsSUFBSSxDQUFDLEtBQUssT0FBTyxLQUFLLEVBQUcsU0FBUSxLQUFLLFVBQVUsS0FBSztRQUNyRCxJQUFJLEtBQUssT0FBTyxLQUFLLEVBQUcsUUFBTztRQUMvQixPQUFPLE1BQU0sU0FBUyxJQUFJLEtBQUssU0FBUyxLQUNyQyxNQUFNLFNBQVMsS0FBSyxRQUFRLE1BQU0sUUFBUSxJQUFJLEtBQUssUUFBUSxJQUMxRCxLQUNBO0lBQ047SUFFQSxnQkFBZ0IsT0FBYTtRQUMzQixPQUFPLEtBQUsscUJBQXFCLFVBQVU7SUFDN0M7SUFFQSxPQUFPLFVBQVUsS0FBVTtRQUN6QixJQUFJLE9BQU8sUUFBUSxTQUFVLFFBQU8sS0FBSyxXQUFXLEdBQUc7UUFFdkQsT0FBTyxJQUFJLEtBQUssSUFBSSxLQUFLLElBQUksSUFBSTtJQUNuQztBQUNGO0FBRUEsTUFBTSxRQUFRLElBQUksS0FBSyxHQUFHLENBQUM7QUFDM0IsTUFBTSxpQkFBaUIsS0FBSztBQUM1QixNQUFNLGlCQUFpQixpQkFBaUI7QUFDeEMsTUFBTSxpQkFBaUIsaUJBQWlCO0FBQ3hDLE1BQU0scUJBQXFCLElBQUksS0FBSyxhQUFhLEdBQUcsYUFBYSxDQUFDIiwic291cmNlcyI6WyIvVXNlcnMvc3JjL3ZlbmRvci9sb25nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcGxlbWVudHMgYW4gdW5zaWduZWQgbG9uZy5cbi8vIFRoaXMgaXMgYSBzdWJzZXQgb2YgaHR0cHM6Ly9naXRodWIuY29tL2Rjb2RlSU8vTG9uZy5qcyxcbi8vIHZlbmRvcmVkIHRvIGRlY3JlYXNlIGJ1bmRsZSBzaXplLlxuLy8gQ29weXJpZ2h0IERhbmllbCBXaXJ0eiA8ZGNvZGVAZGNvZGUuaW8+XG4vLyBMaWNlbnNlOiBBcGFjaGUgVmVyc2lvbiAyLjBcbi8qXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFwYWNoZSBMaWNlbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBWZXJzaW9uIDIuMCwgSmFudWFyeSAyMDA0XG4gICAgICAgICAgICAgICAgICAgICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvXG5cbiAgIFRFUk1TIEFORCBDT05ESVRJT05TIEZPUiBVU0UsIFJFUFJPRFVDVElPTiwgQU5EIERJU1RSSUJVVElPTlxuXG4gICAxLiBEZWZpbml0aW9ucy5cblxuICAgICAgXCJMaWNlbnNlXCIgc2hhbGwgbWVhbiB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgZm9yIHVzZSwgcmVwcm9kdWN0aW9uLFxuICAgICAgYW5kIGRpc3RyaWJ1dGlvbiBhcyBkZWZpbmVkIGJ5IFNlY3Rpb25zIDEgdGhyb3VnaCA5IG9mIHRoaXMgZG9jdW1lbnQuXG5cbiAgICAgIFwiTGljZW5zb3JcIiBzaGFsbCBtZWFuIHRoZSBjb3B5cmlnaHQgb3duZXIgb3IgZW50aXR5IGF1dGhvcml6ZWQgYnlcbiAgICAgIHRoZSBjb3B5cmlnaHQgb3duZXIgdGhhdCBpcyBncmFudGluZyB0aGUgTGljZW5zZS5cblxuICAgICAgXCJMZWdhbCBFbnRpdHlcIiBzaGFsbCBtZWFuIHRoZSB1bmlvbiBvZiB0aGUgYWN0aW5nIGVudGl0eSBhbmQgYWxsXG4gICAgICBvdGhlciBlbnRpdGllcyB0aGF0IGNvbnRyb2wsIGFyZSBjb250cm9sbGVkIGJ5LCBvciBhcmUgdW5kZXIgY29tbW9uXG4gICAgICBjb250cm9sIHdpdGggdGhhdCBlbnRpdHkuIEZvciB0aGUgcHVycG9zZXMgb2YgdGhpcyBkZWZpbml0aW9uLFxuICAgICAgXCJjb250cm9sXCIgbWVhbnMgKGkpIHRoZSBwb3dlciwgZGlyZWN0IG9yIGluZGlyZWN0LCB0byBjYXVzZSB0aGVcbiAgICAgIGRpcmVjdGlvbiBvciBtYW5hZ2VtZW50IG9mIHN1Y2ggZW50aXR5LCB3aGV0aGVyIGJ5IGNvbnRyYWN0IG9yXG4gICAgICBvdGhlcndpc2UsIG9yIChpaSkgb3duZXJzaGlwIG9mIGZpZnR5IHBlcmNlbnQgKDUwJSkgb3IgbW9yZSBvZiB0aGVcbiAgICAgIG91dHN0YW5kaW5nIHNoYXJlcywgb3IgKGlpaSkgYmVuZWZpY2lhbCBvd25lcnNoaXAgb2Ygc3VjaCBlbnRpdHkuXG5cbiAgICAgIFwiWW91XCIgKG9yIFwiWW91clwiKSBzaGFsbCBtZWFuIGFuIGluZGl2aWR1YWwgb3IgTGVnYWwgRW50aXR5XG4gICAgICBleGVyY2lzaW5nIHBlcm1pc3Npb25zIGdyYW50ZWQgYnkgdGhpcyBMaWNlbnNlLlxuXG4gICAgICBcIlNvdXJjZVwiIGZvcm0gc2hhbGwgbWVhbiB0aGUgcHJlZmVycmVkIGZvcm0gZm9yIG1ha2luZyBtb2RpZmljYXRpb25zLFxuICAgICAgaW5jbHVkaW5nIGJ1dCBub3QgbGltaXRlZCB0byBzb2Z0d2FyZSBzb3VyY2UgY29kZSwgZG9jdW1lbnRhdGlvblxuICAgICAgc291cmNlLCBhbmQgY29uZmlndXJhdGlvbiBmaWxlcy5cblxuICAgICAgXCJPYmplY3RcIiBmb3JtIHNoYWxsIG1lYW4gYW55IGZvcm0gcmVzdWx0aW5nIGZyb20gbWVjaGFuaWNhbFxuICAgICAgdHJhbnNmb3JtYXRpb24gb3IgdHJhbnNsYXRpb24gb2YgYSBTb3VyY2UgZm9ybSwgaW5jbHVkaW5nIGJ1dFxuICAgICAgbm90IGxpbWl0ZWQgdG8gY29tcGlsZWQgb2JqZWN0IGNvZGUsIGdlbmVyYXRlZCBkb2N1bWVudGF0aW9uLFxuICAgICAgYW5kIGNvbnZlcnNpb25zIHRvIG90aGVyIG1lZGlhIHR5cGVzLlxuXG4gICAgICBcIldvcmtcIiBzaGFsbCBtZWFuIHRoZSB3b3JrIG9mIGF1dGhvcnNoaXAsIHdoZXRoZXIgaW4gU291cmNlIG9yXG4gICAgICBPYmplY3QgZm9ybSwgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIExpY2Vuc2UsIGFzIGluZGljYXRlZCBieSBhXG4gICAgICBjb3B5cmlnaHQgbm90aWNlIHRoYXQgaXMgaW5jbHVkZWQgaW4gb3IgYXR0YWNoZWQgdG8gdGhlIHdvcmtcbiAgICAgIChhbiBleGFtcGxlIGlzIHByb3ZpZGVkIGluIHRoZSBBcHBlbmRpeCBiZWxvdykuXG5cbiAgICAgIFwiRGVyaXZhdGl2ZSBXb3Jrc1wiIHNoYWxsIG1lYW4gYW55IHdvcmssIHdoZXRoZXIgaW4gU291cmNlIG9yIE9iamVjdFxuICAgICAgZm9ybSwgdGhhdCBpcyBiYXNlZCBvbiAob3IgZGVyaXZlZCBmcm9tKSB0aGUgV29yayBhbmQgZm9yIHdoaWNoIHRoZVxuICAgICAgZWRpdG9yaWFsIHJldmlzaW9ucywgYW5ub3RhdGlvbnMsIGVsYWJvcmF0aW9ucywgb3Igb3RoZXIgbW9kaWZpY2F0aW9uc1xuICAgICAgcmVwcmVzZW50LCBhcyBhIHdob2xlLCBhbiBvcmlnaW5hbCB3b3JrIG9mIGF1dGhvcnNoaXAuIEZvciB0aGUgcHVycG9zZXNcbiAgICAgIG9mIHRoaXMgTGljZW5zZSwgRGVyaXZhdGl2ZSBXb3JrcyBzaGFsbCBub3QgaW5jbHVkZSB3b3JrcyB0aGF0IHJlbWFpblxuICAgICAgc2VwYXJhYmxlIGZyb20sIG9yIG1lcmVseSBsaW5rIChvciBiaW5kIGJ5IG5hbWUpIHRvIHRoZSBpbnRlcmZhY2VzIG9mLFxuICAgICAgdGhlIFdvcmsgYW5kIERlcml2YXRpdmUgV29ya3MgdGhlcmVvZi5cblxuICAgICAgXCJDb250cmlidXRpb25cIiBzaGFsbCBtZWFuIGFueSB3b3JrIG9mIGF1dGhvcnNoaXAsIGluY2x1ZGluZ1xuICAgICAgdGhlIG9yaWdpbmFsIHZlcnNpb24gb2YgdGhlIFdvcmsgYW5kIGFueSBtb2RpZmljYXRpb25zIG9yIGFkZGl0aW9uc1xuICAgICAgdG8gdGhhdCBXb3JrIG9yIERlcml2YXRpdmUgV29ya3MgdGhlcmVvZiwgdGhhdCBpcyBpbnRlbnRpb25hbGx5XG4gICAgICBzdWJtaXR0ZWQgdG8gTGljZW5zb3IgZm9yIGluY2x1c2lvbiBpbiB0aGUgV29yayBieSB0aGUgY29weXJpZ2h0IG93bmVyXG4gICAgICBvciBieSBhbiBpbmRpdmlkdWFsIG9yIExlZ2FsIEVudGl0eSBhdXRob3JpemVkIHRvIHN1Ym1pdCBvbiBiZWhhbGYgb2ZcbiAgICAgIHRoZSBjb3B5cmlnaHQgb3duZXIuIEZvciB0aGUgcHVycG9zZXMgb2YgdGhpcyBkZWZpbml0aW9uLCBcInN1Ym1pdHRlZFwiXG4gICAgICBtZWFucyBhbnkgZm9ybSBvZiBlbGVjdHJvbmljLCB2ZXJiYWwsIG9yIHdyaXR0ZW4gY29tbXVuaWNhdGlvbiBzZW50XG4gICAgICB0byB0aGUgTGljZW5zb3Igb3IgaXRzIHJlcHJlc2VudGF0aXZlcywgaW5jbHVkaW5nIGJ1dCBub3QgbGltaXRlZCB0b1xuICAgICAgY29tbXVuaWNhdGlvbiBvbiBlbGVjdHJvbmljIG1haWxpbmcgbGlzdHMsIHNvdXJjZSBjb2RlIGNvbnRyb2wgc3lzdGVtcyxcbiAgICAgIGFuZCBpc3N1ZSB0cmFja2luZyBzeXN0ZW1zIHRoYXQgYXJlIG1hbmFnZWQgYnksIG9yIG9uIGJlaGFsZiBvZiwgdGhlXG4gICAgICBMaWNlbnNvciBmb3IgdGhlIHB1cnBvc2Ugb2YgZGlzY3Vzc2luZyBhbmQgaW1wcm92aW5nIHRoZSBXb3JrLCBidXRcbiAgICAgIGV4Y2x1ZGluZyBjb21tdW5pY2F0aW9uIHRoYXQgaXMgY29uc3BpY3VvdXNseSBtYXJrZWQgb3Igb3RoZXJ3aXNlXG4gICAgICBkZXNpZ25hdGVkIGluIHdyaXRpbmcgYnkgdGhlIGNvcHlyaWdodCBvd25lciBhcyBcIk5vdCBhIENvbnRyaWJ1dGlvbi5cIlxuXG4gICAgICBcIkNvbnRyaWJ1dG9yXCIgc2hhbGwgbWVhbiBMaWNlbnNvciBhbmQgYW55IGluZGl2aWR1YWwgb3IgTGVnYWwgRW50aXR5XG4gICAgICBvbiBiZWhhbGYgb2Ygd2hvbSBhIENvbnRyaWJ1dGlvbiBoYXMgYmVlbiByZWNlaXZlZCBieSBMaWNlbnNvciBhbmRcbiAgICAgIHN1YnNlcXVlbnRseSBpbmNvcnBvcmF0ZWQgd2l0aGluIHRoZSBXb3JrLlxuXG4gICAyLiBHcmFudCBvZiBDb3B5cmlnaHQgTGljZW5zZS4gU3ViamVjdCB0byB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgb2ZcbiAgICAgIHRoaXMgTGljZW5zZSwgZWFjaCBDb250cmlidXRvciBoZXJlYnkgZ3JhbnRzIHRvIFlvdSBhIHBlcnBldHVhbCxcbiAgICAgIHdvcmxkd2lkZSwgbm9uLWV4Y2x1c2l2ZSwgbm8tY2hhcmdlLCByb3lhbHR5LWZyZWUsIGlycmV2b2NhYmxlXG4gICAgICBjb3B5cmlnaHQgbGljZW5zZSB0byByZXByb2R1Y2UsIHByZXBhcmUgRGVyaXZhdGl2ZSBXb3JrcyBvZixcbiAgICAgIHB1YmxpY2x5IGRpc3BsYXksIHB1YmxpY2x5IHBlcmZvcm0sIHN1YmxpY2Vuc2UsIGFuZCBkaXN0cmlidXRlIHRoZVxuICAgICAgV29yayBhbmQgc3VjaCBEZXJpdmF0aXZlIFdvcmtzIGluIFNvdXJjZSBvciBPYmplY3QgZm9ybS5cblxuICAgMy4gR3JhbnQgb2YgUGF0ZW50IExpY2Vuc2UuIFN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIG9mXG4gICAgICB0aGlzIExpY2Vuc2UsIGVhY2ggQ29udHJpYnV0b3IgaGVyZWJ5IGdyYW50cyB0byBZb3UgYSBwZXJwZXR1YWwsXG4gICAgICB3b3JsZHdpZGUsIG5vbi1leGNsdXNpdmUsIG5vLWNoYXJnZSwgcm95YWx0eS1mcmVlLCBpcnJldm9jYWJsZVxuICAgICAgKGV4Y2VwdCBhcyBzdGF0ZWQgaW4gdGhpcyBzZWN0aW9uKSBwYXRlbnQgbGljZW5zZSB0byBtYWtlLCBoYXZlIG1hZGUsXG4gICAgICB1c2UsIG9mZmVyIHRvIHNlbGwsIHNlbGwsIGltcG9ydCwgYW5kIG90aGVyd2lzZSB0cmFuc2ZlciB0aGUgV29yayxcbiAgICAgIHdoZXJlIHN1Y2ggbGljZW5zZSBhcHBsaWVzIG9ubHkgdG8gdGhvc2UgcGF0ZW50IGNsYWltcyBsaWNlbnNhYmxlXG4gICAgICBieSBzdWNoIENvbnRyaWJ1dG9yIHRoYXQgYXJlIG5lY2Vzc2FyaWx5IGluZnJpbmdlZCBieSB0aGVpclxuICAgICAgQ29udHJpYnV0aW9uKHMpIGFsb25lIG9yIGJ5IGNvbWJpbmF0aW9uIG9mIHRoZWlyIENvbnRyaWJ1dGlvbihzKVxuICAgICAgd2l0aCB0aGUgV29yayB0byB3aGljaCBzdWNoIENvbnRyaWJ1dGlvbihzKSB3YXMgc3VibWl0dGVkLiBJZiBZb3VcbiAgICAgIGluc3RpdHV0ZSBwYXRlbnQgbGl0aWdhdGlvbiBhZ2FpbnN0IGFueSBlbnRpdHkgKGluY2x1ZGluZyBhXG4gICAgICBjcm9zcy1jbGFpbSBvciBjb3VudGVyY2xhaW0gaW4gYSBsYXdzdWl0KSBhbGxlZ2luZyB0aGF0IHRoZSBXb3JrXG4gICAgICBvciBhIENvbnRyaWJ1dGlvbiBpbmNvcnBvcmF0ZWQgd2l0aGluIHRoZSBXb3JrIGNvbnN0aXR1dGVzIGRpcmVjdFxuICAgICAgb3IgY29udHJpYnV0b3J5IHBhdGVudCBpbmZyaW5nZW1lbnQsIHRoZW4gYW55IHBhdGVudCBsaWNlbnNlc1xuICAgICAgZ3JhbnRlZCB0byBZb3UgdW5kZXIgdGhpcyBMaWNlbnNlIGZvciB0aGF0IFdvcmsgc2hhbGwgdGVybWluYXRlXG4gICAgICBhcyBvZiB0aGUgZGF0ZSBzdWNoIGxpdGlnYXRpb24gaXMgZmlsZWQuXG5cbiAgIDQuIFJlZGlzdHJpYnV0aW9uLiBZb3UgbWF5IHJlcHJvZHVjZSBhbmQgZGlzdHJpYnV0ZSBjb3BpZXMgb2YgdGhlXG4gICAgICBXb3JrIG9yIERlcml2YXRpdmUgV29ya3MgdGhlcmVvZiBpbiBhbnkgbWVkaXVtLCB3aXRoIG9yIHdpdGhvdXRcbiAgICAgIG1vZGlmaWNhdGlvbnMsIGFuZCBpbiBTb3VyY2Ugb3IgT2JqZWN0IGZvcm0sIHByb3ZpZGVkIHRoYXQgWW91XG4gICAgICBtZWV0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuICAgICAgKGEpIFlvdSBtdXN0IGdpdmUgYW55IG90aGVyIHJlY2lwaWVudHMgb2YgdGhlIFdvcmsgb3JcbiAgICAgICAgICBEZXJpdmF0aXZlIFdvcmtzIGEgY29weSBvZiB0aGlzIExpY2Vuc2U7IGFuZFxuXG4gICAgICAoYikgWW91IG11c3QgY2F1c2UgYW55IG1vZGlmaWVkIGZpbGVzIHRvIGNhcnJ5IHByb21pbmVudCBub3RpY2VzXG4gICAgICAgICAgc3RhdGluZyB0aGF0IFlvdSBjaGFuZ2VkIHRoZSBmaWxlczsgYW5kXG5cbiAgICAgIChjKSBZb3UgbXVzdCByZXRhaW4sIGluIHRoZSBTb3VyY2UgZm9ybSBvZiBhbnkgRGVyaXZhdGl2ZSBXb3Jrc1xuICAgICAgICAgIHRoYXQgWW91IGRpc3RyaWJ1dGUsIGFsbCBjb3B5cmlnaHQsIHBhdGVudCwgdHJhZGVtYXJrLCBhbmRcbiAgICAgICAgICBhdHRyaWJ1dGlvbiBub3RpY2VzIGZyb20gdGhlIFNvdXJjZSBmb3JtIG9mIHRoZSBXb3JrLFxuICAgICAgICAgIGV4Y2x1ZGluZyB0aG9zZSBub3RpY2VzIHRoYXQgZG8gbm90IHBlcnRhaW4gdG8gYW55IHBhcnQgb2ZcbiAgICAgICAgICB0aGUgRGVyaXZhdGl2ZSBXb3JrczsgYW5kXG5cbiAgICAgIChkKSBJZiB0aGUgV29yayBpbmNsdWRlcyBhIFwiTk9USUNFXCIgdGV4dCBmaWxlIGFzIHBhcnQgb2YgaXRzXG4gICAgICAgICAgZGlzdHJpYnV0aW9uLCB0aGVuIGFueSBEZXJpdmF0aXZlIFdvcmtzIHRoYXQgWW91IGRpc3RyaWJ1dGUgbXVzdFxuICAgICAgICAgIGluY2x1ZGUgYSByZWFkYWJsZSBjb3B5IG9mIHRoZSBhdHRyaWJ1dGlvbiBub3RpY2VzIGNvbnRhaW5lZFxuICAgICAgICAgIHdpdGhpbiBzdWNoIE5PVElDRSBmaWxlLCBleGNsdWRpbmcgdGhvc2Ugbm90aWNlcyB0aGF0IGRvIG5vdFxuICAgICAgICAgIHBlcnRhaW4gdG8gYW55IHBhcnQgb2YgdGhlIERlcml2YXRpdmUgV29ya3MsIGluIGF0IGxlYXN0IG9uZVxuICAgICAgICAgIG9mIHRoZSBmb2xsb3dpbmcgcGxhY2VzOiB3aXRoaW4gYSBOT1RJQ0UgdGV4dCBmaWxlIGRpc3RyaWJ1dGVkXG4gICAgICAgICAgYXMgcGFydCBvZiB0aGUgRGVyaXZhdGl2ZSBXb3Jrczsgd2l0aGluIHRoZSBTb3VyY2UgZm9ybSBvclxuICAgICAgICAgIGRvY3VtZW50YXRpb24sIGlmIHByb3ZpZGVkIGFsb25nIHdpdGggdGhlIERlcml2YXRpdmUgV29ya3M7IG9yLFxuICAgICAgICAgIHdpdGhpbiBhIGRpc3BsYXkgZ2VuZXJhdGVkIGJ5IHRoZSBEZXJpdmF0aXZlIFdvcmtzLCBpZiBhbmRcbiAgICAgICAgICB3aGVyZXZlciBzdWNoIHRoaXJkLXBhcnR5IG5vdGljZXMgbm9ybWFsbHkgYXBwZWFyLiBUaGUgY29udGVudHNcbiAgICAgICAgICBvZiB0aGUgTk9USUNFIGZpbGUgYXJlIGZvciBpbmZvcm1hdGlvbmFsIHB1cnBvc2VzIG9ubHkgYW5kXG4gICAgICAgICAgZG8gbm90IG1vZGlmeSB0aGUgTGljZW5zZS4gWW91IG1heSBhZGQgWW91ciBvd24gYXR0cmlidXRpb25cbiAgICAgICAgICBub3RpY2VzIHdpdGhpbiBEZXJpdmF0aXZlIFdvcmtzIHRoYXQgWW91IGRpc3RyaWJ1dGUsIGFsb25nc2lkZVxuICAgICAgICAgIG9yIGFzIGFuIGFkZGVuZHVtIHRvIHRoZSBOT1RJQ0UgdGV4dCBmcm9tIHRoZSBXb3JrLCBwcm92aWRlZFxuICAgICAgICAgIHRoYXQgc3VjaCBhZGRpdGlvbmFsIGF0dHJpYnV0aW9uIG5vdGljZXMgY2Fubm90IGJlIGNvbnN0cnVlZFxuICAgICAgICAgIGFzIG1vZGlmeWluZyB0aGUgTGljZW5zZS5cblxuICAgICAgWW91IG1heSBhZGQgWW91ciBvd24gY29weXJpZ2h0IHN0YXRlbWVudCB0byBZb3VyIG1vZGlmaWNhdGlvbnMgYW5kXG4gICAgICBtYXkgcHJvdmlkZSBhZGRpdGlvbmFsIG9yIGRpZmZlcmVudCBsaWNlbnNlIHRlcm1zIGFuZCBjb25kaXRpb25zXG4gICAgICBmb3IgdXNlLCByZXByb2R1Y3Rpb24sIG9yIGRpc3RyaWJ1dGlvbiBvZiBZb3VyIG1vZGlmaWNhdGlvbnMsIG9yXG4gICAgICBmb3IgYW55IHN1Y2ggRGVyaXZhdGl2ZSBXb3JrcyBhcyBhIHdob2xlLCBwcm92aWRlZCBZb3VyIHVzZSxcbiAgICAgIHJlcHJvZHVjdGlvbiwgYW5kIGRpc3RyaWJ1dGlvbiBvZiB0aGUgV29yayBvdGhlcndpc2UgY29tcGxpZXMgd2l0aFxuICAgICAgdGhlIGNvbmRpdGlvbnMgc3RhdGVkIGluIHRoaXMgTGljZW5zZS5cblxuICAgNS4gU3VibWlzc2lvbiBvZiBDb250cmlidXRpb25zLiBVbmxlc3MgWW91IGV4cGxpY2l0bHkgc3RhdGUgb3RoZXJ3aXNlLFxuICAgICAgYW55IENvbnRyaWJ1dGlvbiBpbnRlbnRpb25hbGx5IHN1Ym1pdHRlZCBmb3IgaW5jbHVzaW9uIGluIHRoZSBXb3JrXG4gICAgICBieSBZb3UgdG8gdGhlIExpY2Vuc29yIHNoYWxsIGJlIHVuZGVyIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBvZlxuICAgICAgdGhpcyBMaWNlbnNlLCB3aXRob3V0IGFueSBhZGRpdGlvbmFsIHRlcm1zIG9yIGNvbmRpdGlvbnMuXG4gICAgICBOb3R3aXRoc3RhbmRpbmcgdGhlIGFib3ZlLCBub3RoaW5nIGhlcmVpbiBzaGFsbCBzdXBlcnNlZGUgb3IgbW9kaWZ5XG4gICAgICB0aGUgdGVybXMgb2YgYW55IHNlcGFyYXRlIGxpY2Vuc2UgYWdyZWVtZW50IHlvdSBtYXkgaGF2ZSBleGVjdXRlZFxuICAgICAgd2l0aCBMaWNlbnNvciByZWdhcmRpbmcgc3VjaCBDb250cmlidXRpb25zLlxuXG4gICA2LiBUcmFkZW1hcmtzLiBUaGlzIExpY2Vuc2UgZG9lcyBub3QgZ3JhbnQgcGVybWlzc2lvbiB0byB1c2UgdGhlIHRyYWRlXG4gICAgICBuYW1lcywgdHJhZGVtYXJrcywgc2VydmljZSBtYXJrcywgb3IgcHJvZHVjdCBuYW1lcyBvZiB0aGUgTGljZW5zb3IsXG4gICAgICBleGNlcHQgYXMgcmVxdWlyZWQgZm9yIHJlYXNvbmFibGUgYW5kIGN1c3RvbWFyeSB1c2UgaW4gZGVzY3JpYmluZyB0aGVcbiAgICAgIG9yaWdpbiBvZiB0aGUgV29yayBhbmQgcmVwcm9kdWNpbmcgdGhlIGNvbnRlbnQgb2YgdGhlIE5PVElDRSBmaWxlLlxuXG4gICA3LiBEaXNjbGFpbWVyIG9mIFdhcnJhbnR5LiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3JcbiAgICAgIGFncmVlZCB0byBpbiB3cml0aW5nLCBMaWNlbnNvciBwcm92aWRlcyB0aGUgV29yayAoYW5kIGVhY2hcbiAgICAgIENvbnRyaWJ1dG9yIHByb3ZpZGVzIGl0cyBDb250cmlidXRpb25zKSBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICAgICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3JcbiAgICAgIGltcGxpZWQsIGluY2x1ZGluZywgd2l0aG91dCBsaW1pdGF0aW9uLCBhbnkgd2FycmFudGllcyBvciBjb25kaXRpb25zXG4gICAgICBvZiBUSVRMRSwgTk9OLUlORlJJTkdFTUVOVCwgTUVSQ0hBTlRBQklMSVRZLCBvciBGSVRORVNTIEZPUiBBXG4gICAgICBQQVJUSUNVTEFSIFBVUlBPU0UuIFlvdSBhcmUgc29sZWx5IHJlc3BvbnNpYmxlIGZvciBkZXRlcm1pbmluZyB0aGVcbiAgICAgIGFwcHJvcHJpYXRlbmVzcyBvZiB1c2luZyBvciByZWRpc3RyaWJ1dGluZyB0aGUgV29yayBhbmQgYXNzdW1lIGFueVxuICAgICAgcmlza3MgYXNzb2NpYXRlZCB3aXRoIFlvdXIgZXhlcmNpc2Ugb2YgcGVybWlzc2lvbnMgdW5kZXIgdGhpcyBMaWNlbnNlLlxuXG4gICA4LiBMaW1pdGF0aW9uIG9mIExpYWJpbGl0eS4gSW4gbm8gZXZlbnQgYW5kIHVuZGVyIG5vIGxlZ2FsIHRoZW9yeSxcbiAgICAgIHdoZXRoZXIgaW4gdG9ydCAoaW5jbHVkaW5nIG5lZ2xpZ2VuY2UpLCBjb250cmFjdCwgb3Igb3RoZXJ3aXNlLFxuICAgICAgdW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IChzdWNoIGFzIGRlbGliZXJhdGUgYW5kIGdyb3NzbHlcbiAgICAgIG5lZ2xpZ2VudCBhY3RzKSBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc2hhbGwgYW55IENvbnRyaWJ1dG9yIGJlXG4gICAgICBsaWFibGUgdG8gWW91IGZvciBkYW1hZ2VzLCBpbmNsdWRpbmcgYW55IGRpcmVjdCwgaW5kaXJlY3QsIHNwZWNpYWwsXG4gICAgICBpbmNpZGVudGFsLCBvciBjb25zZXF1ZW50aWFsIGRhbWFnZXMgb2YgYW55IGNoYXJhY3RlciBhcmlzaW5nIGFzIGFcbiAgICAgIHJlc3VsdCBvZiB0aGlzIExpY2Vuc2Ugb3Igb3V0IG9mIHRoZSB1c2Ugb3IgaW5hYmlsaXR5IHRvIHVzZSB0aGVcbiAgICAgIFdvcmsgKGluY2x1ZGluZyBidXQgbm90IGxpbWl0ZWQgdG8gZGFtYWdlcyBmb3IgbG9zcyBvZiBnb29kd2lsbCxcbiAgICAgIHdvcmsgc3RvcHBhZ2UsIGNvbXB1dGVyIGZhaWx1cmUgb3IgbWFsZnVuY3Rpb24sIG9yIGFueSBhbmQgYWxsXG4gICAgICBvdGhlciBjb21tZXJjaWFsIGRhbWFnZXMgb3IgbG9zc2VzKSwgZXZlbiBpZiBzdWNoIENvbnRyaWJ1dG9yXG4gICAgICBoYXMgYmVlbiBhZHZpc2VkIG9mIHRoZSBwb3NzaWJpbGl0eSBvZiBzdWNoIGRhbWFnZXMuXG5cbiAgIDkuIEFjY2VwdGluZyBXYXJyYW50eSBvciBBZGRpdGlvbmFsIExpYWJpbGl0eS4gV2hpbGUgcmVkaXN0cmlidXRpbmdcbiAgICAgIHRoZSBXb3JrIG9yIERlcml2YXRpdmUgV29ya3MgdGhlcmVvZiwgWW91IG1heSBjaG9vc2UgdG8gb2ZmZXIsXG4gICAgICBhbmQgY2hhcmdlIGEgZmVlIGZvciwgYWNjZXB0YW5jZSBvZiBzdXBwb3J0LCB3YXJyYW50eSwgaW5kZW1uaXR5LFxuICAgICAgb3Igb3RoZXIgbGlhYmlsaXR5IG9ibGlnYXRpb25zIGFuZC9vciByaWdodHMgY29uc2lzdGVudCB3aXRoIHRoaXNcbiAgICAgIExpY2Vuc2UuIEhvd2V2ZXIsIGluIGFjY2VwdGluZyBzdWNoIG9ibGlnYXRpb25zLCBZb3UgbWF5IGFjdCBvbmx5XG4gICAgICBvbiBZb3VyIG93biBiZWhhbGYgYW5kIG9uIFlvdXIgc29sZSByZXNwb25zaWJpbGl0eSwgbm90IG9uIGJlaGFsZlxuICAgICAgb2YgYW55IG90aGVyIENvbnRyaWJ1dG9yLCBhbmQgb25seSBpZiBZb3UgYWdyZWUgdG8gaW5kZW1uaWZ5LFxuICAgICAgZGVmZW5kLCBhbmQgaG9sZCBlYWNoIENvbnRyaWJ1dG9yIGhhcm1sZXNzIGZvciBhbnkgbGlhYmlsaXR5XG4gICAgICBpbmN1cnJlZCBieSwgb3IgY2xhaW1zIGFzc2VydGVkIGFnYWluc3QsIHN1Y2ggQ29udHJpYnV0b3IgYnkgcmVhc29uXG4gICAgICBvZiB5b3VyIGFjY2VwdGluZyBhbnkgc3VjaCB3YXJyYW50eSBvciBhZGRpdGlvbmFsIGxpYWJpbGl0eS5cblxuICAgRU5EIE9GIFRFUk1TIEFORCBDT05ESVRJT05TXG5cbiAgIEFQUEVORElYOiBIb3cgdG8gYXBwbHkgdGhlIEFwYWNoZSBMaWNlbnNlIHRvIHlvdXIgd29yay5cblxuICAgICAgVG8gYXBwbHkgdGhlIEFwYWNoZSBMaWNlbnNlIHRvIHlvdXIgd29yaywgYXR0YWNoIHRoZSBmb2xsb3dpbmdcbiAgICAgIGJvaWxlcnBsYXRlIG5vdGljZSwgd2l0aCB0aGUgZmllbGRzIGVuY2xvc2VkIGJ5IGJyYWNrZXRzIFwiW11cIlxuICAgICAgcmVwbGFjZWQgd2l0aCB5b3VyIG93biBpZGVudGlmeWluZyBpbmZvcm1hdGlvbi4gKERvbid0IGluY2x1ZGVcbiAgICAgIHRoZSBicmFja2V0cyEpICBUaGUgdGV4dCBzaG91bGQgYmUgZW5jbG9zZWQgaW4gdGhlIGFwcHJvcHJpYXRlXG4gICAgICBjb21tZW50IHN5bnRheCBmb3IgdGhlIGZpbGUgZm9ybWF0LiBXZSBhbHNvIHJlY29tbWVuZCB0aGF0IGFcbiAgICAgIGZpbGUgb3IgY2xhc3MgbmFtZSBhbmQgZGVzY3JpcHRpb24gb2YgcHVycG9zZSBiZSBpbmNsdWRlZCBvbiB0aGVcbiAgICAgIHNhbWUgXCJwcmludGVkIHBhZ2VcIiBhcyB0aGUgY29weXJpZ2h0IG5vdGljZSBmb3IgZWFzaWVyXG4gICAgICBpZGVudGlmaWNhdGlvbiB3aXRoaW4gdGhpcmQtcGFydHkgYXJjaGl2ZXMuXG5cbiAgIENvcHlyaWdodCAyMDIzIERhbmllbCBXaXJ0eiA8ZGNvZGVAZGNvZGUuaW8+XG5cbiAgIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAgIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAgIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuLy8gVGhpcyB3b3Jrcy4uLiBidXQgZG9uJ3QgdHJ5IHRvIGNvbXBhcmUgb25lIHRvIGEgcmVhbCBMb25nLmpzIExvbmchXG4vLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG4vLyBgfCAwYCBhc3N1cmVzIHRoZSBydW50aW1lIHRoYXQgd2UgYXJlIHVzaW5nIGludGVnZXIgYXJpdGhtZXRpY1xuZXhwb3J0IGNsYXNzIExvbmcge1xuICBsb3c6IG51bWJlcjtcbiAgaGlnaDogbnVtYmVyO1xuICBfX2lzVW5zaWduZWRMb25nX186IGJvb2xlYW47XG5cbiAgc3RhdGljIGlzTG9uZyhvYmo6IExvbmcpIHtcbiAgICByZXR1cm4gKG9iaiAmJiBvYmouX19pc1Vuc2lnbmVkTG9uZ19fKSA9PT0gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxvdzogbnVtYmVyLCBoaWdoOiBudW1iZXIpIHtcbiAgICB0aGlzLmxvdyA9IGxvdyB8IDA7XG4gICAgdGhpcy5oaWdoID0gaGlnaCB8IDA7XG4gICAgdGhpcy5fX2lzVW5zaWduZWRMb25nX18gPSB0cnVlO1xuICB9XG5cbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHN0YXRpYyBmcm9tQnl0ZXNMRShieXRlczogbnVtYmVyW10pOiBMb25nIHtcbiAgICByZXR1cm4gbmV3IExvbmcoXG4gICAgICBieXRlc1swXSB8XG4gICAgICBieXRlc1sxXSA8PCA4IHxcbiAgICAgIGJ5dGVzWzJdIDw8IDE2IHxcbiAgICAgIGJ5dGVzWzNdIDw8IDI0LFxuICAgICAgYnl0ZXNbNF0gfFxuICAgICAgYnl0ZXNbNV0gPDwgOCB8XG4gICAgICBieXRlc1s2XSA8PCAxNiB8XG4gICAgICBieXRlc1s3XSA8PCAyNCxcbiAgICApO1xuICB9XG5cbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHRvQnl0ZXNMRSgpIHtcbiAgICBjb25zdCBoaSA9IHRoaXMuaGlnaDtcbiAgICBjb25zdCBsbyA9IHRoaXMubG93O1xuICAgIHJldHVybiBbXG4gICAgICBsbyAmIDB4ZmYsXG4gICAgICBsbyA+Pj4gOCAmIDB4ZmYsXG4gICAgICBsbyA+Pj4gMTYgJiAweGZmLFxuICAgICAgbG8gPj4+IDI0LFxuICAgICAgaGkgJiAweGZmLFxuICAgICAgaGkgPj4+IDggJiAweGZmLFxuICAgICAgaGkgPj4+IDE2ICYgMHhmZixcbiAgICAgIGhpID4+PiAyNFxuICAgIF07XG4gIH1cblxuICBzdGF0aWMgZnJvbU51bWJlcih2YWx1ZTogbnVtYmVyKSB7XG4gICAgaWYgKGlzTmFOKHZhbHVlKSkgcmV0dXJuIFVaRVJPO1xuICAgIGlmICh2YWx1ZSA8IDApIHJldHVybiBVWkVSTztcbiAgICBpZiAodmFsdWUgPj0gVFdPX1BXUl82NF9EQkwpIHJldHVybiBNQVhfVU5TSUdORURfVkFMVUU7XG4gICAgcmV0dXJuIG5ldyBMb25nKHZhbHVlICUgVFdPX1BXUl8zMl9EQkwgfCAwLCAodmFsdWUgLyBUV09fUFdSXzMyX0RCTCkgfCAwKTtcbiAgfVxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAoXG4gICAgICBCaWdJbnQodGhpcy5oaWdoKSAqIEJpZ0ludChUV09fUFdSXzMyX0RCTCkgK1xuICAgICAgQmlnSW50KHRoaXMubG93KVxuICAgICkudG9TdHJpbmcoKTtcbiAgfVxuXG4gIGVxdWFscyhvdGhlcjogTG9uZykge1xuICAgIGlmICghTG9uZy5pc0xvbmcob3RoZXIpKSBvdGhlciA9IExvbmcuZnJvbVZhbHVlKG90aGVyKTtcbiAgICBpZiAodGhpcy5oaWdoID4+PiAzMSA9PT0gMSAmJiBvdGhlci5oaWdoID4+PiAzMSA9PT0gMSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmhpZ2ggPT09IG90aGVyLmhpZ2ggJiYgdGhpcy5sb3cgPT09IG90aGVyLmxvdztcbiAgfVxuXG4gIG5vdEVxdWFscyhvdGhlcjogTG9uZykge1xuICAgIHJldHVybiAhdGhpcy5lcXVhbHMob3RoZXIpO1xuICB9XG5cbiAgY29tcChvdGhlcjogTG9uZykge1xuICAgIGlmICghTG9uZy5pc0xvbmcob3RoZXIpKSBvdGhlciA9IExvbmcuZnJvbVZhbHVlKG90aGVyKTtcbiAgICBpZiAodGhpcy5lcXVhbHMob3RoZXIpKSByZXR1cm4gMDtcbiAgICByZXR1cm4gb3RoZXIuaGlnaCA+Pj4gMCA+IHRoaXMuaGlnaCA+Pj4gMCB8fFxuICAgICAgKG90aGVyLmhpZ2ggPT09IHRoaXMuaGlnaCAmJiBvdGhlci5sb3cgPj4+IDAgPiB0aGlzLmxvdyA+Pj4gMClcbiAgICAgID8gLTFcbiAgICAgIDogMTtcbiAgfVxuXG4gIGxlc3NUaGFuT3JFcXVhbChvdGhlcjogTG9uZykge1xuICAgIHJldHVybiB0aGlzLmNvbXAoLyogdmFsaWRhdGVzICovIG90aGVyKSA8PSAwO1xuICB9XG5cbiAgc3RhdGljIGZyb21WYWx1ZSh2YWw6IGFueSkge1xuICAgIGlmICh0eXBlb2YgdmFsID09PSBcIm51bWJlclwiKSByZXR1cm4gTG9uZy5mcm9tTnVtYmVyKHZhbCk7XG4gICAgLy8gVGhyb3dzIGZvciBub24tb2JqZWN0cywgY29udmVydHMgbm9uLWluc3RhbmNlb2YgTG9uZzpcbiAgICByZXR1cm4gbmV3IExvbmcodmFsLmxvdywgdmFsLmhpZ2gpO1xuICB9XG59XG5cbmNvbnN0IFVaRVJPID0gbmV3IExvbmcoMCwgMCk7XG5jb25zdCBUV09fUFdSXzE2X0RCTCA9IDEgPDwgMTY7XG5jb25zdCBUV09fUFdSXzMyX0RCTCA9IFRXT19QV1JfMTZfREJMICogVFdPX1BXUl8xNl9EQkw7XG5jb25zdCBUV09fUFdSXzY0X0RCTCA9IFRXT19QV1JfMzJfREJMICogVFdPX1BXUl8zMl9EQkw7XG5jb25zdCBNQVhfVU5TSUdORURfVkFMVUUgPSBuZXcgTG9uZygweGZmZmZmZmZmIHwgMCwgMHhmZmZmZmZmZiB8IDApO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/convex/dist/esm/vendor/long.js\n");

/***/ })

};
;